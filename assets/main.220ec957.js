var Ad=Object.defineProperty,Md=Object.defineProperties;var Dd=Object.getOwnPropertyDescriptors;var yl=Object.getOwnPropertySymbols;var Pd=Object.prototype.hasOwnProperty,Od=Object.prototype.propertyIsEnumerable;var go=(t,e,r)=>e in t?Ad(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,st=(t,e)=>{for(var r in e||(e={}))Pd.call(e,r)&&go(t,r,e[r]);if(yl)for(var r of yl(e))Od.call(e,r)&&go(t,r,e[r]);return t},mo=(t,e)=>Md(t,Dd(e));var $e=(t,e,r)=>(go(t,typeof e!="symbol"?e+"":e,r),r);/* empty css              */const Ld=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}};Ld();const Ae={defaultSubOntologies:["bb","ob","ciox","he","it4it"],allSubOntologies:["meta","bb","ob","ciox","he","he-unconsolidated","it4it"],color:new Map([["ciox","rgb(80,255,250)"],["meta","rgb(255,80,80)"],["ob","rgb(255,173,30)"],["bb","rgb(30,152,255)"],["he","rgb(150,255,120)"],["it","rgb(204, 0, 204)"],["it4it","rgb(255, 255, 0)"]]),nodeSize:39,helperGraphs:["limes-exact","match"],activeOptions:[],searchCloseMatch:!0,logLevelConsole:"debug",logLevelDisplay:"info",logLevelMemory:"debug",layoutCacheMinRecall:.95,layoutCacheMinPrecision:.5,language:"en",download:{image:{max:{width:5e3,height:4e3},standard:{width:1920,height:1920}}},sparql:{endpoint:"https://www.snik.eu/sparql",graph:"http://www.snik.eu/ontology",instances:!1,isSnik:!0},multiview:{initialTabs:1,warnOnSessionLoad:!0}};var Je=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wc={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.log=r()})(Je,function(){var e=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function i(p,m){var g=p[m];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(p){return p==="debug"&&(p="log"),typeof console===r?!1:p==="trace"&&n?o:console[p]!==void 0?i(console,p):console.log!==void 0?i(console,"log"):e}function l(p,m){for(var g=0;g<a.length;g++){var b=a[g];this[b]=g<p?e:this.methodFactory(b,p,m)}this.log=this.debug}function u(p,m,g){return function(){typeof console!==r&&(l.call(this,m,g),this[p].apply(this,arguments))}}function c(p,m,g){return s(p)||u.apply(this,arguments)}function f(p,m,g){var b=this,w;m=m==null?"WARN":m;var y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function C(S){var I=(a[S]||"silent").toUpperCase();if(!(typeof window===r||!y)){try{window.localStorage[y]=I;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+I+";"}catch{}}}function E(){var S;if(!(typeof window===r||!y)){try{S=window.localStorage[y]}catch{}if(typeof S===r)try{var I=window.document.cookie,k=I.indexOf(encodeURIComponent(y)+"=");k!==-1&&(S=/^([^;]+)/.exec(I.slice(k))[1])}catch{}return b.levels[S]===void 0&&(S=void 0),S}}function x(){if(!(typeof window===r||!y)){try{window.localStorage.removeItem(y);return}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}b.name=p,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=g||c,b.getLevel=function(){return w},b.setLevel=function(S,I){if(typeof S=="string"&&b.levels[S.toUpperCase()]!==void 0&&(S=b.levels[S.toUpperCase()]),typeof S=="number"&&S>=0&&S<=b.levels.SILENT){if(w=S,I!==!1&&C(S),l.call(b,S,p),typeof console===r&&S<b.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+S},b.setDefaultLevel=function(S){m=S,E()||b.setLevel(S,!1)},b.resetLevel=function(){b.setLevel(m,!1),x()},b.enableAll=function(S){b.setLevel(b.levels.TRACE,S)},b.disableAll=function(S){b.setLevel(b.levels.SILENT,S)};var _=E();_==null&&(_=m),b.setLevel(_,!1)}var d=new f,v={};d.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var g=v[m];return g||(g=v[m]=new f(m,d.getLevel(),d.methodFactory)),g};var h=typeof window!==r?window.log:void 0;return d.noConflict=function(){return typeof window!==r&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return v},d.default=d,d})})(wc);var se=wc.exports;const xc={GRAPH_BB:"http://www.snik.eu/ontology/bb",PREFIX:"http://www.snik.eu/ontology/",ENDPOINT:"https://www.snik.eu/sparql"};async function vr(t,e,r=Ae.sparql.endpoint){const n=typeof window!="undefined";let a=r+"?query="+encodeURIComponent(t)+"&format=json";e&&(a+="&default-graph-uri="+encodeURIComponent(e));try{const s=(await(await fetch(a)).json()).results.bindings;return n&&console.groupCollapsed("SPARQL "+t.split(`
`,1)[0]+"..."),n&&s.length<100&&console.table(s.map(l=>Object.keys(l).reduce((u,c)=>(u[c]=l[c].value,u),{}))),se.debug(t),se.debug(a),n&&console.groupEnd(),s}catch(i){return se.error(i),se.error(`Error executing SPARQL query:
${t}
URL: ${a}

`),[]}}async function Bd(t,e){const r="describe <"+t+">",n=Ae.sparql.endpoint+"?query="+encodeURIComponent(r)+"&format=text"+(e?"&default-graph-uri="+encodeURIComponent(e):"");try{return await(await fetch(n)).text()}catch(a){throw new Error(`Error executing SPARQL query ${r}: ${a}`)}}function Bn(t){const e=new Date;return{stop:function(r){const a=new Date().getTime()-e.getTime();se.debug(t+" finished in "+a+" ms"+(r?` (${r})`:""))}}}async function Rd(t){const e=Bn("sparql-classes"),n=`
  PREFIX ov: <http://open.vocab.org/terms/>
  PREFIX meta: <http://www.snik.eu/ontology/meta/>
  SELECT DISTINCT(?c)
  GROUP_CONCAT(DISTINCT(CONCAT(?l,"@",lang(?l)));separator="|") AS ?l
  SAMPLE(?st) AS ?st
  ?src
  SAMPLE(?inst) AS ?inst
  ${t}
  {
    ?c a owl:Class.
    OPTIONAL {?src ov:defines ?c.}
    OPTIONAL {?c rdf:type ?st. FILTER(?st!=owl:Class)}
    OPTIONAL {?c rdfs:label ?l.}
    OPTIONAL {?inst a ?c.}
  }`,a=await vr(n);return e.stop(a.length+" classes"),a}function Ec(t){const e=t.split("|"),r={};for(const n of e){const[a,i]=n.split("@");!a.trim()||(r[i]||(r[i]=[]),r[i].push(a))}return r}async function bl(t){const e=await Rd(t),r=[],n=new Set;for(let o=0;o<e.length;o++){let s;e[o].src&&(s=e[o].src.value,s.includes("http://www.snik.eu/ontology/")&&(s=s.replace("http://www.snik.eu/ontology/","")),n.add(s)),r.push({group:"nodes",data:st(st(st({id:e[o].c.value,l:Ec(e[o].l.value)},e[o].st&&{st:e[o].st.value.replace("http://www.snik.eu/ontology/meta/","").substring(0,1)}),s&&{source:s}),e[o].inst&&{inst:!0})})}const a=["rgb(30,152,255)","rgb(255,173,30)","rgb(80,255,250)","rgb(150,255,120)","rgb(204, 0, 204)","rgb(255, 255, 0)"];let i=0;for(const o of n)Ae.color.has(o)||(Ae.color.set(o,a[i]),i=(i+1)%a.length);return se.debug(e.length+" Nodes loaded from SPARQL"),r}async function Nd(t){const e=Bn("sparql-classes"),r=`SELECT
  DISTINCT(?i)
  GROUP_CONCAT(DISTINCT(CONCAT(?l,"@",lang(?l)));separator="|") AS ?l
  ${t}
  {
    ?i a [a owl:Class].
    OPTIONAL {?i rdfs:label ?l.}
  }
  `,n=await vr(r);return e.stop(n.length+" instances"),n}async function zd(t){const e=await Nd(t),r=[];for(let n=0;n<e.length;n++)r.push({group:"nodes",data:{id:e[n].i.value,l:Ec(e[n].l.value),instance:!0}});return r}async function Fd(t,e,r,n){const a=Bn("sparql-properties"),i=`
    select  ?c ?p ?d
    ${t}
    {
      {?c ?p ?d.} ${n?" UNION {?p rdfs:domain ?c; rdfs:range ?d.}":""}
      {?c a owl:Class.} ${r?" UNION {?c a [a owl:Class]}":""}
      {?d a owl:Class.} ${r?" UNION {?d a [a owl:Class]}":""}
    }`,o=`PREFIX sniko: <http://www.snik.eu/ontology/>
    select  ?c ?p ?d ?g (MIN(?ax) as ?ax)
    ${t}
    ${e}
    {
      graph ?g {?c ?p ?d.}
      filter(?g!=sniko:)
      {?c a owl:Class.} ${r?" UNION {?c a [a owl:Class]}":""}
      {?d a owl:Class.} ${r?" UNION {?d a [a owl:Class]}":""}
      filter(?p!=rdf:type)
      OPTIONAL
      {
        ?ax a owl:Axiom;
        owl:annotatedSource ?c;
        owl:annotatedProperty ?p;
        owl:annotatedTarget ?d.
      }
    }`,s=Ae.sparql.endpoint.includes("snik.eu/sparql")?o:i,l=await vr(s);return a.stop(l.length+" properties"),l}async function $d(t,e,r,n){const a=await Fd(t,e,r,n),i=[];for(let o=0;o<a.length;o++)i.push({group:"edges",data:st(st({source:a[o].c.value,target:a[o].d.value,id:String(o),p:a[o].p.value,pl:a[o].p.value.replace(/.*[#/]/,"")},a[o].g&&{g:a[o].g.value}),a[o].ax&&{ax:a[o].ax.value})});return se.debug(a.length+" Edges loaded from SPARQL"),i}async function Hd(t,e){if(!e)return bl(t);const[r,n]=await Promise.all([bl(t),zd(t)]);return r.concat(n)}async function Cc(t,e,r=!1,n=!1){se.debug(`Loading graph from endpoint ${Ae.sparql.endpoint} with graphs ${e}.`);const a=e.map(l=>`FROM <${l}>`).reduce((l,u)=>l+`
`+u,""),i=a.replace(/FROM/g,"FROM NAMED"),[o,s]=await Promise.all([Hd(a,r),$d(a,i,r,n)]);t.elements().remove(),t.add(o),t.add(s),t.elements().addClass("unfiltered")}const xe={ID:"id",LABEL:"l",LABEL_GERMAN:"de",LABEL_ENGLISH:"en",LABEL_PERSIAN:"fa",SUBTOP:"st",SOURCE:"source",INSTANCE:"inst",SUBTOP_ENTITY_TYPE:"E",SUBTOP_ROLE:"R",SUBTOP_FUNCTION:"F"},Wr="3.0.0",Vd=500;function Mt(t){const e=document.getElementById(t);if(!e)throw new Error(`Element with id ${t} does not exist.`);return e}const qd="https://github.com/snikproject/snik-graph",pi="https://github.com/snikproject/ontology";function ia(t,e,r,n){let a=encodeURIComponent(r);if(n){const i=n.map(s=>encodeURIComponent(s));let o=i.reduce((s,l)=>s+"%0A"+l);for(;o.length>Vd;)i.shift(),o=i.reduce((s,l)=>s+"%0A"+l,"");a+="%0A%60%60%60%0A"+o+"%0A%60%60%60"}window.open(`${t}/issues/new?title=${encodeURIComponent(e)}&body=${a}`)}const Sc=t=>e=>{switch(e.key){case" ":case"Enter":t.click()}};function _c(t,e,r){const n=document.createElement("div");return n.classList.add("dropdown-entry-checkboxtext"),n.innerText=e,r&&n.setAttribute("data-i18n",r),n.addEventListener("click",()=>{t.click()}),n}const Me={SOURCE:"source",TARGET:"target",ID:"id",PROPERTY:"p",PROPERTY_LABEL:"pl",GRAPH:"g",AXIOM:"ax"},Wd={idStrings:{file:"File","load-sparql":"Load from SPARQL endpoint","load-session":"Load session","load-view":"Load Partial Graph","save-session":"Save Session","save-snik-graph":"Save complete SNIK Graph as Cytoscape File","save-view":"Save current Partial Graph","recalculate-layout-replace":"Recalculate Layout and Replace in Browser Cache","save-image-current-view":"Save Image of Current View","save-image-whole-graph":"Save Image of Whole Graph","save-image-current-view-high-res":"Save Image of Current View (high res)","save-image-whole-graph-high-res":"Save Image of Whole Graph (high res)",filter:"Filter",options:"Options",separateSubs:"separate subontologies",cumulativeSearch:"cumulative search",grid:"show grid",dayMode:"day mode",devMode:"developer mode",extMode:"extended mode",combineMatchMode:"Combine Matches",showInstances:"Show Instances",starNewView:"Star in new View",layout:"Layout","show-close-matches":"show close matches","recalculate-layout":"recalculate layout","tight-layout":"tight layout","compound-layout":"compound layout","bb-chapter-search":"BB chapter search","ob-chapter-search":"OB chapter search","reset-view":"reset main view","move-match-on-top":"move matches on top of each other","move-match-nearby":"move matches nearby","subontology-connectivity":"subontology connectivity","change-title":"change title of active View",services:"Services","sparql-endpoint":"SPARQL Endpoint","rdf-browser":"RDF Browser",language:"Language",english:"english",german:"german",persian:"persian",help:"Help","deselect-all":"deselect all","search-field":"search field","base-mode":"basic menu items","context-menu":"context menu","incoming-star":"incoming star","outgoing-star":"outgoing star","combine-close-matches":"combine close matches","class-use":"class use","show-instances":"show instances"},messageStrings:{"no-search-results-for":"No Search Results for","ontology-issue-warning":"Please note that this is only for feedback about the ontology! Please check if there is already an issue for your problem. If not, we will consider your feedback ASAP."}},Ud={idStrings:{file:"Datei","load-sparql":"Lade aus dem SPARQL Endpunkt","load-session":"Lade gespeicherte Sitzung","load-view":"Lade Teilgraph","save-session":"Speichere aktuelle Sitzung","save-snik-graph":"Speichere kompletten SNIK Graph als Cytoscape Datei","save-view":"Speichere aktuellen Teilgraphen","recalculate-layout-replace":"Layout neu berechnen und im Browser Cache platzieren","save-image-current-view":"Speichere Bilddatei der aktuellen Ansicht","save-image-whole-graph":"Speichere Bilddatei des kompletten Graphen","save-image-current-view-high-res":"Speichere Bilddatei der aktuellen Ansicht (hohe Aufl\xF6sung)","save-image-whole-graph-high-res":"Speichere Bilddatei des kompletten Graphen (hohe Aufl\xF6sung)",filter:"Filter",options:"Optionen",separateSubs:"nach Subontologien aufspalten",cumulativeSearch:"Kumulative Suche",grid:"Raster anzeigen",dayMode:"Tag-Modus",devMode:"Entwickler-Modus",extMode:"Erweiterter Modus",combineMatchMode:"\xDCbereinstimmungen zusammenfassen",showInstances:"Instanzen zeigen",layout:"Layout","show-close-matches":"Zeige close matches","recalculate-layout":"Layout neu berechnen","tight-layout":"Dichtes Layout","compound-layout":"verbundenes Layout","bb-chapter-search":"BB Kapitelsuche","ob-chapter-search":"OB Kapitelsuche","reset-view":"Ansicht des Gesamtmodells zur\xFCcksetzen","move-match-on-top":"Zeige close matches \xFCbereinander","move-match-nearby":"Zeige close matches verbunden","subontology-connectivity":"Konnektivit\xE4t zwischen Subontologien","change-title":"Titel des aktuellen View \xE4ndern",services:"Services","sparql-endpoint":"SPARQL Endpunkt","rdf-browser":"RDF Browser",language:"Sprache",english:"Englisch",german:"Deutsch",persian:"Persisch",help:"Hilfe","deselect-all":"alle abw\xE4hlen","search-field":"Suchfeld","base-mode":"Basismodus","context-menu":"Kontextmen\xFC","incoming-star":"eingehener Stern","outgoing-star":"ausgehender Stern","combine-close-matches":"kombiniere close matches","class-use":"Klassenbenutzung","show-instances":"zeige Instanzen"},messageStrings:{"no-search-results-for":"Keine Suchresultate f\xFCr","ontology-issue-warning":"Bitte hier nur Feedback zur Ontologie hinterlassen! Bitte pr\xFCfen Sie vorher, ob es schon eine Issue mit diesem Thema gibt. Wenn nicht, bearbeiten wir Ihr Feedback so schnell wie m\xF6glich."}},_s={en:Wd,de:Ud,fa:{idStrings:{},messageStrings:{}}};let bn="en";function Gd(t){return se.debug(`Set language from ${bn} to ${t}.`),_s[t]?(bn=t,!0):(se.warn(`Language ${t} not found. Keeping language ${bn}.`),!1)}function Tc(){return bn}function kc(t){const e=_s[bn];return e.all||(e.all=st(st({},e.idStrings),e.messageStrings)),e.all[t]}function Kd(){return _s[bn].idStrings}const Qo={SPARUL_WARNING:'Please be careful with all SPARUL operations and always create a <a href="https://wiki.imise.uni-leipzig.de/Projekte/SNIK/ontologie/sparql">SPARQL dump</a> as a backup beforehand.'};function Yd(){const t=Kd(),e=[];for(const r of Object.keys(t)){const n=document.querySelectorAll(`[data-i18n="${r}"]`);if(n.length===0){e.push(r);continue}for(const a of n){const i=t[r];switch(a.tagName){case"A":case"BUTTON":case"DIV":case"SPAN":a.textContent=i;break;default:se.warn(`Cannot assign text "${i}" to element with i18n key ${r} because its tag type ${a.tagName} is unsupported.`)}}}e.length>0&&se.debug(`UpdateHtml: i18n keys ${e.toString()} not used`)}const yo={format_version:"1.0",generated_by:"cytoscape-3.4.0",target_cytoscapejs_version:"~2.1",title:"MyStyle1",style:[{selector:"node",css:{"min-zoomed-font-size":5,width:Ae.nodeSize,height:Ae.nodeSize,"font-size":11,"text-valign":"center","text-halign":"center","border-opacity":1,"border-width":function(t){return t.data(xe.INSTANCE)?1:0},"font-family":"sans-serif","font-weight":"normal","background-opacity":.5882352941176471,"text-opacity":1,shape:function(t){switch(t.data(xe.SUBTOP)){case xe.SUBTOP_ENTITY_TYPE:return"rectangle";case xe.SUBTOP_ROLE:return"ellipse";case xe.SUBTOP_FUNCTION:return"triangle"}switch(t.data(xe.ID)){case"http://www.snik.eu/ontology/meta/EntityType":return"rectangle";case"http://www.snik.eu/ontology/meta/Role":return"ellipse";case"http://www.snik.eu/ontology/meta/Function":return"triangle";default:return"hexagon"}},label:function(t){let e=t.data(xe.LABEL);if(!e)return t.data(xe.ID);let r;if((r=e[Tc()])&&(r=r[0]))e=r;else{let n=!1;for(const a of[xe.LABEL_ENGLISH,xe.LABEL_GERMAN,xe.LABEL_PERSIAN])if((r=e[a])&&r[0]){e=r[0],n=!0;break}if(!n){const a=Object.keys(e);a.length>0?e=e[a[0]]:e=t.data(xe.ID)}}return t.data(xe.INSTANCE)&&(e+="*"),e}}},{selector:"node.source",css:{"border-width":5}},{selector:"node.target",css:{"border-width":5}},{selector:"node.highlighted",css:{"border-width":5}},{selector:"node:selected",css:{"border-width":8}},{selector:"edge",css:{"z-compound-depth":"bottom",width:2,opacity:.2}},{selector:"edge.highlighted,edge:selected,edge.starmode",css:{"text-opacity":1,"mid-target-arrow-shape":function(t){switch(t.data(Me.PROPERTY)){case"http://www.snik.eu/ontology/meta/isAssociatedWith":case"http://www.w3.org/2004/02/skos/core#closeMatch":case"http://www.w3.org/2004/02/skos/core#relatedMatch":case"http://www.w3.org/2004/02/skos/core#related":case"http://www.w3.org/2004/02/skos/core#exactMatch":return"none"}return"triangle"},"text-margin-y":"-1em","min-zoomed-font-size":5,"font-size":11,label:function(t){let e=t.data(Me.PROPERTY_LABEL);return t.data(Me.GRAPH)==="http://www.snik.eu/ontology/limes-exact"&&(e+=" \u26A0"),e}}},{selector:"edge.highlighted,edge:selected",css:{width:4,opacity:1}},{selector:".filtered",css:{display:"none"}},{selector:".hidden",css:{visibility:"hidden"}},{selector:"$node > node",css:{shape:"rectangle","border-width":10,"text-valign":"top","text-margin-y":"-0.7em","min-zoomed-font-size":7.5,"font-size":16,"background-opacity":"0"}},{selector:"node[i]",css:{shape:"star"}},{selector:"node",css:{"background-color":t=>{let e=Ae.color.get(t.data(xe.SOURCE));return e||(e="rgb(254,196,79)"),e},color:"white"}}]},wl=[{selector:"node",css:{color:"white","border-color":"white"}},{selector:"node:selected",css:{"background-color":"rgb(255,255,0)"}},{selector:"node.source",css:{"border-color":"rgb(128,255,128)"}},{selector:"node.target",css:{"border-color":"rgb(255,90,90)"}},{selector:"edge:unselected",css:{"line-color":function(t){return String(t.data(Me.PROPERTY)).substring(0,36)==="http://www.w3.org/2004/02/skos/core#"?"rgb(255,255,190)":"rgb(252,252,252)"}}},{selector:"edge.starmode",css:{color:"rgb(128,128,128)","mid-target-arrow-color":"rgb(128,128,128)"}},{selector:"edge:selected,edge.highlighted",css:{color:"rgb(255,255,128)","line-color":"rgb(255,255,128)","mid-target-arrow-color":"rgb(255,255,128)"}}],jd=[{selector:"node",css:{color:"black","border-color":"black"}},{selector:"node:selected",css:{"background-color":"rgb(0,0,255)"}},{selector:"node.source",css:{"border-color":"rgb(128,0,128)"}},{selector:"node.target",css:{"border-color":"rgb(0,165,165)"}},{selector:"edge[!selected]",css:{"line-color":function(t){return String(t.data(Me.PROPERTY)).substring(0,36)==="http://www.w3.org/2004/02/skos/core#"?"rgb(140,130,10)":"rgb(110,110,110)"}}},{selector:"edge.starmode",css:{opacity:1,"mid-target-arrow-color":"rgb(128,128,128)",color:"rgb(20,20,20)"}},{selector:"edge:selected,edge.highlighted",css:{color:"rgb(0,0,128)","line-color":"rgb(0,0,128)","mid-target-arrow-color":"rgb(0,0,128)"}}],Ic=[["meta","http://www.snik.eu/ontology/meta/"],["bb","http://www.snik.eu/ontology/bb/"],["ob","http://www.snik.eu/ontology/ob/"],["he","http://www.snik.eu/ontology/he/"],["ciox","http://www.snik.eu/ontology/ciox/"],["it4it","http://www.snik.eu/ontology/it4it/"],["it","http://www.snik.eu/ontology/it/"],["skos","http://www.w3.org/2004/02/skos/core#"],["rdfs","http://www.w3.org/2000/01/rdf-schema#"],["rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"]];function Si(t){for(const e of Ic)if(t.startsWith(e[1]))return e[1].replace(/\/$/,"");return t}function wn(t){for(const e of Ic)t=t.replace(e[1],e[0]+":");return t}function Xd(t){return t.startsWith("http://www.snik.eu/ontology/")?t.replace(/\/[^/]*$/,""):null}var _i=globalThis&&globalThis.__assign||function(){return _i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},_i.apply(this,arguments)},Zd={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},Qd=function(){function t(e){e===void 0&&(e={}),this.opts=_i(_i({},Zd),e)}return t.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),Jo(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),Jd(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&(typeof requestAnimationFrame!="undefined"?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function Jo(t,e){for(var r in e)t.style[r]=e[r];return t}function xl(t,e){return typeof t=="string"?t:t[e%t.length]}function Jd(t,e){var r=Math.round(e.corners*e.width*500)/1e3+"px",n="none";e.shadow===!0?n="0 2px 4px #000":typeof e.shadow=="string"&&(n=e.shadow);for(var a=ev(n),i=0;i<e.lines;i++){var o=~~(360/e.lines*i+e.rotate),s=Jo(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:xl(e.fadeColor,i),borderRadius:r,transformOrigin:"left",transform:"rotate("+o+"deg) translateX("+e.radius+"px)"}),l=i*e.direction/e.lines/e.speed;l-=1/e.speed;var u=Jo(document.createElement("div"),{width:"100%",height:"100%",background:xl(e.color,i),borderRadius:r,boxShadow:tv(a,o),animation:1/e.speed+"s linear "+l+"s infinite "+e.animation});s.appendChild(u),t.appendChild(s)}}function ev(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,r=[],n=0,a=t.split(",");n<a.length;n++){var i=a[n],o=i.match(e);if(o!==null){var s=+o[2],l=+o[5],u=o[4],c=o[7];s===0&&!u&&(u=c),l===0&&!c&&(c=u),u===c&&r.push({prefix:o[1]||"",x:s,y:l,xUnits:u,yUnits:c,end:o[8]})}}return r}function tv(t,e){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n],o=rv(i.x,i.y,e);r.push(i.prefix+o[0]+i.xUnits+" "+o[1]+i.yUnits+i.end)}return r.join(", ")}function rv(t,e,r){var n=r*Math.PI/180,a=Math.sin(n),i=Math.cos(n);return[Math.round((t*i+e*a)*1e3)/1e3,Math.round((-t*a+e*i)*1e3)/1e3]}const nv={lines:13,length:28,width:35,radius:84,scale:3,corners:1,color:"#ffffff",opacity:.6,rotate:35,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!0,position:"absolute"};let Ka=null,Ya=0;async function da(t){!window||(Ka||(Ka=new Qd(nv)),Ya||(document.body.classList.add("waiting"),Ka.spin(document.body)),Ya++,await t(),Ya--,Ya<=0&&(document.body.classList.remove("waiting"),Ka.stop()))}function av(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ja(t){return function(e){if(Array.isArray(e))return bo(e)}(t)||function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,r){if(!!e){if(typeof e=="string")return bo(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bo(e,r)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bo(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var El,wo,Rr,xo,Cl,Kt=(El=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],wo=function(){function t(n){var a=n.targetModal,i=n.triggers,o=i===void 0?[]:i,s=n.onShow,l=s===void 0?function(){}:s,u=n.onClose,c=u===void 0?function(){}:u,f=n.openTrigger,d=f===void 0?"data-micromodal-trigger":f,v=n.closeTrigger,h=v===void 0?"data-micromodal-close":v,p=n.openClass,m=p===void 0?"is-open":p,g=n.disableScroll,b=g!==void 0&&g,w=n.disableFocus,y=w!==void 0&&w,C=n.awaitCloseAnimation,E=C!==void 0&&C,x=n.awaitOpenAnimation,_=x!==void 0&&x,S=n.debugMode,I=S!==void 0&&S;(function(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")})(this,t),this.modal=document.getElementById(a),this.config={debugMode:I,disableScroll:b,openTrigger:d,closeTrigger:h,openClass:m,onShow:l,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:_,disableFocus:y},o.length>0&&this.registerTriggers.apply(this,ja(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,r;return e=t,(r=[{key:"registerTriggers",value:function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];i.filter(Boolean).forEach(function(s){s.addEventListener("click",function(l){return n.showModal(l)})})}},{key:"showModal",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var i=function o(){n.modal.removeEventListener("animationend",o,!1),n.setFocusToFirstNode()};this.modal.addEventListener("animationend",i,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,a)}},{key:"closeModal",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,n),this.config.awaitCloseAnimation){var i=this.config.openClass;this.modal.addEventListener("animationend",function o(){a.classList.remove(i),a.removeEventListener("animationend",o,!1)},!1)}else a.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(n){this.modal=document.getElementById(n),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(n){if(this.config.disableScroll){var a=document.querySelector("body");switch(n){case"enable":Object.assign(a.style,{overflow:""});break;case"disable":Object.assign(a.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(n){(n.target.hasAttribute(this.config.closeTrigger)||n.target.parentNode.hasAttribute(this.config.closeTrigger))&&(n.preventDefault(),n.stopPropagation(),this.closeModal(n))}},{key:"onKeydown",value:function(n){n.keyCode===27&&this.closeModal(n),n.keyCode===9&&this.retainFocus(n)}},{key:"getFocusableNodes",value:function(){var n=this.modal.querySelectorAll(El);return Array.apply(void 0,ja(n))}},{key:"setFocusToFirstNode",value:function(){var n=this;if(!this.config.disableFocus){var a=this.getFocusableNodes();if(a.length!==0){var i=a.filter(function(o){return!o.hasAttribute(n.config.closeTrigger)});i.length>0&&i[0].focus(),i.length===0&&a[0].focus()}}}},{key:"retainFocus",value:function(n){var a=this.getFocusableNodes();if(a.length!==0)if(a=a.filter(function(o){return o.offsetParent!==null}),this.modal.contains(document.activeElement)){var i=a.indexOf(document.activeElement);n.shiftKey&&i===0&&(a[a.length-1].focus(),n.preventDefault()),!n.shiftKey&&a.length>0&&i===a.length-1&&(a[0].focus(),n.preventDefault())}else a[0].focus()}}])&&av(e.prototype,r),t}(),Rr=null,xo=function(t){if(!document.getElementById(t))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(t,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(t,'"></div>')),!1},Cl=function(t,e){if(function(n){n.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(t),!e)return!0;for(var r in e)xo(r);return!0},{init:function(t){var e=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),r=ja(document.querySelectorAll("[".concat(e.openTrigger,"]"))),n=function(o,s){var l=[];return o.forEach(function(u){var c=u.attributes[s].value;l[c]===void 0&&(l[c]=[]),l[c].push(u)}),l}(r,e.openTrigger);if(e.debugMode!==!0||Cl(r,n)!==!1)for(var a in n){var i=n[a];e.targetModal=a,e.triggers=ja(i),Rr=new wo(e)}},show:function(t,e){var r=e||{};r.targetModal=t,r.debugMode===!0&&xo(t)===!1||(Rr&&Rr.removeEventListeners(),(Rr=new wo(r)).showModal())},close:function(t){t?Rr.closeModalById(t):Rr.closeModal()}});typeof window!="undefined"&&(window.MicroModal=Kt);var iv="Expected a function",Sl=0/0,ov="[object Symbol]",sv=/^\s+|\s+$/g,lv=/^[-+]0x[0-9a-f]+$/i,uv=/^0b[01]+$/i,cv=/^0o[0-7]+$/i,fv=parseInt,hv=typeof Je=="object"&&Je&&Je.Object===Object&&Je,dv=typeof self=="object"&&self&&self.Object===Object&&self,vv=hv||dv||Function("return this")(),pv=Object.prototype,gv=pv.toString,mv=Math.max,yv=Math.min,Eo=function(){return vv.Date.now()};function bv(t,e,r){var n,a,i,o,s,l,u=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(iv);e=_l(e)||0,es(r)&&(c=!!r.leading,f="maxWait"in r,i=f?mv(_l(r.maxWait)||0,e):i,d="trailing"in r?!!r.trailing:d);function v(E){var x=n,_=a;return n=a=void 0,u=E,o=t.apply(_,x),o}function h(E){return u=E,s=setTimeout(g,e),c?v(E):o}function p(E){var x=E-l,_=E-u,S=e-x;return f?yv(S,i-_):S}function m(E){var x=E-l,_=E-u;return l===void 0||x>=e||x<0||f&&_>=i}function g(){var E=Eo();if(m(E))return b(E);s=setTimeout(g,p(E))}function b(E){return s=void 0,d&&n?v(E):(n=a=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function y(){return s===void 0?o:b(Eo())}function C(){var E=Eo(),x=m(E);if(n=arguments,a=this,l=E,x){if(s===void 0)return h(l);if(f)return s=setTimeout(g,e),v(l)}return s===void 0&&(s=setTimeout(g,e)),o}return C.cancel=w,C.flush=y,C}function es(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function wv(t){return!!t&&typeof t=="object"}function xv(t){return typeof t=="symbol"||wv(t)&&gv.call(t)==ov}function _l(t){if(typeof t=="number")return t;if(xv(t))return Sl;if(es(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=es(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(sv,"");var r=uv.test(t);return r||cv.test(t)?fv(t.slice(2),r?2:8):lv.test(t)?Sl:+t}var Ev=bv,Ac={exports:{}};(function(t,e){(function(){var r,n,a,i,o,s,l,u,c,f,d,v,h,p,m;a=Math.floor,f=Math.min,n=function(g,b){return g<b?-1:g>b?1:0},c=function(g,b,w,y,C){var E;if(w==null&&(w=0),C==null&&(C=n),w<0)throw new Error("lo must be non-negative");for(y==null&&(y=g.length);w<y;)E=a((w+y)/2),C(b,g[E])<0?y=E:w=E+1;return[].splice.apply(g,[w,w-w].concat(b)),b},s=function(g,b,w){return w==null&&(w=n),g.push(b),p(g,0,g.length-1,w)},o=function(g,b){var w,y;return b==null&&(b=n),w=g.pop(),g.length?(y=g[0],g[0]=w,m(g,0,b)):y=w,y},u=function(g,b,w){var y;return w==null&&(w=n),y=g[0],g[0]=b,m(g,0,w),y},l=function(g,b,w){var y;return w==null&&(w=n),g.length&&w(g[0],b)<0&&(y=[g[0],b],b=y[0],g[0]=y[1],m(g,0,w)),b},i=function(g,b){var w,y,C,E,x,_;for(b==null&&(b=n),E=function(){_=[];for(var S=0,I=a(g.length/2);0<=I?S<I:S>I;0<=I?S++:S--)_.push(S);return _}.apply(this).reverse(),x=[],y=0,C=E.length;y<C;y++)w=E[y],x.push(m(g,w,b));return x},h=function(g,b,w){var y;if(w==null&&(w=n),y=g.indexOf(b),y!==-1)return p(g,0,y,w),m(g,y,w)},d=function(g,b,w){var y,C,E,x,_;if(w==null&&(w=n),C=g.slice(0,b),!C.length)return C;for(i(C,w),_=g.slice(b),E=0,x=_.length;E<x;E++)y=_[E],l(C,y,w);return C.sort(w).reverse()},v=function(g,b,w){var y,C,E,x,_,S,I,k,T;if(w==null&&(w=n),b*10<=g.length){if(E=g.slice(0,b).sort(w),!E.length)return E;for(C=E[E.length-1],I=g.slice(b),x=0,S=I.length;x<S;x++)y=I[x],w(y,C)<0&&(c(E,y,0,null,w),E.pop(),C=E[E.length-1]);return E}for(i(g,w),T=[],_=0,k=f(b,g.length);0<=k?_<k:_>k;0<=k?++_:--_)T.push(o(g,w));return T},p=function(g,b,w,y){var C,E,x;for(y==null&&(y=n),C=g[w];w>b;){if(x=w-1>>1,E=g[x],y(C,E)<0){g[w]=E,w=x;continue}break}return g[w]=C},m=function(g,b,w){var y,C,E,x,_;for(w==null&&(w=n),C=g.length,_=b,E=g[b],y=2*b+1;y<C;)x=y+1,x<C&&!(w(g[y],g[x])<0)&&(y=x),g[b]=g[y],b=y,y=2*b+1;return g[b]=E,p(g,_,b,w)},r=function(){g.push=s,g.pop=o,g.replace=u,g.pushpop=l,g.heapify=i,g.updateItem=h,g.nlargest=d,g.nsmallest=v;function g(b){this.cmp=b!=null?b:n,this.nodes=[]}return g.prototype.push=function(b){return s(this.nodes,b,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},g.prototype.replace=function(b){return u(this.nodes,b,this.cmp)},g.prototype.pushpop=function(b){return l(this.nodes,b,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(b){return h(this.nodes,b,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var b;return b=new g,b.nodes=this.nodes.slice(0),b},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,b){return t.exports=b()}(this,function(){return r})}).call(Je)})(Ac);var Cv=Ac.exports,Sv="Expected a function",Mc="__lodash_hash_undefined__",Dc=1/0,_v="[object Function]",Tv="[object GeneratorFunction]",kv="[object Symbol]",Iv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Av=/^\w*$/,Mv=/^\./,Dv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pv=/[\\^$.*+?()[\]{}|]/g,Ov=/\\(\\)?/g,Lv=/^\[object .+?Constructor\]$/,Bv=typeof Je=="object"&&Je&&Je.Object===Object&&Je,Rv=typeof self=="object"&&self&&self.Object===Object&&self,Ts=Bv||Rv||Function("return this")();function Nv(t,e){return t==null?void 0:t[e]}function zv(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Fv=Array.prototype,$v=Function.prototype,Pc=Object.prototype,Co=Ts["__core-js_shared__"],Tl=function(){var t=/[^.]+$/.exec(Co&&Co.keys&&Co.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Oc=$v.toString,ks=Pc.hasOwnProperty,Lc=Pc.toString,Hv=RegExp("^"+Oc.call(ks).replace(Pv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kl=Ts.Symbol,Vv=Fv.splice,qv=Bc(Ts,"Map"),va=Bc(Object,"create"),Il=kl?kl.prototype:void 0,Al=Il?Il.toString:void 0;function Ur(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wv(){this.__data__=va?va(null):{}}function Uv(t){return this.has(t)&&delete this.__data__[t]}function Gv(t){var e=this.__data__;if(va){var r=e[t];return r===Mc?void 0:r}return ks.call(e,t)?e[t]:void 0}function Kv(t){var e=this.__data__;return va?e[t]!==void 0:ks.call(e,t)}function Yv(t,e){var r=this.__data__;return r[t]=va&&e===void 0?Mc:e,this}Ur.prototype.clear=Wv;Ur.prototype.delete=Uv;Ur.prototype.get=Gv;Ur.prototype.has=Kv;Ur.prototype.set=Yv;function Rn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jv(){this.__data__=[]}function Xv(t){var e=this.__data__,r=Vi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Vv.call(e,r,1),!0}function Zv(t){var e=this.__data__,r=Vi(e,t);return r<0?void 0:e[r][1]}function Qv(t){return Vi(this.__data__,t)>-1}function Jv(t,e){var r=this.__data__,n=Vi(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}Rn.prototype.clear=jv;Rn.prototype.delete=Xv;Rn.prototype.get=Zv;Rn.prototype.has=Qv;Rn.prototype.set=Jv;function tn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ep(){this.__data__={hash:new Ur,map:new(qv||Rn),string:new Ur}}function tp(t){return qi(this,t).delete(t)}function rp(t){return qi(this,t).get(t)}function np(t){return qi(this,t).has(t)}function ap(t,e){return qi(this,t).set(t,e),this}tn.prototype.clear=ep;tn.prototype.delete=tp;tn.prototype.get=rp;tn.prototype.has=np;tn.prototype.set=ap;function Vi(t,e){for(var r=t.length;r--;)if(pp(t[r][0],e))return r;return-1}function ip(t,e){e=up(e,t)?[e]:lp(e);for(var r=0,n=e.length;t!=null&&r<n;)t=t[dp(e[r++])];return r&&r==n?t:void 0}function op(t){if(!Nc(t)||fp(t))return!1;var e=gp(t)||zv(t)?Hv:Lv;return e.test(vp(t))}function sp(t){if(typeof t=="string")return t;if(As(t))return Al?Al.call(t):"";var e=t+"";return e=="0"&&1/t==-Dc?"-0":e}function lp(t){return Rc(t)?t:hp(t)}function qi(t,e){var r=t.__data__;return cp(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Bc(t,e){var r=Nv(t,e);return op(r)?r:void 0}function up(t,e){if(Rc(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||As(t)?!0:Av.test(t)||!Iv.test(t)||e!=null&&t in Object(e)}function cp(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function fp(t){return!!Tl&&Tl in t}var hp=Is(function(t){t=yp(t);var e=[];return Mv.test(t)&&e.push(""),t.replace(Dv,function(r,n,a,i){e.push(a?i.replace(Ov,"$1"):n||r)}),e});function dp(t){if(typeof t=="string"||As(t))return t;var e=t+"";return e=="0"&&1/t==-Dc?"-0":e}function vp(t){if(t!=null){try{return Oc.call(t)}catch{}try{return t+""}catch{}}return""}function Is(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Sv);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(Is.Cache||tn),r}Is.Cache=tn;function pp(t,e){return t===e||t!==t&&e!==e}var Rc=Array.isArray;function gp(t){var e=Nc(t)?Lc.call(t):"";return e==_v||e==Tv}function Nc(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function mp(t){return!!t&&typeof t=="object"}function As(t){return typeof t=="symbol"||mp(t)&&Lc.call(t)==kv}function yp(t){return t==null?"":sp(t)}function bp(t,e,r){var n=t==null?void 0:ip(t,e);return n===void 0?r:n}var wp=bp,xp="Expected a function",zc="__lodash_hash_undefined__",Fc=1/0,Ep=9007199254740991,Cp="[object Function]",Sp="[object GeneratorFunction]",_p="[object Symbol]",Tp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kp=/^\w*$/,Ip=/^\./,Ap=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mp=/[\\^$.*+?()[\]{}|]/g,Dp=/\\(\\)?/g,Pp=/^\[object .+?Constructor\]$/,Op=/^(?:0|[1-9]\d*)$/,Lp=typeof Je=="object"&&Je&&Je.Object===Object&&Je,Bp=typeof self=="object"&&self&&self.Object===Object&&self,Ms=Lp||Bp||Function("return this")();function Rp(t,e){return t==null?void 0:t[e]}function Np(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var zp=Array.prototype,Fp=Function.prototype,$c=Object.prototype,So=Ms["__core-js_shared__"],Ml=function(){var t=/[^.]+$/.exec(So&&So.keys&&So.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Hc=Fp.toString,Wi=$c.hasOwnProperty,Vc=$c.toString,$p=RegExp("^"+Hc.call(Wi).replace(Mp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dl=Ms.Symbol,Hp=zp.splice,Vp=qc(Ms,"Map"),pa=qc(Object,"create"),Pl=Dl?Dl.prototype:void 0,Ol=Pl?Pl.toString:void 0;function Gr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qp(){this.__data__=pa?pa(null):{}}function Wp(t){return this.has(t)&&delete this.__data__[t]}function Up(t){var e=this.__data__;if(pa){var r=e[t];return r===zc?void 0:r}return Wi.call(e,t)?e[t]:void 0}function Gp(t){var e=this.__data__;return pa?e[t]!==void 0:Wi.call(e,t)}function Kp(t,e){var r=this.__data__;return r[t]=pa&&e===void 0?zc:e,this}Gr.prototype.clear=qp;Gr.prototype.delete=Wp;Gr.prototype.get=Up;Gr.prototype.has=Gp;Gr.prototype.set=Kp;function Nn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Yp(){this.__data__=[]}function jp(t){var e=this.__data__,r=Ui(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Hp.call(e,r,1),!0}function Xp(t){var e=this.__data__,r=Ui(e,t);return r<0?void 0:e[r][1]}function Zp(t){return Ui(this.__data__,t)>-1}function Qp(t,e){var r=this.__data__,n=Ui(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}Nn.prototype.clear=Yp;Nn.prototype.delete=jp;Nn.prototype.get=Xp;Nn.prototype.has=Zp;Nn.prototype.set=Qp;function rn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Jp(){this.__data__={hash:new Gr,map:new(Vp||Nn),string:new Gr}}function eg(t){return Gi(this,t).delete(t)}function tg(t){return Gi(this,t).get(t)}function rg(t){return Gi(this,t).has(t)}function ng(t,e){return Gi(this,t).set(t,e),this}rn.prototype.clear=Jp;rn.prototype.delete=eg;rn.prototype.get=tg;rn.prototype.has=rg;rn.prototype.set=ng;function ag(t,e,r){var n=t[e];(!(Wi.call(t,e)&&Wc(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function Ui(t,e){for(var r=t.length;r--;)if(Wc(t[r][0],e))return r;return-1}function ig(t){if(!Ti(t)||hg(t))return!1;var e=gg(t)||Np(t)?$p:Pp;return e.test(pg(t))}function og(t,e,r,n){if(!Ti(t))return t;e=cg(e,t)?[e]:lg(e);for(var a=-1,i=e.length,o=i-1,s=t;s!=null&&++a<i;){var l=vg(e[a]),u=r;if(a!=o){var c=s[l];u=n?n(c,l,s):void 0,u===void 0&&(u=Ti(c)?c:ug(e[a+1])?[]:{})}ag(s,l,u),s=s[l]}return t}function sg(t){if(typeof t=="string")return t;if(Ps(t))return Ol?Ol.call(t):"";var e=t+"";return e=="0"&&1/t==-Fc?"-0":e}function lg(t){return Uc(t)?t:dg(t)}function Gi(t,e){var r=t.__data__;return fg(e)?r[typeof e=="string"?"string":"hash"]:r.map}function qc(t,e){var r=Rp(t,e);return ig(r)?r:void 0}function ug(t,e){return e=e==null?Ep:e,!!e&&(typeof t=="number"||Op.test(t))&&t>-1&&t%1==0&&t<e}function cg(t,e){if(Uc(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ps(t)?!0:kp.test(t)||!Tp.test(t)||e!=null&&t in Object(e)}function fg(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function hg(t){return!!Ml&&Ml in t}var dg=Ds(function(t){t=yg(t);var e=[];return Ip.test(t)&&e.push(""),t.replace(Ap,function(r,n,a,i){e.push(a?i.replace(Dp,"$1"):n||r)}),e});function vg(t){if(typeof t=="string"||Ps(t))return t;var e=t+"";return e=="0"&&1/t==-Fc?"-0":e}function pg(t){if(t!=null){try{return Hc.call(t)}catch{}try{return t+""}catch{}}return""}function Ds(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(xp);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(Ds.Cache||rn),r}Ds.Cache=rn;function Wc(t,e){return t===e||t!==t&&e!==e}var Uc=Array.isArray;function gg(t){var e=Ti(t)?Vc.call(t):"";return e==Cp||e==Sp}function Ti(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function mg(t){return!!t&&typeof t=="object"}function Ps(t){return typeof t=="symbol"||mg(t)&&Vc.call(t)==_p}function yg(t){return t==null?"":sg(t)}function bg(t,e,r){return t==null?t:og(t,e,r)}var wg=bg,xg="Expected a function",Gc="__lodash_hash_undefined__",Kc=1/0,Eg="[object Function]",Cg="[object GeneratorFunction]",Sg="[object Symbol]",_g=/^\./,Tg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kg=/[\\^$.*+?()[\]{}|]/g,Ig=/\\(\\)?/g,Ag=/^\[object .+?Constructor\]$/,Mg=typeof Je=="object"&&Je&&Je.Object===Object&&Je,Dg=typeof self=="object"&&self&&self.Object===Object&&self,Os=Mg||Dg||Function("return this")();function Pg(t,e){for(var r=-1,n=t?t.length:0,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}function Og(t,e){return t==null?void 0:t[e]}function Lg(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Bg=Array.prototype,Rg=Function.prototype,Yc=Object.prototype,_o=Os["__core-js_shared__"],Ll=function(){var t=/[^.]+$/.exec(_o&&_o.keys&&_o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),jc=Rg.toString,Ls=Yc.hasOwnProperty,Xc=Yc.toString,Ng=RegExp("^"+jc.call(Ls).replace(kg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bl=Os.Symbol,zg=Bg.splice,Fg=Zc(Os,"Map"),ga=Zc(Object,"create"),Rl=Bl?Bl.prototype:void 0,Nl=Rl?Rl.toString:void 0;function Kr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $g(){this.__data__=ga?ga(null):{}}function Hg(t){return this.has(t)&&delete this.__data__[t]}function Vg(t){var e=this.__data__;if(ga){var r=e[t];return r===Gc?void 0:r}return Ls.call(e,t)?e[t]:void 0}function qg(t){var e=this.__data__;return ga?e[t]!==void 0:Ls.call(e,t)}function Wg(t,e){var r=this.__data__;return r[t]=ga&&e===void 0?Gc:e,this}Kr.prototype.clear=$g;Kr.prototype.delete=Hg;Kr.prototype.get=Vg;Kr.prototype.has=qg;Kr.prototype.set=Wg;function zn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ug(){this.__data__=[]}function Gg(t){var e=this.__data__,r=Ki(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():zg.call(e,r,1),!0}function Kg(t){var e=this.__data__,r=Ki(e,t);return r<0?void 0:e[r][1]}function Yg(t){return Ki(this.__data__,t)>-1}function jg(t,e){var r=this.__data__,n=Ki(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}zn.prototype.clear=Ug;zn.prototype.delete=Gg;zn.prototype.get=Kg;zn.prototype.has=Yg;zn.prototype.set=jg;function nn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Xg(){this.__data__={hash:new Kr,map:new(Fg||zn),string:new Kr}}function Zg(t){return Yi(this,t).delete(t)}function Qg(t){return Yi(this,t).get(t)}function Jg(t){return Yi(this,t).has(t)}function em(t,e){return Yi(this,t).set(t,e),this}nn.prototype.clear=Xg;nn.prototype.delete=Zg;nn.prototype.get=Qg;nn.prototype.has=Jg;nn.prototype.set=em;function Ki(t,e){for(var r=t.length;r--;)if(um(t[r][0],e))return r;return-1}function tm(t){if(!Qc(t)||im(t))return!1;var e=fm(t)||Lg(t)?Ng:Ag;return e.test(lm(t))}function rm(t){if(typeof t=="string")return t;if(Rs(t))return Nl?Nl.call(t):"";var e=t+"";return e=="0"&&1/t==-Kc?"-0":e}function nm(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function Yi(t,e){var r=t.__data__;return am(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Zc(t,e){var r=Og(t,e);return tm(r)?r:void 0}function am(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function im(t){return!!Ll&&Ll in t}var om=Bs(function(t){t=dm(t);var e=[];return _g.test(t)&&e.push(""),t.replace(Tg,function(r,n,a,i){e.push(a?i.replace(Ig,"$1"):n||r)}),e});function sm(t){if(typeof t=="string"||Rs(t))return t;var e=t+"";return e=="0"&&1/t==-Kc?"-0":e}function lm(t){if(t!=null){try{return jc.call(t)}catch{}try{return t+""}catch{}}return""}function Bs(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(xg);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(Bs.Cache||nn),r}Bs.Cache=nn;function um(t,e){return t===e||t!==t&&e!==e}var cm=Array.isArray;function fm(t){var e=Qc(t)?Xc.call(t):"";return e==Eg||e==Cg}function Qc(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function hm(t){return!!t&&typeof t=="object"}function Rs(t){return typeof t=="symbol"||hm(t)&&Xc.call(t)==Sg}function dm(t){return t==null?"":rm(t)}function vm(t){return cm(t)?Pg(t,sm):Rs(t)?[t]:nm(om(t))}var pm=vm;function Da(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ji=Da(Ev),Pa=Da(Cv),gm=Da(wp),mm=Da(wg),ym=Da(pm);function et(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?et=function(e){return typeof e}:et=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(t)}function Ns(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zs(t,e,r){return e&&zl(t.prototype,e),r&&zl(t,r),t}function Jc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function or(t,e){return bm(t)||wm(t,e)||xm()}function bm(t){if(Array.isArray(t))return t}function wm(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}function xm(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Ke=typeof window=="undefined"?null:window,Fl=Ke?Ke.navigator:null;Ke&&Ke.document;var Em=et(""),ef=et({}),Cm=et(function(){}),Sm=typeof HTMLElement=="undefined"?"undefined":et(HTMLElement),Oa=function(e){return e&&e.instanceString&&Ye(e.instanceString)?e.instanceString():null},Se=function(e){return e!=null&&et(e)==Em},Ye=function(e){return e!=null&&et(e)===Cm},He=function(e){return!Dt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Oe=function(e){return e!=null&&et(e)===ef&&!He(e)&&e.constructor===Object},_m=function(e){return e!=null&&et(e)===ef},he=function(e){return e!=null&&et(e)===et(1)&&!isNaN(e)},Tm=function(e){return he(e)&&Math.floor(e)===e},ki=function(e){if(Sm!=="undefined")return e!=null&&e instanceof HTMLElement},Dt=function(e){return La(e)||tf(e)},La=function(e){return Oa(e)==="collection"&&e._private.single},tf=function(e){return Oa(e)==="collection"&&!e._private.single},Fs=function(e){return Oa(e)==="core"},rf=function(e){return Oa(e)==="stylesheet"},km=function(e){return Oa(e)==="event"},Tr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Im=function(e){return typeof HTMLElement=="undefined"?!1:e instanceof HTMLElement},Am=function(e){return Oe(e)&&he(e.x1)&&he(e.x2)&&he(e.y1)&&he(e.y2)},Mm=function(e){return _m(e)&&Ye(e.then)},Dm=function(){return Fl&&Fl.userAgent.match(/msie|trident|edge/i)},ma=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,l=r.apply(i,o),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},$s=ma(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Xi=ma(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),nf=ma(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),$l=function(e){return Tr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},rt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Pm="rgb[a]?\\(("+rt+"[%]?)\\s*,\\s*("+rt+"[%]?)\\s*,\\s*("+rt+"[%]?)(?:\\s*,\\s*("+rt+"))?\\)",Om="rgb[a]?\\((?:"+rt+"[%]?)\\s*,\\s*(?:"+rt+"[%]?)\\s*,\\s*(?:"+rt+"[%]?)(?:\\s*,\\s*(?:"+rt+"))?\\)",Lm="hsl[a]?\\(("+rt+")\\s*,\\s*("+rt+"[%])\\s*,\\s*("+rt+"[%])(?:\\s*,\\s*("+rt+"))?\\)",Bm="hsl[a]?\\((?:"+rt+")\\s*,\\s*(?:"+rt+"[%])\\s*,\\s*(?:"+rt+"[%])(?:\\s*,\\s*(?:"+rt+"))?\\)",Rm="\\#[0-9a-fA-F]{3}",Nm="\\#[0-9a-fA-F]{6}",af=function(e,r){return e<r?-1:e>r?1:0},zm=function(e,r){return-1*af(e,r)},_e=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},Fm=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},$m=function(e){var r,n,a,i,o,s,l,u;function c(h,p,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?h+(p-h)*6*m:m<1/2?p:m<2/3?h+(p-h)*(2/3-m)*6:h}var f=new RegExp("^"+Lm+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,v=2*i-d;s=Math.round(255*c(v,d,n+1/3)),l=Math.round(255*c(v,d,n)),u=Math.round(255*c(v,d,n-1/3))}r=[s,l,u,o]}return r},Hm=function(e){var r,n=new RegExp("^"+Pm+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},Vm=function(e){return Wm[e.toLowerCase()]},qm=function(e){return(He(e)?e:null)||Vm(e)||Fm(e)||Hm(e)||$m(e)},Wm={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},of=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Oe(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},sf=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Oe(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},To=Ke?Ke.performance:null,lf=To&&To.now?function(){return To.now()}:function(){return Date.now()},Um=function(){if(Ke){if(Ke.requestAnimationFrame)return function(t){Ke.requestAnimationFrame(t)};if(Ke.mozRequestAnimationFrame)return function(t){Ke.mozRequestAnimationFrame(t)};if(Ke.webkitRequestAnimationFrame)return function(t){Ke.webkitRequestAnimationFrame(t)};if(Ke.msRequestAnimationFrame)return function(t){Ke.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(lf())},1e3/60)}}(),Ii=function(e){return Um(e)},ur=lf,gn=9261,uf=65599,ta=5381,cf=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gn,n=r,a;a=e.next(),!a.done;)n=n*uf+a.value|0;return n},ya=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gn;return r*uf+e|0},ba=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ta;return(r<<5)+r+e|0},Gm=function(e,r){return e*2097152+r},yr=function(e){return e[0]*2097152+e[1]},Xa=function(e,r){return[ya(e[0],r[0]),ba(e[1],r[1])]},Km=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return cf(o,r)},Yr=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return cf(o,r)},ff=function(){return Ym(arguments)},Ym=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Yr(a):r=Yr(a,r)}return r},Hl=!0,jm=console.warn!=null,Xm=console.trace!=null,Hs=Number.MAX_SAFE_INTEGER||9007199254740991,hf=function(){return!0},Ai=function(){return!1},Vl=function(){return 0},Vs=function(){},je=function(e){throw new Error(e)},df=function(e){if(e!==void 0)Hl=!!e;else return Hl},Fe=function(e){!df()||(jm?console.warn(e):(console.log(e),Xm&&console.trace()))},Zm=function(e){return _e({},e)},Jt=function(e){return e==null?e:He(e)?e.slice():Oe(e)?Zm(e):e},Qm=function(e){return e.slice()},vf=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},Jm={},pf=function(){return Jm},ht=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},kr=function(e,r,n){for(var a=e.length-1;a>=0&&!(e[a]===r&&(e.splice(a,1),n));a--);},qs=function(e){e.splice(0,e.length)},ey=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Gt=function(e,r,n){return n&&(r=nf(n,r)),e[r]},wr=function(e,r,n,a){n&&(r=nf(n,r)),e[r]=a},ty=function(){function t(){Ns(this,t),this._obj={}}return zs(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),er=typeof Map!="undefined"?Map:ty,ry="undefined",ny=function(){function t(e){if(Ns(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return zs(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),Fn=(typeof Set=="undefined"?"undefined":et(Set))!==ry?Set:ny,Zi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Fs(e)){je("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){je("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Fn,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];He(r.classes)?u=r.classes:Se(r.classes)&&(u=r.classes.split(/\s+/));for(var c=0,f=u.length;c<f;c++){var d=u[c];!d||d===""||i.classes.add(d)}this.createEmitter();var v=r.style||r.css;v&&(Fe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(v)),(n===void 0||n)&&this.restore()},ql=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Oe(n)&&!Dt(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!Ye(a)?a:i,a=Ye(a)?a:function(){};for(var s=this._private.cy,l=n=Se(n)?this.filter(n):n,u=[],c=[],f={},d={},v={},h=0,p,m=this.byGroup(),g=m.nodes,b=m.edges,w=0;w<l.length;w++){var y=l[w],C=y.id();y.isNode()&&(u.unshift(y),e.bfs&&(v[C]=!0,c.push(y)),d[C]=0)}var E=function(){var P=e.bfs?u.shift():u.pop(),A=P.id();if(e.dfs){if(v[A])return"continue";v[A]=!0,c.push(P)}var B=d[A],L=f[A],N=L!=null?L.source():null,H=L!=null?L.target():null,W=L==null?void 0:P.same(N)?H[0]:N[0],F=void 0;if(F=a(P,L,W,h++,B),F===!0)return p=P,"break";if(F===!1)return"break";for(var D=P.connectedEdges().filter(function(q){return(!i||q.source().same(P))&&b.has(q)}),R=0;R<D.length;R++){var O=D[R],$=O.connectedNodes().filter(function(q){return!q.same(P)&&g.has(q)}),V=$.id();$.length!==0&&!v[V]&&($=$[0],u.push($),e.bfs&&(v[V]=!0,c.push($)),f[V]=O,d[V]=d[A]+1)}};e:for(;u.length!==0;){var x=E();switch(x){case"continue":continue;case"break":break e}}for(var _=s.collection(),S=0;S<c.length;S++){var I=c[S],k=f[I.id()];k!=null&&_.push(k),_.push(I)}return{path:s.collection(_),found:s.collection(p)}}},wa={breadthFirstSearch:ql({bfs:!0}),depthFirstSearch:ql({dfs:!0})};wa.bfs=wa.breadthFirstSearch;wa.dfs=wa.depthFirstSearch;var ay=ht({root:null,weight:function(e){return 1},directed:!1}),iy={dijkstra:function(e){if(!Oe(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=ay(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=Se(a)?this.filter(a)[0]:a[0],c={},f={},d={},v=this.byGroup(),h=v.nodes,p=v.edges;p.unmergeBy(function(B){return B.isLoop()});for(var m=function(L){return c[L.id()]},g=function(L,N){c[L.id()]=N,b.updateItem(L)},b=new Pa(function(B,L){return m(B)-m(L)}),w=0;w<h.length;w++){var y=h[w];c[y.id()]=y.same(u)?0:1/0,b.push(y)}for(var C=function(L,N){for(var H=(o?L.edgesTo(N):L.edgesWith(N)).intersect(p),W=1/0,F,D=0;D<H.length;D++){var R=H[D],O=l(R);(O<W||!F)&&(W=O,F=R)}return{edge:F,dist:W}};b.size()>0;){var E=b.pop(),x=m(E),_=E.id();if(d[_]=x,x!==1/0)for(var S=E.neighborhood().intersect(h),I=0;I<S.length;I++){var k=S[I],T=k.id(),P=C(E,k),A=x+P.dist;A<m(k)&&(g(k,A),f[T]={node:E,edge:P.edge})}}return{distanceTo:function(L){var N=Se(L)?h.filter(L)[0]:L[0];return d[N.id()]},pathTo:function(L){var N=Se(L)?h.filter(L)[0]:L[0],H=[],W=N,F=W.id();if(N.length>0)for(H.unshift(N);f[F];){var D=f[F];H.unshift(D.edge),H.unshift(D.node),W=D.node,F=W.id()}return s.spawn(H)}}}},oy={kruskal:function(e){e=e||function(w){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,l=function(y){for(var C=0;C<o.length;C++){var E=o[C];if(E.has(y))return C}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var c=a.sort(function(w,y){return e(w)-e(y)}),f=0;f<c.length;f++){var d=c[f],v=d.source()[0],h=d.target()[0],p=l(v),m=l(h),g=o[p],b=o[m];p!==m&&(s.merge(d),g.merge(b),o.splice(m,1))}return s}},sy=ht({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),ly={aStar:function(e){var r=this.cy(),n=sy(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var u=a.id(),c=i.id(),f={},d={},v={},h=new Pa(function(F,D){return d[F.id()]-d[D.id()]}),p=new Fn,m={},g={},b=function(D,R){h.push(D),p.add(R)},w,y,C=function(){w=h.pop(),y=w.id(),p.delete(y)},E=function(D){return p.has(D)};b(a,u),f[u]=0,d[u]=o(a);for(var x=0;h.size()>0;){if(C(),x++,y===c){for(var _=[],S=i,I=c,k=g[I];_.unshift(S),k!=null&&_.unshift(k),S=m[I],S!=null;)I=S.id(),k=g[I];return{found:!0,distance:f[y],path:this.spawn(_),steps:x}}v[y]=!0;for(var T=w._private.edges,P=0;P<T.length;P++){var A=T[P];if(!!this.hasElementWithId(A.id())&&!(s&&A.data("source")!==y)){var B=A.source(),L=A.target(),N=B.id()!==y?B:L,H=N.id();if(!!this.hasElementWithId(H)&&!v[H]){var W=f[y]+l(A);if(!E(H)){f[H]=W,d[H]=W+o(N),b(N,H),m[H]=w,g[H]=A;continue}W<f[H]&&(f[H]=W,d[H]=W+o(N),m[H]=w,g[H]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},uy=ht({weight:function(e){return 1},directed:!1}),cy={floydWarshall:function(e){for(var r=this.cy(),n=uy(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,f=c*c,d=function(O){return l.indexOf(O)},v=function(O){return l[O]},h=new Array(f),p=0;p<f;p++){var m=p%c,g=(p-m)/c;g===m?h[p]=0:h[p]=1/0}for(var b=new Array(f),w=new Array(f),y=0;y<u.length;y++){var C=u[y],E=C.source()[0],x=C.target()[0];if(E!==x){var _=d(E),S=d(x),I=_*c+S,k=o(C);if(h[I]>k&&(h[I]=k,b[I]=S,w[I]=C),!i){var T=S*c+_;!i&&h[T]>k&&(h[T]=k,b[T]=_,w[T]=C)}}}for(var P=0;P<c;P++)for(var A=0;A<c;A++)for(var B=A*c+P,L=0;L<c;L++){var N=A*c+L,H=P*c+L;h[B]+h[H]<h[N]&&(h[N]=h[B]+h[H],b[N]=b[B])}var W=function(O){return(Se(O)?r.filter(O):O)[0]},F=function(O){return d(W(O))},D={distance:function(O,$){var V=F(O),q=F($);return h[V*c+q]},path:function(O,$){var V=F(O),q=F($),z=v(V);if(V===q)return z.collection();if(b[V*c+q]==null)return r.collection();var K=r.collection(),te=V,J;for(K.merge(z);V!==q;)te=V,V=b[V*c+q],J=w[te*c+V],K.merge(J),K.merge(v(V));return K}};return D}},fy=ht({weight:function(e){return 1},directed:!1,root:null}),hy={bellmanFord:function(e){var r=this,n=fy(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,v=d.length,h=new er,p=!1,m=[];o=u.collection(o)[0],f.unmergeBy(function(Z){return Z.isLoop()});for(var g=f.length,b=function(X){var ue=h.get(X.id());return ue||(ue={},h.set(X.id(),ue)),ue},w=function(X){return(Se(X)?u.$(X):X)[0]},y=function(X){return b(w(X)).dist},C=function(X){for(var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,de=w(X),we=[],ye=de;;){if(ye==null)return r.spawn();var Y=b(ye),M=Y.edge,U=Y.pred;if(we.unshift(ye[0]),ye.same(ue)&&we.length>0)break;M!=null&&we.unshift(M),ye=U}return l.spawn(we)},E=0;E<v;E++){var x=d[E],_=b(x);x.same(o)?_.dist=0:_.dist=1/0,_.pred=null,_.edge=null}for(var S=!1,I=function(X,ue,de,we,ye,Y){var M=we.dist+Y;M<ye.dist&&!de.same(we.edge)&&(ye.dist=M,ye.pred=X,ye.edge=de,S=!0)},k=1;k<v;k++){S=!1;for(var T=0;T<g;T++){var P=f[T],A=P.source(),B=P.target(),L=s(P),N=b(A),H=b(B);I(A,B,P,N,H,L),i||I(B,A,P,H,N,L)}if(!S)break}if(S)for(var W=[],F=0;F<g;F++){var D=f[F],R=D.source(),O=D.target(),$=s(D),V=b(R).dist,q=b(O).dist;if(V+$<q||!i&&q+$<V)if(p||(Fe("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var z=[];V+$<q&&z.push(R),!i&&q+$<V&&z.push(O);for(var K=z.length,te=0;te<K;te++){var J=z[te],ie=[J];ie.push(b(J).edge);for(var ve=b(J).pred;ie.indexOf(ve)===-1;)ie.push(ve),ie.push(b(ve).edge),ve=b(ve).pred;ie=ie.slice(ie.indexOf(ve));for(var Ee=ie[0].id(),le=0,re=2;re<ie.length;re+=2)ie[re].id()<Ee&&(Ee=ie[re].id(),le=re);ie=ie.slice(le).concat(ie.slice(0,le)),ie.push(ie[0]);var ne=ie.map(function(Z){return Z.id()}).join(",");W.indexOf(ne)===-1&&(m.push(l.spawn(ie)),W.push(ne))}}else break}return{distanceTo:y,pathTo:C,hasNegativeWeightCycle:p,negativeWeightCycles:m}}},dy=Math.sqrt(2),vy=function(e,r,n){n.length===0&&je("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],l=r[o],u=n,c=u.length-1;c>=0;c--){var f=u[c],d=f[1],v=f[2];(r[d]===s&&r[v]===l||r[d]===l&&r[v]===s)&&u.splice(c,1)}for(var h=0;h<u.length;h++){var p=u[h];p[1]===l?(u[h]=p.slice(),u[h][1]=s):p[2]===l&&(u[h]=p.slice(),u[h][2]=s)}for(var m=0;m<r.length;m++)r[m]===l&&(r[m]=s);return u},ko=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=vy(i,e,r),n--}return r},py={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(H){return H.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/dy);if(i<2){je("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<o;c++){var f=a[c];u.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,v=[],h=new Array(i),p=new Array(i),m=new Array(i),g=function(W,F){for(var D=0;D<i;D++)F[D]=W[D]},b=0;b<=s;b++){for(var w=0;w<i;w++)p[w]=w;var y=ko(p,u.slice(),i,l),C=y.slice();g(p,m);var E=ko(p,y,l,2),x=ko(m,C,l,2);E.length<=x.length&&E.length<d?(d=E.length,v=E,g(p,h)):x.length<=E.length&&x.length<d&&(d=x.length,v=x,g(m,h))}for(var _=this.spawn(v.map(function(H){return a[H[0]]})),S=this.spawn(),I=this.spawn(),k=h[0],T=0;T<h.length;T++){var P=h[T],A=n[T];P===k?S.merge(A):I.merge(A)}var B=function(W){var F=e.spawn();return W.forEach(function(D){F.merge(D),D.connectedEdges().forEach(function(R){e.contains(R)&&!_.contains(R)&&F.merge(R)})}),F},L=[B(S),B(I)],N={cut:_,components:L,partition1:S,partition2:I};return N}},gy=function(e){return{x:e.x,y:e.y}},Qi=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},gf=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},mn=function(e){return{x:e[0],y:e[1]}},my=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},yy=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},by=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},wy=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(d,v){return d-v});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},xy=function(e){return Math.PI*e/180},Za=function(e,r){return Math.atan2(r,e)-Math.PI/2},Ws=Math.log2||function(t){return Math.log(t)/Math.log(2)},mf=function(e){return e>0?1:e<0?-1:0},jr=function(e,r){return Math.sqrt(zr(e,r))},zr=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Ey=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},it=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},xn=function(e,r,n,a){return{x:it(e.x,r.x,n.x,a),y:it(e.y,r.y,n.y,a)}},Cy=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=jr(e,r),s={x:i.x/o,y:i.y/o};return n=n==null?0:n,a=a!=null?a:n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},xa=function(e,r,n){return Math.max(e,Math.min(n,r))},It=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Sy=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},_y=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Ty=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},ky=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},gi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Io=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=or(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Wl=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Us=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},_n=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},Iy=function(e,r){return _n(e,r.x,r.y)},yf=function(e,r){return _n(e,r.x1,r.y1)&&_n(e,r.x2,r.y2)},bf=function(e,r,n,a,i,o,s){var l=Ba(i,o),u=i/2,c=o/2,f;{var d=n-u+l-s,v=a-c-s,h=n+u-l+s,p=v;if(f=xr(e,r,n,a,d,v,h,p,!1),f.length>0)return f}{var m=n+u+s,g=a-c+l-s,b=m,w=a+c-l+s;if(f=xr(e,r,n,a,m,g,b,w,!1),f.length>0)return f}{var y=n-u+l-s,C=a+c+s,E=n+u-l+s,x=C;if(f=xr(e,r,n,a,y,C,E,x,!1),f.length>0)return f}{var _=n-u-s,S=a-c+l-s,I=_,k=a+c-l+s;if(f=xr(e,r,n,a,_,S,I,k,!1),f.length>0)return f}var T;{var P=n-u+l,A=a-c+l;if(T=ra(e,r,n,a,P,A,l+s),T.length>0&&T[0]<=P&&T[1]<=A)return[T[0],T[1]]}{var B=n+u-l,L=a-c+l;if(T=ra(e,r,n,a,B,L,l+s),T.length>0&&T[0]>=B&&T[1]<=L)return[T[0],T[1]]}{var N=n+u-l,H=a+c-l;if(T=ra(e,r,n,a,N,H,l+s),T.length>0&&T[0]>=N&&T[1]>=H)return[T[0],T[1]]}{var W=n-u+l,F=a+c-l;if(T=ra(e,r,n,a,W,F,l+s),T.length>0&&T[0]<=W&&T[1]>=F)return[T[0],T[1]]}return[]},Ay=function(e,r,n,a,i,o,s){var l=s,u=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,o),d=Math.max(a,o);return u-l<=e&&e<=c+l&&f-l<=r&&r<=d+l},My=function(e,r,n,a,i,o,s,l,u){var c={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},Dy=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-r+o)/s,u=(-r-o)/s;return[l,u]},Py=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,l,u,c,f,d,v,h;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,s=l*l*l+u*u,i[1]=0,v=r/3,s>0){f=u+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=u-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-v+f+d,v+=(f+d)/2,i[4]=i[2]=-v,v=Math.sqrt(3)*(-d+f)/2,i[3]=v,i[5]=-v;return}if(i[5]=i[3]=0,s===0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-v+2*h,i[4]=i[2]=-(h+v);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),h=2*Math.sqrt(l),i[0]=-v+h*Math.cos(c/3),i[2]=-v+h*Math.cos((c+2*Math.PI)/3),i[4]=-v+h*Math.cos((c+4*Math.PI)/3)},Oy=function(e,r,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,f=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*r+2*o*o+2*o*r-l*r,d=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,v=[];Py(u,c,f,d,v);for(var h=1e-7,p=[],m=0;m<6;m+=2)Math.abs(v[m+1])<h&&v[m]>=0&&v[m]<=1&&p.push(v[m]);p.push(1),p.push(0);for(var g=-1,b,w,y,C=0;C<p.length;C++)b=Math.pow(1-p[C],2)*n+2*(1-p[C])*p[C]*i+p[C]*p[C]*s,w=Math.pow(1-p[C],2)*a+2*(1-p[C])*p[C]*o+p[C]*p[C]*l,y=Math.pow(b-e,2)+Math.pow(w-r,2),g>=0?y<g&&(g=y):g=y;return g},Ly=function(e,r,n,a,i,o){var s=[e-n,r-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*l[0]+s[1]*l[1],d=f*f/u;return f<0?c:d>u?(e-i)*(e-i)+(r-o)*(r-o):c-d},_t=function(e,r,n){for(var a,i,o,s,l,u=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>r&&u++;else continue;return u%2!==0},cr=function(e,r,n,a,i,o,s,l,u){var c=new Array(n.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var d=Math.cos(-f),v=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=o/2*(n[h*2]*d-n[h*2+1]*v),c[h*2+1]=s/2*(n[h*2+1]*d+n[h*2]*v),c[h*2]+=a,c[h*2+1]+=i;var p;if(u>0){var m=xf(c,-u);p=wf(m)}else p=c;return _t(e,r,p)},By=function(e,r,n,a,i,o,s){for(var l=new Array(n.length),u=o/2,c=s/2,f=Gs(o,s),d=f*f,v=0;v<n.length/4;v++){var h=void 0,p=void 0;v===0?h=n.length-2:h=v*4-2,p=v*4+2;var m=a+u*n[v*4],g=i+c*n[v*4+1],b=-n[h]*n[p]-n[h+1]*n[p+1],w=f/Math.tan(Math.acos(b)/2),y=m-w*n[h],C=g-w*n[h+1],E=m+w*n[p],x=g+w*n[p+1];l[v*4]=y,l[v*4+1]=C,l[v*4+2]=E,l[v*4+3]=x;var _=n[h+1],S=-n[h],I=_*n[p]+S*n[p+1];I<0&&(_*=-1,S*=-1);var k=y+_*f,T=C+S*f,P=Math.pow(k-e,2)+Math.pow(T-r,2);if(P<=d)return!0}return _t(e,r,l)},wf=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,l,u,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],l=e[(f+1)*4+1],u=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],l=e[1],u=e[2],c=e[3]);var d=xr(n,a,i,o,s,l,u,c,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},xf=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,c=-(o-a),f=Math.sqrt(u*u+c*c),d=u/f,v=c/f;n[l*4]=a+d*r,n[l*4+1]=i+v*r,n[l*4+2]=o+d*r,n[l*4+3]=s+v*r}return n},Ry=function(e,r,n,a,i,o){var s=n-e,l=a-r;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),c=u-1;if(c<0)return[];var f=c/u;return[(n-e)*f+e,(a-r)*f+r]},Vr=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},ra=function(e,r,n,a,i,o,s){var l=[n-e,a-r],u=[e-i,r-o],c=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),d=u[0]*u[0]+u[1]*u[1]-s*s,v=f*f-4*c*d;if(v<0)return[];var h=(-f+Math.sqrt(v))/(2*c),p=(-f-Math.sqrt(v))/(2*c),m=Math.min(h,p),g=Math.max(h,p),b=[];if(m>=0&&m<=1&&b.push(m),g>=0&&g<=1&&b.push(g),b.length===0)return[];var w=b[0]*l[0]+e,y=b[0]*l[1]+r;if(b.length>1){if(b[0]==b[1])return[w,y];var C=b[1]*l[0]+e,E=b[1]*l[1]+r;return[w,y,C,E]}else return[w,y]},Ao=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},xr=function(e,r,n,a,i,o,s,l,u){var c=e-i,f=n-e,d=s-i,v=r-o,h=a-r,p=l-o,m=d*v-p*c,g=f*v-h*c,b=p*f-d*h;if(b!==0){var w=m/b,y=g/b,C=.001,E=0-C,x=1+C;return E<=w&&w<=x&&E<=y&&y<=x?[e+w*f,r+w*h]:u?[e+w*f,r+w*h]:[]}else return m===0||g===0?Ao(e,n,s)===s?[s,l]:Ao(e,n,i)===i?[i,o]:Ao(i,s,n)===n?[n,a]:[]:[]},Ea=function(e,r,n,a,i,o,s,l){var u=[],c,f=new Array(n.length),d=!0;o==null&&(d=!1);var v;if(d){for(var h=0;h<f.length/2;h++)f[h*2]=n[h*2]*o+a,f[h*2+1]=n[h*2+1]*s+i;if(l>0){var p=xf(f,-l);v=wf(p)}else v=f}else v=n;for(var m,g,b,w,y=0;y<v.length/2;y++)m=v[y*2],g=v[y*2+1],y<v.length/2-1?(b=v[(y+1)*2],w=v[(y+1)*2+1]):(b=v[0],w=v[1]),c=xr(e,r,a,i,m,g,b,w),c.length!==0&&u.push(c[0],c[1]);return u},Ny=function(e,r,n,a,i,o,s,l){for(var u=[],c,f=new Array(n.length),d=o/2,v=s/2,h=Gs(o,s),p=0;p<n.length/4;p++){var m=void 0,g=void 0;p===0?m=n.length-2:m=p*4-2,g=p*4+2;var b=a+d*n[p*4],w=i+v*n[p*4+1],y=-n[m]*n[g]-n[m+1]*n[g+1],C=h/Math.tan(Math.acos(y)/2),E=b-C*n[m],x=w-C*n[m+1],_=b+C*n[g],S=w+C*n[g+1];p===0?(f[n.length-2]=E,f[n.length-1]=x):(f[p*4-2]=E,f[p*4-1]=x),f[p*4]=_,f[p*4+1]=S;var I=n[m+1],k=-n[m],T=I*n[g]+k*n[g+1];T<0&&(I*=-1,k*=-1);var P=E+I*h,A=x+k*h;c=ra(e,r,a,i,P,A,h),c.length!==0&&u.push(c[0],c[1])}for(var B=0;B<f.length/4;B++)c=xr(e,r,a,i,f[B*4],f[B*4+1],f[B*4+2],f[B*4+3],!1),c.length!==0&&u.push(c[0],c[1]);if(u.length>2){for(var L=[u[0],u[1]],N=Math.pow(L[0]-e,2)+Math.pow(L[1]-r,2),H=1;H<u.length/2;H++){var W=Math.pow(u[H*2]-e,2)+Math.pow(u[H*2+1]-r,2);W<=N&&(L[0]=u[H*2],L[1]=u[H*2+1],N=W)}return L}return u},Qa=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},wt=function(e,r){var n=ts(e,r);return n=Ef(n),n},Ef=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);for(var c=2/(s-i),f=2/(l-o),d=0;d<a;d++)r=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var v=0;v<a;v++)n=e[2*v+1]=e[2*v+1]+(-1-o);return e},ts=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Ba=function(e,r){return Math.min(e/4,r/4,8)},Gs=function(e,r){return Math.min(e/10,r/10,8)},Cf=function(){return 8},zy=function(e,r,n){return[e-2*r+n,2*(r-e),e]},rs=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Fy=ht({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),$y={pageRank:function(e){for(var r=Fy(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,d=f*f,v=c.length,h=new Array(d),p=new Array(f),m=(1-n)/f,g=0;g<f;g++){for(var b=0;b<f;b++){var w=g*f+b;h[w]=0}p[g]=0}for(var y=0;y<v;y++){var C=c[y],E=C.data("source"),x=C.data("target");if(E!==x){var _=u.indexOfId(E),S=u.indexOfId(x),I=o(C),k=S*f+_;h[k]+=I,p[_]+=I}}for(var T=1/f+m,P=0;P<f;P++)if(p[P]===0)for(var A=0;A<f;A++){var B=A*f+P;h[B]=T}else for(var L=0;L<f;L++){var N=L*f+P;h[N]=h[N]/p[P]+m}for(var H=new Array(f),W=new Array(f),F,D=0;D<f;D++)H[D]=1;for(var R=0;R<i;R++){for(var O=0;O<f;O++)W[O]=0;for(var $=0;$<f;$++)for(var V=0;V<f;V++){var q=$*f+V;W[$]+=h[q]*H[V]}Ey(W),F=H,H=W,W=F;for(var z=0,K=0;K<f;K++){var te=F[K]-H[K];z+=te*te}if(z<a)break}var J={rank:function(ve){return ve=s.collection(ve)[0],H[u.indexOf(ve)]}};return J}},Ul=ht({root:null,weight:function(e){return 1},directed:!1,alpha:0}),En={degreeCentralityNormalized:function(e){e=Ul(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,v=0,h=0;h<a;h++){var p=n[h],m=p.id();e.root=p;var g=this.degreeCentrality(e);d<g.indegree&&(d=g.indegree),v<g.outdegree&&(v=g.outdegree),c[m]=g.indegree,f[m]=g.outdegree}return{indegree:function(w){return d==0?0:(Se(w)&&(w=r.filter(w)),c[w.id()]/d)},outdegree:function(w){return v===0?0:(Se(w)&&(w=r.filter(w)),f[w.id()]/v)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(w){return o===0?0:(Se(w)&&(w=r.filter(w)),i[w.id()]/o)}}}},degreeCentrality:function(e){e=Ul(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=r.collection(i)[0],s){for(var v=i.connectedEdges(),h=v.filter(function(E){return E.target().same(i)&&n.has(E)}),p=v.filter(function(E){return E.source().same(i)&&n.has(E)}),m=h.length,g=p.length,b=0,w=0,y=0;y<h.length;y++)b+=o(h[y]);for(var C=0;C<p.length;C++)w+=o(p[C]);return{indegree:Math.pow(m,1-l)*Math.pow(b,l),outdegree:Math.pow(g,1-l)*Math.pow(w,l)}}else{for(var u=i.connectedEdges().intersection(n),c=u.length,f=0,d=0;d<u.length;d++)f+=o(u[d]);return{degree:Math.pow(c,1-l)*Math.pow(f,l)}}}};En.dc=En.degreeCentrality;En.dcn=En.degreeCentralityNormalised=En.degreeCentralityNormalized;var Gl=ht({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Cn={closenessCentralityNormalized:function(e){for(var r=Gl(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},l=0,u=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<u.length;f++){for(var d=0,v=u[f],h=0;h<u.length;h++)if(f!==h){var p=c.distance(v,u[h]);n?d+=1/p:d+=p}n||(d=1/d),l<d&&(l=d),s[v.id()]=d}return{closeness:function(g){return l==0?0:(Se(g)?g=o.filter(g)[0].id():g=g.id(),s[g]/l)}}},closenessCentrality:function(e){var r=Gl(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),c=0;c<u.length;c++){var f=u[c];if(!f.same(n)){var d=s.distanceTo(f);o?l+=1/d:l+=d}}return o?l:1/l}};Cn.cc=Cn.closenessCentrality;Cn.ccn=Cn.closenessCentralityNormalised=Cn.closenessCentralityNormalized;var Hy=ht({weight:null,directed:!1}),ns={betweennessCentrality:function(e){for(var r=Hy(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},c=0,f={set:function(w,y){u[w]=y,y>c&&(c=y)},get:function(w){return u[w]}},d=0;d<s.length;d++){var v=s[d],h=v.id();n?l[h]=v.outgoers().nodes():l[h]=v.openNeighborhood().nodes(),f.set(h,0)}for(var p=function(w){for(var y=s[w].id(),C=[],E={},x={},_={},S=new Pa(function(V,q){return _[V]-_[q]}),I=0;I<s.length;I++){var k=s[I].id();E[k]=[],x[k]=0,_[k]=1/0}for(x[y]=1,_[y]=0,S.push(y);!S.empty();){var T=S.pop();if(C.push(T),i)for(var P=0;P<l[T].length;P++){var A=l[T][P],B=o.getElementById(T),L=void 0;B.edgesTo(A).length>0?L=B.edgesTo(A)[0]:L=A.edgesTo(B)[0];var N=a(L);A=A.id(),_[A]>_[T]+N&&(_[A]=_[T]+N,S.nodes.indexOf(A)<0?S.push(A):S.updateItem(A),x[A]=0,E[A]=[]),_[A]==_[T]+N&&(x[A]=x[A]+x[T],E[A].push(T))}else for(var H=0;H<l[T].length;H++){var W=l[T][H].id();_[W]==1/0&&(S.push(W),_[W]=_[T]+1),_[W]==_[T]+1&&(x[W]=x[W]+x[T],E[W].push(T))}}for(var F={},D=0;D<s.length;D++)F[s[D].id()]=0;for(;C.length>0;){for(var R=C.pop(),O=0;O<E[R].length;O++){var $=E[R][O];F[$]=F[$]+x[$]/x[R]*(1+F[R])}R!=s[w].id()&&f.set(R,f.get(R)+F[R])}},m=0;m<s.length;m++)p(m);var g={betweenness:function(w){var y=o.collection(w).id();return f.get(y)},betweennessNormalized:function(w){if(c==0)return 0;var y=o.collection(w).id();return f.get(y)/c}};return g.betweennessNormalised=g.betweennessNormalized,g}};ns.bc=ns.betweennessCentrality;var Vy=ht({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),qy=function(e){return Vy(e)},Wy=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},Uy=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Sf=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},Gy=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*r[s*n+l]}return a},Ky=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=Gy(e,a,r);return e},Yy=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Sf(a,r),a},jy=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},Xy=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],l=0;l<r;l++)Math.round(e[o*r+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},Zy=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},Qy=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&Zy(e[r],e[n])&&e.splice(n,1);return e},Kl=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=qy(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var l=r.length,u=l*l,c=new Array(u),f,d=0;d<u;d++)c[d]=0;for(var v=0;v<n.length;v++){var h=n[v],p=o[h.source().id()],m=o[h.target().id()],g=Wy(h,i.attributes);c[p*l+m]+=g,c[m*l+p]+=g}Uy(c,l,i.multFactor),Sf(c,l);for(var b=!0,w=0;b&&w<i.maxIterations;)b=!1,f=Ky(c,l,i.expandFactor),c=Yy(f,l,i.inflateFactor),jy(c,f,u,4)||(b=!0),w++;var y=Xy(c,l,r,a);return y=Qy(y),y},Jy={markovClustering:Kl,mcl:Kl},e0=function(e){return e},_f=function(e,r){return Math.abs(r-e)},Yl=function(e,r,n){return e+_f(r,n)},jl=function(e,r,n){return e+Math.pow(n-r,2)},t0=function(e){return Math.sqrt(e)},r0=function(e,r,n){return Math.max(e,_f(r,n))},jn=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e0,s=a,l,u,c=0;c<e;c++)l=r(c),u=n(c),s=i(s,l,u);return o(s)},Tn={euclidean:function(e,r,n){return e>=2?jn(e,r,n,0,jl,t0):jn(e,r,n,0,Yl)},squaredEuclidean:function(e,r,n){return jn(e,r,n,0,jl)},manhattan:function(e,r,n){return jn(e,r,n,0,Yl)},max:function(e,r,n){return jn(e,r,n,-1/0,r0)}};Tn["squared-euclidean"]=Tn.squaredEuclidean;Tn.squaredeuclidean=Tn.squaredEuclidean;function Ji(t,e,r,n,a,i){var o;return Ye(t)?o=t:o=Tn[t]||Tn.euclidean,e===0&&Ye(t)?o(a,i):o(e,r,n,a,i)}var n0=ht({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ks=function(e){return n0(e)},Mi=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(f){return n[f]}:function(f){return a[f](n)},l=function(d){return a[d](r)},u=n,c=r;return Ji(e,a.length,s,l,u,c)},Mo=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var c=0;c<r;c++){l=[];for(var f=0;f<a;f++)l[f]=Math.random()*(o[f]-i[f])+i[f];s[c]=l}return s},Tf=function(e,r,n,a,i){for(var o=1/0,s=0,l=0;l<r.length;l++){var u=Mi(n,e,r[l],a,i);u<o&&(o=u,s=l)}return s},kf=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},a0=function(e,r,n){return Math.abs(r-e)<=n},i0=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},o0=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Xl=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];o0(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Zl=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Mi("manhattan",r[i],e,n,"kMedoids");return a},s0=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Ks(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?l=Mo(n,i.k,i.attributes):et(i.testCentroids)==="object"?l=i.testCentroids:l=Mo(n,i.k,i.attributes):l=Mo(n,i.k,i.attributes);for(var u=!0,c=0;u&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],s[a.id()]=Tf(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var d=0;d<i.k;d++){var v=kf(d,n,s);if(v.length!==0){for(var h=i.attributes.length,p=l[d],m=new Array(h),g=new Array(h),b=0;b<h;b++){g[b]=0;for(var w=0;w<v.length;w++)a=v[w],g[b]+=i.attributes[b](a);m[b]=g[b]/v.length,a0(m[b],p[b],i.sensitivityThreshold)||(u=!0)}l[d]=m,o[d]=r.collection(v)}}c++}return o},l0=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Ks(e),o=new Array(i.k),s,l={},u,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(et(i.testCentroids)==="object"?s=i.testCentroids:s=Xl(n,i.k)):s=Xl(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var v=0;v<n.length;v++)a=n[v],l[a.id()]=Tf(a,s,i.distance,i.attributes,"kMedoids");f=!1;for(var h=0;h<s.length;h++){var p=kf(h,n,l);if(p.length!==0){c[h]=Zl(s[h],p,i.attributes);for(var m=0;m<p.length;m++)u=Zl(p[m],p,i.attributes),u<c[h]&&(c[h]=u,s[h]=p[m],f=!0);o[h]=r.collection(p)}}d++}return o},u0=function(e,r,n,a,i){for(var o,s,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){o=0,s=0;for(var d=0;d<r.length;d++)o+=a[d][c]*i.attributes[f](r[d]),s+=a[d][c];e[c][f]=o/s}},c0=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,l,u,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){s=0;for(var v=0;v<n.length;v++)l=Mi(i.distance,a[d],n[f],i.attributes,"cmeans"),u=Mi(i.distance,a[d],n[v],i.attributes,"cmeans"),s+=Math.pow(l/u,c);e[d][f]=1/s}},f0=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<r.length;u++){s=-1/0,l=-1;for(var c=0;c<r[0].length;c++)r[u][c]>s&&(s=r[u][c],l=c);i[l].push(e[u])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},Ql=function(e){var r=this.cy(),n=this.nodes(),a=Ks(e),i,o,s,l,u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(a.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var v=0,h=0;h<a.k;h++)s[d][h]=Math.random(),v+=s[d][h];for(var p=0;p<a.k;p++)s[d][p]=s[d][p]/v}o=new Array(a.k);for(var m=0;m<a.k;m++)o[m]=new Array(a.attributes.length);u=new Array(n.length);for(var g=0;g<n.length;g++)u[g]=new Array(a.k);for(var b=!0,w=0;b&&w<a.maxIterations;)b=!1,u0(o,n,s,u,a),c0(s,l,o,n,a),i0(s,l,a.sensitivityThreshold)||(b=!0),w++;return i=f0(n,s,a,r),{clusters:i,degreeOfMembership:s}},h0={kMeans:s0,kMedoids:l0,fuzzyCMeans:Ql,fcm:Ql},d0=ht({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),v0={single:"min",complete:"max"},p0=function(e){var r=d0(e),n=v0[r.linkage];return n!=null&&(r.linkage=n),r},Jl=function(e,r,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,c=function(S,I){return Ji(i.distance,u.length,function(k){return u[k](S)},function(k){return u[k](I)},S,I)},f=0;f<e.length;f++){var d=e[f].key,v=n[d][a[d]];v<s&&(o=d,s=v)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=r[o],p=r[a[o]],m;i.mode==="dendrogram"?m={left:h,right:p,key:h.key}:m={value:h.value.concat(p.value),key:h.key},e[h.index]=m,e.splice(p.index,1),r[h.key]=m;for(var g=0;g<e.length;g++){var b=e[g];h.key===b.key?l=1/0:i.linkage==="min"?(l=n[h.key][b.key],n[h.key][b.key]>n[p.key][b.key]&&(l=n[p.key][b.key])):i.linkage==="max"?(l=n[h.key][b.key],n[h.key][b.key]<n[p.key][b.key]&&(l=n[p.key][b.key])):i.linkage==="mean"?l=(n[h.key][b.key]*h.size+n[p.key][b.key]*p.size)/(h.size+p.size):i.mode==="dendrogram"?l=c(b.value,h.value):l=c(b.value[0],h.value[0]),n[h.key][b.key]=n[b.key][h.key]=l}for(var w=0;w<e.length;w++){var y=e[w].key;if(a[y]===h.key||a[y]===p.key){for(var C=y,E=0;E<e.length;E++){var x=e[E].key;n[y][x]<n[y][C]&&(C=x)}a[y]=C}e[w].index=w}return h.key=p.key=h.index=p.index=null,!0},Ja=function t(e,r,n){!e||(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},g0=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},m0=function t(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&Ja(e.left,a),e.right&&Ja(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Ja(e.left,a),e.right&&Ja(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(i=t(e.right,r-1,n)),a.concat(i))},eu=function(e){for(var r=this.cy(),n=this.nodes(),a=p0(e),i=a.attributes,o=function(w,y){return Ji(a.distance,i.length,function(C){return i[C](w)},function(C){return i[C](y)},w,y)},s=[],l=[],u=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=d,c[f]=d,l[f]=[],u[f]=0}for(var v=0;v<s.length;v++)for(var h=0;h<=v;h++){var p=void 0;a.mode==="dendrogram"?p=v===h?1/0:o(s[v].value,s[h].value):p=v===h?1/0:o(s[v].value[0],s[h].value[0]),l[v][h]=p,l[h][v]=p,p<l[v][u[v]]&&(u[v]=h)}for(var m=Jl(s,c,l,u,a);m;)m=Jl(s,c,l,u,a);var g;return a.mode==="dendrogram"?(g=m0(s[0],a.dendrogramDepth,r),a.addDendrogram&&g0(s[0],r)):(g=new Array(s.length),s.forEach(function(b,w){b.key=b.index=null,g[w]=r.collection(b.value)})),g},y0={hierarchicalClustering:eu,hca:eu},b0=ht({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),w0=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||je("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||he(n)||je("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),b0(e)},x0=function(e,r,n,a){var i=function(s,l){return a[l](s)};return-Ji(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},E0=function(e,r){var n=null;return r==="median"?n=wy(e):r==="mean"?n=by(e):r==="min"?n=my(e):r==="max"?n=yy(e):n=r,n},C0=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},tu=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>s&&(o=u,s=r[i*e+u])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},S0=function(e,r,n){for(var a=tu(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,c=0;c<o.length;c++){for(var f=0,d=0;d<o.length;d++)f+=r[o[d]*e+o[c]];f>u&&(l=c,u=f)}n[i]=o[l]}return a=tu(e,r,n),a},ru=function(e){for(var r=this.cy(),n=this.nodes(),a=w0(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,c,f,d;s=n.length,l=s*s,u=new Array(l);for(var v=0;v<l;v++)u[v]=-1/0;for(var h=0;h<s;h++)for(var p=0;p<s;p++)h!==p&&(u[h*s+p]=x0(a.distance,n[h],n[p],a.attributes));c=E0(u,a.preference);for(var m=0;m<s;m++)u[m*s+m]=c;f=new Array(l);for(var g=0;g<l;g++)f[g]=0;d=new Array(l);for(var b=0;b<l;b++)d[b]=0;for(var w=new Array(s),y=new Array(s),C=new Array(s),E=0;E<s;E++)w[E]=0,y[E]=0,C[E]=0;for(var x=new Array(s*a.minIterations),_=0;_<x.length;_++)x[_]=0;var S;for(S=0;S<a.maxIterations;S++){for(var I=0;I<s;I++){for(var k=-1/0,T=-1/0,P=-1,A=0,B=0;B<s;B++)w[B]=f[I*s+B],A=d[I*s+B]+u[I*s+B],A>=k?(T=k,k=A,P=B):A>T&&(T=A);for(var L=0;L<s;L++)f[I*s+L]=(1-a.damping)*(u[I*s+L]-k)+a.damping*w[L];f[I*s+P]=(1-a.damping)*(u[I*s+P]-T)+a.damping*w[P]}for(var N=0;N<s;N++){for(var H=0,W=0;W<s;W++)w[W]=d[W*s+N],y[W]=Math.max(0,f[W*s+N]),H+=y[W];H-=y[N],y[N]=f[N*s+N],H+=y[N];for(var F=0;F<s;F++)d[F*s+N]=(1-a.damping)*Math.min(0,H-y[F])+a.damping*w[F];d[N*s+N]=(1-a.damping)*(H-y[N])+a.damping*w[N]}for(var D=0,R=0;R<s;R++){var O=d[R*s+R]+f[R*s+R]>0?1:0;x[S%a.minIterations*s+R]=O,D+=O}if(D>0&&(S>=a.minIterations-1||S==a.maxIterations-1)){for(var $=0,V=0;V<s;V++){C[V]=0;for(var q=0;q<a.minIterations;q++)C[V]+=x[q*s+V];(C[V]===0||C[V]===a.minIterations)&&$++}if($===s)break}}for(var z=C0(s,f,d),K=S0(s,u,z),te={},J=0;J<z.length;J++)te[z[J]]=[];for(var ie=0;ie<n.length;ie++){var ve=i[n[ie].id()],Ee=K[ve];Ee!=null&&te[Ee].push(n[ie])}for(var le=new Array(z.length),re=0;re<z.length;re++)le[re]=r.collection(te[z[re]]);return le},_0={affinityPropagation:ru,ap:ru},T0=ht({root:void 0,directed:!1}),k0={hierholzer:function(e){if(!Oe(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=T0(e),a=n.root,i=n.directed,o=this,s=!1,l,u,c;a&&(c=Se(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?o.forEach(function(b){var w=b.id();if(b.isNode()){var y=b.indegree(!0),C=b.outdegree(!0),E=y-C,x=C-y;E==1?l?s=!0:l=w:x==1?u?s=!0:u=w:(x>1||E>1)&&(s=!0),f[w]=[],b.outgoers().forEach(function(_){_.isEdge()&&f[w].push(_.id())})}else d[w]=[void 0,b.target().id()]}):o.forEach(function(b){var w=b.id();if(b.isNode()){var y=b.degree(!0);y%2&&(l?u?s=!0:u=w:l=w),f[w]=[],b.connectedEdges().forEach(function(C){return f[w].push(C.id())})}else d[w]=[b.source().id(),b.target().id()]});var v={found:!1,trail:void 0};if(s)return v;if(u&&l)if(i){if(c&&u!=c)return v;c=u}else{if(c&&u!=c&&l!=c)return v;c||(c=u)}else c||(c=o[0].id());var h=function(w){for(var y=w,C=[w],E,x,_;f[y].length;)E=f[y].shift(),x=d[E][0],_=d[E][1],y!=_?(f[_]=f[_].filter(function(S){return S!=E}),y=_):!i&&y!=x&&(f[x]=f[x].filter(function(S){return S!=E}),y=x),C.unshift(E),C.unshift(y);return C},p=[],m=[];for(m=h(c);m.length!=1;)f[m[0]].length==0?(p.unshift(o.getElementById(m.shift())),p.unshift(o.getElementById(m.shift()))):m=h(m.shift()).concat(m);p.unshift(o.getElementById(m.shift()));for(var g in f)if(f[g].length)return v;return v.found=!0,v.trail=this.spawn(p,!0),v}},ei=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},l=function(d,v){for(var h=o.length-1,p=[],m=e.spawn();o[h].x!=d||o[h].y!=v;)p.push(o.pop().edge),h--;p.push(o.pop().edge),p.forEach(function(g){var b=g.connectedNodes().intersection(e);m.merge(g),b.forEach(function(w){var y=w.id(),C=w.connectedEdges().intersection(e);m.merge(w),r[y].cutVertex?m.merge(C.filter(function(E){return E.isLoop()})):m.merge(C)})}),i.push(m)},u=function f(d,v,h){d===h&&(a+=1),r[v]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(v).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(v)));else{var m,g,b,w;p.forEach(function(y){m=y.source().id(),g=y.target().id(),b=m===v?g:m,b!==h&&(w=y.id(),s[w]||(s[w]=!0,o.push({x:v,y:b,edge:y})),b in r?r[v].low=Math.min(r[v].low,r[b].id):(f(d,b,v),r[v].low=Math.min(r[v].low,r[b].low),r[v].id<=r[b].low&&(r[v].cutVertex=!0,l(v,b))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(a=0,u(d,d),r[d].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},I0={hopcroftTarjanBiconnected:ei,htbc:ei,htb:ei,hopcroftTarjanBiconnectedComponents:ei},ti=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function l(u){i.push(u),r[u]={index:n,low:n++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(p){var m=p.target().id();m!==u&&(m in r||l(m),r[m].explored||(r[u].low=Math.min(r[u].low,r[m].low)))}),r[u].index===r[u].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),r[d].low=r[u].index,r[d].explored=!0,d===u)break}var v=f.edgesWith(f),h=f.merge(v);a.push(h),o=o.difference(h)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||s(u)}}),{cut:o,components:a}},A0={tarjanStronglyConnected:ti,tsc:ti,tscc:ti,tarjanStronglyConnectedComponents:ti},If={};[wa,iy,oy,ly,cy,hy,py,$y,En,Cn,ns,Jy,h0,y0,_0,k0,I0,A0].forEach(function(t){_e(If,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Af=0,Mf=1,Df=2,fr=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=Af,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};fr.prototype={fulfill:function(e){return nu(this,Mf,"fulfillValue",e)},reject:function(e){return nu(this,Df,"rejectReason",e)},then:function(e,r){var n=this,a=new fr;return n.onFulfilled.push(iu(e,a,"fulfill")),n.onRejected.push(iu(r,a,"reject")),Pf(n),a.proxy}};var nu=function(e,r,n,a){return e.state===Af&&(e.state=r,e[n]=a,Pf(e)),e},Pf=function(e){e.state===Mf?au(e,"onFulfilled",e.fulfillValue):e.state===Df&&au(e,"onRejected",e.rejectReason)},au=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},iu=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}M0(r,i)}}},M0=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(et(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):t(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};fr.all=function(t){return new fr(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var l=t[s],u=l!=null&&l.then!=null;if(u)l.then(function(f){i(s,f)},function(f){r(f)});else{var c=l;i(s,c)}})(o)})};fr.resolve=function(t){return new fr(function(e,r){e(t)})};fr.reject=function(t){return new fr(function(e,r){r(t)})};var $n=typeof Promise!="undefined"?Promise:fr,as=function(e,r,n){var a=Fs(e),i=!a,o=this._private=_e({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Ye(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Xr=as.prototype;_e(Xr,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Dt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,c){var f=e[u];f!=null&&(e[u]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new $n(function(a,i){n.push(function(){a()})})}});Xr.complete=Xr.completed;Xr.run=Xr.play;Xr.running=Xr.playing;var D0={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var c=s.style();r=_e({},r,n);var f=Object.keys(r).length===0;if(f)return new as(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var d=r.renderedPosition,v=s.pan(),h=s.zoom();r.position=gf(d,h,v)}if(l&&r.panBy!=null){var p=r.panBy,m=s.pan();r.pan={x:m.x+p.x,y:m.y+p.y}}var g=r.center||r.centre;if(l&&g!=null){var b=s.getCenterPan(g.eles,r.zoom);b!=null&&(r.pan=b)}if(l&&r.fit!=null){var w=r.fit,y=s.getFitViewport(w.eles||w.boundingBox,w.padding);y!=null&&(r.pan=y.pan,r.zoom=y.zoom)}if(l&&Oe(r.zoom)){var C=s.getZoomedViewport(r.zoom);C!=null?(C.zoomed&&(r.zoom=C.zoom),C.panned&&(r.pan=C.pan)):r.zoom=null}return new as(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=_e({},r,n));for(var l=0;l<o.length;l++){var u=o[l],c=u.animated()&&(r.queue===void 0||r.queue),f=u.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],c=u._private,f=c.animation.current,d=0;d<f.length;d++){var v=f[d],h=v._private;n&&(h.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},P0={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=_e({},r,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],c=l?s[0]:s;if(Se(a)){var f=a.indexOf(".")!==-1,d=f&&ym(a);if(o.allowGetting&&i===void 0){var v;return c&&(o.beforeGet(c),d&&c._private[o.field][a]===void 0?v=gm(c._private[o.field],d):v=c._private[o.field][a]),v}else if(o.allowSetting&&i!==void 0){var h=!o.immutableKeys[a];if(h){var p=Jc({},a,i);o.beforeSet(s,p);for(var m=0,g=u.length;m<g;m++){var b=u[m];o.canSet(b)&&(d&&c._private[o.field][a]===void 0?mm(b._private[o.field],d,i):b._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Oe(a)){var w=a,y,C,E=Object.keys(w);o.beforeSet(s,w);for(var x=0;x<E.length;x++){y=E[x],C=w[y];var _=!o.immutableKeys[y];if(_)for(var S=0;S<u.length;S++){var I=u[S];o.canSet(I)&&(I._private[o.field][y]=C)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Ye(a)){var k=a;s.on(o.bindingEvent,k)}else if(o.allowGetting&&a===void 0){var T;return c&&(o.beforeGet(c),T=c._private[o.field]),T}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=_e({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(Se(a)){for(var u=a.split(/\s+/),c=u.length,f=0;f<c;f++){var d=u[f];if(!Tr(d)){var v=!i.immutableKeys[d];if(v)for(var h=0,p=l.length;h<p;h++)l[h]._private[i.field][d]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var m=0,g=l.length;m<g;m++)for(var b=l[m]._private[i.field],w=Object.keys(b),y=0;y<w.length;y++){var C=w[y],E=!i.immutableKeys[C];E&&(b[C]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},O0={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new $n(function(s,l){var u=function(v){i.off.apply(i,f),s(v)},c=o.concat([u]),f=c.concat([]);i.on.apply(i,c)})}}},Re={};[D0,P0,O0].forEach(function(t){_e(Re,t)});var L0={animate:Re.animate(),animation:Re.animation(),animated:Re.animated(),clearQueue:Re.clearQueue(),delay:Re.delay(),delayAnimation:Re.delayAnimation(),stop:Re.stop()},mi={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(h){return n.push(h)}),n}else He(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Fn(e),o=0;o<r.length;o++){for(var s=r[o],l=s._private,u=l.classes,c=!1,f=0;f<e.length;f++){var d=e[f],v=u.has(d);if(!v){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){He(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],v=u.has(d),h=!1;r||a&&!v?(u.add(d),h=!0):(!r||a&&v)&&(u.delete(d),h=!0),!c&&h&&(i.push(l),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};mi.className=mi.classNames=mi.classes;var Pe={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:rt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Pe.variable="(?:[\\w-.]|(?:\\\\"+Pe.metaChar+"))+";Pe.className="(?:[\\w-]|(?:\\\\"+Pe.metaChar+"))+";Pe.value=Pe.string+"|"+Pe.number;Pe.id=Pe.variable;(function(){var t,e,r;for(t=Pe.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Pe.comparatorOp+="|@"+e;for(t=Pe.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Pe.comparatorOp+="|\\!"+e)})();var Ne=function(){return{checks:[]}},ge={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},is=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return zm(t.selector,e.selector)}),B0=function(){for(var t={},e,r=0;r<is.length;r++)e=is[r],t[e.selector]=e.matches;return t}(),R0=function(e,r){return B0[e](r)},N0="("+is.map(function(t){return t.selector}).join("|")+")",sn=function(e){return e.replace(new RegExp("\\\\("+Pe.metaChar+")","g"),function(r,n){return n})},br=function(e,r,n){e[e.length-1]=n},os=[{name:"group",query:!0,regex:"("+Pe.group+")",populate:function(e,r,n){var a=or(n,1),i=a[0];r.checks.push({type:ge.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:N0,populate:function(e,r,n){var a=or(n,1),i=a[0];r.checks.push({type:ge.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Pe.id+")",populate:function(e,r,n){var a=or(n,1),i=a[0];r.checks.push({type:ge.ID,value:sn(i)})}},{name:"className",query:!0,regex:"\\.("+Pe.className+")",populate:function(e,r,n){var a=or(n,1),i=a[0];r.checks.push({type:ge.CLASS,value:sn(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Pe.variable+")\\s*\\]",populate:function(e,r,n){var a=or(n,1),i=a[0];r.checks.push({type:ge.DATA_EXIST,field:sn(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Pe.variable+")\\s*("+Pe.comparatorOp+")\\s*("+Pe.value+")\\s*\\]",populate:function(e,r,n){var a=or(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+Pe.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:ge.DATA_COMPARE,field:sn(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Pe.boolOp+")\\s*("+Pe.variable+")\\s*\\]",populate:function(e,r,n){var a=or(n,2),i=a[0],o=a[1];r.checks.push({type:ge.DATA_BOOL,field:sn(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Pe.meta+")\\s*("+Pe.comparatorOp+")\\s*("+Pe.number+")\\s*\\]\\]",populate:function(e,r,n){var a=or(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:ge.META_COMPARE,field:sn(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Pe.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Ne();return s}},{name:"directedEdge",separator:!0,regex:Pe.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=r,i=Ne();return n.checks.push({type:ge.DIRECTED_EDGE,source:a,target:i}),br(e,r,n),e.edgeCount++,i}else{var o=Ne(),s=r,l=Ne();return o.checks.push({type:ge.NODE_SOURCE,source:s,target:l}),br(e,r,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Pe.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=r,i=Ne();return n.checks.push({type:ge.UNDIRECTED_EDGE,nodes:[a,i]}),br(e,r,n),e.edgeCount++,i}else{var o=Ne(),s=r,l=Ne();return o.checks.push({type:ge.NODE_NEIGHBOR,node:s,neighbor:l}),br(e,r,o),l}}},{name:"child",separator:!0,regex:Pe.child,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=Ne(),i=e[e.length-1];return n.checks.push({type:ge.CHILD,parent:i,child:a}),br(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ne(),s=e[e.length-1],l=Ne(),u=Ne(),c=Ne(),f=Ne();return o.checks.push({type:ge.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:ge.TRUE}],f.checks.push({type:ge.TRUE}),l.checks.push({type:ge.PARENT,parent:f,child:c}),br(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var d=Ne(),v=Ne(),h=[{type:ge.PARENT,parent:d,child:v}];return d.checks=r.checks,r.checks=h,e.compoundCount++,v}}},{name:"descendant",separator:!0,regex:Pe.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=Ne(),i=e[e.length-1];return n.checks.push({type:ge.DESCENDANT,ancestor:i,descendant:a}),br(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ne(),s=e[e.length-1],l=Ne(),u=Ne(),c=Ne(),f=Ne();return o.checks.push({type:ge.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:ge.TRUE}],f.checks.push({type:ge.TRUE}),l.checks.push({type:ge.ANCESTOR,ancestor:f,descendant:c}),br(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var d=Ne(),v=Ne(),h=[{type:ge.ANCESTOR,ancestor:d,descendant:v}];return d.checks=r.checks,r.checks=h,e.compoundCount++,v}}},{name:"subject",modifier:!0,regex:Pe.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Fe("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ge.DIRECTED_EDGE?a.type=ge.NODE_TARGET:i===ge.UNDIRECTED_EDGE&&(a.type=ge.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];os.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var z0=function(e){for(var r,n,a,i=0;i<os.length;i++){var o=os[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,r=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},F0=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},$0=function(e){var r=this,n=r.inputText=e,a=r[0]=Ne();for(r.length=1,n=F0(n);;){var i=z0(n);if(i.expr==null)return Fe("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var c=r[u];if(c.compoundCount>0&&c.edgeCount>0)return Fe("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Fe("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Fe("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},H0=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c==null?"":c},r=function(c){return Se(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,v=c.value;switch(d){case ge.GROUP:{var h=e(v);return h.substring(0,h.length-1)}case ge.DATA_COMPARE:{var p=c.field,m=c.operator;return"["+p+n(e(m))+r(v)+"]"}case ge.DATA_BOOL:{var g=c.operator,b=c.field;return"["+e(g)+b+"]"}case ge.DATA_EXIST:{var w=c.field;return"["+w+"]"}case ge.META_COMPARE:{var y=c.operator,C=c.field;return"[["+C+n(e(y))+r(v)+"]]"}case ge.STATE:return v;case ge.ID:return"#"+v;case ge.CLASS:return"."+v;case ge.PARENT:case ge.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case ge.ANCESTOR:case ge.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case ge.COMPOUND_SPLIT:{var E=i(c.left,f),x=i(c.subject,f),_=i(c.right,f);return E+(E.length>0?" ":"")+x+_}case ge.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,v,h){return d+(f===c&&h===0?"$":"")+a(v,f)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},V0={parse:$0,toString:H0},Of=function(e,r,n){var a,i=Se(e),o=he(e),s=Se(n),l,u,c=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(l=!i&&!o?"":""+e,u=""+n),c&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},q0=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},W0=function(e){return e!==void 0},Ys=function(e,r){return e.data(r)},U0=function(e,r){return e[r]()},Xe=[],We=function(e,r){return e.checks.every(function(n){return Xe[n.type](n,r)})};Xe[ge.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Xe[ge.STATE]=function(t,e){var r=t.value;return R0(r,e)};Xe[ge.ID]=function(t,e){var r=t.value;return e.id()===r};Xe[ge.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Xe[ge.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Of(U0(e,r),n,a)};Xe[ge.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Of(Ys(e,r),n,a)};Xe[ge.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return q0(Ys(e,r),n)};Xe[ge.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,W0(Ys(e,r))};Xe[ge.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return We(r,a)&&We(n,i)||We(n,a)&&We(r,i)};Xe[ge.NODE_NEIGHBOR]=function(t,e){return We(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&We(t.neighbor,r)})};Xe[ge.DIRECTED_EDGE]=function(t,e){return We(t.source,e.source())&&We(t.target,e.target())};Xe[ge.NODE_SOURCE]=function(t,e){return We(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&We(t.target,r)})};Xe[ge.NODE_TARGET]=function(t,e){return We(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&We(t.source,r)})};Xe[ge.CHILD]=function(t,e){return We(t.child,e)&&We(t.parent,e.parent())};Xe[ge.PARENT]=function(t,e){return We(t.parent,e)&&e.children().some(function(r){return We(t.child,r)})};Xe[ge.DESCENDANT]=function(t,e){return We(t.descendant,e)&&e.ancestors().some(function(r){return We(t.ancestor,r)})};Xe[ge.ANCESTOR]=function(t,e){return We(t.ancestor,e)&&e.descendants().some(function(r){return We(t.descendant,r)})};Xe[ge.COMPOUND_SPLIT]=function(t,e){return We(t.subject,e)&&We(t.left,e)&&We(t.right,e)};Xe[ge.TRUE]=function(){return!0};Xe[ge.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Xe[ge.FILTER]=function(t,e){var r=t.value;return r(e)};var G0=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ge.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(We(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},K0=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(We(a,e))return!0}return!1},Y0={matches:K0,filter:G0},Ir=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Se(e)&&e.match(/^\s*$/)||(Dt(e)?this.addQuery({checks:[{type:ge.COLLECTION,value:e.collection()}]}):Ye(e)?this.addQuery({checks:[{type:ge.FILTER,value:e}]}):Se(e)?this.parse(e)||(this.invalid=!0):je("A selector must be created from a string; found "))},Ar=Ir.prototype;[V0,Y0].forEach(function(t){return _e(Ar,t)});Ar.text=function(){return this.inputText};Ar.size=function(){return this.length};Ar.eq=function(t){return this[t]};Ar.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Ar.addQuery=function(t){this[this.length++]=t};Ar.selector=Ar.toString;var Cr={allAre:function(e){var r=new Ir(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Ir(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Cr.allAreNeighbours=Cr.allAreNeighbors;Cr.has=Cr.contains;Cr.equal=Cr.equals=Cr.same;var Bt=function(e,r){return function(a,i,o,s){var l=a,u=this,c;if(l==null?c="":Dt(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var f=u[0]._private,d=f.traversalCache=f.traversalCache||{},v=d[r]=d[r]||[],h=Yr(c),p=v[h];return p||(v[h]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},kn={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Bt(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function js(t,e,r,n){for(var a=[],i=new Fn,o=t.cy(),s=o.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return t}function Lf(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}kn.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return js(this,t,e,Lf)};function Bf(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}kn.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return js(this,t,e,Bf)};function j0(t,e,r){Bf(t,e,r),Lf(t,e,r)}kn.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return js(this,t,e,j0)};kn.ancestors=kn.parents;var Ca,Rf;Ca=Rf={data:Re.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Re.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Re.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Re.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Re.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Re.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Ca.attr=Ca.data;Ca.removeAttr=Ca.removeData;var X0=Rf,eo={};function Do(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}_e(eo,{degree:Do(function(t,e){return e.source().same(e.target())?2:1}),indegree:Do(function(t,e){return e.target().same(t)?1:0}),outdegree:Do(function(t,e){return e.source().same(t)?1:0})});function ln(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}_e(eo,{minDegree:ln("degree",function(t,e){return t<e}),maxDegree:ln("degree",function(t,e){return t>e}),minIndegree:ln("indegree",function(t,e){return t<e}),maxIndegree:ln("indegree",function(t,e){return t>e}),minOutdegree:ln("outdegree",function(t,e){return t<e}),maxOutdegree:ln("outdegree",function(t,e){return t>e})});_e(eo,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var jt,Nf,zf=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},ou={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){zf(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};jt=Nf={position:Re.data(ou),silentPosition:Re.data(_e({},ou,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){zf(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Oe(e))r?this.silentPosition(e):this.position(e);else if(Ye(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Oe(e)?(a={x:he(e.x)?e.x:0,y:he(e.y)?e.y:0},n=r):Se(e)&&he(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return Oe(e)?this.shift(e,!0):Se(e)&&he(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Oe(e)?e:void 0,l=s!==void 0||r!==void 0&&Se(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(gf(s,i,o))}else{var f=n.position();return s=Qi(f,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=Oe(e)?e:void 0,o=i!==void 0||r!==void 0&&Se(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],c=s?u.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var v=d?c.position():{x:0,y:0};r!==void 0?u.position(e,r+v[e]):i!==void 0&&u.position({x:i.x+v.x,y:i.y+v.y})}else{var h=n.position(),p=s?n.parent():null,m=p&&p.length>0,g=m;m&&(p=p[0]);var b=g?p.position():{x:0,y:0};return i={x:h.x-b.x,y:h.y-b.y},e===void 0?i:i[e]}else if(!o)return;return this}};jt.modelPosition=jt.point=jt.position;jt.modelPositions=jt.points=jt.positions;jt.renderedPoint=jt.renderedPosition;jt.relativePoint=jt.relativePosition;var Z0=Nf,Sn,Dr;Sn=Dr={};Dr.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}};Dr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Dr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),d=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function v(S,I,k){var T=0,P=0,A=I+k;return S>0&&A>0&&(T=I/A*S,P=k/A*S),{biasDiff:T,biasComplementDiff:P}}function h(S,I,k,T){if(k.units==="%")switch(T){case"width":return S>0?k.pfValue*S:0;case"height":return I>0?k.pfValue*I:0;case"average":return S>0&&I>0?k.pfValue*(S+I)/2:0;case"min":return S>0&&I>0?S>I?k.pfValue*I:k.pfValue*S:0;case"max":return S>0&&I>0?S>I?k.pfValue*S:k.pfValue*I:0;default:return 0}else return k.units==="px"?k.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var m=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var g=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var b=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var w=v(c.width.val-f.w,p,m),y=w.biasDiff,C=w.biasComplementDiff,E=v(c.height.val-f.h,g,b),x=E.biasDiff,_=E.biasComplementDiff;s.autoPadding=h(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),d.x=(-y+f.x1+f.x2+C)/2,s.autoHeight=Math.max(f.h,c.height.val),d.y=(-x+f.y1+f.y2+_)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Lt=function(e){return e===1/0||e===-1/0?0:e},Ut=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Fr=function(e,r){return r==null?e:Ut(e,r.x1,r.y1,r.x2,r.y2)},Xn=function(e,r,n){return Gt(e,r,n)},ri=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=l-o,f.y1=u-o,f.x2=l+o,f.y2=u+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,gi(f,1),Ut(e,f.x1,f.y1,f.x2,f.y2)}}},Po=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),c=Xn(o,"labelWidth",n),f=Xn(o,"labelHeight",n),d=Xn(o,"labelX",n),v=Xn(o,"labelY",n),h=r.pstyle(a+"text-margin-x").pfValue,p=r.pstyle(a+"text-margin-y").pfValue,m=r.isEdge(),g=r.pstyle(a+"text-rotation"),b=r.pstyle("text-outline-width").pfValue,w=r.pstyle("text-border-width").pfValue,y=w/2,C=r.pstyle("text-background-padding").pfValue,E=2,x=f,_=c,S=_/2,I=x/2,k,T,P,A;if(m)k=d-S,T=d+S,P=v-I,A=v+I;else{switch(l.value){case"left":k=d-_,T=d;break;case"center":k=d-S,T=d+S;break;case"right":k=d,T=d+_;break}switch(u.value){case"top":P=v-x,A=v;break;case"center":P=v-I,A=v+I;break;case"bottom":P=v,A=v+x;break}}k+=h-Math.max(b,y)-C-E,T+=h+Math.max(b,y)+C+E,P+=p-Math.max(b,y)-C-E,A+=p+Math.max(b,y)+C+E;var B=n||"main",L=i.labelBounds,N=L[B]=L[B]||{};N.x1=k,N.y1=P,N.x2=T,N.y2=A,N.w=T-k,N.h=A-P;var H=m&&g.strValue==="autorotate",W=g.pfValue!=null&&g.pfValue!==0;if(H||W){var F=H?Xn(i.rstyle,"labelAngle",n):g.pfValue,D=Math.cos(F),R=Math.sin(F),O=(k+T)/2,$=(P+A)/2;if(!m){switch(l.value){case"left":O=T;break;case"right":O=k;break}switch(u.value){case"top":$=A;break;case"bottom":$=P;break}}var V=function(Ee,le){return Ee=Ee-O,le=le-$,{x:Ee*D-le*R+O,y:Ee*R+le*D+$}},q=V(k,P),z=V(k,A),K=V(T,P),te=V(T,A);k=Math.min(q.x,z.x,K.x,te.x),T=Math.max(q.x,z.x,K.x,te.x),P=Math.min(q.y,z.y,K.y,te.y),A=Math.max(q.y,z.y,K.y,te.y)}var J=B+"Rot",ie=L[J]=L[J]||{};ie.x1=k,ie.y1=P,ie.x2=T,ie.y2=A,ie.w=T-k,ie.h=A-P,Ut(e,k,P,T,A),Ut(i.labelBounds.all,k,P,T,A)}return e}},Q0=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=It(),s=e._private,l=e.isNode(),u=e.isEdge(),c,f,d,v,h,p,m=s.rstyle,g=l&&a?e.pstyle("bounds-expansion").pfValue:[0],b=function(ne){return ne.pstyle("display").value!=="none"},w=!a||b(e)&&(!u||b(e.source())&&b(e.target()));if(w){var y=0,C=0;a&&r.includeOverlays&&(y=e.pstyle("overlay-opacity").value,y!==0&&(C=e.pstyle("overlay-padding").value));var E=0,x=0;a&&r.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(x=e.pstyle("underlay-padding").value));var _=Math.max(C,x),S=0,I=0;if(a&&(S=e.pstyle("width").pfValue,I=S/2),l&&r.includeNodes){var k=e.position();h=k.x,p=k.y;var T=e.outerWidth(),P=T/2,A=e.outerHeight(),B=A/2;c=h-P,f=h+P,d=p-B,v=p+B,Ut(o,c,d,f,v)}else if(u&&r.includeEdges)if(a&&!i){var L=e.pstyle("curve-style").strValue;if(c=Math.min(m.srcX,m.midX,m.tgtX),f=Math.max(m.srcX,m.midX,m.tgtX),d=Math.min(m.srcY,m.midY,m.tgtY),v=Math.max(m.srcY,m.midY,m.tgtY),c-=I,f+=I,d-=I,v+=I,Ut(o,c,d,f,v),L==="haystack"){var N=m.haystackPts;if(N&&N.length===2){if(c=N[0].x,d=N[0].y,f=N[1].x,v=N[1].y,c>f){var H=c;c=f,f=H}if(d>v){var W=d;d=v,v=W}Ut(o,c-I,d-I,f+I,v+I)}}else if(L==="bezier"||L==="unbundled-bezier"||L==="segments"||L==="taxi"){var F;switch(L){case"bezier":case"unbundled-bezier":F=m.bezierPts;break;case"segments":case"taxi":F=m.linePts;break}if(F!=null)for(var D=0;D<F.length;D++){var R=F[D];c=R.x-I,f=R.x+I,d=R.y-I,v=R.y+I,Ut(o,c,d,f,v)}}}else{var O=e.source(),$=O.position(),V=e.target(),q=V.position();if(c=$.x,f=q.x,d=$.y,v=q.y,c>f){var z=c;c=f,f=z}if(d>v){var K=d;d=v,v=K}c-=I,f+=I,d-=I,v+=I,Ut(o,c,d,f,v)}if(a&&r.includeEdges&&u&&(ri(o,e,"mid-source"),ri(o,e,"mid-target"),ri(o,e,"source"),ri(o,e,"target")),a){var te=e.pstyle("ghost").value==="yes";if(te){var J=e.pstyle("ghost-offset-x").pfValue,ie=e.pstyle("ghost-offset-y").pfValue;Ut(o,o.x1+J,o.y1+ie,o.x2+J,o.y2+ie)}}var ve=s.bodyBounds=s.bodyBounds||{};Wl(ve,o),Io(ve,g),gi(ve,1),a&&(c=o.x1,f=o.x2,d=o.y1,v=o.y2,Ut(o,c-_,d-_,f+_,v+_));var Ee=s.overlayBounds=s.overlayBounds||{};Wl(Ee,o),Io(Ee,g),gi(Ee,1);var le=s.labelBounds=s.labelBounds||{};le.all!=null?_y(le.all):le.all=It(),a&&r.includeLabels&&(r.includeMainLabels&&Po(o,e,null),u&&(r.includeSourceLabels&&Po(o,e,"source"),r.includeTargetLabels&&Po(o,e,"target")))}return o.x1=Lt(o.x1),o.y1=Lt(o.y1),o.x2=Lt(o.x2),o.y2=Lt(o.y2),o.w=Lt(o.x2-o.x1),o.h=Lt(o.y2-o.y1),o.w>0&&o.h>0&&w&&(Io(o,g),gi(o,1)),o},Ff=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a},$f=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return Km([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},su=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?lu:Ff(r),s=o===lu,l=$f(e),u=n.bbCachePosKey===l,c=r.useCache&&u,f=function(p){return p._private.bbCache==null||p._private.styleDirty},d=!c||f(e)||i&&f(e.source())||f(e.target());if(d?(u||e.recalculateRenderedStyle(c),a=Q0(e,Sa),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var v=e.isNode();a=It(),(r.includeNodes&&v||r.includeEdges&&!v)&&(r.includeOverlays?Fr(a,n.overlayBounds):Fr(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?Fr(a,n.labelBounds.all):(r.includeMainLabels&&Fr(a,n.labelBounds.mainRot),r.includeSourceLabels&&Fr(a,n.labelBounds.sourceRot),r.includeTargetLabels&&Fr(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Sa={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},lu=Ff(Sa),uu=ht(Sa);Dr.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Sa:t=uu(t),e=su(this[0],t);else{e=It(),t=t||Sa;var r=uu(t),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=$f(s),c=l.bbCachePosKey===u,f=r.useCache&&c&&!l.styleDirty;s.recalculateRenderedStyle(f)}this.updateCompoundBounds(!t.useCache);for(var d=0;d<n.length;d++){var v=n[d];Fr(e,su(v,r))}}return e.x1=Lt(e.x1),e.y1=Lt(e.y1),e.x2=Lt(e.x2),e.y2=Lt(e.y2),e.w=Lt(e.x2-e.x1),e.h=Lt(e.y2-e.y1),e};Dr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Dr.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),Oe(t)){var i=t;t=function(){return i}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=Sy(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};Sn.boundingbox=Sn.bb=Sn.boundingBox;Sn.renderedBoundingbox=Sn.renderedBoundingBox;var J0=Dr,na,Ra;na=Ra={};var Hf=function(e){e.uppercaseName=$l(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=$l(e.outerName),na[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},na["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},na["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},na["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Hf({name:"width"});Hf({name:"height"});Ra.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Ra.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Ra.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var eb=Ra,tb=function(e,r){if(e.isEdge())return r(e)},rb=function(e,r){if(e.isEdge()){var n=e.cy();return Qi(r(e),n.zoom(),n.pan())}},nb=function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return Qi(o,i,a)})}},ab=function(e){return e.renderer().getControlPoints(e)},ib=function(e){return e.renderer().getSegmentPoints(e)},ob=function(e){return e.renderer().getSourceEndpoint(e)},sb=function(e){return e.renderer().getTargetEndpoint(e)},lb=function(e){return e.renderer().getEdgeMidpoint(e)},cu={controlPoints:{get:ab,mult:!0},segmentPoints:{get:ib,mult:!0},sourceEndpoint:{get:ob},targetEndpoint:{get:sb},midpoint:{get:lb}},ub=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},cb=Object.keys(cu).reduce(function(t,e){var r=cu[e],n=ub(e);return t[e]=function(){return tb(this,r.get)},r.mult?t[n]=function(){return nb(this,r.get)}:t[n]=function(){return rb(this,r.get)},t},{}),fb=_e({},Z0,J0,eb,cb);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Vf=function(e,r){this.recycle(e,r)};function Zn(){return!1}function ni(){return!0}Vf.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Zn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ni:Zn):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ni;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ni;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ni,this.stopPropagation()},isDefaultPrevented:Zn,isPropagationStopped:Zn,isImmediatePropagationStopped:Zn};var qf=/^([^.]+)(\.(?:[^.]+))?$/,hb=".*",Wf={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},fu=Object.keys(Wf),db={};function to(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:db,e=arguments.length>1?arguments[1]:void 0,r=0;r<fu.length;r++){var n=fu[r];this[n]=t[n]||Wf[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Mr=to.prototype,Uf=function(e,r,n,a,i,o,s){Ye(a)&&(i=a,a=null),s&&(o==null?o=s:o=_e({},o,s));for(var l=He(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!Tr(c)){var f=c.match(qf);if(f){var d=f[1],v=f[2]?f[2]:null,h=r(e,c,d,v,a,i,o);if(h===!1)break}}}},hu=function(e,r){return e.addEventFields(e.context,r),new Vf(r.type,r)},vb=function(e,r,n){if(km(n)){r(e,n);return}else if(Oe(n)){r(e,hu(e,n));return}for(var a=He(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!Tr(o)){var s=o.match(qf);if(s){var l=s[1],u=s[2]?s[2]:null,c=hu(e,{type:l,namespace:u,target:e.context});r(e,c)}}}};Mr.on=Mr.addListener=function(t,e,r,n,a){return Uf(this,function(i,o,s,l,u,c,f){Ye(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:l,qualifier:u,conf:f})},t,e,r,n,a),this};Mr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Mr.removeListener=Mr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=Qm(this.listeners));for(var i=this.listeners,o=function(u){var c=i[u];Uf(a,function(f,d,v,h,p,m){if((c.type===v||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!m||c.callback===m))return i.splice(u,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};Mr.removeAllListeners=function(){return this.removeListener("*")};Mr.emit=Mr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,He(e)||(e=[e]),vb(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(c){var f=n[c];if(f.type===o.type&&(!f.namespace||f.namespace===o.namespace||f.namespace===hb)&&i.eventMatches(i.context,f,o)){var d=[o];e!=null&&ey(d,e),i.beforeEmit(i.context,f,o),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(p){return p!==f}));var v=i.callbackContext(i.context,f,o),h=f.callback.apply(v,d);i.afterEmit(i.context,f,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var pb={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&La(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},ai=function(e){return Se(e)?new Ir(e):e},Gf={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new to(pb,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Re.eventAliasesOn(Gf);var Kf={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Se(e)||Dt(e))return new Ir(e).filter(this);if(Ye(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Se(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Se(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var c=s[u];l.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Se(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var c=0;c<l.length;c++){var f=l[c],d=f._private.data.id,v=u.hasElementWithId(d);v||n.push(f)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;Se(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(c,f,d){for(var v=0;v<c.length;v++){var h=c[v],p=h._private.data.id,m=f.hasElementWithId(p);m?i.merge(h):d.push(h)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(Se(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Se(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var c=this.length++;this[c]=s,i.set(l,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Se(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},Be=Kf;Be.u=Be["|"]=Be["+"]=Be.union=Be.or=Be.add;Be["\\"]=Be["!"]=Be["-"]=Be.difference=Be.relativeComplement=Be.subtract=Be.not;Be.n=Be["&"]=Be["."]=Be.and=Be.intersection=Be.intersect;Be["^"]=Be["(+)"]=Be["(-)"]=Be.symmetricDifference=Be.symdiff=Be.xor;Be.fnFilter=Be.filterFn=Be.stdFilter=Be.filter;Be.complement=Be.abscomp=Be.absoluteComplement;var gb={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Yf=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Hs:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var l=s(e)-s(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},Di={forEach:function(e,r){if(Ye(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Ye(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Yf)},zDepth:function(){var e=this[0];if(!!e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Hs-1}else{var i=r.source,o=r.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};Di.each=Di.forEach;var mb=function(){var e="undefined",r=(typeof Symbol=="undefined"?"undefined":et(Symbol))!=e&&et(Symbol.iterator)!=e;r&&(Di[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return Jc({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};mb();var yb=ht({nodeDimensionsIncludeLabels:!1}),yi={layoutDimensions:function(e){e=yb(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(C){return!C.isParent()}),i=this.cy(),o=r.eles,s=function(E){return E.id()},l=ma(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(E,x,_){var S={x:x.x1+x.w/2,y:x.y1+x.h/2},I={x:(_.x-S.x)*E,y:(_.y-S.y)*E};return{x:S.x+I.x,y:S.y+I.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var E=It(),x=0;x<a.length;x++){var _=a[x],S=l(_,x);ky(E,S.x,S.y)}return E},d=f(),v=ma(function(C,E){var x=l(C,E);if(c){var _=Math.abs(r.spacingFactor);x=u(_,d,x)}return r.transform!=null&&(x=r.transform(C,x)),x},s);if(r.animate){for(var h=0;h<a.length;h++){var p=a[h],m=v(p,h),g=r.animateFilter==null||r.animateFilter(p,h);if(g){var b=p.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else p.position(m)}if(r.fit){var w=i.animation({fit:{boundingBox:o.boundingBoxAt(v),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}else if(r.zoom!==void 0&&r.pan!==void 0){var y=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}e.animations.forEach(function(C){return C.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),$n.all(e.animations.map(function(C){return C.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(v),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(_e({},e,{eles:this}))}};yi.createLayout=yi.makeLayout=yi.layout;function jf(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function ro(t,e){return t=Yr(t),function(n){return jf(t,e,n)}}function no(t,e){t=Yr(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return jf(t,r,a)}}var ct={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(!!a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i!=null?i:r?a.style().getDefaultProperty(e):null}},numericStyle:function(e){var r=this[0];if(!!r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(!!r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Oe(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Se(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Oo(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Xs(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||Oo(i,n);var l=s.source,u=s.target;return r(l)&&(!o||Oo(l,r))&&(l===u||r(u)&&(!o||Oo(u,r)))}}}var Hn=ro("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});ct.takesUpSpace=no("takesUpSpace",Xs({ok:Hn}));var bb=ro("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Hn(t)}),wb=ro("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Hn(t)});ct.interactive=no("interactive",Xs({ok:bb,parentOk:wb,edgeOkViaNode:Hn}));ct.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var xb=ro("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Hn(t)}),Eb=Hn;ct.visible=no("visible",Xs({ok:xb,edgeOkViaNode:Eb}));ct.hidden=function(){var t=this[0];if(t)return!t.visible()};ct.isBundledBezier=no("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});ct.bypass=ct.css=ct.style;ct.renderedCss=ct.renderedStyle;ct.removeBypass=ct.removeCss=ct.removeStyle;ct.pstyle=ct.parsedStyle;var Sr={};function du(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&Ye(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&He(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(t.event),o&&d.emit(o)}return this}}function Vn(t){Sr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Sr[t.on]=du({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Sr[t.off]=du({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Vn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Vn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Vn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Vn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Sr.deselect=Sr.unselect;Sr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Vn({field:"active",on:"activate",off:"unactivate"});Vn({field:"pannable",on:"panify",off:"unpanify"});Sr.inactive=function(){var t=this[0];if(t)return!t._private.active};var gt={},vu=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(!!s.isNode()){for(var l=!1,u=s.connectedEdges(),c=0;c<u.length;c++){var f=u[c],d=f.source(),v=f.target();if(e.noIncomingEdges&&v===s&&d!==s||e.noOutgoingEdges&&d===s&&v!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},pu=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(!!o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),f=u.target();e.outgoing&&c===o?(a.push(u),a.push(f)):e.incoming&&f===o&&(a.push(u),a.push(c))}}return this.spawn(a,!0).filter(r)}},gu=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],c=u.id();i[c]||(i[c]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};gt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};_e(gt,{roots:vu({noIncomingEdges:!0}),leaves:vu({noOutgoingEdges:!0}),outgoers:Bt(pu({outgoing:!0}),"outgoers"),successors:gu({outgoing:!0}),incomers:Bt(pu({incoming:!0}),"incomers"),predecessors:gu({incoming:!0})});_e(gt,{neighborhood:Bt(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),c=a===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});gt.neighbourhood=gt.neighborhood;gt.closedNeighbourhood=gt.closedNeighborhood;gt.openNeighbourhood=gt.openNeighborhood;_e(gt,{source:Bt(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Bt(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:mu({attr:"source"}),targets:mu({attr:"target"})});function mu(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}_e(gt,{edgesWith:Bt(yu(),"edgesWith"),edgesTo:Bt(yu({thisIsSrc:!0}),"edgesTo")});function yu(t){return function(r){var n=[],a=this._private.cy,i=t||{};Se(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),d=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),v=f||d;!v||(i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(u)}return this.spawn(n,!0)}}_e(gt,{connectedEdges:Bt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(!!a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Bt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];!a.isEdge()||(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Bt(bu(),"parallelEdges"),codirectedEdges:Bt(bu({codirected:!0}),"codirectedEdges")});function bu(t){var e={codirected:!1};return t=_e({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var l=i[s],u=l._private,c=u.source,f=c._private.data.id,d=u.data.target,v=c._private.edges,h=0;h<v.length;h++){var p=v[h],m=p._private.data,g=m.target,b=m.source,w=g===d&&b===f,y=f===g&&d===b;(o.codirected&&w||!o.codirected&&(w||y))&&a.push(p)}return this.spawn(a,!0).filter(n)}}_e(gt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var l=function(){var c=n.collection();o.push(c);var f=i[0];s(f,c),r.bfs({directed:!1,roots:f,visit:function(v){return s(v,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(v){r.has(v)&&c.has(v.source())&&c.has(v.target())&&c.merge(v)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});gt.componentsOf=gt.components;var ft=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e===void 0){je("A collection must have a reference to the core");return}var a=new er,i=!1;if(!r)r=[];else if(r.length>0&&Oe(r[0])&&!La(r[0])){i=!0;for(var o=[],s=new Fn,l=0,u=r.length;l<u;l++){var c=r[l];c.data==null&&(c.data={});var f=c.data;if(f.id==null)f.id=vf();else if(e.hasElementWithId(f.id)||s.has(f.id))continue;var d=new Zi(e,c,!1);o.push(d),s.add(f.id)}r=o}this.length=0;for(var v=0,h=r.length;v<h;v++){var p=r[v][0];if(p!=null){var m=p._private.data.id;(!n||!a.has(m))&&(n&&a.set(m,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(g){this.lazyMap=g},rebuildMap:function(){for(var b=this.lazyMap=new er,w=this.eles,y=0;y<w.length;y++){var C=w[y];b.set(C.id(),{index:y,ele:C})}}},n&&(this._private.map=a),i&&this.restore()},qe=Zi.prototype=ft.prototype=Object.create(Array.prototype);qe.instanceString=function(){return"collection"};qe.spawn=function(t,e){return new ft(this.cy(),t,e)};qe.spawnSelf=function(){return this.spawn(this)};qe.cy=function(){return this._private.cy};qe.renderer=function(){return this._private.cy.renderer()};qe.element=function(){return this[0]};qe.collection=function(){return tf(this)?this:new ft(this._private.cy,[this])};qe.unique=function(){return new ft(this._private.cy,this,!0)};qe.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};qe.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new ft(e)};qe.$id=qe.getElementById;qe.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};qe.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};qe.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};qe.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Oe(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,l=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in t.data,c=t.data.parent;u&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(p,m,g){var b=t[p];b!=null&&b!==n[p]&&(b?e[m]():e[g]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var d={data:Jt(n.data),position:Jt(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var v=0;return n.classes.forEach(function(h){return d.classes+=v++===0?h:" "+h}),d}}};qe.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};qe.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Zi(t,a,!1);e.push(i)}return new ft(t,e)};qe.copy=qe.clone;qe.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,l=0,u=r.length;l<u;l++){var c=r[l];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var f,d=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var v=s[f],h=v._private,p=h.data;if(v.clearTraversalCache(),!(!e&&!h.removed)){if(p.id===void 0)p.id=vf();else if(he(p.id))p.id=""+p.id;else if(Tr(p.id)||!Se(p.id)){je("Can not create element with invalid string ID `"+p.id+"`"),d();continue}else if(n.hasElementWithId(p.id)){je("Can not create second element with ID `"+p.id+"`"),d();continue}}var m=p.id;if(v.isNode()){var g=h.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(v.isEdge()){for(var b=v,w=["source","target"],y=w.length,C=!1,E=0;E<y;E++){var x=w[E],_=p[x];he(_)&&(_=p[x]=""+p[x]),_==null||_===""?(je("Can not create edge `"+m+"` with unspecified "+x),C=!0):n.hasElementWithId(_)||(je("Can not create edge `"+m+"` with nonexistant "+x+" `"+_+"`"),C=!0)}if(C){d();continue}var S=n.getElementById(p.source),I=n.getElementById(p.target);S.same(I)?S._private.edges.push(b):(S._private.edges.push(b),I._private.edges.push(b)),b._private.source=S,b._private.target=I}h.map=new er,h.map.set(m,{ele:v,index:0}),h.removed=!1,e&&n.addToPool(v)}for(var k=0;k<i.length;k++){var T=i[k],P=T._private.data;he(P.parent)&&(P.parent=""+P.parent);var A=P.parent,B=A!=null;if(B){var L=n.getElementById(A);if(L.empty())P.parent=void 0;else{for(var N=!1,H=L;!H.empty();){if(T.same(H)){N=!0,P.parent=void 0;break}H=H.parent()}N||(L[0]._private.children.push(T),T._private.parent=L[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var W=s.length===r.length?r:new ft(n,s),F=0;F<W.length;F++){var D=W[F];D.isNode()||(D.parallelEdges().clearTraversalCache(),D.source().clearTraversalCache(),D.target().clearTraversalCache())}var R;a.hasCompoundNodes?R=n.collection().merge(W).merge(W.connectedNodes()).merge(W.parent()):R=W,R.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?W.emitAndNotify("add"):e&&W.emit("add")}return r};qe.removed=function(){var t=this[0];return t&&t._private.removed};qe.inside=function(){var t=this[0];return t&&!t._private.removed};qe.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(A){for(var B=A._private.edges,L=0;L<B.length;L++)l(B[L])}function s(A){for(var B=A._private.children,L=0;L<B.length;L++)l(B[L])}function l(A){var B=a[A.id()];e&&A.removed()||B||(a[A.id()]=!0,A.isNode()?(n.push(A),o(A),s(A)):n.unshift(A))}for(var u=0,c=r.length;u<c;u++){var f=r[u];l(f)}function d(A,B){var L=A._private.edges;kr(L,B),A.clearTraversalCache()}function v(A){A.clearTraversalCache()}var h=[];h.ids={};function p(A,B){B=B[0],A=A[0];var L=A._private.children,N=A.id();kr(L,B),B._private.parent=null,h.ids[N]||(h.ids[N]=!0,h.push(A))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var m=0;m<n.length;m++){var g=n[m];if(g.isEdge()){var b=g.source()[0],w=g.target()[0];d(b,g),d(w,g);for(var y=g.parallelEdges(),C=0;C<y.length;C++){var E=y[C];v(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var x=g.parent();x.length!==0&&p(x,g)}e&&(g._private.removed=!0)}var _=i._private.elements;i._private.hasCompoundNodes=!1;for(var S=0;S<_.length;S++){var I=_[S];if(I.isParent()){i._private.hasCompoundNodes=!0;break}}var k=new ft(this.cy(),n);k.size()>0&&(t?k.emitAndNotify("remove"):e&&k.emit("remove"));for(var T=0;T<h.length;T++){var P=h[T];(!e||!P.removed())&&P.updateStyle()}return k};qe.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var h=r[v],p=h._private.data;h.isEdge()&&(l&&(p.source=o),u&&(p.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var v=r.remove(n,a);v.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var p=r[h],m=p._private.data;p.isNode()&&(m.parent=d)}v.restore(n,a)}),r.emitAndNotify("move")}}return this};[If,L0,mi,Cr,kn,X0,eo,fb,Gf,Kf,gb,Di,yi,ct,Sr,gt].forEach(function(t){_e(qe,t)});var Cb={add:function(e){var r,n=this;if(Dt(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new ft(n,i)}}else if(He(e)){var l=e;r=new ft(n,l)}else if(Oe(e)&&(He(e.nodes)||He(e.edges))){for(var u=e,c=[],f=["nodes","edges"],d=0,v=f.length;d<v;d++){var h=f[d],p=u[h];if(He(p))for(var m=0,g=p.length;m<g;m++){var b=_e({group:h},p[m]);c.push(b)}}r=new ft(n,c)}else{var w=e;r=new Zi(n,w).collection()}return r},remove:function(e){if(!Dt(e)){if(Se(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Sb(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),c=typeof Float32Array!="undefined";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=c?new Float32Array(l):new Array(l);function v(I,k){return 1-3*k+3*I}function h(I,k){return 3*k-6*I}function p(I){return 3*I}function m(I,k,T){return((v(k,T)*I+h(k,T))*I+p(k))*I}function g(I,k,T){return 3*v(k,T)*I*I+2*h(k,T)*I+p(k)}function b(I,k){for(var T=0;T<a;++T){var P=g(k,t,r);if(P===0)return k;var A=m(k,t,r)-I;k-=A/P}return k}function w(){for(var I=0;I<l;++I)d[I]=m(I*u,t,r)}function y(I,k,T){var P,A,B=0;do A=k+(T-k)/2,P=m(A,t,r)-I,P>0?T=A:k=A;while(Math.abs(P)>o&&++B<s);return A}function C(I){for(var k=0,T=1,P=l-1;T!==P&&d[T]<=I;++T)k+=u;--T;var A=(I-d[T])/(d[T+1]-d[T]),B=k+A*u,L=g(B,t,r);return L>=i?b(I,B):L===0?B:y(I,k,k+u)}var E=!1;function x(){E=!0,(t!==e||r!==n)&&w()}var _=function(k){return E||x(),t===e&&r===n?k:k===0?0:k===1?1:m(C(k),e,n)};_.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var S="generateBezier("+[t,e,r,n]+")";return _.toString=function(){return S},_}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var _b=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,f=16/1e3,d,v,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,d=o!==null,d?(u=n(a,i),v=u/o*f):v=f;h=r(h||s,v),l.push(1+h.x),u+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return d?function(p){return l[p*(l.length-1)|0]}:u}}(),Ve=function(e,r,n,a){var i=Sb(e,r,n,a);return function(o,s,l){return o+(s-o)*i(l)}},bi={linear:function(e,r,n){return e+(r-e)*n},ease:Ve(.25,.1,.25,1),"ease-in":Ve(.42,0,1,1),"ease-out":Ve(0,0,.58,1),"ease-in-out":Ve(.42,0,.58,1),"ease-in-sine":Ve(.47,0,.745,.715),"ease-out-sine":Ve(.39,.575,.565,1),"ease-in-out-sine":Ve(.445,.05,.55,.95),"ease-in-quad":Ve(.55,.085,.68,.53),"ease-out-quad":Ve(.25,.46,.45,.94),"ease-in-out-quad":Ve(.455,.03,.515,.955),"ease-in-cubic":Ve(.55,.055,.675,.19),"ease-out-cubic":Ve(.215,.61,.355,1),"ease-in-out-cubic":Ve(.645,.045,.355,1),"ease-in-quart":Ve(.895,.03,.685,.22),"ease-out-quart":Ve(.165,.84,.44,1),"ease-in-out-quart":Ve(.77,0,.175,1),"ease-in-quint":Ve(.755,.05,.855,.06),"ease-out-quint":Ve(.23,1,.32,1),"ease-in-out-quint":Ve(.86,0,.07,1),"ease-in-expo":Ve(.95,.05,.795,.035),"ease-out-expo":Ve(.19,1,.22,1),"ease-in-out-expo":Ve(1,0,0,1),"ease-in-circ":Ve(.6,.04,.98,.335),"ease-out-circ":Ve(.075,.82,.165,1),"ease-in-out-circ":Ve(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return bi.linear;var a=_b(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":Ve};function wu(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function xu(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function un(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=xu(t,a),s=xu(e,a);if(he(o)&&he(s))return wu(i,o,s,r,n);if(He(o)&&He(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],f=s[u];if(c!=null&&f!=null){var d=wu(i,c,f,r,n);l.push(d)}else l.push(f)}return l}}function Tb(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,l=o.startTime,u=n?t:t.cy(),c=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=bi.linear;else{var f;if(Se(s)){var d=c.parse("transition-timing-function",s);f=d.value}else f=s;var v,h;Se(f)?(v=f,h=[]):(v=f[1],h=f.slice(2).map(function(W){return+W})),h.length>0?(v==="spring"&&h.push(o.duration),o.easingImpl=bi[v].apply(null,h)):o.easingImpl=bi[v]}var p=o.easingImpl,m;if(o.duration===0?m=1:m=(r-l)/o.duration,o.applying&&(m=o.progress),m<0?m=0:m>1&&(m=1),o.delay==null){var g=o.startPosition,b=o.position;if(b&&a&&!t.locked()){var w={};Qn(g.x,b.x)&&(w.x=un(g.x,b.x,m,p)),Qn(g.y,b.y)&&(w.y=un(g.y,b.y,m,p)),t.position(w)}var y=o.startPan,C=o.pan,E=i.pan,x=C!=null&&n;x&&(Qn(y.x,C.x)&&(E.x=un(y.x,C.x,m,p)),Qn(y.y,C.y)&&(E.y=un(y.y,C.y,m,p)),t.emit("pan"));var _=o.startZoom,S=o.zoom,I=S!=null&&n;I&&(Qn(_,S)&&(i.zoom=xa(i.minZoom,un(_,S,m,p),i.maxZoom)),t.emit("zoom")),(x||I)&&t.emit("viewport");var k=o.style;if(k&&k.length>0&&a){for(var T=0;T<k.length;T++){var P=k[T],A=P.name,B=P,L=o.startStyle[A],N=c.properties[L.name],H=un(L,B,m,p,N);c.overrideBypass(t,A,H)}t.emit("style")}}return o.progress=m,m}function Qn(t,e){return t==null||e==null?!1:he(t)&&he(e)?!0:!!(t&&e)}function kb(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Eu(t,e){var r=e._private.aniEles,n=[];function a(c,f){var d=c._private,v=d.animation.current,h=d.animation.queue,p=!1;if(v.length===0){var m=h.shift();m&&v.push(m)}for(var g=function(E){for(var x=E.length-1;x>=0;x--){var _=E[x];_()}E.splice(0,E.length)},b=v.length-1;b>=0;b--){var w=v[b],y=w._private;if(y.stopped){v.splice(b,1),y.hooked=!1,y.playing=!1,y.started=!1,g(y.frames);continue}!y.playing&&!y.applying||(y.playing&&y.applying&&(y.applying=!1),y.started||kb(c,w,t),Tb(c,w,t,f),y.applying&&(y.applying=!1),g(y.frames),y.step!=null&&y.step(t),w.completed()&&(v.splice(b,1),y.hooked=!1,y.playing=!1,y.started=!1,g(y.completes)),p=!0)}return!f&&v.length===0&&h.length===0&&n.push(c),p}for(var i=!1,o=0;o<r.length;o++){var s=r[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var Ib={animate:Re.animate(),animation:Re.animation(),animated:Re.animated(),clearQueue:Re.clearQueue(),delay:Re.delay(),delayAnimation:Re.delayAnimation(),stop:Re.stop(),addToAnimationPool:function(e){var r=this;!r.styleEnabled()||r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){!e._private.animationsRunning||Ii(function(i){Eu(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Eu(o,e)},n.beforeRenderPriorities.animations):r()}},Ab={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&La(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},ii=function(e){return Se(e)?new Ir(e):e},Xf={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new to(Ab,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,ii(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,ii(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,ii(r),n),this},once:function(e,r,n){return this.emitter().one(e,ii(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Re.eventAliasesOn(Xf);var ss={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};ss.jpeg=ss.jpg;var wi={layout:function(e){var r=this;if(e==null){je("Layout options must be specified to make a layout");return}if(e.name==null){je("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){je("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Se(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(_e({},e,{cy:r,eles:i}));return o}};wi.createLayout=wi.makeLayout=wi.layout;var Mb={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(!!n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},Db=ht({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ls={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){je("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Fe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=Db(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};ls.invalidateDimensions=ls.resize;var xi={collection:function(e,r){return Se(e)?this.$(e):Dt(e)?e.collection():He(e)?new ft(this,e,r):new ft(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};xi.elements=xi.filter=xi.$;var yt={},oa="t",Pb="f";yt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};yt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c=t[l]===oa,f=e[l]===oa,d=c!==f,v=u.mappedProperties.length>0;if(d||f&&v){var h=void 0;d&&v||d?h=u.properties:v&&(h=u.mappedProperties);for(var p=0;p<h.length;p++){for(var m=h[p],g=m.name,b=!1,w=l+1;w<r.length;w++){var y=r[w],C=e[w]===oa;if(!!C&&(b=y.properties[m.name]!=null,b))break}!s[g]&&!b&&(s[g]=!0,o.push(g))}}}return n[a]=o,o};yt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=oa:r+=Pb}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};yt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===oa;if(!!s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a};yt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],c=r.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var f=c.mapping,d=f.fnValue=u.value(r);if(d===f.prevFnValue)continue}var v=i[l]={prev:c};n.applyParsedProperty(r,u),v.next=r.pstyle(l),v.next&&v.next.bypass&&(v.next=v.next.bypassed)}}return{diffProps:i}};yt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(J,ie,ve){return r.getPropertiesHash(J,ie,ve)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var c=a[u];e.styleKeys[c]=[gn,ta]}for(var f=function(J,ie){return e.styleKeys[ie][0]=ya(J,e.styleKeys[ie][0])},d=function(J,ie){return e.styleKeys[ie][1]=ba(J,e.styleKeys[ie][1])},v=function(J,ie){f(J,ie),d(J,ie)},h=function(J,ie){for(var ve=0;ve<J.length;ve++){var Ee=J.charCodeAt(ve);f(Ee,ie),d(Ee,ie)}},p=2e9,m=function(J){return-128<J&&J<128&&Math.floor(J)!==J?p-(J*1024|0):J},g=0;g<n.length;g++){var b=n[g],w=l[b];if(w!=null){var y=this.properties[b],C=y.type,E=y.groupKey,x=void 0;y.hashOverride!=null?x=y.hashOverride(t,w):w.pfValue!=null&&(x=w.pfValue);var _=y.enums==null?w.value:null,S=x!=null,I=_!=null,k=S||I,T=w.units;if(C.number&&k&&!C.multiple){var P=S?x:_;v(m(P),E),!S&&T!=null&&h(T,E)}else h(w.strValue,E)}}for(var A=[gn,ta],B=0;B<a.length;B++){var L=a[B],N=e.styleKeys[L];A[0]=ya(N[0],A[0]),A[1]=ba(N[1],A[1])}e.styleKey=Gm(A[0],A[1]);var H=e.styleKeys;e.labelDimsKey=yr(H.labelDimensions);var W=i(t,["label"],H.labelDimensions);if(e.labelKey=yr(W),e.labelStyleKey=yr(Xa(H.commonLabel,W)),!s){var F=i(t,["source-label"],H.labelDimensions);e.sourceLabelKey=yr(F),e.sourceLabelStyleKey=yr(Xa(H.commonLabel,F));var D=i(t,["target-label"],H.labelDimensions);e.targetLabelKey=yr(D),e.targetLabelStyleKey=yr(Xa(H.commonLabel,D))}if(s){var R=e.styleKeys,O=R.nodeBody,$=R.nodeBorder,V=R.backgroundImage,q=R.compound,z=R.pie,K=[O,$,V,q,z].filter(function(te){return te!=null}).reduce(Xa,[gn,ta]);e.nodeKey=yr(K),e.hasPie=z!=null&&z[0]!==gn&&z[1]!==ta}return o!==e.styleKey};yt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};yt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,l=n.bypass,u=a[n.name],c=u&&u.bypass,f=t._private,d="mapping",v=function(O){return O==null?null:O.pfValue!=null?O.pfValue:O.value},h=function(){var O=v(u),$=v(n);r.checkTriggers(t,n.name,O,$)};if(n&&n.name.substr(0,3)==="pie"&&Fe("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,h(),!0):!1:(h(),!0);var p=function(){Fe("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var m=n.field.split("."),g=f.data,b=0;b<m.length&&g;b++){var w=m[b];g=g[w]}if(g==null)return p(),!1;var y;if(he(g)){var C=n.fieldMax-n.fieldMin;C===0?y=0:y=(g-n.fieldMin)/C}else return Fe("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+g+"` for `"+t.id()+"` is non-numeric)"),!1;if(y<0?y=0:y>1&&(y=1),s.color){var E=n.valueMin[0],x=n.valueMax[0],_=n.valueMin[1],S=n.valueMax[1],I=n.valueMin[2],k=n.valueMax[2],T=n.valueMin[3]==null?1:n.valueMin[3],P=n.valueMax[3]==null?1:n.valueMax[3],A=[Math.round(E+(x-E)*y),Math.round(_+(S-_)*y),Math.round(I+(k-I)*y),Math.round(T+(P-T)*y)];i={bypass:n.bypass,name:n.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else if(s.number){var B=n.valueMin+(n.valueMax-n.valueMin)*y;i=this.parse(n.name,B,n.bypass,d)}else return!1;if(!i)return p(),!1;i.mapping=n,n=i;break}case o.data:{for(var L=n.field.split("."),N=f.data,H=0;H<L.length&&N;H++){var W=L[H];N=N[W]}if(N!=null&&(i=this.parse(n.name,N,n.bypass,d)),!i)return p(),!1;i.mapping=n,n=i;break}case o.fn:{var F=n.value,D=n.fnValue!=null?n.fnValue:F(t);if(n.prevFnValue=D,D==null)return Fe("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,D,n.bypass,d),!i)return Fe("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Jt(n),n=i;break}case void 0:break;default:return!1}return l?(c?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):c?u.bypassed=n:a[n.name]=n,h(),!0};yt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};yt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};yt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var c=a[u],f=t.pstyle(c),d=e[c];if(!!d){var v=d.prev,h=v,p=d.next!=null?d.next:f,m=!1,g=void 0,b=1e-6;!h||(he(h.pfValue)&&he(p.pfValue)?(m=p.pfValue-h.pfValue,g=h.pfValue+b*m):he(h.value)&&he(p.value)?(m=p.value-h.value,g=h.value+b*m):He(h.value)&&He(p.value)&&(m=h.value[0]!==p.value[0]||h.value[1]!==p.value[1]||h.value[2]!==p.value[2],g=h.strValue),m&&(s[c]=p.strValue,this.applyBypass(t,c,g),l=!0))}}if(!l)return;n.transitioning=!0,new $n(function(w){o>0?t.delayAnimation(o).play().promise().then(w):w()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};yt.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(r,n)&&i(o)};yt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};yt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),e==="curve-style"&&(r==="bezier"||n==="bezier")&&a.triggersBoundsOfParallelBeziers&&t.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})};yt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var Na={};Na.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,c=this.parse(u,r,!0);c&&i.push(c)}}else if(Se(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(Oe(e)){var d=e;n=r;for(var v=Object.keys(d),h=0;h<v.length;h++){var p=v[h],m=d[p];if(m===void 0&&(m=d[Xi(p)]),m!==void 0){var g=this.parse(p,m,!0);g&&i.push(g)}}}else return!1;if(i.length===0)return!1;for(var b=!1,w=0;w<t.length;w++){for(var y=t[w],C={},E=void 0,x=0;x<i.length;x++){var _=i[x];if(n){var S=y.pstyle(_.name);E=C[_.name]={prev:S}}b=this.applyParsedProperty(y,Jt(_))||b,n&&(E.next=y.pstyle(_.name))}b&&this.updateStyleHints(y),n&&this.updateTransitions(y,C,o)}return b};Na.overrideBypass=function(t,e,r){e=$s(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":l?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};Na.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Na.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],c=i.pstyle(u.name);if(!(!c||!c.bypass)){var f="",d=this.parse(l,f,!0),v=o[u.name]={prev:c};this.applyParsedProperty(i,d),v.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var Zs={};Zs.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Zs.containerCss=function(t){var e=this._private.cy,r=e.container();if(Ke&&r&&Ke.getComputedStyle)return Ke.getComputedStyle(r).getPropertyValue(t)};var rr={};rr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};rr.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[Xi(i.name)]=o)}return n}};rr.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a!=null?a:t.cy().style().getDefaultProperty(e)[r][0]};rr.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(r&&i.number&&s!=null&&he(s)){var c=t.cy().zoom(),f=function(m){return m*c},d=function(m,g){return f(m)+g},v=He(s),h=v?l.every(function(p){return p!=null}):l!=null;return h?v?s.map(function(p,m){return d(p,l[m])}).join(" "):d(s,l):v?s.map(function(p){return Se(p)?p:""+f(p)}).join(" "):""+f(s)}else if(u!=null)return u}return null}};rr.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(Oe(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};rr.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[$s(s)],c=this.parse(u.name,l);c&&r.push(c)}return r};rr.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=ya(s,n[0]),n[1]=ba(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=ya(s,n[0]),n[1]=ba(s,n[1]);return n};rr.getPropertiesHash=rr.getNonDefaultPropertiesHash;var ao={};ao.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e};ao.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};ao.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var Qs={};Qs.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Fe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new Ir(f);if(d.invalid){Fe("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var v=c[2],h=!1;i=v;for(var p=[];;){var m=i.match(/^\s*$/);if(m)break;var g=i.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){Fe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),h=!0;break}o=g[0];var b=g[1],w=g[2],y=e.properties[b];if(!y){Fe("Skipping property: Invalid property name in: "+o),l();continue}var C=r.parse(b,w);if(!C){Fe("Skipping property: Invalid property definition in: "+o),l();continue}p.push({name:b,val:w}),l()}if(h){s();break}r.selector(f);for(var E=0;E<p.length;E++){var x=p[E];r.css(x.name,x.val)}s()}return r};Qs.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var lt={};(function(){var t=rt,e=Om,r=Bm,n=Rm,a=Nm,i=function(K){return"^"+K+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(K){var te=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+K+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+te+")\\s*\\,\\s*("+te+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];lt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(K,te){switch(K.length){case 2:return te[0]!=="deg"&&te[0]!=="rad"&&te[1]!=="deg"&&te[1]!=="rad";case 1:return Se(K[0])||te[0]==="deg"||te[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(K){var te=K.length;return te===1||te===2||te===4}}};var l={zeroNonZero:function(K,te){return(K==null||te==null)&&K!==te||K==0&&te!=0?!0:K!=0&&te==0},any:function(K,te){return K!=te},emptyNonEmpty:function(K,te){var J=Tr(K),ie=Tr(te);return J&&!ie||!J&&ie}},u=lt.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],v=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],p=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],m=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],g=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any}],b=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any}],w=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],y=function(K,te){return te.value==="label"?-K.poolIndex():te.pfValue},C=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:y},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:y},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],E=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],x=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],_=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],S=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],I=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],k=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],T=[];lt.pieBackgroundN=16,T.push({name:"pie-size",type:u.sizeMaybePercent});for(var P=1;P<=lt.pieBackgroundN;P++)T.push({name:"pie-"+P+"-background-color",type:u.color}),T.push({name:"pie-"+P+"-background-size",type:u.percent}),T.push({name:"pie-"+P+"-background-opacity",type:u.zeroOneNumber});var A=[],B=lt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach(function(z){B.forEach(function(K){var te=K+"-"+z.name,J=z.type,ie=z.triggersBounds;A.push({name:te,type:J,triggersBounds:ie})})},{});var L=lt.properties=[].concat(p,w,m,g,b,I,h,v,c,f,d,C,E,x,T,_,S,A,k),N=lt.propertyGroups={behavior:p,transition:w,visibility:m,overlay:g,underlay:b,ghost:I,commonLabel:h,labelDimensions:v,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:C,nodeBorder:E,backgroundImage:x,pie:T,compound:_,edgeLine:S,edgeArrow:A,core:k},H=lt.propertyGroupNames={},W=lt.propertyGroupKeys=Object.keys(N);W.forEach(function(z){H[z]=N[z].map(function(K){return K.name}),N[z].forEach(function(K){return K.groupKey=z})});var F=lt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];lt.propertyNames=L.map(function(z){return z.name});for(var D=0;D<L.length;D++){var R=L[D];L[R.name]=R}for(var O=0;O<F.length;O++){var $=F[O],V=L[$.pointsTo],q={name:$.name,alias:!0,pointsTo:V};L.push(q),L[$.name]=q}})();lt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};lt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=_e({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=lt.pieBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(l,u){return lt.arrowPrefixes.forEach(function(c){var f=c+"-"+u.name,d=u.value;l[f]=d}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};lt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var io={};io.parse=function(t,e,r,n){var a=this;if(Ye(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,l=ff(t,s,o,i),u=a.propCache=a.propCache||[],c;return(c=u[l])||(c=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Jt(c),c&&(c.value=Jt(c.value))),c};io.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Fe("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Fe("The style value of `label` is deprecated for `"+a.name+"`"),a};io.parseImpl=function(t,e,r,n){var a=this;t=$s(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var l=Se(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Ye(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,f;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var d=s.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(r||u.multiple)return!1;var v=s.mapData;if(!(u.color||u.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var p=this.parse(t,f[5]);if(!p||p.mapped)return!1;if(h.pfValue===p.pfValue||h.strValue===p.strValue)return Fe("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(u.color){var m=h.value,g=p.value,b=m[0]===g[0]&&m[1]===g[1]&&m[2]===g[2]&&(m[3]===g[3]||(m[3]==null||m[3]===1)&&(g[3]==null||g[3]===1));if(b)return!1}return{name:t,value:f,strValue:""+e,mapped:v,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:p.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var w;if(l?w=e.split(/\s+/):He(e)?w=e:w=[e],u.evenMultiple&&w.length%2!==0)return null;for(var y=[],C=[],E=[],x="",_=!1,S=0;S<w.length;S++){var I=a.parse(t,w[S],r,"multiple");_=_||Se(I.value),y.push(I.value),E.push(I.pfValue!=null?I.pfValue:I.value),C.push(I.units),x+=(S>0?" ":"")+I.strValue}return u.validate&&!u.validate(y,C)?null:u.singleEnum&&_?y.length===1&&Se(y[0])?{name:t,value:y[0],strValue:y[0],bypass:r}:null:{name:t,value:y,pfValue:E,strValue:x,bypass:r,units:C}}var k=function(){for(var te=0;te<u.enums.length;te++){var J=u.enums[te];if(J===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var T,P="px";if(u.units&&(T=u.units),u.implicitUnits&&(P=u.implicitUnits),!u.unitless)if(l){var A="px|em"+(u.allowPercent?"|\\%":"");T&&(A=T);var B=e.match("^("+rt+")("+A+")?$");B&&(e=B[1],T=B[2]||P)}else(!T||u.implicitUnits)&&(T=P);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,k();if(u.integer&&!Tm(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var L={name:t,value:e,strValue:""+e+(T||""),units:T,bypass:r};return u.unitless||T!=="px"&&T!=="em"?L.pfValue=e:L.pfValue=T==="px"||!T?e:this.getEmSizeInPixels()*e,(T==="ms"||T==="s")&&(L.pfValue=T==="ms"?e:1e3*e),(T==="deg"||T==="rad")&&(L.pfValue=T==="rad"?e:xy(e)),T==="%"&&(L.pfValue=e/100),L}else if(u.propList){var N=[],H=""+e;if(H!=="none"){for(var W=H.split(/\s*,\s*|\s+/),F=0;F<W.length;F++){var D=W[F].trim();a.properties[D]?N.push(D):Fe("`"+D+"` is not a valid property name")}if(N.length===0)return null}return{name:t,value:N,strValue:N.length===0?"none":N.join(" "),bypass:r}}else if(u.color){var R=qm(e);return R?{name:t,value:R,pfValue:R,strValue:"rgb("+R[0]+","+R[1]+","+R[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var O=k();if(O)return O}for(var $=u.regexes?u.regexes:[u.regex],V=0;V<$.length;V++){var q=new RegExp($[V]),z=q.exec(e);if(z)return{name:t,value:u.singleRegexMatchValue?z[1]:z,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?k():null};var pt=function t(e){if(!(this instanceof t))return new t(e);if(!Fs(e)){je("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},mt=pt.prototype;mt.instanceString=function(){return"style"};mt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};mt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};mt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};mt.selector=function(t){var e=t==="core"?null:new Ir(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};mt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Xi(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};mt.style=mt.css;mt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};mt.append=function(t){return rf(t)?t.appendToStyle(this):He(t)?this.appendFromJson(t):Se(t)&&this.appendFromString(t),this};pt.fromJson=function(t,e){var r=new pt(t);return r.fromJson(e),r};pt.fromString=function(t,e){return new pt(t).fromString(e)};[yt,Na,Zs,rr,ao,Qs,lt,io].forEach(function(t){_e(mt,t)});pt.types=mt.types;pt.properties=mt.properties;pt.propertyGroups=mt.propertyGroups;pt.propertyGroupNames=mt.propertyGroupNames;pt.propertyGroupKeys=mt.propertyGroupKeys;var Ob={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return rf(e)?r.style=e.generateStyle(this):He(e)?r.style=pt.fromJson(this,e):Se(e)?r.style=pt.fromString(this,e):r.style=pt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Lb="single",Zr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=Lb),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(Se(e[0]))return n=e[0],r[n];if(Oe(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,he(o)&&(r.x=o),he(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&he(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Oe(e)&&(s=n[0],l=s.x,u=s.y,he(l)&&(a.x+=l),he(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&he(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(he(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Se(e)){var a=e;e=this.$(a)}else if(Am(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Dt(e)||(e=this.mutableElements());if(!(Dt(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(r=he(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*r)/n.w,(s-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return he(e)&&he(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):he(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:he(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),he(e)?o=e:Oe(e)&&(o=e.level,e.position!=null?i=Qi(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!he(o)||o===a||i!=null&&(!he(i.x)||!he(i.y)))return null;if(i!=null){var l=n,u=a,c=o,f={x:-c/u*(i.x-l.x)+i.x,y:-c/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(he(e.zoom)||(n=!1),Oe(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;he(u.x)&&(r.pan.x=u.x,s=!1),he(u.y)&&(r.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(!!this._private.panningEnabled){if(Se(e)){var n=e;e=this.mutableElements().filter(n)}else Dt(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container;return e.sizeCache=e.sizeCache||(r?function(){var n=Ke.getComputedStyle(r),a=function(o){return parseFloat(n.getPropertyValue(o))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Zr.centre=Zr.center;Zr.autolockNodes=Zr.autolock;Zr.autoungrabifyNodes=Zr.autoungrabify;var _a={data:Re.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Re.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Re.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Re.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};_a.attr=_a.data;_a.removeAttr=_a.removeData;var Ta=function(e){var r=this;e=_e({},e);var n=e.container;n&&!ki(n)&&ki(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=Ke!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=_e({name:o?"grid":"null"},s.layout),s.renderer=_e({name:o?"canvas":"null"},s.renderer);var l=function(h,p,m){return p!==void 0?p:m!==void 0?m:h},u=this._private={container:n,ready:!1,options:s,elements:new ft(this),listeners:[],aniEles:new ft(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:he(s.zoom)?s.zoom:1,pan:{x:Oe(s.pan)&&he(s.pan.x)?s.pan.x:0,y:Oe(s.pan)&&he(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(h,p){var m=h.some(Mm);if(m)return $n.all(h).then(p);p(h)};u.styleEnabled&&r.setStyle([]);var f=_e({},s,s.renderer);r.initRenderer(f);var d=function(h,p,m){r.notifications(!1);var g=r.mutableElements();g.length>0&&g.remove(),h!=null&&(Oe(h)||He(h))&&r.add(h),r.one("layoutready",function(w){r.notifications(!0),r.emit(w),r.one("load",p),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var b=_e({},r._private.options.layout);b.eles=r.elements(),r.layout(b).run()};c([s.style,s.elements],function(v){var h=v[0],p=v[1];u.styleEnabled&&r.style().append(h),d(p,function(){r.startAnimationLoop(),u.ready=!0,Ye(s.ready)&&r.on("ready",s.ready);for(var m=0;m<i.length;m++){var g=i[m];r.on("ready",g)}a&&(a.readies=[]),r.emit("ready")},s.done)})},Pi=Ta.prototype;_e(Pi,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!ki(e)&&ki(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(_e({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Jt(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(y){return r.getElementById(y.id())};if(Oe(e)){if(r.startBatch(),e.elements){var o={},s=function(y,C){for(var E=[],x=[],_=0;_<y.length;_++){var S=y[_];if(!S.data.id){Fe("cy.json() cannot handle elements without an ID attribute");continue}var I=""+S.data.id,k=r.getElementById(I);o[I]=!0,k.length!==0?x.push({ele:k,json:S}):(C&&(S.group=C),E.push(S))}r.add(E);for(var T=0;T<x.length;T++){var P=x[T],A=P.ele,B=P.json;A.json(B)}};if(He(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],f=e.elements[c];He(f)&&s(f,c)}var d=r.collection();a.filter(function(w){return!o[w.id()]}).forEach(function(w){w.isParent()?d.merge(w):w.remove()}),d.forEach(function(w){return w.children().move({parent:null})}),d.forEach(function(w){return i(w).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<v.length;h++){var p=v[h];e[p]!=null&&r[p](e[p])}return r.endBatch(),this}else{var m=!!e,g={};m?g.elements=this.elements().map(function(w){return w.json()}):(g.elements={},a.forEach(function(w){var y=w.group();g.elements[y]||(g.elements[y]=[]),g.elements[y].push(w.json())})),this._private.styleEnabled&&(g.style=r.style().json()),g.data=Jt(r.data());var b=n.options;return g.zoomingEnabled=n.zoomingEnabled,g.userZoomingEnabled=n.userZoomingEnabled,g.zoom=n.zoom,g.minZoom=n.minZoom,g.maxZoom=n.maxZoom,g.panningEnabled=n.panningEnabled,g.userPanningEnabled=n.userPanningEnabled,g.pan=Jt(n.pan),g.boxSelectionEnabled=n.boxSelectionEnabled,g.renderer=Jt(b.renderer),g.hideEdgesOnViewport=b.hideEdgesOnViewport,g.textureOnViewport=b.textureOnViewport,g.wheelSensitivity=b.wheelSensitivity,g.motionBlur=b.motionBlur,g.multiClickDebounceTime=b.multiClickDebounceTime,g}}});Pi.$id=Pi.getElementById;[Cb,Ib,Xf,ss,wi,Mb,ls,xi,Ob,Zr,_a].forEach(function(t){_e(Pi,t)});var Bb={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},cn=function(e){return e.scratch("breadthfirst")},Cu=function(e,r){return e.scratch("breadthfirst",r)};function Zf(t){this.options=_e({},Bb,t)}Zf.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(le){return!le.isParent()}),i=n,o=e.directed,s=e.maximal||e.maximalAdjustments>0,l=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u;if(Dt(e.roots))u=e.roots;else if(He(e.roots)){for(var c=[],f=0;f<e.roots.length;f++){var d=e.roots[f],v=r.getElementById(d);c.push(v)}u=r.collection(c)}else if(Se(e.roots))u=r.$(e.roots);else if(o)u=a.roots();else{var h=n.components();u=r.collection();for(var p=function(re){var ne=h[re],Z=ne.maxDegree(!1),X=ne.filter(function(ue){return ue.degree(!1)===Z});u=u.add(X)},m=0;m<h.length;m++)p(m)}var g=[],b={},w=function(re,ne){g[ne]==null&&(g[ne]=[]);var Z=g[ne].length;g[ne].push(re),Cu(re,{index:Z,depth:ne})},y=function(re,ne){var Z=cn(re),X=Z.depth,ue=Z.index;g[X][ue]=null,w(re,ne)};i.bfs({roots:u,directed:e.directed,visit:function(re,ne,Z,X,ue){var de=re[0],we=de.id();w(de,ue),b[we]=!0}});for(var C=[],E=0;E<a.length;E++){var x=a[E];b[x.id()]||C.push(x)}var _=function(re){for(var ne=g[re],Z=0;Z<ne.length;Z++){var X=ne[Z];if(X==null){ne.splice(Z,1),Z--;continue}Cu(X,{depth:re,index:Z})}},S=function(){for(var re=0;re<g.length;re++)_(re)},I=function(re,ne){for(var Z=cn(re),X=re.incomers().filter(function(M){return M.isNode()&&n.has(M)}),ue=-1,de=re.id(),we=0;we<X.length;we++){var ye=X[we],Y=cn(ye);ue=Math.max(ue,Y.depth)}return Z.depth<=ue?ne[de]?null:(y(re,ue+1),ne[de]=!0,!0):!1};if(o&&s){var k=[],T={},P=function(re){return k.push(re)},A=function(){return k.shift()};for(a.forEach(function(le){return k.push(le)});k.length>0;){var B=A(),L=I(B,T);if(L)B.outgoers().filter(function(le){return le.isNode()&&n.has(le)}).forEach(P);else if(L===null){Fe("Detected double maximal shift for node `"+B.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}S();var N=0;if(e.avoidOverlap)for(var H=0;H<a.length;H++){var W=a[H],F=W.layoutDimensions(e),D=F.w,R=F.h;N=Math.max(N,D,R)}var O={},$=function(re){if(O[re.id()])return O[re.id()];for(var ne=cn(re).depth,Z=re.neighborhood(),X=0,ue=0,de=0;de<Z.length;de++){var we=Z[de];if(!(we.isEdge()||we.isParent()||!a.has(we))){var ye=cn(we);if(ye!=null){var Y=ye.index,M=ye.depth;if(!(Y==null||M==null)){var U=g[M].length;M<ne&&(X+=Y/U,ue++)}}}}return ue=Math.max(1,ue),X=X/ue,ue===0&&(X=0),O[re.id()]=X,X},V=function(re,ne){var Z=$(re),X=$(ne),ue=Z-X;return ue===0?af(re.id(),ne.id()):ue};e.depthSort!==void 0&&(V=e.depthSort);for(var q=0;q<g.length;q++)g[q].sort(V),_(q);for(var z=[],K=0;K<C.length;K++)z.push(C[K]);g.unshift(z),S();for(var te=0,J=0;J<g.length;J++)te=Math.max(g[J].length,te);var ie={x:l.x1+l.w/2,y:l.x1+l.h/2},ve=g.reduce(function(le,re){return Math.max(le,re.length)},0),Ee=function(re){var ne=cn(re),Z=ne.depth,X=ne.index,ue=g[Z].length,de=Math.max(l.w/((e.grid?ve:ue)+1),N),we=Math.max(l.h/(g.length+1),N),ye=Math.min(l.w/2/g.length,l.h/2/g.length);if(ye=Math.max(ye,N),e.circle){var M=ye*Z+ye-(g.length>0&&g[0].length<=3?ye/2:0),U=2*Math.PI/g[Z].length*X;return Z===0&&g[0].length===1&&(M=1),{x:ie.x+M*Math.cos(U),y:ie.y+M*Math.sin(U)}}else{var Y={x:ie.x+(X+1-(ue+1)/2)*de,y:(Z+1)*we};return Y}};return n.nodes().layoutPositions(this,e,Ee),this};var Rb={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Qf(t){this.options=_e({},Rb,t)}Qf.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var v=i[d],h=v.layoutDimensions(e),p=h.w,m=h.h;f=Math.max(f,p,m)}if(he(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var g=Math.cos(u)-Math.cos(0),b=Math.sin(u)-Math.sin(0),w=Math.sqrt(f*f/(g*g+b*b));c=Math.max(w,c)}var y=function(E,x){var _=e.startAngle+x*u*(a?1:-1),S=c*Math.cos(_),I=c*Math.sin(_),k={x:s.x+S,y:s.y+I};return k};return n.nodes().layoutPositions(this,e,y),this};var Nb={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Jf(t){this.options=_e({},Nb,t)}Jf.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var v=0;v<i.length;v++){var h=i[v],p=h.layoutDimensions(e);u=Math.max(u,p.w,p.h)}l.sort(function(le,re){return re.value-le.value});for(var m=e.levelWidth(i),g=[[]],b=g[0],w=0;w<l.length;w++){var y=l[w];if(b.length>0){var C=Math.abs(b[0].value-y.value);C>=m&&(b=[],g.push(b))}b.push(y)}var E=u+e.minNodeSpacing;if(!e.avoidOverlap){var x=g.length>0&&g[0].length>1,_=Math.min(o.w,o.h)/2-E,S=_/(g.length+x?1:0);E=Math.min(E,S)}for(var I=0,k=0;k<g.length;k++){var T=g[k],P=e.sweep===void 0?2*Math.PI-2*Math.PI/T.length:e.sweep,A=T.dTheta=P/Math.max(1,T.length-1);if(T.length>1&&e.avoidOverlap){var B=Math.cos(A)-Math.cos(0),L=Math.sin(A)-Math.sin(0),N=Math.sqrt(E*E/(B*B+L*L));I=Math.max(N,I)}T.r=I,I+=E}if(e.equidistant){for(var H=0,W=0,F=0;F<g.length;F++){var D=g[F],R=D.r-W;H=Math.max(H,R)}W=0;for(var O=0;O<g.length;O++){var $=g[O];O===0&&(W=$.r),$.r=W,W+=H}}for(var V={},q=0;q<g.length;q++)for(var z=g[q],K=z.dTheta,te=z.r,J=0;J<z.length;J++){var ie=z[J],ve=e.startAngle+(r?1:-1)*K*J,Ee={x:s.x+te*Math.cos(ve),y:s.y+te*Math.sin(ve)};V[ie.node.id()]=Ee}return a.nodes().layoutPositions(this,e,function(le){var re=le.id();return V[re]}),this};var Lo,zb={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function oo(t){this.options=_e({},zb,t),this.options.layout=this}oo.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Lo=!0:Lo=!1;var n=Fb(e,r,t);Lo&&Vb(n),t.randomize&&qb(n);var a=ur(),i=function(){Wb(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(d){return!(r.stopped||d>=t.numIter||(Ub(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var d=t.eles.nodes(),v=eh(n,t,d);d.layoutPositions(r,t,v)}},l=0,u=!0;if(t.animate===!0){var c=function f(){for(var d=0;u&&d<t.refresh;)u=o(l),l++,d++;if(!u)_u(n,t),s();else{var v=ur();v-a>=t.animationThreshold&&i(),Ii(f)}};c()}else{for(;u;)u=o(l),l++;_u(n,t),s()}return this};oo.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};oo.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Fb=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:It(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],f=0;f<c.length;f++){var d=c[f];l[d.id()]=u}for(var u=0;u<o.nodeSize;u++){var v=i[u],h=v.layoutDimensions(n),p={};p.isLocked=v.locked(),p.id=v.data("id"),p.parentId=v.data("parent"),p.cmptId=l[v.id()],p.children=[],p.positionX=v.position("x"),p.positionY=v.position("y"),p.offsetX=0,p.offsetY=0,p.height=h.w,p.width=h.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(v.style("padding")),p.padRight=parseFloat(v.style("padding")),p.padTop=parseFloat(v.style("padding")),p.padBottom=parseFloat(v.style("padding")),p.nodeRepulsion=Ye(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(p),o.idToIndex[p.id]=u}for(var m=[],g=0,b=-1,w=[],u=0;u<o.nodeSize;u++){var v=o.layoutNodes[u],y=v.parentId;y!=null?o.layoutNodes[o.idToIndex[y]].children.push(v.id):(m[++b]=v.id,w.push(v.id))}for(o.graphSet.push(w);g<=b;){var C=m[g++],E=o.idToIndex[C],d=o.layoutNodes[E],x=d.children;if(x.length>0){o.graphSet.push(x);for(var u=0;u<x.length;u++)m[++b]=x[u]}}for(var u=0;u<o.graphSet.length;u++)for(var _=o.graphSet[u],f=0;f<_.length;f++){var S=o.idToIndex[_[f]];o.indexToGraph[S]=u}for(var u=0;u<o.edgeSize;u++){var I=a[u],k={};k.id=I.data("id"),k.sourceId=I.data("source"),k.targetId=I.data("target");var T=Ye(n.idealEdgeLength)?n.idealEdgeLength(I):n.idealEdgeLength,P=Ye(n.edgeElasticity)?n.edgeElasticity(I):n.edgeElasticity,A=o.idToIndex[k.sourceId],B=o.idToIndex[k.targetId],L=o.indexToGraph[A],N=o.indexToGraph[B];if(L!=N){for(var H=$b(k.sourceId,k.targetId,o),W=o.graphSet[H],F=0,p=o.layoutNodes[A];W.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],F++;for(p=o.layoutNodes[B];W.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],F++;T*=F*n.nestingFactor}k.idealLength=T,k.elasticity=P,o.layoutEdges.push(k)}return o},$b=function(e,r,n){var a=Hb(e,r,0,n);return 2>a.count?0:a.graph},Hb=function t(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],c=a.layoutNodes[u].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=t(e,r,f,a);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},Vb,qb=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},eh=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var u=(l.positionX-i.x1)/i.w,c=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+c*a.h}}else return{x:l.positionX,y:l.positionY}}},Wb=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=eh(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},Ub=function(e,r,n){Gb(e,r),jb(e),Xb(e,r),Zb(e),Qb(e)},Gb=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];Kb(s,u,e,r)}},Su=function(e){return-e+2*e*Math.random()},Kb=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;s===0&&l===0&&(s=Su(u),l=Su(u));var c=Yb(e,r,s,l);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(s*s+l*l),v=f*s/d,h=f*l/d;else var p=Oi(e,s,l),m=Oi(r,-1*s,-1*l),g=m.x-p.x,b=m.y-p.y,w=g*g+b*b,d=Math.sqrt(w),f=(e.nodeRepulsion+r.nodeRepulsion)/w,v=f*g/d,h=f*b/d;e.isLocked||(e.offsetX-=v,e.offsetY-=h),r.isLocked||(r.offsetX+=v,r.offsetY+=h)}},Yb=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},Oi=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/r,u=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*u<=l&&l<=u?(c.x=a+s/2,c.y=i+s*n/2/r,c):0>r&&-1*u<=l&&l<=u?(c.x=a-s/2,c.y=i-s*n/2/r,c):0<n&&(l<=-1*u||l>=u)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(l<=-1*u||l>=u)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},jb=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(!(u===0&&c===0)){var f=Oi(o,u,c),d=Oi(l,-1*u,-1*c),v=d.x-f.x,h=d.y-f.y,p=Math.sqrt(v*v+h*h),m=Math.pow(a.idealLength-p,2)/a.elasticity;if(p!==0)var g=m*v/p,b=m*h/p;else var g=0,b=0;o.isLocked||(o.offsetX+=g,o.offsetY+=b),l.isLocked||(l.offsetX-=g,l.offsetY-=b)}}},Xb=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;for(var f=0;f<o;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var v=s-d.positionX,h=l-d.positionY,p=Math.sqrt(v*v+h*h);if(p>n){var m=r.gravity*v/p,g=r.gravity*h/p;d.offsetX+=m,d.offsetY+=g}}}}},Zb=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,f=l.offsetY,d=0;d<u.length;d++){var v=e.layoutNodes[e.idToIndex[u[d]]];v.offsetX+=c,v.offsetY+=f,n[++i]=u[d]}l.offsetX=0,l.offsetY=0}}},Qb=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=Jb(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,ew(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Jb=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},ew=function t(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return t(a,r)}},_u=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var c=a[i];if(!!c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}a.sort(function(b,w){return w.w*w.h-b.w*b.h});for(var v=0,h=0,p=0,m=0,g=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(!!c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=v-c.x1,d.positionY+=h-c.y1)}v+=c.w+r.componentSpacing,p+=c.w+r.componentSpacing,m=Math.max(m,c.h),p>g&&(h+=m+r.componentSpacing,v=0,p=0,m=0)}}},tw={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function th(t){this.options=_e({},tw,t)}th.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(O){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),c=function($){if($==null)return Math.min(l,u);var V=Math.min(l,u);V==l?l=$:u=$},f=function($){if($==null)return Math.max(l,u);var V=Math.max(l,u);V==l?l=$:u=$},d=e.rows,v=e.cols!=null?e.cols:e.columns;if(d!=null&&v!=null)l=d,u=v;else if(d!=null&&v==null)l=d,u=Math.ceil(o/l);else if(d==null&&v!=null)u=v,l=Math.ceil(o/u);else if(u*l>o){var h=c(),p=f();(h-1)*p>=o?c(h-1):(p-1)*h>=o&&f(p-1)}else for(;u*l<o;){var m=c(),g=f();(g+1)*m>=o?f(g+1):c(m+1)}var b=i.w/u,w=i.h/l;if(e.condense&&(b=0,w=0),e.avoidOverlap)for(var y=0;y<a.length;y++){var C=a[y],E=C._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var x=C.layoutDimensions(e),_=e.avoidOverlapPadding,S=x.w+_,I=x.h+_;b=Math.max(b,S),w=Math.max(w,I)}for(var k={},T=function($,V){return!!k["c-"+$+"-"+V]},P=function($,V){k["c-"+$+"-"+V]=!0},A=0,B=0,L=function(){B++,B>=u&&(B=0,A++)},N={},H=0;H<a.length;H++){var W=a[H],F=e.position(W);if(F&&(F.row!==void 0||F.col!==void 0)){var D={row:F.row,col:F.col};if(D.col===void 0)for(D.col=0;T(D.row,D.col);)D.col++;else if(D.row===void 0)for(D.row=0;T(D.row,D.col);)D.row++;N[W.id()]=D,P(D.row,D.col)}}var R=function($,V){var q,z;if($.locked()||$.isParent())return!1;var K=N[$.id()];if(K)q=K.col*b+b/2+i.x1,z=K.row*w+w/2+i.y1;else{for(;T(A,B);)L();q=B*b+b/2+i.x1,z=A*w+w/2+i.y1,P(A,B),L()}return{x:q,y:z}};a.layoutPositions(this,e,R)}return this};var rw={ready:function(){},stop:function(){}};function Js(t){this.options=_e({},rw,t)}Js.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};Js.prototype.stop=function(){return this};var nw={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function rh(t){this.options=_e({},nw,t)}rh.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=Ye(t.positions);function a(i){if(t.positions==null)return gy(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o==null?null:o}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var aw={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function nh(t){this.options=_e({},aw,t)}nh.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=It(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var iw=[{name:"breadthfirst",impl:Zf},{name:"circle",impl:Qf},{name:"concentric",impl:Jf},{name:"cose",impl:oo},{name:"grid",impl:th},{name:"null",impl:Js},{name:"preset",impl:rh},{name:"random",impl:nh}];function ah(t){this.options=t,this.notifications=0}var Tu=function(){},ku=function(){throw new Error("A headless instance can not render images")};ah.prototype={recalculateRenderedStyle:Tu,notify:function(){this.notifications++},init:Tu,isHeadless:function(){return!0},png:ku,jpg:ku};var el={};el.arrowShapeWidth=.3;el.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,c,f,d,v,h,p){var m=v.x-f/2-p,g=v.x+f/2+p,b=v.y-f/2-p,w=v.y+f/2+p,y=m<=u&&u<=g&&b<=c&&c<=w;return y},n=function(u,c,f,d,v){var h=u*Math.cos(d)-c*Math.sin(d),p=u*Math.sin(d)+c*Math.cos(d),m=h*f,g=p*f,b=m+v.x,w=g+v.y;return{x:b,y:w}},a=function(u,c,f,d){for(var v=[],h=0;h<u.length;h+=2){var p=u[h],m=u[h+1];v.push(n(p,m,c,f,d))}return v},i=function(u){for(var c=[],f=0;f<u.length;f++){var d=u[f];c.push(d.x,d.y)}return c},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,c){Se(c)&&(c=t[c]),t[u]=_e({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,v,h,p,m,g){var b=i(a(this.points,h+2*g,p,m)),w=_t(d,v,b);return w},roughCollide:r,draw:function(d,v,h,p){var m=a(this.points,v,h,p);e.arrowShapeImpl("polygon")(d,m)},spacing:function(d){return 0},gap:o},c)};s("none",{collide:Ai,roughCollide:Ai,draw:Vs,spacing:Vl,gap:Vl}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,c,f,d,v){var h=a(this.points,c,f,d),p=this.controlPoint,m=n(p[0],p[1],c,f,d);e.arrowShapeImpl(this.name)(u,h,m)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,f,d,v,h,p){var m=i(a(this.points,f+2*p,d,v)),g=i(a(this.pointsTee,f+2*p,d,v)),b=_t(u,c,m)||_t(u,c,g);return b},draw:function(u,c,f,d,v){var h=a(this.points,c,f,d),p=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(u,h,p)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,f,d,v,h,p){var m=v,g=Math.pow(m.x-u,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2),b=i(a(this.points,f+2*p,d,v));return _t(u,c,b)||g},draw:function(u,c,f,d,v){var h=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(u,h,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var f=this.baseCrossLinePts.slice(),d=c/u,v=3,h=5;return f[v]=f[v]-d,f[h]=f[h]-d,f},collide:function(u,c,f,d,v,h,p){var m=i(a(this.points,f+2*p,d,v)),g=i(a(this.crossLinePts(f,h),f+2*p,d,v)),b=_t(u,c,m)||_t(u,c,g);return b},draw:function(u,c,f,d,v){var h=a(this.points,c,f,d),p=a(this.crossLinePts(c,v),c,f,d);e.arrowShapeImpl(this.name)(u,h,p)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,c,f,d,v,h,p){var m=v,g=Math.pow(m.x-u,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return g},draw:function(u,c,f,d,v){e.arrowShapeImpl(this.name)(u,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var an={};an.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),l=r.zoom(),u=((t-a)/o-s.x)/l,c=((e-i)/o-s.y)/l;return[u,c]};an.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=Ke.getComputedStyle(t),n=function(g){return parseFloat(r.getPropertyValue(g))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,c=i.left+i.right,f=e.width/(o+c),d=o-l,v=s-u,h=e.left+a.left+i.left,p=e.top+a.top+i.top;return this.containerBB=[h,p,d,v,f]};an.invalidateContainerClientCoordsCache=function(){this.containerBB=null};an.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};an.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),c=(n?24:8)/l,f=(n?8:2)/l,d=(n?8:2)/l,v=1/0,h,p;r&&(o=o.interactive);function m(x,_){if(x.isNode()){if(p)return;p=x,s.push(x)}if(x.isEdge()&&(_==null||_<v))if(h){if(h.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var S=0;S<s.length;S++)if(s[S].isEdge()){s[S]=x,h=x,v=_!=null?_:v;break}}}else s.push(x),h=x,v=_!=null?_:v}function g(x){var _=x.outerWidth()+2*f,S=x.outerHeight()+2*f,I=_/2,k=S/2,T=x.position();if(T.x-I<=t&&t<=T.x+I&&T.y-k<=e&&e<=T.y+k){var P=i.nodeShapes[a.getNodeShape(x)];if(P.checkPoint(t,e,0,_,S,T.x,T.y))return m(x,0),!0}}function b(x){var _=x._private,S=_.rscratch,I=x.pstyle("width").pfValue,k=x.pstyle("arrow-scale").value,T=I/2+c,P=T*T,A=T*2,H=_.source,W=_.target,B;if(S.edgeType==="segments"||S.edgeType==="straight"||S.edgeType==="haystack"){for(var L=S.allpts,N=0;N+3<L.length;N+=2)if(Ay(t,e,L[N],L[N+1],L[N+2],L[N+3],A)&&P>(B=Ly(t,e,L[N],L[N+1],L[N+2],L[N+3])))return m(x,B),!0}else if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"){for(var L=S.allpts,N=0;N+5<S.allpts.length;N+=4)if(My(t,e,L[N],L[N+1],L[N+2],L[N+3],L[N+4],L[N+5],A)&&P>(B=Oy(t,e,L[N],L[N+1],L[N+2],L[N+3],L[N+4],L[N+5])))return m(x,B),!0}for(var H=H||_.source,W=W||_.target,F=a.getArrowWidth(I,k),D=[{name:"source",x:S.arrowStartX,y:S.arrowStartY,angle:S.srcArrowAngle},{name:"target",x:S.arrowEndX,y:S.arrowEndY,angle:S.tgtArrowAngle},{name:"mid-source",x:S.midX,y:S.midY,angle:S.midsrcArrowAngle},{name:"mid-target",x:S.midX,y:S.midY,angle:S.midtgtArrowAngle}],N=0;N<D.length;N++){var R=D[N],O=i.arrowShapes[x.pstyle(R.name+"-arrow-shape").value],$=x.pstyle("width").pfValue;if(O.roughCollide(t,e,F,R.angle,{x:R.x,y:R.y},$,c)&&O.collide(t,e,F,R.angle,{x:R.x,y:R.y},$,c))return m(x),!0}u&&s.length>0&&(g(H),g(W))}function w(x,_,S){return Gt(x,_,S)}function y(x,_){var S=x._private,I=d,k;_?k=_+"-":k="",x.boundingBox();var T=S.labelBounds[_||"main"],P=x.pstyle(k+"label").value,A=x.pstyle("text-events").strValue==="yes";if(!(!A||!P)){var B=w(S.rscratch,"labelX",_),L=w(S.rscratch,"labelY",_),N=w(S.rscratch,"labelAngle",_),H=x.pstyle(k+"text-margin-x").pfValue,W=x.pstyle(k+"text-margin-y").pfValue,F=T.x1-I-H,D=T.x2+I-H,R=T.y1-I-W,O=T.y2+I-W;if(N){var $=Math.cos(N),V=Math.sin(N),q=function(Ee,le){return Ee=Ee-B,le=le-L,{x:Ee*$-le*V+B,y:Ee*V+le*$+L}},z=q(F,R),K=q(F,O),te=q(D,R),J=q(D,O),ie=[z.x+H,z.y+W,te.x+H,te.y+W,J.x+H,J.y+W,K.x+H,K.y+W];if(_t(t,e,ie))return m(x),!0}else if(_n(T,t,e))return m(x),!0}}for(var C=o.length-1;C>=0;C--){var E=o[C];E.isNode()?g(E)||y(E):b(E)||y(E)||y(E,"source")||y(E,"target")}return s};an.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(t,r),s=Math.max(t,r),l=Math.min(e,n),u=Math.max(e,n);t=o,r=s,e=l,n=u;for(var c=It({x1:t,y1:e,x2:r,y2:n}),f=0;f<a.length;f++){var d=a[f];if(d.isNode()){var v=d,h=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Us(c,h)&&!yf(h,c)&&i.push(v)}else{var p=d,m=p._private,g=m.rscratch;if(g.startX!=null&&g.startY!=null&&!_n(c,g.startX,g.startY)||g.endX!=null&&g.endY!=null&&!_n(c,g.endX,g.endY))continue;if(g.edgeType==="bezier"||g.edgeType==="multibezier"||g.edgeType==="self"||g.edgeType==="compound"||g.edgeType==="segments"||g.edgeType==="haystack"){for(var b=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,w=!0,y=0;y<b.length;y++)if(!Iy(c,b[y])){w=!1;break}w&&i.push(p)}else(g.edgeType==="haystack"||g.edgeType==="straight")&&i.push(p)}}return i};var Li={};Li.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,c,f,d,v,g,b;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],v=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,v=e.arrowEndY),g=e.midX,b=e.midY,i)l=c-e.segpts[0],u=f-e.segpts[1];else if(a||o||s||n){var h=e.allpts,p=it(h[0],h[2],h[4],.1),m=it(h[1],h[3],h[5],.1);l=c-p,u=f-m}else l=c-g,u=f-b;e.srcArrowAngle=Za(l,u);var g=e.midX,b=e.midY;if(r&&(g=(c+d)/2,b=(f+v)/2),l=d-c,u=v-f,i){var h=e.allpts;if(h.length/2%2===0){var w=h.length/2,y=w-2;l=h[w]-h[y],u=h[w+1]-h[y+1]}else{var w=h.length/2-1,y=w-2,C=w+2;l=h[w]-h[y],u=h[w+1]-h[y+1]}}else if(a||o||s){var h=e.allpts,E=e.ctrlpts,x,_,S,I;if(E.length/2%2===0){var k=h.length/2-1,T=k+2,P=T+2;x=it(h[k],h[T],h[P],0),_=it(h[k+1],h[T+1],h[P+1],0),S=it(h[k],h[T],h[P],1e-4),I=it(h[k+1],h[T+1],h[P+1],1e-4)}else{var T=h.length/2-1,k=T-2,P=T+2;x=it(h[k],h[T],h[P],.4999),_=it(h[k+1],h[T+1],h[P+1],.4999),S=it(h[k],h[T],h[P],.5),I=it(h[k+1],h[T+1],h[P+1],.5)}l=S-x,u=I-_}if(e.midtgtArrowAngle=Za(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var h=e.allpts;if(h.length/2%2!==0){var w=h.length/2-1,C=w+2;l=-(h[C]-h[w]),u=-(h[C+1]-h[w+1])}}if(e.midsrcArrowAngle=Za(l,u),i)l=d-e.segpts[e.segpts.length-2],u=v-e.segpts[e.segpts.length-1];else if(a||o||s||n){var h=e.allpts,A=h.length,p=it(h[A-6],h[A-4],h[A-2],.9),m=it(h[A-5],h[A-3],h[A-1],.9);l=d-p,u=v-m}else l=d-g,u=v-b;e.tgtArrowAngle=Za(l,u)};Li.getArrowWidth=Li.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var xt={};xt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),f=s.width(),d=o.height(),v=s.height(),h=r.pstyle("haystack-radius").value,p=h/2;a.haystackPts=a.allpts=[a.source.x*c*p+l.x,a.source.y*d*p+l.y,a.target.x*f*p+u.x,a.target.y*v*p+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};xt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=e.posPts,a=e.intersectionPts,i=e.vectorNormInverse,o=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments",r.segpts=[];for(var c=0;c<u;c++){var f=s.pfValue[c],d=l.pfValue[c],v=1-f,h=f,p=o==="node-position"?n:a,m={x:p.x1*v+p.x2*h,y:p.y1*v+p.y2*h};r.segpts.push(m.x+i.x*d,m.y+i.y*d)}};xt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=r,v=f;n&&(d=0,v=l);var h=u-Math.PI/2,p=h-c/2,m=h+c/2,g=String(u+"_"+c);d=i[g]===void 0?i[g]=0:++i[g],a.ctrlpts=[o.x+Math.cos(p)*1.4*v*(d/3+1),o.y+Math.sin(p)*1.4*v*(d/3+1),o.x+Math.cos(m)*1.4*v*(d/3+1),o.y+Math.sin(m)*1.4*v*(d/3+1)]};xt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),v=d?d.pfValue[0]:void 0,h=r,p=f;n&&(h=0,p=v);var m=50,g={x:i.x-s/2,y:i.y-l/2},b={x:o.x-u/2,y:o.y-c/2},w={x:Math.min(g.x,b.x),y:Math.min(g.y,b.y)},y=.5,C=Math.max(y,Math.log(s*.01)),E=Math.max(y,Math.log(u*.01));a.ctrlpts=[w.x,w.y-(1+Math.pow(m,1.12)/100)*p*(h/3+1)*C,w.x-(1+Math.pow(m,1.12)/100)*p*(h/3+1)*E,w.y]};xt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};xt.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),v=f&&d?Math.min(f.value.length,d.value.length):1,h=f?f.pfValue[0]:void 0,p=d.value[0],m=n;i.edgeType=m?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<v;g++){var b=(.5-e.eles.length/2+r)*c*(a?-1:1),w=void 0,y=mf(b);m&&(h=f?f.pfValue[g]:c,p=d.value[g]),n?w=h:w=h!==void 0?y*h:void 0;var C=w!==void 0?w:b,E=1-p,x=p,_=u==="node-position"?s:l,S={x:_.x1*E+_.x2*x,y:_.y1*E+_.y2*x};i.ctrlpts.push(S.x+o.x*C,S.y+o.y*C)}};xt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",c=e.posPts,f=e.srcW,d=e.srcH,v=e.tgtW,h=e.tgtH,p=t.pstyle("edge-distances").value,m=p!=="node-position",g=t.pstyle("taxi-direction").value,b=g,w=t.pstyle("taxi-turn"),y=w.units==="%",C=w.pfValue,E=C<0,x=t.pstyle("taxi-turn-min-distance").pfValue,_=m?(f+v)/2:0,S=m?(d+h)/2:0,I=c.x2-c.x1,k=c.y2-c.y1,T=function(fe,ke){return fe>0?Math.max(fe-ke,0):Math.min(fe+ke,0)},P=T(I,_),A=T(k,S),B=!1;b===u?g=Math.abs(P)>Math.abs(A)?a:n:b===l||b===s?(g=n,B=!0):(b===i||b===o)&&(g=a,B=!0);var L=g===n,N=L?A:P,H=L?k:I,W=mf(H),F=!1;!(B&&(y||E))&&(b===s&&H<0||b===l&&H>0||b===i&&H>0||b===o&&H<0)&&(W*=-1,N=W*Math.abs(N),F=!0);var D;if(y){var R=C<0?1+C:C;D=R*N}else{var O=C<0?N:0;D=O+C*W}var $=function(fe){return Math.abs(fe)<x||Math.abs(fe)>=Math.abs(N)},V=$(D),q=$(Math.abs(N)-Math.abs(D)),z=V||q;if(z&&!F)if(L){var K=Math.abs(H)<=d/2,te=Math.abs(I)<=v/2;if(K){var J=(c.x1+c.x2)/2,ie=c.y1,ve=c.y2;r.segpts=[J,ie,J,ve]}else if(te){var Ee=(c.y1+c.y2)/2,le=c.x1,re=c.x2;r.segpts=[le,Ee,re,Ee]}else r.segpts=[c.x1,c.y2]}else{var ne=Math.abs(H)<=f/2,Z=Math.abs(k)<=h/2;if(ne){var X=(c.y1+c.y2)/2,ue=c.x1,de=c.x2;r.segpts=[ue,X,de,X]}else if(Z){var we=(c.x1+c.x2)/2,ye=c.y1,Y=c.y2;r.segpts=[we,ye,we,Y]}else r.segpts=[c.x2,c.y1]}else if(L){var M=c.y1+D+(m?d/2*W:0),U=c.x1,ee=c.x2;r.segpts=[U,M,ee,M]}else{var Q=c.x1+D+(m?f/2*W:0),j=c.y1,me=c.y2;r.segpts=[Q,j,Q,me]}};xt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=!he(r.startX)||!he(r.startY),d=!he(r.arrowStartX)||!he(r.arrowStartY),v=!he(r.endX)||!he(r.endY),h=!he(r.arrowEndX)||!he(r.arrowEndY),p=3,m=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,g=p*m,b=jr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=b<g,y=jr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),C=y<g,E=!1;if(f||d||w){E=!0;var x={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},_=Math.sqrt(x.x*x.x+x.y*x.y),S={x:x.x/_,y:x.y/_},I=Math.max(i,o),k={x:r.ctrlpts[0]+S.x*2*I,y:r.ctrlpts[1]+S.y*2*I},T=u.intersectLine(n.x,n.y,i,o,k.x,k.y,0);w?(r.ctrlpts[0]=r.ctrlpts[0]+S.x*(g-b),r.ctrlpts[1]=r.ctrlpts[1]+S.y*(g-b)):(r.ctrlpts[0]=T[0]+S.x*g,r.ctrlpts[1]=T[1]+S.y*g)}if(v||h||C){E=!0;var P={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},A=Math.sqrt(P.x*P.x+P.y*P.y),B={x:P.x/A,y:P.y/A},L=Math.max(i,o),N={x:r.ctrlpts[0]+B.x*2*L,y:r.ctrlpts[1]+B.y*2*L},H=c.intersectLine(a.x,a.y,s,l,N.x,N.y,0);C?(r.ctrlpts[0]=r.ctrlpts[0]+B.x*(g-y),r.ctrlpts[1]=r.ctrlpts[1]+B.y*(g-y)):(r.ctrlpts[0]=H[0]+B.x*g,r.ctrlpts[1]=H[1]+B.y*g)}E&&this.findEndpoints(t)}};xt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=it(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=it(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}};xt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||he(e.startX)&&he(e.startY)&&he(e.endX)&&he(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Fe("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};xt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i={map:new er,get:function(x){var _=this.map.get(x[0]);return _!=null?_.get(x[1]):null},set:function(x,_){var S=this.map.get(x[0]);S==null&&(S=new er,this.map.set(x[0],S)),S.set(x[1],_)}},o=[],s=[],l=0;l<t.length;l++){var u=t[l],c=u._private,f=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(f==="haystack"){s.push(u);continue}var d=f==="unbundled-bezier"||f==="segments"||f==="straight"||f==="straight-triangle"||f==="taxi",v=f==="unbundled-bezier"||f==="bezier",h=c.source,p=c.target,m=h.poolIndex(),g=p.poolIndex(),b=[m,g].sort(),w=i.get(b);w==null&&(w={eles:[]},i.set(b,w),o.push(b)),w.eles.push(u),d&&(w.hasUnbundled=!0),v&&(w.hasBezier=!0)}}for(var y=function(x){var _=o[x],S=i.get(_),I=void 0;if(!S.hasUnbundled){var k=S.eles[0].parallelEdges().filter(function(Y){return Y.isBundledBezier()});qs(S.eles),k.forEach(function(Y){return S.eles.push(Y)}),S.eles.sort(function(Y,M){return Y.poolIndex()-M.poolIndex()})}var T=S.eles[0],P=T.source(),A=T.target();if(P.poolIndex()>A.poolIndex()){var B=P;P=A,A=B}var L=S.srcPos=P.position(),N=S.tgtPos=A.position(),H=S.srcW=P.outerWidth(),W=S.srcH=P.outerHeight(),F=S.tgtW=A.outerWidth(),D=S.tgtH=A.outerHeight(),R=S.srcShape=r.nodeShapes[e.getNodeShape(P)],O=S.tgtShape=r.nodeShapes[e.getNodeShape(A)];S.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<S.eles.length;$++){var V=S.eles[$],q=V[0]._private.rscratch,z=V.pstyle("curve-style").value,K=z==="unbundled-bezier"||z==="segments"||z==="taxi",te=!P.same(V.source());if(!S.calculatedIntersection&&P!==A&&(S.hasBezier||S.hasUnbundled)){S.calculatedIntersection=!0;var J=R.intersectLine(L.x,L.y,H,W,N.x,N.y,0),ie=S.srcIntn=J,ve=O.intersectLine(N.x,N.y,F,D,L.x,L.y,0),Ee=S.tgtIntn=ve,le=S.intersectionPts={x1:J[0],x2:ve[0],y1:J[1],y2:ve[1]},re=S.posPts={x1:L.x,x2:N.x,y1:L.y,y2:N.y},ne=ve[1]-J[1],Z=ve[0]-J[0],X=Math.sqrt(Z*Z+ne*ne),ue=S.vector={x:Z,y:ne},de=S.vectorNorm={x:ue.x/X,y:ue.y/X},we={x:-de.y,y:de.x};S.nodesOverlap=!he(X)||O.checkPoint(J[0],J[1],0,F,D,N.x,N.y)||R.checkPoint(ve[0],ve[1],0,H,W,L.x,L.y),S.vectorNormInverse=we,I={nodesOverlap:S.nodesOverlap,dirCounts:S.dirCounts,calculatedIntersection:!0,hasBezier:S.hasBezier,hasUnbundled:S.hasUnbundled,eles:S.eles,srcPos:N,tgtPos:L,srcW:F,srcH:D,tgtW:H,tgtH:W,srcIntn:Ee,tgtIntn:ie,srcShape:O,tgtShape:R,posPts:{x1:re.x2,y1:re.y2,x2:re.x1,y2:re.y1},intersectionPts:{x1:le.x2,y1:le.y2,x2:le.x1,y2:le.y1},vector:{x:-ue.x,y:-ue.y},vectorNorm:{x:-de.x,y:-de.y},vectorNormInverse:{x:-we.x,y:-we.y}}}var ye=te?I:S;q.nodesOverlap=ye.nodesOverlap,q.srcIntn=ye.srcIntn,q.tgtIntn=ye.tgtIntn,a&&(P.isParent()||P.isChild()||A.isParent()||A.isChild())&&(P.parents().anySame(A)||A.parents().anySame(P)||P.same(A)&&P.isParent())?e.findCompoundLoopPoints(V,ye,$,K):P===A?e.findLoopPoints(V,ye,$,K):z==="segments"?e.findSegmentsPoints(V,ye):z==="taxi"?e.findTaxiPoints(V,ye):z==="straight"||!K&&S.eles.length%2===1&&$===Math.floor(S.eles.length/2)?e.findStraightEdgePoints(V):e.findBezierPoints(V,ye,$,K,te),e.findEndpoints(V),e.tryToCorrectInvalidPoints(V,ye),e.checkForInvalidEdgeWarning(V),e.storeAllpts(V),e.storeEdgeProjections(V),e.calculateArrowAngles(V),e.recalculateEdgeLabelProjections(V),e.calculateLabelAngles(V)}},C=0;C<o.length;C++)y(C);this.findHaystackPoints(s)}};function ih(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}xt.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),ih(e.segpts)};xt.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),ih(e.ctrlpts)};xt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var za={};za.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight();if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var s=e.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(a,i),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,u[0],u[1],0)}};za.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=t.pstyle("curve-style").value,d=t._private.rscratch,v=d.edgeType,h=f==="taxi",p=v==="self"||v==="compound",m=v==="bezier"||v==="multibezier"||p,g=v!=="bezier",b=v==="straight"||v==="segments",w=v==="segments",y=m||g||b,C=p||h,E=t.pstyle("source-endpoint"),x=C?"outside-to-node":E.value,_=t.pstyle("target-endpoint"),S=C?"outside-to-node":_.value;d.srcManEndpt=E,d.tgtManEndpt=_;var I,k,T,P;if(m){var A=[d.ctrlpts[0],d.ctrlpts[1]],B=g?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:A;I=B,k=A}else if(b){var L=w?d.segpts.slice(0,2):[o.x,o.y],N=w?d.segpts.slice(d.segpts.length-2):[i.x,i.y];I=N,k=L}if(S==="inside-to-node")r=[o.x,o.y];else if(_.units)r=this.manualEndptToPx(a,_);else if(S==="outside-to-line")r=d.tgtIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?T=I:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(T=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),T[0],T[1],0),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var H=a._private.rscratch,W=H.labelWidth,F=H.labelHeight,D=H.labelX,R=H.labelY,O=W/2,$=F/2,V=a.pstyle("text-valign").value;V==="top"?R-=$:V==="bottom"&&(R+=$);var q=a.pstyle("text-halign").value;q==="left"?D-=O:q==="right"&&(D+=O);var z=Ea(T[0],T[1],[D-O,R-$,D+O,R-$,D+O,R+$,D-O,R+$],o.x,o.y);if(z.length>0){var K=i,te=zr(K,mn(r)),J=zr(K,mn(z)),ie=te;if(J<te&&(r=z,ie=J),z.length>2){var ve=zr(K,{x:z[2],y:z[3]});ve<ie&&(r=[z[2],z[3]])}}}var Ee=Qa(r,I,e.arrowShapes[s].spacing(t)+u),le=Qa(r,I,e.arrowShapes[s].gap(t)+u);if(d.endX=le[0],d.endY=le[1],d.arrowEndX=Ee[0],d.arrowEndY=Ee[1],x==="inside-to-node")r=[i.x,i.y];else if(E.units)r=this.manualEndptToPx(n,E);else if(x==="outside-to-line")r=d.srcIntn;else if(x==="outside-to-node"||x==="outside-to-node-or-label"?P=k:(x==="outside-to-line"||x==="outside-to-line-or-label")&&(P=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),P[0],P[1],0),x==="outside-to-node-or-label"||x==="outside-to-line-or-label"){var re=n._private.rscratch,ne=re.labelWidth,Z=re.labelHeight,X=re.labelX,ue=re.labelY,de=ne/2,we=Z/2,ye=n.pstyle("text-valign").value;ye==="top"?ue-=we:ye==="bottom"&&(ue+=we);var Y=n.pstyle("text-halign").value;Y==="left"?X-=de:Y==="right"&&(X+=de);var M=Ea(P[0],P[1],[X-de,ue-we,X+de,ue-we,X+de,ue+we,X-de,ue+we],i.x,i.y);if(M.length>0){var U=o,ee=zr(U,mn(r)),Q=zr(U,mn(M)),j=ee;if(Q<ee&&(r=[M[0],M[1]],j=Q),M.length>2){var me=zr(U,{x:M[2],y:M[3]});me<j&&(r=[M[2],M[3]])}}}var ae=Qa(r,k,e.arrowShapes[l].spacing(t)+c),fe=Qa(r,k,e.arrowShapes[l].gap(t)+c);d.startX=fe[0],d.startY=fe[1],d.arrowStartX=ae[0],d.arrowStartY=ae[1],y&&(!he(d.startX)||!he(d.startY)||!he(d.endX)||!he(d.endY)?d.badLine=!0:d.badLine=!1)};za.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};za.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var tl={};function ow(t,e,r){for(var n=function(u,c,f,d){return it(u,c,f,d)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}tl.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)ow(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};tl.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var ar={};ar.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Tr(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var oh=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},sh=function(e,r){var n=r.x-e.x,a=r.y-e.y;return oh(n,a)},sw=function(e,r,n,a){var i=xa(0,a-.001,1),o=xa(0,a+.001,1),s=xn(e,r,n,i),l=xn(e,r,n,o);return sh(s,l)};ar.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(!!(i.mid||i.source||i.target)){e={x:n.midX,y:n.midY};var o=function(f,d,v){wr(r.rscratch,f,d,v),wr(r.rstyle,f,d,v)};o("labelX",null,e.x),o("labelY",null,e.y);var s=oh(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function c(){if(c.cache)return c.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var v={x:n.allpts[d],y:n.allpts[d+1]},h={x:n.allpts[d+2],y:n.allpts[d+3]},p={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:v,p1:h,p2:p,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,g=a.bezierProjPcts.length;function b(x,_,S,I,k){var T=jr(_,S),P=x.segments[x.segments.length-1],A={p0:_,p1:S,t0:I,t1:k,startDist:P?P.startDist+P.length:0,length:T};x.segments.push(A),x.length+=T}for(var w=0;w<f.length;w++){var y=f[w],C=f[w-1];C&&(y.startDist=C.startDist+C.length),b(y,y.p0,m[w*g],0,a.bezierProjPcts[0]);for(var E=0;E<g-1;E++)b(y,m[w*g+E],m[w*g+E+1],a.bezierProjPcts[E],a.bezierProjPcts[E+1]);b(y,m[w*g+g-1],y.p2,a.bezierProjPcts[g-1],1)}return c.cache=f},u=function(f){var d,v=f==="source";if(!!i[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=l(),m,g=0,b=0,w=0;w<p.length;w++){for(var y=p[v?w:p.length-1-w],C=0;C<y.segments.length;C++){var E=y.segments[v?C:y.segments.length-1-C],x=w===p.length-1&&C===y.segments.length-1;if(g=b,b+=E.length,b>=h||x){m={cp:y,segment:E};break}}if(m)break}var _=m.cp,S=m.segment,I=(h-g)/S.length,k=S.t1-S.t0,T=v?S.t0+k*I:S.t1-k*I;T=xa(0,T,1),e=xn(_.p0,_.p1,_.p2,T),d=sw(_.p0,_.p1,_.p2,T);break}case"straight":case"segments":case"haystack":{for(var P=0,A,B,L,N,H=n.allpts.length,W=0;W+3<H&&(v?(L={x:n.allpts[W],y:n.allpts[W+1]},N={x:n.allpts[W+2],y:n.allpts[W+3]}):(L={x:n.allpts[H-2-W],y:n.allpts[H-1-W]},N={x:n.allpts[H-4-W],y:n.allpts[H-3-W]}),A=jr(L,N),B=P,P+=A,!(P>=h));W+=2);var F=h-B,D=F/A;D=xa(0,D,1),e=Cy(L,N,D),d=sh(L,N);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,d)}};u("source"),u("target"),this.applyLabelDimensions(t)}};ar.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};ar.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),i=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,s=Gt(r.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=a.height/l,c=u*i,f=a.width,d=a.height+(l-1)*(i-1)*u;wr(r.rstyle,"labelWidth",e,f),wr(r.rscratch,"labelWidth",e,f),wr(r.rstyle,"labelHeight",e,d),wr(r.rscratch,"labelHeight",e,d),wr(r.rscratch,"labelLineHeight",e,c)};ar.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(F,D){return D?(wr(r.rscratch,F,e,D),D):Gt(r.rscratch,F,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="\u200B",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,d=t.pstyle("text-overflow-wrap").value,v=d==="anywhere",h=[],p=/[\s\u200b]+/,m=v?"":" ",g=0;g<c.length;g++){var b=c[g],w=this.calculateLabelDimensions(t,b),y=w.width;if(v){var C=b.split("").join(u);b=C}if(y>f){for(var E=b.split(p),x="",_=0;_<E.length;_++){var S=E[_],I=x.length===0?S:x+m+S,k=this.calculateLabelDimensions(t,I),T=k.width;T<=f?x+=S+m:(x&&h.push(x),x=S+m)}x.match(/^[\s\u200b]+$/)||h.push(x)}else h.push(b)}o("labelWrapCachedLines",h),a=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var P=t.pstyle("text-max-width").pfValue,A="",B="\u2026",L=!1;if(this.calculateLabelDimensions(t,a).width<P)return a;for(var N=0;N<a.length;N++){var H=this.calculateLabelDimensions(t,A+a[N]+B).width;if(H>P)break;A+=a[N],N===a.length-1&&(L=!0)}return L||(A+=B),A}return a};ar.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};ar.calculateLabelDimensions=function(t,e){var r=this,n=Yr(e,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=t.pstyle("font-style").strValue,l=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,c=t.pstyle("font-weight").strValue,f=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=f.getContext("2d");var v=f.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}d.font="".concat(s," ").concat(c," ").concat(l,"px ").concat(u);for(var h=0,p=0,m=e.split(`
`),g=0;g<m.length;g++){var b=m[g],w=d.measureText(b),y=Math.ceil(w.width),C=l;h=Math.max(y,h),p+=C}return h+=o,p+=o,a[n]={width:h,height:p}};ar.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};ar.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var lh={},Iu=28,Au=!1;lh.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Iu||t.height()<Iu))return Au||(Fe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Au=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var so={};so.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],c=u._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(n(u.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var d=s[f];d(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};so.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};so.recalculateRenderedStyle=function(t,e){var r=function(y){return y._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,l=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var c=a[u],f=c._private,d=f.rstyle,v=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=v.x,d.nodeY=v.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var p=n[h],m=p._private,g=m.rstyle,b=m.rscratch;g.srcX=b.arrowStartX,g.srcY=b.arrowStartY,g.tgtX=b.arrowEndX,g.tgtY=b.arrowEndY,g.midX=b.midX,g.midY=b.midY,g.labelAngle=b.labelAngle,g.sourceLabelAngle=b.sourceLabelAngle,g.targetLabelAngle=b.targetLabelAngle}}};var lo={};lo.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(!!t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};lo.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};lo.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Yf),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var uh={};[an,Li,xt,za,tl,ar,lh,so,lo].forEach(function(t){_e(uh,t)});var ch={};ch.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",l=t.substring(0,s.length).toLowerCase()===s;return l||(o.crossOrigin=e),o.src=t,o};var qn={};qn.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(t);return i.on.apply(i,a)};qn.binder=function(t){var e=this,r=t===window||t===document||t===document.body||Im(t);if(e.supportsPassiveEvents==null){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=n}var i=function(s,l,u){var c=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(c[2]={capture:u!=null?u:!1,passive:!1,once:!1}),e.bindings.push({target:t,args:c}),(t.addEventListener||t.on).apply(t,c),this};return{on:i,addEventListener:i,addListener:i,bind:i}};qn.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};qn.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};qn.load=function(){var t=this,e=function(M){return M.selected()},r=function(M,U,ee,Q){M==null&&(M=t.cy);for(var j=0;j<U.length;j++){var me=U[j];M.emit({originalEvent:ee,type:me,position:Q})}},n=function(M){return M.shiftKey||M.metaKey||M.ctrlKey},a=function(M,U){var ee=!0;if(t.cy.hasCompoundNodes()&&M&&M.pannable())for(var Q=0;U&&Q<U.length;Q++){var M=U[Q];if(M.isNode()&&M.isParent()&&!M.pannable()){ee=!1;break}}else ee=!0;return ee},i=function(M){M[0]._private.grabbed=!0},o=function(M){M[0]._private.grabbed=!1},s=function(M){M[0]._private.rscratch.inDragLayer=!0},l=function(M){M[0]._private.rscratch.inDragLayer=!1},u=function(M){M[0]._private.rscratch.isGrabTarget=!0},c=function(M){M[0]._private.rscratch.isGrabTarget=!1},f=function(M,U){var ee=U.addToList,Q=ee.has(M);!Q&&M.grabbable()&&!M.locked()&&(ee.merge(M),i(M))},d=function(M,U){if(!!M.cy().hasCompoundNodes()&&!(U.inDragLayer==null&&U.addToList==null)){var ee=M.descendants();U.inDragLayer&&(ee.forEach(s),ee.connectedEdges().forEach(s)),U.addToList&&f(ee,U)}},v=function(M,U){U=U||{};var ee=M.cy().hasCompoundNodes();U.inDragLayer&&(M.forEach(s),M.neighborhood().stdFilter(function(Q){return!ee||Q.isEdge()}).forEach(s)),U.addToList&&M.forEach(function(Q){f(Q,U)}),d(M,U),m(M,{inDragLayer:U.inDragLayer}),t.updateCachedGrabbedEles()},h=v,p=function(M){!M||(t.getCachedZSortedEles().forEach(function(U){o(U),l(U),c(U)}),t.updateCachedGrabbedEles())},m=function(M,U){if(!(U.inDragLayer==null&&U.addToList==null)&&!!M.cy().hasCompoundNodes()){var ee=M.ancestors().orphans();if(!ee.same(M)){var Q=ee.descendants().spawnSelf().merge(ee).unmerge(M).unmerge(M.descendants()),j=Q.connectedEdges();U.inDragLayer&&(j.forEach(s),Q.forEach(s)),U.addToList&&Q.forEach(function(me){f(me,U)})}}},g=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},b=typeof MutationObserver!="undefined",w=typeof ResizeObserver!="undefined";b?(t.removeObserver=new MutationObserver(function(Y){for(var M=0;M<Y.length;M++){var U=Y[M],ee=U.removedNodes;if(ee)for(var Q=0;Q<ee.length;Q++){var j=ee[Q];if(j===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Y){t.destroy()});var y=ji(function(){t.cy.resize()},100);b&&(t.styleObserver=new MutationObserver(y),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",y),w&&(t.resizeObserver=new ResizeObserver(y),t.resizeObserver.observe(t.container));var C=function(M,U){for(;M!=null;)U(M),M=M.parentNode},E=function(){t.invalidateContainerClientCoordsCache()};C(t.container,function(Y){t.registerBinding(Y,"transitionend",E),t.registerBinding(Y,"animationend",E),t.registerBinding(Y,"scroll",E)}),t.registerBinding(t.container,"contextmenu",function(Y){Y.preventDefault()});var x=function(){return t.selection[4]!==0},_=function(M){for(var U=t.findContainerClientCoords(),ee=U[0],Q=U[1],j=U[2],me=U[3],ae=M.touches?M.touches:[M],fe=!1,ke=0;ke<ae.length;ke++){var Ie=ae[ke];if(ee<=Ie.clientX&&Ie.clientX<=ee+j&&Q<=Ie.clientY&&Ie.clientY<=Q+me){fe=!0;break}}if(!fe)return!1;for(var G=t.container,oe=M.target,ce=oe.parentNode,pe=!1;ce;){if(ce===G){pe=!0;break}ce=ce.parentNode}return!!pe};t.registerBinding(t.container,"mousedown",function(M){if(!!_(M)){M.preventDefault(),g(),t.hoverData.capture=!0,t.hoverData.which=M.which;var U=t.cy,ee=[M.clientX,M.clientY],Q=t.projectIntoViewport(ee[0],ee[1]),j=t.selection,me=t.findNearestElements(Q[0],Q[1],!0,!1),ae=me[0],fe=t.dragData.possibleDragElements;t.hoverData.mdownPos=Q,t.hoverData.mdownGPos=ee;var ke=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Ce=t.hoverData.down;Ce?Ce.emit({originalEvent:M,type:"taphold",position:{x:Q[0],y:Q[1]}}):U.emit({originalEvent:M,type:"taphold",position:{x:Q[0],y:Q[1]}})}},t.tapholdDuration)};if(M.which==3){t.hoverData.cxtStarted=!0;var Ie={originalEvent:M,type:"cxttapstart",position:{x:Q[0],y:Q[1]}};ae?(ae.activate(),ae.emit(Ie),t.hoverData.down=ae):U.emit(Ie),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(M.which==1){ae&&ae.activate();{if(ae!=null&&t.nodeIsGrabbable(ae)){var G=function(Ce){return{originalEvent:M,type:Ce,position:{x:Q[0],y:Q[1]}}},oe=function(Ce){Ce.emit(G("grab"))};if(u(ae),!ae.selected())fe=t.dragData.possibleDragElements=U.collection(),h(ae,{addToList:fe}),ae.emit(G("grabon")).emit(G("grab"));else{fe=t.dragData.possibleDragElements=U.collection();var ce=U.$(function(pe){return pe.isNode()&&pe.selected()&&t.nodeIsGrabbable(pe)});v(ce,{addToList:fe}),ae.emit(G("grabon")),ce.forEach(oe)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ae,t.hoverData.downs=me,t.hoverData.downTime=new Date().getTime()}r(ae,["mousedown","tapstart","vmousedown"],M,{x:Q[0],y:Q[1]}),ae==null?(j[4]=1,t.data.bgActivePosistion={x:Q[0],y:Q[1]},t.redrawHint("select",!0),t.redraw()):ae.pannable()&&(j[4]=1),ke()}j[0]=j[2]=Q[0],j[1]=j[3]=Q[1]}},!1),t.registerBinding(window,"mousemove",function(M){var U=t.hoverData.capture;if(!(!U&&!_(M))){var ee=!1,Q=t.cy,j=Q.zoom(),me=[M.clientX,M.clientY],ae=t.projectIntoViewport(me[0],me[1]),fe=t.hoverData.mdownPos,ke=t.hoverData.mdownGPos,Ie=t.selection,G=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(G=t.findNearestElement(ae[0],ae[1],!0,!1));var oe=t.hoverData.last,ce=t.hoverData.down,pe=[ae[0]-Ie[2],ae[1]-Ie[3]],Ce=t.dragData.possibleDragElements,De;if(ke){var Ue=me[0]-ke[0],at=Ue*Ue,Ze=me[1]-ke[1],Qe=Ze*Ze,tt=at+Qe;t.hoverData.isOverThresholdDrag=De=tt>=t.desktopTapThreshold2}var Et=n(M);De&&(t.hoverData.tapholdCancelled=!0);var bt=function(){var Zt=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Zt.length===0?(Zt.push(pe[0]),Zt.push(pe[1])):(Zt[0]+=pe[0],Zt[1]+=pe[1])};ee=!0,r(G,["mousemove","vmousemove","tapdrag"],M,{x:ae[0],y:ae[1]});var mr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||Q.emit({originalEvent:M,type:"boxstart",position:{x:ae[0],y:ae[1]}}),Ie[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(De){var $t={originalEvent:M,type:"cxtdrag",position:{x:ae[0],y:ae[1]}};ce?ce.emit($t):Q.emit($t),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||G!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:M,type:"cxtdragout",position:{x:ae[0],y:ae[1]}}),t.hoverData.cxtOver=G,G&&G.emit({originalEvent:M,type:"cxtdragover",position:{x:ae[0],y:ae[1]}}))}}else if(t.hoverData.dragging){if(ee=!0,Q.panningEnabled()&&Q.userPanningEnabled()){var Ht;if(t.hoverData.justStartedPan){var Wa=t.hoverData.mdownPos;Ht={x:(ae[0]-Wa[0])*j,y:(ae[1]-Wa[1])*j},t.hoverData.justStartedPan=!1}else Ht={x:pe[0]*j,y:pe[1]*j};Q.panBy(Ht),Q.emit("dragpan"),t.hoverData.dragged=!0}ae=t.projectIntoViewport(M.clientX,M.clientY)}else if(Ie[4]==1&&(ce==null||ce.pannable())){if(De){if(!t.hoverData.dragging&&Q.boxSelectionEnabled()&&(Et||!Q.panningEnabled()||!Q.userPanningEnabled()))mr();else if(!t.hoverData.selecting&&Q.panningEnabled()&&Q.userPanningEnabled()){var Br=a(ce,t.hoverData.downs);Br&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Ie[4]=0,t.data.bgActivePosistion=mn(fe),t.redrawHint("select",!0),t.redraw())}ce&&ce.pannable()&&ce.active()&&ce.unactivate()}}else{if(ce&&ce.pannable()&&ce.active()&&ce.unactivate(),(!ce||!ce.grabbed())&&G!=oe&&(oe&&r(oe,["mouseout","tapdragout"],M,{x:ae[0],y:ae[1]}),G&&r(G,["mouseover","tapdragover"],M,{x:ae[0],y:ae[1]}),t.hoverData.last=G),ce)if(De){if(Q.boxSelectionEnabled()&&Et)ce&&ce.grabbed()&&(p(Ce),ce.emit("freeon"),Ce.emit("free"),t.dragData.didDrag&&(ce.emit("dragfreeon"),Ce.emit("dragfree"))),mr();else if(ce&&ce.grabbed()&&t.nodeIsDraggable(ce)){var Ct=!t.dragData.didDrag;Ct&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||v(Ce,{inDragLayer:!0});var vt={x:0,y:0};if(he(pe[0])&&he(pe[1])&&(vt.x+=pe[0],vt.y+=pe[1],Ct)){var St=t.hoverData.dragDelta;St&&he(St[0])&&he(St[1])&&(vt.x+=St[0],vt.y+=St[1])}t.hoverData.draggingEles=!0,Ce.silentShift(vt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else bt();ee=!0}if(Ie[2]=ae[0],Ie[3]=ae[1],ee)return M.stopPropagation&&M.stopPropagation(),M.preventDefault&&M.preventDefault(),!1}},!1);var S,I,k;t.registerBinding(window,"mouseup",function(M){var U=t.hoverData.capture;if(!!U){t.hoverData.capture=!1;var ee=t.cy,Q=t.projectIntoViewport(M.clientX,M.clientY),j=t.selection,me=t.findNearestElement(Q[0],Q[1],!0,!1),ae=t.dragData.possibleDragElements,fe=t.hoverData.down,ke=n(M);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,fe&&fe.unactivate(),t.hoverData.which===3){var Ie={originalEvent:M,type:"cxttapend",position:{x:Q[0],y:Q[1]}};if(fe?fe.emit(Ie):ee.emit(Ie),!t.hoverData.cxtDragged){var G={originalEvent:M,type:"cxttap",position:{x:Q[0],y:Q[1]}};fe?fe.emit(G):ee.emit(G)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(r(me,["mouseup","tapend","vmouseup"],M,{x:Q[0],y:Q[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(fe,["click","tap","vclick"],M,{x:Q[0],y:Q[1]}),I=!1,M.timeStamp-k<=ee.multiClickDebounceTime()?(S&&clearTimeout(S),I=!0,k=null,r(fe,["dblclick","dbltap","vdblclick"],M,{x:Q[0],y:Q[1]})):(S=setTimeout(function(){I||r(fe,["oneclick","onetap","voneclick"],M,{x:Q[0],y:Q[1]})},ee.multiClickDebounceTime()),k=M.timeStamp)),fe==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!n(M)&&(ee.$(e).unselect(["tapunselect"]),ae.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ae=ee.collection()),me==fe&&!t.dragData.didDrag&&!t.hoverData.selecting&&me!=null&&me._private.selectable&&(t.hoverData.dragging||(ee.selectionType()==="additive"||ke?me.selected()?me.unselect(["tapunselect"]):me.select(["tapselect"]):ke||(ee.$(e).unmerge(me).unselect(["tapunselect"]),me.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var oe=ee.collection(t.getAllInBox(j[0],j[1],j[2],j[3]));t.redrawHint("select",!0),oe.length>0&&t.redrawHint("eles",!0),ee.emit({type:"boxend",originalEvent:M,position:{x:Q[0],y:Q[1]}});var ce=function(De){return De.selectable()&&!De.selected()};ee.selectionType()==="additive"||ke||ee.$(e).unmerge(oe).unselect(),oe.emit("box").stdFilter(ce).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!j[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var pe=fe&&fe.grabbed();p(ae),pe&&(fe.emit("freeon"),ae.emit("free"),t.dragData.didDrag&&(fe.emit("dragfreeon"),ae.emit("dragfree")))}}j[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var T=function(M){if(!t.scrollingPage){var U=t.cy,ee=U.zoom(),Q=U.pan(),j=t.projectIntoViewport(M.clientX,M.clientY),me=[j[0]*ee+Q.x,j[1]*ee+Q.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||x()){M.preventDefault();return}if(U.panningEnabled()&&U.userPanningEnabled()&&U.zoomingEnabled()&&U.userZoomingEnabled()){M.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var ae;M.deltaY!=null?ae=M.deltaY/-250:M.wheelDeltaY!=null?ae=M.wheelDeltaY/1e3:ae=M.wheelDelta/1e3,ae=ae*t.wheelSensitivity;var fe=M.deltaMode===1;fe&&(ae*=33);var ke=U.zoom()*Math.pow(10,ae);M.type==="gesturechange"&&(ke=t.gestureStartZoom*M.scale),U.zoom({level:ke,renderedPosition:{x:me[0],y:me[1]}}),U.emit(M.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",T,!0),t.registerBinding(window,"scroll",function(M){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(M){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||M.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Y){t.hasTouchStarted||T(Y)},!0),t.registerBinding(t.container,"mouseout",function(M){var U=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseout",position:{x:U[0],y:U[1]}})},!1),t.registerBinding(t.container,"mouseover",function(M){var U=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseover",position:{x:U[0],y:U[1]}})},!1);var P,A,B,L,N,H,W,F,D,R,O,$,V,q=function(M,U,ee,Q){return Math.sqrt((ee-M)*(ee-M)+(Q-U)*(Q-U))},z=function(M,U,ee,Q){return(ee-M)*(ee-M)+(Q-U)*(Q-U)},K;t.registerBinding(t.container,"touchstart",K=function(M){if(t.hasTouchStarted=!0,!!_(M)){g(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var U=t.cy,ee=t.touchData.now,Q=t.touchData.earlier;if(M.touches[0]){var j=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);ee[0]=j[0],ee[1]=j[1]}if(M.touches[1]){var j=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);ee[2]=j[0],ee[3]=j[1]}if(M.touches[2]){var j=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);ee[4]=j[0],ee[5]=j[1]}if(M.touches[1]){t.touchData.singleTouchMoved=!0,p(t.dragData.touchDragEles);var me=t.findContainerClientCoords();D=me[0],R=me[1],O=me[2],$=me[3],P=M.touches[0].clientX-D,A=M.touches[0].clientY-R,B=M.touches[1].clientX-D,L=M.touches[1].clientY-R,V=0<=P&&P<=O&&0<=B&&B<=O&&0<=A&&A<=$&&0<=L&&L<=$;var ae=U.pan(),fe=U.zoom();N=q(P,A,B,L),H=z(P,A,B,L),W=[(P+B)/2,(A+L)/2],F=[(W[0]-ae.x)/fe,(W[1]-ae.y)/fe];var ke=200,Ie=ke*ke;if(H<Ie&&!M.touches[2]){var G=t.findNearestElement(ee[0],ee[1],!0,!0),oe=t.findNearestElement(ee[2],ee[3],!0,!0);G&&G.isNode()?(G.activate().emit({originalEvent:M,type:"cxttapstart",position:{x:ee[0],y:ee[1]}}),t.touchData.start=G):oe&&oe.isNode()?(oe.activate().emit({originalEvent:M,type:"cxttapstart",position:{x:ee[0],y:ee[1]}}),t.touchData.start=oe):U.emit({originalEvent:M,type:"cxttapstart",position:{x:ee[0],y:ee[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(M.touches[2])U.boxSelectionEnabled()&&M.preventDefault();else if(!M.touches[1]){if(M.touches[0]){var ce=t.findNearestElements(ee[0],ee[1],!0,!0),pe=ce[0];if(pe!=null&&(pe.activate(),t.touchData.start=pe,t.touchData.starts=ce,t.nodeIsGrabbable(pe))){var Ce=t.dragData.touchDragEles=U.collection(),De=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),pe.selected()?(De=U.$(function(tt){return tt.selected()&&t.nodeIsGrabbable(tt)}),v(De,{addToList:Ce})):h(pe,{addToList:Ce}),u(pe);var Ue=function(Et){return{originalEvent:M,type:Et,position:{x:ee[0],y:ee[1]}}};pe.emit(Ue("grabon")),De?De.forEach(function(tt){tt.emit(Ue("grab"))}):pe.emit(Ue("grab"))}r(pe,["touchstart","tapstart","vmousedown"],M,{x:ee[0],y:ee[1]}),pe==null&&(t.data.bgActivePosistion={x:j[0],y:j[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],M,{x:ee[0],y:ee[1]})},t.tapholdDuration)}}if(M.touches.length>=1){for(var at=t.touchData.startPosition=[],Ze=0;Ze<ee.length;Ze++)at[Ze]=Q[Ze]=ee[Ze];var Qe=M.touches[0];t.touchData.startGPosition=[Qe.clientX,Qe.clientY]}}},!1);var te;t.registerBinding(window,"touchmove",te=function(M){var U=t.touchData.capture;if(!(!U&&!_(M))){var ee=t.selection,Q=t.cy,j=t.touchData.now,me=t.touchData.earlier,ae=Q.zoom();if(M.touches[0]){var fe=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);j[0]=fe[0],j[1]=fe[1]}if(M.touches[1]){var fe=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);j[2]=fe[0],j[3]=fe[1]}if(M.touches[2]){var fe=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);j[4]=fe[0],j[5]=fe[1]}var ke=t.touchData.startGPosition,Ie;if(U&&M.touches[0]&&ke){for(var G=[],oe=0;oe<j.length;oe++)G[oe]=j[oe]-me[oe];var ce=M.touches[0].clientX-ke[0],pe=ce*ce,Ce=M.touches[0].clientY-ke[1],De=Ce*Ce,Ue=pe+De;Ie=Ue>=t.touchTapThreshold2}if(U&&t.touchData.cxt){M.preventDefault();var at=M.touches[0].clientX-D,Ze=M.touches[0].clientY-R,Qe=M.touches[1].clientX-D,tt=M.touches[1].clientY-R,Et=z(at,Ze,Qe,tt),bt=Et/H,mr=150,$t=mr*mr,Ht=1.5,Wa=Ht*Ht;if(bt>=Wa||Et>=$t){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Br={originalEvent:M,type:"cxttapend",position:{x:j[0],y:j[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Br),t.touchData.start=null):Q.emit(Br)}}if(U&&t.touchData.cxt){var Br={originalEvent:M,type:"cxtdrag",position:{x:j[0],y:j[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Br):Q.emit(Br),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Ct=t.findNearestElement(j[0],j[1],!0,!0);(!t.touchData.cxtOver||Ct!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:M,type:"cxtdragout",position:{x:j[0],y:j[1]}}),t.touchData.cxtOver=Ct,Ct&&Ct.emit({originalEvent:M,type:"cxtdragover",position:{x:j[0],y:j[1]}}))}else if(U&&M.touches[2]&&Q.boxSelectionEnabled())M.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||Q.emit({originalEvent:M,type:"boxstart",position:{x:j[0],y:j[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,ee[4]=1,!ee||ee.length===0||ee[0]===void 0?(ee[0]=(j[0]+j[2]+j[4])/3,ee[1]=(j[1]+j[3]+j[5])/3,ee[2]=(j[0]+j[2]+j[4])/3+1,ee[3]=(j[1]+j[3]+j[5])/3+1):(ee[2]=(j[0]+j[2]+j[4])/3,ee[3]=(j[1]+j[3]+j[5])/3),t.redrawHint("select",!0),t.redraw();else if(U&&M.touches[1]&&!t.touchData.didSelect&&Q.zoomingEnabled()&&Q.panningEnabled()&&Q.userZoomingEnabled()&&Q.userPanningEnabled()){M.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var vt=t.dragData.touchDragEles;if(vt){t.redrawHint("drag",!0);for(var St=0;St<vt.length;St++){var Ua=vt[St]._private;Ua.grabbed=!1,Ua.rscratch.inDragLayer=!1}}var Zt=t.touchData.start,at=M.touches[0].clientX-D,Ze=M.touches[0].clientY-R,Qe=M.touches[1].clientX-D,tt=M.touches[1].clientY-R,vl=q(at,Ze,Qe,tt),wd=vl/N;if(V){var xd=at-P,Ed=Ze-A,Cd=Qe-B,Sd=tt-L,_d=(xd+Cd)/2,Td=(Ed+Sd)/2,Kn=Q.zoom(),vo=Kn*wd,Ga=Q.pan(),pl=F[0]*Kn+Ga.x,gl=F[1]*Kn+Ga.y,kd={x:-vo/Kn*(pl-Ga.x-_d)+pl,y:-vo/Kn*(gl-Ga.y-Td)+gl};if(Zt&&Zt.active()){var vt=t.dragData.touchDragEles;p(vt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Zt.unactivate().emit("freeon"),vt.emit("free"),t.dragData.didDrag&&(Zt.emit("dragfreeon"),vt.emit("dragfree"))}Q.viewport({zoom:vo,pan:kd,cancelOnFailedZoom:!0}),Q.emit("pinchzoom"),N=vl,P=at,A=Ze,B=Qe,L=tt,t.pinching=!0}if(M.touches[0]){var fe=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);j[0]=fe[0],j[1]=fe[1]}if(M.touches[1]){var fe=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);j[2]=fe[0],j[3]=fe[1]}if(M.touches[2]){var fe=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);j[4]=fe[0],j[5]=fe[1]}}else if(M.touches[0]&&!t.touchData.didSelect){var Vt=t.touchData.start,po=t.touchData.last,Ct;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Ct=t.findNearestElement(j[0],j[1],!0,!0)),U&&Vt!=null&&M.preventDefault(),U&&Vt!=null&&t.nodeIsDraggable(Vt))if(Ie){var vt=t.dragData.touchDragEles,ml=!t.dragData.didDrag;ml&&v(vt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Yn={x:0,y:0};if(he(G[0])&&he(G[1])&&(Yn.x+=G[0],Yn.y+=G[1],ml)){t.redrawHint("eles",!0);var qt=t.touchData.dragDelta;qt&&he(qt[0])&&he(qt[1])&&(Yn.x+=qt[0],Yn.y+=qt[1])}t.hoverData.draggingEles=!0,vt.silentShift(Yn).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==me[0]&&t.touchData.startPosition[1]==me[1]&&t.redrawHint("eles",!0),t.redraw()}else{var qt=t.touchData.dragDelta=t.touchData.dragDelta||[];qt.length===0?(qt.push(G[0]),qt.push(G[1])):(qt[0]+=G[0],qt[1]+=G[1])}if(r(Vt||Ct,["touchmove","tapdrag","vmousemove"],M,{x:j[0],y:j[1]}),(!Vt||!Vt.grabbed())&&Ct!=po&&(po&&po.emit({originalEvent:M,type:"tapdragout",position:{x:j[0],y:j[1]}}),Ct&&Ct.emit({originalEvent:M,type:"tapdragover",position:{x:j[0],y:j[1]}})),t.touchData.last=Ct,U)for(var St=0;St<j.length;St++)j[St]&&t.touchData.startPosition[St]&&Ie&&(t.touchData.singleTouchMoved=!0);if(U&&(Vt==null||Vt.pannable())&&Q.panningEnabled()&&Q.userPanningEnabled()){var Id=a(Vt,t.touchData.starts);Id&&(M.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=mn(t.touchData.startPosition)),t.swipePanning?(Q.panBy({x:G[0]*ae,y:G[1]*ae}),Q.emit("dragpan")):Ie&&(t.swipePanning=!0,Q.panBy({x:ce*ae,y:Ce*ae}),Q.emit("dragpan"),Vt&&(Vt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var fe=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);j[0]=fe[0],j[1]=fe[1]}}for(var oe=0;oe<j.length;oe++)me[oe]=j[oe];U&&M.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var J;t.registerBinding(window,"touchcancel",J=function(M){var U=t.touchData.start;t.touchData.capture=!1,U&&U.unactivate()});var ie,ve,Ee,le;if(t.registerBinding(window,"touchend",ie=function(M){var U=t.touchData.start,ee=t.touchData.capture;if(ee)M.touches.length===0&&(t.touchData.capture=!1),M.preventDefault();else return;var Q=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var j=t.cy,me=j.zoom(),ae=t.touchData.now,fe=t.touchData.earlier;if(M.touches[0]){var ke=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);ae[0]=ke[0],ae[1]=ke[1]}if(M.touches[1]){var ke=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);ae[2]=ke[0],ae[3]=ke[1]}if(M.touches[2]){var ke=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);ae[4]=ke[0],ae[5]=ke[1]}U&&U.unactivate();var Ie;if(t.touchData.cxt){if(Ie={originalEvent:M,type:"cxttapend",position:{x:ae[0],y:ae[1]}},U?U.emit(Ie):j.emit(Ie),!t.touchData.cxtDragged){var G={originalEvent:M,type:"cxttap",position:{x:ae[0],y:ae[1]}};U?U.emit(G):j.emit(G)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!M.touches[2]&&j.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var oe=j.collection(t.getAllInBox(Q[0],Q[1],Q[2],Q[3]));Q[0]=void 0,Q[1]=void 0,Q[2]=void 0,Q[3]=void 0,Q[4]=0,t.redrawHint("select",!0),j.emit({type:"boxend",originalEvent:M,position:{x:ae[0],y:ae[1]}});var ce=function($t){return $t.selectable()&&!$t.selected()};oe.emit("box").stdFilter(ce).select().emit("boxselect"),oe.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(U!=null&&U.unactivate(),M.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!M.touches[1]){if(!M.touches[0]){if(!M.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var pe=t.dragData.touchDragEles;if(U!=null){var Ce=U._private.grabbed;p(pe),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Ce&&(U.emit("freeon"),pe.emit("free"),t.dragData.didDrag&&(U.emit("dragfreeon"),pe.emit("dragfree"))),r(U,["touchend","tapend","vmouseup","tapdragout"],M,{x:ae[0],y:ae[1]}),U.unactivate(),t.touchData.start=null}else{var De=t.findNearestElement(ae[0],ae[1],!0,!0);r(De,["touchend","tapend","vmouseup","tapdragout"],M,{x:ae[0],y:ae[1]})}var Ue=t.touchData.startPosition[0]-ae[0],at=Ue*Ue,Ze=t.touchData.startPosition[1]-ae[1],Qe=Ze*Ze,tt=at+Qe,Et=tt*me*me;t.touchData.singleTouchMoved||(U||j.$(":selected").unselect(["tapunselect"]),r(U,["tap","vclick"],M,{x:ae[0],y:ae[1]}),ve=!1,M.timeStamp-le<=j.multiClickDebounceTime()?(Ee&&clearTimeout(Ee),ve=!0,le=null,r(U,["dbltap","vdblclick"],M,{x:ae[0],y:ae[1]})):(Ee=setTimeout(function(){ve||r(U,["onetap","voneclick"],M,{x:ae[0],y:ae[1]})},j.multiClickDebounceTime()),le=M.timeStamp)),U!=null&&!t.dragData.didDrag&&U._private.selectable&&Et<t.touchTapThreshold2&&!t.pinching&&(j.selectionType()==="single"?(j.$(e).unmerge(U).unselect(["tapunselect"]),U.select(["tapselect"])):U.selected()?U.unselect(["tapunselect"]):U.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var bt=0;bt<ae.length;bt++)fe[bt]=ae[bt];t.dragData.didDrag=!1,M.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),M.touches.length<2&&(M.touches.length===1&&(t.touchData.startGPosition=[M.touches[0].clientX,M.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent=="undefined"){var re=[],ne=function(M){return{clientX:M.clientX,clientY:M.clientY,force:1,identifier:M.pointerId,pageX:M.pageX,pageY:M.pageY,radiusX:M.width/2,radiusY:M.height/2,screenX:M.screenX,screenY:M.screenY,target:M.target}},Z=function(M){return{event:M,touch:ne(M)}},X=function(M){re.push(Z(M))},ue=function(M){for(var U=0;U<re.length;U++){var ee=re[U];if(ee.event.pointerId===M.pointerId){re.splice(U,1);return}}},de=function(M){var U=re.filter(function(ee){return ee.event.pointerId===M.pointerId})[0];U.event=M,U.touch=ne(M)},we=function(M){M.touches=re.map(function(U){return U.touch})},ye=function(M){return M.pointerType==="mouse"||M.pointerType===4};t.registerBinding(t.container,"pointerdown",function(Y){ye(Y)||(Y.preventDefault(),X(Y),we(Y),K(Y))}),t.registerBinding(t.container,"pointerup",function(Y){ye(Y)||(ue(Y),we(Y),ie(Y))}),t.registerBinding(t.container,"pointercancel",function(Y){ye(Y)||(ue(Y),we(Y),J(Y))}),t.registerBinding(t.container,"pointermove",function(Y){ye(Y)||(Y.preventDefault(),de(Y),we(Y),te(Y))})}};var pr={};pr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u){return Ea(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u){return cr(n,a,this.points,l,u,o,s,[0,-1],i)}}};pr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return Ry(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s){return Vr(e,r,a,i,o,s,n)}}};pr.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),n=0;n<e.length/2;n++){var a=n*2,i=void 0;n<e.length/2-1?i=(n+1)*2:i=0,r[n*4]=e[a],r[n*4+1]=e[a+1];var o=e[i]-e[a],s=e[i+1]-e[a+1],l=Math.sqrt(o*o+s*s);r[n*4+2]=o/l,r[n*4+3]=s/l}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(c,f,d,v,h){this.renderer.nodeShapeImpl("round-polygon",c,f,d,v,h,this.points)},intersectLine:function(c,f,d,v,h,p,m){return Ny(h,p,this.points,c,f,d,v)},checkPoint:function(c,f,d,v,h,p,m){return By(c,f,this.points,p,m,v,h)}}};pr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:wt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return bf(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var l=Ba(a,i),u=l*2;return!!(cr(e,r,this.points,o,s,a,i-u,[0,-1],n)||cr(e,r,this.points,o,s,a-u,i,[0,-1],n)||Vr(e,r,u,u,o-a/2+l,s-i/2+l,n)||Vr(e,r,u,u,o+a/2-l,s-i/2+l,n)||Vr(e,r,u,u,o+a/2-l,s+i/2-l,n)||Vr(e,r,u,u,o-a/2+l,s+i/2-l,n))}}};pr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Cf(),points:wt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},generateCutTrianglePts:function(e,r,n,a){var i=this.cornerLength,o=r/2,s=e/2,l=n-s,u=n+s,c=a-o,f=a+o;return{topLeft:[l,c+i,l+i,c,l+i,c+i],topRight:[u-i,c,u,c+i,u-i,c+i],bottomRight:[u,f-i,u-i,f,u-i,f-i],bottomLeft:[l+i,f,l,f-i,l+i,f-i]}},intersectLine:function(e,r,n,a,i,o,s){var l=this.generateCutTrianglePts(n+2*s,a+2*s,e,r),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Ea(i,o,u,e,r)},checkPoint:function(e,r,n,a,i,o,s){if(cr(e,r,this.points,o,s,a,i-2*this.cornerLength,[0,-1],n)||cr(e,r,this.points,o,s,a-2*this.cornerLength,i,[0,-1],n))return!0;var l=this.generateCutTrianglePts(a,i,o,s);return _t(e,r,l.topLeft)||_t(e,r,l.topRight)||_t(e,r,l.bottomRight)||_t(e,r,l.bottomLeft)}}};pr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:wt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var l=.15,u=.5,c=.85,f=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),d=function(p){var m=xn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l),g=xn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},u),b=xn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c);return[p[0],p[1],m.x,m.y,g.x,g.y,b.x,b.y,p[4],p[5]]},v=[].concat(d(f.topLeft),d(f.topRight),d(f.bottomRight),d(f.bottomLeft));return Ea(i,o,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,l=n+o,u=a-i,c=a+i,f=rs(e,r),d=f.heightOffset,v=f.widthOffset,h=f.ctrlPtOffsetPct*e,p={topLeft:[s,u+d,s+h,u,s+v,u],topRight:[l-v,u,l-h,u,l,u+d],bottomRight:[l,c-d,l-h,c,l-v,c],bottomLeft:[s+v,c,s+h,c,s,c-d]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,r,n,a,i,o,s){var l=rs(a,i),u=l.heightOffset,c=l.widthOffset;if(cr(e,r,this.points,o,s,a,i-2*u,[0,-1],n)||cr(e,r,this.points,o,s,a-2*c,i,[0,-1],n))return!0;for(var f=this.generateBarrelBezierPts(a,i,o,s),d=function(x,_,S){var I=S[4],k=S[2],T=S[0],P=S[5],A=S[1],B=Math.min(I,T),L=Math.max(I,T),N=Math.min(P,A),H=Math.max(P,A);if(B<=x&&x<=L&&N<=_&&_<=H){var W=zy(I,k,T),F=Dy(W[0],W[1],W[2],x),D=F.filter(function(R){return 0<=R&&R<=1});if(D.length>0)return D[0]}return null},v=Object.keys(f),h=0;h<v.length;h++){var p=v[h],m=f[p],g=d(e,r,m);if(g!=null){var b=m[5],w=m[3],y=m[1],C=it(b,w,y,g);if(m.isTop&&C<=r||m.isBottom&&r<=C)return!0}}return!1}}};pr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:wt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var l=e-(n/2+s),u=r-(a/2+s),c=u,f=e+(n/2+s),d=xr(i,o,e,r,l,u,f,c,!1);return d.length>0?d:bf(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var l=Ba(a,i),u=2*l;if(cr(e,r,this.points,o,s,a,i-u,[0,-1],n)||cr(e,r,this.points,o,s,a-u,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(_t(e,r,d)||Vr(e,r,u,u,o+a/2-l,s+i/2-l,n)||Vr(e,r,u,u,o-a/2+l,s+i/2-l,n))}}};pr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",wt(3,0)),this.generateRoundPolygon("round-triangle",wt(3,0)),this.generatePolygon("rectangle",wt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",wt(5,0)),this.generateRoundPolygon("round-pentagon",wt(5,0)),this.generatePolygon("hexagon",wt(6,0)),this.generateRoundPolygon("round-hexagon",wt(6,0)),this.generatePolygon("heptagon",wt(7,0)),this.generateRoundPolygon("round-heptagon",wt(7,0)),this.generatePolygon("octagon",wt(8,0)),this.generateRoundPolygon("round-octagon",wt(8,0));var n=new Array(20);{var a=ts(5,0),i=ts(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=Ef(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var c=u.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,u)}};var Fa={};Fa.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Fa.redraw=function(t){t=t||pf();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Fa.beforeRender=function(t,e){if(!this.destroyed){e==null&&je("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var Mu=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};Fa.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Mu(t,!0,a);var i=ur();t.render(t.renderOptions);var o=t.lastDrawTime=ur();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else Mu(t,!1,a);t.skipFrame=!1,Ii(n)}};Ii(r)}};var lw=function(e){this.init(e)},fh=lw,Wn=fh.prototype;Wn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Wn.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container();if(Ke){var n=Ke.document,a=n.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",s=n.getElementById(i)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!s){var l=n.createElement("style");l.id=i,l.innerHTML="."+o+" { position: relative; }",a.insertBefore(l,a.children[0])}var u=Ke.getComputedStyle(r),c=u.getPropertyValue("position");c==="static"&&Fe("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=he(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Wn.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Wn.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Wn.isHeadless=function(){return!1};[el,uh,ch,qn,pr,Fa].forEach(function(t){_e(Wn,t)});var Bo=1e3/60,hh={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=ji(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,c){var f=ur(),d=a.averageRedrawTime,v=a.lastRedrawTime,h=[],p=a.cy.extent(),m=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var g=ur(),b=g-f,w=g-c;if(v<Bo){var y=Bo-(u?d:0);if(w>=e.deqFastCost*y)break}else if(u){if(b>=e.deqCost*v||b>=e.deqAvgCost*d)break}else if(w>=e.deqNoDrawCost*Bo)break;var C=e.deq(n,m,p);if(C.length>0)for(var E=0;E<C.length;E++)h.push(C[E]);else break}h.length>0&&(e.onDeqd(n,h),!u&&e.shouldRedraw(n,h,m,p)&&i())},s=e.priority||Vs;a.beforeRender(o,s(n))}}}},uw=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ai;Ns(this,t),this.idsByKey=new er,this.keyForId=new er,this.cachesByLvl=new er,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return zs(t,[{key:"getIdsFor",value:function(r){r==null&&je("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Fn,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new er,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),t}(),Du=25,oi=50,Ei=-4,us=3,cw=7.99,fw=8,hw=1024,dw=1024,vw=1024,pw=.2,gw=.8,mw=10,yw=.15,bw=.1,ww=.9,xw=.9,Ew=100,Cw=1,yn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Sw=ht({getKey:null,doesEleInvalidateKey:Ai,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:hf,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),aa=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=Sw(r);_e(n,a),n.lookup=new uw(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},nt=aa.prototype;nt.reasons=yn;nt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};nt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};nt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Pa(function(r,n){return n.reqs-r.reqs});return e};nt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};nt.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Ws(s*r))),n<Ei)n=Ei;else if(s>=cw||n>us)return null;var u=Math.pow(2,n),c=e.h*u,f=e.w*u,d=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var v=l.get(t,n);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;var h;if(c<=Du?h=Du:c<=oi?h=oi:h=Math.ceil(c/oi)*oi,c>vw||f>dw)return null;var p=i.getTextureQueue(h),m=p[p.length-2],g=function(){return i.recycleTexture(h,f)||i.addTexture(h,f)};m||(m=p[p.length-1]),m||(m=g()),m.width-m.usedWidth<f&&(m=g());for(var b=function(L){return L&&L.scaledLabelShown===d},w=a&&a===yn.dequeue,y=a&&a===yn.highQuality,C=a&&a===yn.downscale,E,x=n+1;x<=us;x++){var _=l.get(t,x);if(_){E=_;break}}var S=E&&E.level===n+1?E:null,I=function(){m.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,m.usedWidth,0,f,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,h),b(S))I();else if(b(E))if(y){for(var k=E.level;k>n;k--)S=i.getElement(t,e,r,k,yn.downscale);I()}else return i.queueElement(t,E.level-1),E;else{var T;if(!w&&!y&&!C)for(var P=n-1;P>=Ei;P--){var A=l.get(t,P);if(A){T=A;break}}if(b(T))return i.queueElement(t,n),T;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,t,e,d,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return v={x:m.usedWidth,texture:m,level:n,scale:u,width:f,height:c,scaledLabelShown:d},m.usedWidth+=Math.ceil(f+fw),m.eleCaches.push(v),l.set(t,n,v),i.checkTextureFullness(m),v};nt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};nt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(!!a){for(var i=Ei;i<=us;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var l=0;l<n.length;l++){var u=n[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};nt.checkTextureUtility=function(t){t.invalidatedWidth>=pw*t.width&&this.retireTexture(t)};nt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>gw&&t.fullnessChecks>=mw?kr(r,t):t.fullnessChecks++};nt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;kr(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}qs(i);var l=e.getRetiredTextureQueue(r);l.push(t)};nt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(hw,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};nt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,qs(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),kr(a,o),n.push(o),o}};nt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};nt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<Cw&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],c=i.hasCache(u,s.level);if(n[l]=null,c)continue;a.push(s);var f=e.getBoundingBox(u);e.getElement(u,f,t,s.level,yn.dequeue)}return a};nt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Hs,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};nt.onDequeue=function(t){this.onDequeues.push(t)};nt.offDequeue=function(t){kr(this.onDequeues,t)};nt.setupDequeueing=hh.setupDequeueing({deqRedrawThreshold:Ew,deqCost:yw,deqAvgCost:bw,deqNoDrawCost:ww,deqFastCost:xw,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(Us(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var _w=1,sa=-4,Bi=2,Tw=3.99,kw=50,Iw=50,Aw=.15,Mw=.1,Dw=.9,Pw=.9,Ow=1,Pu=250,Lw=4e3*4e3,Bw=!0,dh=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=ur()-2*Pu,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=ji(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},Iw),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=Pu?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};r.layersQueue=new Pa(i),r.setupDequeueing()},dt=dh.prototype,Ou=0,Rw=Math.pow(2,53)-1;dt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:Ou=++Ou%Rw,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o};dt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Ws(o*e)),r<sa)r=sa;else if(o>=Tw||r>Bi)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[],f,d=n.levelIsComplete(r,t),v,h=function(){var I=function(B){if(n.validateLayersElesOrdering(B,t),n.levelIsComplete(B,t))return v=l[B],!0},k=function(B){if(!v)for(var L=r+B;sa<=L&&L<=Bi&&!I(L);L+=B);};k(1),k(-1);for(var T=c.length-1;T>=0;T--){var P=c[T];P.invalid&&kr(c,P)}};if(!d)h();else return c;var p=function(){if(!f){f=It();for(var I=0;I<t.length;I++)Ty(f,t[I].boundingBox())}return f},m=function(I){I=I||{};var k=I.after;p();var T=f.w*u*(f.h*u);if(T>Lw)return null;var P=n.makeLayer(f,r);if(k!=null){var A=c.indexOf(k)+1;c.splice(A,0,P)}else(I.insert===void 0||I.insert)&&c.unshift(P);return P};if(n.skipping&&!s)return null;for(var g=null,b=t.length/_w,w=!s,y=0;y<t.length;y++){var C=t[y],E=C._private.rscratch,x=E.imgLayerCaches=E.imgLayerCaches||{},_=x[r];if(_){g=_;continue}if((!g||g.eles.length>=b||!yf(g.bb,C.boundingBox()))&&(g=m({insert:!0,after:g}),!g))return null;v||w?n.queueLayer(g,C):n.drawEleInLayer(g,C,r,e),g.eles.push(C),x[r]=g}return v||(w?null:c)};dt.getEleLevelForLayerLevel=function(t,e){return t};dt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,Bw),i.setImgSmoothing(o,!0))};dt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};dt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(!!r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};dt.updateElementsInLayers=function(t,e){for(var r=this,n=La(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=sa;u<=Bi;u++){var c=l[u];!c||i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i)}};dt.haveLayers=function(){for(var t=this,e=!1,r=sa;r<=Bi;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};dt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=ur(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};dt.invalidateLayer=function(t){if(this.lastInvalidationTime=ur(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];kr(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};dt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};dt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};dt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};dt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<Ow&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};dt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};dt.requestRedraw=ji(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);dt.setupDequeueing=hh.setupDequeueing({deqRedrawThreshold:kw,deqCost:Aw,deqAvgCost:Mw,deqNoDrawCost:Dw,deqFastCost:Pw,deq:function(e,r){return e.dequeue(r)},onDeqd:Vs,shouldRedraw:hf,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var vh={},Lu;function Nw(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function zw(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Bu(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function Fw(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function $w(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}vh.arrowShapeImpl=function(t){return(Lu||(Lu={polygon:Nw,"triangle-backcurve":zw,"triangle-tee":Bu,"circle-triangle":Fw,"triangle-cross":Bu,circle:$w}))[t]};var ir={};ir.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};ir.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};ir.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};ir.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=r.getElement(e,u,n,a,i);if(c!=null){var f=s(l,e);if(f===0)return;var d=o(l,e),v=u.x1,h=u.y1,p=u.w,m=u.h,g,b,w,y,C;if(d!==0){var E=r.getRotationPoint(e);w=E.x,y=E.y,t.translate(w,y),t.rotate(d),C=l.getImgSmoothing(t),C||l.setImgSmoothing(t,!0);var x=r.getRotationOffset(e);g=x.x,b=x.y}else g=v,b=h;var _;f!==1&&(_=t.globalAlpha,t.globalAlpha=_*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,g,b,p,m),f!==1&&(t.globalAlpha=_),d!==0&&(t.rotate(-d),t.translate(-w,-y),C||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var Hw=function(){return 0},Vw=function(e,r){return e.getTextAngle(r,null)},qw=function(e,r){return e.getTextAngle(r,"source")},Ww=function(e,r){return e.getTextAngle(r,"target")},Uw=function(e,r){return r.effectiveOpacity()},Ro=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};ir.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,d=e.boundingBox(),v=i===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Us(d,n))){var h=e.isEdge(),p=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,l,r,a,v,Hw,Uw),(!h||!p)&&o.drawCachedElementPortion(t,e,u,r,a,v,Vw,Ro),h&&!p&&(o.drawCachedElementPortion(t,e,c,r,a,v,qw,Ro),o.drawCachedElementPortion(t,e,f,r,a,v,Ww,Ro)),o.drawElementOverlay(t,e)}};ir.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};ir.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};ir.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];!o.isNode()||a.drawCachedElement(t,o,r,n)}};ir.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};var gr={};gr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,v=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,p=u*c,m=u*c,g=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;f==="straight-triangle"?(o.eleStrokeStyle(t,e,T),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=v,t.lineCap=h,o.eleStrokeStyle(t,e,T),o.drawEdgePath(e,t,s.allpts,d),t.lineCap="butt")},b=function(){!a||o.drawEdgeOverlay(t,e)},w=function(){!a||o.drawEdgeUnderlay(t,e)},y=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;o.drawArrowheads(t,e,T)},C=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var E=e.pstyle("ghost").value==="yes";if(E){var x=e.pstyle("ghost-offset-x").pfValue,_=e.pstyle("ghost-offset-y").pfValue,S=e.pstyle("ghost-opacity").value,I=p*S;t.translate(x,_),g(I),y(I),t.translate(-x,-_)}w(),g(),y(),b(),C(),r&&t.translate(l.x1,l.y1)}};var ph=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(!!n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};gr.drawEdgeOverlay=ph("overlay");gr.drawEdgeUnderlay=ph("underlay");gr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=r.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=f,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var v=2;v+3<r.length;v+=4)e.quadraticCurveTo(r[v],r[v+1],r[v+2],r[v+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<r.length;h+=2)e.lineTo(r[h],r[h+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};gr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};gr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};gr.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle("opacity").value;o===void 0&&(o=d);var v=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,f,l,n,a,i),t.globalCompositeOperation=v);var h=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,h[0],h[1],h[2],o),s.colorStrokeStyle(t,h[0],h[1],h[2],o),s.drawArrowShape(e,t,c,f,l,n,a,i)}}};gr.drawArrowShape=function(t,e,r,n,a,i,o,s){var l=this,u=this.usePaths()&&a!=="triangle-cross",c=!1,f,d=e,v={x:i,y:o},h=t.pstyle("arrow-scale").value,p=this.getArrowWidth(n,h),m=l.arrowShapes[a];if(u){var g=l.arrowPathCache=l.arrowPathCache||[],b=Yr(a),w=g[b];w!=null?(f=e=w,c=!0):(f=e=new Path2D,g[b]=f)}c||(e.beginPath&&e.beginPath(),u?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,p,s,v,n),e.closePath&&e.closePath()),e=d,u&&(e.translate(i,o),e.rotate(s),e.scale(p,p)),(r==="filled"||r==="both")&&(u?e.fill(f):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=(m.matchEdgeWidth?n:1)/(u?p:1),e.lineJoin="miter",u?e.stroke(f):e.stroke()),u&&(e.scale(1/p,1/p),e.rotate(-s),e.translate(-i,-o))};var rl={};rl.safeDrawImage=function(t,e,r,n,a,i,o,s,l,u){a<=0||i<=0||l<=0||u<=0||t.drawImage(e,r,n,a,i,o,s,l,u)};rl.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),f=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),v=r.width(),h=r.height(),p=r.padding()*2,m=v+(c(r,"background-width-relative-to","value",n)==="inner"?0:p),g=h+(c(r,"background-height-relative-to","value",n)==="inner"?0:p),b=r._private.rscratch,w=c(r,"background-clip","value",n),y=w==="node",C=c(r,"background-image-opacity","value",n)*a,E=c(r,"background-image-smoothing","value",n),x=e.width||e.cachedW,_=e.height||e.cachedH;(x==null||_==null)&&(document.body.appendChild(e),x=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var S=x,I=_;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?S=c(r,"background-width","pfValue",n)*m:S=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?I=c(r,"background-height","pfValue",n)*g:I=c(r,"background-height","pfValue",n)),!(S===0||I===0)){if(f==="contain"){var k=Math.min(m/S,g/I);S*=k,I*=k}else if(f==="cover"){var k=Math.max(m/S,g/I);S*=k,I*=k}var T=s-m/2,P=c(r,"background-position-x","units",n),A=c(r,"background-position-x","pfValue",n);P==="%"?T+=(m-S)*A:T+=A;var B=c(r,"background-offset-x","units",n),L=c(r,"background-offset-x","pfValue",n);B==="%"?T+=(m-S)*L:T+=L;var N=l-g/2,H=c(r,"background-position-y","units",n),W=c(r,"background-position-y","pfValue",n);H==="%"?N+=(g-I)*W:N+=W;var F=c(r,"background-offset-y","units",n),D=c(r,"background-offset-y","pfValue",n);F==="%"?N+=(g-I)*D:N+=D,b.pathCache&&(T-=s,N-=l,s=0,l=0);var R=t.globalAlpha;t.globalAlpha=C;var O=i.getImgSmoothing(t),$=!1;if(E==="no"&&O?(i.setImgSmoothing(t,!1),$=!0):E==="yes"&&!O&&(i.setImgSmoothing(t,!0),$=!0),d==="no-repeat")y&&(t.save(),b.pathCache?t.clip(b.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,m,g),t.clip())),i.safeDrawImage(t,e,0,0,x,_,T,N,S,I),y&&t.restore();else{var V=t.createPattern(e,d);t.fillStyle=V,i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,m,g),t.translate(T,N),t.fill(),t.translate(-T,-N)}t.globalAlpha=R,$&&i.setImgSmoothing(t,O)}};var on={};on.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Ws(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};on.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var v=!r,h;r&&(h=r,t.translate(-h.x1,-h.y1)),a==null?(o.drawText(t,e,null,v,i),e.isEdge()&&(o.drawText(t,e,"source",v,i),o.drawText(t,e,"target",v,i))):o.drawText(t,e,a,v,i),r&&t.translate(h.x1,h.y1)};on.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};on.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)};function Gw(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),t.fill()}on.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=Gt(a,"labelAngle",e);return o.strValue==="autorotate"?r=t.isEdge()?s:0:o.strValue==="none"?r=0:r=o.pfValue,r};on.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=Gt(o,"labelX",r),u=Gt(o,"labelY",r),c,f,d=this.getLabelText(e,r);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var v=r?r+"-":"",h=Gt(o,"labelWidth",r),p=Gt(o,"labelHeight",r),m=e.pstyle(v+"text-margin-x").pfValue,g=e.pstyle(v+"text-margin-y").pfValue,b=e.isEdge(),w=e.pstyle("text-halign").value,y=e.pstyle("text-valign").value;b&&(w="center",y="center"),l+=m,u+=g;var C;switch(n?C=this.getTextAngle(e,r):C=0,C!==0&&(c=l,f=u,t.translate(c,f),t.rotate(C),l=0,u=0),y){case"top":break;case"center":u+=p/2;break;case"bottom":u+=p;break}var E=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,_=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue;if(E>0||_>0&&x>0){var I=l-S;switch(w){case"left":I-=h;break;case"center":I-=h/2;break}var k=u-p-S,T=h+2*S,P=p+2*S;if(E>0){var A=t.fillStyle,B=e.pstyle("text-background-color").value;t.fillStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+E*s+")";var L=e.pstyle("text-background-shape").strValue;L.indexOf("round")===0?Gw(t,I,k,T,P,2):t.fillRect(I,k,T,P),t.fillStyle=A}if(_>0&&x>0){var N=t.strokeStyle,H=t.lineWidth,W=e.pstyle("text-border-color").value,F=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+W[0]+","+W[1]+","+W[2]+","+x*s+")",t.lineWidth=_,t.setLineDash)switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=_/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(t.strokeRect(I,k,T,P),F==="double"){var D=_/2;t.strokeRect(I+D,k+D,T-D*2,P-D*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=H,t.strokeStyle=N}}var R=2*e.pstyle("text-outline-width").pfValue;if(R>0&&(t.lineWidth=R),e.pstyle("text-wrap").value==="wrap"){var O=Gt(o,"labelWrapCachedLines",r),$=Gt(o,"labelLineHeight",r),V=h/2,q=this.getLabelJustification(e);switch(q==="auto"||(w==="left"?q==="left"?l+=-h:q==="center"&&(l+=-V):w==="center"?q==="left"?l+=-V:q==="right"&&(l+=V):w==="right"&&(q==="center"?l+=V:q==="right"&&(l+=h))),y){case"top":u-=(O.length-1)*$;break;case"center":case"bottom":u-=(O.length-1)*$;break}for(var z=0;z<O.length;z++)R>0&&t.strokeText(O[z],l,u),t.fillText(O[z],l,u),u+=$}else R>0&&t.strokeText(d,l,u),t.fillText(d,l,u);C!==0&&(t.rotate(-C),t.translate(-c,-f))}}};var Un={};Un.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,c=u.rscratch,f=e.position();if(!(!he(f.x)||!he(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,v=o.usePaths(),h,p=!1,m=e.padding();s=e.width()+2*m,l=e.height()+2*m;var g;r&&(g=r,t.translate(-g.x1,-g.y1));for(var b=e.pstyle("background-image"),w=b.value,y=new Array(w.length),C=new Array(w.length),E=0,x=0;x<w.length;x++){var _=w[x],S=y[x]=_!=null&&_!=="none";if(S){var I=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);E++,C[x]=o.getCachedImage(_,I,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var k=e.pstyle("background-blacken").value,T=e.pstyle("border-width").pfValue,P=e.pstyle("background-opacity").value*d,A=e.pstyle("border-color").value,B=e.pstyle("border-style").value,L=e.pstyle("border-opacity").value*d;t.lineJoin="miter";var N=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P;o.eleFillStyle(t,e,X)},H=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;o.colorStrokeStyle(t,A[0],A[1],A[2],X)},W=e.pstyle("shape").strValue,F=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(f.x,f.y);var D=o.nodePathCache=o.nodePathCache||[],R=ff(W==="polygon"?W+","+F.join(","):W,""+l,""+s),O=D[R];O!=null?(h=O,p=!0,c.pathCache=h):(h=new Path2D,D[R]=c.pathCache=h)}var $=function(){if(!p){var X=f;v&&(X={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||t,X.x,X.y,s,l)}v?t.fill(h):t.fill()},V=function(){for(var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,de=u.backgrounding,we=0,ye=0;ye<C.length;ye++){var Y=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ye);if(ue&&Y==="over"||!ue&&Y==="inside"){we++;continue}y[ye]&&C[ye].complete&&!C[ye].error&&(we++,o.drawInscribedImage(t,C[ye],e,ye,X))}u.backgrounding=we!==E,de!==u.backgrounding&&e.updateStyle(!1)},q=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(t,e,ue),X&&(v||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l)))},z=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ue=(k>0?k:-k)*X,de=k>0?0:255;k!==0&&(o.colorFillStyle(t,de,de,de,ue),v?t.fill(h):t.fill())},K=function(){if(T>0){if(t.lineWidth=T,t.lineCap="butt",t.setLineDash)switch(B){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(v?t.stroke(h):t.stroke(),B==="double"){t.lineWidth=T/3;var X=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(h):t.stroke(),t.globalCompositeOperation=X}t.setLineDash&&t.setLineDash([])}},te=function(){a&&o.drawNodeOverlay(t,e,f,s,l)},J=function(){a&&o.drawNodeUnderlay(t,e,f,s,l)},ie=function(){o.drawElementText(t,e,null,n)},ve=e.pstyle("ghost").value==="yes";if(ve){var Ee=e.pstyle("ghost-offset-x").pfValue,le=e.pstyle("ghost-offset-y").pfValue,re=e.pstyle("ghost-opacity").value,ne=re*d;t.translate(Ee,le),N(re*P),$(),V(ne,!0),H(re*L),K(),q(k!==0||T!==0),V(ne,!1),z(ne),t.translate(-Ee,-le)}v&&t.translate(-f.x,-f.y),J(),v&&t.translate(f.x,f.y),N(),$(),V(d,!0),H(),K(),q(k!==0||T!==0),V(d,!1),z(),v&&t.translate(-f.x,-f.y),ie(),te(),r&&t.translate(g.x1,g.y1)}};var gh=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(!!n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var d=n.padding();i=n.width()+2*d,o=n.height()+2*d}s.colorFillStyle(r,c[0],c[1],c[2],u),s.nodeShapes[f].draw(r,a.x,a.y,i+l*2,o+l*2),r.fill()}}}};Un.drawNodeOverlay=gh("overlay");Un.drawNodeUnderlay=gh("underlay");Un.hasPie=function(t){return t=t[0],t._private.hasPie};Un.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,f=0,d=this.usePaths();d&&(o=0,s=0),i.units==="%"?c=c*i.pfValue:i.pfValue!==void 0&&(c=i.pfValue/2);for(var v=1;v<=a.pieBackgroundN;v++){var h=e.pstyle("pie-"+v+"-background-size").value,p=e.pstyle("pie-"+v+"-background-color").value,m=e.pstyle("pie-"+v+"-background-opacity").value*r,g=h/100;g+f>1&&(g=1-f);var b=1.5*Math.PI+2*Math.PI*f,w=2*Math.PI*g,y=b+w;h===0||f>=1||f+g>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,c,b,y),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],m),t.fill(),f+=g)}};var Pt={},Kw=100;Pt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Pt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Pt.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),d=jr(u,f),v=jr(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,v))}else{var h=o?{x:0,y:0}:r.position(),p=r.paddedWidth(),m=r.paddedHeight();i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,m))}else if(r.isEdge()){var g=r.sourceEndpoint(),b=r.targetEndpoint();i=t.createLinearGradient(g.x,g.y,b.x,b.y)}else{var w=o?{x:0,y:0}:r.position(),y=r.paddedWidth(),C=r.paddedHeight(),E=y/2,x=C/2,_=r.pstyle("background-gradient-direction").value;switch(_){case"to-bottom":i=t.createLinearGradient(w.x,w.y-x,w.x,w.y+x);break;case"to-top":i=t.createLinearGradient(w.x,w.y+x,w.x,w.y-x);break;case"to-left":i=t.createLinearGradient(w.x+E,w.y,w.x-E,w.y);break;case"to-right":i=t.createLinearGradient(w.x-E,w.y,w.x+E,w.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(w.x-E,w.y-x,w.x+E,w.y+x);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(w.x-E,w.y+x,w.x+E,w.y-x);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(w.x+E,w.y-x,w.x-E,w.y+x);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(w.x+E,w.y+x,w.x-E,w.y-x);break}}if(!i)return null;for(var S=l.length===s.length,I=s.length,k=0;k<I;k++)i.addColorStop(S?l[k]:k/(I-1),"rgba("+s[k][0]+","+s[k][1]+","+s[k][2]+","+a+")");return i};Pt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Pt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Pt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Pt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Pt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Pt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Pt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=r.canvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=r.bufferCanvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}};Pt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Pt.render=function(t){t=t||pf();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,i=t.forcedPan,o=this,s=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=o.cy,u=o.data,c=u.canvasNeedsRedraw,f=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),d=t.motionBlur!==void 0?t.motionBlur:o.motionBlur,v=o.motionBlurPxRatio,h=l.hasCompoundNodes(),p=o.hoverData.draggingEles,m=!!(o.hoverData.selecting||o.touchData.selecting);d=d&&!e&&o.motionBlurEnabled&&!m;var g=d;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),d&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(g=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!f&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var b=l.style(),w=l.zoom(),y=a!==void 0?a:w,C=l.pan(),E={x:C.x,y:C.y},x={zoom:w,pan:{x:C.x,y:C.y}},_=o.prevViewport,S=_===void 0||x.zoom!==_.zoom||x.pan.x!==_.pan.x||x.pan.y!==_.pan.y;!S&&!(p&&!h)&&(o.motionBlurPxRatio=1),i&&(E=i),y*=s,E.x*=s,E.y*=s;var I=o.getCachedZSortedEles();function k(le,re,ne,Z,X){var ue=le.globalCompositeOperation;le.globalCompositeOperation="destination-out",o.colorFillStyle(le,255,255,255,o.motionBlurTransparency),le.fillRect(re,ne,Z,X),le.globalCompositeOperation=ue}function T(le,re){var ne,Z,X,ue;!o.clearingMotionBlur&&(le===u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||le===u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(ne={x:C.x*v,y:C.y*v},Z=w*v,X=o.canvasWidth*v,ue=o.canvasHeight*v):(ne=E,Z=y,X=o.canvasWidth,ue=o.canvasHeight),le.setTransform(1,0,0,1,0,0),re==="motionBlur"?k(le,0,0,X,ue):!e&&(re===void 0||re)&&le.clearRect(0,0,X,ue),r||(le.translate(ne.x,ne.y),le.scale(Z,Z)),i&&le.translate(i.x,i.y),a&&le.scale(a,a)}if(f||(o.textureDrawLastFrame=!1),f){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var P=o.data.bufferContexts[o.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:P,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var x=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var A=u.contexts[o.NODE],B=o.textureCache.texture,x=o.textureCache.viewport;A.setTransform(1,0,0,1,0,0),d?k(A,0,0,x.width,x.height):A.clearRect(0,0,x.width,x.height);var L=b.core("outside-texture-bg-color").value,N=b.core("outside-texture-bg-opacity").value;o.colorFillStyle(A,L[0],L[1],L[2],N),A.fillRect(0,0,x.width,x.height);var w=l.zoom();T(A,!1),A.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s),A.drawImage(B,x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var H=l.extent(),W=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),F=o.hideEdgesOnViewport&&W,D=[];if(D[o.NODE]=!c[o.NODE]&&d&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,D[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),D[o.DRAG]=!c[o.DRAG]&&d&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,D[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||r||n||D[o.NODE]){var R=d&&!D[o.NODE]&&v!==1,A=e||(R?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),O=d&&!R?"motionBlur":void 0;T(A,O),F?o.drawCachedNodes(A,I.nondrag,s,H):o.drawLayeredElements(A,I.nondrag,s,H),o.debug&&o.drawDebugPoints(A,I.nondrag),!r&&!d&&(c[o.NODE]=!1)}if(!n&&(c[o.DRAG]||r||D[o.DRAG])){var R=d&&!D[o.DRAG]&&v!==1,A=e||(R?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]);T(A,d&&!R?"motionBlur":void 0),F?o.drawCachedNodes(A,I.drag,s,H):o.drawCachedElements(A,I.drag,s,H),o.debug&&o.drawDebugPoints(A,I.drag),!r&&!d&&(c[o.DRAG]=!1)}if(o.showFps||!n&&c[o.SELECT_BOX]&&!r){var A=e||u.contexts[o.SELECT_BOX];if(T(A),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var w=o.cy.zoom(),$=b.core("selection-box-border-width").value/w;A.lineWidth=$,A.fillStyle="rgba("+b.core("selection-box-color").value[0]+","+b.core("selection-box-color").value[1]+","+b.core("selection-box-color").value[2]+","+b.core("selection-box-opacity").value+")",A.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),$>0&&(A.strokeStyle="rgba("+b.core("selection-box-border-color").value[0]+","+b.core("selection-box-border-color").value[1]+","+b.core("selection-box-border-color").value[2]+","+b.core("selection-box-opacity").value+")",A.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){var w=o.cy.zoom(),V=u.bgActivePosistion;A.fillStyle="rgba("+b.core("active-bg-color").value[0]+","+b.core("active-bg-color").value[1]+","+b.core("active-bg-color").value[2]+","+b.core("active-bg-opacity").value+")",A.beginPath(),A.arc(V.x,V.y,b.core("active-bg-size").pfValue/w,0,2*Math.PI),A.fill()}var q=o.lastRedrawTime;if(o.showFps&&q){q=Math.round(q);var z=Math.round(1e3/q);A.setTransform(1,0,0,1,0,0),A.fillStyle="rgba(255, 0, 0, 0.75)",A.strokeStyle="rgba(255, 0, 0, 0.75)",A.lineWidth=1,A.fillText("1 frame = "+q+" ms = "+z+" fps",0,20);var K=60;A.strokeRect(0,30,250,20),A.fillRect(0,30,250*Math.min(z/K,1),20)}r||(c[o.SELECT_BOX]=!1)}if(d&&v!==1){var te=u.contexts[o.NODE],J=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],ie=u.contexts[o.DRAG],ve=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Ee=function(re,ne,Z){re.setTransform(1,0,0,1,0,0),Z||!g?re.clearRect(0,0,o.canvasWidth,o.canvasHeight):k(re,0,0,o.canvasWidth,o.canvasHeight);var X=v;re.drawImage(ne,0,0,o.canvasWidth*X,o.canvasHeight*X,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||D[o.NODE])&&(Ee(te,J,D[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||D[o.DRAG])&&(Ee(ie,ve,D[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=x,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),d&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!f,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},Kw)),e||l.emit("render")};var Pr={};Pr.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+o*i[l*2],r+s*i[l*2+1]);t.closePath()};Pr.drawRoundPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2,l=Gs(n,a);t.beginPath&&t.beginPath();for(var u=0;u<i.length/4;u++){var c=void 0,f=void 0;u===0?c=i.length-2:c=u*4-2,f=u*4+2;var d=e+o*i[u*4],v=r+s*i[u*4+1],h=-i[c]*i[f]-i[c+1]*i[f+1],p=l/Math.tan(Math.acos(h)/2),m=d-p*i[c],g=v-p*i[c+1],b=d+p*i[f],w=v+p*i[f+1];u===0?t.moveTo(m,g):t.lineTo(m,g),t.arcTo(d,v,b,w,l)}t.closePath()};Pr.drawRoundRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=Ba(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+i,r-o,e+i,r,s),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.arcTo(e-i,r-o,e,r-o,s),t.lineTo(e,r-o),t.closePath()};Pr.drawBottomRoundRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=Ba(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+i,r-o),t.lineTo(e+i,r),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.lineTo(e-i,r-o),t.lineTo(e,r-o),t.closePath()};Pr.drawCutRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=Cf();t.beginPath&&t.beginPath(),t.moveTo(e-i+s,r-o),t.lineTo(e+i-s,r-o),t.lineTo(e+i,r-o+s),t.lineTo(e+i,r+o-s),t.lineTo(e+i-s,r+o),t.lineTo(e-i+s,r+o),t.lineTo(e-i,r+o-s),t.lineTo(e-i,r-o+s),t.closePath()};Pr.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=r-o,c=r+o,f=rs(n,a),d=f.widthOffset,v=f.heightOffset,h=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,u+v),t.lineTo(s,c-v),t.quadraticCurveTo(s+h,c,s+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-h,c,l,c-v),t.lineTo(l,u+v),t.quadraticCurveTo(l-h,u,l-d,u),t.lineTo(s+d,u),t.quadraticCurveTo(s+h,u,s,u+v),t.closePath()};var Ru=Math.sin(0),Nu=Math.cos(0),cs={},fs={},mh=Math.PI/40;for(var fn=0*Math.PI;fn<2*Math.PI;fn+=mh)cs[fn]=Math.sin(fn),fs[fn]=Math.cos(fn);Pr.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=mh)i=e-s*cs[u]*Ru+s*fs[u]*Nu,o=r+l*fs[u]*Ru+l*cs[u]*Nu,u===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var $a={};$a.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};$a.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=he(t.maxWidth)||he(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,u=t.scale;else if(s){var c=1/0,f=1/0;he(t.maxWidth)&&(c=u*t.maxWidth/i),he(t.maxHeight)&&(f=u*t.maxHeight/o),u=Math.min(c,f),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var d=document.createElement("canvas");d.width=i,d.height=o,d.style.width=i+"px",d.style.height=o+"px";var v=d.getContext("2d");if(i>0&&o>0){v.clearRect(0,0,i,o),v.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)v.translate(-n.x1*u,-n.y1*u),v.scale(u,u),this.drawElements(v,h),v.scale(1/u,1/u),v.translate(n.x1*u,n.y1*u);else{var p=e.pan(),m={x:p.x*u,y:p.y*u};u*=e.zoom(),v.translate(m.x,m.y),v.scale(u,u),this.drawElements(v,h),v.scale(1/u,1/u),v.translate(-m.x,-m.y)}t.bg&&(v.globalCompositeOperation="destination-over",v.fillStyle=t.bg,v.rect(0,0,i,o),v.fill())}return d};function Yw(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function zu(t){var e=t.indexOf(",");return t.substr(e+1)}function yh(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new $n(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return Yw(zu(n()),r);case"base64":return zu(n());case"base64uri":default:return n()}}$a.png=function(t){return yh(t,this.bufferCanvasImage(t),"image/png")};$a.jpg=function(t){return yh(t,this.bufferCanvasImage(t),"image/jpeg")};var bh={};bh.nodeShapeImpl=function(t,e,r,n,a,i,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var jw=wh,Le=wh.prototype;Le.CANVAS_LAYERS=3;Le.SELECT_BOX=0;Le.DRAG=1;Le.NODE=2;Le.BUFFER_COUNT=3;Le.TEXTURE_BUFFER=0;Le.MOTIONBLUR_BUFFER_NODE=1;Le.MOTIONBLUR_BUFFER_DRAG=2;function wh(t){var e=this;e.data={canvases:new Array(Le.CANVAS_LAYERS),contexts:new Array(Le.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Le.CANVAS_LAYERS),bufferCanvases:new Array(Le.BUFFER_COUNT),bufferContexts:new Array(Le.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=t.cy.container();i.appendChild(e.data.canvasContainer),i.style[r]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Dm()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<Le.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(q){l.style[q]=o[q]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(Le.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Le.NODE].setAttribute("data-id","layer"+Le.NODE+"-node"),e.data.canvases[Le.SELECT_BOX].setAttribute("data-id","layer"+Le.SELECT_BOX+"-selectbox"),e.data.canvases[Le.DRAG].setAttribute("data-id","layer"+Le.DRAG+"-drag");for(var s=0;s<Le.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=It(),c=function(z){return{x:(z.x1+z.x2)/2,y:(z.y1+z.y2)/2}},f=function(z){return{x:-z.w/2,y:-z.h/2}},d=function(z){var K=z[0]._private,te=K.oldBackgroundTimestamp===K.backgroundTimestamp;return!te},v=function(z){return z[0]._private.nodeKey},h=function(z){return z[0]._private.labelStyleKey},p=function(z){return z[0]._private.sourceLabelStyleKey},m=function(z){return z[0]._private.targetLabelStyleKey},g=function(z,K,te,J,ie){return e.drawElement(z,K,te,!1,!1,ie)},b=function(z,K,te,J,ie){return e.drawElementText(z,K,te,J,"main",ie)},w=function(z,K,te,J,ie){return e.drawElementText(z,K,te,J,"source",ie)},y=function(z,K,te,J,ie){return e.drawElementText(z,K,te,J,"target",ie)},C=function(z){return z.boundingBox(),z[0]._private.bodyBounds},E=function(z){return z.boundingBox(),z[0]._private.labelBounds.main||u},x=function(z){return z.boundingBox(),z[0]._private.labelBounds.source||u},_=function(z){return z.boundingBox(),z[0]._private.labelBounds.target||u},S=function(z,K){return K},I=function(z){return c(C(z))},k=function(z,K,te){var J=z?z+"-":"";return{x:K.x+te.pstyle(J+"text-margin-x").pfValue,y:K.y+te.pstyle(J+"text-margin-y").pfValue}},T=function(z,K,te){var J=z[0]._private.rscratch;return{x:J[K],y:J[te]}},P=function(z){return k("",T(z,"labelX","labelY"),z)},A=function(z){return k("source",T(z,"sourceLabelX","sourceLabelY"),z)},B=function(z){return k("target",T(z,"targetLabelX","targetLabelY"),z)},L=function(z){return f(C(z))},N=function(z){return f(x(z))},H=function(z){return f(_(z))},W=function(z){var K=E(z),te=f(E(z));if(z.isNode()){switch(z.pstyle("text-halign").value){case"left":te.x=-K.w;break;case"right":te.x=0;break}switch(z.pstyle("text-valign").value){case"top":te.y=-K.h;break;case"bottom":te.y=0;break}}return te},F=e.data.eleTxrCache=new aa(e,{getKey:v,doesEleInvalidateKey:d,drawElement:g,getBoundingBox:C,getRotationPoint:I,getRotationOffset:L,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),D=e.data.lblTxrCache=new aa(e,{getKey:h,drawElement:b,getBoundingBox:E,getRotationPoint:P,getRotationOffset:W,isVisible:S}),R=e.data.slbTxrCache=new aa(e,{getKey:p,drawElement:w,getBoundingBox:x,getRotationPoint:A,getRotationOffset:N,isVisible:S}),O=e.data.tlbTxrCache=new aa(e,{getKey:m,drawElement:y,getBoundingBox:_,getRotationPoint:B,getRotationOffset:H,isVisible:S}),$=e.data.lyrTxrCache=new dh(e);e.onUpdateEleCalcs(function(z,K){F.invalidateElements(K),D.invalidateElements(K),R.invalidateElements(K),O.invalidateElements(K),$.invalidateElements(K);for(var te=0;te<K.length;te++){var J=K[te]._private;J.oldBackgroundTimestamp=J.backgroundTimestamp}});var V=function(z){for(var K=0;K<z.length;K++)$.enqueueElementRefinement(z[K].ele)};F.onDequeue(V),D.onDequeue(V),R.onDequeue(V),O.onDequeue(V)}Le.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Le.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Le.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Le.SELECT_BOX]=e;break}};var Xw=typeof Path2D!="undefined";Le.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Le.usePaths=function(){return Xw&&this.pathsEnabled};Le.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Le.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Le.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas=="undefined"?"undefined":et(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r};[vh,ir,gr,rl,on,Un,Pt,Pr,$a,bh].forEach(function(t){_e(Le,t)});var Zw=[{name:"null",impl:ah},{name:"base",impl:fh},{name:"canvas",impl:jw}],Qw=[{type:"layout",extensions:iw},{type:"renderer",extensions:Zw}],xh={},Eh={};function Ch(t,e,r){var n=r,a=function(_){Fe("Can not register `"+e+"` for `"+t+"` since `"+_+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Ta.prototype[e])return a(e);Ta.prototype[e]=r}else if(t==="collection"){if(ft.prototype[e])return a(e);ft.prototype[e]=r}else if(t==="layout"){for(var i=function(_){this.options=_,r.call(this,_),Oe(this._private)||(this._private={}),this._private.cy=_.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var x=this.options;if(x&&x.animate){var _=this.animations;if(_)for(var S=0;S<_.length;S++)_[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(_){return _._private.cy},d={addEventFields:function(_,S){S.layout=_,S.cy=f(_),S.target=_},bubble:function(){return!0},parent:function(_){return f(_)}};_e(o,{createEmitter:function(){return this._private.emitter=new to(d,this),this},emitter:function(){return this._private.emitter},on:function(_,S){return this.emitter().on(_,S),this},one:function(_,S){return this.emitter().one(_,S),this},once:function(_,S){return this.emitter().one(_,S),this},removeListener:function(_,S){return this.emitter().removeListener(_,S),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(_,S){return this.emitter().emit(_,S),this}}),Re.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var v=Sh("renderer","base"),h=v.prototype,p=r,m=r.prototype,g=function(){v.apply(this,arguments),p.apply(this,arguments)},b=g.prototype;for(var w in h){var y=h[w],C=m[w]!=null;if(C)return a(w);b[w]=y}for(var E in m)b[E]=m[E];h.clientFunctions.forEach(function(x){b[x]=b[x]||function(){je("Renderer does not implement `renderer."+x+"()` on its prototype")}}),n=g}else if(t==="__proto__"||t==="constructor"||t==="prototype")return je(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return of({map:xh,keys:[t,e],value:n})}function Sh(t,e){return sf({map:xh,keys:[t,e]})}function Jw(t,e,r,n,a){return of({map:Eh,keys:[t,e,r,n],value:a})}function e1(t,e,r,n){return sf({map:Eh,keys:[t,e,r,n]})}var hs=function(){if(arguments.length===2)return Sh.apply(null,arguments);if(arguments.length===3)return Ch.apply(null,arguments);if(arguments.length===4)return e1.apply(null,arguments);if(arguments.length===5)return Jw.apply(null,arguments);je("Invalid extension access syntax")};Ta.prototype.extension=hs;Qw.forEach(function(t){t.extensions.forEach(function(e){Ch(t.type,e.name,e.impl)})});var _h=function t(){if(!(this instanceof t))return new t;this.length=0},Qr=_h.prototype;Qr.instanceString=function(){return"stylesheet"};Qr.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Qr.css=function(t,e){var r=this.length-1;if(Se(t))this[r].properties.push({name:t,value:e});else if(Oe(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=pt.properties[o]||pt.properties[Xi(o)];if(l!=null){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this};Qr.style=Qr.css;Qr.generateStyle=function(t){var e=new pt(t);return this.appendToStyle(e)};Qr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var t1="3.21.1",Jr=function(e){if(e===void 0&&(e={}),Oe(e))return new Ta(e);if(Se(e))return hs.apply(hs,arguments)};Jr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Jr),t.apply(null,e),this};Jr.warnings=function(t){return df(t)};Jr.version=t1;Jr.stylesheet=Jr.Stylesheet=_h;var uo=Jr,vn=(t=>(t[t.IN=0]="IN",t[t.OUT=1]="OUT",t[t.BOTH=2]="BOTH",t))(vn||{});class ze{constructor(e){$e(this,"cy");$e(this,"selectedNode",null);$e(this,"starMode",!1);$e(this,"matchComponents",[]);$e(this,"pathSource",null);$e(this,"container");$e(this,"instancesLoaded",!1);$e(this,"menu",null);const r=Bn("graph-init");this.container=e,this.container.style.backgroundColor="black",this.cy=uo({container:e,style:yo.style.concat(wl),wheelSensitivity:.3,minZoom:.02,maxZoom:7}),this.cy.on("select","node",a=>{this.selectedNode=a.target});const n=["resetStyle","presentUri","showPath","showStar","showWorm","showDoubleStar","combineMatch","showCloseMatch","subOntologyConnectivity","newGraph"];for(const a of n)this[a]=this[a].bind(this);r.stop()}cumulativeSearch(){return(document.getElementById("cumulativeSearchBox")||{}).checked}static setVisible(e,r=!0){if(r)e.removeClass("hidden");else{e.addClass("hidden"),e.removeClass("highlighted");const n=e.nodes().connectedEdges();n.addClass("hidden"),n.removeClass("highlighted")}}static starStyle(e){e.removeClass("hidden"),e.select()}resetStyle(){this.starMode=!1,this.cy.startBatch(),this.cy.elements().removeClass("highlighted"),this.cy.elements().removeClass("starmode"),this.cy.elements().removeClass("hidden"),this.cy.endBatch()}showPath(e,r){return n=>{if(!n)return se.error("No path source."),!1;if(n===e)return se.warn(`Path source ${n.data(xe.ID)} equals target.`),!1;const a=this.cy.elements(".unfiltered"),o=a.aStar({root:n,goal:e}).path;if(o){if(this.cy.startBatch(),this.cy.add(o),r){const s=o.connectedEdges(".unfiltered");o.merge(s),o.merge(s.connectedNodes(".unfiltered"))}ze.starStyle(o),this.starMode?o.select():(this.starMode=!0,ze.setVisible(a.not(o),!1)),this.cy.endBatch()}else return this.starMode||this.resetStyle(),se.warn("No path found!"),!1;return!0}}showStarMultiplexed(e=!1,r){return this.multiplex(n=>this.showStar(n,e,r),void 0,!0)}async showStarMultiplexedNew(e=!1,r){const n=await this.newGraph();return i=>(n.multiplex(o=>n.showStar(n.assimilateNodes(o),e,r),n.assimilateNodes(this.cy.nodes(":selected")),!0)(i),n)}showStar(e,r=!1,n){console.log("center",e),this.cy.startBatch();let a=e,i;for(let f=0;f<a.size();)f=a.size(),i=a.connectedEdges(".unfiltered").filter('[pl="closeMatch"]'),a=a.union(i.connectedNodes(".unfiltered"));let o;switch(n){case 0:o=this.cy.elements(".unfiltered").edgesTo(a);break;case 1:o=a.edgesTo(".unfiltered");break;default:o=a.connectedEdges(".unfiltered")}const s=o.connectedNodes(".unfiltered"),l=a.union(s).union(o);l.merge(l.parent()),l.merge(l.children());const u=s.difference(a);(r||!this.starMode)&&(this.starMode=!0,ze.setVisible(this.cy.elements().not(l),!1)),console.log("star",l),ze.starStyle(l),r&&s.sort((d,v)=>{const h=Math.min(d.edgesTo(a).map(m=>m.data("pl").split("").reduce((g,b)=>g+b.charCodeAt(0),0))),p=Math.min(v.edgesTo(a).map(m=>m.data("pl").split("").reduce((g,b)=>g+b.charCodeAt(0),0)));return h-p}).layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:175,concentric:function(d){if(a.contains(d))return 2;if(u.contains(d))return 1;throw new Error("unexpected node in star")}}).run(),this.cy.endBatch(),ze.setVisible(u.edgesWith(this.cy.nodes(".unfiltered").not(".hidden")));const c=this.cy.nodes(":visible");c.size()<100&&this.cy.fit(c,100)}showWorm(e){return this.showPath(e)?(this.showStar(e),!0):!1}showDoubleStar(e){const r=this.getSource();return this.showPath(e)?(this.showStar(e),this.showStar(r),!0):!1}assimilate(e){return this.getElementsByIds(e.map(r=>r.id()))}assimilateNodes(e){return this.getElementsByIds(e.map(r=>r.id()))}getElementsByIds(e){const r=this.cy.collection();for(const n of e){const a=this.cy.getElementById(n);r.merge(a)}return r}getSource(){return this.pathSource?this.pathSource:this.selectedNode?(se.debug("Path source not set, using selected node"),this.selectedNode):null}setSource(e){return se.debug("Setting path source to "+e.data(xe.ID)),e?e.length!==1?(se.error("Invalid source. Length != 1"),!1):(this.pathTarget&&this.cy.resize(),this.pathSource&&this.pathSource.removeClass("source"),this.pathSource===e?(se.info("Toggling path source off."),this.pathSource=null,!0):(this.pathSource=e,this.pathSource.addClass("source"),!0)):!1}invert(e){e?(this.container.style.backgroundColor="white",this.cy.style().fromJson(yo.style.concat(jd)).update()):(this.container.style.backgroundColor="black",this.cy.style().fromJson(yo.style.concat(wl)).update())}presentUri(e){this.cy.zoom(.6);const r=this.cy.elements().nodes().filter(`node[id= "${e}"]`);if(r.length<1)return se.warn(`Node not in graph. ${e} may be available on the SPARQL endpoint but not in the graph.`),!1;const n=r[0];return n.hasClass("filtered")?(se.warn(`Node is filtered out. ${e} is not visible. Please adjust filters.`),!1):(n.hasClass("hidden")&&(se.debug(`Node is hidden. Unhiding ${e}.`),ze.setVisible(n,!0),ze.setVisible(n.edgesWith(this.cy.nodes(":visible")),!0)),this.starMode||this.cumulativeSearch()||this.resetStyle(),this.cy.elements().unselect(),n.select(),this.cy.center(n),!0)}presentUris(e,r=!1){if(e.length<1)return se.warn("All search results are only available on the SPARQL endpoint but not in the graph."),!1;this.cumulativeSearch()||this.resetStyle();const n=this.cy.elements().nodes().filter(a=>e.includes(a.data(xe.ID)));return r&&(ze.setVisible(this.cy.elements(),!1),ze.setVisible(n.edgesTo(n),!0),this.starMode=!0),this.cy.elements().unselect(),n.select(),n.edgesTo(n).select(),this.cy.fit(this.cy.elements(":selected")),!0}multiplex(e,r,n){return a=>{const i=this.cy.nodes(":selected");let o=r;if(!r&&i.size()>1&&(o=i),o)if(a&&(o=o.union(a)),se.debug("multiplexing of "+o.size()+" elements (direct="+n+")"),n)e(o);else for(let s=0;s<o.length;s++)e(o[s]);else e(a)}}createRemoveIssue(e){this.cy.remove(e);const r=wn(e.data(xe.ID));Bd(e.data(xe.ID)).then(n=>{const a=`Please permanently delete the class ${r}:
            \`\`\`

            sparql
            # WARNING: THIS WILL DELETE ALL TRIPLES THAT CONTAIN THE CLASS ${r} FROM THE GRAPH AS EITHER SUBJECT OR OBJECT
            # ALWAYS CREATE A BACKUP BEFORE THIS OPERATION AS A MISTAKE MAY DELETE THE WHOLE GRAPH.
            # THERE MAY BE DATA LEFT OVER IN OTHER GRAPHS, SUCH AS <http://www.snik.eu/ontology/limes-exact> or <http://www.snik.eu/ontology/match>.
            # THERE MAY BE LEFTOVER DATA IN AXIOMS OR ANNOTATIONS, CHECK THE UNDO DATA FOR SUCH THINGS.

            DELETE DATA FROM <${Si(e.data(xe.ID))}>
            {
              {<${e.data(xe.ID)}> ?p ?y.} UNION {?x ?p <${e.data(xe.ID)}>.}
            }
            
\`\`\`
            **Warning: Restoring a class with the following triples is not guaranteed to work and may have unintended consequences if other edits occur between the deletion and restoration.
            This only contains the triples from graph ${Si(e.data(xe.ID))}.**

            Undo based on these triples:
            \`\`\`

            ${n}
            
\`\`\`
            ${Qo.SPARUL_WARNING}`;window.open("https://github.com/IMISE/snik-ontology/issues/new?title="+encodeURIComponent("Remove class "+r)+"&body="+encodeURIComponent(a))})}moveAllMatches(e){for(let r=0;r<this.matchComponents.length;r++){const n=this.matchComponents[r];n.length!==1&&this.moveNodes(n.nodes(),e)}}moveNodes(e,r){e.positions(e[0].position());for(let n=1;n<e.length;n++)e[n].shift({x:r*Math.cos(2*Math.PI*n/(e.length-1)),y:r*Math.sin(2*Math.PI*n/(e.length-1))})}async combineMatch(e){await da(()=>{if(!e){this.cy.startBatch(),this.cy.nodes(":child").move({parent:null}),this.cy.nodes("[id ^= 'parent']").remove(),this.matchComponents.length=0,this.cy.endBatch();return}this.cy.startBatch();const r=this.cy.edges('[pl="closeMatch"]').filter(".unfiltered").not(".hidden"),n=this.cy.nodes(".unfiltered").not(".hidden").union(r);!this.moveMatchNotified&&this.cy.nodes(":visible").size()>1e3&&(se.info("Combining Matches. Consider using Move Matches Nearby or Move Matches on top of each other."),this.moveMatchNotified=!0),this.matchComponents.length=0,this.matchComponents.push(...n.components());for(let a=0;a<this.matchComponents.length;a++){const i=this.matchComponents[a];if(i.length===1)continue;const o="parent"+a,s={};let l=i.nodes();for(let f=0;f<l.length;f++){const d=l[f].data("l");for(const v in d)s[v]||(s[v]=new Set),d[v].forEach(h=>s[v].add(h))}for(const f in s)s[f]=[[...s[f]].reduce((d,v)=>d+", "+v)];const u=["bb","ob","he","it4it","ciox"],c=f=>{let d=u.indexOf(f);return d===-1&&(d=99),d};l=l.sort((f,d)=>c(f.data(xe.SOURCE))-c(d.data(xe.SOURCE))),this.cy.add({group:"nodes",data:{id:o,l:s}});for(let f=0;f<l.length;f++)l[f].move({parent:o})}this.cy.endBatch()})}showCloseMatch(e){const r=e.connectedEdges(".unfiltered").filter('[pl="closeMatch"]'),n=r.connectedNodes(".unfiltered");se.debug(`Showing close matches of ${e.length} nodes ${JSON.stringify(e.map(i=>i.id()))}.
Results: ${JSON.stringify(n.map(i=>i.id()))}`);const a=n.union(r);ze.setVisible(a,!0),ze.starStyle(a)}subOntologyConnectivity(){Kt.show("subontology-connectivity");const e=document.getElementById("subontology-connectivity-form");e.listener||(e.listener=async r=>{r.preventDefault(),Kt.close("subontology-connectivity");const n=new be;await n.initialized;const a=[e[0].value,e[1].value];se.debug(`Showing connectivity between the subontologies ${a[0]} and ${a[1]}.`);const i=a.map(l=>n.state.cy.nodes(`[source="${l}"]`)),s=i[0].edgesWith(i[1]).connectedNodes();ze.setVisible(n.state.cy.elements(),!1),ze.setVisible(s,!0),ze.setVisible(s.edgesWith(s),!0),s.layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:60,concentric:function(l){return i[0].contains(l)?2:1}}).run()},e.addEventListener("submit",e.listener))}async newGraph(e){if(this!==be.mainView.state.graph)return this;const r=new be(!0,e);return await r.initialized,r.state.graph}}let r1=0;async function n1(t,e){const r={R:["meta:Role","meta:Function","meta:EntityType"],F:["meta:Function","meta:Role","meta:EntityType"],E:["meta:EntityType","meta:Function","meta:Role"]};if(!(e in r)){se.error("Unknown subtop '"+e+"'. Cannot display class use.");return}const[n,a,i]=r[e],o=`select distinct ?inner ?middle ?outer ?outerx
    {
      <${t}> (rdfs:subClassOf|skos:closeMatch|^skos:closeMatch)* ?inner.
      ?inner rdf:type ${n}.
      OPTIONAL
      {
        ?inner ?p ?middle.
        ?middle rdf:type ${a}.
        OPTIONAL
        {
          ?middle ?q ?outer.
          ?outer rdf:type ${i}.
          OPTIONAL {?outer (skos:closeMatch|^skos:closeMatch|^rdfs:subClassOf)+ ?outerx.}
        }
      }
    }`,s=await vr(o),[l,u,c,f]=[...new Array(4)].map(()=>new Set);for(let y=0;y<s.length;y++)l.add(s[y].inner.value),s[y].middle&&u.add(s[y].middle.value),s[y].outer&&c.add(s[y].outer.value),s[y].outerx&&f.add(s[y].outerx.value);if(u.size===0){se.warn("Class "+t+" is not used.");return}const v=document.getElementById("combineMatchModeBox").checked;v&&be.mainView.state.graph.combineMatch(!1);const h=new be(!0,"Class Use "+ ++r1+" "+wn(t));await h.initialized;const p=h.state.graph;p.cy.startBatch(),p.resetStyle(),ze.setVisible(p.cy.elements(),!1),p.starMode=!0;const m=new Set([...l,...u,...c,...f]),g=p.cy.collection(`node[id='${t}']`);for(const y of m){const C=p.cy.nodes(`node[id='${y}']`);g.merge(C)}const b=g.merge(g.edgesWith(g));g.layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:20,concentric:function(y){const C=y.data(xe.ID);return C===t?10:l.has(C)?9:u.has(C)?8:c.has(C)?7:f.has(C)?6:10}}).run(),ze.setVisible(b,!0),v&&[be.mainView,h].forEach(y=>y.state.graph.combineMatch(!0));const w=p.cy.nodes(`node[id='${t}']`);p.cy.center(w),p.cy.fit(g),p.cy.endBatch()}const No=t=>e=>t(e.target);function a1(t){return[{content:"compound",id:"compound",selector:"node:compound",submenu:[{content:"open",id:"open",onClickFunction:e=>{e.target.children().move({event:null}),t.cy.remove(e.target)}},{content:"move matches on top of each other",id:"move-match-on-top",onClickFunction:e=>t.moveNodes(e.target.children(),0)},{content:"move matches nearby",id:"move-match-nearby",onClickFunction:e=>t.moveNodes(e.target.children(),100)},{content:"star",id:"compound-star",onClickFunction:e=>t.multiplex(t.showStar,e.target.children(),!0)()},{content:"incoming star",id:"compound-incoming-star",onClickFunction:e=>t.multiplex(r=>t.showStar(r,!1,vn.IN),e.target.children(),!0)()},{content:"outgoing star",id:"compound-outgoing-star",onClickFunction:e=>t.multiplex(r=>t.showStar(r,!1,vn.OUT),e.target.children(),!0)()},{content:"set as path source",id:"compound-path-source",onClickFunction:e=>{t.setSource(e.target.children()[0])}}]},{content:"edit/report",id:"edit",selector:"node",onClickFunction:e=>{const r=e.target,n=`Problem with the class [${wn(r.data(xe.ID))}](${r.data(xe.ID)}) ([OntoWiki URL](${Aa.ontoWikiUrl(r.data(xe.ID))})):

`;ia(pi,r.data(xe.ID),n)}},{content:"class use",id:"class-use",selector:"node",onClickFunction:e=>{const r=e.target;n1(r.data(xe.ID),r.data(xe.SUBTOP))}},{content:"hide",id:"hide",selector:"node",onClickFunction:No(t.multiplex(e=>ze.setVisible(e,!1)))},{content:"set as path source",id:"set-path-source",selector:"node",onClickFunction:e=>{t.setSource(e.target)}},{content:"description",id:"description",selector:"node",onClickFunction:e=>{window.open(e.target.data(xe.ID))}},{content:"star",id:"star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,vn.BOTH))(e.target)}},{content:"incoming star",id:"incoming-star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,vn.IN))(e.target)}},{content:"outgoing star",id:"outgoing-star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,vn.OUT))(e.target)}},{content:"path",id:"path",selector:"node",onClickFunction:e=>t.multiplex(t.showPath(e.target))(t.getSource())},{content:"spiderworm",id:"spiderworm",selector:"node",onClickFunction:No(t.multiplex(t.showWorm))},{content:"developer",id:"dev",selector:"node",submenu:[{content:"remove permanently",id:"remove-permanently",selector:"node",onClickFunction:e=>t.createRemoveIssue(e.target)},{content:"OntoWiki",id:"ontowiki",selector:"node",onClickFunction:e=>window.open(Aa.ontoWikiUrl(e.target.data(xe.ID)))},{content:"debug",id:"debug",selector:"node",onClickFunction:e=>alert(JSON.stringify(e.target.data(),null,2))}]},{content:"extended",id:"ext",selector:"node",submenu:[{content:"doublestar",id:"doublestar",selector:"node",onClickFunction:e=>t.multiplex(t.showDoubleStar)(e.target)},{content:"starpath",id:"starpath",selector:"node",onClickFunction:e=>t.multiplex(t.showPath(e.target,!0))(t.getSource())},{content:"circle star",id:"circlestar",selector:"node",onClickFunction:e=>{t.showStar(e.target,!0)}},{content:"LodLive",id:"lodlive",selector:"node",onClickFunction:e=>{window.open("http://en.lodlive.it/?"+e.target.data(xe.ID))}},{content:"move all selected here",id:"move-selected",selector:"node",onClickFunction:e=>{t.cy.nodes(":selected").positions(()=>e.target.position())}},{content:"close matches",id:"close-match",selector:"node",onClickFunction:No(t.multiplex(t.showCloseMatch,void 0,!0))},{content:"show instances",id:"show-instances",onClickFunction:async e=>{const n=e.target.data(xe.ID),a=`SELECT ?i STR(SAMPLE(?label)) AS ?l {
        ?i a <${n}>
        OPTIONAL {?i rdfs:label ?label. FILTER(LANGMATCHES(LANG(?label),"${Tc()}"))}
        }`;let o=(await vr(a)).map(s=>s.i.value+" "+(s.l?s.l.value:"")).reduce((s,l)=>s+`
`+l,"");o===""&&(o=`Class ${n} does not have any instances.`),alert(o)}}]}]}function hn(t){return wn(t.data(Me.SOURCE))+" "+wn(t.data(Me.PROPERTY))+" "+wn(t.data(Me.TARGET))}function i1(t){return[{content:"edit / report",id:"edge-edit",selector:"edge",onClickFunction:r=>{const n=r.target,a=`Problem with the edge [${hn(n)}](${n.data(Me.SOURCE)}) ([OntoWiki URL](${Aa.ontoWikiUrl(n.data(Me.SOURCE))})):

`;ia(pi,hn(n),a)}},{content:"hide",id:"edge-hide",selector:"edge",onClickFunction:r=>ze.setVisible(r.target,!1)},{content:"description (if it exists)",id:"edge-description",selector:"edge",onClickFunction:r=>{const n=r.target;n.data(Me.AXIOM)?window.open(n.data(Me.AXIOM)):se.warn("There is no description for this edge.")}},{content:"confirm link",id:"edge-confirm-link",selector:"edge",onClickFunction:r=>{const n=r.target;n.data(Me.GRAPH,"http://www.snik.eu/ontology/match");const a=`Please confirm the automatic interlink ${hn(n)}:
					\`\`\`

					sparql
					DELETE DATA FROM <http://www.snik.eu/ontology/limes-exact>
					{<${n.data(Me.SOURCE)}> <${n.data(Me.PROPERTY)}> <${n.data(Me.TARGET)}>.}
					INSERT DATA INTO <http://www.snik.eu/ontology/match>
					{<${n.data(Me.SOURCE)}> <${n.data(Me.PROPERTY)}> <${n.data(Me.TARGET)}>.}
					
\`\`\`
					Undo with
					\`\`\`

					sparql
					DELETE DATA FROM <http://www.snik.eu/ontology/match>
					{<${n.data(Me.SOURCE)}> <${n.data(Me.PROPERTY)}> <${n.data(Me.TARGET)}>.}
					INSERT DATA INTO <http://www.snik.eu/ontology/limes-exact>
					{<${n.data(Me.SOURCE)}> <${n.data(Me.PROPERTY)}> <${n.data(Me.TARGET)}>.}
					
\`\`\`
					${Qo.SPARUL_WARNING}`;ia(pi,hn(n),a)}},{content:"developer",id:"edge-dev",selector:"edge",submenu:[{content:"remove permanently",id:"remove-permanently",onClickFunction:r=>{const n=r.target;t.cy.remove(n);const a=`Please permanently delete the edge ${hn(n)}:
					\`\`\`

					sparql
					DELETE DATA FROM <${Si(n.data(Me.SOURCE))}>
					{<${n.data(Me.SOURCE)}> <${n.data(Me.PROPERTY)}> <${n.data(Me.TARGET)}>.}
					
\`\`\`
					Undo with
					\`\`\`

					sparql
					INSERT DATA INTO <${Si(n.data(Me.SOURCE))}>
					{<${n.data(Me.SOURCE)}> <${n.data(Me.PROPERTY)}> <${n.data(Me.TARGET)}>.}
					
\`\`\`
					${Qo.SPARUL_WARNING}`;ia(pi,hn(n),a)}},{content:"OntoWiki",id:"edge-ontowiki",onClickFunction:r=>{window.open(Aa.ontoWikiUrl(r.target.data(Me.SOURCE)))}},{content:"debug",id:"edge-debug",onClickFunction:r=>{alert(JSON.stringify(r.target.data(),null,2))}}]}]}var Tt="top",zt="bottom",Ft="right",kt="left",nl="auto",Ha=[Tt,zt,Ft,kt],In="start",ka="end",o1="clippingParents",Th="viewport",Jn="popper",s1="reference",Fu=Ha.reduce(function(t,e){return t.concat([e+"-"+In,e+"-"+ka])},[]),kh=[].concat(Ha,[nl]).reduce(function(t,e){return t.concat([e,e+"-"+In,e+"-"+ka])},[]),l1="beforeRead",u1="read",c1="afterRead",f1="beforeMain",h1="main",d1="afterMain",v1="beforeWrite",p1="write",g1="afterWrite",m1=[l1,u1,c1,f1,h1,d1,v1,p1,g1];function nr(t){return t?(t.nodeName||"").toLowerCase():null}function Xt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function An(t){var e=Xt(t).Element;return t instanceof e||t instanceof Element}function Nt(t){var e=Xt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function al(t){if(typeof ShadowRoot=="undefined")return!1;var e=Xt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function y1(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},a=e.attributes[r]||{},i=e.elements[r];!Nt(i)||!nr(i)||(Object.assign(i.style,n),Object.keys(a).forEach(function(o){var s=a[o];s===!1?i.removeAttribute(o):i.setAttribute(o,s===!0?"":s)}))})}function b1(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var a=e.elements[n],i=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),s=o.reduce(function(l,u){return l[u]="",l},{});!Nt(a)||!nr(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(l){a.removeAttribute(l)}))})}}var Ih={name:"applyStyles",enabled:!0,phase:"write",fn:y1,effect:b1,requires:["computeStyles"]};function tr(t){return t.split("-")[0]}var qr=Math.max,Ri=Math.min,Mn=Math.round;function Dn(t,e){e===void 0&&(e=!1);var r=t.getBoundingClientRect(),n=1,a=1;if(Nt(t)&&e){var i=t.offsetHeight,o=t.offsetWidth;o>0&&(n=Mn(r.width)/o||1),i>0&&(a=Mn(r.height)/i||1)}return{width:r.width/n,height:r.height/a,top:r.top/a,right:r.right/n,bottom:r.bottom/a,left:r.left/n,x:r.left/n,y:r.top/a}}function il(t){var e=Dn(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function Ah(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&al(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function hr(t){return Xt(t).getComputedStyle(t)}function w1(t){return["table","td","th"].indexOf(nr(t))>=0}function Or(t){return((An(t)?t.ownerDocument:t.document)||window.document).documentElement}function co(t){return nr(t)==="html"?t:t.assignedSlot||t.parentNode||(al(t)?t.host:null)||Or(t)}function $u(t){return!Nt(t)||hr(t).position==="fixed"?null:t.offsetParent}function x1(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Nt(t)){var n=hr(t);if(n.position==="fixed")return null}var a=co(t);for(al(a)&&(a=a.host);Nt(a)&&["html","body"].indexOf(nr(a))<0;){var i=hr(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Va(t){for(var e=Xt(t),r=$u(t);r&&w1(r)&&hr(r).position==="static";)r=$u(r);return r&&(nr(r)==="html"||nr(r)==="body"&&hr(r).position==="static")?e:r||x1(t)||e}function ol(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function la(t,e,r){return qr(t,Ri(e,r))}function E1(t,e,r){var n=la(t,e,r);return n>r?r:n}function Mh(){return{top:0,right:0,bottom:0,left:0}}function Dh(t){return Object.assign({},Mh(),t)}function Ph(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var C1=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Dh(typeof e!="number"?e:Ph(e,Ha))};function S1(t){var e,r=t.state,n=t.name,a=t.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,s=tr(r.placement),l=ol(s),u=[kt,Ft].indexOf(s)>=0,c=u?"height":"width";if(!(!i||!o)){var f=C1(a.padding,r),d=il(i),v=l==="y"?Tt:kt,h=l==="y"?zt:Ft,p=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],m=o[l]-r.rects.reference[l],g=Va(i),b=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,w=p/2-m/2,y=f[v],C=b-d[c]-f[h],E=b/2-d[c]/2+w,x=la(y,E,C),_=l;r.modifiersData[n]=(e={},e[_]=x,e.centerOffset=x-E,e)}}function _1(t){var e=t.state,r=t.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!Ah(e.elements.popper,a)||(e.elements.arrow=a))}var T1={name:"arrow",enabled:!0,phase:"main",fn:S1,effect:_1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pn(t){return t.split("-")[1]}var k1={top:"auto",right:"auto",bottom:"auto",left:"auto"};function I1(t){var e=t.x,r=t.y,n=window,a=n.devicePixelRatio||1;return{x:Mn(e*a)/a||0,y:Mn(r*a)/a||0}}function Hu(t){var e,r=t.popper,n=t.popperRect,a=t.placement,i=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,f=t.isFixed,d=o.x,v=d===void 0?0:d,h=o.y,p=h===void 0?0:h,m=typeof c=="function"?c({x:v,y:p}):{x:v,y:p};v=m.x,p=m.y;var g=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),w=kt,y=Tt,C=window;if(u){var E=Va(r),x="clientHeight",_="clientWidth";if(E===Xt(r)&&(E=Or(r),hr(E).position!=="static"&&s==="absolute"&&(x="scrollHeight",_="scrollWidth")),E=E,a===Tt||(a===kt||a===Ft)&&i===ka){y=zt;var S=f&&E===C&&C.visualViewport?C.visualViewport.height:E[x];p-=S-n.height,p*=l?1:-1}if(a===kt||(a===Tt||a===zt)&&i===ka){w=Ft;var I=f&&E===C&&C.visualViewport?C.visualViewport.width:E[_];v-=I-n.width,v*=l?1:-1}}var k=Object.assign({position:s},u&&k1),T=c===!0?I1({x:v,y:p}):{x:v,y:p};if(v=T.x,p=T.y,l){var P;return Object.assign({},k,(P={},P[y]=b?"0":"",P[w]=g?"0":"",P.transform=(C.devicePixelRatio||1)<=1?"translate("+v+"px, "+p+"px)":"translate3d("+v+"px, "+p+"px, 0)",P))}return Object.assign({},k,(e={},e[y]=b?p+"px":"",e[w]=g?v+"px":"",e.transform="",e))}function A1(t){var e=t.state,r=t.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,s=r.roundOffsets,l=s===void 0?!0:s,u={placement:tr(e.placement),variation:Pn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Hu(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Hu(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var M1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:A1,data:{}},si={passive:!0};function D1(t){var e=t.state,r=t.instance,n=t.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,s=o===void 0?!0:o,l=Xt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(c){c.addEventListener("scroll",r.update,si)}),s&&l.addEventListener("resize",r.update,si),function(){i&&u.forEach(function(c){c.removeEventListener("scroll",r.update,si)}),s&&l.removeEventListener("resize",r.update,si)}}var P1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:D1,data:{}},O1={left:"right",right:"left",bottom:"top",top:"bottom"};function Ci(t){return t.replace(/left|right|bottom|top/g,function(e){return O1[e]})}var L1={start:"end",end:"start"};function Vu(t){return t.replace(/start|end/g,function(e){return L1[e]})}function sl(t){var e=Xt(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ll(t){return Dn(Or(t)).left+sl(t).scrollLeft}function B1(t){var e=Xt(t),r=Or(t),n=e.visualViewport,a=r.clientWidth,i=r.clientHeight,o=0,s=0;return n&&(a=n.width,i=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:a,height:i,x:o+ll(t),y:s}}function R1(t){var e,r=Or(t),n=sl(t),a=(e=t.ownerDocument)==null?void 0:e.body,i=qr(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=qr(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-n.scrollLeft+ll(t),l=-n.scrollTop;return hr(a||r).direction==="rtl"&&(s+=qr(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:l}}function ul(t){var e=hr(t),r=e.overflow,n=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function Oh(t){return["html","body","#document"].indexOf(nr(t))>=0?t.ownerDocument.body:Nt(t)&&ul(t)?t:Oh(co(t))}function ua(t,e){var r;e===void 0&&(e=[]);var n=Oh(t),a=n===((r=t.ownerDocument)==null?void 0:r.body),i=Xt(n),o=a?[i].concat(i.visualViewport||[],ul(n)?n:[]):n,s=e.concat(o);return a?s:s.concat(ua(co(o)))}function ds(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function N1(t){var e=Dn(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function qu(t,e){return e===Th?ds(B1(t)):An(e)?N1(e):ds(R1(Or(t)))}function z1(t){var e=ua(co(t)),r=["absolute","fixed"].indexOf(hr(t).position)>=0,n=r&&Nt(t)?Va(t):t;return An(n)?e.filter(function(a){return An(a)&&Ah(a,n)&&nr(a)!=="body"}):[]}function F1(t,e,r){var n=e==="clippingParents"?z1(t):[].concat(e),a=[].concat(n,[r]),i=a[0],o=a.reduce(function(s,l){var u=qu(t,l);return s.top=qr(u.top,s.top),s.right=Ri(u.right,s.right),s.bottom=Ri(u.bottom,s.bottom),s.left=qr(u.left,s.left),s},qu(t,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Lh(t){var e=t.reference,r=t.element,n=t.placement,a=n?tr(n):null,i=n?Pn(n):null,o=e.x+e.width/2-r.width/2,s=e.y+e.height/2-r.height/2,l;switch(a){case Tt:l={x:o,y:e.y-r.height};break;case zt:l={x:o,y:e.y+e.height};break;case Ft:l={x:e.x+e.width,y:s};break;case kt:l={x:e.x-r.width,y:s};break;default:l={x:e.x,y:e.y}}var u=a?ol(a):null;if(u!=null){var c=u==="y"?"height":"width";switch(i){case In:l[u]=l[u]-(e[c]/2-r[c]/2);break;case ka:l[u]=l[u]+(e[c]/2-r[c]/2);break}}return l}function Ia(t,e){e===void 0&&(e={});var r=e,n=r.placement,a=n===void 0?t.placement:n,i=r.boundary,o=i===void 0?o1:i,s=r.rootBoundary,l=s===void 0?Th:s,u=r.elementContext,c=u===void 0?Jn:u,f=r.altBoundary,d=f===void 0?!1:f,v=r.padding,h=v===void 0?0:v,p=Dh(typeof h!="number"?h:Ph(h,Ha)),m=c===Jn?s1:Jn,g=t.rects.popper,b=t.elements[d?m:c],w=F1(An(b)?b:b.contextElement||Or(t.elements.popper),o,l),y=Dn(t.elements.reference),C=Lh({reference:y,element:g,strategy:"absolute",placement:a}),E=ds(Object.assign({},g,C)),x=c===Jn?E:y,_={top:w.top-x.top+p.top,bottom:x.bottom-w.bottom+p.bottom,left:w.left-x.left+p.left,right:x.right-w.right+p.right},S=t.modifiersData.offset;if(c===Jn&&S){var I=S[a];Object.keys(_).forEach(function(k){var T=[Ft,zt].indexOf(k)>=0?1:-1,P=[Tt,zt].indexOf(k)>=0?"y":"x";_[k]+=I[P]*T})}return _}function $1(t,e){e===void 0&&(e={});var r=e,n=r.placement,a=r.boundary,i=r.rootBoundary,o=r.padding,s=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?kh:l,c=Pn(n),f=c?s?Fu:Fu.filter(function(h){return Pn(h)===c}):Ha,d=f.filter(function(h){return u.indexOf(h)>=0});d.length===0&&(d=f);var v=d.reduce(function(h,p){return h[p]=Ia(t,{placement:p,boundary:a,rootBoundary:i,padding:o})[tr(p)],h},{});return Object.keys(v).sort(function(h,p){return v[h]-v[p]})}function H1(t){if(tr(t)===nl)return[];var e=Ci(t);return[Vu(t),e,Vu(e)]}function V1(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,s=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,f=r.rootBoundary,d=r.altBoundary,v=r.flipVariations,h=v===void 0?!0:v,p=r.allowedAutoPlacements,m=e.options.placement,g=tr(m),b=g===m,w=l||(b||!h?[Ci(m)]:H1(m)),y=[m].concat(w).reduce(function($,V){return $.concat(tr(V)===nl?$1(e,{placement:V,boundary:c,rootBoundary:f,padding:u,flipVariations:h,allowedAutoPlacements:p}):V)},[]),C=e.rects.reference,E=e.rects.popper,x=new Map,_=!0,S=y[0],I=0;I<y.length;I++){var k=y[I],T=tr(k),P=Pn(k)===In,A=[Tt,zt].indexOf(T)>=0,B=A?"width":"height",L=Ia(e,{placement:k,boundary:c,rootBoundary:f,altBoundary:d,padding:u}),N=A?P?Ft:kt:P?zt:Tt;C[B]>E[B]&&(N=Ci(N));var H=Ci(N),W=[];if(i&&W.push(L[T]<=0),s&&W.push(L[N]<=0,L[H]<=0),W.every(function($){return $})){S=k,_=!1;break}x.set(k,W)}if(_)for(var F=h?3:1,D=function(V){var q=y.find(function(z){var K=x.get(z);if(K)return K.slice(0,V).every(function(te){return te})});if(q)return S=q,"break"},R=F;R>0;R--){var O=D(R);if(O==="break")break}e.placement!==S&&(e.modifiersData[n]._skip=!0,e.placement=S,e.reset=!0)}}var q1={name:"flip",enabled:!0,phase:"main",fn:V1,requiresIfExists:["offset"],data:{_skip:!1}};function Wu(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Uu(t){return[Tt,Ft,zt,kt].some(function(e){return t[e]>=0})}function W1(t){var e=t.state,r=t.name,n=e.rects.reference,a=e.rects.popper,i=e.modifiersData.preventOverflow,o=Ia(e,{elementContext:"reference"}),s=Ia(e,{altBoundary:!0}),l=Wu(o,n),u=Wu(s,a,i),c=Uu(l),f=Uu(u);e.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var U1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:W1};function G1(t,e,r){var n=tr(t),a=[kt,Tt].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[kt,Ft].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function K1(t){var e=t.state,r=t.options,n=t.name,a=r.offset,i=a===void 0?[0,0]:a,o=kh.reduce(function(c,f){return c[f]=G1(f,e.rects,i),c},{}),s=o[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}var Y1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:K1};function j1(t){var e=t.state,r=t.name;e.modifiersData[r]=Lh({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var X1={name:"popperOffsets",enabled:!0,phase:"read",fn:j1,data:{}};function Z1(t){return t==="x"?"y":"x"}function Q1(t){var e=t.state,r=t.options,n=t.name,a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,s=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,f=r.padding,d=r.tether,v=d===void 0?!0:d,h=r.tetherOffset,p=h===void 0?0:h,m=Ia(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),g=tr(e.placement),b=Pn(e.placement),w=!b,y=ol(g),C=Z1(y),E=e.modifiersData.popperOffsets,x=e.rects.reference,_=e.rects.popper,S=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,I=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,T={x:0,y:0};if(!!E){if(i){var P,A=y==="y"?Tt:kt,B=y==="y"?zt:Ft,L=y==="y"?"height":"width",N=E[y],H=N+m[A],W=N-m[B],F=v?-_[L]/2:0,D=b===In?x[L]:_[L],R=b===In?-_[L]:-x[L],O=e.elements.arrow,$=v&&O?il(O):{width:0,height:0},V=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Mh(),q=V[A],z=V[B],K=la(0,x[L],$[L]),te=w?x[L]/2-F-K-q-I.mainAxis:D-K-q-I.mainAxis,J=w?-x[L]/2+F+K+z+I.mainAxis:R+K+z+I.mainAxis,ie=e.elements.arrow&&Va(e.elements.arrow),ve=ie?y==="y"?ie.clientTop||0:ie.clientLeft||0:0,Ee=(P=k==null?void 0:k[y])!=null?P:0,le=N+te-Ee-ve,re=N+J-Ee,ne=la(v?Ri(H,le):H,N,v?qr(W,re):W);E[y]=ne,T[y]=ne-N}if(s){var Z,X=y==="x"?Tt:kt,ue=y==="x"?zt:Ft,de=E[C],we=C==="y"?"height":"width",ye=de+m[X],Y=de-m[ue],M=[Tt,kt].indexOf(g)!==-1,U=(Z=k==null?void 0:k[C])!=null?Z:0,ee=M?ye:de-x[we]-_[we]-U+I.altAxis,Q=M?de+x[we]+_[we]-U-I.altAxis:Y,j=v&&M?E1(ee,de,Q):la(v?ee:ye,de,v?Q:Y);E[C]=j,T[C]=j-de}e.modifiersData[n]=T}}var J1={name:"preventOverflow",enabled:!0,phase:"main",fn:Q1,requiresIfExists:["offset"]};function ex(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function tx(t){return t===Xt(t)||!Nt(t)?sl(t):ex(t)}function rx(t){var e=t.getBoundingClientRect(),r=Mn(e.width)/t.offsetWidth||1,n=Mn(e.height)/t.offsetHeight||1;return r!==1||n!==1}function nx(t,e,r){r===void 0&&(r=!1);var n=Nt(e),a=Nt(e)&&rx(e),i=Or(e),o=Dn(t,a),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((nr(e)!=="body"||ul(i))&&(s=tx(e)),Nt(e)?(l=Dn(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=ll(i))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function ax(t){var e=new Map,r=new Set,n=[];t.forEach(function(i){e.set(i.name,i)});function a(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(s){if(!r.has(s)){var l=e.get(s);l&&a(l)}}),n.push(i)}return t.forEach(function(i){r.has(i.name)||a(i)}),n}function ix(t){var e=ax(t);return m1.reduce(function(r,n){return r.concat(e.filter(function(a){return a.phase===n}))},[])}function ox(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function sx(t){var e=t.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Gu={placement:"bottom",modifiers:[],strategy:"absolute"};function Ku(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function lx(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,a=e.defaultOptions,i=a===void 0?Gu:a;return function(s,l,u){u===void 0&&(u=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Gu,i),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],d=!1,v={state:c,setOptions:function(g){var b=typeof g=="function"?g(c.options):g;p(),c.options=Object.assign({},i,c.options,b),c.scrollParents={reference:An(s)?ua(s):s.contextElement?ua(s.contextElement):[],popper:ua(l)};var w=ix(sx([].concat(n,c.options.modifiers)));return c.orderedModifiers=w.filter(function(y){return y.enabled}),h(),v.update()},forceUpdate:function(){if(!d){var g=c.elements,b=g.reference,w=g.popper;if(!!Ku(b,w)){c.rects={reference:nx(b,Va(w),c.options.strategy==="fixed"),popper:il(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var C=c.orderedModifiers[y],E=C.fn,x=C.options,_=x===void 0?{}:x,S=C.name;typeof E=="function"&&(c=E({state:c,options:_,name:S,instance:v})||c)}}}},update:ox(function(){return new Promise(function(m){v.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!Ku(s,l))return v;v.setOptions(u).then(function(m){!d&&u.onFirstUpdate&&u.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var g=m.name,b=m.options,w=b===void 0?{}:b,y=m.effect;if(typeof y=="function"){var C=y({state:c,name:g,instance:v,options:w}),E=function(){};f.push(C||E)}})}function p(){f.forEach(function(m){return m()}),f=[]}return v}}var ux=[P1,X1,M1,Ih,Y1,q1,J1,T1,U1],cx=lx({defaultModifiers:ux}),fx="tippy-box",Bh="tippy-content",hx="tippy-backdrop",Rh="tippy-arrow",Nh="tippy-svg-arrow",$r={passive:!0,capture:!0},zh=function(){return document.body};function zo(t,e,r){if(Array.isArray(t)){var n=t[e];return n==null?Array.isArray(r)?r[e]:r:n}return t}function cl(t,e){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(e+"]")>-1}function Fh(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Yu(t,e){if(e===0)return t;var r;return function(n){clearTimeout(r),r=setTimeout(function(){t(n)},e)}}function dx(t){return t.split(/\s+/).filter(Boolean)}function pn(t){return[].concat(t)}function ju(t,e){t.indexOf(e)===-1&&t.push(e)}function vx(t){return t.filter(function(e,r){return t.indexOf(e)===r})}function px(t){return t.split("-")[0]}function Ni(t){return[].slice.call(t)}function Xu(t){return Object.keys(t).reduce(function(e,r){return t[r]!==void 0&&(e[r]=t[r]),e},{})}function ca(){return document.createElement("div")}function fo(t){return["Element","Fragment"].some(function(e){return cl(t,e)})}function gx(t){return cl(t,"NodeList")}function mx(t){return cl(t,"MouseEvent")}function yx(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function bx(t){return fo(t)?[t]:gx(t)?Ni(t):Array.isArray(t)?t:Ni(document.querySelectorAll(t))}function Fo(t,e){t.forEach(function(r){r&&(r.style.transitionDuration=e+"ms")})}function Zu(t,e){t.forEach(function(r){r&&r.setAttribute("data-state",e)})}function wx(t){var e,r=pn(t),n=r[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function xx(t,e){var r=e.clientX,n=e.clientY;return t.every(function(a){var i=a.popperRect,o=a.popperState,s=a.props,l=s.interactiveBorder,u=px(o.placement),c=o.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,v=u==="right"?c.left.x:0,h=u==="left"?c.right.x:0,p=i.top-n+f>l,m=n-i.bottom-d>l,g=i.left-r+v>l,b=r-i.right-h>l;return p||m||g||b})}function $o(t,e,r){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(a){t[n](a,r)})}function Qu(t,e){for(var r=e;r;){var n;if(t.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var Qt={isTouch:!1},Ju=0;function Ex(){Qt.isTouch||(Qt.isTouch=!0,window.performance&&document.addEventListener("mousemove",$h))}function $h(){var t=performance.now();t-Ju<20&&(Qt.isTouch=!1,document.removeEventListener("mousemove",$h)),Ju=t}function Cx(){var t=document.activeElement;if(yx(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Sx(){document.addEventListener("touchstart",Ex,$r),window.addEventListener("blur",Cx)}var _x=typeof window!="undefined"&&typeof document!="undefined",Tx=_x?!!window.msCrypto:!1,kx={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ix={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Yt=Object.assign({appendTo:zh,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},kx,Ix),Ax=Object.keys(Yt),Mx=function(e){var r=Object.keys(e);r.forEach(function(n){Yt[n]=e[n]})};function Hh(t){var e=t.plugins||[],r=e.reduce(function(n,a){var i=a.name,o=a.defaultValue;if(i){var s;n[i]=t[i]!==void 0?t[i]:(s=Yt[i])!=null?s:o}return n},{});return Object.assign({},t,r)}function Dx(t,e){var r=e?Object.keys(Hh(Object.assign({},Yt,{plugins:e}))):Ax,n=r.reduce(function(a,i){var o=(t.getAttribute("data-tippy-"+i)||"").trim();if(!o)return a;if(i==="content")a[i]=o;else try{a[i]=JSON.parse(o)}catch{a[i]=o}return a},{});return n}function ec(t,e){var r=Object.assign({},e,{content:Fh(e.content,[t])},e.ignoreAttributes?{}:Dx(t,e.plugins));return r.aria=Object.assign({},Yt.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?e.interactive:r.aria.expanded,content:r.aria.content==="auto"?e.interactive?null:"describedby":r.aria.content},r}var Px=function(){return"innerHTML"};function vs(t,e){t[Px()]=e}function tc(t){var e=ca();return t===!0?e.className=Rh:(e.className=Nh,fo(t)?e.appendChild(t):vs(e,t)),e}function rc(t,e){fo(e.content)?(vs(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?vs(t,e.content):t.textContent=e.content)}function ps(t){var e=t.firstElementChild,r=Ni(e.children);return{box:e,content:r.find(function(n){return n.classList.contains(Bh)}),arrow:r.find(function(n){return n.classList.contains(Rh)||n.classList.contains(Nh)}),backdrop:r.find(function(n){return n.classList.contains(hx)})}}function Vh(t){var e=ca(),r=ca();r.className=fx,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=ca();n.className=Bh,n.setAttribute("data-state","hidden"),rc(n,t.props),e.appendChild(r),r.appendChild(n),a(t.props,t.props);function a(i,o){var s=ps(e),l=s.box,u=s.content,c=s.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(i.content!==o.content||i.allowHTML!==o.allowHTML)&&rc(u,t.props),o.arrow?c?i.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(tc(o.arrow))):l.appendChild(tc(o.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:a}}Vh.$$tippy=!0;var Ox=1,li=[],Ho=[];function Lx(t,e){var r=ec(t,Object.assign({},Yt,Hh(Xu(e)))),n,a,i,o=!1,s=!1,l=!1,u=!1,c,f,d,v=[],h=Yu(le,r.interactiveDebounce),p,m=Ox++,g=null,b=vx(r.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:m,reference:t,popper:ca(),popperInstance:g,props:r,state:w,plugins:b,clearDelayTimeouts:ee,setProps:Q,setContent:j,show:me,hide:ae,hideWithInteractivity:fe,enable:M,disable:U,unmount:ke,destroy:Ie};if(!r.render)return y;var C=r.render(y),E=C.popper,x=C.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+y.id,y.popper=E,t._tippy=y,E._tippy=y;var _=b.map(function(G){return G.fn(y)}),S=t.hasAttribute("aria-expanded");return ie(),F(),N(),H("onCreate",[y]),r.showOnCreate&&ye(),E.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),E.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",h)}),y;function I(){var G=y.props.touch;return Array.isArray(G)?G:[G,0]}function k(){return I()[0]==="hold"}function T(){var G;return!!((G=y.props.render)!=null&&G.$$tippy)}function P(){return p||t}function A(){var G=P().parentNode;return G?wx(G):document}function B(){return ps(E)}function L(G){return y.state.isMounted&&!y.state.isVisible||Qt.isTouch||c&&c.type==="focus"?0:zo(y.props.delay,G?0:1,Yt.delay)}function N(G){G===void 0&&(G=!1),E.style.pointerEvents=y.props.interactive&&!G?"":"none",E.style.zIndex=""+y.props.zIndex}function H(G,oe,ce){if(ce===void 0&&(ce=!0),_.forEach(function(Ce){Ce[G]&&Ce[G].apply(Ce,oe)}),ce){var pe;(pe=y.props)[G].apply(pe,oe)}}function W(){var G=y.props.aria;if(!!G.content){var oe="aria-"+G.content,ce=E.id,pe=pn(y.props.triggerTarget||t);pe.forEach(function(Ce){var De=Ce.getAttribute(oe);if(y.state.isVisible)Ce.setAttribute(oe,De?De+" "+ce:ce);else{var Ue=De&&De.replace(ce,"").trim();Ue?Ce.setAttribute(oe,Ue):Ce.removeAttribute(oe)}})}}function F(){if(!(S||!y.props.aria.expanded)){var G=pn(y.props.triggerTarget||t);G.forEach(function(oe){y.props.interactive?oe.setAttribute("aria-expanded",y.state.isVisible&&oe===P()?"true":"false"):oe.removeAttribute("aria-expanded")})}}function D(){A().removeEventListener("mousemove",h),li=li.filter(function(G){return G!==h})}function R(G){if(!(Qt.isTouch&&(l||G.type==="mousedown"))){var oe=G.composedPath&&G.composedPath()[0]||G.target;if(!(y.props.interactive&&Qu(E,oe))){if(pn(y.props.triggerTarget||t).some(function(ce){return Qu(ce,oe)})){if(Qt.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else H("onClickOutside",[y,G]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),s=!0,setTimeout(function(){s=!1}),y.state.isMounted||q())}}}function O(){l=!0}function $(){l=!1}function V(){var G=A();G.addEventListener("mousedown",R,!0),G.addEventListener("touchend",R,$r),G.addEventListener("touchstart",$,$r),G.addEventListener("touchmove",O,$r)}function q(){var G=A();G.removeEventListener("mousedown",R,!0),G.removeEventListener("touchend",R,$r),G.removeEventListener("touchstart",$,$r),G.removeEventListener("touchmove",O,$r)}function z(G,oe){te(G,function(){!y.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&oe()})}function K(G,oe){te(G,oe)}function te(G,oe){var ce=B().box;function pe(Ce){Ce.target===ce&&($o(ce,"remove",pe),oe())}if(G===0)return oe();$o(ce,"remove",f),$o(ce,"add",pe),f=pe}function J(G,oe,ce){ce===void 0&&(ce=!1);var pe=pn(y.props.triggerTarget||t);pe.forEach(function(Ce){Ce.addEventListener(G,oe,ce),v.push({node:Ce,eventType:G,handler:oe,options:ce})})}function ie(){k()&&(J("touchstart",Ee,{passive:!0}),J("touchend",re,{passive:!0})),dx(y.props.trigger).forEach(function(G){if(G!=="manual")switch(J(G,Ee),G){case"mouseenter":J("mouseleave",re);break;case"focus":J(Tx?"focusout":"blur",ne);break;case"focusin":J("focusout",ne);break}})}function ve(){v.forEach(function(G){var oe=G.node,ce=G.eventType,pe=G.handler,Ce=G.options;oe.removeEventListener(ce,pe,Ce)}),v=[]}function Ee(G){var oe,ce=!1;if(!(!y.state.isEnabled||Z(G)||s)){var pe=((oe=c)==null?void 0:oe.type)==="focus";c=G,p=G.currentTarget,F(),!y.state.isVisible&&mx(G)&&li.forEach(function(Ce){return Ce(G)}),G.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||o)&&y.props.hideOnClick!==!1&&y.state.isVisible?ce=!0:ye(G),G.type==="click"&&(o=!ce),ce&&!pe&&Y(G)}}function le(G){var oe=G.target,ce=P().contains(oe)||E.contains(oe);if(!(G.type==="mousemove"&&ce)){var pe=we().concat(E).map(function(Ce){var De,Ue=Ce._tippy,at=(De=Ue.popperInstance)==null?void 0:De.state;return at?{popperRect:Ce.getBoundingClientRect(),popperState:at,props:r}:null}).filter(Boolean);xx(pe,G)&&(D(),Y(G))}}function re(G){var oe=Z(G)||y.props.trigger.indexOf("click")>=0&&o;if(!oe){if(y.props.interactive){y.hideWithInteractivity(G);return}Y(G)}}function ne(G){y.props.trigger.indexOf("focusin")<0&&G.target!==P()||y.props.interactive&&G.relatedTarget&&E.contains(G.relatedTarget)||Y(G)}function Z(G){return Qt.isTouch?k()!==G.type.indexOf("touch")>=0:!1}function X(){ue();var G=y.props,oe=G.popperOptions,ce=G.placement,pe=G.offset,Ce=G.getReferenceClientRect,De=G.moveTransition,Ue=T()?ps(E).arrow:null,at=Ce?{getBoundingClientRect:Ce,contextElement:Ce.contextElement||P()}:t,Ze={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Et){var bt=Et.state;if(T()){var mr=B(),$t=mr.box;["placement","reference-hidden","escaped"].forEach(function(Ht){Ht==="placement"?$t.setAttribute("data-placement",bt.placement):bt.attributes.popper["data-popper-"+Ht]?$t.setAttribute("data-"+Ht,""):$t.removeAttribute("data-"+Ht)}),bt.attributes.popper={}}}},Qe=[{name:"offset",options:{offset:pe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!De}},Ze];T()&&Ue&&Qe.push({name:"arrow",options:{element:Ue,padding:3}}),Qe.push.apply(Qe,(oe==null?void 0:oe.modifiers)||[]),y.popperInstance=cx(at,E,Object.assign({},oe,{placement:ce,onFirstUpdate:d,modifiers:Qe}))}function ue(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function de(){var G=y.props.appendTo,oe,ce=P();y.props.interactive&&G===zh||G==="parent"?oe=ce.parentNode:oe=Fh(G,[ce]),oe.contains(E)||oe.appendChild(E),y.state.isMounted=!0,X()}function we(){return Ni(E.querySelectorAll("[data-tippy-root]"))}function ye(G){y.clearDelayTimeouts(),G&&H("onTrigger",[y,G]),V();var oe=L(!0),ce=I(),pe=ce[0],Ce=ce[1];Qt.isTouch&&pe==="hold"&&Ce&&(oe=Ce),oe?n=setTimeout(function(){y.show()},oe):y.show()}function Y(G){if(y.clearDelayTimeouts(),H("onUntrigger",[y,G]),!y.state.isVisible){q();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(G.type)>=0&&o)){var oe=L(!1);oe?a=setTimeout(function(){y.state.isVisible&&y.hide()},oe):i=requestAnimationFrame(function(){y.hide()})}}function M(){y.state.isEnabled=!0}function U(){y.hide(),y.state.isEnabled=!1}function ee(){clearTimeout(n),clearTimeout(a),cancelAnimationFrame(i)}function Q(G){if(!y.state.isDestroyed){H("onBeforeUpdate",[y,G]),ve();var oe=y.props,ce=ec(t,Object.assign({},oe,Xu(G),{ignoreAttributes:!0}));y.props=ce,ie(),oe.interactiveDebounce!==ce.interactiveDebounce&&(D(),h=Yu(le,ce.interactiveDebounce)),oe.triggerTarget&&!ce.triggerTarget?pn(oe.triggerTarget).forEach(function(pe){pe.removeAttribute("aria-expanded")}):ce.triggerTarget&&t.removeAttribute("aria-expanded"),F(),N(),x&&x(oe,ce),y.popperInstance&&(X(),we().forEach(function(pe){requestAnimationFrame(pe._tippy.popperInstance.forceUpdate)})),H("onAfterUpdate",[y,G])}}function j(G){y.setProps({content:G})}function me(){var G=y.state.isVisible,oe=y.state.isDestroyed,ce=!y.state.isEnabled,pe=Qt.isTouch&&!y.props.touch,Ce=zo(y.props.duration,0,Yt.duration);if(!(G||oe||ce||pe)&&!P().hasAttribute("disabled")&&(H("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,T()&&(E.style.visibility="visible"),N(),V(),y.state.isMounted||(E.style.transition="none"),T()){var De=B(),Ue=De.box,at=De.content;Fo([Ue,at],0)}d=function(){var Qe;if(!(!y.state.isVisible||u)){if(u=!0,E.offsetHeight,E.style.transition=y.props.moveTransition,T()&&y.props.animation){var tt=B(),Et=tt.box,bt=tt.content;Fo([Et,bt],Ce),Zu([Et,bt],"visible")}W(),F(),ju(Ho,y),(Qe=y.popperInstance)==null||Qe.forceUpdate(),H("onMount",[y]),y.props.animation&&T()&&K(Ce,function(){y.state.isShown=!0,H("onShown",[y])})}},de()}}function ae(){var G=!y.state.isVisible,oe=y.state.isDestroyed,ce=!y.state.isEnabled,pe=zo(y.props.duration,1,Yt.duration);if(!(G||oe||ce)&&(H("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,u=!1,o=!1,T()&&(E.style.visibility="hidden"),D(),q(),N(!0),T()){var Ce=B(),De=Ce.box,Ue=Ce.content;y.props.animation&&(Fo([De,Ue],pe),Zu([De,Ue],"hidden"))}W(),F(),y.props.animation?T()&&z(pe,y.unmount):y.unmount()}}function fe(G){A().addEventListener("mousemove",h),ju(li,h),h(G)}function ke(){y.state.isVisible&&y.hide(),y.state.isMounted&&(ue(),we().forEach(function(G){G._tippy.unmount()}),E.parentNode&&E.parentNode.removeChild(E),Ho=Ho.filter(function(G){return G!==y}),y.state.isMounted=!1,H("onHidden",[y]))}function Ie(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),ve(),delete t._tippy,y.state.isDestroyed=!0,H("onDestroy",[y]))}}function On(t,e){e===void 0&&(e={});var r=Yt.plugins.concat(e.plugins||[]);Sx();var n=Object.assign({},e,{plugins:r}),a=bx(t),i=a.reduce(function(o,s){var l=s&&Lx(s,n);return l&&o.push(l),o},[]);return fo(t)?i[0]:i}On.defaultProps=Yt;On.setDefaultProps=Mx;On.currentInput=Qt;Object.assign({},Ih,{effect:function(e){var r=e.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});On.setDefaultProps({render:Vh});const Bx={"SNIK Graph Manual":{img:"graph.png"},"Multiview-Functionality":{"":"SNIK Graph supports the organization and management of different partial models in separate views.To copy a part of the whole graph, press 'C' or 'S' and to insert it into a new model press 'V' or 'P'.","search-field":"Search the currently active view for resources by entering a full or partial name.","View-specific menu":{"":"The view-specific menu can be found in the upper right position of each view, described from left to right.",img:"viewmenu.png",recalculatesign:"Recalculate Layout",tightlayoutsign:"Tight layout",compoundlayoutsign:"Compound layout",addsign:"Open new Tab",plussign:"Zoom in",minussign:"Zoom out"}},menu:{file:{"":"Holds different file options like loading and saving the graph in different ways.","load-sparql":"Discard the currently loaded graph and load all ontologies of SNIK.","load-session":"Load a complete session from a Cytoscape JSON File. Caution: Discards all changes!","load-view":"Load a saved view (partial graph) and include it in the current session.","save-session":"Save the complete Session (all views).","save-snik-graph":"Save the complete SNIK graph to a Cytoscape file.","save-view":"Save only the currently active view (partial graph).","recalculate-layout-replace":"Recalculate the position of all visible nodes. May take a while when a large number of nodes are visible.","save-image-current-view":"Save a screenshot of the currently active view.","save-image-whole-graph":"Save an image of the whole graph with the same pixel density as the current view.","save-image-current-view-high-res":"Save an image of the current view with a high resolution, for example for printing.","save-image-whole-graph-high-res":"Save an image of the whole graph with a high resolution, for example for printing."},filter:{"":"A collection of filters to display relevant subgraphs. Filters are applied to all open views.",meta:"The Meta Ontology provides common superclasses and properties for the subontologies of SNIK.",bb:'Based on the book "Health Information Systems Ontology\u2013Architectures and Strategies".',ob:'Based on the book"IT-Projektmanagement im Gesundheitswesen - Lehrbuch und Projektleitfaden.',he:'Based on the book "Informationsmanagement: Grundlagen, Aufgaben, Methoden".',ciox:"Based on interviews about the Health Information System with Department B1, the Department for Information Management, of the Uniklinikum Leipzig.",role:"Who...",function:"...does what...",entitytype:"...and which information is therefore needed."},options:{"":"Here you can find different checkboxes that toggle the behaviour of SNIK Graph. These are applied to all open views.","separate-subs":"Spread the SNIK Graph into subgraphs of the subontologies.","cumulative-search":"Keep previous search results visible when searching again.",grid:"shows a grid that supports better organizing of nodes.","combine-match":'Highlights groups of classes representing the same concept from different subontologies (matches) by placing them in boxes. Use "move matches on top of each other" or "move matches nearby" to shrink those boxes.',showInstances:"Display instances of SNIK Classes, if loaded via parameter.","day-mode":"White background. Saves ink when printing.","dev-mode":"Additional context menu entries for developers.","ext-mode":"Additional context menu entries for power users."},layout:{"":"This part of the menu holds the layout features.","show-close-matches":"Shows (unhides) all nodes that are connected via close matches to visible nodes.","recalculate-layout":"Hotkey: Ctrl+Alt+L. Recalculates the position of all selected nodes, or all visible nodes if there are not at least two selected nodes. Can take a while if there are many visible nodes.","tight-layout":"Hotkey: Ctrl+Alt+T. You can use this for a more narrow view.","compound-layout":"Hotkey: Ctrl+Alt+C. Layout that tries to places combined matches next to each other.","move-match-on-top":'Requires enabled "Combine Matching" option. Places all matching nodes in the center of their group.',"move-match-nearby":'Requires enabled "Combine Matching" option. Places all matching nodes in a small circle in their group.',"bb-chapter-search":'Presents you all chapters of the "blue book" and lets you build a subgraph out of selected chapters .',"ob-chapter-search":'Presents you all chapters of the "orange book" and lets you build a subgraph out of selected chapters .',"subontology-connectivity":"Shows the connectivity between chosen Subontologies, i.e. between BB and OB, in a new tab.",img:"subontologyConnectivity.png","reset-view":"Resets all the layout operations to get you back to the starting point of the visualization.","change-title":"Opens a propmt to change the title of the currently active view."},services:{"":"Other ways to access SNIK.","sparql-endpoint":"Expert interface for the SPARQL Protocol and RDF Query Language endpoint.","rdf-browser":"Browse complete descriptions of resources in the RDF browser."},language:"Language switch, you can choose between English, German and Persian. Ontologies may not or not fully support all available languages.",help:"Common Help Menu, holds e.g. this manual"},"context-menu":{"":"Right click on a node/edge to open the context menu and choose among:","base-mode":{description:"Opens the node in an RDF browser, which shows all its properties and values.",star:{"":"Highlights and expands the node and all its directly connected nodes.",img:"star.png"},"incoming-star":"Highlights and expands the node and all neighbours directly connected via incoming edges.","outgoing-star":"Highlights and expands the node and all neighbours directly connected via outgoing edges.",path:{"":"Shortest Path between a selected source and this node.",img:"star.png"},spiderworm:{"":"The Spider Worm consists of the shortest path between a selected source and this node plus all direct neighbours. Displaying a spiderworm hides all other nodes and edges.",img:"spiderworm.png"},edit:"If you are a domain expert and notice incorrectly modelled facts or connections of a node, feel free to send us an issue.","combine-close-matches":"Merge equivalent classes from different subontologies.","class-use":"Visualize the interplay of role, function and entity type (related to the Meta model).",hide:"Hide the selected item until the view is resetted.","set-path-source":"Set the starting point for path operations.","confirm-link":"Confirm that the automatically generated interlink is correct."},"dev-mode":{"remove-permanently":"Send us an issue to delete the selected item permanently. Also removes it until graph is reloaded.",ontowiki:"Access restricted ontology editing tool.",debug:"Get debug information to the edge/node from the JSON File"},"ext-mode":{doublestar:{"":"The double star is like the spiderworm but shows connected nodes for both source and target, not just the target.",img:"doublestar.png"},starpath:{"":"Creates a path and star (expand) every node along it.",img:"starpath.png"},circlestar:{"":"A star (expansion of the node) using a circular layout. Hides all other nodes.",img:"circlestar.png"},lodlive:"Third party data visualization exploration tool."}}};function qh(t){const e={};for(const r in t){if(r===""||r==="img")continue;const n=t[r];if(typeof n=="string"){e[r]=n;continue}n[""]&&(e[r]=n[""]),Object.assign(e,qh(n))}return e}const gs=qh(Bx);function nc(){for(const t in gs){const e=gs[t];if(typeof e!="string"&&console.error("value "+e+" for key "+t+" not a string"),document.getElementById(t))On("#"+t,{content:e});else{const n=`[data-i18n="${t}"]`;document.querySelectorAll(n).length>0?On(n,{content:e}):se.trace(`tooltip init: found none of #${t} and [data-i18n="${t}"]`)}}}var Wh={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={621:(i,o,s)=>{function l(F,D){(D==null||D>F.length)&&(D=F.length);for(var R=0,O=new Array(D);R<D;R++)O[R]=F[R];return O}function u(F){for(var D="",R=0;R<F.length;R++)D+=F[R],R!==F.length-1&&(D+=" ");return D}function c(F,D,R){R?F.setAttribute(D,""):F.removeAttribute(D)}function f(F,D,R){customElements.get(F)===void 0&&customElements.define(F,D,{extends:R})}s.r(o),s.d(o,{contextMenus:()=>W});var d="cy-context-menus-divider",v={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function h(F){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(F)}function p(F,D){var R;if(typeof Symbol=="undefined"||F[Symbol.iterator]==null){if(Array.isArray(F)||(R=function(K,te){if(K){if(typeof K=="string")return m(K,te);var J=Object.prototype.toString.call(K).slice(8,-1);return J==="Object"&&K.constructor&&(J=K.constructor.name),J==="Map"||J==="Set"?Array.from(K):J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J)?m(K,te):void 0}}(F))||D&&F&&typeof F.length=="number"){R&&(F=R);var O=0,$=function(){};return{s:$,n:function(){return O>=F.length?{done:!0}:{done:!1,value:F[O++]}},e:function(K){throw K},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V,q=!0,z=!1;return{s:function(){R=F[Symbol.iterator]()},n:function(){var K=R.next();return q=K.done,K},e:function(K){z=!0,V=K},f:function(){try{q||R.return==null||R.return()}finally{if(z)throw V}}}}function m(F,D){(D==null||D>F.length)&&(D=F.length);for(var R=0,O=new Array(D);R<D;R++)O[R]=F[R];return O}function g(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")}function b(F,D){for(var R=0;R<D.length;R++){var O=D[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(F,O.key,O)}}function w(F,D,R){return D&&b(F.prototype,D),R&&b(F,R),F}function y(F,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(D&&D.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),D&&T(F,D)}function C(F){var D=k();return function(){var R,O=P(F);if(D){var $=P(this).constructor;R=Reflect.construct(O,arguments,$)}else R=O.apply(this,arguments);return E(this,R)}}function E(F,D){return!D||h(D)!=="object"&&typeof D!="function"?x(F):D}function x(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function _(F,D,R){return(_=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(O,$,V){var q=function(K,te){for(;!Object.prototype.hasOwnProperty.call(K,te)&&(K=P(K))!==null;);return K}(O,$);if(q){var z=Object.getOwnPropertyDescriptor(q,$);return z.get?z.get.call(V):z.value}})(F,D,R||F)}function S(F){var D=typeof Map=="function"?new Map:void 0;return(S=function(R){if(R===null||(O=R,Function.toString.call(O).indexOf("[native code]")===-1))return R;var O;if(typeof R!="function")throw new TypeError("Super expression must either be null or a function");if(D!==void 0){if(D.has(R))return D.get(R);D.set(R,$)}function $(){return I(R,arguments,P(this).constructor)}return $.prototype=Object.create(R.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),T($,R)})(F)}function I(F,D,R){return(I=k()?Reflect.construct:function(O,$,V){var q=[null];q.push.apply(q,$);var z=new(Function.bind.apply(O,q));return V&&T(z,V.prototype),z}).apply(null,arguments)}function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function T(F,D){return(T=Object.setPrototypeOf||function(R,O){return R.__proto__=O,R})(F,D)}function P(F){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(F)}function A(F){F.preventDefault(),F.stopPropagation()}var B=function(F){y(R,F);var D=C(R);function R(O,$,V){var q,z,K,te,J,ie,ve,Ee,le,re;g(this,R),_((z=x(re=D.call(this)),P(R.prototype)),"setAttribute",z).call(z,"id",O.id);var ne=re._getMenuItemClassStr(V.cxtMenuItemClasses,O.hasTrailingDivider);if(_((K=x(re),P(R.prototype)),"setAttribute",K).call(K,"class",ne),_((te=x(re),P(R.prototype)),"setAttribute",te).call(te,"title",(q=O.tooltipText)!==null&&q!==void 0?q:""),O.disabled&&c(x(re),"disabled",!0),O.image){var Z=document.createElement("img");Z.src=O.image.src,Z.width=O.image.width,Z.height=O.image.height,Z.style.position="absolute",Z.style.top=O.image.y+"px",Z.style.left=O.image.x+"px",_((J=x(re),P(R.prototype)),"appendChild",J).call(J,Z)}if(re.innerHTML+=O.content,re.onMenuItemClick=$,re.data={},re.clickFns=[],re.selector=O.selector,re.hasTrailingDivider=O.hasTrailingDivider,re.show=O.show===void 0||O.show,re.coreAsWell=O.coreAsWell||!1,re.scratchpad=V,O.onClickFunction===void 0&&O.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return re.onClickFunction=O.onClickFunction,O.submenu instanceof Array&&re._createSubmenu(O.submenu),_((ie=x(re),P(R.prototype)),"addEventListener",ie).call(ie,"mousedown",A),_((ve=x(re),P(R.prototype)),"addEventListener",ve).call(ve,"mouseup",A),_((Ee=x(re),P(R.prototype)),"addEventListener",Ee).call(Ee,"touchstart",A),_((le=x(re),P(R.prototype)),"addEventListener",le).call(le,"touchend",A),re}return w(R,[{key:"bindOnClickFunction",value:function(O){this.clickFns.push(O),_(P(R.prototype),"addEventListener",this).call(this,"click",O)}},{key:"unbindOnClickFunctions",value:function(){var O,$=p(this.clickFns);try{for($.s();!(O=$.n()).done;){var V=O.value;_(P(R.prototype),"removeEventListener",this).call(this,"click",V)}}catch(q){$.e(q)}finally{$.f()}this.clickFns=[]}},{key:"enable",value:function(){c(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){c(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(O){this.hasTrailingDivider=O}},{key:"hasSubmenu",value:function(){return this.submenu instanceof L}},{key:"appendSubmenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(O,$)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(O){var $=this.getBoundingClientRect(),V=function(J){J.style.opacity="0",J.style.display="block";var ie=J.getBoundingClientRect();return J.style.opacity="1",J.style.display="none",ie}(this.submenu),q=$.right+V.width>window.innerWidth,z=$.top+V.height>window.innerHeight;q||z?q&&!z?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):q&&z?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var K=Array.from(this.submenu.children).filter(function(J){if(J instanceof R)return J.isVisible()}),te=K.length;K.forEach(function(J,ie){J instanceof R&&(ie<te-1&&J.getHasTrailingDivider()?J.classList.add(d):J.getHasTrailingDivider()&&J.classList.remove(d))})}},{key:"_onMouseLeave",value:function(O){var $,V,q,z,K;$={x:O.clientX,y:O.clientY},V=this.submenu,z=$.y,(q=$.x)>=(K=V.getBoundingClientRect()).left&&q<=K.right&&z>=K.top&&z<=K.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new L(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var $,V=p(O);try{for(V.s();!($=V.n()).done;){var q=$.value,z=new R(q,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(z)}}catch(K){V.e(K)}finally{V.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(O,$){return $?O+" "+d:O}}],[{key:"define",value:function(){f("ctx-menu-item",R,"button")}}]),R}(S(HTMLButtonElement)),L=function(F){y(R,F);var D=C(R);function R(O,$){var V,q;return g(this,R),_((V=x(q=D.call(this)),P(R.prototype)),"setAttribute",V).call(V,"class",$.cxtMenuClasses),q.style.position="absolute",q.onMenuItemClick=O,q.scratchpad=$,q}return w(R,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var O,$=p(this.children);try{for($.s();!(O=$.n()).done;){var V=O.value;V instanceof HTMLElement?V.style.display="none":console.warn("".concat(V," is not a HTMLElement"))}}catch(q){$.e(q)}finally{$.f()}}},{key:"hideSubmenus",value:function(){var O,$=p(this.children);try{for($.s();!(O=$.n()).done;){var V=O.value;V instanceof B&&V.submenu&&V.submenu.hide()}}catch(q){$.e(q)}finally{$.f()}}},{key:"appendMenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if($!==void 0){if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of the context menu"));this.insertBefore(O,$)}else this.appendChild(O);O.isClickable()&&this._performBindings(O)}},{key:"moveBefore",value:function(O,$){if(O.parentNode!==this)throw new Error("The item with id='".concat(O.id,"' is not a child of context menu"));if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of context menu"));this.removeChild(O),this.insertBefore(O,$)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var O=this.lastChild;O instanceof B?this._removeImmediateMenuItem(O):(console.warn("Found non menu item in the context menu: ",O),this.removeChild(O))}}},{key:"_removeImmediateMenuItem",value:function(O){if(!this._detachImmediateMenuItem(O))throw new Error("menu item(id=".concat(O.id,") is not in the context menu"));O.detachSubmenu(),O.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(O){if(O.parentNode===this){if(this.removeChild(O),this.children.length<=0){var $=this.parentNode;$ instanceof B&&$.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(O){var $=this._bindOnClick(O.onClickFunction);O.bindOnClickFunction($),O.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(O){var $=this;return function(){var V=$.scratchpad.currentCyEvent;O(V)}}}],[{key:"define",value:function(){f("menu-item-list",R,"div")}}]),R}(S(HTMLDivElement)),N=function(F){y(R,F);var D=C(R);function R(O,$){var V;return g(this,R),(V=D.call(this,O,$)).onMenuItemClick=function(q){A(q),V.hide(),O()},V}return w(R,[{key:"removeMenuItem",value:function(O){var $=O.parentElement;$ instanceof L&&this.contains($)&&$._removeImmediateMenuItem(O)}},{key:"appendMenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(O.id),_(P(R.prototype),"appendMenuItem",this).call(this,O,$)}},{key:"insertMenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=$.before,q=$.parent;if(this.ensureDoesntContain(O.id),V!==void 0){if(!this.contains(V))throw new Error("before(id=".concat(V.id,") is not in the context menu"));var z=V.parentNode;if(!(z instanceof L))throw new Error("Parent of before(id=".concat(V.id,") is not a submenu"));z.appendMenuItem(O,V)}else if(q!==void 0){if(!this.contains(q))throw new Error("parent(id=".concat(q.id,") is not a descendant of the context menu"));q.appendSubmenuItem(O)}else this.appendMenuItem(O)}},{key:"moveBefore",value:function(O,$){var V=O.parentElement;if(!this.contains(V))throw new Error("parent(id=".concat(V.id,") is not in the contex menu"));if(!this.contains($))throw new Error("before(id=".concat($.id,") is not in the context menu"));V.removeChild(O),this.insertMenuItem(O,{before:$})}},{key:"moveToSubmenu",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,q=O.parentElement;if(!(q instanceof L))throw new Error("current parent(id=".concat(q.id,") is not a submenu"));if(!this.contains(q))throw new Error("parent of the menu item(id=".concat(q.id,") is not in the context menu"));if($!==null){if(!this.contains($))throw new Error("parent(id=".concat($.id,") is not in the context menu"));q._detachImmediateMenuItem(O),$.appendSubmenuItem(O)}else V!==null&&(O.selector=V.selector,O.coreAsWell=V.coreAsWell),q._detachImmediateMenuItem(O),this.appendMenuItem(O)}},{key:"ensureDoesntContain",value:function(O){var $=document.getElementById(O);if($!==void 0&&this.contains($))throw new Error("There is already an element with id=".concat(O," in the context menu"))}}],[{key:"define",value:function(){f("ctx-menu",R,"div")}}]),R}(L);function H(F,D){(D==null||D>F.length)&&(D=F.length);for(var R=0,O=new Array(D);R<D;R++)O[R]=F[R];return O}function W(F){var D=this;D.scratch("cycontextmenus")||D.scratch("cycontextmenus",{});var R,O,$=function(ne){return D.scratch("cycontextmenus")[ne]},V=function(ne,Z){return D.scratch("cycontextmenus")[ne]=Z},q=$("options"),z=$("cxtMenu"),K=function(ne){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,X=J(ne);if(Z!==void 0){var ue=ve(Z);z.insertMenuItem(X,{parent:ue})}else z.insertMenuItem(X)},te=function(ne){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,X=0;X<ne.length;X++)K(ne[X],Z)},J=function(ne){var Z=D.scratch("cycontextmenus");return new B(ne,z.onMenuItemClick,Z)},ie=function(){$("active")&&(z.removeAllMenuItems(),D.off("tapstart",$("eventCyTapStart")),D.off(q.evtType,$("onCxttap")),D.off("viewport",$("onViewport")),document.removeEventListener("mouseup",$("hideOnNonCyClick")),z.parentNode.removeChild(z),z=void 0,V("cxtMenu",void 0),V("active",!1),V("anyVisibleChild",!1),V("onCxttap",void 0),V("onViewport",void 0),V("hideOnNonCyClick",void 0))},ve=function(ne){var Z=document.getElementById(ne);if(Z instanceof B)return Z;throw new Error("The item with id=".concat(ne," is not a menu item"))};if(F!=="get"){B.define(),L.define(),N.define(),q=function(ne,Z){var X={};for(var ue in ne)X[ue]=ne[ue];for(var de in Z)X[de]instanceof Array?X[de]=X[de].concat(Z[de]):X[de]=Z[de];return X}(v,F),V("options",q),$("active")&&ie(),V("active",!0),V("submenuIndicatorGen",function(ne){var Z=document.createElement("img");return Z.src=ne.src,Z.width=ne.width,Z.height=ne.height,Z.classList.add("cy-context-menus-submenu-indicator"),Z}.bind(void 0,q.submenuIndicator));var Ee=u(q.contextMenuClasses);V("cxtMenuClasses",Ee);var le=D.scratch("cycontextmenus");z=new N(function(){return V("cxtMenuPosition",void 0)},le),V("cxtMenu",z),D.container().appendChild(z),V("cxtMenuItemClasses",u(q.menuItemClasses));var re=q.menuItems;te(re),O=function(ne){V("currentCyEvent",ne),function(Y){var M,U=D.container(),ee=$("cxtMenuPosition"),Q=Y.position||Y.cyPosition;if(ee!=Q){z.hideMenuItems(),V("anyVisibleChild",!1),V("cxtMenuPosition",Q);var j={top:(M=U.getBoundingClientRect()).top,left:M.left},me=Y.renderedPosition||Y.cyRenderedPosition,ae=getComputedStyle(U)["border-width"],fe=parseInt(ae.replace("px",""))||0;fe>0&&(j.top+=fe,j.left+=fe);var ke=U.clientHeight,Ie=U.clientWidth,G=ke/2,oe=Ie/2;me.y>G&&me.x<=oe?(z.style.left=me.x+"px",z.style.bottom=ke-me.y+"px",z.style.right="auto",z.style.top="auto"):me.y>G&&me.x>oe?(z.style.right=Ie-me.x+"px",z.style.bottom=ke-me.y+"px",z.style.left="auto",z.style.top="auto"):me.y<=G&&me.x<=oe?(z.style.left=me.x+"px",z.style.top=me.y+"px",z.style.right="auto",z.style.bottom="auto"):(z.style.right=Ie-me.x+"px",z.style.top=me.y+"px",z.style.left="auto",z.style.bottom="auto")}}(ne);var Z,X=ne.target||ne.cyTarget,ue=function(Y,M){var U;if(typeof Symbol=="undefined"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(U=function(fe,ke){if(fe){if(typeof fe=="string")return H(fe,ke);var Ie=Object.prototype.toString.call(fe).slice(8,-1);return Ie==="Object"&&fe.constructor&&(Ie=fe.constructor.name),Ie==="Map"||Ie==="Set"?Array.from(fe):Ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ie)?H(fe,ke):void 0}}(Y))||M&&Y&&typeof Y.length=="number"){U&&(Y=U);var ee=0,Q=function(){};return{s:Q,n:function(){return ee>=Y.length?{done:!0}:{done:!1,value:Y[ee++]}},e:function(fe){throw fe},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,me=!0,ae=!1;return{s:function(){U=Y[Symbol.iterator]()},n:function(){var fe=U.next();return me=fe.done,fe},e:function(fe){ae=!0,j=fe},f:function(){try{me||U.return==null||U.return()}finally{if(ae)throw j}}}}(z.children);try{for(ue.s();!(Z=ue.n()).done;){var de=Z.value;de instanceof B&&(X===D?de.coreAsWell:X.is(de.selector))&&de.show&&(z.display(),V("anyVisibleChild",!0),de.display())}}catch(Y){ue.e(Y)}finally{ue.f()}var we=Array.from(z.children).filter(function(Y){if(Y instanceof B)return Y.isVisible()}),ye=we.length;we.forEach(function(Y,M){Y instanceof B&&(M<ye-1&&Y.getHasTrailingDivider()?Y.classList.add(d):Y.getHasTrailingDivider()&&Y.classList.remove(d))}),!$("anyVisibleChild")&&!function(Y){return Y.offsetWidth<=0&&Y.offsetHeight<=0||Y.style&&Y.style.display||getComputedStyle(Y).display}(z)&&z.hide()},D.on(q.evtType,O),V("onCxttap",O),function(){var ne=function(X){if(z.contains(X.originalEvent.target))return!1;z.hide(),V("cxtMenuPosition",void 0),V("currentCyEvent",void 0)};D.on("tapstart",ne),V("eventCyTapStart",ne);var Z=function(){z.hide()};D.on("viewport",Z),V("onViewport",Z)}(),R=function(ne){D.container().contains(ne.target)||z.contains(ne.target)||(z.hide(),V("cxtMenuPosition",void 0))},document.addEventListener("mouseup",R),V("hideOnNonCyClick",R),function(){var ne,Z=function(X,ue){var de;if(typeof Symbol=="undefined"||X[Symbol.iterator]==null){if(Array.isArray(X)||(de=function(ee,Q){if(ee){if(typeof ee=="string")return l(ee,Q);var j=Object.prototype.toString.call(ee).slice(8,-1);return j==="Object"&&ee.constructor&&(j=ee.constructor.name),j==="Map"||j==="Set"?Array.from(ee):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?l(ee,Q):void 0}}(X))||ue&&X&&typeof X.length=="number"){de&&(X=de);var we=0,ye=function(){};return{s:ye,n:function(){return we>=X.length?{done:!0}:{done:!1,value:X[we++]}},e:function(ee){throw ee},f:ye}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y,M=!0,U=!1;return{s:function(){de=X[Symbol.iterator]()},n:function(){var ee=de.next();return M=ee.done,ee},e:function(ee){U=!0,Y=ee},f:function(){try{M||de.return==null||de.return()}finally{if(U)throw Y}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(Z.s();!(ne=Z.n()).done;)ne.value.addEventListener("contextmenu",function(X){return X.preventDefault()})}catch(X){Z.e(X)}finally{Z.f()}}()}return function(ne){return{isActive:function(){return $("active")},appendMenuItem:function(Z){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return K(Z,X),ne},appendMenuItems:function(Z){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return te(Z,X),ne},removeMenuItem:function(Z){var X=ve(Z);return z.removeMenuItem(X),ne},setTrailingDivider:function(Z,X){var ue=ve(Z);return ue.setHasTrailingDivider(X),X?ue.classList.add(d):ue.classList.remove(d),ne},insertBeforeMenuItem:function(Z,X){var ue=J(Z),de=ve(X);return z.insertMenuItem(ue,{before:de}),ne},moveToSubmenu:function(Z){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ue=ve(Z);if(X===null)z.moveToSubmenu(ue);else if(typeof X=="string"){var de=ve(X.toString());z.moveToSubmenu(ue,de)}else X.coreAsWell!==void 0||X.selector!==void 0?z.moveToSubmenu(ue,null,X):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return ne},moveBeforeOtherMenuItem:function(Z,X){var ue=ve(Z),de=ve(X);return z.moveBefore(ue,de),ne},disableMenuItem:function(Z){return ve(Z).disable(),ne},enableMenuItem:function(Z){return ve(Z).enable(),ne},hideMenuItem:function(Z){return ve(Z).hide(),ne},showMenuItem:function(Z){return ve(Z).display(),ne},destroy:function(){return ie(),ne}}}(this)}},579:(i,o,s)=>{var l=s(621).contextMenus,u=function(c){c&&c("core","contextMenus",l)};typeof cytoscape!="undefined"&&u(cytoscape),i.exports=u}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})})(Wh);var Rx=Ss(Wh.exports);uo.use(Rx);const ac={menuItems:[]};class Aa{constructor(e){$e(this,"graph");$e(this,"cxtMenus");this.graph=e,se.debug("Register Context Menu."),ac.menuItems=[...a1(e),...i1(e)],e.cy.contextMenus(ac),this.cxtMenus=[]}static logWrap(e,r){if(!e.onClickFunction||e.onClickFunction.wrapped)return;const n=e.onClickFunction;e.onClickFunction=a=>{se.debug("Context Menu: Operation "+e.content+" on "+r(a)),n(a)},e.onClickFunction.wrapped=!0}static ontoWikiUrl(e){return"https://www.snik.eu/ontowiki/view/?r="+e+"&m="+Xd(e)}static addTippy(e){e.commands.forEach(r=>{if(r.tippy)return;r.tippy=!0;const n=gs[r.id];!n||(r.contentStyle={"pointer-eve":"all"},r.content=`<img src onerror="tippy('span')"><span data-tippy-content="${n}" style="padding:3em;">${r.content}</span>`)})}}var Uh={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(Je,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:s})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=11)}([function(r,n,a){r.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var o=arguments.length,s=Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return s.forEach(function(u){Object.keys(u).forEach(function(c){return i[c]=u[c]})}),i}},function(r,n,a){var i=a(0),o=Object.freeze({source:null,target:null,length:80,coeff:2e-4,weight:1});function s(u){return i({},o,u)}function l(u){var c=u.source,f=u.target,d=u.length<0?o.length:u.length,v=f.pos.x-c.pos.x,h=f.pos.y-c.pos.y,p=Math.sqrt(v*v+h*h);p===0&&(v=(Math.random()-.5)/50,h=(Math.random()-.5)/50,p=Math.sqrt(v*v+h*h));var m=p-d,g=(!u.coeff||u.coeff<0?o.springCoeff:u.coeff)*m/p*u.weight;c.force.x+=g*v,c.force.y+=g*h,f.force.x-=g*v,f.force.y-=g*h}r.exports={makeSpring:s,applySpring:l}},function(r,n,a){var i=function(){function A(B,L){for(var N=0;N<L.length;N++){var H=L[N];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(B,H.key,H)}}return function(B,L,N){return L&&A(B.prototype,L),N&&A(B,N),B}}();function o(A,B){if(!(A instanceof B))throw new TypeError("Cannot call a class as a function")}function s(A,B){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:A}function l(A,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);A.prototype=Object.create(B&&B.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(A,B):A.__proto__=B)}var u=a(13),c=a(0),f=a(4),d=a(10),v=d.tick,h=a(7),p=h.makeQuadtree,m=a(3),g=m.makeBody,b=a(1),w=b.makeSpring,y=function(B){return typeof B=="function"},C=function(B){return B.isParent()},E=function(B){return!C(B)},x=function(B){return C(B.source())||C(B.target())},_=function(B){return!x(B)},S=function(B){return B.scratch("euler").body},I=function(B){return C(B)?B.descendants().filter(E):B},k=function(B){var L=B.scratch("euler");return L||(L={},B.scratch("euler",L)),L},T=function(B,L){return y(B)?B(L):B},P=function(A){l(B,A);function B(L){return o(this,B),s(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,c({},f,L)))}return i(B,[{key:"prerun",value:function(N){var H=N;H.quadtree=p();var W=H.bodies=[];H.nodes.filter(function(D){return E(D)}).forEach(function(D){var R=k(D),O=g({pos:{x:R.x,y:R.y},mass:T(H.mass,D),locked:R.locked});O._cyNode=D,R.body=O,O._scratch=R,W.push(O)});var F=H.springs=[];H.edges.filter(_).forEach(function(D){var R=w({source:S(D.source()),target:S(D.target()),length:T(H.springLength,D),coeff:T(H.springCoeff,D)});R._cyEdge=D;var O=k(D);R._scratch=O,O.spring=R,F.push(R)}),H.edges.filter(x).forEach(function(D){var R=I(D.source()),O=I(D.target());R=[R[0]],O=[O[0]],R.forEach(function($){O.forEach(function(V){F.push(w({source:S($),target:S(V),length:T(H.springLength,D),coeff:T(H.springCoeff,D)}))})})})}},{key:"tick",value:function(N){var H=v(N),W=H<=N.movementThreshold;return W}}]),B}(u);r.exports=P},function(r,n,a){var i=Object.freeze({pos:{x:0,y:0},prevPos:{x:0,y:0},force:{x:0,y:0},velocity:{x:0,y:0},mass:1}),o=function(f){return{x:f.x,y:f.y}},s=function(f,d){return f!=null?f:d},l=function(f,d){return o(s(f,d))};function u(c){var f={};return f.pos=l(c.pos,i.pos),f.prevPos=l(c.prevPos,f.pos),f.force=l(c.force,i.force),f.velocity=l(c.velocity,i.velocity),f.mass=c.mass!=null?c.mass:i.mass,f.locked=c.locked,f}r.exports={makeBody:u}},function(r,n,a){var i=Object.freeze({springLength:function(s){return 80},springCoeff:function(s){return 8e-4},mass:function(s){return 4},gravity:-1.2,pull:.001,theta:.666,dragCoeff:.02,movementThreshold:1,timeStep:20});r.exports=i},function(r,n,a){var i=.02;function o(s,l){var u=void 0;l!=null?u=l:s.dragCoeff!=null?u=s.dragCoeff:u=i,s.force.x-=u*s.velocity.x,s.force.y-=u*s.velocity.y}r.exports={applyDrag:o}},function(r,n,a){function i(o,s){var l=0,u=0,c=0,f=0,d,v=o.length;if(v===0)return 0;for(d=0;d<v;++d){var h=o[d],p=s/h.mass;if(!h.grabbed){h.locked?(h.velocity.x=0,h.velocity.y=0):(h.velocity.x+=p*h.force.x,h.velocity.y+=p*h.force.y);var m=h.velocity.x,g=h.velocity.y,b=Math.sqrt(m*m+g*g);b>1&&(h.velocity.x=m/b,h.velocity.y=g/b),l=s*h.velocity.x,c=s*h.velocity.y,h.pos.x+=l,h.pos.y+=c,u+=Math.abs(l),f+=Math.abs(c)}}return(u*u+f*f)/v}r.exports={integrate:i}},function(r,n,a){var i=a(9),o=a(8),s=function(v){v.x=0,v.y=0},l=function(v,h){var p=1e-8,m=Math.abs(v.x-h.x),g=Math.abs(v.y-h.y);return m<p&&g<p};function u(){var d=[],v=new o,h=[],p=0,m=g();function g(){var C=h[p];return C?(C.quad0=null,C.quad1=null,C.quad2=null,C.quad3=null,C.body=null,C.mass=C.massX=C.massY=0,C.left=C.right=C.top=C.bottom=0):(C=new i,h[p]=C),++p,C}function b(C,E,x,_){var S=d,I=void 0,k=void 0,T=void 0,P=void 0,A=0,B=0,L=1,N=0,H=1;S[0]=m,s(C.force);var W=-C.pos.x,F=-C.pos.y,D=Math.sqrt(W*W+F*F),R=C.mass*_/D;for(A+=R*W,B+=R*F;L;){var O=S[N],$=O.body;L-=1,N+=1;var V=$!==C;$&&V?(k=$.pos.x-C.pos.x,T=$.pos.y-C.pos.y,P=Math.sqrt(k*k+T*T),P===0&&(k=(Math.random()-.5)/50,T=(Math.random()-.5)/50,P=Math.sqrt(k*k+T*T)),I=E*$.mass*C.mass/(P*P*P),A+=I*k,B+=I*T):V&&(k=O.massX/O.mass-C.pos.x,T=O.massY/O.mass-C.pos.y,P=Math.sqrt(k*k+T*T),P===0&&(k=(Math.random()-.5)/50,T=(Math.random()-.5)/50,P=Math.sqrt(k*k+T*T)),(O.right-O.left)/P<x?(I=E*O.mass*C.mass/(P*P*P),A+=I*k,B+=I*T):(O.quad0&&(S[H]=O.quad0,L+=1,H+=1),O.quad1&&(S[H]=O.quad1,L+=1,H+=1),O.quad2&&(S[H]=O.quad2,L+=1,H+=1),O.quad3&&(S[H]=O.quad3,L+=1,H+=1)))}C.force.x+=A,C.force.y+=B}function w(C){if(C.length!==0){var E=Number.MAX_VALUE,x=Number.MAX_VALUE,_=Number.MIN_VALUE,S=Number.MIN_VALUE,I=void 0,k=C.length;for(I=k;I--;){var T=C[I].pos.x,P=C[I].pos.y;T<E&&(E=T),T>_&&(_=T),P<x&&(x=P),P>S&&(S=P)}var A=_-E,B=S-x;for(A>B?S=x+A:_=E+B,p=0,m=g(),m.left=E,m.right=_,m.top=x,m.bottom=S,I=k-1,I>=0&&(m.body=C[I]);I--;)y(C[I])}}function y(C){for(v.reset(),v.push(m,C);!v.isEmpty();){var E=v.pop(),x=E.node,_=E.body;if(x.body){var N=x.body;if(x.body=null,l(N.pos,_.pos)){var H=3;do{var W=Math.random(),F=(x.right-x.left)*W,D=(x.bottom-x.top)*W;N.pos.x=x.left+F,N.pos.y=x.top+D,H-=1}while(H>0&&l(N.pos,_.pos));if(H===0&&l(N.pos,_.pos))return}v.push(x,N),v.push(x,_)}else{var S=_.pos.x,I=_.pos.y;x.mass=x.mass+_.mass,x.massX=x.massX+_.mass*S,x.massY=x.massY+_.mass*I;var k=0,T=x.left,P=(x.right+T)/2,A=x.top,B=(x.bottom+A)/2;S>P&&(k=k+1,T=P,P=x.right),I>B&&(k=k+2,A=B,B=x.bottom);var L=c(x,k);L?v.push(L,_):(L=g(),L.left=T,L.top=A,L.right=P,L.bottom=B,L.body=_,f(x,k,L))}}}return{insertBodies:w,updateBodyForce:b}}function c(d,v){return v===0?d.quad0:v===1?d.quad1:v===2?d.quad2:v===3?d.quad3:null}function f(d,v,h){v===0?d.quad0=h:v===1?d.quad1=h:v===2?d.quad2=h:v===3&&(d.quad3=h)}r.exports={makeQuadtree:u}},function(r,n,a){r.exports=i;function i(){this.stack=[],this.popIdx=0}i.prototype={isEmpty:function(){return this.popIdx===0},push:function(l,u){var c=this.stack[this.popIdx];c?(c.node=l,c.body=u):this.stack[this.popIdx]=new o(l,u),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function o(s,l){this.node=s,this.body=l}},function(r,n,a){r.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(r,n,a){var i=a(6),o=i.integrate,s=a(5),l=s.applyDrag,u=a(1),c=u.applySpring;function f(d){var v=d.bodies,h=d.springs,p=d.quadtree,m=d.timeStep,g=d.gravity,b=d.theta,w=d.dragCoeff,y=d.pull;v.forEach(function(I){var k=I._scratch;!k||(I.locked=k.locked,I.grabbed=k.grabbed,I.pos.x=k.x,I.pos.y=k.y)}),p.insertBodies(v);for(var C=0;C<v.length;C++){var E=v[C];p.updateBodyForce(E,g,b,y),l(E,w)}for(var x=0;x<h.length;x++){var _=h[x];c(_)}var S=o(v,m);return v.forEach(function(I){var k=I._scratch;!k||(k.x=I.pos.x,k.y=I.pos.y)}),S}r.exports={tick:f}},function(r,n,a){var i=a(2),o=function(l){!l||l("layout","euler",i)};typeof cytoscape!="undefined"&&o(cytoscape),r.exports=o},function(r,n,a){r.exports=Object.freeze({animate:!0,refresh:10,maxIterations:1e3,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,infinite:!1})},function(r,n,a){var i=function(){function g(b,w){for(var y=0;y<w.length;y++){var C=w[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}();function o(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}var s=a(0),l=a(12),u=a(14),c=a(15),f=c.setInitialPositionState,d=c.refreshPositions,v=c.getNodePositionData,h=a(16),p=h.multitick,m=function(){function g(b){o(this,g);var w=this.options=s({},l,b),y=this.state=s({},w,{layout:this,nodes:w.eles.nodes(),edges:w.eles.edges(),tickIndex:0,firstUpdate:!0});y.animateEnd=w.animate&&w.animate==="end",y.animateContinuously=w.animate&&!y.animateEnd}return i(g,[{key:"run",value:function(){var w=this,y=this.state;if(y.tickIndex=0,y.firstUpdate=!0,y.startTime=Date.now(),y.running=!0,y.currentBoundingBox=u(y.boundingBox,y.cy),y.ready&&w.one("ready",y.ready),y.stop&&w.one("stop",y.stop),y.nodes.forEach(function(F){return f(F,y)}),w.prerun(y),y.animateContinuously){var C=function(D){if(!!y.ungrabifyWhileSimulating){var R=v(D,y).grabbable=D.grabbable();R&&D.ungrabify()}},E=function(D){if(!!y.ungrabifyWhileSimulating){var R=v(D,y).grabbable;R&&D.grabify()}},x=function(D){return v(D,y).grabbed=D.grabbed()},_=function(D){var R=D.target;x(R)},S=_,I=function(D){var R=D.target,O=v(R,y),$=R.position();O.x=$.x,O.y=$.y},k=function(D){D.on("grab",_),D.on("free",S),D.on("drag",I)},T=function(D){D.removeListener("grab",_),D.removeListener("free",S),D.removeListener("drag",I)},P=function(){y.fit&&y.animateContinuously&&y.cy.fit(y.padding)},A=function(){d(y.nodes,y),P(),requestAnimationFrame(B)},B=function(){p(y,A,L)},L=function(){d(y.nodes,y),P(),y.nodes.forEach(function(D){E(D),T(D)}),y.running=!1,w.emit("layoutstop")};w.emit("layoutstart"),y.nodes.forEach(function(F){C(F),k(F)}),B()}else{for(var N=!1,H=function(){},W=function(){return N=!0};!N;)p(y,H,W);y.eles.layoutPositions(this,y,function(F){var D=v(F,y);return{x:D.x,y:D.y}})}return w.postrun(y),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"tick",value:function(){}},{key:"stop",value:function(){return this.state.running=!1,this}},{key:"destroy",value:function(){return this}}]),g}();r.exports=m},function(r,n,a){r.exports=function(i,o){return i==null?i={x1:0,y1:0,w:o.width(),h:o.height()}:i={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,w:i.w,h:i.h},i.x2==null&&(i.x2=i.x1+i.w),i.w==null&&(i.w=i.x2-i.x1),i.y2==null&&(i.y2=i.y1+i.h),i.h==null&&(i.h=i.y2-i.y1),i}},function(r,n,a){var i=a(0),o=function(c,f){var d=c.position(),v=f.currentBoundingBox,h=c.scratch(f.name);h==null&&(h={},c.scratch(f.name,h)),i(h,f.randomize?{x:v.x1+Math.random()*v.w,y:v.y1+Math.random()*v.h}:{x:d.x,y:d.y}),h.locked=c.locked()},s=function(c,f){return c.scratch(f.name)},l=function(c,f){c.positions(function(d){var v=d.scratch(f.name);return{x:v.x,y:v.y}})};r.exports={setInitialPositionState:o,getNodePositionData:s,refreshPositions:l}},function(r,n,a){var i=function(){},o=function(u){var c=u,f=u.layout,d=f.tick(c);c.firstUpdate&&(c.animateContinuously&&c.layout.emit("layoutready"),c.firstUpdate=!1),c.tickIndex++;var v=Date.now()-c.startTime;return!c.infinite&&(d||c.tickIndex>=c.maxIterations||v>=c.maxSimulationTime)},s=function(u){for(var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i,d=!1,v=u,h=0;h<v.refresh&&(d=!v.running||o(v),!d);h++);d?f():c()};r.exports={tick:o,multitick:s}}])})})(Uh);var Nx=Ss(Uh.exports);uo.use(Nx);const zx=500;let dn;function Gh(t,e,r=!1){return"layout"+t+e.sort().toString().replace(/[^a-z]/g,"")+!!r}function Kh(t){const e=[];for(let r=0;r<t.size();r++){const n=t[r];e.push([n.data(xe.ID),n.position()])}return e}function ic(t){const e={x:0,y:0};for(let r=0;r<t.length;r++){const n=t[r].position();e.x+=n.x,e.y+=n.y}return e.x/=t.length,e.y/=t.length,e}async function Rt(t,e,r,n=!1,a=!1){if(t.nodes().size()===0)return se.warn("layout.js#run: Graph empty. Nothing to layout."),!1;const i=Bn("layout");if(n){const d=new Set,v=[],h=t.nodes();for(let p=0;p<h.length;p++){const m=h[p],g=m.data(xe.SOURCE);g&&(d.has(g)||(t.add({group:"nodes",data:{id:g,mass:400,type:"virtual"}}),d.add(g)),v.push({group:"edges",data:{source:m.data(xe.ID),target:g,springLength:180}}))}se.debug("Separate subontologies checked"),se.debug(`Adding ${v.length} virtual edges.`),t.add(v)}else se.debug("Separate subontologies unchecked");dn&&dn.stop();let o,s;t.nodes(":selected").size()>1?(o=t.elements(":selected"),s=!0):(o=t.elements(":visible"),s=!1);let l;s&&(l=ic(o.nodes()));const u=o.size()>zx&&typeof window!="undefined",c=mo(st({},e),{animate:u});dn=o.layout(c),dn.on("layoutstop",()=>{if(s){const d=ic(o.nodes());o.nodes().shift({x:l.x-d.x,y:l.y-d.y})}if(i.stop(),r&&n){const d=t.nodes("[type='virtual']");se.debug(`Removing ${d.length} virtual nodes.`),t.remove(d)}if(r&&a){if(typeof localStorage=="undefined")return se.warn("web storage not available, could not write to cache."),!0;const d=Kh(t.nodes()),v=Gh(e.name,r,n);localStorage.setItem(v,JSON.stringify(d)),se.info("Replaced layout cache.")}});const f=dn.promiseOn("layoutready");return dn.run(),await f,!0}async function Fx(t,e){const r=new Map(e);let n=0,a=0;const o=await Rt(t,{name:"preset",fit:!0,positions:s=>{let l;return(l=r.get(s.data(xe.ID)))?(n++,l):(a++,{x:0,y:0})}});if(a>0||n<Kh.length){se.debug(`...${n}/${t.nodes().size()} node positions set. ${e.length-n} superfluous layout positions .`);const s=n/e.length,l=n/t.nodes().size();if(s<Ae.layoutCacheMinPrecision)return se.warn(`Precision of ${s} less than minimal required precision of ${Ae.layoutCacheMinPrecision}.`),!1;if(l<Ae.layoutCacheMinRecall)return se.warn(`Recall of ${l} less than minimal required of recall of ${Ae.layoutCacheMinRecall}.`),!1}else se.debug("...layout applied with 100% overlap.");return n===0?!1:o}async function Yh(t,e,r,n=!1){if(typeof localStorage=="undefined")return se.error("Web storage not available, could not access browser-based cache."),Rt(t,e,r,n,!1);const a=Gh(e.name,r,n),i=localStorage.getItem(a);if(i)try{const o=JSON.parse(i);if(se.debug(`Loaded layout from cache, applying ${o.length} positions...`),await Fx(t,o))return!0;se.warn("Could not apply layout to active graph, recalculating layout...")}catch(o){se.warn("Could not load cache item, recalculating layout...",o)}else se.warn("Layout not in cache, recalculating layout...");return Rt(t,e,r,n,!0)}function $x(t){const e=t.data("springLength");return e||800}const fa={name:"euler",springLength:t=>$x(t),animate:!0,refresh:50,maxSimulationTime:4e4,maxIterations:500,timeStep:80,randomize:!0,movementThreshold:1,fit:!1,mass:t=>t.data("mass")?t.data("mass"):40},zi={name:"euler",springLength:40,animate:!1,maxSimulationTime:4e4,maxIterations:500,timeStep:80,refresh:50,randomize:!1,movementThreshold:1,fit:!1,mass:40},jh={name:"cose",animate:!0,refresh:50,numIter:500,initialTemp:1e3,nestingFactor:1.01,randomize:!1,fit:!0};var Xh={exports:{}};(function(t,e){(function(r){var n={config:{},container:{},controls:{},errors:{},items:{},utils:{}};n.utils.F=function(){},n.utils.extend=function(a,i){a.prototype=n.utils.createObject(i.prototype),a.prototype.contructor=a},n.utils.createObject=function(a){return typeof Object.create=="function"?Object.create(a):(n.utils.F.prototype=a,new n.utils.F)},n.utils.objectKeys=function(a){var i,o;if(typeof Object.keys=="function")return Object.keys(a);i=[];for(o in a)i.push(o);return i},n.utils.getHashValue=function(a){var i=location.hash.match(new RegExp(a+"=([^&]*)"));return i?i[1]:null},n.utils.getQueryStringParam=function(a){if(window.location.hash)return n.utils.getHashValue(a);if(!window.location.search)return null;var i=window.location.search.substr(1).split("&"),o={},s,l;for(l=0;l<i.length;l++)s=i[l].split("="),o[s[0]]=s[1];return o[a]||null},n.utils.copy=function(a,i){for(var o in i)a[o]=i[o];return a},n.utils.animFrame=function(a){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)})(function(){a()})},n.utils.indexOf=function(a,i){if(!(i instanceof Array))throw new Error("Haystack is not an Array");if(i.indexOf)return i.indexOf(a);for(var o=0;o<i.length;o++)if(i[o]===a)return o;return-1},typeof/./!="function"&&typeof Int8Array!="object"?n.utils.isFunction=function(a){return typeof a=="function"||!1}:n.utils.isFunction=function(a){return toString.call(a)==="[object Function]"},n.utils.fnBind=function(a,i,o){if(Function.prototype.bind!==void 0)return Function.prototype.bind.apply(a,[i].concat(o||[]));var s=function(){var l=(o||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof s))return a.apply(i,l);a.apply(this,l)};return s.prototype=a.prototype,s},n.utils.removeFromArray=function(a,i){var o=n.utils.indexOf(a,i);if(o===-1)throw new Error("Can't remove item from array. Item is not in the array");i.splice(o,1)},n.utils.now=function(){return typeof Date.now=="function"?Date.now():new Date().getTime()},n.utils.getUniqueId=function(){return(Math.random()*1e15).toString(36).replace(".","")},n.utils.filterXss=function(a,i){var o=a.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return i===!0?o:o.replace(/>/g,"&gt;").replace(/</g,"&lt;")},n.utils.stripTags=function(a){return r.trim(a.replace(/(<([^>]+)>)/ig,""))},n.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[n.utils.EventEmitter.ALL_EVENT]=[],this.on=function(a,i,o){if(!n.utils.isFunction(i))throw new Error("Tried to listen to event "+a+" with non-function callback "+i);this._mSubscriptions[a]||(this._mSubscriptions[a]=[]),this._mSubscriptions[a].push({fn:i,ctx:o})},this.emit=function(a){var i,o,s;s=Array.prototype.slice.call(arguments,1);var l=this._mSubscriptions[a];if(l)for(l=l.slice(),i=0;i<l.length;i++)o=l[i].ctx||{},l[i].fn.apply(o,s);s.unshift(a);var u=this._mSubscriptions[n.utils.EventEmitter.ALL_EVENT].slice();for(i=0;i<u.length;i++)o=u[i].ctx||{},u[i].fn.apply(o,s)},this.unbind=function(a,i,o){if(!this._mSubscriptions[a])throw new Error("No subscribtions to unsubscribe for event "+a);var s,l=!1;for(s=0;s<this._mSubscriptions[a].length;s++)(!i||this._mSubscriptions[a][s].fn===i)&&(!o||o===this._mSubscriptions[a][s].ctx)&&(this._mSubscriptions[a].splice(s,1),l=!0);if(l===!1)throw new Error("Nothing to unbind for "+a)},this.off=this.unbind,this.trigger=this.emit},n.utils.EventEmitter.ALL_EVENT="__all",n.utils.DragListener=function(a,i){n.utils.EventEmitter.call(this),this._eElement=r(a),this._oDocument=r(document),this._eBody=r(document.body),this._nButtonCode=i||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=n.utils.fnBind(this.onMouseMove,this),this._fUp=n.utils.fnBind(this.onMouseUp,this),this._fDown=n.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},n.utils.DragListener.timeout=null,n.utils.copy(n.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(a){if(a.preventDefault(),a.button==0||a.type==="touchstart"){var i=this._getCoordinates(a);this._nOriginalX=i.x,this._nOriginalY=i.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(n.utils.fnBind(this._startDrag,this),this._nDelay)}},onMouseMove:function(a){if(this._timeout!=null){a.preventDefault();var i=this._getCoordinates(a);this._nX=i.x-this._nOriginalX,this._nY=i.y-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,a)}},onMouseUp:function(a){this._timeout!=null&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",a,this._nOriginalX+this._nX)))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(a){return a=a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0]:a,{x:a.pageX,y:a.pageY}}}),n.LayoutManager=function(a,i){if(!r||typeof r.noConflict!="function"){var o="jQuery is missing as dependency for GoldenLayout. ";throw o+=`Please either expose $ on GoldenLayout's scope (e.g. window) or add "jquery" to `,o+="your paths when using RequireJS/AMD",new Error(o)}n.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":n.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=n.utils.fnBind(this._onResize,this),this._unloadFunction=n.utils.fnBind(this._onUnload,this),this._maximisedItem=null,this._maximisePlaceholder=r('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new n.utils.EventHub(this),this.config=this._createConfig(a),this.container=i,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=r('<div class="lm_drop_tab_placeholder"></div>'),this.isSubWindow===!0&&r("body").css("visibility","hidden"),this._typeToItem={column:n.utils.fnBind(n.items.RowOrColumn,this,[!0]),row:n.utils.fnBind(n.items.RowOrColumn,this,[!1]),stack:n.items.Stack,component:n.items.Component}},n.LayoutManager.__lm=n,n.LayoutManager.minifyConfig=function(a){return new n.utils.ConfigMinifier().minifyConfig(a)},n.LayoutManager.unminifyConfig=function(a){return new n.utils.ConfigMinifier().unminifyConfig(a)},n.utils.copy(n.LayoutManager.prototype,{registerComponent:function(a,i){if(typeof i!="function")throw new Error("Please register a constructor function");if(this._components[a]!==void 0)throw new Error("Component "+a+" is already registered");this._components[a]=i},toConfig:function(a){var i,o,s;if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(a&&!(a instanceof n.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for(i={settings:n.utils.copy({},this.config.settings),dimensions:n.utils.copy({},this.config.dimensions),labels:n.utils.copy({},this.config.labels)},i.content=[],o=function(l,u){var c,f;for(c in u.config)c!=="content"&&(l[c]=u.config[c]);if(u.contentItems.length)for(l.content=[],f=0;f<u.contentItems.length;f++)l.content[f]={},o(l.content[f],u.contentItems[f])},a?o(i,{contentItems:[a]}):o(i,this.root),this._$reconcilePopoutWindows(),i.openPopouts=[],s=0;s<this.openPopouts.length;s++)i.openPopouts.push(this.openPopouts[s].toConfig());return i.maximisedItemId=this._maximisedItem?"__glMaximised":null,i},getComponent:function(a){if(this._components[a]===void 0)throw new n.errors.ConfigurationError('Unknown component "'+a+'"');return this._components[a]},init:function(){if(this._subWindowsCreated===!1&&(this._createSubWindows(),this._subWindowsCreated=!0),document.readyState==="loading"||document.body===null){r(document).ready(n.utils.fnBind(this.init,this));return}if(this.isSubWindow===!0&&this._creationTimeoutPassed===!1){setTimeout(n.utils.fnBind(this.init,this),7),this._creationTimeoutPassed=!0;return}this.isSubWindow===!0&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new n.controls.DropTargetIndicator(this.container),this.transitionIndicator=new n.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),this.emit("initialised")},updateSize:function(a,i){arguments.length===2?(this.width=a,this.height=i):(this.width=this.container.width(),this.height=this.container.height()),this.isInitialised===!0&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){this.isInitialised!==!1&&(this._onUnload(),r(window).off("resize",this._resizeFunction),r(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach(function(a){a._dragListener.destroy(),a._element=null,a._itemConfig=null,a._dragListener=null}),this._dragSources=[])},createContentItem:function(a,i){var o,s;if(typeof a.type!="string")throw new n.errors.ConfigurationError("Missing parameter 'type'",a);if(a.type==="react-component"&&(a.type="component",a.componentName="lm-react-component"),!this._typeToItem[a.type])throw o="Unknown type '"+a.type+"'. Valid types are "+n.utils.objectKeys(this._typeToItem).join(","),new n.errors.ConfigurationError(o);return a.type==="component"&&!(i instanceof n.items.Stack)&&!!i&&!(this.isSubWindow===!0&&i instanceof n.items.Root)&&(a={type:"stack",width:a.width,height:a.height,content:[a]}),s=new this._typeToItem[a.type](this,a,i),s},createPopout:function(a,i,o,s){var l=a,u=a instanceof n.items.AbstractContentItem,c=this,f,d,v,h,p,m;if(o=o||null,u){for(l=this.toConfig(a).content,o=n.utils.getUniqueId(),h=a.parent,p=a;h.contentItems.length===1&&!h.isRoot;)h=h.parent,p=p.parent;h.addId(o),isNaN(s)&&(s=n.utils.indexOf(p,h.contentItems))}else l instanceof Array||(l=[l]);return!i&&u&&(f=window.screenX||window.screenLeft,d=window.screenY||window.screenTop,v=a.element.offset(),i={left:f+v.left,top:d+v.top,width:a.element.width(),height:a.element.height()}),!i&&!u&&(i={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),u&&a.remove(),m=new n.controls.BrowserPopout(l,i,o,s,this),m.on("initialised",function(){c.emit("windowOpened",m)}),m.on("closed",function(){c._$reconcilePopoutWindows()}),this.openPopouts.push(m),m},createDragSource:function(a,i){this.config.settings.constrainDragToContainer=!1;var o=new n.controls.DragSource(r(a),i,this);return this._dragSources.push(o),o},selectItem:function(a,i){if(this.config.settings.selectionEnabled!==!0)throw new Error("Please set selectionEnabled to true to use this feature");a!==this.selectedItem&&(this.selectedItem!==null&&this.selectedItem.deselect(),a&&i!==!0&&a.select(),this.selectedItem=a,this.emit("selectionChanged",a))},_$maximiseItem:function(a){this._maximisedItem!==null&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=a,this._maximisedItem.addId("__glMaximised"),a.element.addClass("lm_maximised"),a.element.after(this._maximisePlaceholder),this.root.element.prepend(a.element),a.element.width(this.container.width()),a.element.height(this.container.height()),a.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(a){a.element.removeClass("lm_maximised"),a.removeId("__glMaximised"),this._maximisePlaceholder.after(a.element),this._maximisePlaceholder.remove(),a.parent.callDownwards("setSize"),this._maximisedItem=null,a.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(a,i){var o,s,l=1/0,u=null;for(o=0;o<this._itemAreas.length;o++)s=this._itemAreas[o],a>s.x1&&a<s.x2&&i>s.y1&&i<s.y2&&l>s.surface&&(l=s.surface,u=s);return u},_$createRootItemAreas:function(){var a=50,i={y2:0,x2:0,y1:"y2",x1:"x2"};for(var o in i){var s=this.root._$getArea();s.side=o,i[o]?s[o]=s[i[o]]-a:s[o]=a,s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$calculateItemAreas:function(){var a,i,o=this._getAllContentItems();if(this._itemAreas=[],o.length===1){this._itemAreas.push(this.root._$getArea());return}for(this._$createRootItemAreas(),a=0;a<o.length;a++)if(!!o[a].isStack&&(i=o[a]._$getArea(),i!==null))if(i instanceof Array)this._itemAreas=this._itemAreas.concat(i);else{this._itemAreas.push(i);var s={};n.utils.copy(s,i),n.utils.copy(s,i.contentItem._contentAreaDimensions.header.highlightArea),s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$normalizeContentItem:function(a,i){if(!a)throw new Error("No content item defined");if(n.utils.isFunction(a)&&(a=a()),a instanceof n.items.AbstractContentItem)return a;if(r.isPlainObject(a)&&a.type){var o=this.createContentItem(a,i);return o.callDownwards("_$init"),o}else throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var a=[],i;for(i=0;i<this.openPopouts.length;i++)this.openPopouts[i].getWindow().closed===!1?a.push(this.openPopouts[i]):this.emit("windowClosed",this.openPopouts[i]);this.openPopouts.length!==a.length&&(this.emit("stateChanged"),this.openPopouts=a)},_getAllContentItems:function(){var a=[],i=function(o){if(a.push(o),o.contentItems instanceof Array)for(var s=0;s<o.contentItems.length;s++)i(o.contentItems[s])};return i(this.root),a},_bindEvents:function(){this._isFullPage&&r(window).resize(this._resizeFunction),r(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(n.utils.fnBind(this.updateSize,this),100)},_createConfig:function(a){var i=n.utils.getQueryStringParam("gl-window");i&&(this.isSubWindow=!0,a=localStorage.getItem(i),a=JSON.parse(a),a=new n.utils.ConfigMinifier().unminifyConfig(a),localStorage.removeItem(i)),a=r.extend(!0,{},n.config.defaultConfig,a);var o=function(s){for(var l in s)l!=="props"&&typeof s[l]=="object"?o(s[l]):l==="type"&&s[l]==="react-component"&&(s.type="component",s.componentName="lm-react-component")};return o(a),a.settings.hasHeaders===!1&&(a.dimensions.headerHeight=0),a},_adjustToWindowMode:function(){var a=r('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');a.click(n.utils.fnBind(function(){this.emit("popIn")},this)),document.title=n.utils.stripTags(this.config.content[0].title),r("head").append(r("body link, body style, template, .gl_keep")),this.container=r("body").html("").css("visibility","visible").append(a),document.body.offsetHeight,window.__glInstance=this},_createSubWindows:function(){var a,i;for(a=0;a<this.config.openPopouts.length;a++)i=this.config.openPopouts[a],this.createPopout(i.content,i.dimensions,i.parentId,i.indexInParent)},_setContainer:function(){var a=r(this.container||"body");if(a.length===0)throw new Error("GoldenLayout container not found");if(a.length>1)throw new Error("GoldenLayout more than one container element specified");a[0]===document.body&&(this._isFullPage=!0,r("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=a},_create:function(a){var i;if(!(a.content instanceof Array))throw a.content===void 0?i="Missing setting 'content' on top level of configuration":i="Configuration parameter 'content' must be an array",new n.errors.ConfigurationError(i,a);if(a.content.length>1)throw i="Top level content can't contain more then one element.",new n.errors.ConfigurationError(i,a);this.root=new n.items.Root(this,{content:a.content},this.container),this.root.callDownwards("_$init"),a.maximisedItemId==="__glMaximised"&&this.root.getItemsById(a.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(this.config.settings.closePopoutsOnUnload===!0)for(var a=0;a<this.openPopouts.length;a++)this.openPopouts[a].close()},_adjustColumnsResponsive:function(){if(!this._useResponsiveLayout()||this._updatingColumnsResponsive||!this.config.dimensions||!this.config.dimensions.minItemWidth||this.root.contentItems.length===0||!this.root.contentItems[0].isRow){this._firstLoad=!1;return}this._firstLoad=!1;var a=this.root.contentItems[0].contentItems.length;if(!(a<=1)){var i=this.config.dimensions.minItemWidth,o=a*i;if(!(o<=this.width)){this._updatingColumnsResponsive=!0;for(var s=Math.max(Math.floor(this.width/i),1),l=a-s,u=this.root.contentItems[0],c=this._findAllStackContainers()[0],f=0;f<l;f++){var d=u.contentItems[u.contentItems.length-1];this._addChildContentItemsToContainer(c,d)}this._updatingColumnsResponsive=!1}}},_useResponsiveLayout:function(){return this.config.settings&&(this.config.settings.responsiveMode=="always"||this.config.settings.responsiveMode=="onload"&&this._firstLoad)},_addChildContentItemsToContainer:function(a,i){i.type==="stack"?i.contentItems.forEach(function(o){a.addChild(o),i.removeChild(o,!0)}):i.contentItems.forEach(n.utils.fnBind(function(o){this._addChildContentItemsToContainer(a,o)},this))},_findAllStackContainers:function(){var a=[];return this._findAllStackContainersRecursive(a,this.root),a},_findAllStackContainersRecursive:function(a,i){i.contentItems.forEach(n.utils.fnBind(function(o){o.type=="stack"?a.push(o):o.isComponent||this._findAllStackContainersRecursive(a,o)},this))}}),function(){t.exports=n.LayoutManager}(),n.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},n.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0,responsiveMode:"onload",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in",tabDropdown:"additional tabs"}},n.container.ItemContainer=function(a,i,o){n.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=a.componentName,this.parent=i,this.layoutManager=o,this.isHidden=!1,this._config=a,this._element=r(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},n.utils.copy(n.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),(this.height!=0||this.width!=0)&&this.emit("shown")},setSize:function(a,i){for(var o=this.parent,s=this,l,u,c,f,d,v;!o.isColumn&&!o.isRow;)if(s=o,o=o.parent,o.isRoot)return!1;for(c=o.isColumn?"height":"width",f=c==="height"?i:a,l=this[c]*(1/(s.config[c]/100)),u=f/l*100,d=(s.config[c]-u)/(o.contentItems.length-1),v=0;v<o.contentItems.length;v++)o.contentItems[v]===s?o.contentItems[v].config[c]=u:o.contentItems[v].config[c]+=d;return o.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(a){this.setState(r.extend(!0,this.getState(),a))},setState:function(a){this._config.componentState=a,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(a){this.parent.setTitle(a)},_$setSize:function(a,i){if(a!==this.width||i!==this.height){this.width=a,this.height=i;var o=this._contentElement[0],s=o.offsetWidth-o.clientWidth,l=o.offsetHeight-o.clientHeight;this._contentElement.width(this.width-s).height(this.height-l),this.emit("resize")}}}),n.controls.BrowserPopout=function(a,i,o,s,l){n.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=a,this._dimensions=i,this._parentId=o,this._indexInParent=s,this._layoutManager=l,this._popoutWindow=null,this._id=null,this._createWindow()},n.utils.copy(n.controls.BrowserPopout.prototype,{toConfig:function(){if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch{}},popIn:function(){var a,i;this._indexInParent,this._parentId&&(a=r.extend(!0,{},this.getGlInstance().toConfig()).content[0],i=this._layoutManager.root.getItemsById(this._parentId)[0],i||(this._layoutManager.root.contentItems.length>0?i=this._layoutManager.root.contentItems[0]:i=this._layoutManager.root)),i.addChild(a,this._indexInParent),this.close()},_createWindow:function(){var a,i=this._createUrl(),o=Math.floor(Math.random()*1e6).toString(36),s=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(i,o,s),!this._popoutWindow)if(this._layoutManager.config.settings.blockedPopoutsThrowError===!0){var l=new Error("Popout blocked");throw l.type="popoutBlocked",l}else return;r(this._popoutWindow).on("load",n.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",n.utils.fnBind(this._onClose,this)),a=setInterval(n.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(a))},this),10)},_serializeWindowOptions:function(a){var i=[],o;for(o in a)i.push(o+"="+a[o]);return i.join(",")},_createUrl:function(){var a={content:this._config},i="gl-window-config-"+n.utils.getUniqueId(),o;a=new n.utils.ConfigMinifier().minifyConfig(a);try{localStorage.setItem(i,JSON.stringify(a))}catch(s){throw new Error("Error while writing to localStorage "+s.toString())}return o=document.location.href.split("?"),o.length===1?o[0]+"?gl-window="+i:document.location.href+"&gl-window="+i},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(n.utils.fnBind(this.emit,this,["closed"]),50)}}),n.controls.DragProxy=function(a,i,o,s,l,u){n.utils.EventEmitter.call(this),this._dragListener=o,this._layoutManager=s,this._contentItem=l,this._originalParent=u,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=r(n.controls.DragProxy._template),u&&u._side&&(this._sided=u._sided,this.element.addClass("lm_"+u._side),["right","bottom"].indexOf(u._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:a,top:i}),this.element.find(".lm_tab").attr("title",n.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(l.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),r(document.body).append(this.element);var c=this._layoutManager.container.offset();this._minX=c.left,this._minY=c.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height(),this._setDropPosition(a,i)},n.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',n.utils.copy(n.controls.DragProxy.prototype,{_onDrag:function(a,i,o){o=o.originalEvent&&o.originalEvent.touches?o.originalEvent.touches[0]:o;var s=o.pageX,l=o.pageY,u=s>this._minX&&s<this._maxX&&l>this._minY&&l<this._maxY;!u&&this._layoutManager.config.settings.constrainDragToContainer===!0||this._setDropPosition(s,l)},_setDropPosition:function(a,i){this.element.css({left:a,top:i}),this._area=this._layoutManager._$getArea(a,i),this._area!==null&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(a,i,this._area))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),this._area!==null?this._area.contentItem._$onDrop(this._contentItem,this._area):this._lastValidArea!==null?this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):this._originalParent?this._originalParent.addChild(this._contentItem):this._contentItem._$destroy(),this.element.remove(),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var a=this._layoutManager.config.dimensions,i=a.dragProxyWidth,o=a.dragProxyHeight;this.element.width(i),this.element.height(o),i-=this._sided?a.headerHeight:0,o-=this._sided?0:a.headerHeight,this.childElementContainer.width(i),this.childElementContainer.height(o),this._contentItem.element.width(i),this._contentItem.element.height(o),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),n.controls.DragSource=function(a,i,o){this._element=a,this._itemConfig=i,this._layoutManager=o,this._dragListener=null,this._createDragListener()},n.utils.copy(n.controls.DragSource.prototype,{_createDragListener:function(){this._dragListener!==null&&this._dragListener.destroy(),this._dragListener=new n.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(a,i){var o=this._itemConfig;n.utils.isFunction(o)&&(o=o());var s=this._layoutManager._$normalizeContentItem(r.extend(!0,{},o)),l=new n.controls.DragProxy(a,i,this._dragListener,this._layoutManager,s,null);this._layoutManager.transitionIndicator.transitionElements(this._element,l.element)}}),n.controls.DropTargetIndicator=function(){this.element=r(n.controls.DropTargetIndicator._template),r(document.body).append(this.element)},n.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',n.utils.copy(n.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(a,i,o,s){this.highlightArea({x1:a,y1:i,x2:o,y2:s})},highlightArea:function(a){this.element.css({left:a.x1,top:a.y1,width:a.x2-a.x1,height:a.y2-a.y1}).show()},hide:function(){this.element.hide()}}),n.controls.Header=function(a,i){n.utils.EventEmitter.call(this),this.layoutManager=a,this.element=r(n.controls.Header._template),this.layoutManager.config.settings.selectionEnabled===!0&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",n.utils.fnBind(this._onHeaderClick,this))),this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.parent=i,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=n.utils.fnBind(this._hideAdditionalTabsDropdown,this),r(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,this._createControls()},n.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>','<ul class="lm_tabdropdown_list"></ul>',"</div>"].join(""),n.utils.copy(n.controls.Header.prototype,{createTab:function(a,i){var o,s;for(s=0;s<this.tabs.length;s++)if(this.tabs[s].contentItem===a)return;if(o=new n.controls.Tab(this,a),this.tabs.length===0){this.tabs.push(o),this.tabsContainer.append(o.element);return}i===void 0&&(i=this.tabs.length),i>0?this.tabs[i-1].element.after(o.element):this.tabs[0].element.before(o.element),this.tabs.splice(i,0,o),this._updateTabSizes()},removeTab:function(a){for(var i=0;i<this.tabs.length;i++)if(this.tabs[i].contentItem===a){this.tabs[i]._$destroy(),this.tabs.splice(i,1);return}throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(a){var i,o,s,l;for(i=0;i<this.tabs.length;i++)s=this.tabs[i].contentItem===a,this.tabs[i].setActive(s),s===!0&&(this.activeContentItem=a,this.parent.config.activeItemIndex=i);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&this._lastVisibleTabIndex!==-1&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(l=this.tabs[this.parent.config.activeItemIndex],o=this.parent.config.activeItemIndex;o>0;o--)this.tabs[o]=this.tabs[o-1];this.tabs[0]=l,this.parent.config.activeItemIndex=0}this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},position:function(a){var i=this.parent._header.show;return i&&!this.parent._side&&(i="top"),a!==void 0&&this.parent._header.show!=a&&(this.parent._header.show=a,this.parent._setupHeaderPosition()),i},_$setClosable:function(a){return this.closeButton&&this._isClosable()?(this.closeButton.element[a?"show":"hide"](),!0):!1},_$destroy:function(){this.emit("destroy",this);for(var a=0;a<this.tabs.length;a++)this.tabs[a]._$destroy();r(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(a){if(a in this.parent._header)return this.parent._header[a]},_createControls:function(){var a,i,o,s,l,u,c,f,d;d=n.utils.fnBind(this._showAdditionalTabsDropdown,this),f=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new n.controls.HeaderButton(this,f,"lm_tabdropdown",d),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(i=n.utils.fnBind(this._onPopoutClick,this),o=this._getHeaderSetting("popout"),new n.controls.HeaderButton(this,o,"lm_popout",i)),this._getHeaderSetting("maximise")&&(u=n.utils.fnBind(this.parent.toggleMaximise,this.parent),s=this._getHeaderSetting("maximise"),l=this._getHeaderSetting("minimise"),c=new n.controls.HeaderButton(this,s,"lm_maximise",u),this.parent.on("maximised",function(){c.element.attr("title",l)}),this.parent.on("minimised",function(){c.element.attr("title",s)})),this._isClosable()&&(a=n.utils.fnBind(this.parent.remove,this.parent),o=this._getHeaderSetting("close"),this.closeButton=new n.controls.HeaderButton(this,o,"lm_close",a))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(a){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){this.layoutManager.config.settings.popoutWholeStack===!0?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(a){a.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(a){if(this.tabs.length!==0){this.tabDropdownButton.element.toggle(a===!0);var i=function(w){return w?"width":"height"};this.element.css(i(!this.parent._sided),""),this.element[i(this.parent._sided)](this.layoutManager.config.dimensions.headerHeight);var o=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,s=0,l=0,u,c,f,d,v=0,h,p=this.layoutManager.config.settings.tabOverlapAllowance,m=!1,g=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,b=this.tabs[g];for(this.parent._sided&&(o=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,c=0;c<this.tabs.length;c++)if(u=this.tabs[c].element,this.tabsContainer.append(u),h=u.outerWidth()+parseInt(u.css("margin-right"),10),s+=h,g<=c?l=s:l=s+b.element.outerWidth()+parseInt(b.element.css("margin-right"),10),l>o){if(m)c===g&&(u.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(u));else if(g>0&&g<=c?v=(l-o)/(c-1):v=(l-o)/c,v<p){for(f=0;f<=c;f++)d=f!==g&&f!==0?"-"+v+"px":"",this.tabs[f].element.css({"z-index":c-f,"margin-left":d});this._lastVisibleTabIndex=c,this.tabsContainer.append(u)}else m=!0;if(m&&c!==g)if(a)u.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(u);else{this._updateTabSizes(!0);return}}else this._lastVisibleTabIndex=c,u.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(u)}}}),n.controls.HeaderButton=function(a,i,o,s){this._header=a,this.element=r('<li class="'+o+'" title="'+i+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=s,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},n.utils.copy(n.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),n.controls.Splitter=function(a,i,o){this._isVertical=a,this._size=i,this._grabSize=o<i?i:o,this.element=this._createElement(),this._dragListener=new n.utils.DragListener(this.element)},n.utils.copy(n.controls.Splitter.prototype,{on:function(a,i,o){this._dragListener.on(a,i,o)},_$destroy:function(){this.element.remove()},_createElement:function(){var a=r('<div class="lm_drag_handle"></div>'),i=r('<div class="lm_splitter"></div>');i.append(a);var o=this._grabSize-this._size,s=o/2;return this._isVertical?(a.css("top",-s),a.css("height",this._size+o),i.addClass("lm_vertical"),i.height(this._size)):(a.css("left",-s),a.css("width",this._size+o),i.addClass("lm_horizontal"),i.width(this._size)),i}}),n.controls.Tab=function(a,i){this.header=a,this.contentItem=i,this.element=r(n.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[i.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(i.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,this._layoutManager.config.settings.reorderEnabled===!0&&i.config.reorderEnabled===!0&&(this._dragListener=new n.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=n.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=n.utils.fnBind(this._onCloseClick,this),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},n.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',n.utils.copy(n.controls.Tab.prototype,{setTitle:function(a){this.element.attr("title",n.utils.stripTags(a)),this.titleElement.html(a)},setActive:function(a){a!==this.isActive&&(this.isActive=a,a?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(a,i){this.contentItem.parent.isMaximised===!0&&this.contentItem.parent.toggleMaximise(),new n.controls.DragProxy(a,i,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(a){if(a.button===0||a.type==="touchstart"){var i=this.header.parent.getActiveContentItem();this.contentItem!==i&&this.header.parent.setActiveContentItem(this.contentItem)}else a.button===1&&this.contentItem.config.isClosable&&this._onCloseClick(a)},_onCloseClick:function(a){a.stopPropagation(),this.header.parent.removeChild(this.contentItem)},_onCloseMousedown:function(a){a.stopPropagation()}}),n.controls.TransitionIndicator=function(){this._element=r('<div class="lm_transition_indicator"></div>'),r(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},n.utils.copy(n.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(a,i){},_nextAnimationFrame:function(){var a=this._measure(this._toElement),i=(n.utils.now()-this._animationStartTime)/this._totalAnimationDuration,o={},s;if(i>=1){this._element.hide();return}a.opacity=0;for(s in this._fromDimensions)o[s]=this._fromDimensions[s]+(a[s]-this._fromDimensions[s])*i;this._element.css(o),n.utils.animFrame(n.utils.fnBind(this._nextAnimationFrame,this))},_measure:function(a){var i=a.offset();return{left:i.left,top:i.top,width:a.outerWidth(),height:a.outerHeight()}}}),n.errors.ConfigurationError=function(a,i){Error.call(this),this.name="Configuration Error",this.message=a,this.node=i},n.errors.ConfigurationError.prototype=new Error,n.items.AbstractContentItem=function(a,i,o){n.utils.EventEmitter.call(this),this.config=this._extendItemNode(i),this.type=i.type,this.contentItems=[],this.parent=o,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=a,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(n.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),i.content&&this._createContentItems(i)},n.utils.copy(n.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(a,i,o,s){var l;for(o!==!0&&s!==!0&&this[a].apply(this,i||[]),l=0;l<this.contentItems.length;l++)this.contentItems[l].callDownwards(a,i,o);o===!0&&s!==!0&&this[a].apply(this,i||[])},removeChild:function(a,i){var o=n.utils.indexOf(a,this.contentItems);if(o===-1)throw new Error("Can't remove child item. Unknown content item");i!==!0&&this.contentItems[o]._$destroy(),this.contentItems.splice(o,1),this.config.content.splice(o,1),this.contentItems.length>0?this.callDownwards("setSize"):!(this instanceof n.items.Root)&&this.config.isClosable===!0&&this.parent.removeChild(this)},addChild:function(a,i){i===void 0&&(i=this.contentItems.length),this.contentItems.splice(i,0,a),this.config.content===void 0&&(this.config.content=[]),this.config.content.splice(i,0,a.config),a.parent=this,a.parent.isInitialised===!0&&a.isInitialised===!1&&a._$init()},replaceChild:function(a,i,o){i=this.layoutManager._$normalizeContentItem(i);var s=n.utils.indexOf(a,this.contentItems),l=a.element[0].parentNode;if(s===-1)throw new Error("Can't replace child. oldChild is not child of this");l.replaceChild(i.element[0],a.element[0]),o===!0&&(a.parent=null,a._$destroy()),this.contentItems[s]=i,i.parent=this,this.isStack&&(this.header.tabs[s].contentItem=i),i.parent.isInitialised===!0&&i.isInitialised===!1&&i._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var a=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),a},toggleMaximise:function(a){a&&a.preventDefault(),this.isMaximised===!0?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(a){this.config.title=a,this.emit("titleChanged",a),this.emit("stateChanged")},hasId:function(a){if(this.config.id){if(typeof this.config.id=="string")return this.config.id===a;if(this.config.id instanceof Array)return n.utils.indexOf(a,this.config.id)!==-1}else return!1},addId:function(a){this.hasId(a)||(this.config.id?typeof this.config.id=="string"?this.config.id=[this.config.id,a]:this.config.id instanceof Array&&this.config.id.push(a):this.config.id=a)},removeId:function(a){if(!this.hasId(a))throw new Error("Id not found");if(typeof this.config.id=="string")delete this.config.id;else if(this.config.id instanceof Array){var i=n.utils.indexOf(a,this.config.id);this.config.id.splice(i,1)}},getItemsByFilter:function(a){var i=[],o=function(s){for(var l=0;l<s.contentItems.length;l++)a(s.contentItems[l])===!0&&i.push(s.contentItems[l]),o(s.contentItems[l])};return o(this),i},getItemsById:function(a){return this.getItemsByFilter(function(i){return i.config.id instanceof Array?n.utils.indexOf(a,i.config.id)!==-1:i.config.id===a})},getItemsByType:function(a){return this._$getItemsByProperty("type",a)},getComponentsByName:function(a){var i=this._$getItemsByProperty("componentName",a),o=[],s;for(s=0;s<i.length;s++)o.push(i[s].instance);return o},_$getItemsByProperty:function(a,i){return this.getItemsByFilter(function(o){return o[a]===i})},_$setParent:function(a){this.parent=a},_$highlightDropZone:function(a,i,o){this.layoutManager.dropTargetIndicator.highlightArea(o)},_$onDrop:function(a){this.addChild(a)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(a){var i=this.getItemsByType("stack"),o,s;for(s=0;s<i.length;s++)o=i[s].getActiveContentItem(),o&&o.isComponent&&o.container[a]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(a){a=a||this.element;var i=a.offset(),o=a.width(),s=a.height();return{x1:i.left,y1:i.top,x2:i.left+o,y2:i.top+s,surface:o*s,contentItem:this}},_$init:function(){var a;for(this.setSize(),a=0;a<this.contentItems.length;a++)this.childElementContainer.append(this.contentItems[a].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(a){var i=new n.utils.BubblingEvent(a,this);this.emit(a,i)},_createContentItems:function(a){var i,o;if(!(a.content instanceof Array))throw new n.errors.ConfigurationError("content must be an Array",a);for(o=0;o<a.content.length;o++)i=this.layoutManager.createContentItem(a.content[o],this),this.contentItems.push(i)},_extendItemNode:function(a){for(var i in n.config.itemDefaultConfig)a[i]===void 0&&(a[i]=n.config.itemDefaultConfig[i]);return a},_propagateEvent:function(a,i){i instanceof n.utils.BubblingEvent&&i.isPropagationStopped===!1&&this.isInitialised===!0&&(this.isRoot===!1&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(a,i))},_scheduleEventPropagationToLayoutManager:function(a,i){n.utils.indexOf(a,this._throttledEvents)===-1?this.layoutManager.emit(a,i.origin):this._pendingEventPropagations[a]!==!0&&(this._pendingEventPropagations[a]=!0,n.utils.animFrame(n.utils.fnBind(this._propagateEventToLayoutManager,this,[a,i])))},_propagateEventToLayoutManager:function(a,i){this._pendingEventPropagations[a]=!1,this.layoutManager.emit(a,i)}}),n.items.Component=function(a,i,o){n.items.AbstractContentItem.call(this,a,i,o);var s=a.getComponent(this.config.componentName),l=r.extend(!0,{},this.config.componentState||{});l.componentName=this.config.componentName,this.componentName=this.config.componentName,this.config.title===""&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new n.container.ItemContainer(this.config,this,a),this.instance=new s(this.container,l),this.element=this.container._element},n.utils.extend(n.items.Component,n.items.AbstractContentItem),n.utils.copy(n.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){n.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),n.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),n.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),n.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),n.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),n.items.Root=function(a,i,o){n.items.AbstractContentItem.call(this,a,i,null),this.isRoot=!0,this.type="root",this.element=r('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=o,this._containerElement.append(this.element)},n.utils.extend(n.items.Root,n.items.AbstractContentItem),n.utils.copy(n.items.Root.prototype,{addChild:function(a){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");a=this.layoutManager._$normalizeContentItem(a,this),this.childElementContainer.append(a.element),n.items.AbstractContentItem.prototype.addChild.call(this,a),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(a,i){a=typeof a=="undefined"?this._containerElement.width():a,i=typeof i=="undefined"?this._containerElement.height():i,this.element.width(a),this.element.height(i),this.contentItems[0]&&(this.contentItems[0].element.width(a),this.contentItems[0].element.height(i))},_$highlightDropZone:function(a,i,o){this.layoutManager.tabDropPlaceholder.remove(),n.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(a,i){var o;if(a.isComponent&&(o=this.layoutManager.createContentItem({type:"stack",header:a.config.header||{}},this),o._$init(),o.addChild(a),a=o),!this.contentItems.length)this.addChild(a);else{var s=i.side[0]=="x"?"row":"column",l=i.side[0]=="x"?"width":"height",u=i.side[1]=="2",c=this.contentItems[0];if(!c instanceof n.items.RowOrColumn||c.type!=s){var f=this.layoutManager.createContentItem({type:s},this);this.replaceChild(c,f),f.addChild(a,u?0:void 0,!0),f.addChild(c,u?void 0:0,!0),c.config[l]=50,a.config[l]=50,f.callDownwards("setSize")}else{var d=c.contentItems[u?0:c.contentItems.length-1];c.addChild(a,u?0:void 0,!0),d.config[l]*=.5,a.config[l]=d.config[l],c.callDownwards("setSize")}}}}),n.items.RowOrColumn=function(a,i,o,s){n.items.AbstractContentItem.call(this,i,o,s),this.isRow=!a,this.isColumn=a,this.element=r('<div class="lm_item lm_'+(a?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=i.config.dimensions.borderWidth,this._splitterGrabSize=i.config.dimensions.borderGrabWidth,this._isColumn=a,this._dimension=a?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},n.utils.extend(n.items.RowOrColumn,n.items.AbstractContentItem),n.utils.copy(n.items.RowOrColumn.prototype,{addChild:function(a,i,o){var s,l,u,c;if(a=this.layoutManager._$normalizeContentItem(a,this),i===void 0&&(i=this.contentItems.length),this.contentItems.length>0?(c=this._createSplitter(Math.max(0,i-1)).element,i>0?(this.contentItems[i-1].element.after(c),c.after(a.element)):(this.contentItems[0].element.before(c),c.before(a.element))):this.childElementContainer.append(a.element),n.items.AbstractContentItem.prototype.addChild.call(this,a,i),s=1/this.contentItems.length*100,o===!0){this.emitBubblingEvent("stateChanged");return}for(u=0;u<this.contentItems.length;u++)this.contentItems[u]===a?a.config[this._dimension]=s:(l=this.contentItems[u].config[this._dimension]*=(100-s)/100,this.contentItems[u].config[this._dimension]=l);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(a,i){var o=a.config[this._dimension],s=n.utils.indexOf(a,this.contentItems),l=Math.max(s-1,0),u,c;if(s===-1)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[l]&&(this._splitter[l]._$destroy(),this._splitter.splice(l,1)),u=0;u<this.contentItems.length;u++)this.contentItems[u]!==a&&(this.contentItems[u].config[this._dimension]+=o/(this.contentItems.length-1));n.items.AbstractContentItem.prototype.removeChild.call(this,a,i),this.contentItems.length===1&&this.config.isClosable===!0?(c=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,c,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(a,i){var o=a.config[this._dimension];n.items.AbstractContentItem.prototype.replaceChild.call(this,a,i),i.config[this._dimension]=o,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){if(this.isInitialised!==!0){var a;for(n.items.AbstractContentItem.prototype._$init.call(this),a=0;a<this.contentItems.length-1;a++)this.contentItems[a].element.after(this._createSplitter(a).element)}},_setAbsoluteSizes:function(){var a,i=this._calculateAbsoluteSizes();for(a=0;a<this.contentItems.length;a++)i.additionalPixel-a>0&&i.itemSizes[a]++,this._isColumn?(this.contentItems[a].element.width(i.totalWidth),this.contentItems[a].element.height(i.itemSizes[a])):(this.contentItems[a].element.width(i.itemSizes[a]),this.contentItems[a].element.height(i.totalHeight))},_calculateAbsoluteSizes:function(){var a,i=(this.contentItems.length-1)*this._splitterSize,o=this.element.width(),s=this.element.height(),l=0,u,c,f=[];for(this._isColumn?s-=i:o-=i,a=0;a<this.contentItems.length;a++)this._isColumn?c=Math.floor(s*(this.contentItems[a].config.height/100)):c=Math.floor(o*(this.contentItems[a].config.width/100)),l+=c,f.push(c);return u=Math.floor((this._isColumn?s:o)-l),{itemSizes:f,additionalPixel:u,totalWidth:o,totalHeight:s}},_calculateRelativeSizes:function(){var a,i=0,o=[],s=this._isColumn?"height":"width";for(a=0;a<this.contentItems.length;a++)this.contentItems[a].config[s]!==void 0?i+=this.contentItems[a].config[s]:o.push(this.contentItems[a]);if(Math.round(i)===100){this._respectMinItemWidth();return}if(Math.round(i)<100&&o.length>0){for(a=0;a<o.length;a++)o[a].config[s]=(100-i)/o.length;this._respectMinItemWidth();return}if(Math.round(i)>100)for(a=0;a<o.length;a++)o[a].config[s]=50,i+=50;for(a=0;a<this.contentItems.length;a++)this.contentItems[a].config[s]=this.contentItems[a].config[s]/i*100;this._respectMinItemWidth()},_respectMinItemWidth:function(){var a=this.layoutManager.config.dimensions&&this.layoutManager.config.dimensions.minItemWidth||0,i=null,o=[],s=0,l=0,u=0,c=0,f,d,v=[],h;if(!(this._isColumn||!a||this.contentItems.length<=1)){i=this._calculateAbsoluteSizes();for(var p=0;p<this.contentItems.length;p++)this.contentItems[p],c=i.itemSizes[p],c<a?(l+=a-c,h={width:a}):(s+=c-a,h={width:c},o.push(h)),v.push(h);if(!(l===0||l>s)){for(f=l/s,u=l,p=0;p<o.length;p++)h=o[p],d=Math.round((h.width-a)*f),u-=d,h.width-=d;for(u!==0&&(v[v.length-1].width-=u),p=0;p<this.contentItems.length;p++)this.contentItems[p].config.width=v[p].width/i.totalWidth*100}}},_createSplitter:function(a){var i;return i=new n.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize),i.on("drag",n.utils.fnBind(this._onSplitterDrag,this,[i]),this),i.on("dragStop",n.utils.fnBind(this._onSplitterDragStop,this,[i]),this),i.on("dragStart",n.utils.fnBind(this._onSplitterDragStart,this,[i]),this),this._splitter.splice(a,0,i),i},_getItemsForSplitter:function(a){var i=n.utils.indexOf(a,this._splitter);return{before:this.contentItems[i],after:this.contentItems[i+1]}},_getMinimumDimensions:function(a){for(var i=0,o=0,s=0;s<a.length;++s)i=Math.max(a[s].minWidth||0,i),o=Math.max(a[s].minHeight||0,o);return{horizontal:i,vertical:o}},_onSplitterDragStart:function(a){var i=this._getItemsForSplitter(a),o=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],s=this._getMinimumDimensions(i.before.config.content),l=this._isColumn?s.vertical:s.horizontal,u=this._getMinimumDimensions(i.after.config.content),c=this._isColumn?u.vertical:u.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(i.before.element[this._dimension]()-(l||o)),this._splitterMaxPosition=i.after.element[this._dimension]()-(c||o)},_onSplitterDrag:function(a,i,o){var s=this._isColumn?o:i;s>this._splitterMinPosition&&s<this._splitterMaxPosition&&(this._splitterPosition=s,a.element.css(this._isColumn?"top":"left",s))},_onSplitterDragStop:function(a){var i=this._getItemsForSplitter(a),o=i.before.element[this._dimension](),s=i.after.element[this._dimension](),l=(this._splitterPosition+o)/(o+s),u=i.before.config[this._dimension]+i.after.config[this._dimension];i.before.config[this._dimension]=l*u,i.after.config[this._dimension]=(1-l)*u,a.element.css({top:0,left:0}),n.utils.animFrame(n.utils.fnBind(this.callDownwards,this,["setSize"]))}}),n.items.Stack=function(a,i,o){n.items.AbstractContentItem.call(this,a,i,o),this.element=r('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var s=a.config;this._header={show:s.settings.hasHeaders===!0&&i.hasHeaders!==!1,popout:s.settings.showPopoutIcon&&s.labels.popout,maximise:s.settings.showMaximiseIcon&&s.labels.maximise,close:s.settings.showCloseIcon&&s.labels.close,minimise:s.labels.minimise},s.header&&n.utils.copy(this._header,s.header),i.header&&n.utils.copy(this._header,i.header),i.content&&i.content[0]&&i.content[0].header&&n.utils.copy(this._header,i.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=r('<div class="lm_items"></div>'),this.header=new n.controls.Header(a,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},n.utils.extend(n.items.Stack,n.items.AbstractContentItem),n.utils.copy(n.items.Stack.prototype,{setSize:function(){var a,i=this._header.show?this.layoutManager.config.dimensions.headerHeight:0,o=this.element.width()-(this._sided?i:0),s=this.element.height()-(this._sided?0:i);for(this.childElementContainer.width(o),this.childElementContainer.height(s),a=0;a<this.contentItems.length;a++)this.contentItems[a].element.width(o).height(s);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var a,i;if(this.isInitialised!==!0){for(n.items.AbstractContentItem.prototype._$init.call(this),a=0;a<this.contentItems.length;a++)this.header.createTab(this.contentItems[a]),this.contentItems[a]._$hide();if(this.contentItems.length>0){if(i=this.contentItems[this.config.activeItemIndex||0],!i)throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(i)}}},setActiveContentItem:function(a){if(n.utils.indexOf(a,this.contentItems)===-1)throw new Error("contentItem is not a child of this stack");this._activeContentItem!==null&&this._activeContentItem._$hide(),this._activeContentItem=a,this.header.setActiveContentItem(a),a._$show(),this.emit("activeContentItemChanged",a),this.layoutManager.emit("activeContentItemChanged",a),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(a,i){a=this.layoutManager._$normalizeContentItem(a,this),n.items.AbstractContentItem.prototype.addChild.call(this,a,i),this.childElementContainer.append(a.element),this.header.createTab(a,i),this.setActiveContentItem(a),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(a,i){var o=n.utils.indexOf(a,this.contentItems);n.items.AbstractContentItem.prototype.removeChild.call(this,a,i),this.header.removeTab(a),this.header.activeContentItem===a&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(o-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var a,i,o;for(a=this.header._isClosable(),o=0,i=this.contentItems.length;o<i&&a;o++)a=this.contentItems[o].config.isClosable;this.header._$setClosable(a)},_$destroy:function(){n.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(a){if(this._dropSegment==="header"){this._resetHeaderDropZone(),this.addChild(a,this._dropIndex);return}if(this._dropSegment==="body"){this.addChild(a);return}var i=this._dropSegment==="top"||this._dropSegment==="bottom",o=this._dropSegment==="left"||this._dropSegment==="right",s=this._dropSegment==="top"||this._dropSegment==="left",l=i&&this.parent.isColumn||o&&this.parent.isRow,u=i?"column":"row",c=i?"height":"width",f,d,v;a.isComponent&&(d=this.layoutManager.createContentItem({type:"stack",header:a.config.header||{}},this),d._$init(),d.addChild(a),a=d),l?(f=n.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(a,s?f:f+1,!0),this.config[c]*=.5,a.config[c]=this.config[c],this.parent.callDownwards("setSize")):(u=i?"column":"row",v=this.layoutManager.createContentItem({type:u},this),this.parent.replaceChild(this,v),v.addChild(a,s?0:void 0,!0),v.addChild(this,s?void 0:0,!0),this.config[c]=50,a.config[c]=50,v.callDownwards("setSize"))},_$highlightDropZone:function(a,i){var o,s;for(o in this._contentAreaDimensions)if(s=this._contentAreaDimensions[o].hoverArea,s.x1<a&&s.x2>a&&s.y1<i&&s.y2>i){o==="header"?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?i:a)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(o));return}},_$getArea:function(){if(this.element.is(":visible")===!1)return null;var a=n.items.AbstractContentItem.prototype._$getArea,i=a.call(this,this.header.element),o=a.call(this,this.childElementContainer),s=o.x2-o.x1,l=o.y2-o.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}}},this._activeContentItem&&this._activeContentItem.isComponent===!1?i:this.contentItems.length===0?(this._contentAreaDimensions.body={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}},a.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.25,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.5,y2:o.y2}},this._contentAreaDimensions.top={hoverArea:{x1:o.x1+s*.25,y1:o.y1,x2:o.x1+s*.75,y2:o.y1+l*.5},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y1+l*.5}},this._contentAreaDimensions.right={hoverArea:{x1:o.x1+s*.75,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1+s*.5,y1:o.y1,x2:o.x2,y2:o.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:o.x1+s*.25,y1:o.y1+l*.5,x2:o.x1+s*.75,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1+l*.5,x2:o.x2,y2:o.y2}},a.call(this,this.element))},_highlightHeaderDropZone:function(a){var i,o,s=this.header.tabs.length,l=!1,u,c,f,d,v,h,p;if(s===0){v=this.header.element.offset(),this.layoutManager.dropTargetIndicator.highlightArea({x1:v.left,x2:v.left+100,y1:v.top+this.header.element.height()-20,y2:v.top+this.header.element.height()});return}for(i=0;i<s;i++)if(o=this.header.tabs[i].element,f=o.offset(),this._sided?(c=f.top,u=f.left,h=o.height()):(c=f.left,u=f.top,h=o.width()),a>c&&a<c+h){l=!0;break}if(!(l===!1&&a<c)){if(p=c+h/2,a<p?(this._dropIndex=i,o.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(i+1,s),o.after(this.layoutManager.tabDropPlaceholder)),this._sided){placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,this.layoutManager.dropTargetIndicator.highlightArea({x1:u,x2:u+o.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});return}d=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:d,x2:d+this.layoutManager.tabDropPlaceholder.width(),y1:u,y2:u+o.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var a=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=a,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var i=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[i](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(a){var i=this._contentAreaDimensions[a].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(i),this._dropSegment=a}}),n.utils.BubblingEvent=function(a,i){this.name=a,this.origin=i,this.isPropagationStopped=!1},n.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},n.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw new Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},n.utils.copy(n.utils.ConfigMinifier.prototype,{minifyConfig:function(a){var i={};return this._nextLevel(a,i,"_min"),i},unminifyConfig:function(a){var i={};return this._nextLevel(a,i,"_max"),i},_nextLevel:function(a,i,o){var s,l;for(s in a)a instanceof Array&&(s=parseInt(s,10)),a.hasOwnProperty(s)&&(l=this[o](s,this._keys),typeof a[s]=="object"?(i[l]=a[s]instanceof Array?[]:{},this._nextLevel(a[s],i[l],o)):i[l]=this[o](a[s],this._values))},_min:function(a,i){if(typeof a=="string"&&a.length===1)return"___"+a;var o=n.utils.indexOf(a,i);return o===-1?a:o.toString(36)},_max:function(a,i){return typeof a=="string"&&a.length===1?i[parseInt(a,36)]:typeof a=="string"&&a.substr(0,3)==="___"?a[3]:a}}),n.utils.EventHub=function(a){n.utils.EventEmitter.call(this),this._layoutManager=a,this._dontPropagateToParent=null,this._childEventSource=null,this.on(n.utils.EventEmitter.ALL_EVENT,n.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=n.utils.fnBind(this._onEventFromChild,this),r(window).on("gl_child_event",this._boundOnEventFromChild)},n.utils.EventHub.prototype._onEventFromThis=function(){var a=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&a[0]!==this._dontPropagateToParent&&this._propagateToParent(a),this._propagateToChildren(a),this._dontPropagateToParent=null,this._childEventSource=null},n.utils.EventHub.prototype._$onEventFromParent=function(a){this._dontPropagateToParent=a[0],this.emit.apply(this,a)},n.utils.EventHub.prototype._onEventFromChild=function(a){this._childEventSource=a.originalEvent.__gl,this.emit.apply(this,a.originalEvent.__glArgs)},n.utils.EventHub.prototype._propagateToParent=function(a){var i,o="gl_child_event";document.createEvent?(i=window.opener.document.createEvent("HTMLEvents"),i.initEvent(o,!0,!0)):(i=window.opener.document.createEventObject(),i.eventType=o),i.eventName=o,i.__glArgs=a,i.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(i):window.opener.fireEvent("on"+i.eventType,i)},n.utils.EventHub.prototype._propagateToChildren=function(a){var i,o;for(o=0;o<this._layoutManager.openPopouts.length;o++)i=this._layoutManager.openPopouts[o].getGlInstance(),i&&i!==this._childEventSource&&i.eventHub._$onEventFromParent(a)},n.utils.EventHub.prototype.destroy=function(){r(window).off("gl_child_event",this._boundOnEventFromChild)},n.utils.ReactComponentHandler=function(a,i){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=a,this._initialState=i,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},n.utils.copy(n.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(a,i){this._container.setState(i),this._originalComponentWillUpdate.call(this._reactComponent,a,i)},_getReactClass:function(){var a=this._container._config.component,i;if(!a)throw new Error("No react component name. type: react-component needs a field `component`");if(i=this._container.layoutManager.getComponent(a),!i)throw new Error('React component "'+a+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return i},_getReactComponent:function(){var a={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},i=r.extend(a,this._container._config.props);return React.createElement(this._reactClass,i)}})})(window.$)})(Xh);var Hx=Xh.exports;function Zh(){const t={settings:{selectionEnabled:!0},content:[{type:"stack",content:[]}]},e=new Hx(t);return e.on("selectionChanged ",r=>{se.info("SELECTION CHANGED"),se.info(r)}),e.on("stackCreated",function(r){e.selectItem(r);const n=Mt("goldenlayout-header"),a=document.importNode(n.content,!0);r.header.controlsContainer.prepend(a),r.on("activeContentItemChanged",()=>{e.selectItem(r)});const i=()=>r.getActiveContentItem().config.componentState,o=()=>i().cy,s=r.header.controlsContainer[0],l=()=>be.mainView.state.graph.menu.separateSubs()&&!i().graph.starMode,u=[[".plussign",()=>{o().zoom(o().zoom()*1.2)}],[".minussign",()=>{o().zoom(o().zoom()/1.2)}],[".addsign",()=>{new be}],[".recalculatesign",()=>{Rt(o(),fa,t.defaultSubOntologies,l(),!0)}],[".tightlayoutsign",()=>{Rt(o(),zi,t.defaultSubOntologies,l(),!0)}],[".compoundlayoutsign",()=>{Rt(o(),jh,t.defaultSubOntologies,!1,!0)}]];for(const c of u)s.querySelector(c[0]).addEventListener("click",c[1])}),e.init(),e}let Vo=0,qo=null,Nr=Zh();function Qh(t,e){const r=[];if(t.type==="component"&&t.componentName!=="Gesamtmodell")return r.push(t),r;for(const n of t.contentItems)r.push(...Qh(n));return r}const Wt=class{constructor(e=!0,r){$e(this,"initialized");$e(this,"state");$e(this,"cyContainer",document.createElement("div"));$e(this,"element");$e(this,"cxtMenu");r=r!=null?r:Vo++===0?"Gesamtmodell":"Teilmodell "+(Vo-1),this.state={title:r,name:"unnamed"};const n={title:r,type:"component",componentName:r,componentState:this.state,isClosable:Wt.mainView!==null},a=this;Wt.mainView!==null&&Wt.partViews.add(this),Nr.registerComponent(r,function(s){a.element=s.getElement()[0],s.getElement()[0].appendChild(a.cyContainer),s.on("destroy",()=>{Wt.partViews.delete(a)})}),Nr.root.contentItems[0].addChild(n);const i=new ze(a.cyContainer),o=i.cy;this.state.graph=i,this.state.cy=o,this.initialized=e?this.fill():Promise.resolve(),this.initialized.then(()=>{this.state.graph.invert(Jh().options.dayMode),this.cxtMenu=new Aa(this.state.graph)})}static views(){return[this.mainView,...this.partViews]}static activeState(){var e,r,n;return(n=(r=(e=Nr.selectedItem)==null?void 0:e.getActiveContentItem())==null?void 0:r.config)==null?void 0:n.componentState}static activeView(){var e;return(e=Nr.selectedItem)==null?void 0:e.getActiveContentItem()}async fill(){const e=this.state.graph;if(Wt.mainView===null)Wt.mainView=this,qo=oC(e),await qo,se.debug(`Main view ${this.state.name} loaded with ${e.cy.elements().size()} elements.`);else{await qo,e.cy.add(Wt.mainView.state.cy.elements()),se.debug(`Create view ${this.state.title} with ${e.cy.elements().size()} hidden elements copied from ${Wt.mainView.state.title}.`);const r=e.cy.elements();ze.setVisible(r,!1),ze.setVisible(r.edgesWith(r),!1),r.removeClass("source"),e.starMode=!0}}static reset(){const e=Qh(Nr.root);for(const r of e)r.remove();Wt.partViews.clear(),Vo=0,Nr.destroy(),Nr=Zh()}};let be=Wt;$e(be,"mainView",null),$e(be,"partViews",new Set);const Vx=[[`node[${xe.SOURCE}='meta']`,"meta","meta"],[`node[${xe.SOURCE}='bb']`,"BB","bb"],[`node[${xe.SOURCE}='ob']`,"OB","ob"],[`node[${xe.SOURCE}='ciox']`,"CioX","ciox"],[`node[${xe.SOURCE}='he']`,"HE","he"],[`node[${xe.SOURCE}='it']`,"IT","it"],[`node[${xe.SOURCE}='it4it']`,"IT4IT","it4it"],[`node[${xe.SUBTOP}='${xe.SUBTOP_ROLE}']`,"Role","role"],[`node[${xe.SUBTOP}='${xe.SUBTOP_FUNCTION}']`,"Function","function"],[`node[${xe.SUBTOP}='${xe.SUBTOP_ENTITY_TYPE}']`,"EntityType","entitytype"],[`node[?${xe.INSTANCE}]`,"Show Instances","show-instances"],[`node[!${xe.INSTANCE}]`,"Show Non-Instances"],["edge[p='http://www.w3.org/2000/01/rdf-schema#subClassOf']","subClassOf","subclassof"],["edge[p!='http://www.w3.org/2000/01/rdf-schema#subClassOf']","non-subClassOf","non-subclassof"],["edge[p^='http://www.w3.org/2004/02/skos/core#']","inter-ontology-relations","inter-ontology-relations"],["edge[p!^='http://www.w3.org/2004/02/skos/core#']","non-inter-ontology-relations","non-inter-ontology-relations"]],ui=[],ci=t=>be.views().map(e=>e.state.cy).forEach(e=>t(e));class qa{constructor(e,r,n){$e(this,"selector");$e(this,"label");$e(this,"checkbox");$e(this,"a");$e(this,"cssClass");$e(this,"visible");this.selector=e;const a=document.createElement("input");a.type="checkbox",this.checkbox=a,a.classList.add("filterbox"),a.autocomplete="off",a.checked=!0,this.label=r,this.a=document.createElement("a"),this.a.classList.add("dropdown-entry"),this.a.appendChild(a),this.a.setAttribute("tabindex","-1"),this.a.addEventListener("keydown",Sc(a)),this.a.appendChild(_c(a,r,n)),this.cssClass=`filter-${r}`,this.visible=!0,ci(i=>i.elements(this.selector).addClass(this.cssClass)),a.addEventListener("input",()=>this.setVisible(a.checked)),ui.push(this)}toString(){return this.label}setVisible(e){if(this.visible===e)return;this.visible=e;const r=ui.filter(n=>!n.visible).map(n=>n.selector);if(r.length===0)ci(n=>n.elements().removeClass("filtered")),ci(n=>n.elements().addClass("unfiltered")),se.debug("All filters checked");else{const n=r.reduce((a,i)=>a+","+i);ci(a=>{const i=a.elements(n);i.addClass("filtered"),i.removeClass("unfiltered");const o=a.elements().not(i);o.removeClass("filtered"),o.addClass("unfiltered")}),se.debug("filter "+n+" triggered")}}static addFilterEntries(e,r){for(const n of Vx){const a=new qa(n[0],n[1],n[2]);e.appendChild(a.a),r.push(a.a)}}static toJSON(){const e={};for(const r of ui)e[r.label]=r.visible;return e}static fromJSON(e){for(const r of ui)r.checkbox.checked=e[r.label],r.visible=e[r.label]}}const qx={version:Wr};function Jh(){const t={filters:qa.toJSON(),options:$i.optionsToJSON()};return Object.assign(t,qx),t}function Wx(t){qa.fromJSON(t.filters),$i.optionsFromJSON(t.options)}var ed={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(window,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},a.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var l in i)a.d(s,l,function(u){return i[u]}.bind(null,l));return s},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=0)}([function(r,n,a){var i=a(1),o=function(s){s&&s("core","svg",i.svg)};typeof cytoscape!="undefined"&&o(cytoscape),r.exports=o},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},o=a(2),s={},l={};l.number=function(u){return u!=null&&(u===void 0?"undefined":i(u))===i(1)&&!isNaN(u)},s.bufferCanvasImage=function(u,c){var f=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach(function(k){k._private.rscratch.pathCacheKey=null,k._private.rscratch.pathCache=null});var d=c.renderer(),v=c.mutableElements().boundingBox(),h=d.findContainerClientCoords(),p=u.full?Math.ceil(v.w):h[2],m=u.full?Math.ceil(v.h):h[3],g=l.number(u.maxWidth)||l.number(u.maxHeight),b=d.getPixelRatio(),w=1;if(u.scale!==void 0)p*=u.scale,m*=u.scale,w=u.scale;else if(g){var y=1/0,C=1/0;l.number(u.maxWidth)&&(y=w*u.maxWidth/p),l.number(u.maxHeight)&&(C=w*u.maxHeight/m),p*=w=Math.min(y,C),m*=w}g||(p*=b,m*=b,w*=b);var E=null,x=E=new o(p,m);if(p>0&&m>0){E.clearRect(0,0,p,m),u.bg&&(E.globalCompositeOperation="destination-over",E.fillStyle=u.bg,E.fillRect(0,0,p,m)),E.globalCompositeOperation="source-over";var _=d.getCachedZSortedEles();if(u.full)E.translate(-v.x1*w,-v.y1*w),E.scale(w,w),d.drawElements(E,_),E.scale(1/w,1/w),E.translate(v.x1*w,v.y1*w);else{var S=c.pan(),I={x:S.x*w,y:S.y*w};w*=c.zoom(),E.translate(I.x,I.y),E.scale(w,w),d.drawElements(E,_),E.scale(1/w,1/w),E.translate(-I.x,-I.y)}}return c.renderer().usePaths=f,x},s.svg=function(u){return s.bufferCanvasImage(u||{},this).getSerializedSvg()},r.exports=s},function(r,n,a){(function(){var i,o,s,l,u;function c(h,p){var m,g=Object.keys(p);for(m=0;m<g.length;m++)h=h.replace(new RegExp("\\{"+g[m]+"\\}","gi"),p[g[m]]);return h}function f(h){var p,m,g;if(!h)throw new Error("cannot create a random attribute name for an undefined object");p="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",m="";do for(m="",g=0;g<12;g++)m+=p[Math.floor(Math.random()*p.length)];while(h[m]);return m}function d(h){var p={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return p[h]||p.alphabetic}u=function(h,p){var m,g,b,w={};for(h=h.split(","),p=p||10,m=0;m<h.length;m+=2)g="&"+h[m+1]+";",b=parseInt(h[m],p),w[g]="&#"+b+";";return w["\\xa0"]="&#160;",w}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(h,p){this.__root=h,this.__ctx=p}).prototype.addColorStop=function(h,p){var m,g=this.__ctx.__createElement("stop");g.setAttribute("offset",h),p.indexOf("rgba")!==-1?(m=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(p),g.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:m[1],g:m[2],b:m[3]})),g.setAttribute("stop-opacity",m[4])):g.setAttribute("stop-color",p),this.__root.appendChild(g)},l=function(h,p){this.__root=h,this.__ctx=p},(o=function(h){var p,m={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((p=m).width=arguments[0],p.height=arguments[1]):p=h||m,!(this instanceof o))return new o(p);this.width=p.width||m.width,this.height=p.height||m.height,this.enableMirroring=p.enableMirroring!==void 0?p.enableMirroring:m.enableMirroring,this.canvas=this,this.__document=p.document||document,p.ctx?this.__ctx=p.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(h,p,m){p===void 0&&(p={});var g,b,w=this.__document.createElementNS("http://www.w3.org/2000/svg",h),y=Object.keys(p);for(m&&(w.setAttribute("fill","none"),w.setAttribute("stroke","none")),g=0;g<y.length;g++)b=y[g],w.setAttribute(b,p[b]);return w},o.prototype.__setDefaultStyles=function(){var h,p,m=Object.keys(i);for(h=0;h<m.length;h++)this[p=m[h]]=i[p].canvas},o.prototype.__applyStyleState=function(h){if(h){var p,m,g=Object.keys(h);for(p=0;p<g.length;p++)this[m=g[p]]=h[m]}},o.prototype.__getStyleState=function(){var h,p,m={},g=Object.keys(i);for(h=0;h<g.length;h++)m[p=g[h]]=this[p];return m},o.prototype.__applyStyleToCurrentElement=function(h){var p=this.__currentElement,m=this.__currentElementsToStyle;m&&(p.setAttribute(h,""),p=m.element,m.children.forEach(function(I){I.setAttribute(h,"")}));var g,b,w,y,C,E=Object.keys(i);for(g=0;g<E.length;g++)if(b=i[E[g]],w=this[E[g]],b.apply){if(w instanceof l){if(w.__ctx)for(;w.__ctx.__defs.childNodes.length;)y=w.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[y]=y,this.__defs.appendChild(w.__ctx.__defs.childNodes[0]);p.setAttribute(b.apply,c("url(#{id})",{id:w.__root.getAttribute("id")}))}else if(w instanceof s)p.setAttribute(b.apply,c("url(#{id})",{id:w.__root.getAttribute("id")}));else if(b.apply.indexOf(h)!==-1&&b.svg!==w)if(b.svgAttr!=="stroke"&&b.svgAttr!=="fill"||w.indexOf("rgba")===-1){var x=b.svgAttr;if(E[g]==="globalAlpha"&&(x=h+"-"+b.svgAttr,p.getAttribute(x)))continue;p.setAttribute(x,w)}else{C=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(w),p.setAttribute(b.svgAttr,c("rgb({r},{g},{b})",{r:C[1],g:C[2],b:C[3]}));var _=C[4],S=this.globalAlpha;S!=null&&(_*=S),p.setAttribute(b.svgAttr+"-opacity",_)}}},o.prototype.__closestGroupOrSvg=function(h){return(h=h||this.__currentElement).nodeName==="g"||h.nodeName==="svg"?h:this.__closestGroupOrSvg(h.parentNode)},o.prototype.getSerializedSvg=function(h){var p,m,g,b,w,y=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(y)&&(y=y.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),h)for(p=Object.keys(u),m=0;m<p.length;m++)g=p[m],b=u[g],(w=new RegExp(g,"gi")).test(y)&&(y=y.replace(w,b));return y},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var h=this.__createElement("g"),p=this.__closestGroupOrSvg();this.__groupStack.push(p),p.appendChild(h),this.__currentElement=h,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var h=this.__stack.pop();this.__applyStyleState(h)},o.prototype.__addTransform=function(h){var p=this.__closestGroupOrSvg();if(p.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:p,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var m=this.__createElement("g");p.appendChild(m),this.__currentElement=m}var g=this.__currentElement.getAttribute("transform");g?g+=" ":g="",g+=h,this.__currentElement.setAttribute("transform",g)},o.prototype.scale=function(h,p){p===void 0&&(p=h),this.__addTransform(c("scale({x},{y})",{x:h,y:p}))},o.prototype.rotate=function(h){var p=180*h/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:p,cx:0,cy:0}))},o.prototype.translate=function(h,p){this.__addTransform(c("translate({x},{y})",{x:h,y:p}))},o.prototype.transform=function(h,p,m,g,b,w){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:h,b:p,c:m,d:g,e:b,f:w}))},o.prototype.beginPath=function(){var h;this.__currentDefaultPath="",this.__currentPosition={},h=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(h),this.__currentElement=h},o.prototype.__applyCurrentDefaultPath=function(){var h=this.__currentElement;h.nodeName==="path"?h.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",h.nodeName)},o.prototype.__addPathCommand=function(h){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=h},o.prototype.moveTo=function(h,p){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:h,y:p},this.__addPathCommand(c("M {x} {y}",{x:h,y:p}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(h,p){this.__currentPosition={x:h,y:p},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:h,y:p})):this.__addPathCommand(c("M {x} {y}",{x:h,y:p}))},o.prototype.bezierCurveTo=function(h,p,m,g,b,w){this.__currentPosition={x:b,y:w},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:h,cp1y:p,cp2x:m,cp2y:g,x:b,y:w}))},o.prototype.quadraticCurveTo=function(h,p,m,g){this.__currentPosition={x:m,y:g},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:h,cpy:p,x:m,y:g}))};var v=function(h){var p=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return[h[0]/p,h[1]/p]};o.prototype.arcTo=function(h,p,m,g,b){var w=this.__currentPosition&&this.__currentPosition.x,y=this.__currentPosition&&this.__currentPosition.y;if(w!==void 0&&y!==void 0){if(b<0)throw new Error("IndexSizeError: The radius provided ("+b+") is negative.");if(w===h&&y===p||h===m&&p===g||b===0)this.lineTo(h,p);else{var C=v([w-h,y-p]),E=v([m-h,g-p]);if(C[0]*E[1]!=C[1]*E[0]){var x=C[0]*E[0]+C[1]*E[1],_=Math.acos(Math.abs(x)),S=v([C[0]+E[0],C[1]+E[1]]),I=b/Math.sin(_/2),k=h+I*S[0],T=p+I*S[1],P=[-C[1],C[0]],A=[E[1],-E[0]],B=function(H){var W=H[0];return H[1]>=0?Math.acos(W):-Math.acos(W)},L=B(P),N=B(A);this.lineTo(k+P[0]*b,T+P[1]*b),this.arc(k,T,b,L,N)}else this.lineTo(h,p)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(h,p,m,g){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(h,p),this.lineTo(h+m,p),this.lineTo(h+m,p+g),this.lineTo(h,p+g),this.lineTo(h,p),this.closePath()},o.prototype.fillRect=function(h,p,m,g){var b;b=this.__createElement("rect",{x:h,y:p,width:m,height:g},!0),this.__closestGroupOrSvg().appendChild(b),this.__currentElement=b,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(h,p,m,g){var b;b=this.__createElement("rect",{x:h,y:p,width:m,height:g},!0),this.__closestGroupOrSvg().appendChild(b),this.__currentElement=b,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var h=this.__closestGroupOrSvg().getAttribute("transform"),p=this.__root.childNodes[1],m=p.childNodes,g=m.length-1;g>=0;g--)m[g]&&p.removeChild(m[g]);this.__currentElement=p,this.__groupStack=[],h&&this.__addTransform(h)},o.prototype.clearRect=function(h,p,m,g){if(h!==0||p!==0||m!==this.width||g!==this.height){var b,w=this.__closestGroupOrSvg();b=this.__createElement("rect",{x:h,y:p,width:m,height:g,fill:"#FFFFFF"},!0),w.appendChild(b)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(h,p,m,g){var b=this.__createElement("linearGradient",{id:f(this.__ids),x1:h+"px",x2:m+"px",y1:p+"px",y2:g+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(b),new s(b,this)},o.prototype.createRadialGradient=function(h,p,m,g,b,w){var y=this.__createElement("radialGradient",{id:f(this.__ids),cx:g+"px",cy:b+"px",r:w+"px",fx:h+"px",fy:p+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(y),new s(y,this)},o.prototype.__parseFont=function(){var h=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),p={style:h[1]||"normal",size:h[4]||"10px",family:h[6]||"sans-serif",weight:h[3]||"normal",decoration:h[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(p.decoration="underline"),this.__fontHref&&(p.href=this.__fontHref),p},o.prototype.__wrapTextLink=function(h,p){if(h.href){var m=this.__createElement("a");return m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.href),m.appendChild(p),m}return p},o.prototype.__applyText=function(h,p,m,g){var b,w,y=this.__parseFont(),C=this.__closestGroupOrSvg(),E=this.__createElement("text",{"font-family":y.family,"font-size":y.size,"font-style":y.style,"font-weight":y.weight,"text-decoration":y.decoration,x:p,y:m,"text-anchor":(b=this.textAlign,w={left:"start",right:"end",center:"middle",start:"start",end:"end"},w[b]||w.start),"dominant-baseline":d(this.textBaseline)},!0);E.appendChild(this.__document.createTextNode(h)),this.__currentElement=E,this.__applyStyleToCurrentElement(g),C.appendChild(this.__wrapTextLink(y,E))},o.prototype.fillText=function(h,p,m){this.__applyText(h,p,m,"fill")},o.prototype.strokeText=function(h,p,m){this.__applyText(h,p,m,"stroke")},o.prototype.measureText=function(h){return this.__ctx.font=this.font,this.__ctx.measureText(h)},o.prototype.arc=function(h,p,m,g,b,w){if(g!==b){(g%=2*Math.PI)===(b%=2*Math.PI)&&(b=(b+2*Math.PI-.001*(w?-1:1))%(2*Math.PI));var y=h+m*Math.cos(b),C=p+m*Math.sin(b),E=h+m*Math.cos(g),x=p+m*Math.sin(g),_=w?0:1,S=0,I=b-g;I<0&&(I+=2*Math.PI),S=w?I>Math.PI?0:1:I>Math.PI?1:0,this.lineTo(E,x),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:m,ry:m,xAxisRotation:0,largeArcFlag:S,sweepFlag:_,endX:y,endY:C})),this.__currentPosition={x:y,y:C}}},o.prototype.clip=function(){var h=this.__closestGroupOrSvg(),p=this.__createElement("clipPath"),m=f(this.__ids),g=this.__createElement("g");this.__applyCurrentDefaultPath(),h.removeChild(this.__currentElement),p.setAttribute("id",m),p.appendChild(this.__currentElement),this.__defs.appendChild(p),h.setAttribute("clip-path",c("url(#{id})",{id:m})),h.appendChild(g),this.__currentElement=g},o.prototype.drawImage=function(){var h,p,m,g,b,w,y,C,E,x,_,S,I,k=Array.prototype.slice.call(arguments),T=k[0],P=0,A=0;if(k.length===3)h=k[1],p=k[2],m=b=T.width,g=w=T.height;else if(k.length===5)h=k[1],p=k[2],m=k[3],g=k[4],b=T.width,w=T.height;else{if(k.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);P=k[1],A=k[2],b=k[3],w=k[4],h=k[5],p=k[6],m=k[7],g=k[8]}y=this.__closestGroupOrSvg(),this.__currentElement;var B="translate("+h+", "+p+")";if(T instanceof o){if((C=T.getSvg().cloneNode(!0)).childNodes&&C.childNodes.length>1){for(E=C.childNodes[0];E.childNodes.length;)I=E.childNodes[0].getAttribute("id"),this.__ids[I]=I,this.__defs.appendChild(E.childNodes[0]);if(x=C.childNodes[1]){var L,N=x.getAttribute("transform");L=N?N+" "+B:B,x.setAttribute("transform",L),y.appendChild(x)}}}else T.nodeName!=="CANVAS"&&T.nodeName!=="IMG"||((_=this.__createElement("image")).setAttribute("width",m),_.setAttribute("height",g),_.setAttribute("opacity",this.globalAlpha),_.setAttribute("preserveAspectRatio","none"),(S=this.__document.createElement("canvas")).width=m,S.height=g,S.getContext("2d").drawImage(T,P,A,b,w,0,0,m,g),T=S,_.setAttribute("transform",B),_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T.nodeName==="CANVAS"?T.toDataURL():T.getAttribute("src")),y.appendChild(_))},o.prototype.createPattern=function(h,p){var m,g=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),b=f(this.__ids);return g.setAttribute("id",b),g.setAttribute("width",h.width),g.setAttribute("height",h.height),h.nodeName==="CANVAS"||h.nodeName==="IMG"?((m=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",h.width),m.setAttribute("height",h.height),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.nodeName==="CANVAS"?h.toDataURL():h.getAttribute("src")),g.appendChild(m),this.__defs.appendChild(g)):h instanceof o&&(g.appendChild(h.__root.childNodes[1]),this.__defs.appendChild(g)),new l(g,this)},o.prototype.setLineDash=function(h){h&&h.length>0?this.lineDash=h.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof r.exports=="object"&&(r.exports=o)})()}])})})(ed);var Ux=Ss(ed.exports);uo.use(Ux);const _r=document.createElement("a");document.body.appendChild(_r);_r.style.display="none";function fl(t,e){const r=JSON.stringify(t),n=new Blob([r],{type:"application/json"}),a=window.URL.createObjectURL(n);_r.href=a,_r.download=e,_r.click(),window.URL.revokeObjectURL(a),se.debug("JSON File saved: "+e)}function td(t,e){_r.href=t,_r.download=e,_r.click(),window.URL.revokeObjectURL(t),se.debug("File saved: "+e)}function Gx(t){const e=t.cy.json();delete e.style,fl(e,"snik.json")}function Kx(t){const e={title:be.mainView.state.title,graph:be.mainView.state.cy.json(),options:t};delete e.graph.style;const r={tabs:[],state:Jh(),mainGraph:e};for(const n of be.partViews){const a={title:n.state.title,graph:n.state.cy.json()};delete a.graph.style,r.tabs.push(a)}fl(r,"snik-session.json")}function Yx(t){const e={version:Wr,title:t.state.title,graph:t.state.cy.json()};delete e.graph.style,fl(e,"snik-view.json")}function fi(t,e,r,n){const a={bg:e?"white":"black",full:r,maxWidth:void 0,maxHeight:void 0};n?(a.maxWidth=Ae.download.image.max.width,a.maxHeight=Ae.download.image.max.height):r&&(a.maxWidth=Ae.download.image.standard.width,a.maxHeight=Ae.download.image.standard.height);const i=t.cy.png(a);td(i,"snik.png")}function oc(t,e,r=!0){const n={full:r,scale:1,bg:e?"white":"black"},a=t.cy.svg(n),i=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),o=window.URL.createObjectURL(i);td(o,"snik.svg")}const rd=new Map,nd=new Map,hi=new Set;async function sc(t,e){const r=`SELECT DISTINCT(?class) ?label
  FROM <http://www.snik.eu/ontology/${t}>
  {
    ?class  ?p ?o;
            a owl:Class;
            rdfs:label ?label.
    {?class meta:chapter <${e}>.}
    UNION
    {?class meta:chapter/meta:subChapterOf <${e}>.}
    UNION
    {?class meta:chapter/meta:subChapterOf/meta:subChapterOf <${e}>.}
    UNION
    {?class meta:chapter/meta:subChapterOf/meta:subChapterOf/meta:subChapterOf <${e}>.}

    FILTER(LANGMATCHES(LANG(?label),"en"))
  }
  ORDER BY ASC(?class)`,n=await vr(r);n.forEach(i=>{nd.set(i.class.value,i.label.value)});const a=n.map(i=>i.class.value);return rd.set(e,a),new Set(a)}async function lc(t,e){const r=Mt("tab:chapter-search-classes");for(;r.rows.length>0;)r.deleteRow(0);const n=(o,s)=>{const u=r.insertRow().insertCell(),c=document.createElement("a");u.appendChild(c),c.innerText=o,c.addEventListener("click",()=>{Kt.close("chapter-search"),t.resetStyle(),t.presentUris(Array.from(e),s)})};n("Show Only those in Graph",!0),n("Highlight All in Graph",!1);const i=r.insertRow().insertCell();i.innerHTML="&nbsp;";for(const o of e){const l=r.insertRow().insertCell(),u=document.createElement("a");l.appendChild(u),u.innerText=nd.get(o),u.addEventListener("click",()=>{Kt.close("chapter-search"),t.presentUri(o)})}}async function uc(t,e){Kt.show("chapter-search");const r=Mt("tab:chapter-search-chapters");for(;r.rows.length>0;)r.deleteRow(0);{const s=Mt("tab:chapter-search-classes");for(;s.rows.length>0;)s.deleteRow(0)}hi.clear();const n=r.insertRow().insertCell(),a=document.createElement("a");n.appendChild(a),a.setAttribute("data-i18n","deselect-all"),a.innerText=kc("deselect-all"),a.addEventListener("click",()=>{for(const s of document.getElementsByClassName("chaptersearch-checkbox"))s.checked&&s.click()});const i=`SELECT COUNT(DISTINCT(?c)) AS ?count ?ch
  FROM <http://www.snik.eu/ontology/${e}>
  {
    ?c ?p ?o; a owl:Class.
    ?c meta:chapter/meta:subChapterOf* ?ch.
  } ORDER BY ASC(?ch)`,o=await vr(i);for(const s of o){const l=s.ch.value,u=r.insertRow(),c=u.insertCell();c.addEventListener("click",async()=>lc(t,await sc(e,l)));const f=document.createElement("a");c.appendChild(f),f.innerText=s.ch.value;const d=u.insertCell();d.innerHTML=s.count.value;const v=u.insertCell(),h=document.createElement("input");v.appendChild(h),h.setAttribute("type","checkbox"),h.classList.add("chaptersearch-checkbox"),v.addEventListener("input",async()=>{h.checked?(await sc(e,l),hi.add(l)):hi.delete(l),lc(t,new Set([...hi].map(p=>rd.get(p)).flat().sort()))})}}function hl(t,e){const r=t.target.files[0],n=new FileReader;n.onload=()=>e(JSON.parse(n.result)),n.readAsText(r)}function Fi(t,e){const r=t.cy;r.elements().remove(),r.json(e),r.elements().addClass("unfiltered");const n=1*t.cy.elements(":visible").size()/t.cy.elements().size(),a=n<.8;se.debug("Load Graph from File: Visible fraction: "+n+" set star mode to "+a),t.cy.nodes(":child").size()>0&&(document.getElementById("combineMatchModeBox").checked=!0),t.starMode=a;const i=r.nodes(":visible");r.center(i),r.fit(i),r.elements().removeClass("highlighted"),r.elements().removeClass("source")}const jx=t=>e=>{hl(e,r=>{Fi(t,r)})};async function Xx(t){!confirm("This will override the current session. Continue?")||hl(t,async e=>{if(e.state.version!==Wr&&!confirm(`Your file was saved in version ${e.state.version}, but SNIK Graph has version ${Wr}, so it may not work properly. Continue anyway?`))return;be.reset();const r=new be(!1),n=[r.initialized];Fi(r.state.graph,e.mainGraph.graph),be.activeView().setTitle(e.mainGraph.title);for(let a=0;a<e.tabs.length;a++){const i=new be(!1);n.push(i.initialized),Fi(i.state.graph,e.tabs[a].graph),be.activeView().setTitle(e.tabs[a].title)}await Promise.all(n),Wx(e.state)})}function Zx(t){hl(t,e=>{if(e.version!==Wr&&!confirm(`Your file was saved in version ${e.version}, but SNIK Graph has version ${Wr}, so it may not work properly. Continue anyway?`))return;const r=new be(!1);Fi(r.state.graph,e.graph),be.activeView().setTitle(e.title)})}function cc(t,e,r,n,a){const i=document.createElement("a");a.push(i),i.classList.add("dropdown-entry"),i.setAttribute("tabindex","-1"),t.appendChild(i);const o=document.createElement("input");o.type="file",o.style.display="none",i.appendChild(o);const s=document.createElement("span");s.innerText=r,s.setAttribute("data-i18n",e),i.appendChild(s),i.addEventListener("click",()=>o.click()),o.addEventListener("change",n)}function Qx(t,e,r){cc(e,"load-view","Load Partial Graph into Session",Zx,r),cc(e,"load-session","Load Session",Xx,r)}/*!
 * hotkeys-js v3.8.7
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * Copyright (c) 2021 kenny wong <wowohoo@qq.com>
 * http://jaywcjlove.github.io/hotkeys
 * 
 * Licensed under the MIT license.
 */var Wo=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Uo(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent&&t.attachEvent("on".concat(e),function(){r(window.event)})}function ad(t,e){for(var r=e.slice(0,e.length-1),n=0;n<r.length;n++)r[n]=t[r[n].toLowerCase()];return r}function id(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),r=e.lastIndexOf("");r>=0;)e[r-1]+=",",e.splice(r,1),r=e.lastIndexOf("");return e}function Jx(t,e){for(var r=t.length>=e.length?t:e,n=t.length>=e.length?e:t,a=!0,i=0;i<r.length;i++)n.indexOf(r[i])===-1&&(a=!1);return a}var od={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Wo?173:189,"=":Wo?61:187,";":Wo?59:186,"'":222,"[":219,"]":221,"\\":220},en={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},fc={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ut={16:!1,18:!1,17:!1,91:!1},ot={};for(var di=1;di<20;di++)od["f".concat(di)]=111+di;var Ge=[],sd="all",ld=[],ho=function(e){return od[e.toLowerCase()]||en[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function ud(t){sd=t||"all"}function Ma(){return sd||"all"}function eE(){return Ge.slice(0)}function tE(t){var e=t.target||t.srcElement,r=e.tagName,n=!0;return(e.isContentEditable||(r==="INPUT"||r==="TEXTAREA"||r==="SELECT")&&!e.readOnly)&&(n=!1),n}function rE(t){return typeof t=="string"&&(t=ho(t)),Ge.indexOf(t)!==-1}function nE(t,e){var r,n;t||(t=Ma());for(var a in ot)if(Object.prototype.hasOwnProperty.call(ot,a))for(r=ot[a],n=0;n<r.length;)r[n].scope===t?r.splice(n,1):n++;Ma()===t&&ud(e||"all")}function aE(t){var e=t.keyCode||t.which||t.charCode,r=Ge.indexOf(e);if(r>=0&&Ge.splice(r,1),t.key&&t.key.toLowerCase()==="meta"&&Ge.splice(0,Ge.length),(e===93||e===224)&&(e=91),e in ut){ut[e]=!1;for(var n in en)en[n]===e&&(sr[n]=!1)}}function iE(t){if(!t)Object.keys(ot).forEach(function(o){return delete ot[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&Go(o)});else if(typeof t=="object")t.key&&Go(t);else if(typeof t=="string"){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var a=r[0],i=r[1];typeof a=="function"&&(i=a,a=""),Go({key:t,scope:a,method:i,splitKey:"+"})}}var Go=function(e){var r=e.key,n=e.scope,a=e.method,i=e.splitKey,o=i===void 0?"+":i,s=id(r);s.forEach(function(l){var u=l.split(o),c=u.length,f=u[c-1],d=f==="*"?"*":ho(f);if(!!ot[d]){n||(n=Ma());var v=c>1?ad(en,u):[];ot[d]=ot[d].map(function(h){var p=a?h.method===a:!0;return p&&h.scope===n&&Jx(h.mods,v)?{}:h})}})};function hc(t,e,r){var n;if(e.scope===r||e.scope==="all"){n=e.mods.length>0;for(var a in ut)Object.prototype.hasOwnProperty.call(ut,a)&&(!ut[a]&&e.mods.indexOf(+a)>-1||ut[a]&&e.mods.indexOf(+a)===-1)&&(n=!1);(e.mods.length===0&&!ut[16]&&!ut[18]&&!ut[17]&&!ut[91]||n||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function dc(t){var e=ot["*"],r=t.keyCode||t.which||t.charCode;if(!!sr.filter.call(this,t)){if((r===93||r===224)&&(r=91),Ge.indexOf(r)===-1&&r!==229&&Ge.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(v){var h=fc[v];t[v]&&Ge.indexOf(h)===-1?Ge.push(h):!t[v]&&Ge.indexOf(h)>-1?Ge.splice(Ge.indexOf(h),1):v==="metaKey"&&t[v]&&Ge.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Ge=Ge.slice(Ge.indexOf(h))))}),r in ut){ut[r]=!0;for(var n in en)en[n]===r&&(sr[n]=!0);if(!e)return}for(var a in ut)Object.prototype.hasOwnProperty.call(ut,a)&&(ut[a]=t[fc[a]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Ge.indexOf(17)===-1&&Ge.push(17),Ge.indexOf(18)===-1&&Ge.push(18),ut[17]=!0,ut[18]=!0);var i=Ma();if(e)for(var o=0;o<e.length;o++)e[o].scope===i&&(t.type==="keydown"&&e[o].keydown||t.type==="keyup"&&e[o].keyup)&&hc(t,e[o],i);if(r in ot){for(var s=0;s<ot[r].length;s++)if((t.type==="keydown"&&ot[r][s].keydown||t.type==="keyup"&&ot[r][s].keyup)&&ot[r][s].key){for(var l=ot[r][s],u=l.splitKey,c=l.key.split(u),f=[],d=0;d<c.length;d++)f.push(ho(c[d]));f.sort().join("")===Ge.sort().join("")&&hc(t,l,i)}}}}function oE(t){return ld.indexOf(t)>-1}function sr(t,e,r){Ge=[];var n=id(t),a=[],i="all",o=document,s=0,l=!1,u=!0,c="+";for(r===void 0&&typeof e=="function"&&(r=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),typeof e.splitKey=="string"&&(c=e.splitKey)),typeof e=="string"&&(i=e);s<n.length;s++)t=n[s].split(c),a=[],t.length>1&&(a=ad(en,t)),t=t[t.length-1],t=t==="*"?"*":ho(t),t in ot||(ot[t]=[]),ot[t].push({keyup:l,keydown:u,scope:i,mods:a,shortcut:n[s],method:r,key:n[s],splitKey:c});typeof o!="undefined"&&!oE(o)&&window&&(ld.push(o),Uo(o,"keydown",function(f){dc(f)}),Uo(window,"focus",function(){Ge=[]}),Uo(o,"keyup",function(f){dc(f),aE(f)}))}var Ko={setScope:ud,getScope:Ma,deleteScope:nE,getPressedKeyCodes:eE,isPressed:rE,filter:tE,unbind:iE};for(var Yo in Ko)Object.prototype.hasOwnProperty.call(Ko,Yo)&&(sr[Yo]=Ko[Yo]);if(typeof window!="undefined"){var sE=window.hotkeys;sr.noConflict=function(t){return t&&window.hotkeys===sr&&(window.hotkeys=sE),sr},window.hotkeys=sr}let $i=null;class ha{constructor(){$e(this,"separateSubsBox");$e(this,"dayModeBox");if($i)throw Error("Menu already exists.");document.body.addEventListener("click",ha.closeListener),this.showCloseMatches=this.showCloseMatches.bind(this),this.addMenu(),$i=this}separateSubs(){return this.separateSubsBox.checked}setLanguage(e){if(!!Gd(e)){Yd();for(const r of be.views()){const n=r.state.graph.cy.elements();r.state.graph.cy.remove(n),n.restore()}}}static about(){window.alert("SNIK Graph version "+Wr)}static visualizationFeedback(){ia(qd,"",`Please type your issue here:



!!Please do not delete the following text, because its the log for developers!!

`,se.logs)}showCloseMatches(){se.debug("show close matches start");const r=be.activeState().graph.cy.elements(".unfiltered").not(".hidden").connectedEdges(".unfiltered").filter('[pl="closeMatch"]');ze.setVisible(r,!0),ze.setVisible(r.connectedNodes(".unfiltered"),!0),se.debug("show close matches end")}menuData(){return[{label:"File",i18n:"file",id:"file",entries:[[async()=>{await Cc(this.graph.cy,[]),da(async()=>await Yh(this.graph.cy,fa,Ae.defaultSubOntologies,this.separateSubs()))},"Load from SPARQL Endpoint","load-sparql"],[()=>Kx(this.optionsToJSON()),"Save Session","save-session"],[()=>Gx(be.activeState().graph),"Save the full SNIK Graph","save-snik-graph"],[()=>Yx(be.activeView()),"Save currently active view (partial graph)","save-view"],[()=>{da(()=>Rt(be.activeState().cy,fa,Ae.defaultSubOntologies,this.separateSubs(),!0))},"Recalculate Layout and Replace in Browser Cache","recalculate-layout-replace"],[()=>fi(be.activeState().graph,this.dayModeBox.checked,!1,!1),"Save PNG Image of Current View","save-image-current-view"],[()=>fi(be.activeState().graph,this.dayModeBox.checked,!0,!1),"Save PNG Image of Whole Graph","save-image-whole-graph"],[()=>fi(be.activeState().graph,this.dayModeBox.checked,!1,!0),"Save PNG Image of Current View (high res)","save-image-current-view-high-res"],[()=>fi(be.activeState().graph,this.dayModeBox.checked,!0,!0),"Save PNG Image of Whole Graph (high res)","save-image-whole-graph-high-res"],[()=>oc(be.activeState().graph,this.dayModeBox.checked,!1),"Save SVG Image of Current View"],[()=>oc(be.activeState().graph,this.dayModeBox.checked,!0),"Save SVG Image of Whole Graph"]]},{label:"Filter",i18n:"filter",id:"filter",entries:[]},{label:"Options",i18n:"options",id:"options",entries:[]},{label:"Layout",i18n:"layout",entries:[[this.showCloseMatches,"show close matches","show-close-matches"],[()=>{Rt(be.activeState().graph.cy,fa,Ae.defaultSubOntologies,this.separateSubs()&&!be.activeState().graph.starMode,!0)},"recalculate layout","recalculate-layout","ctrl+alt+l"],[()=>{Rt(be.activeState().graph.cy,zi,Ae.defaultSubOntologies,this.separateSubs()&&!be.activeState().graph.starMode,!1)},"tight layout","tight-layout","ctrl+alt+t"],[()=>{Rt(be.activeState().graph.cy,jh,Ae.defaultSubOntologies,this.separateSubs()&&!be.activeState().graph.starMode,!1)},"compound layout","compound-layout","ctrl+alt+c"],[()=>be.activeState().graph.moveAllMatches(0),"move matches on top of each other","move-match-on-top"],[()=>be.activeState().graph.moveAllMatches(100),"move matches nearby","move-match-nearby"],[()=>{uc(be.activeState().graph,"bb")},"BB chapter search","bb-chapter-search"],[()=>{uc(be.activeState().graph,"ob")},"OB chapter search","ob-chapter-search"],[be.activeState().graph.subOntologyConnectivity,"subontology connectivity","subontology-connectivity"],[be.mainView.state.graph.resetStyle,"reset main view","reset-view","ctrl+alt+r"],[()=>{be.activeView().setTitle(prompt("Rename: "+be.activeView().config.title)||be.activeView().config.title),be.activeState().title=be.activeView().config.title},"change title of active View","change-title"]]},{label:"Services",i18n:"services",entries:[["http://www.snik.eu/sparql","SPARQL Endpoint","sparql-endpoint"],["http://www.snik.eu/ontology","RDF Browser","rdf-browser"]]},{label:"Language",i18n:"language",entries:[[()=>this.setLanguage(xe.LABEL_ENGLISH),"english","english"],[()=>this.setLanguage(xe.LABEL_GERMAN),"german","german"],[()=>this.setLanguage(xe.LABEL_PERSIAN),"persian","persian"]]},{label:"Help",i18n:"help",entries:[["html/manual.html","Manual"],["html/layoutHelp.html","Layout Help"],["doc/index.html","Developer Documentation"],["html/troubleshooting.html","Troubleshooting"],["html/contribute.html","Contribute"],["https://www.snik.eu/","Project Homepage"],["https://www.snik.eu/public/SNIK_Metamodell_V8.svg","SNIK Meta Model"],[ha.about,"About SNIK Graph"],["https://github.com/snikproject/ontology/issues","Submit Feedback about the Ontology"],[ha.visualizationFeedback,"Submit Feedback about the Visualization"]]}]}addOptions(e){const r=Mt("options-menu-content"),n=["separateSubs","cumulativeSearch","grid","combineMatchMode","dayMode"];this.optionBoxes={};for(const a of n){se.trace("Add option "+a);const i=document.createElement("a");e.push(i),r.appendChild(i),i.setAttribute("tabindex","-1"),i.classList.add("dropdown-entry");const o=document.createElement("input");this.optionBoxes[a]=o,i.appendChild(o),o.type="checkbox",o.autocomplete="off",this[a+"Box"]=o,o.id=a+"Box",i.addEventListener("keydown",Sc(o)),i.appendChild(_c(o,kc(a),a))}this.separateSubsBox.addEventListener("change",()=>{se.debug("Set separate Subontologies to "+this.separateSubsBox.checked)}),this.dayModeBox.addEventListener("change",()=>{for(const a of be.views())a.state.graph.invert(this.dayModeBox.checked);se.debug("Set dayMode to "+this.dayModeBox.checked)}),this.gridBox.addEventListener("change",()=>{document.body.classList[this.gridBox.checked?"add":"remove"]("grid"),se.debug("set gridBox to "+this.gridBox.checked)}),Ae.activeOptions.includes("day")&&this.dayModeBox.click(),this.cumulativeSearchBox.addEventListener("change",()=>{se.debug("Set cumulative search to "+this.cumulativeSearchBox.checked)}),this.combineMatchModeBox.addEventListener("change",()=>{se.debug("Set combine match mode to "+this.combineMatchModeBox.checked),setTimeout(()=>{be.views().map(a=>a.state.graph).forEach(a=>a.combineMatch(this.combineMatchModeBox.checked))},10)})}addMenu(){console.groupCollapsed("Add menu");const e=document.createElement("ul");Mt("top").prepend(e),e.classList.add("dropdown-bar"),e.setAttribute("tabindex","0");const r=this.menuData(),n=[],a=[];for(let i=0;i<r.length;i++){const o=r[i],s=document.createElement("li");s.setAttribute("tabindex","-1"),e.appendChild(s);const l=document.createElement("span");n.push(l),s.appendChild(l),l.classList.add("dropdown-menu"),l.innerText=o.label,l.setAttribute("data-i18n",o.i18n),l.setAttribute("tabindex","-1");const u=document.createElement("div");s.appendChild(u),u.classList.add("dropdown-content"),u.setAttribute("tabindex","-1"),o.id&&(u.id=o.id+"-menu-content"),l.addEventListener("click",()=>{for(const f of document.getElementsByClassName("dropdown-content"))u!==f&&f.classList.remove("show");u.classList.toggle("show")});const c=[];a.push(c);for(const f of o.entries){const d=document.createElement("a");switch(c.push(d),d.classList.add("dropdown-entry"),d.setAttribute("data-i18n",f[2]),d.setAttribute("tabindex","-1"),u.appendChild(d),d.innerHTML=f[1],typeof f[0]){case"string":{d.href=f[0],d.target="_blank";break}case"function":{d.addEventListener("click",f[0]);const v=f[3];v&&(sr(v,f[0]),d.innerHTML=d.innerHTML+` (${v.toUpperCase()})`);break}default:se.error("unknown menu entry action type: "+typeof f[0])}}l.addEventListener("keydown",f=>{switch(f.key){case"ArrowLeft":n[(i-1+n.length)%n.length].focus(),n[(i-1+n.length)%n.length].click();break;case"ArrowRight":n[(i+1)%n.length].focus(),n[(i+1)%n.length].click();break;case"ArrowDown":c[0].focus();break}})}Qx(be.activeState().graph,Mt("file-menu-content"),a[0]),se.debug("fileLoadEntries added"),qa.addFilterEntries(Mt("filter-menu-content"),a[1]),se.debug("filter entries added"),this.addOptions(a[2]);for(let i=0;i<a.length;i++){const o=a[i];for(let s=0;s<o.length;s++)o[s].addEventListener("keydown",l=>{switch(l.key){case"ArrowLeft":n[(i-1+n.length)%n.length].focus(),n[(i-1+n.length)%n.length].click();break;case"ArrowRight":n[(i+1)%n.length].focus(),n[(i+1)%n.length].click();break;case"ArrowUp":o[(s-1+o.length)%o.length].focus();break;case"ArrowDown":o[(s+1)%o.length].focus();break}})}se.debug("Menu added"),console.groupEnd()}static closeListener(e){if(e&&e.target&&e.target.matches&&!e.target.matches(".dropdown-entry")&&!e.target.matches(".dropdown-menu")&&!e.target.matches("input.filterbox")){const r=document.getElementsByClassName("dropdown-content");Array.from(r).forEach(n=>n.classList.remove("show"))}}optionsToJSON(){const e=["separateSubs","cumulativeSearch","grid","combineMatchMode","dayMode"],r={};for(const n of e)r[n]=this.optionBoxes[n].checked;return r}optionsFromJSON(e){const r=this.optionsToJSON();for(const[n,a]of Object.entries(e))r[n]!==a&&this.optionBoxes[n].click()}}function dr(t){return Array.isArray?Array.isArray(t):hd(t)==="[object Array]"}const lE=1/0;function uE(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-lE?"-0":e}function cE(t){return t==null?"":uE(t)}function lr(t){return typeof t=="string"}function cd(t){return typeof t=="number"}function fE(t){return t===!0||t===!1||hE(t)&&hd(t)=="[object Boolean]"}function fd(t){return typeof t=="object"}function hE(t){return fd(t)&&t!==null}function At(t){return t!=null}function jo(t){return!t.trim().length}function hd(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const dE="Incorrect 'index' type",vE=t=>`Invalid value for key ${t}`,pE=t=>`Pattern length exceeds max of ${t}.`,gE=t=>`Missing ${t} property in key`,mE=t=>`Property 'weight' in key '${t}' must be a positive integer`,vc=Object.prototype.hasOwnProperty;class yE{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let a=dd(n);r+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dd(t){let e=null,r=null,n=null,a=1;if(lr(t)||dr(t))n=t,e=pc(t),r=ms(t);else{if(!vc.call(t,"name"))throw new Error(gE("name"));const i=t.name;if(n=i,vc.call(t,"weight")&&(a=t.weight,a<=0))throw new Error(mE(i));e=pc(i),r=ms(i)}return{path:e,id:r,weight:a,src:n}}function pc(t){return dr(t)?t:t.split(".")}function ms(t){return dr(t)?t.join("."):t}function bE(t,e){let r=[],n=!1;const a=(i,o,s)=>{if(!!At(i))if(!o[s])r.push(i);else{let l=o[s];const u=i[l];if(!At(u))return;if(s===o.length-1&&(lr(u)||cd(u)||fE(u)))r.push(cE(u));else if(dr(u)){n=!0;for(let c=0,f=u.length;c<f;c+=1)a(u[c],o,s+1)}else o.length&&a(u,o,s+1)}};return a(t,lr(e)?e.split("."):e,0),n?r:r[0]}const wE={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},xE={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},EE={location:0,threshold:.6,distance:100},CE={useExtendedSearch:!1,getFn:bE,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Te=st(st(st(st({},xE),wE),EE),CE);const SE=/[^ ]+/g;function _E(t=1,e=3){const r=new Map,n=Math.pow(10,e);return{get(a){const i=a.match(SE).length;if(r.has(i))return r.get(i);const o=1/Math.pow(i,.5*t),s=parseFloat(Math.round(o*n)/n);return r.set(i,s),s},clear(){r.clear()}}}class dl{constructor({getFn:e=Te.getFn,fieldNormWeight:r=Te.fieldNormWeight}={}){this.norm=_E(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,lr(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();lr(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!At(e)||jo(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((a,i)=>{let o=this.getFn(e,a.path);if(!!At(o)){if(dr(o)){let s=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(!!At(c))if(lr(c)&&!jo(c)){let f={v:c,i:u,n:this.norm.get(c)};s.push(f)}else dr(c)&&c.forEach((f,d)=>{l.push({nestedArrIndex:d,value:f})})}n.$[i]=s}else if(!jo(o)){let s={v:o,n:this.norm.get(o)};n.$[i]=s}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function vd(t,e,{getFn:r=Te.getFn,fieldNormWeight:n=Te.fieldNormWeight}={}){const a=new dl({getFn:r,fieldNormWeight:n});return a.setKeys(t.map(dd)),a.setSources(e),a.create(),a}function TE(t,{getFn:e=Te.getFn,fieldNormWeight:r=Te.fieldNormWeight}={}){const{keys:n,records:a}=t,i=new dl({getFn:e,fieldNormWeight:r});return i.setKeys(n),i.setIndexRecords(a),i}function vi(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:a=Te.distance,ignoreLocation:i=Te.ignoreLocation}={}){const o=e/t.length;if(i)return o;const s=Math.abs(n-r);return a?o+s/a:s?1:o}function kE(t=[],e=Te.minMatchCharLength){let r=[],n=-1,a=-1,i=0;for(let o=t.length;i<o;i+=1){let s=t[i];s&&n===-1?n=i:!s&&n!==-1&&(a=i-1,a-n+1>=e&&r.push([n,a]),n=-1)}return t[i-1]&&i-n>=e&&r.push([n,i-1]),r}const Hr=32;function IE(t,e,r,{location:n=Te.location,distance:a=Te.distance,threshold:i=Te.threshold,findAllMatches:o=Te.findAllMatches,minMatchCharLength:s=Te.minMatchCharLength,includeMatches:l=Te.includeMatches,ignoreLocation:u=Te.ignoreLocation}={}){if(e.length>Hr)throw new Error(pE(Hr));const c=e.length,f=t.length,d=Math.max(0,Math.min(n,f));let v=i,h=d;const p=s>1||l,m=p?Array(f):[];let g;for(;(g=t.indexOf(e,h))>-1;){let x=vi(e,{currentLocation:g,expectedLocation:d,distance:a,ignoreLocation:u});if(v=Math.min(x,v),h=g+c,p){let _=0;for(;_<c;)m[g+_]=1,_+=1}}h=-1;let b=[],w=1,y=c+f;const C=1<<c-1;for(let x=0;x<c;x+=1){let _=0,S=y;for(;_<S;)vi(e,{errors:x,currentLocation:d+S,expectedLocation:d,distance:a,ignoreLocation:u})<=v?_=S:y=S,S=Math.floor((y-_)/2+_);y=S;let I=Math.max(1,d-S+1),k=o?f:Math.min(d+S,f)+c,T=Array(k+2);T[k+1]=(1<<x)-1;for(let A=k;A>=I;A-=1){let B=A-1,L=r[t.charAt(B)];if(p&&(m[B]=+!!L),T[A]=(T[A+1]<<1|1)&L,x&&(T[A]|=(b[A+1]|b[A])<<1|1|b[A+1]),T[A]&C&&(w=vi(e,{errors:x,currentLocation:B,expectedLocation:d,distance:a,ignoreLocation:u}),w<=v)){if(v=w,h=B,h<=d)break;I=Math.max(1,2*d-h)}}if(vi(e,{errors:x+1,currentLocation:d,expectedLocation:d,distance:a,ignoreLocation:u})>v)break;b=T}const E={isMatch:h>=0,score:Math.max(.001,w)};if(p){const x=kE(m,s);x.length?l&&(E.indices=x):E.isMatch=!1}return E}function AE(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const a=t.charAt(r);e[a]=(e[a]||0)|1<<n-r-1}return e}class pd{constructor(e,{location:r=Te.location,threshold:n=Te.threshold,distance:a=Te.distance,includeMatches:i=Te.includeMatches,findAllMatches:o=Te.findAllMatches,minMatchCharLength:s=Te.minMatchCharLength,isCaseSensitive:l=Te.isCaseSensitive,ignoreLocation:u=Te.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,v)=>{this.chunks.push({pattern:d,alphabet:AE(d),startIndex:v})},f=this.pattern.length;if(f>Hr){let d=0;const v=f%Hr,h=f-v;for(;d<h;)c(this.pattern.substr(d,Hr),d),d+=Hr;if(v){const p=f-Hr;c(this.pattern.substr(p),p)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(e=e.toLowerCase()),this.pattern===e){let h={isMatch:!0,score:0};return n&&(h.indices=[[0,e.length-1]]),h}const{location:a,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],f=0,d=!1;this.chunks.forEach(({pattern:h,alphabet:p,startIndex:m})=>{const{isMatch:g,score:b,indices:w}=IE(e,h,p,{location:a+m,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});g&&(d=!0),f+=b,g&&w&&(c=[...c,...w])});let v={isMatch:d,score:d?f/this.chunks.length:1};return d&&n&&(v.indices=c),v}}class Lr{constructor(e){this.pattern=e}static isMultiMatch(e){return gc(e,this.multiRegex)}static isSingleMatch(e){return gc(e,this.singleRegex)}search(){}}function gc(t,e){const r=t.match(e);return r?r[1]:null}class ME extends Lr{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class DE extends Lr{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class PE extends Lr{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class OE extends Lr{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class LE extends Lr{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class BE extends Lr{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class gd extends Lr{constructor(e,{location:r=Te.location,threshold:n=Te.threshold,distance:a=Te.distance,includeMatches:i=Te.includeMatches,findAllMatches:o=Te.findAllMatches,minMatchCharLength:s=Te.minMatchCharLength,isCaseSensitive:l=Te.isCaseSensitive,ignoreLocation:u=Te.ignoreLocation}={}){super(e),this._bitapSearch=new pd(e,{location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class md extends Lr{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n;const a=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+i,a.push([n,r-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const ys=[ME,md,PE,OE,BE,LE,DE,gd],mc=ys.length,RE=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,NE="|";function zE(t,e={}){return t.split(NE).map(r=>{let n=r.trim().split(RE).filter(i=>i&&!!i.trim()),a=[];for(let i=0,o=n.length;i<o;i+=1){const s=n[i];let l=!1,u=-1;for(;!l&&++u<mc;){const c=ys[u];let f=c.isMultiMatch(s);f&&(a.push(new c(f,e)),l=!0)}if(!l)for(u=-1;++u<mc;){const c=ys[u];let f=c.isSingleMatch(s);if(f){a.push(new c(f,e));break}}}return a})}const FE=new Set([gd.type,md.type]);class $E{constructor(e,{isCaseSensitive:r=Te.isCaseSensitive,includeMatches:n=Te.includeMatches,minMatchCharLength:a=Te.minMatchCharLength,ignoreLocation:i=Te.ignoreLocation,findAllMatches:o=Te.findAllMatches,location:s=Te.location,threshold:l=Te.threshold,distance:u=Te.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:a,findAllMatches:o,ignoreLocation:i,location:s,threshold:l,distance:u},this.pattern=r?e:e.toLowerCase(),this.query=zE(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a}=this.options;e=a?e:e.toLowerCase();let i=0,o=[],s=0;for(let l=0,u=r.length;l<u;l+=1){const c=r[l];o.length=0,i=0;for(let f=0,d=c.length;f<d;f+=1){const v=c[f],{isMatch:h,indices:p,score:m}=v.search(e);if(h){if(i+=1,s+=m,n){const g=v.constructor.type;FE.has(g)?o=[...o,...p]:o.push(p)}}else{s=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:s/i};return n&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const bs=[];function HE(...t){bs.push(...t)}function ws(t,e){for(let r=0,n=bs.length;r<n;r+=1){let a=bs[r];if(a.condition(t,e))return new a(t,e)}return new pd(t,e)}const Hi={AND:"$and",OR:"$or"},xs={PATH:"$path",PATTERN:"$val"},Es=t=>!!(t[Hi.AND]||t[Hi.OR]),VE=t=>!!t[xs.PATH],qE=t=>!dr(t)&&fd(t)&&!Es(t),yc=t=>({[Hi.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function yd(t,e,{auto:r=!0}={}){const n=a=>{let i=Object.keys(a);const o=VE(a);if(!o&&i.length>1&&!Es(a))return n(yc(a));if(qE(a)){const l=o?a[xs.PATH]:i[0],u=o?a[xs.PATTERN]:a[l];if(!lr(u))throw new Error(vE(l));const c={keyId:ms(l),pattern:u};return r&&(c.searcher=ws(u,e)),c}let s={children:[],operator:i[0]};return i.forEach(l=>{const u=a[l];dr(u)&&u.forEach(c=>{s.children.push(n(c))})}),s};return Es(t)||(t=yc(t)),n(t)}function WE(t,{ignoreFieldNorm:e=Te.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:a,norm:i,score:o})=>{const s=a?a.weight:null;n*=Math.pow(o===0&&s?Number.EPSILON:o,(s||1)*(e?1:i))}),r.score=n})}function UE(t,e){const r=t.matches;e.matches=[],At(r)&&r.forEach(n=>{if(!At(n.indices)||!n.indices.length)return;const{indices:a,value:i}=n;let o={indices:a,value:i};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function GE(t,e){e.score=t.score}function KE(t,e,{includeMatches:r=Te.includeMatches,includeScore:n=Te.includeScore}={}){const a=[];return r&&a.push(UE),n&&a.push(GE),t.map(i=>{const{idx:o}=i,s={item:e[o],refIndex:o};return a.length&&a.forEach(l=>{l(i,s)}),s})}class Gn{constructor(e,r={},n){this.options=st(st({},Te),r),this.options.useExtendedSearch,this._keyStore=new yE(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof dl))throw new Error(dE);this._myIndex=r||vd(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!At(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let n=0,a=this._docs.length;n<a;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,a-=1,r.push(i))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:i,sortFn:o,ignoreFieldNorm:s}=this.options;let l=lr(e)?lr(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return WE(l,{ignoreFieldNorm:s}),i&&l.sort(o),cd(r)&&r>-1&&(l=l.slice(0,r)),KE(l,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(e){const r=ws(e,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:i,i:o,n:s})=>{if(!At(i))return;const{isMatch:l,score:u,indices:c}=r.searchIn(i);l&&a.push({item:i,idx:o,matches:[{score:u,value:i,norm:s,indices:c}]})}),a}_searchLogical(e){const r=yd(e,this.options),n=(s,l,u)=>{if(!s.children){const{keyId:f,searcher:d}=s,v=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:d});return v&&v.length?[{idx:u,item:l,matches:v}]:[]}const c=[];for(let f=0,d=s.children.length;f<d;f+=1){const v=s.children[f],h=n(v,l,u);if(h.length)c.push(...h);else if(s.operator===Hi.AND)return[]}return c},a=this._myIndex.records,i={},o=[];return a.forEach(({$:s,i:l})=>{if(At(s)){let u=n(r,s,l);u.length&&(i[l]||(i[l]={idx:l,item:s,matches:[]},o.push(i[l])),u.forEach(({matches:c})=>{i[l].matches.push(...c)}))}}),o}_searchObjectList(e){const r=ws(e,this.options),{keys:n,records:a}=this._myIndex,i=[];return a.forEach(({$:o,i:s})=>{if(!At(o))return;let l=[];n.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:r}))}),l.length&&i.push({idx:s,item:o,matches:l})}),i}_findMatches({key:e,value:r,searcher:n}){if(!At(r))return[];let a=[];if(dr(r))r.forEach(({v:i,i:o,n:s})=>{if(!At(i))return;const{isMatch:l,score:u,indices:c}=n.searchIn(i);l&&a.push({score:u,key:e,value:i,idx:o,norm:s,indices:c})});else{const{v:i,n:o}=r,{isMatch:s,score:l,indices:u}=n.searchIn(i);s&&a.push({score:l,key:e,value:i,norm:o,indices:u})}return a}}Gn.version="6.5.3";Gn.createIndex=vd;Gn.parseIndex=TE;Gn.config=Te;Gn.parseQuery=yd;HE($E);let Cs=null;const YE={shouldSort:!0,tokenize:!0,threshold:.25,maxPatternLength:40,minMatchCharLength:3,matchAllTokens:!0,location:0,ignoreLocation:!0,distance:100,id:"uri",keys:[{name:"l",weight:.7},{name:"def",weight:.3}]};async function jE(){typeof window!="undefined"&&console.groupCollapsed("Create Fuse.js index");const t=Bn("Create Fuse search index");se.debug("Create Fuse Search Index with searchCloseMatch = "+Ae.searchCloseMatch);const e=`select
  ?c as ?uri
  group_concat(distinct(str(?l));separator="|") as ?l
  group_concat(distinct(str(?def));separator="|") as ?def
  from <${Ae.sparql.graph}>
  {
    {
     {?c a owl:Class.} UNION {?c a [a owl:Class]}
     ?c rdfs:label ?l.
    }
    UNION {?c skos:altLabel ?l.}
    UNION {?c skos:closeMatch|^skos:closeMatch ?cm. ?cm rdfs:label|skos:altLabel ?l.}
    OPTIONAL {?c skos:definition ?def.}
  }`,r=await vr(e),n=[];for(const a of r){const i=a.uri.value.replace(/.*\//,""),o={uri:a.uri.value,l:[...a.l.value.split("|"),i]};n.push(o),o.l=[...new Set(o.l)],a.def.value&&(o.def=a.def.value)}return Cs=new Gn(n,YE),t.stop(n.length+" items"),typeof window!="undefined"&&console.groupEnd(),n}async function XE(t){return Cs||await jE(),Cs.search(t)}const Xo=100;class ZE{constructor(e){$e(this,"resultNodes",[]);e.addEventListener("submit",r=>{r.preventDefault(),da(()=>this.showSearch(r.target.children.query.value))}),se.debug("search initialized")}showSearchResults(e,r){this.resultNodes=[];const n=Mt("tab:search-results");for(;n.rows.length>0;)n.deleteRow(0);if(r.length===0)return Mt("h2:search-results").innerHTML=`No Search Results for "${e}"`,!1;if(r.length===1)return Kt.close("search-results"),be.activeState().graph.presentUri(r[0]),!0;r.length===Xo?Mt("h2:search-results").innerHTML=`First ${Xo} Search Results for "${e}"`:Mt("h2:search-results").innerHTML=`${r.length} Search Results for "${e}"`;const a={};r.forEach(s=>{const l=be.activeState().cy.getElementById(s)[0];l?(a[s]=0,l.hasClass("hidden")&&!l.hasClass("filtered")?a[s]=1:l.hasClass("filtered")&&(a[s]=2)):a[s]=3});const i=new Set;r.sort((s,l)=>a[s]-a[l]),r.forEach(s=>{const l=n.insertRow(),u=l.insertCell(),c=document.createElement("input");c.type="checkbox",u.appendChild(c),u.addEventListener("change",h=>{i[h.target.checked?"add":"remove"](s)});const f=l.insertCell(),d=l.insertCell();window.presentUri=be.activeState().graph.presentUri,f.innerHTML=`<a class="search-class${a[s]}" href="javascript:MicroModal.close('search-results');window.presentUri('${s}');void(0)">
          ${s.replace(xc.PREFIX,"")}</a>`;const v=`<a class="search-class${a[s]}" href="${s}" target="_blank">Description</a>`;d.innerHTML=v});const o=n.insertRow(0);o.insertCell();{const s=o.insertCell();s.innerHTML="<a href='#'>Highlight All</a>",s.addEventListener("click",l=>{Kt.close("search-results"),be.activeState().graph.presentUris(r),l.preventDefault()})}{const s=o.insertCell();s.innerHTML="<a href='#'>Highlight Selected</a>",s.addEventListener("click",l=>{Kt.close("search-results"),be.activeState().graph.presentUris([...i]),l.preventDefault()})}return!0}async search(e){const n=`select distinct(?s) { {?s a owl:Class.} UNION {?s a rdf:Property.}
        {?s rdfs:label ?l.} UNION {?s skos:altLabel ?l.}	filter(regex(lcase(replace(str(?l),"[ -]","")),lcase("${e.replace(/[\x22\x27\x5C\x0A\x0D -]/g,"")}"))) } order by asc(strlen(str(?l))) limit ${Xo}`;return se.debug(n),(await vr(n)).map(i=>i.s.value)}async showSearch(e){Kt.show("search-results");const n=(await XE(e)).map(a=>a.item.uri);return this.showSearchResults(e,n),!1}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ot=function(){return Ot=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ot.apply(this,arguments)},QE=function(){function t(e){this.options=e,this.listeners={}}return t.prototype.on=function(e,r){var n=this.listeners[e]||[];this.listeners[e]=n.concat([r])},t.prototype.triggerEvent=function(e,r){var n=this,a=this.listeners[e]||[];a.forEach(function(i){return i({target:n,event:r})})},t}(),Ln;(function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"})(Ln||(Ln={}));var JE=function(){function t(){this.notifications=[]}return t.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,Ln.Add,this.notifications)},t.prototype.splice=function(e,r){var n=this.notifications.splice(e,r)[0];return this.updateFn(n,Ln.Remove,this.notifications),n},t.prototype.indexOf=function(e){return this.notifications.indexOf(e)},t.prototype.onUpdate=function(e){this.updateFn=e},t}(),Er;(function(t){t.Dismiss="dismiss",t.Click="click"})(Er||(Er={}));var bc={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},eC=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),r=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(r),document.body.appendChild(e),this.container=r,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(e,r){var n;this.events=Ot(Ot({},this.events),(n={},n[e]=r,n))},t.prototype.update=function(e,r){r===Ln.Add?this.addNotification(e):r===Ln.Remove&&this.removeNotification(e)},t.prototype.removeNotification=function(e){var r=this,n=this._popRenderedNotification(e),a;if(!!n){a=n.node,a.classList.add("notyf__toast--disappear");var i;a.addEventListener(this.animationEndEventName,i=function(o){o.target===a&&(a.removeEventListener(r.animationEndEventName,i),r.container.removeChild(a))})}},t.prototype.addNotification=function(e){var r=this._renderNotification(e);this.notifications.push({notification:e,node:r}),this._announce(e.options.message||"Notification")},t.prototype._renderNotification=function(e){var r,n=this._buildNotificationCard(e),a=e.options.className;return a&&(r=n.classList).add.apply(r,a.split(" ")),this.container.appendChild(n),n},t.prototype._popRenderedNotification=function(e){for(var r=-1,n=0;n<this.notifications.length&&r<0;n++)this.notifications[n].notification===e&&(r=n);if(r!==-1)return this.notifications.splice(r,1)[0]},t.prototype.getXPosition=function(e){var r;return((r=e==null?void 0:e.position)===null||r===void 0?void 0:r.x)||"right"},t.prototype.getYPosition=function(e){var r;return((r=e==null?void 0:e.position)===null||r===void 0?void 0:r.y)||"bottom"},t.prototype.adjustContainerAlignment=function(e){var r=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],a=this.container.style;a.setProperty("justify-content",n),a.setProperty("align-items",r)},t.prototype._buildNotificationCard=function(e){var r=this,n=e.options,a=n.icon;this.adjustContainerAlignment(n);var i=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),s=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),l=this._createHTMLElement({tagName:"div",className:"notyf__message"});l.innerHTML=n.message||"";var u=n.background||n.backgroundColor;if(a){var c=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof a=="string"||a instanceof String)&&(c.innerHTML=new String(a).valueOf()),typeof a=="object"){var f=a.tagName,d=f===void 0?"i":f,v=a.className,h=a.text,p=a.color,m=p===void 0?u:p,g=this._createHTMLElement({tagName:d,className:v,text:h});m&&(g.style.color=m),c.appendChild(g)}s.appendChild(c)}if(s.appendChild(l),i.appendChild(s),u&&(n.ripple?(o.style.background=u,i.appendChild(o)):i.style.background=u),n.dismissible){var b=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),w=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});b.appendChild(w),s.appendChild(b),i.classList.add("notyf__toast--dismissible"),w.addEventListener("click",function(C){var E,x;(x=(E=r.events)[Er.Dismiss])===null||x===void 0||x.call(E,{target:e,event:C}),C.stopPropagation()})}i.addEventListener("click",function(C){var E,x;return(x=(E=r.events)[Er.Click])===null||x===void 0?void 0:x.call(E,{target:e,event:C})});var y=this.getYPosition(n)==="top"?"upper":"lower";return i.classList.add("notyf__toast--"+y),i},t.prototype._createHTMLElement=function(e){var r=e.tagName,n=e.className,a=e.text,i=document.createElement(r);return n&&(i.className=n),i.textContent=a||null,i},t.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},t.prototype._announce=function(e){var r=this;this.a11yContainer.textContent="",setTimeout(function(){r.a11yContainer.textContent=e},100)},t.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),r={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},n;for(n in r)if(e.style[n]!==void 0)return r[n];return"animationend"},t}(),tC=function(){function t(e){var r=this;this.dismiss=this._removeNotification,this.notifications=new JE,this.view=new eC;var n=this.registerTypes(e);this.options=Ot(Ot({},bc),e),this.options.types=n,this.notifications.onUpdate(function(a,i){return r.view.update(a,i)}),this.view.on(Er.Dismiss,function(a){var i=a.target,o=a.event;r._removeNotification(i),i.triggerEvent(Er.Dismiss,o)}),this.view.on(Er.Click,function(a){var i=a.target,o=a.event;return i.triggerEvent(Er.Click,o)})}return t.prototype.error=function(e){var r=this.normalizeOptions("error",e);return this.open(r)},t.prototype.success=function(e){var r=this.normalizeOptions("success",e);return this.open(r)},t.prototype.open=function(e){var r=this.options.types.find(function(i){var o=i.type;return o===e.type})||{},n=Ot(Ot({},r),e);this.assignProps(["ripple","position","dismissible"],n);var a=new QE(n);return this._pushNotification(a),a},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(e,r){var n=this;e.forEach(function(a){r[a]=r[a]==null?n.options[a]:r[a]})},t.prototype._pushNotification=function(e){var r=this;this.notifications.push(e);var n=e.options.duration!==void 0?e.options.duration:this.options.duration;n&&setTimeout(function(){return r._removeNotification(e)},n)},t.prototype._removeNotification=function(e){var r=this.notifications.indexOf(e);r!==-1&&this.notifications.splice(r,1)},t.prototype.normalizeOptions=function(e,r){var n={type:e};return typeof r=="string"?n.message=r:typeof r=="object"&&(n=Ot(Ot({},n),r)),n},t.prototype.registerTypes=function(e){var r=(e&&e.types||[]).slice(),n=bc.types.map(function(a){var i=-1;r.forEach(function(s,l){s.type===a.type&&(i=l)});var o=i!==-1?r.splice(i,1)[0]:{};return Ot(Ot({},a),o)});return n.concat(r)},t}();function rC(){const t=new tC({duration:1e4,types:[{type:"warn",backgroundColor:"orange",icon:{className:"material-icons",tagName:"i",text:"warning"}},{type:"info",backgroundColor:"green",icon:{className:"material-icons",tagName:"i",text:"info"}},{type:"debug",backgroundColor:"blue",icon:{className:"material-icons",tagName:"i",text:"debug"}},{type:"trace",backgroundColor:"darkgray",icon:{className:"material-icons",tagName:"i",text:"trace"}}]});se.setLevel(Ae.logLevelConsole);const e=["error","warn","info","debug","trace"],r={silent:0,error:1,warn:2,info:3,debug:4,trace:5};for(const n of e){const a=se[n];se[n]=i=>{a(i),r[n]<=r[Ae.logLevelMemory]&&(se.logs||(se.logs=[]),se.logs.push(i)),r[n]<=r[Ae.logLevelDisplay]&&t.open({type:n,message:i})}}}var bd={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Je,function(){var r=function(){function n(v){return o.appendChild(v.dom),v}function a(v){for(var h=0;h<o.children.length;h++)o.children[h].style.display=h===v?"block":"none";i=v}var i=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(v){v.preventDefault(),a(++i%o.children.length)},!1);var s=(performance||Date).now(),l=s,u=0,c=n(new r.Panel("FPS","#0ff","#002")),f=n(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=n(new r.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:o,addPanel:n,showPanel:a,begin:function(){s=(performance||Date).now()},end:function(){u++;var v=(performance||Date).now();if(f.update(v-s,200),v>l+1e3&&(c.update(1e3*u/(v-l),100),l=v,u=0,d)){var h=performance.memory;d.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return v},update:function(){s=this.end()},domElement:o,setMode:a}};return r.Panel=function(n,a,i){var o=1/0,s=0,l=Math.round,u=l(window.devicePixelRatio||1),c=80*u,f=48*u,d=3*u,v=2*u,h=3*u,p=15*u,m=74*u,g=30*u,b=document.createElement("canvas");b.width=c,b.height=f,b.style.cssText="width:80px;height:48px";var w=b.getContext("2d");return w.font="bold "+9*u+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=i,w.fillRect(0,0,c,f),w.fillStyle=a,w.fillText(n,d,v),w.fillRect(h,p,m,g),w.fillStyle=i,w.globalAlpha=.9,w.fillRect(h,p,m,g),{dom:b,update:function(y,C){o=Math.min(o,y),s=Math.max(s,y),w.fillStyle=i,w.globalAlpha=1,w.fillRect(0,0,c,p),w.fillStyle=a,w.fillText(l(y)+" "+n+" ("+l(o)+"-"+l(s)+")",d,v),w.drawImage(b,h+u,p,m-u,g,h,p,m-u,g),w.fillRect(h+m-u,p,u,g),w.fillStyle=i,w.globalAlpha=.9,w.fillRect(h+m-u,p,u,l((1-y/C)*g))}}},r})})(bd);var Zo=bd.exports;function nC(t){const e=[];for(let o=0;o<2+2;o++){const s=new Zo;s.domElement.style.cssText=`position:absolute;top:0px;right:${100*o}px;`,document.body.appendChild(s.dom),e.push(s)}const n=e[2].addPanel(new Zo.Panel("Nodes","#ff8","#221")),a=e[2+1].addPanel(new Zo.Panel("Edges","#f8f","#212"));for(let o=0;o<e.length;o++)e[o].showPanel(Math.min(o,e.length-2));let i=0;requestAnimationFrame(function o(){for(const s of e)s.update();i=(i+1)%30,i===0&&(n.update(t.nodes(":visible").size()),a.update(t.edges(":visible").size())),requestAnimationFrame(o)})}function aC(){const t=new URL(window.location.href),e={endpoint:Ae.sparql.endpoint,instances:Ae.sparql.instances};return Object.assign(e,mo(st(st({empty:t.searchParams.get("empty")!==null,clazz:t.searchParams.get("class"),jsonUrl:t.searchParams.get("json")},t.searchParams.get("sparql")&&{endpoint:t.searchParams.get("sparql")}),t.searchParams.get("instances")!==null&&{instances:t.searchParams.get("instances")===""||t.searchParams.get("instances")==="true"}),{virtual:t.searchParams.get("virtual")!==null,rdfGraph:t.searchParams.get("graph"),sub:t.searchParams.get("sub"),benchmark:t.searchParams.get("benchmark")!==null}))}async function iC(t,e){try{if(e.benchmark&&nC(t.cy),e.empty){se.info('Parameter "empty" detected. Skip loading and display file load prompt.');const n=document.getElementById("loadarea"),a=document.createElement("center");n.appendChild(a),a.innerHTML+=`<button id="load-button" style="font-size:10vh;margin-top:20vh">Datei Laden
      <input id="load-input" type="file" style="display:none"></input>
      </button>`;const i=document.getElementById("load-input"),o=document.getElementById("load-button");o.onclick=()=>{i.click()},i.addEventListener("change",s=>{n.removeChild(a),t.cy.resize(),jx(t)(s)});return}if(e.jsonUrl){se.info("Loading from JSON URL "+e.jsonUrl);const n=await(await fetch(e.jsonUrl)).json();t.cy.add(n),Rt(t.cy,zi);return}se.debug("Loading from SPARQL Endpoint "+e.endpoint),Ae.sparql.endpoint=e.endpoint;const r=[];if(Ae.sparql.isSnik){let n=[];e.sub&&(n=e.sub.split(",")),n.length===0&&(n=[...Ae.helperGraphs,...Ae.defaultSubOntologies]),r.push(...n.map(a=>xc.PREFIX+a))}if(console.debug(`Loading graph with${e.instances?"":"out"} instances.`),await Cc(t.cy,r,e.instances,e.virtual),t.instancesLoaded=e.instances,Ae.sparql.isSnik){await Yh(t.cy,fa,Ae.defaultSubOntologies,!1),ze.setVisible(t.cy.elements(),!1);const n=t.cy.nodes("node[id='http://www.snik.eu/ontology/bb/ChiefInformationOfficer']");t.showStar(n),await Rt(t.cy,zi),t.cy.elements().unselect(),t.cy.center(n),t.cy.fit(t.cy.elements(":visible")),ze.setVisible(n,!0),t.starMode=!0}e.clazz&&(se.info(`Parameter "class" detected. Centering on URI ${e.clazz}.`),setTimeout(()=>t.presentUri(e.clazz),300))}catch(r){se.error(r),se.error("Error initializing SNIK Graph "+r)}}async function oC(t){await da(async()=>{const e=aC();await iC(t,e),t.menu=new ha,new ZE(Mt("search")),nc()}),nc()}const ea=[];function sC(){document.documentElement.addEventListener("keydown",t=>{const e=t.target;if(!e||e.nodeName!=="BODY")return;const r=be.activeState();if(!!r){if((t.code==="Delete"||t.code==="Backspace")&&r.cy.remove(":selected"),t.code==="KeyS"||t.code==="KeyC"){const n=r.cy.nodes(":selected");if(n.size()===0)return;ea.length=0,ea.push(...n.map(a=>a.id())),se.debug(`Copied ${ea.length} elements from ${r.name}.`),se.info("Partial graph copied!")}if(t.code==="KeyP"||t.code==="KeyV"){r.cy.startBatch(),r.cy.elements().unselect();const n=r.graph.getElementsByIds(ea);ze.setVisible(n,!0),r.cy.endBatch();const a=r.cy.nodes(".unfiltered").not(".hidden"),i=n.edgesWith(a),o=n.union(i);ze.setVisible(o,!0),o.select(),r.cy.fit(r.cy.elements(".unfiltered").not(".hidden")),se.debug(`Pasted ${ea.length} elements into ${r.name}.`),se.info("Partial graph inserted!")}}})}async function lC(){if(window.mainCalled){se.warn("main() is called multiple times for unknown reasons. Ignoring.");return}window.mainCalled=!0,console.groupCollapsed("Initializing"),console.time("Initializing"),rC(),sC(),Kt.init({openTrigger:"data-custom-open"});for(let t=0;t<Ae.multiview.initialTabs;t++)await new be().initialized;console.timeEnd("Initializing"),console.groupEnd()}document.addEventListener("DOMContentLoaded",lC);
