var Dg=Object.defineProperty;var Lg=(t,e,n)=>e in t?Dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ct=(t,e,n)=>Lg(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ys={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Og=ys.exports,Yc;function Bg(){return Yc||(Yc=1,function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Og,function(e,n){var r=[],i=Object.getPrototypeOf,a=r.slice,o=r.flat?function(d){return r.flat.call(d)}:function(d){return r.concat.apply([],d)},s=r.push,l=r.indexOf,u={},c=u.toString,f=u.hasOwnProperty,v=f.toString,g=v.call(Object),h={},m=function(y){return typeof y=="function"&&typeof y.nodeType!="number"&&typeof y.item!="function"},w=function(y){return y!=null&&y===y.window},b=e.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function C(d,y,S){S=S||b;var T,I,M=S.createElement("script");if(M.text=d,y)for(T in E)I=y[T]||y.getAttribute&&y.getAttribute(T),I&&M.setAttribute(T,I);S.head.appendChild(M).parentNode.removeChild(M)}function x(d){return d==null?d+"":typeof d=="object"||typeof d=="function"?u[c.call(d)]||"object":typeof d}var k="3.7.1",A=/HTML$/i,p=function(d,y){return new p.fn.init(d,y)};p.fn=p.prototype={jquery:k,constructor:p,length:0,toArray:function(){return a.call(this)},get:function(d){return d==null?a.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var y=p.merge(this.constructor(),d);return y.prevObject=this,y},each:function(d){return p.each(this,d)},map:function(d){return this.pushStack(p.map(this,function(y,S){return d.call(y,S,y)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(d,y){return(y+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(d,y){return y%2}))},eq:function(d){var y=this.length,S=+d+(d<0?y:0);return this.pushStack(S>=0&&S<y?[this[S]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},p.extend=p.fn.extend=function(){var d,y,S,T,I,M,B=arguments[0]||{},Q=1,j=arguments.length,ie=!1;for(typeof B=="boolean"&&(ie=B,B=arguments[Q]||{},Q++),typeof B!="object"&&!m(B)&&(B={}),Q===j&&(B=this,Q--);Q<j;Q++)if((d=arguments[Q])!=null)for(y in d)T=d[y],!(y==="__proto__"||B===T)&&(ie&&T&&(p.isPlainObject(T)||(I=Array.isArray(T)))?(S=B[y],I&&!Array.isArray(S)?M=[]:!I&&!p.isPlainObject(S)?M={}:M=S,I=!1,B[y]=p.extend(ie,M,T)):T!==void 0&&(B[y]=T));return B},p.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var y,S;return!d||c.call(d)!=="[object Object]"?!1:(y=i(d),y?(S=f.call(y,"constructor")&&y.constructor,typeof S=="function"&&v.call(S)===g):!0)},isEmptyObject:function(d){var y;for(y in d)return!1;return!0},globalEval:function(d,y,S){C(d,{nonce:y&&y.nonce},S)},each:function(d,y){var S,T=0;if(P(d))for(S=d.length;T<S&&y.call(d[T],T,d[T])!==!1;T++);else for(T in d)if(y.call(d[T],T,d[T])===!1)break;return d},text:function(d){var y,S="",T=0,I=d.nodeType;if(!I)for(;y=d[T++];)S+=p.text(y);return I===1||I===11?d.textContent:I===9?d.documentElement.textContent:I===3||I===4?d.nodeValue:S},makeArray:function(d,y){var S=y||[];return d!=null&&(P(Object(d))?p.merge(S,typeof d=="string"?[d]:d):s.call(S,d)),S},inArray:function(d,y,S){return y==null?-1:l.call(y,d,S)},isXMLDoc:function(d){var y=d&&d.namespaceURI,S=d&&(d.ownerDocument||d).documentElement;return!A.test(y||S&&S.nodeName||"HTML")},merge:function(d,y){for(var S=+y.length,T=0,I=d.length;T<S;T++)d[I++]=y[T];return d.length=I,d},grep:function(d,y,S){for(var T,I=[],M=0,B=d.length,Q=!S;M<B;M++)T=!y(d[M],M),T!==Q&&I.push(d[M]);return I},map:function(d,y,S){var T,I,M=0,B=[];if(P(d))for(T=d.length;M<T;M++)I=y(d[M],M,S),I!=null&&B.push(I);else for(M in d)I=y(d[M],M,S),I!=null&&B.push(I);return o(B)},guid:1,support:h}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=r[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,y){u["[object "+y+"]"]=y.toLowerCase()});function P(d){var y=!!d&&"length"in d&&d.length,S=x(d);return m(d)||w(d)?!1:S==="array"||y===0||typeof y=="number"&&y>0&&y-1 in d}function _(d,y){return d.nodeName&&d.nodeName.toLowerCase()===y.toLowerCase()}var O=r.pop,D=r.sort,L=r.splice,N="[\\x20\\t\\r\\n\\f]",R=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");p.contains=function(d,y){var S=y&&y.parentNode;return d===S||!!(S&&S.nodeType===1&&(d.contains?d.contains(S):d.compareDocumentPosition&&d.compareDocumentPosition(S)&16))};var z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function H(d,y){return y?d==="\0"?"ï¿½":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}p.escapeSelector=function(d){return(d+"").replace(z,H)};var W=b,X=s;(function(){var d,y,S,T,I,M=X,B,Q,j,ie,me,Ee=p.expando,he=0,Pe=0,tt=Vo(),ht=Vo(),st=Vo(),en=Vo(),Wt=function(q,te){return q===te&&(I=!0),0},tr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nr="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",dt="\\["+N+"*("+nr+")(?:"+N+"*([*^$|!~]?=)"+N+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+nr+"))|)"+N+"*\\]",li=":("+nr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+dt+")*)|.*)\\)|)",vt=new RegExp(N+"+","g"),Nt=new RegExp("^"+N+"*,"+N+"*"),Ma=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),Ol=new RegExp(N+"|>"),rr=new RegExp(li),Pa=new RegExp("^"+nr+"$"),ir={ID:new RegExp("^#("+nr+")"),CLASS:new RegExp("^\\.("+nr+")"),TAG:new RegExp("^("+nr+"|[*])"),ATTR:new RegExp("^"+dt),PSEUDO:new RegExp("^"+li),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+tr+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Or=/^(?:input|select|textarea|button)$/i,Br=/^h\d$/i,Rn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bl=/[+~]/,br=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),wr=function(q,te){var fe="0x"+q.slice(1)-65536;return te||(fe<0?String.fromCharCode(fe+65536):String.fromCharCode(fe>>10|55296,fe&1023|56320))},Tg=function(){Rr()},kg=Wo(function(q){return q.disabled===!0&&_(q,"fieldset")},{dir:"parentNode",next:"legend"});function Ag(){try{return B.activeElement}catch{}}try{M.apply(r=a.call(W.childNodes),W.childNodes),r[W.childNodes.length].nodeType}catch{M={apply:function(te,fe){X.apply(te,a.call(fe))},call:function(te){X.apply(te,a.call(arguments,1))}}}function Et(q,te,fe,ge){var xe,Ne,ze,Ke,He,ct,et,rt=te&&te.ownerDocument,ft=te?te.nodeType:9;if(fe=fe||[],typeof q!="string"||!q||ft!==1&&ft!==9&&ft!==11)return fe;if(!ge&&(Rr(te),te=te||B,j)){if(ft!==11&&(He=Rn.exec(q)))if(xe=He[1]){if(ft===9)if(ze=te.getElementById(xe)){if(ze.id===xe)return M.call(fe,ze),fe}else return fe;else if(rt&&(ze=rt.getElementById(xe))&&Et.contains(te,ze)&&ze.id===xe)return M.call(fe,ze),fe}else{if(He[2])return M.apply(fe,te.getElementsByTagName(q)),fe;if((xe=He[3])&&te.getElementsByClassName)return M.apply(fe,te.getElementsByClassName(xe)),fe}if(!en[q+" "]&&(!ie||!ie.test(q))){if(et=q,rt=te,ft===1&&(Ol.test(q)||Ma.test(q))){for(rt=Bl.test(q)&&Rl(te.parentNode)||te,(rt!=te||!h.scope)&&((Ke=te.getAttribute("id"))?Ke=p.escapeSelector(Ke):te.setAttribute("id",Ke=Ee)),ct=Da(q),Ne=ct.length;Ne--;)ct[Ne]=(Ke?"#"+Ke:":scope")+" "+qo(ct[Ne]);et=ct.join(",")}try{return M.apply(fe,rt.querySelectorAll(et)),fe}catch{en(q,!0)}finally{Ke===Ee&&te.removeAttribute("id")}}}return Xc(q.replace(R,"$1"),te,fe,ge)}function Vo(){var q=[];function te(fe,ge){return q.push(fe+" ")>y.cacheLength&&delete te[q.shift()],te[fe+" "]=ge}return te}function jn(q){return q[Ee]=!0,q}function Bi(q){var te=B.createElement("fieldset");try{return!!q(te)}catch{return!1}finally{te.parentNode&&te.parentNode.removeChild(te),te=null}}function _g(q){return function(te){return _(te,"input")&&te.type===q}}function Ig(q){return function(te){return(_(te,"input")||_(te,"button"))&&te.type===q}}function jc(q){return function(te){return"form"in te?te.parentNode&&te.disabled===!1?"label"in te?"label"in te.parentNode?te.parentNode.disabled===q:te.disabled===q:te.isDisabled===q||te.isDisabled!==!q&&kg(te)===q:te.disabled===q:"label"in te?te.disabled===q:!1}}function ui(q){return jn(function(te){return te=+te,jn(function(fe,ge){for(var xe,Ne=q([],fe.length,te),ze=Ne.length;ze--;)fe[xe=Ne[ze]]&&(fe[xe]=!(ge[xe]=fe[xe]))})})}function Rl(q){return q&&typeof q.getElementsByTagName<"u"&&q}function Rr(q){var te,fe=q?q.ownerDocument||q:W;return fe==B||fe.nodeType!==9||!fe.documentElement||(B=fe,Q=B.documentElement,j=!p.isXMLDoc(B),me=Q.matches||Q.webkitMatchesSelector||Q.msMatchesSelector,Q.msMatchesSelector&&W!=B&&(te=B.defaultView)&&te.top!==te&&te.addEventListener("unload",Tg),h.getById=Bi(function(ge){return Q.appendChild(ge).id=p.expando,!B.getElementsByName||!B.getElementsByName(p.expando).length}),h.disconnectedMatch=Bi(function(ge){return me.call(ge,"*")}),h.scope=Bi(function(){return B.querySelectorAll(":scope")}),h.cssHas=Bi(function(){try{return B.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),h.getById?(y.filter.ID=function(ge){var xe=ge.replace(br,wr);return function(Ne){return Ne.getAttribute("id")===xe}},y.find.ID=function(ge,xe){if(typeof xe.getElementById<"u"&&j){var Ne=xe.getElementById(ge);return Ne?[Ne]:[]}}):(y.filter.ID=function(ge){var xe=ge.replace(br,wr);return function(Ne){var ze=typeof Ne.getAttributeNode<"u"&&Ne.getAttributeNode("id");return ze&&ze.value===xe}},y.find.ID=function(ge,xe){if(typeof xe.getElementById<"u"&&j){var Ne,ze,Ke,He=xe.getElementById(ge);if(He){if(Ne=He.getAttributeNode("id"),Ne&&Ne.value===ge)return[He];for(Ke=xe.getElementsByName(ge),ze=0;He=Ke[ze++];)if(Ne=He.getAttributeNode("id"),Ne&&Ne.value===ge)return[He]}return[]}}),y.find.TAG=function(ge,xe){return typeof xe.getElementsByTagName<"u"?xe.getElementsByTagName(ge):xe.querySelectorAll(ge)},y.find.CLASS=function(ge,xe){if(typeof xe.getElementsByClassName<"u"&&j)return xe.getElementsByClassName(ge)},ie=[],Bi(function(ge){var xe;Q.appendChild(ge).innerHTML="<a id='"+Ee+"' href='' disabled='disabled'></a><select id='"+Ee+"-\r\\' disabled='disabled'><option selected=''></option></select>",ge.querySelectorAll("[selected]").length||ie.push("\\["+N+"*(?:value|"+tr+")"),ge.querySelectorAll("[id~="+Ee+"-]").length||ie.push("~="),ge.querySelectorAll("a#"+Ee+"+*").length||ie.push(".#.+[+~]"),ge.querySelectorAll(":checked").length||ie.push(":checked"),xe=B.createElement("input"),xe.setAttribute("type","hidden"),ge.appendChild(xe).setAttribute("name","D"),Q.appendChild(ge).disabled=!0,ge.querySelectorAll(":disabled").length!==2&&ie.push(":enabled",":disabled"),xe=B.createElement("input"),xe.setAttribute("name",""),ge.appendChild(xe),ge.querySelectorAll("[name='']").length||ie.push("\\["+N+"*name"+N+"*="+N+`*(?:''|"")`)}),h.cssHas||ie.push(":has"),ie=ie.length&&new RegExp(ie.join("|")),Wt=function(ge,xe){if(ge===xe)return I=!0,0;var Ne=!ge.compareDocumentPosition-!xe.compareDocumentPosition;return Ne||(Ne=(ge.ownerDocument||ge)==(xe.ownerDocument||xe)?ge.compareDocumentPosition(xe):1,Ne&1||!h.sortDetached&&xe.compareDocumentPosition(ge)===Ne?ge===B||ge.ownerDocument==W&&Et.contains(W,ge)?-1:xe===B||xe.ownerDocument==W&&Et.contains(W,xe)?1:T?l.call(T,ge)-l.call(T,xe):0:Ne&4?-1:1)}),B}Et.matches=function(q,te){return Et(q,null,null,te)},Et.matchesSelector=function(q,te){if(Rr(q),j&&!en[te+" "]&&(!ie||!ie.test(te)))try{var fe=me.call(q,te);if(fe||h.disconnectedMatch||q.document&&q.document.nodeType!==11)return fe}catch{en(te,!0)}return Et(te,B,null,[q]).length>0},Et.contains=function(q,te){return(q.ownerDocument||q)!=B&&Rr(q),p.contains(q,te)},Et.attr=function(q,te){(q.ownerDocument||q)!=B&&Rr(q);var fe=y.attrHandle[te.toLowerCase()],ge=fe&&f.call(y.attrHandle,te.toLowerCase())?fe(q,te,!j):void 0;return ge!==void 0?ge:q.getAttribute(te)},Et.error=function(q){throw new Error("Syntax error, unrecognized expression: "+q)},p.uniqueSort=function(q){var te,fe=[],ge=0,xe=0;if(I=!h.sortStable,T=!h.sortStable&&a.call(q,0),D.call(q,Wt),I){for(;te=q[xe++];)te===q[xe]&&(ge=fe.push(xe));for(;ge--;)L.call(q,fe[ge],1)}return T=null,q},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(a.apply(this)))},y=p.expr={cacheLength:50,createPseudo:jn,match:ir,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(q){return q[1]=q[1].replace(br,wr),q[3]=(q[3]||q[4]||q[5]||"").replace(br,wr),q[2]==="~="&&(q[3]=" "+q[3]+" "),q.slice(0,4)},CHILD:function(q){return q[1]=q[1].toLowerCase(),q[1].slice(0,3)==="nth"?(q[3]||Et.error(q[0]),q[4]=+(q[4]?q[5]+(q[6]||1):2*(q[3]==="even"||q[3]==="odd")),q[5]=+(q[7]+q[8]||q[3]==="odd")):q[3]&&Et.error(q[0]),q},PSEUDO:function(q){var te,fe=!q[6]&&q[2];return ir.CHILD.test(q[0])?null:(q[3]?q[2]=q[4]||q[5]||"":fe&&rr.test(fe)&&(te=Da(fe,!0))&&(te=fe.indexOf(")",fe.length-te)-fe.length)&&(q[0]=q[0].slice(0,te),q[2]=fe.slice(0,te)),q.slice(0,3))}},filter:{TAG:function(q){var te=q.replace(br,wr).toLowerCase();return q==="*"?function(){return!0}:function(fe){return _(fe,te)}},CLASS:function(q){var te=tt[q+" "];return te||(te=new RegExp("(^|"+N+")"+q+"("+N+"|$)"))&&tt(q,function(fe){return te.test(typeof fe.className=="string"&&fe.className||typeof fe.getAttribute<"u"&&fe.getAttribute("class")||"")})},ATTR:function(q,te,fe){return function(ge){var xe=Et.attr(ge,q);return xe==null?te==="!=":te?(xe+="",te==="="?xe===fe:te==="!="?xe!==fe:te==="^="?fe&&xe.indexOf(fe)===0:te==="*="?fe&&xe.indexOf(fe)>-1:te==="$="?fe&&xe.slice(-fe.length)===fe:te==="~="?(" "+xe.replace(vt," ")+" ").indexOf(fe)>-1:te==="|="?xe===fe||xe.slice(0,fe.length+1)===fe+"-":!1):!0}},CHILD:function(q,te,fe,ge,xe){var Ne=q.slice(0,3)!=="nth",ze=q.slice(-4)!=="last",Ke=te==="of-type";return ge===1&&xe===0?function(He){return!!He.parentNode}:function(He,ct,et){var rt,ft,Qe,kt,xn,ln=Ne!==ze?"nextSibling":"previousSibling",Nn=He.parentNode,ar=Ke&&He.nodeName.toLowerCase(),Ri=!et&&!Ke,pn=!1;if(Nn){if(Ne){for(;ln;){for(Qe=He;Qe=Qe[ln];)if(Ke?_(Qe,ar):Qe.nodeType===1)return!1;xn=ln=q==="only"&&!xn&&"nextSibling"}return!0}if(xn=[ze?Nn.firstChild:Nn.lastChild],ze&&Ri){for(ft=Nn[Ee]||(Nn[Ee]={}),rt=ft[q]||[],kt=rt[0]===he&&rt[1],pn=kt&&rt[2],Qe=kt&&Nn.childNodes[kt];Qe=++kt&&Qe&&Qe[ln]||(pn=kt=0)||xn.pop();)if(Qe.nodeType===1&&++pn&&Qe===He){ft[q]=[he,kt,pn];break}}else if(Ri&&(ft=He[Ee]||(He[Ee]={}),rt=ft[q]||[],kt=rt[0]===he&&rt[1],pn=kt),pn===!1)for(;(Qe=++kt&&Qe&&Qe[ln]||(pn=kt=0)||xn.pop())&&!((Ke?_(Qe,ar):Qe.nodeType===1)&&++pn&&(Ri&&(ft=Qe[Ee]||(Qe[Ee]={}),ft[q]=[he,pn]),Qe===He)););return pn-=xe,pn===ge||pn%ge===0&&pn/ge>=0}}},PSEUDO:function(q,te){var fe,ge=y.pseudos[q]||y.setFilters[q.toLowerCase()]||Et.error("unsupported pseudo: "+q);return ge[Ee]?ge(te):ge.length>1?(fe=[q,q,"",te],y.setFilters.hasOwnProperty(q.toLowerCase())?jn(function(xe,Ne){for(var ze,Ke=ge(xe,te),He=Ke.length;He--;)ze=l.call(xe,Ke[He]),xe[ze]=!(Ne[ze]=Ke[He])}):function(xe){return ge(xe,0,fe)}):ge}},pseudos:{not:jn(function(q){var te=[],fe=[],ge=Hl(q.replace(R,"$1"));return ge[Ee]?jn(function(xe,Ne,ze,Ke){for(var He,ct=ge(xe,null,Ke,[]),et=xe.length;et--;)(He=ct[et])&&(xe[et]=!(Ne[et]=He))}):function(xe,Ne,ze){return te[0]=xe,ge(te,null,ze,fe),te[0]=null,!fe.pop()}}),has:jn(function(q){return function(te){return Et(q,te).length>0}}),contains:jn(function(q){return q=q.replace(br,wr),function(te){return(te.textContent||p.text(te)).indexOf(q)>-1}}),lang:jn(function(q){return Pa.test(q||"")||Et.error("unsupported lang: "+q),q=q.replace(br,wr).toLowerCase(),function(te){var fe;do if(fe=j?te.lang:te.getAttribute("xml:lang")||te.getAttribute("lang"))return fe=fe.toLowerCase(),fe===q||fe.indexOf(q+"-")===0;while((te=te.parentNode)&&te.nodeType===1);return!1}}),target:function(q){var te=e.location&&e.location.hash;return te&&te.slice(1)===q.id},root:function(q){return q===Q},focus:function(q){return q===Ag()&&B.hasFocus()&&!!(q.type||q.href||~q.tabIndex)},enabled:jc(!1),disabled:jc(!0),checked:function(q){return _(q,"input")&&!!q.checked||_(q,"option")&&!!q.selected},selected:function(q){return q.parentNode&&q.parentNode.selectedIndex,q.selected===!0},empty:function(q){for(q=q.firstChild;q;q=q.nextSibling)if(q.nodeType<6)return!1;return!0},parent:function(q){return!y.pseudos.empty(q)},header:function(q){return Br.test(q.nodeName)},input:function(q){return Or.test(q.nodeName)},button:function(q){return _(q,"input")&&q.type==="button"||_(q,"button")},text:function(q){var te;return _(q,"input")&&q.type==="text"&&((te=q.getAttribute("type"))==null||te.toLowerCase()==="text")},first:ui(function(){return[0]}),last:ui(function(q,te){return[te-1]}),eq:ui(function(q,te,fe){return[fe<0?fe+te:fe]}),even:ui(function(q,te){for(var fe=0;fe<te;fe+=2)q.push(fe);return q}),odd:ui(function(q,te){for(var fe=1;fe<te;fe+=2)q.push(fe);return q}),lt:ui(function(q,te,fe){var ge;for(fe<0?ge=fe+te:fe>te?ge=te:ge=fe;--ge>=0;)q.push(ge);return q}),gt:ui(function(q,te,fe){for(var ge=fe<0?fe+te:fe;++ge<te;)q.push(ge);return q})}},y.pseudos.nth=y.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[d]=_g(d);for(d in{submit:!0,reset:!0})y.pseudos[d]=Ig(d);function Kc(){}Kc.prototype=y.filters=y.pseudos,y.setFilters=new Kc;function Da(q,te){var fe,ge,xe,Ne,ze,Ke,He,ct=ht[q+" "];if(ct)return te?0:ct.slice(0);for(ze=q,Ke=[],He=y.preFilter;ze;){(!fe||(ge=Nt.exec(ze)))&&(ge&&(ze=ze.slice(ge[0].length)||ze),Ke.push(xe=[])),fe=!1,(ge=Ma.exec(ze))&&(fe=ge.shift(),xe.push({value:fe,type:ge[0].replace(R," ")}),ze=ze.slice(fe.length));for(Ne in y.filter)(ge=ir[Ne].exec(ze))&&(!He[Ne]||(ge=He[Ne](ge)))&&(fe=ge.shift(),xe.push({value:fe,type:Ne,matches:ge}),ze=ze.slice(fe.length));if(!fe)break}return te?ze.length:ze?Et.error(q):ht(q,Ke).slice(0)}function qo(q){for(var te=0,fe=q.length,ge="";te<fe;te++)ge+=q[te].value;return ge}function Wo(q,te,fe){var ge=te.dir,xe=te.next,Ne=xe||ge,ze=fe&&Ne==="parentNode",Ke=Pe++;return te.first?function(He,ct,et){for(;He=He[ge];)if(He.nodeType===1||ze)return q(He,ct,et);return!1}:function(He,ct,et){var rt,ft,Qe=[he,Ke];if(et){for(;He=He[ge];)if((He.nodeType===1||ze)&&q(He,ct,et))return!0}else for(;He=He[ge];)if(He.nodeType===1||ze)if(ft=He[Ee]||(He[Ee]={}),xe&&_(He,xe))He=He[ge]||He;else{if((rt=ft[Ne])&&rt[0]===he&&rt[1]===Ke)return Qe[2]=rt[2];if(ft[Ne]=Qe,Qe[2]=q(He,ct,et))return!0}return!1}}function Nl(q){return q.length>1?function(te,fe,ge){for(var xe=q.length;xe--;)if(!q[xe](te,fe,ge))return!1;return!0}:q[0]}function Mg(q,te,fe){for(var ge=0,xe=te.length;ge<xe;ge++)Et(q,te[ge],fe);return fe}function Uo(q,te,fe,ge,xe){for(var Ne,ze=[],Ke=0,He=q.length,ct=te!=null;Ke<He;Ke++)(Ne=q[Ke])&&(!fe||fe(Ne,ge,xe))&&(ze.push(Ne),ct&&te.push(Ke));return ze}function Fl(q,te,fe,ge,xe,Ne){return ge&&!ge[Ee]&&(ge=Fl(ge)),xe&&!xe[Ee]&&(xe=Fl(xe,Ne)),jn(function(ze,Ke,He,ct){var et,rt,ft,Qe,kt=[],xn=[],ln=Ke.length,Nn=ze||Mg(te||"*",He.nodeType?[He]:He,[]),ar=q&&(ze||!te)?Uo(Nn,kt,q,He,ct):Nn;if(fe?(Qe=xe||(ze?q:ln||ge)?[]:Ke,fe(ar,Qe,He,ct)):Qe=ar,ge)for(et=Uo(Qe,xn),ge(et,[],He,ct),rt=et.length;rt--;)(ft=et[rt])&&(Qe[xn[rt]]=!(ar[xn[rt]]=ft));if(ze){if(xe||q){if(xe){for(et=[],rt=Qe.length;rt--;)(ft=Qe[rt])&&et.push(ar[rt]=ft);xe(null,Qe=[],et,ct)}for(rt=Qe.length;rt--;)(ft=Qe[rt])&&(et=xe?l.call(ze,ft):kt[rt])>-1&&(ze[et]=!(Ke[et]=ft))}}else Qe=Uo(Qe===Ke?Qe.splice(ln,Qe.length):Qe),xe?xe(null,Ke,Qe,ct):M.apply(Ke,Qe)})}function zl(q){for(var te,fe,ge,xe=q.length,Ne=y.relative[q[0].type],ze=Ne||y.relative[" "],Ke=Ne?1:0,He=Wo(function(rt){return rt===te},ze,!0),ct=Wo(function(rt){return l.call(te,rt)>-1},ze,!0),et=[function(rt,ft,Qe){var kt=!Ne&&(Qe||ft!=S)||((te=ft).nodeType?He(rt,ft,Qe):ct(rt,ft,Qe));return te=null,kt}];Ke<xe;Ke++)if(fe=y.relative[q[Ke].type])et=[Wo(Nl(et),fe)];else{if(fe=y.filter[q[Ke].type].apply(null,q[Ke].matches),fe[Ee]){for(ge=++Ke;ge<xe&&!y.relative[q[ge].type];ge++);return Fl(Ke>1&&Nl(et),Ke>1&&qo(q.slice(0,Ke-1).concat({value:q[Ke-2].type===" "?"*":""})).replace(R,"$1"),fe,Ke<ge&&zl(q.slice(Ke,ge)),ge<xe&&zl(q=q.slice(ge)),ge<xe&&qo(q))}et.push(fe)}return Nl(et)}function Pg(q,te){var fe=te.length>0,ge=q.length>0,xe=function(Ne,ze,Ke,He,ct){var et,rt,ft,Qe=0,kt="0",xn=Ne&&[],ln=[],Nn=S,ar=Ne||ge&&y.find.TAG("*",ct),Ri=he+=Nn==null?1:Math.random()||.1,pn=ar.length;for(ct&&(S=ze==B||ze||ct);kt!==pn&&(et=ar[kt])!=null;kt++){if(ge&&et){for(rt=0,!ze&&et.ownerDocument!=B&&(Rr(et),Ke=!j);ft=q[rt++];)if(ft(et,ze||B,Ke)){M.call(He,et);break}ct&&(he=Ri)}fe&&((et=!ft&&et)&&Qe--,Ne&&xn.push(et))}if(Qe+=kt,fe&&kt!==Qe){for(rt=0;ft=te[rt++];)ft(xn,ln,ze,Ke);if(Ne){if(Qe>0)for(;kt--;)xn[kt]||ln[kt]||(ln[kt]=O.call(He));ln=Uo(ln)}M.apply(He,ln),ct&&!Ne&&ln.length>0&&Qe+te.length>1&&p.uniqueSort(He)}return ct&&(he=Ri,S=Nn),xn};return fe?jn(xe):xe}function Hl(q,te){var fe,ge=[],xe=[],Ne=st[q+" "];if(!Ne){for(te||(te=Da(q)),fe=te.length;fe--;)Ne=zl(te[fe]),Ne[Ee]?ge.push(Ne):xe.push(Ne);Ne=st(q,Pg(xe,ge)),Ne.selector=q}return Ne}function Xc(q,te,fe,ge){var xe,Ne,ze,Ke,He,ct=typeof q=="function"&&q,et=!ge&&Da(q=ct.selector||q);if(fe=fe||[],et.length===1){if(Ne=et[0]=et[0].slice(0),Ne.length>2&&(ze=Ne[0]).type==="ID"&&te.nodeType===9&&j&&y.relative[Ne[1].type]){if(te=(y.find.ID(ze.matches[0].replace(br,wr),te)||[])[0],te)ct&&(te=te.parentNode);else return fe;q=q.slice(Ne.shift().value.length)}for(xe=ir.needsContext.test(q)?0:Ne.length;xe--&&(ze=Ne[xe],!y.relative[Ke=ze.type]);)if((He=y.find[Ke])&&(ge=He(ze.matches[0].replace(br,wr),Bl.test(Ne[0].type)&&Rl(te.parentNode)||te))){if(Ne.splice(xe,1),q=ge.length&&qo(Ne),!q)return M.apply(fe,ge),fe;break}}return(ct||Hl(q,et))(ge,te,!j,fe,!te||Bl.test(q)&&Rl(te.parentNode)||te),fe}h.sortStable=Ee.split("").sort(Wt).join("")===Ee,Rr(),h.sortDetached=Bi(function(q){return q.compareDocumentPosition(B.createElement("fieldset"))&1}),p.find=Et,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Et.compile=Hl,Et.select=Xc,Et.setDocument=Rr,Et.tokenize=Da,Et.escape=p.escapeSelector,Et.getText=p.text,Et.isXML=p.isXMLDoc,Et.selectors=p.expr,Et.support=p.support,Et.uniqueSort=p.uniqueSort})();var re=function(d,y,S){for(var T=[],I=S!==void 0;(d=d[y])&&d.nodeType!==9;)if(d.nodeType===1){if(I&&p(d).is(S))break;T.push(d)}return T},ae=function(d,y){for(var S=[];d;d=d.nextSibling)d.nodeType===1&&d!==y&&S.push(d);return S},J=p.expr.match.needsContext,$=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(d,y,S){return m(y)?p.grep(d,function(T,I){return!!y.call(T,I,T)!==S}):y.nodeType?p.grep(d,function(T){return T===y!==S}):typeof y!="string"?p.grep(d,function(T){return l.call(y,T)>-1!==S}):p.filter(y,d,S)}p.filter=function(d,y,S){var T=y[0];return S&&(d=":not("+d+")"),y.length===1&&T.nodeType===1?p.find.matchesSelector(T,d)?[T]:[]:p.find.matches(d,p.grep(y,function(I){return I.nodeType===1}))},p.fn.extend({find:function(d){var y,S,T=this.length,I=this;if(typeof d!="string")return this.pushStack(p(d).filter(function(){for(y=0;y<T;y++)if(p.contains(I[y],this))return!0}));for(S=this.pushStack([]),y=0;y<T;y++)p.find(d,I[y],S);return T>1?p.uniqueSort(S):S},filter:function(d){return this.pushStack(U(this,d||[],!1))},not:function(d){return this.pushStack(U(this,d||[],!0))},is:function(d){return!!U(this,typeof d=="string"&&J.test(d)?p(d):d||[],!1).length}});var G,V=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Y=p.fn.init=function(d,y,S){var T,I;if(!d)return this;if(S=S||G,typeof d=="string")if(d[0]==="<"&&d[d.length-1]===">"&&d.length>=3?T=[null,d,null]:T=V.exec(d),T&&(T[1]||!y))if(T[1]){if(y=y instanceof p?y[0]:y,p.merge(this,p.parseHTML(T[1],y&&y.nodeType?y.ownerDocument||y:b,!0)),$.test(T[1])&&p.isPlainObject(y))for(T in y)m(this[T])?this[T](y[T]):this.attr(T,y[T]);return this}else return I=b.getElementById(T[2]),I&&(this[0]=I,this.length=1),this;else return!y||y.jquery?(y||S).find(d):this.constructor(y).find(d);else{if(d.nodeType)return this[0]=d,this.length=1,this;if(m(d))return S.ready!==void 0?S.ready(d):d(p)}return p.makeArray(d,this)};Y.prototype=p.fn,G=p(b);var ne=/^(?:parents|prev(?:Until|All))/,se={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(d){var y=p(d,this),S=y.length;return this.filter(function(){for(var T=0;T<S;T++)if(p.contains(this,y[T]))return!0})},closest:function(d,y){var S,T=0,I=this.length,M=[],B=typeof d!="string"&&p(d);if(!J.test(d)){for(;T<I;T++)for(S=this[T];S&&S!==y;S=S.parentNode)if(S.nodeType<11&&(B?B.index(S)>-1:S.nodeType===1&&p.find.matchesSelector(S,d))){M.push(S);break}}return this.pushStack(M.length>1?p.uniqueSort(M):M)},index:function(d){return d?typeof d=="string"?l.call(p(d),this[0]):l.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,y){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(d,y))))},addBack:function(d){return this.add(d==null?this.prevObject:this.prevObject.filter(d))}});function Z(d,y){for(;(d=d[y])&&d.nodeType!==1;);return d}p.each({parent:function(d){var y=d.parentNode;return y&&y.nodeType!==11?y:null},parents:function(d){return re(d,"parentNode")},parentsUntil:function(d,y,S){return re(d,"parentNode",S)},next:function(d){return Z(d,"nextSibling")},prev:function(d){return Z(d,"previousSibling")},nextAll:function(d){return re(d,"nextSibling")},prevAll:function(d){return re(d,"previousSibling")},nextUntil:function(d,y,S){return re(d,"nextSibling",S)},prevUntil:function(d,y,S){return re(d,"previousSibling",S)},siblings:function(d){return ae((d.parentNode||{}).firstChild,d)},children:function(d){return ae(d.firstChild)},contents:function(d){return d.contentDocument!=null&&i(d.contentDocument)?d.contentDocument:(_(d,"template")&&(d=d.content||d),p.merge([],d.childNodes))}},function(d,y){p.fn[d]=function(S,T){var I=p.map(this,y,S);return d.slice(-5)!=="Until"&&(T=S),T&&typeof T=="string"&&(I=p.filter(T,I)),this.length>1&&(se[d]||p.uniqueSort(I),ne.test(d)&&I.reverse()),this.pushStack(I)}});var K=/[^\x20\t\r\n\f]+/g;function ce(d){var y={};return p.each(d.match(K)||[],function(S,T){y[T]=!0}),y}p.Callbacks=function(d){d=typeof d=="string"?ce(d):p.extend({},d);var y,S,T,I,M=[],B=[],Q=-1,j=function(){for(I=I||d.once,T=y=!0;B.length;Q=-1)for(S=B.shift();++Q<M.length;)M[Q].apply(S[0],S[1])===!1&&d.stopOnFalse&&(Q=M.length,S=!1);d.memory||(S=!1),y=!1,I&&(S?M=[]:M="")},ie={add:function(){return M&&(S&&!y&&(Q=M.length-1,B.push(S)),function me(Ee){p.each(Ee,function(he,Pe){m(Pe)?(!d.unique||!ie.has(Pe))&&M.push(Pe):Pe&&Pe.length&&x(Pe)!=="string"&&me(Pe)})}(arguments),S&&!y&&j()),this},remove:function(){return p.each(arguments,function(me,Ee){for(var he;(he=p.inArray(Ee,M,he))>-1;)M.splice(he,1),he<=Q&&Q--}),this},has:function(me){return me?p.inArray(me,M)>-1:M.length>0},empty:function(){return M&&(M=[]),this},disable:function(){return I=B=[],M=S="",this},disabled:function(){return!M},lock:function(){return I=B=[],!S&&!y&&(M=S=""),this},locked:function(){return!!I},fireWith:function(me,Ee){return I||(Ee=Ee||[],Ee=[me,Ee.slice?Ee.slice():Ee],B.push(Ee),y||j()),this},fire:function(){return ie.fireWith(this,arguments),this},fired:function(){return!!T}};return ie};function ve(d){return d}function De(d){throw d}function Oe(d,y,S,T){var I;try{d&&m(I=d.promise)?I.call(d).done(y).fail(S):d&&m(I=d.then)?I.call(d,y,S):y.apply(void 0,[d].slice(T))}catch(M){S.apply(void 0,[M])}}p.extend({Deferred:function(d){var y=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],S="pending",T={state:function(){return S},always:function(){return I.done(arguments).fail(arguments),this},catch:function(M){return T.then(null,M)},pipe:function(){var M=arguments;return p.Deferred(function(B){p.each(y,function(Q,j){var ie=m(M[j[4]])&&M[j[4]];I[j[1]](function(){var me=ie&&ie.apply(this,arguments);me&&m(me.promise)?me.promise().progress(B.notify).done(B.resolve).fail(B.reject):B[j[0]+"With"](this,ie?[me]:arguments)})}),M=null}).promise()},then:function(M,B,Q){var j=0;function ie(me,Ee,he,Pe){return function(){var tt=this,ht=arguments,st=function(){var Wt,tr;if(!(me<j)){if(Wt=he.apply(tt,ht),Wt===Ee.promise())throw new TypeError("Thenable self-resolution");tr=Wt&&(typeof Wt=="object"||typeof Wt=="function")&&Wt.then,m(tr)?Pe?tr.call(Wt,ie(j,Ee,ve,Pe),ie(j,Ee,De,Pe)):(j++,tr.call(Wt,ie(j,Ee,ve,Pe),ie(j,Ee,De,Pe),ie(j,Ee,ve,Ee.notifyWith))):(he!==ve&&(tt=void 0,ht=[Wt]),(Pe||Ee.resolveWith)(tt,ht))}},en=Pe?st:function(){try{st()}catch(Wt){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Wt,en.error),me+1>=j&&(he!==De&&(tt=void 0,ht=[Wt]),Ee.rejectWith(tt,ht))}};me?en():(p.Deferred.getErrorHook?en.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(en.error=p.Deferred.getStackHook()),e.setTimeout(en))}}return p.Deferred(function(me){y[0][3].add(ie(0,me,m(Q)?Q:ve,me.notifyWith)),y[1][3].add(ie(0,me,m(M)?M:ve)),y[2][3].add(ie(0,me,m(B)?B:De))}).promise()},promise:function(M){return M!=null?p.extend(M,T):T}},I={};return p.each(y,function(M,B){var Q=B[2],j=B[5];T[B[1]]=Q.add,j&&Q.add(function(){S=j},y[3-M][2].disable,y[3-M][3].disable,y[0][2].lock,y[0][3].lock),Q.add(B[3].fire),I[B[0]]=function(){return I[B[0]+"With"](this===I?void 0:this,arguments),this},I[B[0]+"With"]=Q.fireWith}),T.promise(I),d&&d.call(I,I),I},when:function(d){var y=arguments.length,S=y,T=Array(S),I=a.call(arguments),M=p.Deferred(),B=function(Q){return function(j){T[Q]=this,I[Q]=arguments.length>1?a.call(arguments):j,--y||M.resolveWith(T,I)}};if(y<=1&&(Oe(d,M.done(B(S)).resolve,M.reject,!y),M.state()==="pending"||m(I[S]&&I[S].then)))return M.then();for(;S--;)Oe(I[S],B(S),M.reject);return M.promise()}});var Ze=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(d,y){e.console&&e.console.warn&&d&&Ze.test(d.name)&&e.console.warn("jQuery.Deferred exception: "+d.message,d.stack,y)},p.readyException=function(d){e.setTimeout(function(){throw d})};var nt=p.Deferred();p.fn.ready=function(d){return nt.then(d).catch(function(y){p.readyException(y)}),this},p.extend({isReady:!1,readyWait:1,ready:function(d){(d===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(d!==!0&&--p.readyWait>0)&&nt.resolveWith(b,[p]))}}),p.ready.then=nt.then;function qe(){b.removeEventListener("DOMContentLoaded",qe),e.removeEventListener("load",qe),p.ready()}b.readyState==="complete"||b.readyState!=="loading"&&!b.documentElement.doScroll?e.setTimeout(p.ready):(b.addEventListener("DOMContentLoaded",qe),e.addEventListener("load",qe));var Re=function(d,y,S,T,I,M,B){var Q=0,j=d.length,ie=S==null;if(x(S)==="object"){I=!0;for(Q in S)Re(d,y,Q,S[Q],!0,M,B)}else if(T!==void 0&&(I=!0,m(T)||(B=!0),ie&&(B?(y.call(d,T),y=null):(ie=y,y=function(me,Ee,he){return ie.call(p(me),he)})),y))for(;Q<j;Q++)y(d[Q],S,B?T:T.call(d[Q],Q,y(d[Q],S)));return I?d:ie?y.call(d):j?y(d[0],S):M},be=/^-ms-/,Ce=/-([a-z])/g;function Se(d,y){return y.toUpperCase()}function ke(d){return d.replace(be,"ms-").replace(Ce,Se)}var Le=function(d){return d.nodeType===1||d.nodeType===9||!+d.nodeType};function je(){this.expando=p.expando+je.uid++}je.uid=1,je.prototype={cache:function(d){var y=d[this.expando];return y||(y={},Le(d)&&(d.nodeType?d[this.expando]=y:Object.defineProperty(d,this.expando,{value:y,configurable:!0}))),y},set:function(d,y,S){var T,I=this.cache(d);if(typeof y=="string")I[ke(y)]=S;else for(T in y)I[ke(T)]=y[T];return I},get:function(d,y){return y===void 0?this.cache(d):d[this.expando]&&d[this.expando][ke(y)]},access:function(d,y,S){return y===void 0||y&&typeof y=="string"&&S===void 0?this.get(d,y):(this.set(d,y,S),S!==void 0?S:y)},remove:function(d,y){var S,T=d[this.expando];if(T!==void 0){if(y!==void 0)for(Array.isArray(y)?y=y.map(ke):(y=ke(y),y=y in T?[y]:y.match(K)||[]),S=y.length;S--;)delete T[y[S]];(y===void 0||p.isEmptyObject(T))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var y=d[this.expando];return y!==void 0&&!p.isEmptyObject(y)}};var Te=new je,de=new je,F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;function pe(d){return d==="true"?!0:d==="false"?!1:d==="null"?null:d===+d+""?+d:F.test(d)?JSON.parse(d):d}function le(d,y,S){var T;if(S===void 0&&d.nodeType===1)if(T="data-"+y.replace(oe,"-$&").toLowerCase(),S=d.getAttribute(T),typeof S=="string"){try{S=pe(S)}catch{}de.set(d,y,S)}else S=void 0;return S}p.extend({hasData:function(d){return de.hasData(d)||Te.hasData(d)},data:function(d,y,S){return de.access(d,y,S)},removeData:function(d,y){de.remove(d,y)},_data:function(d,y,S){return Te.access(d,y,S)},_removeData:function(d,y){Te.remove(d,y)}}),p.fn.extend({data:function(d,y){var S,T,I,M=this[0],B=M&&M.attributes;if(d===void 0){if(this.length&&(I=de.get(M),M.nodeType===1&&!Te.get(M,"hasDataAttrs"))){for(S=B.length;S--;)B[S]&&(T=B[S].name,T.indexOf("data-")===0&&(T=ke(T.slice(5)),le(M,T,I[T])));Te.set(M,"hasDataAttrs",!0)}return I}return typeof d=="object"?this.each(function(){de.set(this,d)}):Re(this,function(Q){var j;if(M&&Q===void 0)return j=de.get(M,d),j!==void 0||(j=le(M,d),j!==void 0)?j:void 0;this.each(function(){de.set(this,d,Q)})},null,y,arguments.length>1,null,!0)},removeData:function(d){return this.each(function(){de.remove(this,d)})}}),p.extend({queue:function(d,y,S){var T;if(d)return y=(y||"fx")+"queue",T=Te.get(d,y),S&&(!T||Array.isArray(S)?T=Te.access(d,y,p.makeArray(S)):T.push(S)),T||[]},dequeue:function(d,y){y=y||"fx";var S=p.queue(d,y),T=S.length,I=S.shift(),M=p._queueHooks(d,y),B=function(){p.dequeue(d,y)};I==="inprogress"&&(I=S.shift(),T--),I&&(y==="fx"&&S.unshift("inprogress"),delete M.stop,I.call(d,B,M)),!T&&M&&M.empty.fire()},_queueHooks:function(d,y){var S=y+"queueHooks";return Te.get(d,S)||Te.access(d,S,{empty:p.Callbacks("once memory").add(function(){Te.remove(d,[y+"queue",S])})})}}),p.fn.extend({queue:function(d,y){var S=2;return typeof d!="string"&&(y=d,d="fx",S--),arguments.length<S?p.queue(this[0],d):y===void 0?this:this.each(function(){var T=p.queue(this,d,y);p._queueHooks(this,d),d==="fx"&&T[0]!=="inprogress"&&p.dequeue(this,d)})},dequeue:function(d){return this.each(function(){p.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,y){var S,T=1,I=p.Deferred(),M=this,B=this.length,Q=function(){--T||I.resolveWith(M,[M])};for(typeof d!="string"&&(y=d,d=void 0),d=d||"fx";B--;)S=Te.get(M[B],d+"queueHooks"),S&&S.empty&&(T++,S.empty.add(Q));return Q(),I.promise(y)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ye=["Top","Right","Bottom","Left"],ee=b.documentElement,we=function(d){return p.contains(d.ownerDocument,d)},Me={composed:!0};ee.getRootNode&&(we=function(d){return p.contains(d.ownerDocument,d)||d.getRootNode(Me)===d.ownerDocument});var _e=function(d,y){return d=y||d,d.style.display==="none"||d.style.display===""&&we(d)&&p.css(d,"display")==="none"};function Be(d,y,S,T){var I,M,B=20,Q=T?function(){return T.cur()}:function(){return p.css(d,y,"")},j=Q(),ie=S&&S[3]||(p.cssNumber[y]?"":"px"),me=d.nodeType&&(p.cssNumber[y]||ie!=="px"&&+j)&&Ae.exec(p.css(d,y));if(me&&me[3]!==ie){for(j=j/2,ie=ie||me[3],me=+j||1;B--;)p.style(d,y,me+ie),(1-M)*(1-(M=Q()/j||.5))<=0&&(B=0),me=me/M;me=me*2,p.style(d,y,me+ie),S=S||[]}return S&&(me=+me||+j||0,I=S[1]?me+(S[1]+1)*S[2]:+S[2],T&&(T.unit=ie,T.start=me,T.end=I)),I}var Ge={};function We(d){var y,S=d.ownerDocument,T=d.nodeName,I=Ge[T];return I||(y=S.body.appendChild(S.createElement(T)),I=p.css(y,"display"),y.parentNode.removeChild(y),I==="none"&&(I="block"),Ge[T]=I,I)}function at(d,y){for(var S,T,I=[],M=0,B=d.length;M<B;M++)T=d[M],T.style&&(S=T.style.display,y?(S==="none"&&(I[M]=Te.get(T,"display")||null,I[M]||(T.style.display="")),T.style.display===""&&_e(T)&&(I[M]=We(T))):S!=="none"&&(I[M]="none",Te.set(T,"display",S)));for(M=0;M<B;M++)I[M]!=null&&(d[M].style.display=I[M]);return d}p.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(d){return typeof d=="boolean"?d?this.show():this.hide():this.each(function(){_e(this)?p(this).show():p(this).hide()})}});var mt=/^(?:checkbox|radio)$/i,Mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,$t=/^$|^module$|\/(?:java|ecma)script/i;(function(){var d=b.createDocumentFragment(),y=d.appendChild(b.createElement("div")),S=b.createElement("input");S.setAttribute("type","radio"),S.setAttribute("checked","checked"),S.setAttribute("name","t"),y.appendChild(S),h.checkClone=y.cloneNode(!0).cloneNode(!0).lastChild.checked,y.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!y.cloneNode(!0).lastChild.defaultValue,y.innerHTML="<option></option>",h.option=!!y.lastChild})();var ut={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ut.tbody=ut.tfoot=ut.colgroup=ut.caption=ut.thead,ut.th=ut.td,h.option||(ut.optgroup=ut.option=[1,"<select multiple='multiple'>","</select>"]);function ot(d,y){var S;return typeof d.getElementsByTagName<"u"?S=d.getElementsByTagName(y||"*"):typeof d.querySelectorAll<"u"?S=d.querySelectorAll(y||"*"):S=[],y===void 0||y&&_(d,y)?p.merge([d],S):S}function Pt(d,y){for(var S=0,T=d.length;S<T;S++)Te.set(d[S],"globalEval",!y||Te.get(y[S],"globalEval"))}var zt=/<|&#?\w+;/;function Lt(d,y,S,T,I){for(var M,B,Q,j,ie,me,Ee=y.createDocumentFragment(),he=[],Pe=0,tt=d.length;Pe<tt;Pe++)if(M=d[Pe],M||M===0)if(x(M)==="object")p.merge(he,M.nodeType?[M]:M);else if(!zt.test(M))he.push(y.createTextNode(M));else{for(B=B||Ee.appendChild(y.createElement("div")),Q=(Mt.exec(M)||["",""])[1].toLowerCase(),j=ut[Q]||ut._default,B.innerHTML=j[1]+p.htmlPrefilter(M)+j[2],me=j[0];me--;)B=B.lastChild;p.merge(he,B.childNodes),B=Ee.firstChild,B.textContent=""}for(Ee.textContent="",Pe=0;M=he[Pe++];){if(T&&p.inArray(M,T)>-1){I&&I.push(M);continue}if(ie=we(M),B=ot(Ee.appendChild(M),"script"),ie&&Pt(B),S)for(me=0;M=B[me++];)$t.test(M.type||"")&&S.push(M)}return Ee}var kn=/^([^.]*)(?:\.(.+)|)/;function qt(){return!0}function Jt(){return!1}function An(d,y,S,T,I,M){var B,Q;if(typeof y=="object"){typeof S!="string"&&(T=T||S,S=void 0);for(Q in y)An(d,Q,S,T,y[Q],M);return d}if(T==null&&I==null?(I=S,T=S=void 0):I==null&&(typeof S=="string"?(I=T,T=void 0):(I=T,T=S,S=void 0)),I===!1)I=Jt;else if(!I)return d;return M===1&&(B=I,I=function(j){return p().off(j),B.apply(this,arguments)},I.guid=B.guid||(B.guid=p.guid++)),d.each(function(){p.event.add(this,y,I,T,S)})}p.event={global:{},add:function(d,y,S,T,I){var M,B,Q,j,ie,me,Ee,he,Pe,tt,ht,st=Te.get(d);if(Le(d))for(S.handler&&(M=S,S=M.handler,I=M.selector),I&&p.find.matchesSelector(ee,I),S.guid||(S.guid=p.guid++),(j=st.events)||(j=st.events=Object.create(null)),(B=st.handle)||(B=st.handle=function(en){return typeof p<"u"&&p.event.triggered!==en.type?p.event.dispatch.apply(d,arguments):void 0}),y=(y||"").match(K)||[""],ie=y.length;ie--;)Q=kn.exec(y[ie])||[],Pe=ht=Q[1],tt=(Q[2]||"").split(".").sort(),Pe&&(Ee=p.event.special[Pe]||{},Pe=(I?Ee.delegateType:Ee.bindType)||Pe,Ee=p.event.special[Pe]||{},me=p.extend({type:Pe,origType:ht,data:T,handler:S,guid:S.guid,selector:I,needsContext:I&&p.expr.match.needsContext.test(I),namespace:tt.join(".")},M),(he=j[Pe])||(he=j[Pe]=[],he.delegateCount=0,(!Ee.setup||Ee.setup.call(d,T,tt,B)===!1)&&d.addEventListener&&d.addEventListener(Pe,B)),Ee.add&&(Ee.add.call(d,me),me.handler.guid||(me.handler.guid=S.guid)),I?he.splice(he.delegateCount++,0,me):he.push(me),p.event.global[Pe]=!0)},remove:function(d,y,S,T,I){var M,B,Q,j,ie,me,Ee,he,Pe,tt,ht,st=Te.hasData(d)&&Te.get(d);if(!(!st||!(j=st.events))){for(y=(y||"").match(K)||[""],ie=y.length;ie--;){if(Q=kn.exec(y[ie])||[],Pe=ht=Q[1],tt=(Q[2]||"").split(".").sort(),!Pe){for(Pe in j)p.event.remove(d,Pe+y[ie],S,T,!0);continue}for(Ee=p.event.special[Pe]||{},Pe=(T?Ee.delegateType:Ee.bindType)||Pe,he=j[Pe]||[],Q=Q[2]&&new RegExp("(^|\\.)"+tt.join("\\.(?:.*\\.|)")+"(\\.|$)"),B=M=he.length;M--;)me=he[M],(I||ht===me.origType)&&(!S||S.guid===me.guid)&&(!Q||Q.test(me.namespace))&&(!T||T===me.selector||T==="**"&&me.selector)&&(he.splice(M,1),me.selector&&he.delegateCount--,Ee.remove&&Ee.remove.call(d,me));B&&!he.length&&((!Ee.teardown||Ee.teardown.call(d,tt,st.handle)===!1)&&p.removeEvent(d,Pe,st.handle),delete j[Pe])}p.isEmptyObject(j)&&Te.remove(d,"handle events")}},dispatch:function(d){var y,S,T,I,M,B,Q=new Array(arguments.length),j=p.event.fix(d),ie=(Te.get(this,"events")||Object.create(null))[j.type]||[],me=p.event.special[j.type]||{};for(Q[0]=j,y=1;y<arguments.length;y++)Q[y]=arguments[y];if(j.delegateTarget=this,!(me.preDispatch&&me.preDispatch.call(this,j)===!1)){for(B=p.event.handlers.call(this,j,ie),y=0;(I=B[y++])&&!j.isPropagationStopped();)for(j.currentTarget=I.elem,S=0;(M=I.handlers[S++])&&!j.isImmediatePropagationStopped();)(!j.rnamespace||M.namespace===!1||j.rnamespace.test(M.namespace))&&(j.handleObj=M,j.data=M.data,T=((p.event.special[M.origType]||{}).handle||M.handler).apply(I.elem,Q),T!==void 0&&(j.result=T)===!1&&(j.preventDefault(),j.stopPropagation()));return me.postDispatch&&me.postDispatch.call(this,j),j.result}},handlers:function(d,y){var S,T,I,M,B,Q=[],j=y.delegateCount,ie=d.target;if(j&&ie.nodeType&&!(d.type==="click"&&d.button>=1)){for(;ie!==this;ie=ie.parentNode||this)if(ie.nodeType===1&&!(d.type==="click"&&ie.disabled===!0)){for(M=[],B={},S=0;S<j;S++)T=y[S],I=T.selector+" ",B[I]===void 0&&(B[I]=T.needsContext?p(I,this).index(ie)>-1:p.find(I,this,null,[ie]).length),B[I]&&M.push(T);M.length&&Q.push({elem:ie,handlers:M})}}return ie=this,j<y.length&&Q.push({elem:ie,handlers:y.slice(j)}),Q},addProp:function(d,y){Object.defineProperty(p.Event.prototype,d,{enumerable:!0,configurable:!0,get:m(y)?function(){if(this.originalEvent)return y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(S){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:S})}})},fix:function(d){return d[p.expando]?d:new p.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var y=this||d;return mt.test(y.type)&&y.click&&_(y,"input")&&yn(y,"click",!0),!1},trigger:function(d){var y=this||d;return mt.test(y.type)&&y.click&&_(y,"input")&&yn(y,"click"),!0},_default:function(d){var y=d.target;return mt.test(y.type)&&y.click&&_(y,"input")&&Te.get(y,"click")||_(y,"a")}},beforeunload:{postDispatch:function(d){d.result!==void 0&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}};function yn(d,y,S){if(!S){Te.get(d,y)===void 0&&p.event.add(d,y,qt);return}Te.set(d,y,!1),p.event.add(d,y,{namespace:!1,handler:function(T){var I,M=Te.get(this,y);if(T.isTrigger&1&&this[y]){if(M)(p.event.special[y]||{}).delegateType&&T.stopPropagation();else if(M=a.call(arguments),Te.set(this,y,M),this[y](),I=Te.get(this,y),Te.set(this,y,!1),M!==I)return T.stopImmediatePropagation(),T.preventDefault(),I}else M&&(Te.set(this,y,p.event.trigger(M[0],M.slice(1),this)),T.stopPropagation(),T.isImmediatePropagationStopped=qt)}})}p.removeEvent=function(d,y,S){d.removeEventListener&&d.removeEventListener(y,S)},p.Event=function(d,y){if(!(this instanceof p.Event))return new p.Event(d,y);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||d.defaultPrevented===void 0&&d.returnValue===!1?qt:Jt,this.target=d.target&&d.target.nodeType===3?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,y&&p.extend(this,y),this.timeStamp=d&&d.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Jt,isPropagationStopped:Jt,isImmediatePropagationStopped:Jt,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=qt,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=qt,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=qt,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(d,y){function S(T){if(b.documentMode){var I=Te.get(this,"handle"),M=p.event.fix(T);M.type=T.type==="focusin"?"focus":"blur",M.isSimulated=!0,I(T),M.target===M.currentTarget&&I(M)}else p.event.simulate(y,T.target,p.event.fix(T))}p.event.special[d]={setup:function(){var T;if(yn(this,d,!0),b.documentMode)T=Te.get(this,y),T||this.addEventListener(y,S),Te.set(this,y,(T||0)+1);else return!1},trigger:function(){return yn(this,d),!0},teardown:function(){var T;if(b.documentMode)T=Te.get(this,y)-1,T?Te.set(this,y,T):(this.removeEventListener(y,S),Te.remove(this,y));else return!1},_default:function(T){return Te.get(T.target,d)},delegateType:y},p.event.special[y]={setup:function(){var T=this.ownerDocument||this.document||this,I=b.documentMode?this:T,M=Te.get(I,y);M||(b.documentMode?this.addEventListener(y,S):T.addEventListener(d,S,!0)),Te.set(I,y,(M||0)+1)},teardown:function(){var T=this.ownerDocument||this.document||this,I=b.documentMode?this:T,M=Te.get(I,y)-1;M?Te.set(I,y,M):(b.documentMode?this.removeEventListener(y,S):T.removeEventListener(d,S,!0),Te.remove(I,y))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,y){p.event.special[d]={delegateType:y,bindType:y,handle:function(S){var T,I=this,M=S.relatedTarget,B=S.handleObj;return(!M||M!==I&&!p.contains(I,M))&&(S.type=B.origType,T=B.handler.apply(this,arguments),S.type=y),T}}}),p.fn.extend({on:function(d,y,S,T){return An(this,d,y,S,T)},one:function(d,y,S,T){return An(this,d,y,S,T,1)},off:function(d,y,S){var T,I;if(d&&d.preventDefault&&d.handleObj)return T=d.handleObj,p(d.delegateTarget).off(T.namespace?T.origType+"."+T.namespace:T.origType,T.selector,T.handler),this;if(typeof d=="object"){for(I in d)this.off(I,y,d[I]);return this}return(y===!1||typeof y=="function")&&(S=y,y=void 0),S===!1&&(S=Jt),this.each(function(){p.event.remove(this,d,S,y)})}});var Xt=/<script|<style|<link/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,sn=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ii(d,y){return _(d,"table")&&_(y.nodeType!==11?y:y.firstChild,"tr")&&p(d).children("tbody")[0]||d}function Bn(d){return d.type=(d.getAttribute("type")!==null)+"/"+d.type,d}function Bo(d){return(d.type||"").slice(0,5)==="true/"?d.type=d.type.slice(5):d.removeAttribute("type"),d}function Ro(d,y){var S,T,I,M,B,Q,j;if(y.nodeType===1){if(Te.hasData(d)&&(M=Te.get(d),j=M.events,j)){Te.remove(y,"handle events");for(I in j)for(S=0,T=j[I].length;S<T;S++)p.event.add(y,I,j[I][S])}de.hasData(d)&&(B=de.access(d),Q=p.extend({},B),de.set(y,Q))}}function Sl(d,y){var S=y.nodeName.toLowerCase();S==="input"&&mt.test(d.type)?y.checked=d.checked:(S==="input"||S==="textarea")&&(y.defaultValue=d.defaultValue)}function Dr(d,y,S,T){y=o(y);var I,M,B,Q,j,ie,me=0,Ee=d.length,he=Ee-1,Pe=y[0],tt=m(Pe);if(tt||Ee>1&&typeof Pe=="string"&&!h.checkClone&&Vt.test(Pe))return d.each(function(ht){var st=d.eq(ht);tt&&(y[0]=Pe.call(this,ht,st.html())),Dr(st,y,S,T)});if(Ee&&(I=Lt(y,d[0].ownerDocument,!1,d,T),M=I.firstChild,I.childNodes.length===1&&(I=M),M||T)){for(B=p.map(ot(I,"script"),Bn),Q=B.length;me<Ee;me++)j=I,me!==he&&(j=p.clone(j,!0,!0),Q&&p.merge(B,ot(j,"script"))),S.call(d[me],j,me);if(Q)for(ie=B[B.length-1].ownerDocument,p.map(B,Bo),me=0;me<Q;me++)j=B[me],$t.test(j.type||"")&&!Te.access(j,"globalEval")&&p.contains(ie,j)&&(j.src&&(j.type||"").toLowerCase()!=="module"?p._evalUrl&&!j.noModule&&p._evalUrl(j.src,{nonce:j.nonce||j.getAttribute("nonce")},ie):C(j.textContent.replace(sn,""),j,ie))}return d}function No(d,y,S){for(var T,I=y?p.filter(y,d):d,M=0;(T=I[M])!=null;M++)!S&&T.nodeType===1&&p.cleanData(ot(T)),T.parentNode&&(S&&we(T)&&Pt(ot(T,"script")),T.parentNode.removeChild(T));return d}p.extend({htmlPrefilter:function(d){return d},clone:function(d,y,S){var T,I,M,B,Q=d.cloneNode(!0),j=we(d);if(!h.noCloneChecked&&(d.nodeType===1||d.nodeType===11)&&!p.isXMLDoc(d))for(B=ot(Q),M=ot(d),T=0,I=M.length;T<I;T++)Sl(M[T],B[T]);if(y)if(S)for(M=M||ot(d),B=B||ot(Q),T=0,I=M.length;T<I;T++)Ro(M[T],B[T]);else Ro(d,Q);return B=ot(Q,"script"),B.length>0&&Pt(B,!j&&ot(d,"script")),Q},cleanData:function(d){for(var y,S,T,I=p.event.special,M=0;(S=d[M])!==void 0;M++)if(Le(S)){if(y=S[Te.expando]){if(y.events)for(T in y.events)I[T]?p.event.remove(S,T):p.removeEvent(S,T,y.handle);S[Te.expando]=void 0}S[de.expando]&&(S[de.expando]=void 0)}}}),p.fn.extend({detach:function(d){return No(this,d,!0)},remove:function(d){return No(this,d)},text:function(d){return Re(this,function(y){return y===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=y)})},null,d,arguments.length)},append:function(){return Dr(this,arguments,function(d){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=ii(this,d);y.appendChild(d)}})},prepend:function(){return Dr(this,arguments,function(d){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=ii(this,d);y.insertBefore(d,y.firstChild)}})},before:function(){return Dr(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Dr(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,y=0;(d=this[y])!=null;y++)d.nodeType===1&&(p.cleanData(ot(d,!1)),d.textContent="");return this},clone:function(d,y){return d=d??!1,y=y??d,this.map(function(){return p.clone(this,d,y)})},html:function(d){return Re(this,function(y){var S=this[0]||{},T=0,I=this.length;if(y===void 0&&S.nodeType===1)return S.innerHTML;if(typeof y=="string"&&!Xt.test(y)&&!ut[(Mt.exec(y)||["",""])[1].toLowerCase()]){y=p.htmlPrefilter(y);try{for(;T<I;T++)S=this[T]||{},S.nodeType===1&&(p.cleanData(ot(S,!1)),S.innerHTML=y);S=0}catch{}}S&&this.empty().append(y)},null,d,arguments.length)},replaceWith:function(){var d=[];return Dr(this,arguments,function(y){var S=this.parentNode;p.inArray(this,d)<0&&(p.cleanData(ot(this)),S&&S.replaceChild(y,this))},d)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,y){p.fn[d]=function(S){for(var T,I=[],M=p(S),B=M.length-1,Q=0;Q<=B;Q++)T=Q===B?this:this.clone(!0),p(M[Q])[y](T),s.apply(I,T.get());return this.pushStack(I)}});var xa=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),Ea=/^--/,Di=function(d){var y=d.ownerDocument.defaultView;return(!y||!y.opener)&&(y=e),y.getComputedStyle(d)},Lr=function(d,y,S){var T,I,M={};for(I in y)M[I]=d.style[I],d.style[I]=y[I];T=S.call(d);for(I in y)d.style[I]=M[I];return T},Ca=new RegExp(ye.join("|"),"i");(function(){function d(){if(ie){j.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ie.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ee.appendChild(j).appendChild(ie);var me=e.getComputedStyle(ie);S=me.top!=="1%",Q=y(me.marginLeft)===12,ie.style.right="60%",M=y(me.right)===36,T=y(me.width)===36,ie.style.position="absolute",I=y(ie.offsetWidth/3)===12,ee.removeChild(j),ie=null}}function y(me){return Math.round(parseFloat(me))}var S,T,I,M,B,Q,j=b.createElement("div"),ie=b.createElement("div");ie.style&&(ie.style.backgroundClip="content-box",ie.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle=ie.style.backgroundClip==="content-box",p.extend(h,{boxSizingReliable:function(){return d(),T},pixelBoxStyles:function(){return d(),M},pixelPosition:function(){return d(),S},reliableMarginLeft:function(){return d(),Q},scrollboxSize:function(){return d(),I},reliableTrDimensions:function(){var me,Ee,he,Pe;return B==null&&(me=b.createElement("table"),Ee=b.createElement("tr"),he=b.createElement("div"),me.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ee.style.cssText="box-sizing:content-box;border:1px solid",Ee.style.height="1px",he.style.height="9px",he.style.display="block",ee.appendChild(me).appendChild(Ee).appendChild(he),Pe=e.getComputedStyle(Ee),B=parseInt(Pe.height,10)+parseInt(Pe.borderTopWidth,10)+parseInt(Pe.borderBottomWidth,10)===Ee.offsetHeight,ee.removeChild(me)),B}}))})();function er(d,y,S){var T,I,M,B,Q=Ea.test(y),j=d.style;return S=S||Di(d),S&&(B=S.getPropertyValue(y)||S[y],Q&&B&&(B=B.replace(R,"$1")||void 0),B===""&&!we(d)&&(B=p.style(d,y)),!h.pixelBoxStyles()&&xa.test(B)&&Ca.test(y)&&(T=j.width,I=j.minWidth,M=j.maxWidth,j.minWidth=j.maxWidth=j.width=B,B=S.width,j.width=T,j.minWidth=I,j.maxWidth=M)),B!==void 0?B+"":B}function Sa(d,y){return{get:function(){if(d()){delete this.get;return}return(this.get=y).apply(this,arguments)}}}var Ta=["Webkit","Moz","ms"],Fo=b.createElement("div").style,bn={};function ka(d){for(var y=d[0].toUpperCase()+d.slice(1),S=Ta.length;S--;)if(d=Ta[S]+y,d in Fo)return d}function Li(d){var y=p.cssProps[d]||bn[d];return y||(d in Fo?d:bn[d]=ka(d)||d)}var ai=/^(none|table(?!-c[ea]).+)/,_n={position:"absolute",visibility:"hidden",display:"block"},zo={letterSpacing:"0",fontWeight:"400"};function Lc(d,y,S){var T=Ae.exec(y);return T?Math.max(0,T[2]-(S||0))+(T[3]||"px"):y}function Tl(d,y,S,T,I,M){var B=y==="width"?1:0,Q=0,j=0,ie=0;if(S===(T?"border":"content"))return 0;for(;B<4;B+=2)S==="margin"&&(ie+=p.css(d,S+ye[B],!0,I)),T?(S==="content"&&(j-=p.css(d,"padding"+ye[B],!0,I)),S!=="margin"&&(j-=p.css(d,"border"+ye[B]+"Width",!0,I))):(j+=p.css(d,"padding"+ye[B],!0,I),S!=="padding"?j+=p.css(d,"border"+ye[B]+"Width",!0,I):Q+=p.css(d,"border"+ye[B]+"Width",!0,I));return!T&&M>=0&&(j+=Math.max(0,Math.ceil(d["offset"+y[0].toUpperCase()+y.slice(1)]-M-j-Q-.5))||0),j+ie}function Oc(d,y,S){var T=Di(d),I=!h.boxSizingReliable()||S,M=I&&p.css(d,"boxSizing",!1,T)==="border-box",B=M,Q=er(d,y,T),j="offset"+y[0].toUpperCase()+y.slice(1);if(xa.test(Q)){if(!S)return Q;Q="auto"}return(!h.boxSizingReliable()&&M||!h.reliableTrDimensions()&&_(d,"tr")||Q==="auto"||!parseFloat(Q)&&p.css(d,"display",!1,T)==="inline")&&d.getClientRects().length&&(M=p.css(d,"boxSizing",!1,T)==="border-box",B=j in d,B&&(Q=d[j])),Q=parseFloat(Q)||0,Q+Tl(d,y,S||(M?"border":"content"),B,T,Q)+"px"}p.extend({cssHooks:{opacity:{get:function(d,y){if(y){var S=er(d,"opacity");return S===""?"1":S}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,y,S,T){if(!(!d||d.nodeType===3||d.nodeType===8||!d.style)){var I,M,B,Q=ke(y),j=Ea.test(y),ie=d.style;if(j||(y=Li(Q)),B=p.cssHooks[y]||p.cssHooks[Q],S!==void 0){if(M=typeof S,M==="string"&&(I=Ae.exec(S))&&I[1]&&(S=Be(d,y,I),M="number"),S==null||S!==S)return;M==="number"&&!j&&(S+=I&&I[3]||(p.cssNumber[Q]?"":"px")),!h.clearCloneStyle&&S===""&&y.indexOf("background")===0&&(ie[y]="inherit"),(!B||!("set"in B)||(S=B.set(d,S,T))!==void 0)&&(j?ie.setProperty(y,S):ie[y]=S)}else return B&&"get"in B&&(I=B.get(d,!1,T))!==void 0?I:ie[y]}},css:function(d,y,S,T){var I,M,B,Q=ke(y),j=Ea.test(y);return j||(y=Li(Q)),B=p.cssHooks[y]||p.cssHooks[Q],B&&"get"in B&&(I=B.get(d,!0,S)),I===void 0&&(I=er(d,y,T)),I==="normal"&&y in zo&&(I=zo[y]),S===""||S?(M=parseFloat(I),S===!0||isFinite(M)?M||0:I):I}}),p.each(["height","width"],function(d,y){p.cssHooks[y]={get:function(S,T,I){if(T)return ai.test(p.css(S,"display"))&&(!S.getClientRects().length||!S.getBoundingClientRect().width)?Lr(S,_n,function(){return Oc(S,y,I)}):Oc(S,y,I)},set:function(S,T,I){var M,B=Di(S),Q=!h.scrollboxSize()&&B.position==="absolute",j=Q||I,ie=j&&p.css(S,"boxSizing",!1,B)==="border-box",me=I?Tl(S,y,I,ie,B):0;return ie&&Q&&(me-=Math.ceil(S["offset"+y[0].toUpperCase()+y.slice(1)]-parseFloat(B[y])-Tl(S,y,"border",!1,B)-.5)),me&&(M=Ae.exec(T))&&(M[3]||"px")!=="px"&&(S.style[y]=T,T=p.css(S,y)),Lc(S,T,me)}}}),p.cssHooks.marginLeft=Sa(h.reliableMarginLeft,function(d,y){if(y)return(parseFloat(er(d,"marginLeft"))||d.getBoundingClientRect().left-Lr(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(d,y){p.cssHooks[d+y]={expand:function(S){for(var T=0,I={},M=typeof S=="string"?S.split(" "):[S];T<4;T++)I[d+ye[T]+y]=M[T]||M[T-2]||M[0];return I}},d!=="margin"&&(p.cssHooks[d+y].set=Lc)}),p.fn.extend({css:function(d,y){return Re(this,function(S,T,I){var M,B,Q={},j=0;if(Array.isArray(T)){for(M=Di(S),B=T.length;j<B;j++)Q[T[j]]=p.css(S,T[j],!1,M);return Q}return I!==void 0?p.style(S,T,I):p.css(S,T)},d,y,arguments.length>1)}});function wn(d,y,S,T,I){return new wn.prototype.init(d,y,S,T,I)}p.Tween=wn,wn.prototype={constructor:wn,init:function(d,y,S,T,I,M){this.elem=d,this.prop=S,this.easing=I||p.easing._default,this.options=y,this.start=this.now=this.cur(),this.end=T,this.unit=M||(p.cssNumber[S]?"":"px")},cur:function(){var d=wn.propHooks[this.prop];return d&&d.get?d.get(this):wn.propHooks._default.get(this)},run:function(d){var y,S=wn.propHooks[this.prop];return this.options.duration?this.pos=y=p.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):this.pos=y=d,this.now=(this.end-this.start)*y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),S&&S.set?S.set(this):wn.propHooks._default.set(this),this}},wn.prototype.init.prototype=wn.prototype,wn.propHooks={_default:{get:function(d){var y;return d.elem.nodeType!==1||d.elem[d.prop]!=null&&d.elem.style[d.prop]==null?d.elem[d.prop]:(y=p.css(d.elem,d.prop,""),!y||y==="auto"?0:y)},set:function(d){p.fx.step[d.prop]?p.fx.step[d.prop](d):d.elem.nodeType===1&&(p.cssHooks[d.prop]||d.elem.style[Li(d.prop)]!=null)?p.style(d.elem,d.prop,d.now+d.unit):d.elem[d.prop]=d.now}}},wn.propHooks.scrollTop=wn.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},p.easing={linear:function(d){return d},swing:function(d){return .5-Math.cos(d*Math.PI)/2},_default:"swing"},p.fx=wn.prototype.init,p.fx.step={};var Oi,Ho,ng=/^(?:toggle|show|hide)$/,rg=/queueHooks$/;function kl(){Ho&&(b.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(kl):e.setTimeout(kl,p.fx.interval),p.fx.tick())}function Bc(){return e.setTimeout(function(){Oi=void 0}),Oi=Date.now()}function $o(d,y){var S,T=0,I={height:d};for(y=y?1:0;T<4;T+=2-y)S=ye[T],I["margin"+S]=I["padding"+S]=d;return y&&(I.opacity=I.width=d),I}function Rc(d,y,S){for(var T,I=(Gn.tweeners[y]||[]).concat(Gn.tweeners["*"]),M=0,B=I.length;M<B;M++)if(T=I[M].call(S,y,d))return T}function ig(d,y,S){var T,I,M,B,Q,j,ie,me,Ee="width"in y||"height"in y,he=this,Pe={},tt=d.style,ht=d.nodeType&&_e(d),st=Te.get(d,"fxshow");S.queue||(B=p._queueHooks(d,"fx"),B.unqueued==null&&(B.unqueued=0,Q=B.empty.fire,B.empty.fire=function(){B.unqueued||Q()}),B.unqueued++,he.always(function(){he.always(function(){B.unqueued--,p.queue(d,"fx").length||B.empty.fire()})}));for(T in y)if(I=y[T],ng.test(I)){if(delete y[T],M=M||I==="toggle",I===(ht?"hide":"show"))if(I==="show"&&st&&st[T]!==void 0)ht=!0;else continue;Pe[T]=st&&st[T]||p.style(d,T)}if(j=!p.isEmptyObject(y),!(!j&&p.isEmptyObject(Pe))){Ee&&d.nodeType===1&&(S.overflow=[tt.overflow,tt.overflowX,tt.overflowY],ie=st&&st.display,ie==null&&(ie=Te.get(d,"display")),me=p.css(d,"display"),me==="none"&&(ie?me=ie:(at([d],!0),ie=d.style.display||ie,me=p.css(d,"display"),at([d]))),(me==="inline"||me==="inline-block"&&ie!=null)&&p.css(d,"float")==="none"&&(j||(he.done(function(){tt.display=ie}),ie==null&&(me=tt.display,ie=me==="none"?"":me)),tt.display="inline-block")),S.overflow&&(tt.overflow="hidden",he.always(function(){tt.overflow=S.overflow[0],tt.overflowX=S.overflow[1],tt.overflowY=S.overflow[2]})),j=!1;for(T in Pe)j||(st?"hidden"in st&&(ht=st.hidden):st=Te.access(d,"fxshow",{display:ie}),M&&(st.hidden=!ht),ht&&at([d],!0),he.done(function(){ht||at([d]),Te.remove(d,"fxshow");for(T in Pe)p.style(d,T,Pe[T])})),j=Rc(ht?st[T]:0,T,he),T in st||(st[T]=j.start,ht&&(j.end=j.start,j.start=0))}}function ag(d,y){var S,T,I,M,B;for(S in d)if(T=ke(S),I=y[T],M=d[S],Array.isArray(M)&&(I=M[1],M=d[S]=M[0]),S!==T&&(d[T]=M,delete d[S]),B=p.cssHooks[T],B&&"expand"in B){M=B.expand(M),delete d[T];for(S in M)S in d||(d[S]=M[S],y[S]=I)}else y[T]=I}function Gn(d,y,S){var T,I,M=0,B=Gn.prefilters.length,Q=p.Deferred().always(function(){delete j.elem}),j=function(){if(I)return!1;for(var Ee=Oi||Bc(),he=Math.max(0,ie.startTime+ie.duration-Ee),Pe=he/ie.duration||0,tt=1-Pe,ht=0,st=ie.tweens.length;ht<st;ht++)ie.tweens[ht].run(tt);return Q.notifyWith(d,[ie,tt,he]),tt<1&&st?he:(st||Q.notifyWith(d,[ie,1,0]),Q.resolveWith(d,[ie]),!1)},ie=Q.promise({elem:d,props:p.extend({},y),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},S),originalProperties:y,originalOptions:S,startTime:Oi||Bc(),duration:S.duration,tweens:[],createTween:function(Ee,he){var Pe=p.Tween(d,ie.opts,Ee,he,ie.opts.specialEasing[Ee]||ie.opts.easing);return ie.tweens.push(Pe),Pe},stop:function(Ee){var he=0,Pe=Ee?ie.tweens.length:0;if(I)return this;for(I=!0;he<Pe;he++)ie.tweens[he].run(1);return Ee?(Q.notifyWith(d,[ie,1,0]),Q.resolveWith(d,[ie,Ee])):Q.rejectWith(d,[ie,Ee]),this}}),me=ie.props;for(ag(me,ie.opts.specialEasing);M<B;M++)if(T=Gn.prefilters[M].call(ie,d,me,ie.opts),T)return m(T.stop)&&(p._queueHooks(ie.elem,ie.opts.queue).stop=T.stop.bind(T)),T;return p.map(me,Rc,ie),m(ie.opts.start)&&ie.opts.start.call(d,ie),ie.progress(ie.opts.progress).done(ie.opts.done,ie.opts.complete).fail(ie.opts.fail).always(ie.opts.always),p.fx.timer(p.extend(j,{elem:d,anim:ie,queue:ie.opts.queue})),ie}p.Animation=p.extend(Gn,{tweeners:{"*":[function(d,y){var S=this.createTween(d,y);return Be(S.elem,d,Ae.exec(y),S),S}]},tweener:function(d,y){m(d)?(y=d,d=["*"]):d=d.match(K);for(var S,T=0,I=d.length;T<I;T++)S=d[T],Gn.tweeners[S]=Gn.tweeners[S]||[],Gn.tweeners[S].unshift(y)},prefilters:[ig],prefilter:function(d,y){y?Gn.prefilters.unshift(d):Gn.prefilters.push(d)}}),p.speed=function(d,y,S){var T=d&&typeof d=="object"?p.extend({},d):{complete:S||!S&&y||m(d)&&d,duration:d,easing:S&&y||y&&!m(y)&&y};return p.fx.off?T.duration=0:typeof T.duration!="number"&&(T.duration in p.fx.speeds?T.duration=p.fx.speeds[T.duration]:T.duration=p.fx.speeds._default),(T.queue==null||T.queue===!0)&&(T.queue="fx"),T.old=T.complete,T.complete=function(){m(T.old)&&T.old.call(this),T.queue&&p.dequeue(this,T.queue)},T},p.fn.extend({fadeTo:function(d,y,S,T){return this.filter(_e).css("opacity",0).show().end().animate({opacity:y},d,S,T)},animate:function(d,y,S,T){var I=p.isEmptyObject(d),M=p.speed(y,S,T),B=function(){var Q=Gn(this,p.extend({},d),M);(I||Te.get(this,"finish"))&&Q.stop(!0)};return B.finish=B,I||M.queue===!1?this.each(B):this.queue(M.queue,B)},stop:function(d,y,S){var T=function(I){var M=I.stop;delete I.stop,M(S)};return typeof d!="string"&&(S=y,y=d,d=void 0),y&&this.queue(d||"fx",[]),this.each(function(){var I=!0,M=d!=null&&d+"queueHooks",B=p.timers,Q=Te.get(this);if(M)Q[M]&&Q[M].stop&&T(Q[M]);else for(M in Q)Q[M]&&Q[M].stop&&rg.test(M)&&T(Q[M]);for(M=B.length;M--;)B[M].elem===this&&(d==null||B[M].queue===d)&&(B[M].anim.stop(S),I=!1,B.splice(M,1));(I||!S)&&p.dequeue(this,d)})},finish:function(d){return d!==!1&&(d=d||"fx"),this.each(function(){var y,S=Te.get(this),T=S[d+"queue"],I=S[d+"queueHooks"],M=p.timers,B=T?T.length:0;for(S.finish=!0,p.queue(this,d,[]),I&&I.stop&&I.stop.call(this,!0),y=M.length;y--;)M[y].elem===this&&M[y].queue===d&&(M[y].anim.stop(!0),M.splice(y,1));for(y=0;y<B;y++)T[y]&&T[y].finish&&T[y].finish.call(this);delete S.finish})}}),p.each(["toggle","show","hide"],function(d,y){var S=p.fn[y];p.fn[y]=function(T,I,M){return T==null||typeof T=="boolean"?S.apply(this,arguments):this.animate($o(y,!0),T,I,M)}}),p.each({slideDown:$o("show"),slideUp:$o("hide"),slideToggle:$o("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,y){p.fn[d]=function(S,T,I){return this.animate(y,S,T,I)}}),p.timers=[],p.fx.tick=function(){var d,y=0,S=p.timers;for(Oi=Date.now();y<S.length;y++)d=S[y],!d()&&S[y]===d&&S.splice(y--,1);S.length||p.fx.stop(),Oi=void 0},p.fx.timer=function(d){p.timers.push(d),p.fx.start()},p.fx.interval=13,p.fx.start=function(){Ho||(Ho=!0,kl())},p.fx.stop=function(){Ho=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(d,y){return d=p.fx&&p.fx.speeds[d]||d,y=y||"fx",this.queue(y,function(S,T){var I=e.setTimeout(S,d);T.stop=function(){e.clearTimeout(I)}})},function(){var d=b.createElement("input"),y=b.createElement("select"),S=y.appendChild(b.createElement("option"));d.type="checkbox",h.checkOn=d.value!=="",h.optSelected=S.selected,d=b.createElement("input"),d.value="t",d.type="radio",h.radioValue=d.value==="t"}();var Nc,Aa=p.expr.attrHandle;p.fn.extend({attr:function(d,y){return Re(this,p.attr,d,y,arguments.length>1)},removeAttr:function(d){return this.each(function(){p.removeAttr(this,d)})}}),p.extend({attr:function(d,y,S){var T,I,M=d.nodeType;if(!(M===3||M===8||M===2)){if(typeof d.getAttribute>"u")return p.prop(d,y,S);if((M!==1||!p.isXMLDoc(d))&&(I=p.attrHooks[y.toLowerCase()]||(p.expr.match.bool.test(y)?Nc:void 0)),S!==void 0){if(S===null){p.removeAttr(d,y);return}return I&&"set"in I&&(T=I.set(d,S,y))!==void 0?T:(d.setAttribute(y,S+""),S)}return I&&"get"in I&&(T=I.get(d,y))!==null?T:(T=p.find.attr(d,y),T??void 0)}},attrHooks:{type:{set:function(d,y){if(!h.radioValue&&y==="radio"&&_(d,"input")){var S=d.value;return d.setAttribute("type",y),S&&(d.value=S),y}}}},removeAttr:function(d,y){var S,T=0,I=y&&y.match(K);if(I&&d.nodeType===1)for(;S=I[T++];)d.removeAttribute(S)}}),Nc={set:function(d,y,S){return y===!1?p.removeAttr(d,S):d.setAttribute(S,S),S}},p.each(p.expr.match.bool.source.match(/\w+/g),function(d,y){var S=Aa[y]||p.find.attr;Aa[y]=function(T,I,M){var B,Q,j=I.toLowerCase();return M||(Q=Aa[j],Aa[j]=B,B=S(T,I,M)!=null?j:null,Aa[j]=Q),B}});var og=/^(?:input|select|textarea|button)$/i,sg=/^(?:a|area)$/i;p.fn.extend({prop:function(d,y){return Re(this,p.prop,d,y,arguments.length>1)},removeProp:function(d){return this.each(function(){delete this[p.propFix[d]||d]})}}),p.extend({prop:function(d,y,S){var T,I,M=d.nodeType;if(!(M===3||M===8||M===2))return(M!==1||!p.isXMLDoc(d))&&(y=p.propFix[y]||y,I=p.propHooks[y]),S!==void 0?I&&"set"in I&&(T=I.set(d,S,y))!==void 0?T:d[y]=S:I&&"get"in I&&(T=I.get(d,y))!==null?T:d[y]},propHooks:{tabIndex:{get:function(d){var y=p.find.attr(d,"tabindex");return y?parseInt(y,10):og.test(d.nodeName)||sg.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(p.propHooks.selected={get:function(d){var y=d.parentNode;return y&&y.parentNode&&y.parentNode.selectedIndex,null},set:function(d){var y=d.parentNode;y&&(y.selectedIndex,y.parentNode&&y.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function oi(d){var y=d.match(K)||[];return y.join(" ")}function si(d){return d.getAttribute&&d.getAttribute("class")||""}function Al(d){return Array.isArray(d)?d:typeof d=="string"?d.match(K)||[]:[]}p.fn.extend({addClass:function(d){var y,S,T,I,M,B;return m(d)?this.each(function(Q){p(this).addClass(d.call(this,Q,si(this)))}):(y=Al(d),y.length?this.each(function(){if(T=si(this),S=this.nodeType===1&&" "+oi(T)+" ",S){for(M=0;M<y.length;M++)I=y[M],S.indexOf(" "+I+" ")<0&&(S+=I+" ");B=oi(S),T!==B&&this.setAttribute("class",B)}}):this)},removeClass:function(d){var y,S,T,I,M,B;return m(d)?this.each(function(Q){p(this).removeClass(d.call(this,Q,si(this)))}):arguments.length?(y=Al(d),y.length?this.each(function(){if(T=si(this),S=this.nodeType===1&&" "+oi(T)+" ",S){for(M=0;M<y.length;M++)for(I=y[M];S.indexOf(" "+I+" ")>-1;)S=S.replace(" "+I+" "," ");B=oi(S),T!==B&&this.setAttribute("class",B)}}):this):this.attr("class","")},toggleClass:function(d,y){var S,T,I,M,B=typeof d,Q=B==="string"||Array.isArray(d);return m(d)?this.each(function(j){p(this).toggleClass(d.call(this,j,si(this),y),y)}):typeof y=="boolean"&&Q?y?this.addClass(d):this.removeClass(d):(S=Al(d),this.each(function(){if(Q)for(M=p(this),I=0;I<S.length;I++)T=S[I],M.hasClass(T)?M.removeClass(T):M.addClass(T);else(d===void 0||B==="boolean")&&(T=si(this),T&&Te.set(this,"__className__",T),this.setAttribute&&this.setAttribute("class",T||d===!1?"":Te.get(this,"__className__")||""))}))},hasClass:function(d){var y,S,T=0;for(y=" "+d+" ";S=this[T++];)if(S.nodeType===1&&(" "+oi(si(S))+" ").indexOf(y)>-1)return!0;return!1}});var lg=/\r/g;p.fn.extend({val:function(d){var y,S,T,I=this[0];return arguments.length?(T=m(d),this.each(function(M){var B;this.nodeType===1&&(T?B=d.call(this,M,p(this).val()):B=d,B==null?B="":typeof B=="number"?B+="":Array.isArray(B)&&(B=p.map(B,function(Q){return Q==null?"":Q+""})),y=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!y||!("set"in y)||y.set(this,B,"value")===void 0)&&(this.value=B))})):I?(y=p.valHooks[I.type]||p.valHooks[I.nodeName.toLowerCase()],y&&"get"in y&&(S=y.get(I,"value"))!==void 0?S:(S=I.value,typeof S=="string"?S.replace(lg,""):S??"")):void 0}}),p.extend({valHooks:{option:{get:function(d){var y=p.find.attr(d,"value");return y??oi(p.text(d))}},select:{get:function(d){var y,S,T,I=d.options,M=d.selectedIndex,B=d.type==="select-one",Q=B?null:[],j=B?M+1:I.length;for(M<0?T=j:T=B?M:0;T<j;T++)if(S=I[T],(S.selected||T===M)&&!S.disabled&&(!S.parentNode.disabled||!_(S.parentNode,"optgroup"))){if(y=p(S).val(),B)return y;Q.push(y)}return Q},set:function(d,y){for(var S,T,I=d.options,M=p.makeArray(y),B=I.length;B--;)T=I[B],(T.selected=p.inArray(p.valHooks.option.get(T),M)>-1)&&(S=!0);return S||(d.selectedIndex=-1),M}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(d,y){if(Array.isArray(y))return d.checked=p.inArray(p(d).val(),y)>-1}},h.checkOn||(p.valHooks[this].get=function(d){return d.getAttribute("value")===null?"on":d.value})});var _a=e.location,Fc={guid:Date.now()},_l=/\?/;p.parseXML=function(d){var y,S;if(!d||typeof d!="string")return null;try{y=new e.DOMParser().parseFromString(d,"text/xml")}catch{}return S=y&&y.getElementsByTagName("parsererror")[0],(!y||S)&&p.error("Invalid XML: "+(S?p.map(S.childNodes,function(T){return T.textContent}).join(`
`):d)),y};var zc=/^(?:focusinfocus|focusoutblur)$/,Hc=function(d){d.stopPropagation()};p.extend(p.event,{trigger:function(d,y,S,T){var I,M,B,Q,j,ie,me,Ee,he=[S||b],Pe=f.call(d,"type")?d.type:d,tt=f.call(d,"namespace")?d.namespace.split("."):[];if(M=Ee=B=S=S||b,!(S.nodeType===3||S.nodeType===8)&&!zc.test(Pe+p.event.triggered)&&(Pe.indexOf(".")>-1&&(tt=Pe.split("."),Pe=tt.shift(),tt.sort()),j=Pe.indexOf(":")<0&&"on"+Pe,d=d[p.expando]?d:new p.Event(Pe,typeof d=="object"&&d),d.isTrigger=T?2:3,d.namespace=tt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+tt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=S),y=y==null?[d]:p.makeArray(y,[d]),me=p.event.special[Pe]||{},!(!T&&me.trigger&&me.trigger.apply(S,y)===!1))){if(!T&&!me.noBubble&&!w(S)){for(Q=me.delegateType||Pe,zc.test(Q+Pe)||(M=M.parentNode);M;M=M.parentNode)he.push(M),B=M;B===(S.ownerDocument||b)&&he.push(B.defaultView||B.parentWindow||e)}for(I=0;(M=he[I++])&&!d.isPropagationStopped();)Ee=M,d.type=I>1?Q:me.bindType||Pe,ie=(Te.get(M,"events")||Object.create(null))[d.type]&&Te.get(M,"handle"),ie&&ie.apply(M,y),ie=j&&M[j],ie&&ie.apply&&Le(M)&&(d.result=ie.apply(M,y),d.result===!1&&d.preventDefault());return d.type=Pe,!T&&!d.isDefaultPrevented()&&(!me._default||me._default.apply(he.pop(),y)===!1)&&Le(S)&&j&&m(S[Pe])&&!w(S)&&(B=S[j],B&&(S[j]=null),p.event.triggered=Pe,d.isPropagationStopped()&&Ee.addEventListener(Pe,Hc),S[Pe](),d.isPropagationStopped()&&Ee.removeEventListener(Pe,Hc),p.event.triggered=void 0,B&&(S[j]=B)),d.result}},simulate:function(d,y,S){var T=p.extend(new p.Event,S,{type:d,isSimulated:!0});p.event.trigger(T,null,y)}}),p.fn.extend({trigger:function(d,y){return this.each(function(){p.event.trigger(d,y,this)})},triggerHandler:function(d,y){var S=this[0];if(S)return p.event.trigger(d,y,S,!0)}});var ug=/\[\]$/,$c=/\r?\n/g,cg=/^(?:submit|button|image|reset|file)$/i,fg=/^(?:input|select|textarea|keygen)/i;function Il(d,y,S,T){var I;if(Array.isArray(y))p.each(y,function(M,B){S||ug.test(d)?T(d,B):Il(d+"["+(typeof B=="object"&&B!=null?M:"")+"]",B,S,T)});else if(!S&&x(y)==="object")for(I in y)Il(d+"["+I+"]",y[I],S,T);else T(d,y)}p.param=function(d,y){var S,T=[],I=function(M,B){var Q=m(B)?B():B;T[T.length]=encodeURIComponent(M)+"="+encodeURIComponent(Q??"")};if(d==null)return"";if(Array.isArray(d)||d.jquery&&!p.isPlainObject(d))p.each(d,function(){I(this.name,this.value)});else for(S in d)Il(S,d[S],y,I);return T.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=p.prop(this,"elements");return d?p.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!p(this).is(":disabled")&&fg.test(this.nodeName)&&!cg.test(d)&&(this.checked||!mt.test(d))}).map(function(d,y){var S=p(this).val();return S==null?null:Array.isArray(S)?p.map(S,function(T){return{name:y.name,value:T.replace($c,`\r
`)}}):{name:y.name,value:S.replace($c,`\r
`)}}).get()}});var dg=/%20/g,hg=/#.*$/,vg=/([?&])_=[^&]*/,pg=/^(.*?):[ \t]*([^\r\n]*)$/mg,gg=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mg=/^(?:GET|HEAD)$/,yg=/^\/\//,Vc={},Ml={},qc="*/".concat("*"),Pl=b.createElement("a");Pl.href=_a.href;function Wc(d){return function(y,S){typeof y!="string"&&(S=y,y="*");var T,I=0,M=y.toLowerCase().match(K)||[];if(m(S))for(;T=M[I++];)T[0]==="+"?(T=T.slice(1)||"*",(d[T]=d[T]||[]).unshift(S)):(d[T]=d[T]||[]).push(S)}}function Uc(d,y,S,T){var I={},M=d===Ml;function B(Q){var j;return I[Q]=!0,p.each(d[Q]||[],function(ie,me){var Ee=me(y,S,T);if(typeof Ee=="string"&&!M&&!I[Ee])return y.dataTypes.unshift(Ee),B(Ee),!1;if(M)return!(j=Ee)}),j}return B(y.dataTypes[0])||!I["*"]&&B("*")}function Dl(d,y){var S,T,I=p.ajaxSettings.flatOptions||{};for(S in y)y[S]!==void 0&&((I[S]?d:T||(T={}))[S]=y[S]);return T&&p.extend(!0,d,T),d}function bg(d,y,S){for(var T,I,M,B,Q=d.contents,j=d.dataTypes;j[0]==="*";)j.shift(),T===void 0&&(T=d.mimeType||y.getResponseHeader("Content-Type"));if(T){for(I in Q)if(Q[I]&&Q[I].test(T)){j.unshift(I);break}}if(j[0]in S)M=j[0];else{for(I in S){if(!j[0]||d.converters[I+" "+j[0]]){M=I;break}B||(B=I)}M=M||B}if(M)return M!==j[0]&&j.unshift(M),S[M]}function wg(d,y,S,T){var I,M,B,Q,j,ie={},me=d.dataTypes.slice();if(me[1])for(B in d.converters)ie[B.toLowerCase()]=d.converters[B];for(M=me.shift();M;)if(d.responseFields[M]&&(S[d.responseFields[M]]=y),!j&&T&&d.dataFilter&&(y=d.dataFilter(y,d.dataType)),j=M,M=me.shift(),M){if(M==="*")M=j;else if(j!=="*"&&j!==M){if(B=ie[j+" "+M]||ie["* "+M],!B){for(I in ie)if(Q=I.split(" "),Q[1]===M&&(B=ie[j+" "+Q[0]]||ie["* "+Q[0]],B)){B===!0?B=ie[I]:ie[I]!==!0&&(M=Q[0],me.unshift(Q[1]));break}}if(B!==!0)if(B&&d.throws)y=B(y);else try{y=B(y)}catch(Ee){return{state:"parsererror",error:B?Ee:"No conversion from "+j+" to "+M}}}}return{state:"success",data:y}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_a.href,type:"GET",isLocal:gg.test(_a.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,y){return y?Dl(Dl(d,p.ajaxSettings),y):Dl(p.ajaxSettings,d)},ajaxPrefilter:Wc(Vc),ajaxTransport:Wc(Ml),ajax:function(d,y){typeof d=="object"&&(y=d,d=void 0),y=y||{};var S,T,I,M,B,Q,j,ie,me,Ee,he=p.ajaxSetup({},y),Pe=he.context||he,tt=he.context&&(Pe.nodeType||Pe.jquery)?p(Pe):p.event,ht=p.Deferred(),st=p.Callbacks("once memory"),en=he.statusCode||{},Wt={},tr={},nr="canceled",dt={readyState:0,getResponseHeader:function(vt){var Nt;if(j){if(!M)for(M={};Nt=pg.exec(I);)M[Nt[1].toLowerCase()+" "]=(M[Nt[1].toLowerCase()+" "]||[]).concat(Nt[2]);Nt=M[vt.toLowerCase()+" "]}return Nt==null?null:Nt.join(", ")},getAllResponseHeaders:function(){return j?I:null},setRequestHeader:function(vt,Nt){return j==null&&(vt=tr[vt.toLowerCase()]=tr[vt.toLowerCase()]||vt,Wt[vt]=Nt),this},overrideMimeType:function(vt){return j==null&&(he.mimeType=vt),this},statusCode:function(vt){var Nt;if(vt)if(j)dt.always(vt[dt.status]);else for(Nt in vt)en[Nt]=[en[Nt],vt[Nt]];return this},abort:function(vt){var Nt=vt||nr;return S&&S.abort(Nt),li(0,Nt),this}};if(ht.promise(dt),he.url=((d||he.url||_a.href)+"").replace(yg,_a.protocol+"//"),he.type=y.method||y.type||he.method||he.type,he.dataTypes=(he.dataType||"*").toLowerCase().match(K)||[""],he.crossDomain==null){Q=b.createElement("a");try{Q.href=he.url,Q.href=Q.href,he.crossDomain=Pl.protocol+"//"+Pl.host!=Q.protocol+"//"+Q.host}catch{he.crossDomain=!0}}if(he.data&&he.processData&&typeof he.data!="string"&&(he.data=p.param(he.data,he.traditional)),Uc(Vc,he,y,dt),j)return dt;ie=p.event&&he.global,ie&&p.active++===0&&p.event.trigger("ajaxStart"),he.type=he.type.toUpperCase(),he.hasContent=!mg.test(he.type),T=he.url.replace(hg,""),he.hasContent?he.data&&he.processData&&(he.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(he.data=he.data.replace(dg,"+")):(Ee=he.url.slice(T.length),he.data&&(he.processData||typeof he.data=="string")&&(T+=(_l.test(T)?"&":"?")+he.data,delete he.data),he.cache===!1&&(T=T.replace(vg,"$1"),Ee=(_l.test(T)?"&":"?")+"_="+Fc.guid+++Ee),he.url=T+Ee),he.ifModified&&(p.lastModified[T]&&dt.setRequestHeader("If-Modified-Since",p.lastModified[T]),p.etag[T]&&dt.setRequestHeader("If-None-Match",p.etag[T])),(he.data&&he.hasContent&&he.contentType!==!1||y.contentType)&&dt.setRequestHeader("Content-Type",he.contentType),dt.setRequestHeader("Accept",he.dataTypes[0]&&he.accepts[he.dataTypes[0]]?he.accepts[he.dataTypes[0]]+(he.dataTypes[0]!=="*"?", "+qc+"; q=0.01":""):he.accepts["*"]);for(me in he.headers)dt.setRequestHeader(me,he.headers[me]);if(he.beforeSend&&(he.beforeSend.call(Pe,dt,he)===!1||j))return dt.abort();if(nr="abort",st.add(he.complete),dt.done(he.success),dt.fail(he.error),S=Uc(Ml,he,y,dt),!S)li(-1,"No Transport");else{if(dt.readyState=1,ie&&tt.trigger("ajaxSend",[dt,he]),j)return dt;he.async&&he.timeout>0&&(B=e.setTimeout(function(){dt.abort("timeout")},he.timeout));try{j=!1,S.send(Wt,li)}catch(vt){if(j)throw vt;li(-1,vt)}}function li(vt,Nt,Ma,Ol){var rr,Pa,ir,Or,Br,Rn=Nt;j||(j=!0,B&&e.clearTimeout(B),S=void 0,I=Ol||"",dt.readyState=vt>0?4:0,rr=vt>=200&&vt<300||vt===304,Ma&&(Or=bg(he,dt,Ma)),!rr&&p.inArray("script",he.dataTypes)>-1&&p.inArray("json",he.dataTypes)<0&&(he.converters["text script"]=function(){}),Or=wg(he,Or,dt,rr),rr?(he.ifModified&&(Br=dt.getResponseHeader("Last-Modified"),Br&&(p.lastModified[T]=Br),Br=dt.getResponseHeader("etag"),Br&&(p.etag[T]=Br)),vt===204||he.type==="HEAD"?Rn="nocontent":vt===304?Rn="notmodified":(Rn=Or.state,Pa=Or.data,ir=Or.error,rr=!ir)):(ir=Rn,(vt||!Rn)&&(Rn="error",vt<0&&(vt=0))),dt.status=vt,dt.statusText=(Nt||Rn)+"",rr?ht.resolveWith(Pe,[Pa,Rn,dt]):ht.rejectWith(Pe,[dt,Rn,ir]),dt.statusCode(en),en=void 0,ie&&tt.trigger(rr?"ajaxSuccess":"ajaxError",[dt,he,rr?Pa:ir]),st.fireWith(Pe,[dt,Rn]),ie&&(tt.trigger("ajaxComplete",[dt,he]),--p.active||p.event.trigger("ajaxStop")))}return dt},getJSON:function(d,y,S){return p.get(d,y,S,"json")},getScript:function(d,y){return p.get(d,void 0,y,"script")}}),p.each(["get","post"],function(d,y){p[y]=function(S,T,I,M){return m(T)&&(M=M||I,I=T,T=void 0),p.ajax(p.extend({url:S,type:y,dataType:M,data:T,success:I},p.isPlainObject(S)&&S))}}),p.ajaxPrefilter(function(d){var y;for(y in d.headers)y.toLowerCase()==="content-type"&&(d.contentType=d.headers[y]||"")}),p._evalUrl=function(d,y,S){return p.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(T){p.globalEval(T,y,S)}})},p.fn.extend({wrapAll:function(d){var y;return this[0]&&(m(d)&&(d=d.call(this[0])),y=p(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&y.insertBefore(this[0]),y.map(function(){for(var S=this;S.firstElementChild;)S=S.firstElementChild;return S}).append(this)),this},wrapInner:function(d){return m(d)?this.each(function(y){p(this).wrapInner(d.call(this,y))}):this.each(function(){var y=p(this),S=y.contents();S.length?S.wrapAll(d):y.append(d)})},wrap:function(d){var y=m(d);return this.each(function(S){p(this).wrapAll(y?d.call(this,S):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(d){return!p.expr.pseudos.visible(d)},p.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var xg={0:200,1223:204},Ia=p.ajaxSettings.xhr();h.cors=!!Ia&&"withCredentials"in Ia,h.ajax=Ia=!!Ia,p.ajaxTransport(function(d){var y,S;if(h.cors||Ia&&!d.crossDomain)return{send:function(T,I){var M,B=d.xhr();if(B.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(M in d.xhrFields)B[M]=d.xhrFields[M];d.mimeType&&B.overrideMimeType&&B.overrideMimeType(d.mimeType),!d.crossDomain&&!T["X-Requested-With"]&&(T["X-Requested-With"]="XMLHttpRequest");for(M in T)B.setRequestHeader(M,T[M]);y=function(Q){return function(){y&&(y=S=B.onload=B.onerror=B.onabort=B.ontimeout=B.onreadystatechange=null,Q==="abort"?B.abort():Q==="error"?typeof B.status!="number"?I(0,"error"):I(B.status,B.statusText):I(xg[B.status]||B.status,B.statusText,(B.responseType||"text")!=="text"||typeof B.responseText!="string"?{binary:B.response}:{text:B.responseText},B.getAllResponseHeaders()))}},B.onload=y(),S=B.onerror=B.ontimeout=y("error"),B.onabort!==void 0?B.onabort=S:B.onreadystatechange=function(){B.readyState===4&&e.setTimeout(function(){y&&S()})},y=y("abort");try{B.send(d.hasContent&&d.data||null)}catch(Q){if(y)throw Q}},abort:function(){y&&y()}}}),p.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return p.globalEval(d),d}}}),p.ajaxPrefilter("script",function(d){d.cache===void 0&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),p.ajaxTransport("script",function(d){if(d.crossDomain||d.scriptAttrs){var y,S;return{send:function(T,I){y=p("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",S=function(M){y.remove(),S=null,M&&I(M.type==="error"?404:200,M.type)}),b.head.appendChild(y[0])},abort:function(){S&&S()}}}});var Gc=[],Ll=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=Gc.pop()||p.expando+"_"+Fc.guid++;return this[d]=!0,d}}),p.ajaxPrefilter("json jsonp",function(d,y,S){var T,I,M,B=d.jsonp!==!1&&(Ll.test(d.url)?"url":typeof d.data=="string"&&(d.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ll.test(d.data)&&"data");if(B||d.dataTypes[0]==="jsonp")return T=d.jsonpCallback=m(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,B?d[B]=d[B].replace(Ll,"$1"+T):d.jsonp!==!1&&(d.url+=(_l.test(d.url)?"&":"?")+d.jsonp+"="+T),d.converters["script json"]=function(){return M||p.error(T+" was not called"),M[0]},d.dataTypes[0]="json",I=e[T],e[T]=function(){M=arguments},S.always(function(){I===void 0?p(e).removeProp(T):e[T]=I,d[T]&&(d.jsonpCallback=y.jsonpCallback,Gc.push(T)),M&&m(I)&&I(M[0]),M=I=void 0}),"script"}),h.createHTMLDocument=function(){var d=b.implementation.createHTMLDocument("").body;return d.innerHTML="<form></form><form></form>",d.childNodes.length===2}(),p.parseHTML=function(d,y,S){if(typeof d!="string")return[];typeof y=="boolean"&&(S=y,y=!1);var T,I,M;return y||(h.createHTMLDocument?(y=b.implementation.createHTMLDocument(""),T=y.createElement("base"),T.href=b.location.href,y.head.appendChild(T)):y=b),I=$.exec(d),M=!S&&[],I?[y.createElement(I[1])]:(I=Lt([d],y,M),M&&M.length&&p(M).remove(),p.merge([],I.childNodes))},p.fn.load=function(d,y,S){var T,I,M,B=this,Q=d.indexOf(" ");return Q>-1&&(T=oi(d.slice(Q)),d=d.slice(0,Q)),m(y)?(S=y,y=void 0):y&&typeof y=="object"&&(I="POST"),B.length>0&&p.ajax({url:d,type:I||"GET",dataType:"html",data:y}).done(function(j){M=arguments,B.html(T?p("<div>").append(p.parseHTML(j)).find(T):j)}).always(S&&function(j,ie){B.each(function(){S.apply(this,M||[j.responseText,ie,j])})}),this},p.expr.pseudos.animated=function(d){return p.grep(p.timers,function(y){return d===y.elem}).length},p.offset={setOffset:function(d,y,S){var T,I,M,B,Q,j,ie,me=p.css(d,"position"),Ee=p(d),he={};me==="static"&&(d.style.position="relative"),Q=Ee.offset(),M=p.css(d,"top"),j=p.css(d,"left"),ie=(me==="absolute"||me==="fixed")&&(M+j).indexOf("auto")>-1,ie?(T=Ee.position(),B=T.top,I=T.left):(B=parseFloat(M)||0,I=parseFloat(j)||0),m(y)&&(y=y.call(d,S,p.extend({},Q))),y.top!=null&&(he.top=y.top-Q.top+B),y.left!=null&&(he.left=y.left-Q.left+I),"using"in y?y.using.call(d,he):Ee.css(he)}},p.fn.extend({offset:function(d){if(arguments.length)return d===void 0?this:this.each(function(I){p.offset.setOffset(this,d,I)});var y,S,T=this[0];if(T)return T.getClientRects().length?(y=T.getBoundingClientRect(),S=T.ownerDocument.defaultView,{top:y.top+S.pageYOffset,left:y.left+S.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var d,y,S,T=this[0],I={top:0,left:0};if(p.css(T,"position")==="fixed")y=T.getBoundingClientRect();else{for(y=this.offset(),S=T.ownerDocument,d=T.offsetParent||S.documentElement;d&&(d===S.body||d===S.documentElement)&&p.css(d,"position")==="static";)d=d.parentNode;d&&d!==T&&d.nodeType===1&&(I=p(d).offset(),I.top+=p.css(d,"borderTopWidth",!0),I.left+=p.css(d,"borderLeftWidth",!0))}return{top:y.top-I.top-p.css(T,"marginTop",!0),left:y.left-I.left-p.css(T,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&p.css(d,"position")==="static";)d=d.offsetParent;return d||ee})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,y){var S=y==="pageYOffset";p.fn[d]=function(T){return Re(this,function(I,M,B){var Q;if(w(I)?Q=I:I.nodeType===9&&(Q=I.defaultView),B===void 0)return Q?Q[y]:I[M];Q?Q.scrollTo(S?Q.pageXOffset:B,S?B:Q.pageYOffset):I[M]=B},d,T,arguments.length)}}),p.each(["top","left"],function(d,y){p.cssHooks[y]=Sa(h.pixelPosition,function(S,T){if(T)return T=er(S,y),xa.test(T)?p(S).position()[y]+"px":T})}),p.each({Height:"height",Width:"width"},function(d,y){p.each({padding:"inner"+d,content:y,"":"outer"+d},function(S,T){p.fn[T]=function(I,M){var B=arguments.length&&(S||typeof I!="boolean"),Q=S||(I===!0||M===!0?"margin":"border");return Re(this,function(j,ie,me){var Ee;return w(j)?T.indexOf("outer")===0?j["inner"+d]:j.document.documentElement["client"+d]:j.nodeType===9?(Ee=j.documentElement,Math.max(j.body["scroll"+d],Ee["scroll"+d],j.body["offset"+d],Ee["offset"+d],Ee["client"+d])):me===void 0?p.css(j,ie,Q):p.style(j,ie,me,Q)},y,B?I:void 0,B)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,y){p.fn[y]=function(S){return this.on(y,S)}}),p.fn.extend({bind:function(d,y,S){return this.on(d,null,y,S)},unbind:function(d,y){return this.off(d,null,y)},delegate:function(d,y,S,T){return this.on(y,d,S,T)},undelegate:function(d,y,S){return arguments.length===1?this.off(d,"**"):this.off(y,d||"**",S)},hover:function(d,y){return this.on("mouseenter",d).on("mouseleave",y||d)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,y){p.fn[y]=function(S,T){return arguments.length>0?this.on(y,null,S,T):this.trigger(y)}});var Eg=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(d,y){var S,T,I;if(typeof y=="string"&&(S=d[y],y=d,d=S),!!m(d))return T=a.call(arguments,2),I=function(){return d.apply(y||this,T.concat(a.call(arguments)))},I.guid=d.guid=d.guid||p.guid++,I},p.holdReady=function(d){d?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=_,p.isFunction=m,p.isWindow=w,p.camelCase=ke,p.type=x,p.now=Date.now,p.isNumeric=function(d){var y=p.type(d);return(y==="number"||y==="string")&&!isNaN(d-parseFloat(d))},p.trim=function(d){return d==null?"":(d+"").replace(Eg,"$1")};var Cg=e.jQuery,Sg=e.$;return p.noConflict=function(d){return e.$===p&&(e.$=Sg),d&&e.jQuery===p&&(e.jQuery=Cg),p},typeof n>"u"&&(e.jQuery=e.$=p),p})}(ys)),ys.exports}var Rg=Bg();const Ng=Ii(Rg);window.jQuery=window.$=Ng;const Ye={ID:"id",LABEL:"l",LABEL_GERMAN:"de",LABEL_ENGLISH:"en",LABEL_PERSIAN:"fa",SUBTOP:"st",SOURCE:"source",HAS_INSTANCE:"inst",SUBTOP_ENTITY_TYPE:"E",SUBTOP_ROLE:"R",SUBTOP_FUNCTION:"F",TYPE:"t"},Ht={SOURCE:"source",TARGET:"target",ID:"id",PROPERTY:"p",PROPERTY_LABEL:"pl",GRAPH:"g",AXIOM:"ax"},Fg={idStrings:{file:"File","load-sparql":"Load from SPARQL endpoint","load-session":"Load session","load-view":"Load Partial Graph","load-layout":"Load Layout of Partial Graph","save-session":"Save Session","save-snik-graph":"Save complete SNIK Graph as Cytoscape File","new-view":"Open New Partial Graph","save-view":"Save Current Partial Graph","save-layout":"Save Layout of Current Partial Graph","recalculate-layout-replace":"Recalculate Layout and Replace in Browser Cache","save-image-png-visible-region":"Save PNG Image of Visible Region","save-image-png-complete-partial-graph":"Save PNG Image of Complete Partial Graph","save-image-png-visible-region-high-res":"Save PNG Image of Visible Region (high res)","save-image-png-complete-partial-graph-high-res":"Save PNG Image of Complete Partial Graph (high res)","save-image-svg-visible-region":"Save SVG Image of Visible Region","save-image-svg-complete-partial-graph":"Save SVG Image of Complete Partial Graph",filter:"Filter",meta:"meta",bb:"BB",ob:"OB",ciox:"CioX",he:"HE",it:"IT",it4it:"IT4IT",bb2:"BB2",role:"Role",function:"Function",entitytype:"EntityType","show-classes-with-instances":"Show Classes with Instances","show-classes-without-instances":"Show Classes without Instances",subclassof:"subClassOf","non-subclassof":"non-subClassOf","inter-ontology-relations":"Inter-Ontology Relations","intra-ontology-relations":"Intra-Ontology Relations",options:"Options",separateSubs:"Separate Subontologies",cumulativeSearch:"Cumulative Search",grid:"Show Grid",dayMode:"Day Mode",coloredEdges:"Colorize Edges by Type",showProperty:"Always Show Relation Descriptions",devMode:"Developer Mode",extMode:"Extended Mode",combineMatchMode:"Combine Matches",starNewView:"Star in New Partial Graph",layout:"Layout","show-close-matches":"Show Close Matches","recalculate-layout":"Recalculate Layout","tight-layout":"Tight Layout","compound-layout":"Compound Layout","bb-chapter-search":"BB Chapter Search","ob-chapter-search":"OB Chapter Search","reset-view":"Reset Main Graph","move-match-nearby":"Move Matches Nearby","move-match-on-top":"Move Matches on Top of Each Other","subontology-connectivity":"Subontology Connectivity","change-title":"Change Title of Active Partial Graph",services:"Services","sparql-endpoint":"SPARQL Endpoint","rdf-browser":"RDF Browser",language:"Language",english:"English",german:"German",persian:"Persian",help:"Help",manual:"Manual",tutorial:"Tutorial","layout-help":"Layout Help","developer-doc":"Developer Documentation","youtube-channel":"YouTube Channel",troubleshooting:"Troubleshooting",contribute:"Contribute","project-homepage":"Project Homepage","meta-model":"SNIK Meta Model",about:"About SNIK Graph","bug-report":"Submit a Bug Report","feature-request":"Request new Feature for the Visualization","feedback-ontology":"Submit Feedback about the Ontology","deselect-all":"Deselect All","search-field":"Search Field","base-mode":"Basic Menu Items","context-menu":"Context Menu","incoming-star":"Incoming Star","outgoing-star":"Outgoing Star","combine-close-matches":"Combine Close Matches","class-use":"Class Use","show-instances":"Show Instances of this Class"},messageStrings:{"no-search-results-for":"No Search Results for","ontology-issue-warning":"Please note that this is only for feedback about the ontology! Please check if there is already an issue for your problem. If not, we will consider your feedback ASAP."},contextMenuStrings:{"edge-edit":"Edit or Report","edge-hide":"Hide","edge-description":"Description (if existing)","edge-confirm-link":"Confirm Link","edge-dev":"Developer","remove-permanently":"Remove Permanently",debug:"Debug",compound:"Compound",open:"Open","move-match-on-top":"Move Matches on Top of Each Other","move-match-nearby":"Move Matches Nearby","compound-star":"Star","compound-incoming-star":"Incoming Star","compound-outgoing-star":"Outgoing Star","compound-path-source":"Set Path as Source",edit:"Edit or Report","class-use":"Class Use",hide:"Hide",description:"Description (if existing)","set-path-source":"Set Path as Source",star:"Star","incoming-star":"Incoming Star","outgoing-star":"Outgoing Star",path:"Path",spiderworm:"Spiderworm",dev:"Developer",ext:"Extended",doublestar:"Doublestar",starpath:"Starpath",circlestar:"Circle Star",lodlive:"LodLive","move-selected":"Move Selected","close-match":"Close Match","show-instances":"Show Instances"}},zg={idStrings:{file:"Datei","load-sparql":"Lade aus dem SPARQL Endpunkt","load-session":"Lade gespeicherte Sitzung","load-view":"Lade Teilgraph","load-layout":"Lade Layout von Teilgraph","save-session":"Speichere aktuelle Sitzung","save-snik-graph":"Speichere kompletten SNIK Graph als Cytoscape Datei","new-view":"Neuen Teilgraph Ã¶ffnen","save-view":"Speichere aktuellen Teilgraphen","save-layout":"Speichere Layout des aktuellen Teilgraphen","recalculate-layout-replace":"Layout neu berechnen und im Browser-Cache platzieren","save-image-png-visible-region":"Speichere Bilddatei der aktuellen Ansicht als PNG","save-image-png-complete-partial-graph":"Speichere Bilddatei des kompletten Graphen als PNG","save-image-png-visible-region-high-res":"Speichere Bilddatei der aktuellen Ansicht als PNG (hohe AuflÃ¶sung)","save-image-png-complete-partial-graph-high-res":"Speichere Bilddatei des kompletten Graphen als PNG (hohe AuflÃ¶sung)","save-image-svg-visible-region":"Speichere Bilddatei der aktuellen Ansicht als SVG","save-image-svg-complete-partial-graph":"Speichere Bilddatei des kompletten Graphen als SVG",filter:"Filter","show-classes-with-instances":"Klassen zeigen, die Instanzen haben","show-classes-without-instances":"Klassen zeigen, die keine Instanzen haben",role:"Rolle",function:"Aufgabe",entitytype:"Objekttyp",subclassof:"subClassOf-Beziehungen","non-subclassof":"nicht-subClassOf-Beziehungen","inter-ontology-relations":"Beziehungen zwischen (Teil-)Ontologien","intra-ontology-relations":"Beziehungen innerhalb von (Teil-)Ontologien",options:"Optionen",separateSubs:"Nach Subontologien aufspalten",cumulativeSearch:"Kumulative Suche",grid:"Raster anzeigen",dayMode:"Tag-Modus",coloredEdges:"Kanten nach Typ einfÃ¤rben",devMode:"Entwickler-Modus",extMode:"Erweiterter Modus",combineMatchMode:"Ãbereinstimmungen zusammenfassen",showProperty:"Relationsbeschreibungen immer zeigen",layout:"Layout","show-close-matches":"Zeige close matches","recalculate-layout":"Layout neu berechnen","tight-layout":"Dichtes Layout","compound-layout":"verbundenes Layout","bb-chapter-search":"BB Kapitelsuche","ob-chapter-search":"OB Kapitelsuche","reset-view":"Ansicht des Gesamtgraphen zurÃ¼cksetzen","move-match-on-top":"Zeige close matches Ã¼bereinander","move-match-nearby":"Zeige close matches verbunden","subontology-connectivity":"KonnektivitÃ¤t zwischen Subontologien","change-title":"Titel des aktuellen Teilgraphen Ã¤ndern",services:"Services","sparql-endpoint":"SPARQL Endpunkt","rdf-browser":"RDF Browser",language:"Sprache",english:"Englisch",german:"Deutsch",persian:"Persisch",help:"Hilfe","bug-report":"Fehler melden","feature-request":"Verbesserung fÃ¼r die Visualisierung vorschlagen","deselect-all":"alle abwÃ¤hlen","search-field":"Suchfeld","base-mode":"Basismodus","context-menu":"KontextmenÃ¼","incoming-star":"eingehener Stern","outgoing-star":"ausgehender Stern","combine-close-matches":"kombiniere close matches","class-use":"Klassenbenutzung"},messageStrings:{"no-search-results-for":"Keine Suchresultate fÃ¼r","ontology-issue-warning":"Bitte hier nur Feedback zur Ontologie hinterlassen! Bitte prÃ¼fen Sie vorher, ob es schon eine Issue mit diesem Thema gibt. Wenn nicht, bearbeiten wir Ihr Feedback so schnell wie mÃ¶glich."},contextMenuStrings:{"edge-edit":"Bearbeiten or melden","edge-hide":"Verstecken","edge-description":"Beschreibung (falls existent)","edge-confirm-link":"Verbindung BestÃ¤tigen","edge-dev":"Entwickler","remove-permanently":"Permanent Entfernen",debug:"Debug",compound:"Compound",open:"Ãffnen","move-match-on-top":"Gleiche aufeinander bewegen","move-match-nearby":"Gleiche nahe aneinander bewegen","compound-star":"Stern","compound-incoming-star":"Eingehender Stern","compound-outgoing-star":"Ausgehender Stern","compound-path-source":"Pfad als Quelle setzen",edit:"Bearbeiten oder melden","class-use":"Klassennutzung",hide:"Verstecken",description:"Beschreibung (falls existent)","set-path-source":"Pfad als Quelle setzen",star:"Stern","incoming-star":"Eingehender Stern","outgoing-star":"Ausgehender Stern",path:"Pfad",spiderworm:"Spiderworm",dev:"Entwickler",ext:"Erweitert",doublestar:"Doppelter Stern",starpath:"Sternenpfad",circlestar:"Kreisstern",lodlive:"LodLive","move-selected":"AusgewÃ¤hlte bewegen","close-match":"Nahe matches (close matches)","show-instances":"Instanzen dieser Klasse zeigen"}};var bs={exports:{}},Hg=bs.exports,Zc;function $g(){return Zc||(Zc=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Hg,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],a={},o=null;function s(m,w){var b=m[w];if(typeof b.bind=="function")return b.bind(m);try{return Function.prototype.bind.call(b,m)}catch{return function(){return Function.prototype.apply.apply(b,[m,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?l:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):e}function c(){for(var m=this.getLevel(),w=0;w<i.length;w++){var b=i[w];this[b]=w<m?e:this.methodFactory(b,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==n&&(c.call(this),this[m].apply(this,arguments))}}function v(m,w,b){return u(m)||f.apply(this,arguments)}function g(m,w){var b=this,E,C,x,k="loglevel";typeof m=="string"?k+=":"+m:typeof m=="symbol"&&(k=void 0);function A(D){var L=(i[D]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=L;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+L+";"}catch{}}}function p(){var D;if(!(typeof window===n||!k)){try{D=window.localStorage[k]}catch{}if(typeof D===n)try{var L=window.document.cookie,N=encodeURIComponent(k),R=L.indexOf(N+"=");R!==-1&&(D=/^([^;]+)/.exec(L.slice(R+N.length+1))[1])}catch{}return b.levels[D]===void 0&&(D=void 0),D}}function P(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(D){var L=D;if(typeof L=="string"&&b.levels[L.toUpperCase()]!==void 0&&(L=b.levels[L.toUpperCase()]),typeof L=="number"&&L>=0&&L<=b.levels.SILENT)return L;throw new TypeError("log.setLevel() called with invalid level: "+D)}b.name=m,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=w||v,b.getLevel=function(){return x??C??E},b.setLevel=function(D,L){return x=_(D),L!==!1&&A(x),c.call(b)},b.setDefaultLevel=function(D){C=_(D),p()||b.setLevel(D,!1)},b.resetLevel=function(){x=null,P(),c.call(b)},b.enableAll=function(D){b.setLevel(b.levels.TRACE,D)},b.disableAll=function(D){b.setLevel(b.levels.SILENT,D)},b.rebuild=function(){if(o!==b&&(E=_(o.getLevel())),c.call(b),o===b)for(var D in a)a[D].rebuild()},E=_(o?o.getLevel():"WARN");var O=p();O!=null&&(x=_(O)),c.call(b)}o=new g,o.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var b=a[w];return b||(b=a[w]=new g(w,o.methodFactory)),b};var h=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return a},o.default=o,o})}(bs)),bs.exports}var Vg=$g();const Ie=Ii(Vg),Xu={en:Fg,de:zg,fa:{idStrings:{},messageStrings:{}}};let Ki="en";function qg(t){return Ie.debug(`Set language from ${Ki} to ${t}.`),Xu[t]?(Ki=t,!0):(Ie.warn(`Language ${t} not found. Keeping language ${Ki}.`),!1)}function fh(){return Ki}function ro(t,e){const n=Xu[Ki];n.all||(n.all={...n.idStrings,...n.messageStrings,...n.contextMenuStrings});const r=n.all[t];return r?r+(e?` (${e.toUpperCase()})`:""):(Ie.error("Internationalization string not found for key "+t),null)}function Wg(){return Xu[Ki].idStrings}function Qc(){const t=Wg(),e=[];for(const n of Object.keys(t)){const r=document.querySelectorAll(`[data-i18n="${n}"]`);if(r.length===0){e.push(n);continue}for(const i of r){const a=ro(n,i.getAttribute("hotkey"));switch(i.tagName){case"A":case"BUTTON":case"DIV":case"SPAN":i.textContent=a;break;default:Ie.warn(`Cannot assign text "${a}" to element with i18n key ${n} because its tag type ${i.tagName} is unsupported.`)}}}e.length>0&&Ie.debug(`UpdateHtml: i18n keys ${e.toString()} not used`)}const Ug="25.01",Gg="SIM, TIM & OIM",jg=1,Kg=[["http://www.snik.eu/ontology/bb/ProjectInitiation",{x:1040,y:700}],["http://www.snik.eu/ontology/bb/Management",{x:950,y:50}],["http://www.snik.eu/ontology/bb/InformationManagement",{x:1400,y:50}],["http://www.snik.eu/ontology/bb/HealthInformationSystem",{x:630,y:940}],["http://www.snik.eu/ontology/bb/TacticalHISPlanning",{x:1250,y:550}],["http://www.snik.eu/ontology/bb/StrategicHISDirecting",{x:830,y:550}],["http://www.snik.eu/ontology/bb/InformationSystem",{x:730,y:900}],["http://www.snik.eu/ontology/bb/TacticalHISDirecting",{x:1400,y:550}],["http://www.snik.eu/ontology/bb/ProjectPlan",{x:1325,y:700}],["http://www.snik.eu/ontology/bb/StrategicInformationManagementPlan",{x:730,y:490}],["http://www.snik.eu/ontology/bb/OperationalHISMonitoring",{x:2120,y:550}],["http://www.snik.eu/ontology/bb/ArchitectureOfAnInformationSystem",{x:730,y:700}],["http://www.snik.eu/ontology/bb/HospitalManagement",{x:500,y:50}],["http://www.snik.eu/ontology/bb/ChiefInformationOfficer",{x:1400,y:-80}],["http://www.snik.eu/ontology/bb/TacticalInformationManagement",{x:1400,y:250}],["http://www.snik.eu/ontology/bb/TacticalHISMonitoring",{x:1550,y:550}],["http://www.snik.eu/ontology/bb/TopManagement",{x:500,y:-80}],["http://www.snik.eu/ontology/bb/StrategicInformationManagement",{x:830,y:250}],["http://www.snik.eu/ontology/bb/OperationalHISPlanning",{x:1820,y:550}],["http://www.snik.eu/ontology/bb/StrategicHISPlanning",{x:630,y:550}],["http://www.snik.eu/ontology/bb/ComputerBasedApplicationComponent",{x:1685,y:400}],["http://www.snik.eu/ontology/bb/HisArchitecture",{x:730,y:610}],["http://www.snik.eu/ontology/bb/OperationalHISDirecting",{x:1970,y:550}],["http://www.snik.eu/ontology/bb/OperationalInformationManagement",{x:1970,y:250}],["http://www.snik.eu/ontology/bb/ApplicationComponent",{x:1685,y:320}],["http://www.snik.eu/ontology/bb/StrategicHISMonitoring",{x:980,y:550}],["http://www.snik.eu/ontology/bb/HospitalInformationSystem",{x:630,y:860}]],Xg={version:Ug,title:Gg,type:jg,graph:Kg},Jc=new Map([[Ye.SUBTOP_ENTITY_TYPE,"rectangle"],[Ye.SUBTOP_ROLE,"ellipse"],[Ye.SUBTOP_FUNCTION,"triangle"],["http://www.snik.eu/ontology/meta/EntityType","rectangle"],["http://www.snik.eu/ontology/meta/Role","ellipse"],["http://www.snik.eu/ontology/meta/Function","triangle"]]),ef=new Map([["ciox","rgb(80,255,250)"],["meta","rgb(255,80,80)"],["ob","rgb(255,173,30)"],["bb","rgb(30,152,255)"],["he","rgb(150,255,120)"],["it","rgb(204, 0, 204)"],["it4it","rgb(255, 255, 0)"],["bb2","rgb(0, 255, 255)"]]),Yg={id:"snik",name:"SNIK",legend:"<span>&#9632; Entity Type</span> <span>&#9650; Role</span> <span>&#9679; Function</span>",title:"SNIK Ontology Graph",initialView:Xg,snik:{defaultSubOntologies:["meta","bb","ob","ciox","he","it4it","bb2"],helperGraphs:["limes-exact","match"],center:"http://www.snik.eu/ontology/bb/ChiefInformationOfficer",centerDepth:1},links:{homepage:"https://www.snik.eu/",metamodel:"https://www.snik.eu/public/SNIK_Metamodell_V10.svg",feedbackOntology:"https://github.com/snikproject/ontology/issues",featureRequest:"https://github.com/snikproject/graph/issues/new?assignees=KonradHoeffner&labels=feature&projects=&template=featurerequest.yml",youtube:"https://www.youtube.com/channel/UCV8wbTpOdHurbaHqP0sAOng/featured",sparqlEndpoint:"http://www.hitontology.eu/sparql",rdfBrowser:"http://www.hitontology.eu/ontology"},style:{shape:t=>Jc.get(t.data(Ye.SUBTOP))||Jc.get(t.data(Ye.ID))||"hexagon",color:t=>{let e;if(typeof t=="string")e=t;else{const n=t.data(Ye.SOURCE),r=n==null?void 0:n.lastIndexOf("/");e=n==null?void 0:n.substring(r+1)}return ef.get(e)||"orange"},colorMap:ef},sparql:{endpoint:"https://www.snik.eu/sparql",graph:"http://www.snik.eu/ontology",instances:!1,queries:{nodes:t=>`
			PREFIX ov: <http://open.vocab.org/terms/>
			PREFIX meta: <http://www.snik.eu/ontology/meta/>
			SELECT DISTINCT(?c)
			GROUP_CONCAT(DISTINCT(CONCAT(?l,"@",lang(?l)));separator="|") AS ?l
			SAMPLE(?st) AS ?st
			?src
			SAMPLE(?inst) AS ?inst
			${t}
			{
			  ?c a [rdfs:subClassOf meta:Top].
			  OPTIONAL {?src ov:defines ?c.}
			  OPTIONAL {?c rdf:type ?st. FILTER(?st!=owl:Class)}
			  OPTIONAL {?c rdfs:label ?l.}
			  OPTIONAL {?inst a ?c.}
			}`,triples:(t,e,n,r)=>`PREFIX sniko: <http://www.snik.eu/ontology/>
			select  ?c ?p ?d ?g (MIN(?ax) as ?ax)
			${t}
			${e}
			{
			  graph ?g {?c ?p ?d.}
			  filter(?g!=sniko:)
			  {?c a [rdfs:subClassOf meta:Top].} ${r?" UNION {?c a [a [rdfs:subClassOf meta:Top]]}":""}
			  {?d a [rdfs:subClassOf meta:Top].} ${r?" UNION {?d a [a [rdfs:subClassOf meta:Top]]}":""}
			  filter(?p!=rdf:type)
			  OPTIONAL
			  {
				?ax a owl:Axiom;
				owl:annotatedSource ?c;
				owl:annotatedProperty ?p;
				owl:annotatedTarget ?d.
			  }
			}`}}},Ue={nodeSize:39,activeOptions:["edgecolor"],searchCloseMatch:!0,logLevelConsole:"debug",logLevelDisplay:"info",logLevelMemory:"debug",layoutCacheMinRecall:.95,layoutCacheMinPrecision:.5,language:"en",download:{image:{max:{width:5e3,height:4e3},standard:{width:1920,height:1920}}},ontology:Yg,multiview:{initialTabs:1,warnOnSessionLoad:!0},git:{defaultIssueAssignee:"KonradHoeffner",issueLabels:{bug:"bug",confirmLink:"link",deleteTriple:"deletetriple",deleteClass:"deleteclass"},repo:{ontology:"https://github.com/snikproject/ontology",application:"https://github.com/snikproject/graph"}}},Zg=[["meta","http://www.snik.eu/ontology/meta/"],["bb","http://www.snik.eu/ontology/bb/"],["ob","http://www.snik.eu/ontology/ob/"],["he","http://www.snik.eu/ontology/he/"],["ciox","http://www.snik.eu/ontology/ciox/"],["it4it","http://www.snik.eu/ontology/it4it/"],["it","http://www.snik.eu/ontology/it/"],["skos","http://www.w3.org/2004/02/skos/core#"],["rdfs","http://www.w3.org/2000/01/rdf-schema#"],["rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"],["owl","http://www.w3.org/2002/07/owl#"]];function Qn(t){for(const e of Zg)t=t.replace(e[1],e[0]+":");return t}const Qg="25.01",Ur=Qg;function Pn(t){const e=document.getElementById(t);if(!e)throw new Error(`Element with id ${t} does not exist.`);return e}function dh(t,e,n,r,i,a){let o=encodeURIComponent(n);r||(r=Ue.git.defaultIssueAssignee),i||(i=""),console.log(i),window.open(`${t}/issues/new?title=${encodeURIComponent(e)}&body=${o}&assignees=${r}&labels=${i}`)}function nl(t,e,n,r,i){const a=i.map(([o,s])=>`&${o}=${encodeURIComponent(s)}`).reduce((o,s)=>o+s);window.open(`${t}/issues/new?template=${n}.yml&assignees=${Ue.git.defaultIssueAssignee}&labels=${r}&title=${encodeURIComponent(e)}${a}`)}function Jg(t){const e=Qn(t.data(Ye.ID));nl(Ue.git.repo.ontology,"Remove class "+e,"deleteclass",Ue.git.issueLabels.deleteClass,Object.entries({class:e}))}function em(t){const e=Qn(t.data(Ht.SOURCE)),n=Qn(t.data(Ht.PROPERTY)),r=Qn(t.data(Ht.TARGET));nl(Ue.git.repo.ontology,`Delete triple ${e} ${n} ${r}`,"deletetriple",Ue.git.issueLabels.deleteTriple,Object.entries({subject:e,predicate:n,object:r}))}function tm(t){t.data(Ht.GRAPH,"http://www.snik.eu/ontology/match");const e=Qn(t.data(Ht.SOURCE)),n=Qn(t.data(Ht.TARGET));nl(Ue.git.repo.ontology,"Confirm "+wu(t),"link",Ue.git.issueLabels.confirmLink,Object.entries({source:e,target:n}))}function hh(){return`SNIK Graph version ${Ur}
commit date 2025-01-27T14:23:36+01:00
feat: overlay legend in config; part of #437
master/bf0a42e888d89076d77b86642570d6c5b778ddc9`}function nm(){const t=hh(),e=Ie.logs.filter(n=>!n.includes("%20")).reduce((n,r)=>n+`
`+r).substr(-6e3*3/4);nl(Ue.git.repo.application,"","bugreport",Ue.git.issueLabels.bug,Object.entries({version:t,logs:e}))}function wu(t){return Qn(t.data(Ht.SOURCE))+" "+Qn(t.data(Ht.PROPERTY))+" "+Qn(t.data(Ht.TARGET))}const vh=t=>e=>{switch(e.key){case" ":case"Enter":t.click()}};function ph(t,e,n){const r=document.createElement("div");return r.classList.add("dropdown-entry-checkboxtext"),r.innerText=e,n&&r.setAttribute("data-i18n",n),r.addEventListener("click",()=>{t.click()}),r}function rm(t,e,n){const r=Math.floor(t*6),i=t*6-r,a=n*(1-e),o=n*(1-i*e),s=n*(1-(1-i)*e);let l,u,c;switch(r%6){case 0:l=n,u=s,c=a;break;case 1:l=o,u=n,c=a;break;case 2:l=a,u=n,c=s;break;case 3:l=a,u=o,c=n;break;case 4:l=s,u=a,c=n;break;case 5:l=n,u=a,c=o;break}return"#"+("00"+Math.floor(l*255).toString(16)).slice(-2)+("00"+Math.floor(u*255).toString(16)).slice(-2)+("00"+Math.floor(c*255).toString(16)).slice(-2)}function im(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);return e=e%180/360,e+=.5,rm(e,1,1)}const tf={format_version:"1.0",generated_by:"cytoscape-3.4.0",target_cytoscapejs_version:"~2.1",title:"MyStyle1",style:[{selector:"node",css:{"min-zoomed-font-size":5,width:Ue.nodeSize,height:Ue.nodeSize,"font-size":11,"text-valign":"center","text-halign":"center","border-opacity":1,"border-width":function(t){return t.data(Ye.HAS_INSTANCE)?1:0},"font-family":"sans-serif","font-weight":"normal","background-opacity":.5882352941176471,"text-opacity":1,shape:Ue.ontology.style.shape,label:function(t){let e=t.data(Ye.LABEL);if(!e)return t.data(Ye.ID);let n;if((n=e[fh()])&&(n=n[0]))e=n;else{let r=!1;for(const i of[Ye.LABEL_ENGLISH,Ye.LABEL_GERMAN,Ye.LABEL_PERSIAN])if((n=e[i])&&n[0]){e=n[0],r=!0;break}if(!r){const i=Object.keys(e);i.length>0?e=e[i[0]]:e=t.data(Ye.ID)}}return t.data(Ye.HAS_INSTANCE)&&(e+="*"),e}}},{selector:"node.source",css:{"border-width":5}},{selector:"node.target",css:{"border-width":5}},{selector:"node.highlighted",css:{"border-width":5}},{selector:"node:selected",css:{"border-width":8}},{selector:"edge",css:{"z-compound-depth":"bottom",width:2,opacity:.22,"edge-text-rotation":"autorotate","text-margin-y":"-1em","min-zoomed-font-size":5,"font-size":11}},{selector:"edge.highlighted,edge:selected,edge.starmode",css:{"text-opacity":1,"mid-target-arrow-shape":function(t){switch(t.data(Ht.PROPERTY)){case"http://www.snik.eu/ontology/meta/isAssociatedWith":case"http://www.w3.org/2004/02/skos/core#closeMatch":case"http://www.w3.org/2004/02/skos/core#relatedMatch":case"http://www.w3.org/2004/02/skos/core#related":case"http://www.w3.org/2004/02/skos/core#exactMatch":return"none"}return"triangle"},label:function(t){let e=t.data(Ht.PROPERTY_LABEL);return t.data(Ht.GRAPH)==="http://www.snik.eu/ontology/limes-exact"&&(e+=" â "),e}}},{selector:"edge.highlighted,edge:selected",css:{width:4,opacity:1}},{selector:".filtered",css:{display:"none"}},{selector:".hidden",css:{visibility:"hidden"}},{selector:"$node > node",css:{shape:"rectangle","border-width":10,"text-valign":"top","text-margin-y":"-0.7em","min-zoomed-font-size":7.5,"font-size":16,"background-opacity":"0"}},{selector:"node[i]",css:{shape:"star"}},{selector:"node",css:{"background-color":t=>{var n,r;let e=(r=(n=Ue.ontology)==null?void 0:n.style)==null?void 0:r.color(t);return e||(e="rgb(254,196,79)"),e},color:"white"}}]};function nf(t){const e=t.data(Ht.PROPERTY);return im(e)}const am=[{selector:"edge",css:{color:nf}},{selector:"edge:unselected",css:{"line-color":nf}}],om=[{selector:"edge",css:{label:function(t){let e=t.data(Ht.PROPERTY_LABEL);return t.data(Ht.GRAPH)==="http://www.snik.eu/ontology/limes-exact"&&(e+=" â "),e}}}],rf=[{selector:"node",css:{color:"white","border-color":"white"}},{selector:"node:selected",css:{"background-color":"rgb(255,255,0)"}},{selector:"node.source",css:{"border-color":"rgb(128,255,128)"}},{selector:"node.target",css:{"border-color":"rgb(255,90,90)"}},{selector:"edge",css:{color:"white"}},{selector:"edge:unselected",css:{"line-color":function(t){return String(t.data(Ht.PROPERTY)).substring(0,36)==="http://www.w3.org/2004/02/skos/core#"?"rgb(255,255,190)":"rgb(252,252,252)"}}},{selector:"edge.starmode",css:{color:"rgb(128,128,128)","mid-target-arrow-color":"rgb(128,128,128)"}},{selector:"edge:selected,edge.highlighted",css:{color:"rgb(255,255,128)","line-color":"rgb(255,255,128)","mid-target-arrow-color":"rgb(255,255,128)"}}],sm=[{selector:"node",css:{color:"black","border-color":"black"}},{selector:"node:selected",css:{"background-color":"rgb(0,0,255)"}},{selector:"node.source",css:{"border-color":"rgb(128,0,128)"}},{selector:"node.target",css:{"border-color":"rgb(0,165,165)"}},{selector:"edge",css:{color:"black"}},{selector:"edge[!selected]",css:{"line-color":function(t){return String(t.data(Ht.PROPERTY)).substring(0,36)==="http://www.w3.org/2004/02/skos/core#"?"rgb(140,130,10)":"rgb(110,110,110)"}}},{selector:"edge.starmode",css:{opacity:1,"mid-target-arrow-color":"rgb(128,128,128)",color:"rgb(20,20,20)"}},{selector:"edge:selected,edge.highlighted",css:{color:"rgb(0,0,128)","line-color":"rgb(0,0,128)","mid-target-arrow-color":"rgb(0,0,128)"}}];function ua(t){const e=new Date;return{stop:function(n){const i=new Date().getTime()-e.getTime();Ie.debug(t+" finished in "+i+" ms"+(n?` (${n})`:""))}}}var Bs=function(){return Bs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bs.apply(this,arguments)},lm={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},um=function(){function t(e){e===void 0&&(e={}),this.opts=Bs(Bs({},lm),e)}return t.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),this.el.style.position=this.opts.position,this.el.style.width="0",this.el.style.zIndex=this.opts.zIndex.toString(),this.el.style.left=this.opts.left,this.el.style.top=this.opts.top,this.el.style.transform="scale(".concat(this.opts.scale,")"),e&&e.insertBefore(this.el,e.firstChild||null),cm(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function af(t,e){return typeof t=="string"?t:t[e%t.length]}function cm(t,e){var n=Math.round(e.corners*e.width*500)/1e3+"px",r="none";e.shadow===!0?r="0 2px 4px #000":typeof e.shadow=="string"&&(r=e.shadow);for(var i=fm(r),a=0;a<e.lines;a++){var o=~~(360/e.lines*a+e.rotate),s=document.createElement("div");s.style.position="absolute",s.style.top="".concat(-e.width/2,"px"),s.style.width=e.length+e.width+"px",s.style.height=e.width+"px",s.style.background=af(e.fadeColor,a),s.style.borderRadius=n,s.style.transformOrigin="left",s.style.transform="rotate(".concat(o,"deg) translateX(").concat(e.radius,"px)");var l=a*e.direction/e.lines/e.speed;l-=1/e.speed;var u=document.createElement("div");u.style.width="100%",u.style.height="100%",u.style.background=af(e.color,a),u.style.borderRadius=n,u.style.boxShadow=dm(i,o),u.style.animation="".concat(1/e.speed,"s linear ").concat(l,"s infinite ").concat(e.animation),s.appendChild(u),t.appendChild(s)}}function fm(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=t.split(",");r<i.length;r++){var a=i[r],o=a.match(e);if(o!==null){var s=+o[2],l=+o[5],u=o[4],c=o[7];s===0&&!u&&(u=c),l===0&&!c&&(c=u),u===c&&n.push({prefix:o[1]||"",x:s,y:l,xUnits:u,yUnits:c,end:o[8]})}}return n}function dm(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r],o=hm(a.x,a.y,e);n.push(a.prefix+o[0]+a.xUnits+" "+o[1]+a.yUnits+a.end)}return n.join(", ")}function hm(t,e,n){var r=n*Math.PI/180,i=Math.sin(r),a=Math.cos(r);return[Math.round((t*a+e*i)*1e3)/1e3,Math.round((-t*i+e*a)*1e3)/1e3]}const vm={lines:13,length:28,width:35,radius:84,scale:3,corners:1,color:"#ffffff",opacity:.6,rotate:35,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!0,position:"absolute"};let Go=null,jo=0;async function io(t){window&&(Go||(Go=new um(vm)),jo||(document.body.classList.add("waiting"),Go.spin(document.body)),jo++,await t(),jo--,jo<=0&&(document.body.classList.remove("waiting"),Go.stop()))}const gh={GRAPH_BB:"http://www.snik.eu/ontology/bb",PREFIX:"http://www.snik.eu/ontology/",ENDPOINT:"https://www.snik.eu/sparql"};async function Ir(t,e,n=Ue.ontology.sparql.endpoint){const r=typeof window<"u";let i=n+"?query="+encodeURIComponent(t)+"&format=json";try{const s=(await(await fetch(i)).json()).results.bindings;return r&&console.groupCollapsed("SPARQL "+t.split(`
`,1)[0]+"..."),r&&s.length<100&&console.table(s.map(l=>Object.keys(l).reduce((u,c)=>(u[c]=l[c].value,u),{}))),Ie.debug(t),Ie.debug(i),r&&console.groupEnd(),s}catch(a){return Ie.error(a),Ie.error(`Error executing SPARQL query:
${t}
URL: ${i}

`),[]}}async function pm(t){const e=ua("sparql-classes"),n=Ue.ontology.sparql.queries.nodes(t),r=await Ir(n);return e.stop(r.length+` classes using ${Ue.ontology.name} query`),r}function mh(t){const e=t.split("|"),n={};for(const r of e){const[i,a]=r.split("@");i.trim()&&(n[a]||(n[a]=[]),n[a].push(i))}return n}async function of(t){const e=await pm(t),n=[],r=new Set;for(let o=0;o<e.length;o++){let s;e[o].src&&(s=e[o].src.value,s.includes("http://www.snik.eu/ontology/")&&(s=s.replace("http://www.snik.eu/ontology/","")),r.add(s)),n.push({group:"nodes",data:{id:e[o].c.value,l:mh(e[o].l.value),...e[o].st&&{st:e[o].st.value.replace("http://www.snik.eu/ontology/meta/","").substring(0,1)},...s&&{source:s},...e[o].inst&&{inst:!0}}})}const i=["rgb(30,152,255)","rgb(255,173,30)","rgb(80,255,250)","rgb(150,255,120)","rgb(204, 0, 204)","rgb(255, 255, 0)"];let a=0;for(const o of r)!Ue.ontology.style.colorMap.has(o)&&!Ue.ontology.style.color(o)&&(Ue.ontology.style.colorMap.set(o,i[a]),a=(a+1)%i.length);return Ie.debug(e.length+" Nodes loaded from SPARQL"),n}async function gm(t){const e=ua("sparql-classes"),n=`SELECT
  DISTINCT(?i)
  GROUP_CONCAT(DISTINCT(CONCAT(?l,"@",lang(?l)));separator="|") AS ?l
  ${t}
  {
    ?i a [a owl:Class].
    OPTIONAL {?i rdfs:label ?l.}
  }
  `,r=await Ir(n);return e.stop(r.length+" instances"),r}async function mm(t){const e=await gm(t),n=[];for(let r=0;r<e.length;r++)n.push({group:"nodes",data:{id:e[r].i.value,l:mh(e[r].l.value),instance:!0}});return n}async function ym(t,e,n,r){const i=ua("sparql-properties"),a=Ue.ontology.sparql.queries.triples(t,e,r,n),o=await Ir(a);return i.stop(o.length+` properties using ${Ue.ontology.name} query`),o}async function bm(t,e,n,r){const i=await ym(t,e,n,r),a=[];for(let o=0;o<i.length;o++)a.push({group:"edges",data:{source:i[o].c.value,target:i[o].d.value,id:String(o),p:i[o].p.value,pl:i[o].p.value.replace(/.*[#/]/,""),...i[o].g&&{g:i[o].g.value},...i[o].ax&&{ax:i[o].ax.value}}});return Ie.debug(i.length+" Edges loaded from SPARQL"),a}async function wm(t,e){if(!e)return of(t);const[n,r]=await Promise.all([of(t),mm(t)]);return n.concat(r)}async function yh(t,e,n=!1,r=!1){Ie.debug(`Loading graph from endpoint ${Ue.ontology.sparql.endpoint} with graphs ${e.join(",")}.`);const i=e.map(l=>`FROM <${l}>`).reduce((l,u)=>l+`
`+u,""),a=i.replace(/FROM/g,"FROM NAMED"),[o,s]=await Promise.all([wm(i,n),bm(i,a,n,r)]);t.elements().remove(),t.add(o),t.add(s),t.elements().addClass("unfiltered")}const xm=[[`node[${Ye.SOURCE}='meta']`,"meta"],[`node[${Ye.SOURCE}='bb']`,"bb"],[`node[${Ye.SOURCE}='ob']`,"ob"],[`node[${Ye.SOURCE}='ciox']`,"ciox"],[`node[${Ye.SOURCE}='he']`,"he"],[`node[${Ye.SOURCE}='it']`,"it"],[`node[${Ye.SOURCE}='it4it']`,"it4it"],[`node[${Ye.SOURCE}='bb2']`,"bb2"],[`node[${Ye.SUBTOP}='${Ye.SUBTOP_ROLE}']`,"role"],[`node[${Ye.SUBTOP}='${Ye.SUBTOP_FUNCTION}']`,"function"],[`node[${Ye.SUBTOP}='${Ye.SUBTOP_ENTITY_TYPE}']`,"entitytype"],[`node[?${Ye.HAS_INSTANCE}]`,"show-classes-with-instances"],[`node[!${Ye.HAS_INSTANCE}]`,"show-classes-without-instances"],["edge[p='http://www.w3.org/2000/01/rdf-schema#subClassOf']","subclassof"],["edge[p!='http://www.w3.org/2000/01/rdf-schema#subClassOf']","non-subclassof"],["edge[p^='http://www.w3.org/2004/02/skos/core#']","inter-ontology-relations"],["edge[p!^='http://www.w3.org/2004/02/skos/core#']","intra-ontology-relations"]],Ko=[],Xo=t=>$e.views().map(e=>e.state.cy).forEach(e=>t(e));class xo{constructor(e,n){Ct(this,"selector");Ct(this,"label");Ct(this,"checkbox");Ct(this,"a");Ct(this,"cssClass");Ct(this,"visible");this.selector=e;const r=document.createElement("input");r.type="checkbox",this.checkbox=r,r.classList.add("filterbox"),r.autocomplete="off",r.checked=!0,this.a=document.createElement("a"),this.a.classList.add("dropdown-entry"),this.a.appendChild(r),this.a.setAttribute("tabindex","-1"),this.a.addEventListener("keydown",vh(r)),this.a.appendChild(ph(r,"",n)),this.cssClass=`filter-${n}`,this.visible=!0,Xo(i=>i.elements(this.selector).addClass(this.cssClass)),r.addEventListener("input",()=>this.setVisible(r.checked)),Ko.push(this)}toString(){return this.label}setVisible(e){if(this.visible===e)return;this.visible=e;const n=Ko.filter(r=>!r.visible).map(r=>r.selector);if(n.length===0)Xo(r=>r.elements().removeClass("filtered")),Xo(r=>r.elements().addClass("unfiltered")),Ie.debug("All filters checked");else{const r=n.reduce((i,a)=>i+","+a);Xo(i=>{const a=i.elements(r);a.addClass("filtered"),a.removeClass("unfiltered");const o=i.elements().not(a);o.removeClass("filtered"),o.addClass("unfiltered")}),Ie.debug("filter "+r+" triggered")}}static addFilterEntries(e,n){for(const r of xm){const i=new xo(r[0],r[1]);e.appendChild(i.a),n.push(i.a)}}static toJSON(){const e={};for(const n of Ko)e[n.label]=n.visible;return e}static fromJSON(e){for(const n of Ko)n.checkbox.checked=e[n.label],n.visible=e[n.label]}}function jt(t){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(t)}function Qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Em(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jr(t,e,n){return e&&Em(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zt(t,e){return Sm(t)||km(t,e)||Yu(t,e)||_m()}function wh(t){return Cm(t)||Tm(t)||Yu(t)||Am()}function Cm(t){if(Array.isArray(t))return xu(t)}function Sm(t){if(Array.isArray(t))return t}function Tm(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function km(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,s;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function Yu(t,e){if(t){if(typeof t=="string")return xu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xu(t,e)}}function xu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Am(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dn(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Yu(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}}}var Ut=typeof window>"u"?null:window,sf=Ut?Ut.navigator:null;Ut&&Ut.document;var Im=jt(""),xh=jt({}),Mm=jt(function(){}),Pm=typeof HTMLElement>"u"?"undefined":jt(HTMLElement),Eo=function(e){return e&&e.instanceString&&Rt(e.instanceString)?e.instanceString():null},Xe=function(e){return e!=null&&jt(e)==Im},Rt=function(e){return e!=null&&jt(e)===Mm},Tt=function(e){return!Ln(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},gt=function(e){return e!=null&&jt(e)===xh&&!Tt(e)&&e.constructor===Object},Dm=function(e){return e!=null&&jt(e)===xh},Fe=function(e){return e!=null&&jt(e)===jt(1)&&!isNaN(e)},Lm=function(e){return Fe(e)&&Math.floor(e)===e},Rs=function(e){if(Pm!=="undefined")return e!=null&&e instanceof HTMLElement},Ln=function(e){return Co(e)||Eh(e)},Co=function(e){return Eo(e)==="collection"&&e._private.single},Eh=function(e){return Eo(e)==="collection"&&!e._private.single},Zu=function(e){return Eo(e)==="core"},Ch=function(e){return Eo(e)==="stylesheet"},Om=function(e){return Eo(e)==="event"},Gr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Bm=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Rm=function(e){return gt(e)&&Fe(e.x1)&&Fe(e.x2)&&Fe(e.y1)&&Fe(e.y2)},Nm=function(e){return Dm(e)&&Rt(e.then)},Fm=function(){return sf&&sf.userAgent.match(/msie|trident|edge/i)},ao=function(e,n){n||(n=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var r=function i(){var a=this,o=arguments,s,l=n.apply(a,o),u=i.cache;return(s=u[l])||(s=u[l]=e.apply(a,o)),s};return r.cache={},r},Qu=ao(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),rl=ao(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Sh=ao(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),lf=function(e){return Gr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Gt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",zm="rgb[a]?\\(("+Gt+"[%]?)\\s*,\\s*("+Gt+"[%]?)\\s*,\\s*("+Gt+"[%]?)(?:\\s*,\\s*("+Gt+"))?\\)",Hm="rgb[a]?\\((?:"+Gt+"[%]?)\\s*,\\s*(?:"+Gt+"[%]?)\\s*,\\s*(?:"+Gt+"[%]?)(?:\\s*,\\s*(?:"+Gt+"))?\\)",$m="hsl[a]?\\(("+Gt+")\\s*,\\s*("+Gt+"[%])\\s*,\\s*("+Gt+"[%])(?:\\s*,\\s*("+Gt+"))?\\)",Vm="hsl[a]?\\((?:"+Gt+")\\s*,\\s*(?:"+Gt+"[%])\\s*,\\s*(?:"+Gt+"[%])(?:\\s*,\\s*(?:"+Gt+"))?\\)",qm="\\#[0-9a-fA-F]{3}",Wm="\\#[0-9a-fA-F]{6}",Th=function(e,n){return e<n?-1:e>n?1:0},Um=function(e,n){return-1*Th(e,n)},Je=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(r!=null)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];t[o]=r[o]}}return t},Gm=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var n=e.length===4,r,i,a,o=16;return n?(r=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(r=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[r,i,a]}},jm=function(e){var n,r,i,a,o,s,l,u;function c(h,m,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?h+(m-h)*6*w:w<1/2?m:w<2/3?h+(m-h)*(2/3-w)*6:h}var f=new RegExp("^"+$m+"$").exec(e);if(f){if(r=parseInt(f[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r=r%360),r/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,a=parseFloat(f[3]),a<0||a>100)||(a=a/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=l=u=Math.round(a*255);else{var v=a<.5?a*(1+i):a+i-a*i,g=2*a-v;s=Math.round(255*c(g,v,r+1/3)),l=Math.round(255*c(g,v,r)),u=Math.round(255*c(g,v,r-1/3))}n=[s,l,u,o]}return n},Km=function(e){var n,r=new RegExp("^"+zm+"$").exec(e);if(r){n=[];for(var i=[],a=1;a<=3;a++){var o=r[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;n.push(Math.floor(o))}var s=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(s&&!l)return;var u=r[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;n.push(u)}}return n},Xm=function(e){return Ym[e.toLowerCase()]},kh=function(e){return(Tt(e)?e:null)||Xm(e)||Gm(e)||Km(e)||jm(e)},Ym={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ah=function(e){for(var n=e.map,r=e.keys,i=r.length,a=0;a<i;a++){var o=r[a];if(gt(o))throw Error("Tried to set map with object key");a<r.length-1?(n[o]==null&&(n[o]={}),n=n[o]):n[o]=e.value}},_h=function(e){for(var n=e.map,r=e.keys,i=r.length,a=0;a<i;a++){var o=r[a];if(gt(o))throw Error("Tried to get map with object key");if(n=n[o],n==null)return n}return n};function Zm(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ei=Zm,Wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qm(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Jm=typeof Wa=="object"&&Wa&&Wa.Object===Object&&Wa,ey=Jm,ty=typeof self=="object"&&self&&self.Object===Object&&self,ny=ey||ty||Function("return this")(),il=ny,ry=function(){return il.Date.now()},$l=ry,iy=/\s/;function ay(t){for(var e=t.length;e--&&iy.test(t.charAt(e)););return e}var oy=ay,sy=/^\s+/;function ly(t){return t&&t.slice(0,oy(t)+1).replace(sy,"")}var uy=ly,cy=il.Symbol,Ji=cy,Ih=Object.prototype,fy=Ih.hasOwnProperty,dy=Ih.toString,La=Ji?Ji.toStringTag:void 0;function hy(t){var e=fy.call(t,La),n=t[La];try{t[La]=void 0;var r=!0}catch{}var i=dy.call(t);return r&&(e?t[La]=n:delete t[La]),i}var vy=hy,py=Object.prototype,gy=py.toString;function my(t){return gy.call(t)}var yy=my,by="[object Null]",wy="[object Undefined]",uf=Ji?Ji.toStringTag:void 0;function xy(t){return t==null?t===void 0?wy:by:uf&&uf in Object(t)?vy(t):yy(t)}var Mh=xy;function Ey(t){return t!=null&&typeof t=="object"}var Cy=Ey,Sy="[object Symbol]";function Ty(t){return typeof t=="symbol"||Cy(t)&&Mh(t)==Sy}var So=Ty,cf=NaN,ky=/^[-+]0x[0-9a-f]+$/i,Ay=/^0b[01]+$/i,_y=/^0o[0-7]+$/i,Iy=parseInt;function My(t){if(typeof t=="number")return t;if(So(t))return cf;if(Ei(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ei(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=uy(t);var n=Ay.test(t);return n||_y.test(t)?Iy(t.slice(2),n?2:8):ky.test(t)?cf:+t}var ff=My,Py="Expected a function",Dy=Math.max,Ly=Math.min;function Oy(t,e,n){var r,i,a,o,s,l,u=0,c=!1,f=!1,v=!0;if(typeof t!="function")throw new TypeError(Py);e=ff(e)||0,Ei(n)&&(c=!!n.leading,f="maxWait"in n,a=f?Dy(ff(n.maxWait)||0,e):a,v="trailing"in n?!!n.trailing:v);function g(A){var p=r,P=i;return r=i=void 0,u=A,o=t.apply(P,p),o}function h(A){return u=A,s=setTimeout(b,e),c?g(A):o}function m(A){var p=A-l,P=A-u,_=e-p;return f?Ly(_,a-P):_}function w(A){var p=A-l,P=A-u;return l===void 0||p>=e||p<0||f&&P>=a}function b(){var A=$l();if(w(A))return E(A);s=setTimeout(b,m(A))}function E(A){return s=void 0,v&&r?g(A):(r=i=void 0,o)}function C(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function x(){return s===void 0?o:E($l())}function k(){var A=$l(),p=w(A);if(r=arguments,i=this,l=A,p){if(s===void 0)return h(l);if(f)return clearTimeout(s),s=setTimeout(b,e),g(l)}return s===void 0&&(s=setTimeout(b,e)),o}return k.cancel=C,k.flush=x,k}var To=Oy,Vl=Ut?Ut.performance:null,Ph=Vl&&Vl.now?function(){return Vl.now()}:function(){return Date.now()},By=function(){if(Ut){if(Ut.requestAnimationFrame)return function(t){Ut.requestAnimationFrame(t)};if(Ut.mozRequestAnimationFrame)return function(t){Ut.mozRequestAnimationFrame(t)};if(Ut.webkitRequestAnimationFrame)return function(t){Ut.webkitRequestAnimationFrame(t)};if(Ut.msRequestAnimationFrame)return function(t){Ut.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Ph())},1e3/60)}}(),Ns=function(e){return By(e)},Sr=Ph,Ui=9261,Dh=65599,Ua=5381,Lh=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ui,r=n,i;i=e.next(),!i.done;)r=r*Dh+i.value|0;return r},oo=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ui;return n*Dh+e|0},so=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ua;return(n<<5)+n+e|0},Ry=function(e,n){return e*2097152+n},Nr=function(e){return e[0]*2097152+e[1]},Yo=function(e,n){return[oo(e[0],n[0]),so(e[1],n[1])]},Ny=function(e,n){var r={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?r.value=e[i++]:r.done=!0,r}};return Lh(o,n)},jr=function(e,n){var r={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?r.value=e.charCodeAt(i++):r.done=!0,r}};return Lh(o,n)},Oh=function(){return Fy(arguments)},Fy=function(e){for(var n,r=0;r<e.length;r++){var i=e[r];r===0?n=jr(i):n=jr(i,n)}return n},df=!0,zy=console.warn!=null,Hy=console.trace!=null,Ju=Number.MAX_SAFE_INTEGER||9007199254740991,Bh=function(){return!0},Fs=function(){return!1},hf=function(){return 0},ec=function(){},Ot=function(e){throw new Error(e)},Rh=function(e){if(e!==void 0)df=!!e;else return df},xt=function(e){Rh()&&(zy?console.warn(e):(console.log(e),Hy&&console.trace()))},$y=function(e){return Je({},e)},ur=function(e){return e==null?e:Tt(e)?e.slice():gt(e)?$y(e):e},Vy=function(e){return e.slice()},Nh=function(e,n){for(n=e="";e++<36;n+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return n},qy={},Fh=function(){return qy},Qt=function(e){var n=Object.keys(e);return function(r){for(var i={},a=0;a<n.length;a++){var o=n[a],s=r==null?void 0:r[o];i[o]=s===void 0?e[o]:s}return i}},Kr=function(e,n,r){for(var i=e.length-1;i>=0;i--)e[i]===n&&e.splice(i,1)},tc=function(e){e.splice(0,e.length)},Wy=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}},Xn=function(e,n,r){return r&&(n=Sh(r,n)),e[n]},zr=function(e,n,r,i){r&&(n=Sh(r,n)),e[n]=i},Uy=function(){function t(){Qr(this,t),this._obj={}}return Jr(t,[{key:"set",value:function(n,r){return this._obj[n]=r,this}},{key:"delete",value:function(n){return this._obj[n]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(n){return this._obj[n]!==void 0}},{key:"get",value:function(n){return this._obj[n]}}]),t}(),cr=typeof Map<"u"?Map:Uy,Gy="undefined",jy=function(){function t(e){if(Qr(this,t),this._obj=Object.create(null),this.size=0,e!=null){var n;e.instanceString!=null&&e.instanceString()===this.instanceString()?n=e.toArray():n=e;for(var r=0;r<n.length;r++)this.add(n[r])}}return Jr(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(n){var r=this._obj;r[n]!==1&&(r[n]=1,this.size++)}},{key:"delete",value:function(n){var r=this._obj;r[n]===1&&(r[n]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(n){return this._obj[n]===1}},{key:"toArray",value:function(){var n=this;return Object.keys(this._obj).filter(function(r){return n.has(r)})}},{key:"forEach",value:function(n,r){return this.toArray().forEach(n,r)}}]),t}(),ca=(typeof Set>"u"?"undefined":jt(Set))!==Gy?Set:jy,al=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||n===void 0||!Zu(e)){Ot("An element must have a core reference and parameters set");return}var i=n.group;if(i==null&&(n.data&&n.data.source!=null&&n.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Ot("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:n.selectable===void 0?!0:!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:n.grabbable===void 0?!0:!!n.grabbable,pannable:n.pannable===void 0?i==="edges":!!n.pannable,active:!1,classes:new ca,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:n.parent&&n.parent.isNode()?n.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),n.renderedPosition){var o=n.renderedPosition,s=e.pan(),l=e.zoom();a.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];Tt(n.classes)?u=n.classes:Xe(n.classes)&&(u=n.classes.split(/\s+/));for(var c=0,f=u.length;c<f;c++){var v=u[c];!v||v===""||a.classes.add(v)}this.createEmitter();var g=n.style||n.css;g&&(xt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g)),(r===void 0||r)&&this.restore()},vf=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(r,i,a){var o;gt(r)&&!Ln(r)&&(o=r,r=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!Rt(i)?i:a,i=Rt(i)?i:function(){};for(var s=this._private.cy,l=r=Xe(r)?this.filter(r):r,u=[],c=[],f={},v={},g={},h=0,m,w=this.byGroup(),b=w.nodes,E=w.edges,C=0;C<l.length;C++){var x=l[C],k=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(g[k]=!0,c.push(x)),v[k]=0)}for(var A=function(){var N=e.bfs?u.shift():u.pop(),R=N.id();if(e.dfs){if(g[R])return"continue";g[R]=!0,c.push(N)}var z=v[R],H=f[R],W=H!=null?H.source():null,X=H!=null?H.target():null,re=H==null?void 0:N.same(W)?X[0]:W[0],ae=void 0;if(ae=i(N,H,re,h++,z),ae===!0)return m=N,"break";if(ae===!1)return"break";for(var J=N.connectedEdges().filter(function(Y){return(!a||Y.source().same(N))&&E.has(Y)}),$=0;$<J.length;$++){var U=J[$],G=U.connectedNodes().filter(function(Y){return!Y.same(N)&&b.has(Y)}),V=G.id();G.length!==0&&!g[V]&&(G=G[0],u.push(G),e.bfs&&(g[V]=!0,c.push(G)),f[V]=U,v[V]=v[R]+1)}};u.length!==0;){var p=A();if(p!=="continue"&&p==="break")break}for(var P=s.collection(),_=0;_<c.length;_++){var O=c[_],D=f[O.id()];D!=null&&P.push(D),P.push(O)}return{path:s.collection(P),found:s.collection(m)}}},lo={breadthFirstSearch:vf({bfs:!0}),depthFirstSearch:vf({dfs:!0})};lo.bfs=lo.breadthFirstSearch;lo.dfs=lo.depthFirstSearch;var Ky=Qm(function(t,e){(function(){var n,r,i,a,o,s,l,u,c,f,v,g,h,m,w;i=Math.floor,f=Math.min,r=function(b,E){return b<E?-1:b>E?1:0},c=function(b,E,C,x,k){var A;if(C==null&&(C=0),k==null&&(k=r),C<0)throw new Error("lo must be non-negative");for(x==null&&(x=b.length);C<x;)A=i((C+x)/2),k(E,b[A])<0?x=A:C=A+1;return[].splice.apply(b,[C,C-C].concat(E)),E},s=function(b,E,C){return C==null&&(C=r),b.push(E),m(b,0,b.length-1,C)},o=function(b,E){var C,x;return E==null&&(E=r),C=b.pop(),b.length?(x=b[0],b[0]=C,w(b,0,E)):x=C,x},u=function(b,E,C){var x;return C==null&&(C=r),x=b[0],b[0]=E,w(b,0,C),x},l=function(b,E,C){var x;return C==null&&(C=r),b.length&&C(b[0],E)<0&&(x=[b[0],E],E=x[0],b[0]=x[1],w(b,0,C)),E},a=function(b,E){var C,x,k,A,p,P;for(E==null&&(E=r),A=(function(){P=[];for(var _=0,O=i(b.length/2);0<=O?_<O:_>O;0<=O?_++:_--)P.push(_);return P}).apply(this).reverse(),p=[],x=0,k=A.length;x<k;x++)C=A[x],p.push(w(b,C,E));return p},h=function(b,E,C){var x;if(C==null&&(C=r),x=b.indexOf(E),x!==-1)return m(b,0,x,C),w(b,x,C)},v=function(b,E,C){var x,k,A,p,P;if(C==null&&(C=r),k=b.slice(0,E),!k.length)return k;for(a(k,C),P=b.slice(E),A=0,p=P.length;A<p;A++)x=P[A],l(k,x,C);return k.sort(C).reverse()},g=function(b,E,C){var x,k,A,p,P,_,O,D,L;if(C==null&&(C=r),E*10<=b.length){if(A=b.slice(0,E).sort(C),!A.length)return A;for(k=A[A.length-1],O=b.slice(E),p=0,_=O.length;p<_;p++)x=O[p],C(x,k)<0&&(c(A,x,0,null,C),A.pop(),k=A[A.length-1]);return A}for(a(b,C),L=[],P=0,D=f(E,b.length);0<=D?P<D:P>D;0<=D?++P:--P)L.push(o(b,C));return L},m=function(b,E,C,x){var k,A,p;for(x==null&&(x=r),k=b[C];C>E;){if(p=C-1>>1,A=b[p],x(k,A)<0){b[C]=A,C=p;continue}break}return b[C]=k},w=function(b,E,C){var x,k,A,p,P;for(C==null&&(C=r),k=b.length,P=E,A=b[E],x=2*E+1;x<k;)p=x+1,p<k&&!(C(b[x],b[p])<0)&&(x=p),b[E]=b[x],E=x,x=2*E+1;return b[E]=A,m(b,P,E,C)},n=function(){b.push=s,b.pop=o,b.replace=u,b.pushpop=l,b.heapify=a,b.updateItem=h,b.nlargest=v,b.nsmallest=g;function b(E){this.cmp=E??r,this.nodes=[]}return b.prototype.push=function(E){return s(this.nodes,E,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(E){return this.nodes.indexOf(E)!==-1},b.prototype.replace=function(E){return u(this.nodes,E,this.cmp)},b.prototype.pushpop=function(E){return l(this.nodes,E,this.cmp)},b.prototype.heapify=function(){return a(this.nodes,this.cmp)},b.prototype.updateItem=function(E){return h(this.nodes,E,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var E;return E=new b,E.nodes=this.nodes.slice(0),E},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b}(),function(b,E){return t.exports=E()}(this,function(){return n})}).call(Wa)}),ko=Ky,Xy=Qt({root:null,weight:function(e){return 1},directed:!1}),Yy={dijkstra:function(e){if(!gt(e)){var n=arguments;e={root:n[0],weight:n[1],directed:n[2]}}var r=Xy(e),i=r.root,a=r.weight,o=r.directed,s=this,l=a,u=Xe(i)?this.filter(i)[0]:i[0],c={},f={},v={},g=this.byGroup(),h=g.nodes,m=g.edges;m.unmergeBy(function(z){return z.isLoop()});for(var w=function(H){return c[H.id()]},b=function(H,W){c[H.id()]=W,E.updateItem(H)},E=new ko(function(z,H){return w(z)-w(H)}),C=0;C<h.length;C++){var x=h[C];c[x.id()]=x.same(u)?0:1/0,E.push(x)}for(var k=function(H,W){for(var X=(o?H.edgesTo(W):H.edgesWith(W)).intersect(m),re=1/0,ae,J=0;J<X.length;J++){var $=X[J],U=l($);(U<re||!ae)&&(re=U,ae=$)}return{edge:ae,dist:re}};E.size()>0;){var A=E.pop(),p=w(A),P=A.id();if(v[P]=p,p!==1/0)for(var _=A.neighborhood().intersect(h),O=0;O<_.length;O++){var D=_[O],L=D.id(),N=k(A,D),R=p+N.dist;R<w(D)&&(b(D,R),f[L]={node:A,edge:N.edge})}}return{distanceTo:function(H){var W=Xe(H)?h.filter(H)[0]:H[0];return v[W.id()]},pathTo:function(H){var W=Xe(H)?h.filter(H)[0]:H[0],X=[],re=W,ae=re.id();if(W.length>0)for(X.unshift(W);f[ae];){var J=f[ae];X.unshift(J.edge),X.unshift(J.node),re=J.node,ae=re.id()}return s.spawn(X)}}}},Zy={kruskal:function(e){e=e||function(C){return 1};for(var n=this.byGroup(),r=n.nodes,i=n.edges,a=r.length,o=new Array(a),s=r,l=function(x){for(var k=0;k<o.length;k++){var A=o[k];if(A.has(x))return k}},u=0;u<a;u++)o[u]=this.spawn(r[u]);for(var c=i.sort(function(C,x){return e(C)-e(x)}),f=0;f<c.length;f++){var v=c[f],g=v.source()[0],h=v.target()[0],m=l(g),w=l(h),b=o[m],E=o[w];m!==w&&(s.merge(v),b.merge(E),o.splice(w,1))}return s}},Qy=Qt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Jy={aStar:function(e){var n=this.cy(),r=Qy(e),i=r.root,a=r.goal,o=r.heuristic,s=r.directed,l=r.weight;i=n.collection(i)[0],a=n.collection(a)[0];var u=i.id(),c=a.id(),f={},v={},g={},h=new ko(function(ae,J){return v[ae.id()]-v[J.id()]}),m=new ca,w={},b={},E=function(J,$){h.push(J),m.add($)},C,x,k=function(){C=h.pop(),x=C.id(),m.delete(x)},A=function(J){return m.has(J)};E(i,u),f[u]=0,v[u]=o(i);for(var p=0;h.size()>0;){if(k(),p++,x===c){for(var P=[],_=a,O=c,D=b[O];P.unshift(_),D!=null&&P.unshift(D),_=w[O],_!=null;)O=_.id(),D=b[O];return{found:!0,distance:f[x],path:this.spawn(P),steps:p}}g[x]=!0;for(var L=C._private.edges,N=0;N<L.length;N++){var R=L[N];if(this.hasElementWithId(R.id())&&!(s&&R.data("source")!==x)){var z=R.source(),H=R.target(),W=z.id()!==x?z:H,X=W.id();if(this.hasElementWithId(X)&&!g[X]){var re=f[x]+l(R);if(!A(X)){f[X]=re,v[X]=re+o(W),E(W,X),w[X]=C,b[X]=R;continue}re<f[X]&&(f[X]=re,v[X]=re+o(W),w[X]=C,b[X]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:p}}},e0=Qt({weight:function(e){return 1},directed:!1}),t0={floydWarshall:function(e){for(var n=this.cy(),r=e0(e),i=r.weight,a=r.directed,o=i,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,f=c*c,v=function(U){return l.indexOf(U)},g=function(U){return l[U]},h=new Array(f),m=0;m<f;m++){var w=m%c,b=(m-w)/c;b===w?h[m]=0:h[m]=1/0}for(var E=new Array(f),C=new Array(f),x=0;x<u.length;x++){var k=u[x],A=k.source()[0],p=k.target()[0];if(A!==p){var P=v(A),_=v(p),O=P*c+_,D=o(k);if(h[O]>D&&(h[O]=D,E[O]=_,C[O]=k),!a){var L=_*c+P;!a&&h[L]>D&&(h[L]=D,E[L]=P,C[L]=k)}}}for(var N=0;N<c;N++)for(var R=0;R<c;R++)for(var z=R*c+N,H=0;H<c;H++){var W=R*c+H,X=N*c+H;h[z]+h[X]<h[W]&&(h[W]=h[z]+h[X],E[W]=E[z])}var re=function(U){return(Xe(U)?n.filter(U):U)[0]},ae=function(U){return v(re(U))},J={distance:function(U,G){var V=ae(U),Y=ae(G);return h[V*c+Y]},path:function(U,G){var V=ae(U),Y=ae(G),ne=g(V);if(V===Y)return ne.collection();if(E[V*c+Y]==null)return n.collection();var se=n.collection(),Z=V,K;for(se.merge(ne);V!==Y;)Z=V,V=E[V*c+Y],K=C[Z*c+V],se.merge(K),se.merge(g(V));return se}};return J}},n0=Qt({weight:function(e){return 1},directed:!1,root:null}),r0={bellmanFord:function(e){var n=this,r=n0(e),i=r.weight,a=r.directed,o=r.root,s=i,l=this,u=this.cy(),c=this.byGroup(),f=c.edges,v=c.nodes,g=v.length,h=new cr,m=!1,w=[];o=u.collection(o)[0],f.unmergeBy(function(qe){return qe.isLoop()});for(var b=f.length,E=function(Re){var be=h.get(Re.id());return be||(be={},h.set(Re.id(),be)),be},C=function(Re){return(Xe(Re)?u.$(Re):Re)[0]},x=function(Re){return E(C(Re)).dist},k=function(Re){for(var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Ce=C(Re),Se=[],ke=Ce;;){if(ke==null)return n.spawn();var Le=E(ke),je=Le.edge,Te=Le.pred;if(Se.unshift(ke[0]),ke.same(be)&&Se.length>0)break;je!=null&&Se.unshift(je),ke=Te}return l.spawn(Se)},A=0;A<g;A++){var p=v[A],P=E(p);p.same(o)?P.dist=0:P.dist=1/0,P.pred=null,P.edge=null}for(var _=!1,O=function(Re,be,Ce,Se,ke,Le){var je=Se.dist+Le;je<ke.dist&&!Ce.same(Se.edge)&&(ke.dist=je,ke.pred=Re,ke.edge=Ce,_=!0)},D=1;D<g;D++){_=!1;for(var L=0;L<b;L++){var N=f[L],R=N.source(),z=N.target(),H=s(N),W=E(R),X=E(z);O(R,z,N,W,X,H),a||O(z,R,N,X,W,H)}if(!_)break}if(_)for(var re=[],ae=0;ae<b;ae++){var J=f[ae],$=J.source(),U=J.target(),G=s(J),V=E($).dist,Y=E(U).dist;if(V+G<Y||!a&&Y+G<V)if(m||(xt("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var ne=[];V+G<Y&&ne.push($),!a&&Y+G<V&&ne.push(U);for(var se=ne.length,Z=0;Z<se;Z++){var K=ne[Z],ce=[K];ce.push(E(K).edge);for(var ve=E(K).pred;ce.indexOf(ve)===-1;)ce.push(ve),ce.push(E(ve).edge),ve=E(ve).pred;ce=ce.slice(ce.indexOf(ve));for(var De=ce[0].id(),Oe=0,Ze=2;Ze<ce.length;Ze+=2)ce[Ze].id()<De&&(De=ce[Ze].id(),Oe=Ze);ce=ce.slice(Oe).concat(ce.slice(0,Oe)),ce.push(ce[0]);var nt=ce.map(function(qe){return qe.id()}).join(",");re.indexOf(nt)===-1&&(w.push(l.spawn(ce)),re.push(nt))}}else break}return{distanceTo:x,pathTo:k,hasNegativeWeightCycle:m,negativeWeightCycles:w}}},i0=Math.sqrt(2),a0=function(e,n,r){r.length===0&&Ot("Karger-Stein must be run on a connected (sub)graph");for(var i=r[e],a=i[1],o=i[2],s=n[a],l=n[o],u=r,c=u.length-1;c>=0;c--){var f=u[c],v=f[1],g=f[2];(n[v]===s&&n[g]===l||n[v]===l&&n[g]===s)&&u.splice(c,1)}for(var h=0;h<u.length;h++){var m=u[h];m[1]===l?(u[h]=m.slice(),u[h][1]=s):m[2]===l&&(u[h]=m.slice(),u[h][2]=s)}for(var w=0;w<n.length;w++)n[w]===l&&(n[w]=s);return u},ql=function(e,n,r,i){for(;r>i;){var a=Math.floor(Math.random()*n.length);n=a0(a,e,n),r--}return n},o0={kargerStein:function(){var e=this,n=this.byGroup(),r=n.nodes,i=n.edges;i.unmergeBy(function(X){return X.isLoop()});var a=r.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),l=Math.floor(a/i0);if(a<2){Ot("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<o;c++){var f=i[c];u.push([c,r.indexOf(f.source()),r.indexOf(f.target())])}for(var v=1/0,g=[],h=new Array(a),m=new Array(a),w=new Array(a),b=function(re,ae){for(var J=0;J<a;J++)ae[J]=re[J]},E=0;E<=s;E++){for(var C=0;C<a;C++)m[C]=C;var x=ql(m,u.slice(),a,l),k=x.slice();b(m,w);var A=ql(m,x,l,2),p=ql(w,k,l,2);A.length<=p.length&&A.length<v?(v=A.length,g=A,b(m,h)):p.length<=A.length&&p.length<v&&(v=p.length,g=p,b(w,h))}for(var P=this.spawn(g.map(function(X){return i[X[0]]})),_=this.spawn(),O=this.spawn(),D=h[0],L=0;L<h.length;L++){var N=h[L],R=r[L];N===D?_.merge(R):O.merge(R)}var z=function(re){var ae=e.spawn();return re.forEach(function(J){ae.merge(J),J.connectedEdges().forEach(function($){e.contains($)&&!P.contains($)&&ae.merge($)})}),ae},H=[z(_),z(O)],W={cut:P,components:H,partition1:_,partition2:O};return W}},s0=function(e){return{x:e.x,y:e.y}},ol=function(e,n,r){return{x:e.x*n+r.x,y:e.y*n+r.y}},zh=function(e,n,r){return{x:(e.x-r.x)/n,y:(e.y-r.y)/n}},Gi=function(e){return{x:e[0],y:e[1]}},l0=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=n;a<r;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},u0=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=n;a<r;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},c0=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=n;o<r;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},f0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(n,r):(r<e.length&&e.splice(r,e.length-r),n>0&&e.splice(0,n));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}a&&e.sort(function(v,g){return v-g});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},d0=function(e){return Math.PI*e/180},Zo=function(e,n){return Math.atan2(n,e)-Math.PI/2},nc=Math.log2||function(t){return Math.log(t)/Math.log(2)},Hh=function(e){return e>0?1:e<0?-1:0},Ci=function(e,n){return Math.sqrt(hi(e,n))},hi=function(e,n){var r=n.x-e.x,i=n.y-e.y;return r*r+i*i},h0=function(e){for(var n=e.length,r=0,i=0;i<n;i++)r+=e[i];for(var a=0;a<n;a++)e[a]=e[a]/r;return e},Yt=function(e,n,r,i){return(1-i)*(1-i)*e+2*(1-i)*i*n+i*i*r},Xi=function(e,n,r,i){return{x:Yt(e.x,n.x,r.x,i),y:Yt(e.y,n.y,r.y,i)}},v0=function(e,n,r,i){var a={x:n.x-e.x,y:n.y-e.y},o=Ci(e,n),s={x:a.x/o,y:a.y/o};return r=r??0,i=i??r*o,{x:e.x+s.x*i,y:e.y+s.y*i}},uo=function(e,n,r){return Math.max(e,Math.min(r,n))},Tn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},p0=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},g0=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},m0=function(e,n,r){return{x1:e.x1+n,x2:e.x2+n,y1:e.y1+r,y2:e.y2+r,w:e.w,h:e.h}},$h=function(e,n){e.x1=Math.min(e.x1,n.x1),e.x2=Math.max(e.x2,n.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n.y1),e.y2=Math.max(e.y2,n.y2),e.h=e.y2-e.y1},y0=function(e,n,r){e.x1=Math.min(e.x1,n),e.x2=Math.max(e.x2,n),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},ws=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=n,e.x2+=n,e.y1-=n,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},xs=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],r,i,a,o;if(n.length===1)r=i=a=o=n[0];else if(n.length===2)r=a=n[0],o=i=n[1];else if(n.length===4){var s=Zt(n,4);r=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=r,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},pf=function(e,n){e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},rc=function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},ea=function(e,n,r){return e.x1<=n&&n<=e.x2&&e.y1<=r&&r<=e.y2},b0=function(e,n){return ea(e,n.x,n.y)},Vh=function(e,n){return ea(e,n.x1,n.y1)&&ea(e,n.x2,n.y2)},qh=function(e,n,r,i,a,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?Si(a,o):l,c=a/2,f=o/2;u=Math.min(u,c,f);var v=u!==c,g=u!==f,h;if(v){var m=r-c+u-s,w=i-f-s,b=r+c-u+s,E=w;if(h=Hr(e,n,r,i,m,w,b,E,!1),h.length>0)return h}if(g){var C=r+c+s,x=i-f+u-s,k=C,A=i+f-u+s;if(h=Hr(e,n,r,i,C,x,k,A,!1),h.length>0)return h}if(v){var p=r-c+u-s,P=i+f+s,_=r+c-u+s,O=P;if(h=Hr(e,n,r,i,p,P,_,O,!1),h.length>0)return h}if(g){var D=r-c-s,L=i-f+u-s,N=D,R=i+f-u+s;if(h=Hr(e,n,r,i,D,L,N,R,!1),h.length>0)return h}var z;{var H=r-c+u,W=i-f+u;if(z=Ga(e,n,r,i,H,W,u+s),z.length>0&&z[0]<=H&&z[1]<=W)return[z[0],z[1]]}{var X=r+c-u,re=i-f+u;if(z=Ga(e,n,r,i,X,re,u+s),z.length>0&&z[0]>=X&&z[1]<=re)return[z[0],z[1]]}{var ae=r+c-u,J=i+f-u;if(z=Ga(e,n,r,i,ae,J,u+s),z.length>0&&z[0]>=ae&&z[1]>=J)return[z[0],z[1]]}{var $=r-c+u,U=i+f-u;if(z=Ga(e,n,r,i,$,U,u+s),z.length>0&&z[0]<=$&&z[1]>=U)return[z[0],z[1]]}return[]},w0=function(e,n,r,i,a,o,s){var l=s,u=Math.min(r,a),c=Math.max(r,a),f=Math.min(i,o),v=Math.max(i,o);return u-l<=e&&e<=c+l&&f-l<=n&&n<=v+l},x0=function(e,n,r,i,a,o,s,l,u){var c={x1:Math.min(r,s,a)-u,x2:Math.max(r,s,a)+u,y1:Math.min(i,l,o)-u,y2:Math.max(i,l,o)+u};return!(e<c.x1||e>c.x2||n<c.y1||n>c.y2)},E0=function(e,n,r,i){r-=i;var a=n*n-4*e*r;if(a<0)return[];var o=Math.sqrt(a),s=2*e,l=(-n+o)/s,u=(-n-o)/s;return[l,u]},C0=function(e,n,r,i,a){var o=1e-5;e===0&&(e=o),n/=e,r/=e,i/=e;var s,l,u,c,f,v,g,h;if(l=(3*r-n*n)/9,u=-(27*i)+n*(9*r-2*(n*n)),u/=54,s=l*l*l+u*u,a[1]=0,g=n/3,s>0){f=u+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),v=u-Math.sqrt(s),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),a[0]=-g+f+v,g+=(f+v)/2,a[4]=a[2]=-g,g=Math.sqrt(3)*(-v+f)/2,a[3]=g,a[5]=-g;return}if(a[5]=a[3]=0,s===0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),a[0]=-g+2*h,a[4]=a[2]=-(h+g);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),h=2*Math.sqrt(l),a[0]=-g+h*Math.cos(c/3),a[2]=-g+h*Math.cos((c+2*Math.PI)/3),a[4]=-g+h*Math.cos((c+4*Math.PI)/3)},S0=function(e,n,r,i,a,o,s,l){var u=1*r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*l+4*o*o-4*o*l+l*l,c=1*9*r*a-3*r*r-3*r*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*l-6*o*o+3*o*l,f=1*3*r*r-6*r*a+r*s-r*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*l-i*n+2*o*o+2*o*n-l*n,v=1*r*a-r*r+r*e-a*e+i*o-i*i+i*n-o*n,g=[];C0(u,c,f,v,g);for(var h=1e-7,m=[],w=0;w<6;w+=2)Math.abs(g[w+1])<h&&g[w]>=0&&g[w]<=1&&m.push(g[w]);m.push(1),m.push(0);for(var b=-1,E,C,x,k=0;k<m.length;k++)E=Math.pow(1-m[k],2)*r+2*(1-m[k])*m[k]*a+m[k]*m[k]*s,C=Math.pow(1-m[k],2)*i+2*(1-m[k])*m[k]*o+m[k]*m[k]*l,x=Math.pow(E-e,2)+Math.pow(C-n,2),b>=0?x<b&&(b=x):b=x;return b},T0=function(e,n,r,i,a,o){var s=[e-r,n-i],l=[a-r,o-i],u=l[0]*l[0]+l[1]*l[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*l[0]+s[1]*l[1],v=f*f/u;return f<0?c:v>u?(e-a)*(e-a)+(n-o)*(n-o):c-v},En=function(e,n,r){for(var i,a,o,s,l,u=0,c=0;c<r.length/2;c++)if(i=r[c*2],a=r[c*2+1],c+1<r.length/2?(o=r[(c+1)*2],s=r[(c+1)*2+1]):(o=r[(c+1-r.length/2)*2],s=r[(c+1-r.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)l=(e-i)/(o-i)*(s-a)+a,l>n&&u++;else continue;return u%2!==0},Tr=function(e,n,r,i,a,o,s,l,u){var c=new Array(r.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var v=Math.cos(-f),g=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=o/2*(r[h*2]*v-r[h*2+1]*g),c[h*2+1]=s/2*(r[h*2+1]*v+r[h*2]*g),c[h*2]+=i,c[h*2+1]+=a;var m;if(u>0){var w=Hs(c,-u);m=zs(w)}else m=c;return En(e,n,m)},k0=function(e,n,r,i,a,o,s,l){for(var u=new Array(r.length*2),c=0;c<l.length;c++){var f=l[c];u[c*4+0]=f.startX,u[c*4+1]=f.startY,u[c*4+2]=f.stopX,u[c*4+3]=f.stopY;var v=Math.pow(f.cx-e,2)+Math.pow(f.cy-n,2);if(v<=Math.pow(f.radius,2))return!0}return En(e,n,u)},zs=function(e){for(var n=new Array(e.length/2),r,i,a,o,s,l,u,c,f=0;f<e.length/4;f++){r=e[f*4],i=e[f*4+1],a=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],l=e[(f+1)*4+1],u=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],l=e[1],u=e[2],c=e[3]);var v=Hr(r,i,a,o,s,l,u,c,!0);n[f*2]=v[0],n[f*2+1]=v[1]}return n},Hs=function(e,n){for(var r=new Array(e.length*2),i,a,o,s,l=0;l<e.length/2;l++){i=e[l*2],a=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-a,c=-(o-i),f=Math.sqrt(u*u+c*c),v=u/f,g=c/f;r[l*4]=i+v*n,r[l*4+1]=a+g*n,r[l*4+2]=o+v*n,r[l*4+3]=s+g*n}return r},A0=function(e,n,r,i,a,o){var s=r-e,l=i-n;s/=a,l/=o;var u=Math.sqrt(s*s+l*l),c=u-1;if(c<0)return[];var f=c/u;return[(r-e)*f+e,(i-n)*f+n]},wi=function(e,n,r,i,a,o,s){return e-=a,n-=o,e/=r/2+s,n/=i/2+s,e*e+n*n<=1},Ga=function(e,n,r,i,a,o,s){var l=[r-e,i-n],u=[e-a,n-o],c=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),v=u[0]*u[0]+u[1]*u[1]-s*s,g=f*f-4*c*v;if(g<0)return[];var h=(-f+Math.sqrt(g))/(2*c),m=(-f-Math.sqrt(g))/(2*c),w=Math.min(h,m),b=Math.max(h,m),E=[];if(w>=0&&w<=1&&E.push(w),b>=0&&b<=1&&E.push(b),E.length===0)return[];var C=E[0]*l[0]+e,x=E[0]*l[1]+n;if(E.length>1){if(E[0]==E[1])return[C,x];var k=E[1]*l[0]+e,A=E[1]*l[1]+n;return[C,x,k,A]}else return[C,x]},Wl=function(e,n,r){return n<=e&&e<=r||r<=e&&e<=n?e:e<=n&&n<=r||r<=n&&n<=e?n:r},Hr=function(e,n,r,i,a,o,s,l,u){var c=e-a,f=r-e,v=s-a,g=n-o,h=i-n,m=l-o,w=v*g-m*c,b=f*g-h*c,E=m*f-v*h;if(E!==0){var C=w/E,x=b/E,k=.001,A=0-k,p=1+k;return A<=C&&C<=p&&A<=x&&x<=p?[e+C*f,n+C*h]:u?[e+C*f,n+C*h]:[]}else return w===0||b===0?Wl(e,r,s)===s?[s,l]:Wl(e,r,a)===a?[a,o]:Wl(a,s,r)===r?[r,i]:[]:[]},co=function(e,n,r,i,a,o,s,l){var u=[],c,f=new Array(r.length),v=!0;o==null&&(v=!1);var g;if(v){for(var h=0;h<f.length/2;h++)f[h*2]=r[h*2]*o+i,f[h*2+1]=r[h*2+1]*s+a;if(l>0){var m=Hs(f,-l);g=zs(m)}else g=f}else g=r;for(var w,b,E,C,x=0;x<g.length/2;x++)w=g[x*2],b=g[x*2+1],x<g.length/2-1?(E=g[(x+1)*2],C=g[(x+1)*2+1]):(E=g[0],C=g[1]),c=Hr(e,n,i,a,w,b,E,C),c.length!==0&&u.push(c[0],c[1]);return u},_0=function(e,n,r,i,a,o,s,l,u){var c=[],f,v=new Array(r.length*2);u.forEach(function(E,C){C===0?(v[v.length-2]=E.startX,v[v.length-1]=E.startY):(v[C*4-2]=E.startX,v[C*4-1]=E.startY),v[C*4]=E.stopX,v[C*4+1]=E.stopY,f=Ga(e,n,i,a,E.cx,E.cy,E.radius),f.length!==0&&c.push(f[0],f[1])});for(var g=0;g<v.length/4;g++)f=Hr(e,n,i,a,v[g*4],v[g*4+1],v[g*4+2],v[g*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var h=[c[0],c[1]],m=Math.pow(h[0]-e,2)+Math.pow(h[1]-n,2),w=1;w<c.length/2;w++){var b=Math.pow(c[w*2]-e,2)+Math.pow(c[w*2+1]-n,2);b<=m&&(h[0]=c[w*2],h[1]=c[w*2+1],m=b)}return h}return c},Qo=function(e,n,r){var i=[e[0]-n[0],e[1]-n[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-r)/a;return o<0&&(o=1e-5),[n[0]+o*i[0],n[1]+o*i[1]]},gn=function(e,n){var r=Eu(e,n);return r=Wh(r),r},Wh=function(e){for(var n,r,i=e.length/2,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<i;u++)n=e[2*u],r=e[2*u+1],a=Math.min(a,n),s=Math.max(s,n),o=Math.min(o,r),l=Math.max(l,r);for(var c=2/(s-a),f=2/(l-o),v=0;v<i;v++)n=e[2*v]=e[2*v]*c,r=e[2*v+1]=e[2*v+1]*f,a=Math.min(a,n),s=Math.max(s,n),o=Math.min(o,r),l=Math.max(l,r);if(o<-1)for(var g=0;g<i;g++)r=e[2*g+1]=e[2*g+1]+(-1-o);return e},Eu=function(e,n){var r=1/e*2*Math.PI,i=e%2===0?Math.PI/2+r/2:Math.PI/2;i+=n;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*r+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},Si=function(e,n){return Math.min(e/4,n/4,8)},Uh=function(e,n){return Math.min(e/10,n/10,8)},ic=function(){return 8},I0=function(e,n,r){return[e-2*n+r,2*(n-e),e]},Cu=function(e,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},M0=Qt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),P0={pageRank:function(e){for(var n=M0(e),r=n.dampingFactor,i=n.precision,a=n.iterations,o=n.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,v=f*f,g=c.length,h=new Array(v),m=new Array(f),w=(1-r)/f,b=0;b<f;b++){for(var E=0;E<f;E++){var C=b*f+E;h[C]=0}m[b]=0}for(var x=0;x<g;x++){var k=c[x],A=k.data("source"),p=k.data("target");if(A!==p){var P=u.indexOfId(A),_=u.indexOfId(p),O=o(k),D=_*f+P;h[D]+=O,m[P]+=O}}for(var L=1/f+w,N=0;N<f;N++)if(m[N]===0)for(var R=0;R<f;R++){var z=R*f+N;h[z]=L}else for(var H=0;H<f;H++){var W=H*f+N;h[W]=h[W]/m[N]+w}for(var X=new Array(f),re=new Array(f),ae,J=0;J<f;J++)X[J]=1;for(var $=0;$<a;$++){for(var U=0;U<f;U++)re[U]=0;for(var G=0;G<f;G++)for(var V=0;V<f;V++){var Y=G*f+V;re[G]+=h[Y]*X[V]}h0(re),ae=X,X=re,re=ae;for(var ne=0,se=0;se<f;se++){var Z=ae[se]-X[se];ne+=Z*Z}if(ne<i)break}var K={rank:function(ve){return ve=s.collection(ve)[0],X[u.indexOf(ve)]}};return K}},gf=Qt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Yi={degreeCentralityNormalized:function(e){e=gf(e);var n=this.cy(),r=this.nodes(),i=r.length;if(e.directed){for(var c={},f={},v=0,g=0,h=0;h<i;h++){var m=r[h],w=m.id();e.root=m;var b=this.degreeCentrality(e);v<b.indegree&&(v=b.indegree),g<b.outdegree&&(g=b.outdegree),c[w]=b.indegree,f[w]=b.outdegree}return{indegree:function(C){return v==0?0:(Xe(C)&&(C=n.filter(C)),c[C.id()]/v)},outdegree:function(C){return g===0?0:(Xe(C)&&(C=n.filter(C)),f[C.id()]/g)}}}else{for(var a={},o=0,s=0;s<i;s++){var l=r[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),a[l.id()]=u.degree}return{degree:function(C){return o===0?0:(Xe(C)&&(C=n.filter(C)),a[C.id()]/o)}}}},degreeCentrality:function(e){e=gf(e);var n=this.cy(),r=this,i=e,a=i.root,o=i.weight,s=i.directed,l=i.alpha;if(a=n.collection(a)[0],s){for(var g=a.connectedEdges(),h=g.filter(function(A){return A.target().same(a)&&r.has(A)}),m=g.filter(function(A){return A.source().same(a)&&r.has(A)}),w=h.length,b=m.length,E=0,C=0,x=0;x<h.length;x++)E+=o(h[x]);for(var k=0;k<m.length;k++)C+=o(m[k]);return{indegree:Math.pow(w,1-l)*Math.pow(E,l),outdegree:Math.pow(b,1-l)*Math.pow(C,l)}}else{for(var u=a.connectedEdges().intersection(r),c=u.length,f=0,v=0;v<u.length;v++)f+=o(u[v]);return{degree:Math.pow(c,1-l)*Math.pow(f,l)}}}};Yi.dc=Yi.degreeCentrality;Yi.dcn=Yi.degreeCentralityNormalised=Yi.degreeCentralityNormalized;var mf=Qt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Zi={closenessCentralityNormalized:function(e){for(var n=mf(e),r=n.harmonic,i=n.weight,a=n.directed,o=this.cy(),s={},l=0,u=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),f=0;f<u.length;f++){for(var v=0,g=u[f],h=0;h<u.length;h++)if(f!==h){var m=c.distance(g,u[h]);r?v+=1/m:v+=m}r||(v=1/v),l<v&&(l=v),s[g.id()]=v}return{closeness:function(b){return l==0?0:(Xe(b)?b=o.filter(b)[0].id():b=b.id(),s[b]/l)}}},closenessCentrality:function(e){var n=mf(e),r=n.root,i=n.weight,a=n.directed,o=n.harmonic;r=this.filter(r)[0];for(var s=this.dijkstra({root:r,weight:i,directed:a}),l=0,u=this.nodes(),c=0;c<u.length;c++){var f=u[c];if(!f.same(r)){var v=s.distanceTo(f);o?l+=1/v:l+=v}}return o?l:1/l}};Zi.cc=Zi.closenessCentrality;Zi.ccn=Zi.closenessCentralityNormalised=Zi.closenessCentralityNormalized;var D0=Qt({weight:null,directed:!1}),Su={betweennessCentrality:function(e){for(var n=D0(e),r=n.directed,i=n.weight,a=i!=null,o=this.cy(),s=this.nodes(),l={},u={},c=0,f={set:function(C,x){u[C]=x,x>c&&(c=x)},get:function(C){return u[C]}},v=0;v<s.length;v++){var g=s[v],h=g.id();r?l[h]=g.outgoers().nodes():l[h]=g.openNeighborhood().nodes(),f.set(h,0)}for(var m=function(C){for(var x=s[C].id(),k=[],A={},p={},P={},_=new ko(function(V,Y){return P[V]-P[Y]}),O=0;O<s.length;O++){var D=s[O].id();A[D]=[],p[D]=0,P[D]=1/0}for(p[x]=1,P[x]=0,_.push(x);!_.empty();){var L=_.pop();if(k.push(L),a)for(var N=0;N<l[L].length;N++){var R=l[L][N],z=o.getElementById(L),H=void 0;z.edgesTo(R).length>0?H=z.edgesTo(R)[0]:H=R.edgesTo(z)[0];var W=i(H);R=R.id(),P[R]>P[L]+W&&(P[R]=P[L]+W,_.nodes.indexOf(R)<0?_.push(R):_.updateItem(R),p[R]=0,A[R]=[]),P[R]==P[L]+W&&(p[R]=p[R]+p[L],A[R].push(L))}else for(var X=0;X<l[L].length;X++){var re=l[L][X].id();P[re]==1/0&&(_.push(re),P[re]=P[L]+1),P[re]==P[L]+1&&(p[re]=p[re]+p[L],A[re].push(L))}}for(var ae={},J=0;J<s.length;J++)ae[s[J].id()]=0;for(;k.length>0;){for(var $=k.pop(),U=0;U<A[$].length;U++){var G=A[$][U];ae[G]=ae[G]+p[G]/p[$]*(1+ae[$])}$!=s[C].id()&&f.set($,f.get($)+ae[$])}},w=0;w<s.length;w++)m(w);var b={betweenness:function(C){var x=o.collection(C).id();return f.get(x)},betweennessNormalized:function(C){if(c==0)return 0;var x=o.collection(C).id();return f.get(x)/c}};return b.betweennessNormalised=b.betweennessNormalized,b}};Su.bc=Su.betweennessCentrality;var L0=Qt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),O0=function(e){return L0(e)},B0=function(e,n){for(var r=0,i=0;i<n.length;i++)r+=n[i](e);return r},R0=function(e,n,r){for(var i=0;i<n;i++)e[i*n+i]=r},Gh=function(e,n){for(var r,i=0;i<n;i++){r=0;for(var a=0;a<n;a++)r+=e[a*n+i];for(var o=0;o<n;o++)e[o*n+i]=e[o*n+i]/r}},N0=function(e,n,r){for(var i=new Array(r*r),a=0;a<r;a++){for(var o=0;o<r;o++)i[a*r+o]=0;for(var s=0;s<r;s++)for(var l=0;l<r;l++)i[a*r+l]+=e[a*r+s]*n[s*r+l]}return i},F0=function(e,n,r){for(var i=e.slice(0),a=1;a<r;a++)e=N0(e,i,n);return e},z0=function(e,n,r){for(var i=new Array(n*n),a=0;a<n*n;a++)i[a]=Math.pow(e[a],r);return Gh(i,n),i},H0=function(e,n,r,i){for(var a=0;a<r;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(n[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},$0=function(e,n,r,i){for(var a=[],o=0;o<n;o++){for(var s=[],l=0;l<n;l++)Math.round(e[o*n+l]*1e3)/1e3>0&&s.push(r[l]);s.length!==0&&a.push(i.collection(s))}return a},V0=function(e,n){for(var r=0;r<e.length;r++)if(!n[r]||e[r].id()!==n[r].id())return!1;return!0},q0=function(e){for(var n=0;n<e.length;n++)for(var r=0;r<e.length;r++)n!=r&&V0(e[n],e[r])&&e.splice(r,1);return e},yf=function(e){for(var n=this.nodes(),r=this.edges(),i=this.cy(),a=O0(e),o={},s=0;s<n.length;s++)o[n[s].id()]=s;for(var l=n.length,u=l*l,c=new Array(u),f,v=0;v<u;v++)c[v]=0;for(var g=0;g<r.length;g++){var h=r[g],m=o[h.source().id()],w=o[h.target().id()],b=B0(h,a.attributes);c[m*l+w]+=b,c[w*l+m]+=b}R0(c,l,a.multFactor),Gh(c,l);for(var E=!0,C=0;E&&C<a.maxIterations;)E=!1,f=F0(c,l,a.expandFactor),c=z0(f,l,a.inflateFactor),H0(c,f,u,4)||(E=!0),C++;var x=$0(c,l,n,i);return x=q0(x),x},W0={markovClustering:yf,mcl:yf},U0=function(e){return e},jh=function(e,n){return Math.abs(n-e)},bf=function(e,n,r){return e+jh(n,r)},wf=function(e,n,r){return e+Math.pow(r-n,2)},G0=function(e){return Math.sqrt(e)},j0=function(e,n,r){return Math.max(e,jh(n,r))},Oa=function(e,n,r,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:U0,s=i,l,u,c=0;c<e;c++)l=n(c),u=r(c),s=a(s,l,u);return o(s)},ta={euclidean:function(e,n,r){return e>=2?Oa(e,n,r,0,wf,G0):Oa(e,n,r,0,bf)},squaredEuclidean:function(e,n,r){return Oa(e,n,r,0,wf)},manhattan:function(e,n,r){return Oa(e,n,r,0,bf)},max:function(e,n,r){return Oa(e,n,r,-1/0,j0)}};ta["squared-euclidean"]=ta.squaredEuclidean;ta.squaredeuclidean=ta.squaredEuclidean;function sl(t,e,n,r,i,a){var o;return Rt(t)?o=t:o=ta[t]||ta.euclidean,e===0&&Rt(t)?o(i,a):o(e,n,r,i,a)}var K0=Qt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ac=function(e){return K0(e)},$s=function(e,n,r,i,a){var o=a!=="kMedoids",s=o?function(f){return r[f]}:function(f){return i[f](r)},l=function(v){return i[v](n)},u=r,c=n;return sl(e,i.length,s,l,u,c)},Ul=function(e,n,r){for(var i=r.length,a=new Array(i),o=new Array(i),s=new Array(n),l=null,u=0;u<i;u++)a[u]=e.min(r[u]).value,o[u]=e.max(r[u]).value;for(var c=0;c<n;c++){l=[];for(var f=0;f<i;f++)l[f]=Math.random()*(o[f]-a[f])+a[f];s[c]=l}return s},Kh=function(e,n,r,i,a){for(var o=1/0,s=0,l=0;l<n.length;l++){var u=$s(r,e,n[l],i,a);u<o&&(o=u,s=l)}return s},Xh=function(e,n,r){for(var i=[],a=null,o=0;o<n.length;o++)a=n[o],r[a.id()]===e&&i.push(a);return i},X0=function(e,n,r){return Math.abs(n-e)<=r},Y0=function(e,n,r){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-n[i][a]);if(o>r)return!1}return!0},Z0=function(e,n,r){for(var i=0;i<r;i++)if(e===n[i])return!0;return!1},xf=function(e,n){var r=new Array(n);if(e.length<50)for(var i=0;i<n;i++){for(var a=e[Math.floor(Math.random()*e.length)];Z0(a,r,i);)a=e[Math.floor(Math.random()*e.length)];r[i]=a}else for(var o=0;o<n;o++)r[o]=e[Math.floor(Math.random()*e.length)];return r},Ef=function(e,n,r){for(var i=0,a=0;a<n.length;a++)i+=$s("manhattan",n[a],e,r,"kMedoids");return i},Q0=function(e){var n=this.cy(),r=this.nodes(),i=null,a=ac(e),o=new Array(a.k),s={},l;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,l=Ul(r,a.k,a.attributes)):jt(a.testCentroids)==="object"?l=a.testCentroids:l=Ul(r,a.k,a.attributes):l=Ul(r,a.k,a.attributes);for(var u=!0,c=0;u&&c<a.maxIterations;){for(var f=0;f<r.length;f++)i=r[f],s[i.id()]=Kh(i,l,a.distance,a.attributes,"kMeans");u=!1;for(var v=0;v<a.k;v++){var g=Xh(v,r,s);if(g.length!==0){for(var h=a.attributes.length,m=l[v],w=new Array(h),b=new Array(h),E=0;E<h;E++){b[E]=0;for(var C=0;C<g.length;C++)i=g[C],b[E]+=a.attributes[E](i);w[E]=b[E]/g.length,X0(w[E],m[E],a.sensitivityThreshold)||(u=!0)}l[v]=w,o[v]=n.collection(g)}}c++}return o},J0=function(e){var n=this.cy(),r=this.nodes(),i=null,a=ac(e),o=new Array(a.k),s,l={},u,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(jt(a.testCentroids)==="object"?s=a.testCentroids:s=xf(r,a.k)):s=xf(r,a.k);for(var f=!0,v=0;f&&v<a.maxIterations;){for(var g=0;g<r.length;g++)i=r[g],l[i.id()]=Kh(i,s,a.distance,a.attributes,"kMedoids");f=!1;for(var h=0;h<s.length;h++){var m=Xh(h,r,l);if(m.length!==0){c[h]=Ef(s[h],m,a.attributes);for(var w=0;w<m.length;w++)u=Ef(m[w],m,a.attributes),u<c[h]&&(c[h]=u,s[h]=m[w],f=!0);o[h]=n.collection(m)}}v++}return o},eb=function(e,n,r,i,a){for(var o,s,l=0;l<n.length;l++)for(var u=0;u<e.length;u++)i[l][u]=Math.pow(r[l][u],a.m);for(var c=0;c<e.length;c++)for(var f=0;f<a.attributes.length;f++){o=0,s=0;for(var v=0;v<n.length;v++)o+=i[v][c]*a.attributes[f](n[v]),s+=i[v][c];e[c][f]=o/s}},tb=function(e,n,r,i,a){for(var o=0;o<e.length;o++)n[o]=e[o].slice();for(var s,l,u,c=2/(a.m-1),f=0;f<r.length;f++)for(var v=0;v<i.length;v++){s=0;for(var g=0;g<r.length;g++)l=$s(a.distance,i[v],r[f],a.attributes,"cmeans"),u=$s(a.distance,i[v],r[g],a.attributes,"cmeans"),s+=Math.pow(l/u,c);e[v][f]=1/s}},nb=function(e,n,r,i){for(var a=new Array(r.k),o=0;o<a.length;o++)a[o]=[];for(var s,l,u=0;u<n.length;u++){s=-1/0,l=-1;for(var c=0;c<n[0].length;c++)n[u][c]>s&&(s=n[u][c],l=c);a[l].push(e[u])}for(var f=0;f<a.length;f++)a[f]=i.collection(a[f]);return a},Cf=function(e){var n=this.cy(),r=this.nodes(),i=ac(e),a,o,s,l,u;l=new Array(r.length);for(var c=0;c<r.length;c++)l[c]=new Array(i.k);s=new Array(r.length);for(var f=0;f<r.length;f++)s[f]=new Array(i.k);for(var v=0;v<r.length;v++){for(var g=0,h=0;h<i.k;h++)s[v][h]=Math.random(),g+=s[v][h];for(var m=0;m<i.k;m++)s[v][m]=s[v][m]/g}o=new Array(i.k);for(var w=0;w<i.k;w++)o[w]=new Array(i.attributes.length);u=new Array(r.length);for(var b=0;b<r.length;b++)u[b]=new Array(i.k);for(var E=!0,C=0;E&&C<i.maxIterations;)E=!1,eb(o,r,s,u,i),tb(s,l,o,r,i),Y0(s,l,i.sensitivityThreshold)||(E=!0),C++;return a=nb(r,s,i,n),{clusters:a,degreeOfMembership:s}},rb={kMeans:Q0,kMedoids:J0,fuzzyCMeans:Cf,fcm:Cf},ib=Qt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),ab={single:"min",complete:"max"},ob=function(e){var n=ib(e),r=ab[n.linkage];return r!=null&&(n.linkage=r),n},Sf=function(e,n,r,i,a){for(var o=0,s=1/0,l,u=a.attributes,c=function(_,O){return sl(a.distance,u.length,function(D){return u[D](_)},function(D){return u[D](O)},_,O)},f=0;f<e.length;f++){var v=e[f].key,g=r[v][i[v]];g<s&&(o=v,s=g)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var h=n[o],m=n[i[o]],w;a.mode==="dendrogram"?w={left:h,right:m,key:h.key}:w={value:h.value.concat(m.value),key:h.key},e[h.index]=w,e.splice(m.index,1),n[h.key]=w;for(var b=0;b<e.length;b++){var E=e[b];h.key===E.key?l=1/0:a.linkage==="min"?(l=r[h.key][E.key],r[h.key][E.key]>r[m.key][E.key]&&(l=r[m.key][E.key])):a.linkage==="max"?(l=r[h.key][E.key],r[h.key][E.key]<r[m.key][E.key]&&(l=r[m.key][E.key])):a.linkage==="mean"?l=(r[h.key][E.key]*h.size+r[m.key][E.key]*m.size)/(h.size+m.size):a.mode==="dendrogram"?l=c(E.value,h.value):l=c(E.value[0],h.value[0]),r[h.key][E.key]=r[E.key][h.key]=l}for(var C=0;C<e.length;C++){var x=e[C].key;if(i[x]===h.key||i[x]===m.key){for(var k=x,A=0;A<e.length;A++){var p=e[A].key;r[x][p]<r[x][k]&&(k=p)}i[x]=k}e[C].index=C}return h.key=m.key=h.index=m.index=null,!0},Jo=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},sb=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),a=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:a.id()}}),n.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},lb=function t(e,n,r){if(!e)return[];var i=[],a=[],o=[];return n===0?(e.left&&Jo(e.left,i),e.right&&Jo(e.right,a),o=i.concat(a),[r.collection(o)]):n===1?e.value?[r.collection(e.value)]:(e.left&&Jo(e.left,i),e.right&&Jo(e.right,a),[r.collection(i),r.collection(a)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(a=t(e.right,n-1,r)),i.concat(a))},Tf=function(e){for(var n=this.cy(),r=this.nodes(),i=ob(e),a=i.attributes,o=function(C,x){return sl(i.distance,a.length,function(k){return a[k](C)},function(k){return a[k](x)},C,x)},s=[],l=[],u=[],c=[],f=0;f<r.length;f++){var v={value:i.mode==="dendrogram"?r[f]:[r[f]],key:f,index:f};s[f]=v,c[f]=v,l[f]=[],u[f]=0}for(var g=0;g<s.length;g++)for(var h=0;h<=g;h++){var m=void 0;i.mode==="dendrogram"?m=g===h?1/0:o(s[g].value,s[h].value):m=g===h?1/0:o(s[g].value[0],s[h].value[0]),l[g][h]=m,l[h][g]=m,m<l[g][u[g]]&&(u[g]=h)}for(var w=Sf(s,c,l,u,i);w;)w=Sf(s,c,l,u,i);var b;return i.mode==="dendrogram"?(b=lb(s[0],i.dendrogramDepth,n),i.addDendrogram&&sb(s[0],n)):(b=new Array(s.length),s.forEach(function(E,C){E.key=E.index=null,b[C]=n.collection(E.value)})),b},ub={hierarchicalClustering:Tf,hca:Tf},cb=Qt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),fb=function(e){var n=e.damping,r=e.preference;.5<=n&&n<1||Ot("Damping must range on [0.5, 1).  Got: ".concat(n));var i=["median","mean","min","max"];return i.some(function(a){return a===r})||Fe(r)||Ot("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(r)),cb(e)},db=function(e,n,r,i){var a=function(s,l){return i[l](s)};return-sl(e,i.length,function(o){return a(n,o)},function(o){return a(r,o)},n,r)},hb=function(e,n){var r=null;return n==="median"?r=f0(e):n==="mean"?r=c0(e):n==="min"?r=l0(e):n==="max"?r=u0(e):r=n,r},vb=function(e,n,r){for(var i=[],a=0;a<e;a++)n[a*e+a]+r[a*e+a]>0&&i.push(a);return i},kf=function(e,n,r){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,l=0;l<r.length;l++){var u=r[l];n[a*e+u]>s&&(o=u,s=n[a*e+u])}o>0&&i.push(o)}for(var c=0;c<r.length;c++)i[r[c]]=r[c];return i},pb=function(e,n,r){for(var i=kf(e,n,r),a=0;a<r.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===r[a]&&o.push(s);for(var l=-1,u=-1/0,c=0;c<o.length;c++){for(var f=0,v=0;v<o.length;v++)f+=n[o[v]*e+o[c]];f>u&&(l=c,u=f)}r[a]=o[l]}return i=kf(e,n,r),i},Af=function(e){for(var n=this.cy(),r=this.nodes(),i=fb(e),a={},o=0;o<r.length;o++)a[r[o].id()]=o;var s,l,u,c,f,v;s=r.length,l=s*s,u=new Array(l);for(var g=0;g<l;g++)u[g]=-1/0;for(var h=0;h<s;h++)for(var m=0;m<s;m++)h!==m&&(u[h*s+m]=db(i.distance,r[h],r[m],i.attributes));c=hb(u,i.preference);for(var w=0;w<s;w++)u[w*s+w]=c;f=new Array(l);for(var b=0;b<l;b++)f[b]=0;v=new Array(l);for(var E=0;E<l;E++)v[E]=0;for(var C=new Array(s),x=new Array(s),k=new Array(s),A=0;A<s;A++)C[A]=0,x[A]=0,k[A]=0;for(var p=new Array(s*i.minIterations),P=0;P<p.length;P++)p[P]=0;var _;for(_=0;_<i.maxIterations;_++){for(var O=0;O<s;O++){for(var D=-1/0,L=-1/0,N=-1,R=0,z=0;z<s;z++)C[z]=f[O*s+z],R=v[O*s+z]+u[O*s+z],R>=D?(L=D,D=R,N=z):R>L&&(L=R);for(var H=0;H<s;H++)f[O*s+H]=(1-i.damping)*(u[O*s+H]-D)+i.damping*C[H];f[O*s+N]=(1-i.damping)*(u[O*s+N]-L)+i.damping*C[N]}for(var W=0;W<s;W++){for(var X=0,re=0;re<s;re++)C[re]=v[re*s+W],x[re]=Math.max(0,f[re*s+W]),X+=x[re];X-=x[W],x[W]=f[W*s+W],X+=x[W];for(var ae=0;ae<s;ae++)v[ae*s+W]=(1-i.damping)*Math.min(0,X-x[ae])+i.damping*C[ae];v[W*s+W]=(1-i.damping)*(X-x[W])+i.damping*C[W]}for(var J=0,$=0;$<s;$++){var U=v[$*s+$]+f[$*s+$]>0?1:0;p[_%i.minIterations*s+$]=U,J+=U}if(J>0&&(_>=i.minIterations-1||_==i.maxIterations-1)){for(var G=0,V=0;V<s;V++){k[V]=0;for(var Y=0;Y<i.minIterations;Y++)k[V]+=p[Y*s+V];(k[V]===0||k[V]===i.minIterations)&&G++}if(G===s)break}}for(var ne=vb(s,f,v),se=pb(s,u,ne),Z={},K=0;K<ne.length;K++)Z[ne[K]]=[];for(var ce=0;ce<r.length;ce++){var ve=a[r[ce].id()],De=se[ve];De!=null&&Z[De].push(r[ce])}for(var Oe=new Array(ne.length),Ze=0;Ze<ne.length;Ze++)Oe[Ze]=n.collection(Z[ne[Ze]]);return Oe},gb={affinityPropagation:Af,ap:Af},mb=Qt({root:void 0,directed:!1}),yb={hierholzer:function(e){if(!gt(e)){var n=arguments;e={root:n[0],directed:n[1]}}var r=mb(e),i=r.root,a=r.directed,o=this,s=!1,l,u,c;i&&(c=Xe(i)?this.filter(i)[0].id():i[0].id());var f={},v={};a?o.forEach(function(E){var C=E.id();if(E.isNode()){var x=E.indegree(!0),k=E.outdegree(!0),A=x-k,p=k-x;A==1?l?s=!0:l=C:p==1?u?s=!0:u=C:(p>1||A>1)&&(s=!0),f[C]=[],E.outgoers().forEach(function(P){P.isEdge()&&f[C].push(P.id())})}else v[C]=[void 0,E.target().id()]}):o.forEach(function(E){var C=E.id();if(E.isNode()){var x=E.degree(!0);x%2&&(l?u?s=!0:u=C:l=C),f[C]=[],E.connectedEdges().forEach(function(k){return f[C].push(k.id())})}else v[C]=[E.source().id(),E.target().id()]});var g={found:!1,trail:void 0};if(s)return g;if(u&&l)if(a){if(c&&u!=c)return g;c=u}else{if(c&&u!=c&&l!=c)return g;c||(c=u)}else c||(c=o[0].id());var h=function(C){for(var x=C,k=[C],A,p,P;f[x].length;)A=f[x].shift(),p=v[A][0],P=v[A][1],x!=P?(f[P]=f[P].filter(function(_){return _!=A}),x=P):!a&&x!=p&&(f[p]=f[p].filter(function(_){return _!=A}),x=p),k.unshift(A),k.unshift(x);return k},m=[],w=[];for(w=h(c);w.length!=1;)f[w[0]].length==0?(m.unshift(o.getElementById(w.shift())),m.unshift(o.getElementById(w.shift()))):w=h(w.shift()).concat(w);m.unshift(o.getElementById(w.shift()));for(var b in f)if(f[b].length)return g;return g.found=!0,g.trail=this.spawn(m,!0),g}},es=function(){var e=this,n={},r=0,i=0,a=[],o=[],s={},l=function(v,g){for(var h=o.length-1,m=[],w=e.spawn();o[h].x!=v||o[h].y!=g;)m.push(o.pop().edge),h--;m.push(o.pop().edge),m.forEach(function(b){var E=b.connectedNodes().intersection(e);w.merge(b),E.forEach(function(C){var x=C.id(),k=C.connectedEdges().intersection(e);w.merge(C),n[x].cutVertex?w.merge(k.filter(function(A){return A.isLoop()})):w.merge(k)})}),a.push(w)},u=function f(v,g,h){v===h&&(i+=1),n[g]={id:r,low:r++,cutVertex:!1};var m=e.getElementById(g).connectedEdges().intersection(e);if(m.size()===0)a.push(e.spawn(e.getElementById(g)));else{var w,b,E,C;m.forEach(function(x){w=x.source().id(),b=x.target().id(),E=w===g?b:w,E!==h&&(C=x.id(),s[C]||(s[C]=!0,o.push({x:g,y:E,edge:x})),E in n?n[g].low=Math.min(n[g].low,n[E].id):(f(v,E,g),n[g].low=Math.min(n[g].low,n[E].low),n[g].id<=n[E].low&&(n[g].cutVertex=!0,l(g,E))))})}};e.forEach(function(f){if(f.isNode()){var v=f.id();v in n||(i=0,u(v,v),n[v].cutVertex=i>1)}});var c=Object.keys(n).filter(function(f){return n[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:a}},bb={hopcroftTarjanBiconnected:es,htbc:es,htb:es,hopcroftTarjanBiconnectedComponents:es},ts=function(){var e=this,n={},r=0,i=[],a=[],o=e.spawn(e),s=function l(u){a.push(u),n[u]={index:r,low:r++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(m){var w=m.target().id();w!==u&&(w in n||l(w),n[w].explored||(n[u].low=Math.min(n[u].low,n[w].low)))}),n[u].index===n[u].low){for(var f=e.spawn();;){var v=a.pop();if(f.merge(e.getElementById(v)),n[v].low=n[u].index,n[v].explored=!0,v===u)break}var g=f.edgesWith(f),h=f.merge(g);i.push(h),o=o.difference(h)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in n||s(u)}}),{cut:o,components:i}},wb={tarjanStronglyConnected:ts,tsc:ts,tscc:ts,tarjanStronglyConnectedComponents:ts},Yh={};[lo,Yy,Zy,Jy,t0,r0,o0,P0,Yi,Zi,Su,W0,rb,ub,gb,yb,bb,wb].forEach(function(t){Je(Yh,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Zh=0,Qh=1,Jh=2,kr=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=Zh,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};kr.prototype={fulfill:function(e){return _f(this,Qh,"fulfillValue",e)},reject:function(e){return _f(this,Jh,"rejectReason",e)},then:function(e,n){var r=this,i=new kr;return r.onFulfilled.push(Mf(e,i,"fulfill")),r.onRejected.push(Mf(n,i,"reject")),ev(r),i.proxy}};var _f=function(e,n,r,i){return e.state===Zh&&(e.state=n,e[r]=i,ev(e)),e},ev=function(e){e.state===Qh?If(e,"onFulfilled",e.fulfillValue):e.state===Jh&&If(e,"onRejected",e.rejectReason)},If=function(e,n,r){if(e[n].length!==0){var i=e[n];e[n]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](r)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},Mf=function(e,n,r){return function(i){if(typeof e!="function")n[r].call(n,i);else{var a;try{a=e(i)}catch(o){n.reject(o);return}xb(n,a)}}},xb=function t(e,n){if(e===n||e.proxy===n){e.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(jt(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(a){e.reject(a);return}if(typeof r=="function"){var i=!1;try{r.call(n,function(a){i||(i=!0,a===n?e.reject(new TypeError("circular thenable chain")):t(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(n)};kr.all=function(t){return new kr(function(e,n){for(var r=new Array(t.length),i=0,a=function(l,u){r[l]=u,i++,i===t.length&&e(r)},o=0;o<t.length;o++)(function(s){var l=t[s],u=l!=null&&l.then!=null;if(u)l.then(function(f){a(s,f)},function(f){n(f)});else{var c=l;a(s,c)}})(o)})};kr.resolve=function(t){return new kr(function(e,n){e(t)})};kr.reject=function(t){return new kr(function(e,n){n(t)})};var fa=typeof Promise<"u"?Promise:kr,Tu=function(e,n,r){var i=Zu(e),a=!i,o=this._private=Je({duration:1e3},n,r);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Rt(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Ti=Tu.prototype;Je(Ti,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n,r=e.target._private.animation;e.queue?n=r.queue:n=r.current,n.push(this),Ln(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var n=this._private;return e===void 0?n.progress*n.duration:this.progress(e/n.duration)},progress:function(e){var n=this._private,r=n.playing;return e===void 0?n.progress:(r&&this.pause(),n.progress=e,n.started=!1,r&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,n=e.playing;n&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(u,c){var f=e[u];f!=null&&(e[u]=e[c],e[c]=f)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return n&&this.play(),this},promise:function(e){var n=this._private,r;switch(e){case"frame":r=n.frames;break;default:case"complete":case"completed":r=n.completes}return new fa(function(i,a){r.push(function(){i()})})}});Ti.complete=Ti.completed;Ti.run=Ti.play;Ti.running=Ti.playing;var Eb={animated:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:n,duration:n,complete:r}):this}},delayAnimation:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:n,duration:n,complete:r}):this}},animation:function(){return function(n,r){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,l=!a,u=!l;if(!s.styleEnabled())return this;var c=s.style();n=Je({},n,r);var f=Object.keys(n).length===0;if(f)return new Tu(o[0],n);switch(n.duration===void 0&&(n.duration=400),n.duration){case"slow":n.duration=600;break;case"fast":n.duration=200;break}if(u&&(n.style=c.getPropsList(n.style||n.css),n.css=void 0),u&&n.renderedPosition!=null){var v=n.renderedPosition,g=s.pan(),h=s.zoom();n.position=zh(v,h,g)}if(l&&n.panBy!=null){var m=n.panBy,w=s.pan();n.pan={x:w.x+m.x,y:w.y+m.y}}var b=n.center||n.centre;if(l&&b!=null){var E=s.getCenterPan(b.eles,n.zoom);E!=null&&(n.pan=E)}if(l&&n.fit!=null){var C=n.fit,x=s.getFitViewport(C.eles||C.boundingBox,C.padding);x!=null&&(n.pan=x.pan,n.zoom=x.zoom)}if(l&&gt(n.zoom)){var k=s.getZoomedViewport(n.zoom);k!=null?(k.zoomed&&(n.zoom=k.zoom),k.panned&&(n.pan=k.pan)):n.zoom=null}return new Tu(o[0],n)}},animate:function(){return function(n,r){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;r&&(n=Je({},n,r));for(var l=0;l<o.length;l++){var u=o[l],c=u.animated()&&(n.queue===void 0||n.queue),f=u.animation(n,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(n,r){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],c=u._private,f=c.animation.current,v=0;v<f.length;v++){var g=f[v],h=g._private;r&&(h.duration=0)}n&&(c.animation.queue=[]),r||(c.animation.current=[])}return s.notify("draw"),this}}},Cb=Array.isArray,ll=Cb,Sb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tb=/^\w*$/;function kb(t,e){if(ll(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||So(t)?!0:Tb.test(t)||!Sb.test(t)||e!=null&&t in Object(e)}var Ab=kb,_b="[object AsyncFunction]",Ib="[object Function]",Mb="[object GeneratorFunction]",Pb="[object Proxy]";function Db(t){if(!Ei(t))return!1;var e=Mh(t);return e==Ib||e==Mb||e==_b||e==Pb}var Lb=Db,Ob=il["__core-js_shared__"],Gl=Ob,Pf=function(){var t=/[^.]+$/.exec(Gl&&Gl.keys&&Gl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Bb(t){return!!Pf&&Pf in t}var Rb=Bb,Nb=Function.prototype,Fb=Nb.toString;function zb(t){if(t!=null){try{return Fb.call(t)}catch{}try{return t+""}catch{}}return""}var Hb=zb,$b=/[\\^$.*+?()[\]{}|]/g,Vb=/^\[object .+?Constructor\]$/,qb=Function.prototype,Wb=Object.prototype,Ub=qb.toString,Gb=Wb.hasOwnProperty,jb=RegExp("^"+Ub.call(Gb).replace($b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kb(t){if(!Ei(t)||Rb(t))return!1;var e=Lb(t)?jb:Vb;return e.test(Hb(t))}var Xb=Kb;function Yb(t,e){return t==null?void 0:t[e]}var Zb=Yb;function Qb(t,e){var n=Zb(t,e);return Xb(n)?n:void 0}var oc=Qb,Jb=oc(Object,"create"),fo=Jb;function ew(){this.__data__=fo?fo(null):{},this.size=0}var tw=ew;function nw(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var rw=nw,iw="__lodash_hash_undefined__",aw=Object.prototype,ow=aw.hasOwnProperty;function sw(t){var e=this.__data__;if(fo){var n=e[t];return n===iw?void 0:n}return ow.call(e,t)?e[t]:void 0}var lw=sw,uw=Object.prototype,cw=uw.hasOwnProperty;function fw(t){var e=this.__data__;return fo?e[t]!==void 0:cw.call(e,t)}var dw=fw,hw="__lodash_hash_undefined__";function vw(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=fo&&e===void 0?hw:e,this}var pw=vw;function da(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}da.prototype.clear=tw;da.prototype.delete=rw;da.prototype.get=lw;da.prototype.has=dw;da.prototype.set=pw;var Df=da;function gw(){this.__data__=[],this.size=0}var mw=gw;function yw(t,e){return t===e||t!==t&&e!==e}var tv=yw;function bw(t,e){for(var n=t.length;n--;)if(tv(t[n][0],e))return n;return-1}var ul=bw,ww=Array.prototype,xw=ww.splice;function Ew(t){var e=this.__data__,n=ul(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():xw.call(e,n,1),--this.size,!0}var Cw=Ew;function Sw(t){var e=this.__data__,n=ul(e,t);return n<0?void 0:e[n][1]}var Tw=Sw;function kw(t){return ul(this.__data__,t)>-1}var Aw=kw;function _w(t,e){var n=this.__data__,r=ul(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Iw=_w;function ha(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ha.prototype.clear=mw;ha.prototype.delete=Cw;ha.prototype.get=Tw;ha.prototype.has=Aw;ha.prototype.set=Iw;var Mw=ha,Pw=oc(il,"Map"),Dw=Pw;function Lw(){this.size=0,this.__data__={hash:new Df,map:new(Dw||Mw),string:new Df}}var Ow=Lw;function Bw(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Rw=Bw;function Nw(t,e){var n=t.__data__;return Rw(e)?n[typeof e=="string"?"string":"hash"]:n.map}var cl=Nw;function Fw(t){var e=cl(this,t).delete(t);return this.size-=e?1:0,e}var zw=Fw;function Hw(t){return cl(this,t).get(t)}var $w=Hw;function Vw(t){return cl(this,t).has(t)}var qw=Vw;function Ww(t,e){var n=cl(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Uw=Ww;function va(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}va.prototype.clear=Ow;va.prototype.delete=zw;va.prototype.get=$w;va.prototype.has=qw;va.prototype.set=Uw;var nv=va,Gw="Expected a function";function sc(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Gw);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(sc.Cache||nv),n}sc.Cache=nv;var jw=sc,Kw=500;function Xw(t){var e=jw(t,function(r){return n.size===Kw&&n.clear(),r}),n=e.cache;return e}var Yw=Xw,Zw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qw=/\\(\\)?/g,Jw=Yw(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zw,function(n,r,i,a){e.push(i?a.replace(Qw,"$1"):r||n)}),e}),rv=Jw;function e1(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var iv=e1,Lf=Ji?Ji.prototype:void 0,Of=Lf?Lf.toString:void 0;function av(t){if(typeof t=="string")return t;if(ll(t))return iv(t,av)+"";if(So(t))return Of?Of.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var t1=av;function n1(t){return t==null?"":t1(t)}var ov=n1;function r1(t,e){return ll(t)?t:Ab(t,e)?[t]:rv(ov(t))}var sv=r1;function i1(t){if(typeof t=="string"||So(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var lc=i1;function a1(t,e){e=sv(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[lc(e[n++])];return n&&n==r?t:void 0}var o1=a1;function s1(t,e,n){var r=t==null?void 0:o1(t,e);return r===void 0?n:r}var l1=s1,u1=function(){try{var t=oc(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Bf=u1;function c1(t,e,n){e=="__proto__"&&Bf?Bf(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var f1=c1,d1=Object.prototype,h1=d1.hasOwnProperty;function v1(t,e,n){var r=t[e];(!(h1.call(t,e)&&tv(r,n))||n===void 0&&!(e in t))&&f1(t,e,n)}var p1=v1,g1=9007199254740991,m1=/^(?:0|[1-9]\d*)$/;function y1(t,e){var n=typeof t;return e=e??g1,!!e&&(n=="number"||n!="symbol"&&m1.test(t))&&t>-1&&t%1==0&&t<e}var b1=y1;function w1(t,e,n,r){if(!Ei(t))return t;e=sv(e,t);for(var i=-1,a=e.length,o=a-1,s=t;s!=null&&++i<a;){var l=lc(e[i]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var c=s[l];u=r?r(c,l,s):void 0,u===void 0&&(u=Ei(c)?c:b1(e[i+1])?[]:{})}p1(s,l,u),s=s[l]}return t}var x1=w1;function E1(t,e,n){return t==null?t:x1(t,e,n)}var C1=E1;function S1(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var T1=S1;function k1(t){return ll(t)?iv(t,lc):So(t)?[t]:T1(rv(ov(t)))}var A1=k1,_1={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=Je({},n,e),function(i,a){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],c=l?s[0]:s;if(Xe(i)){var f=i.indexOf(".")!==-1,v=f&&A1(i);if(o.allowGetting&&a===void 0){var g;return c&&(o.beforeGet(c),v&&c._private[o.field][i]===void 0?g=l1(c._private[o.field],v):g=c._private[o.field][i]),g}else if(o.allowSetting&&a!==void 0){var h=!o.immutableKeys[i];if(h){var m=bh({},i,a);o.beforeSet(s,m);for(var w=0,b=u.length;w<b;w++){var E=u[w];o.canSet(E)&&(v&&c._private[o.field][i]===void 0?C1(E._private[o.field],v,a):E._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&gt(i)){var C=i,x,k,A=Object.keys(C);o.beforeSet(s,C);for(var p=0;p<A.length;p++){x=A[p],k=C[x];var P=!o.immutableKeys[x];if(P)for(var _=0;_<u.length;_++){var O=u[_];o.canSet(O)&&(O._private[o.field][x]=k)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Rt(i)){var D=i;s.on(o.bindingEvent,D)}else if(o.allowGetting&&i===void 0){var L;return c&&(o.beforeGet(c),L=c._private[o.field]),L}return s}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Je({},n,e),function(i){var a=e,o=this,s=o.length!==void 0,l=s?o:[o];if(Xe(i)){for(var u=i.split(/\s+/),c=u.length,f=0;f<c;f++){var v=u[f];if(!Gr(v)){var g=!a.immutableKeys[v];if(g)for(var h=0,m=l.length;h<m;h++)l[h]._private[a.field][v]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var w=0,b=l.length;w<b;w++)for(var E=l[w]._private[a.field],C=Object.keys(E),x=0;x<C.length;x++){var k=C[x],A=!a.immutableKeys[k];A&&(E[k]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},I1={eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(r,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new fa(function(s,l){var u=function(g){a.off.apply(a,f),s(g)},c=o.concat([u]),f=c.concat([]);a.on.apply(a,c)})}}},wt={};[Eb,_1,I1].forEach(function(t){Je(wt,t)});var M1={animate:wt.animate(),animation:wt.animation(),animated:wt.animated(),clearQueue:wt.clearQueue(),delay:wt.delay(),delayAnimation:wt.delayAnimation(),stop:wt.stop()},Es={classes:function(e){var n=this;if(e===void 0){var r=[];return n[0]._private.classes.forEach(function(h){return r.push(h)}),r}else Tt(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new ca(e),o=0;o<n.length;o++){for(var s=n[o],l=s._private,u=l.classes,c=!1,f=0;f<e.length;f++){var v=e[f],g=u.has(v);if(!g){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var n=this[0];return n!=null&&n._private.classes.has(e)},toggleClass:function(e,n){Tt(e)||(e=e.match(/\S+/g)||[]);for(var r=this,i=n===void 0,a=[],o=0,s=r.length;o<s;o++)for(var l=r[o],u=l._private.classes,c=!1,f=0;f<e.length;f++){var v=e[f],g=u.has(v),h=!1;n||i&&!g?(u.add(v),h=!0):(!n||i&&g)&&(u.delete(v),h=!0),!c&&h&&(a.push(l),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,n){var r=this;if(n==null)n=250;else if(n===0)return r;return r.addClass(e),setTimeout(function(){r.removeClass(e)},n),r}};Es.className=Es.classNames=Es.classes;var pt={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Gt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};pt.variable="(?:[\\w-.]|(?:\\\\"+pt.metaChar+"))+";pt.className="(?:[\\w-]|(?:\\\\"+pt.metaChar+"))+";pt.value=pt.string+"|"+pt.number;pt.id=pt.variable;(function(){var t,e,n;for(t=pt.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],pt.comparatorOp+="|@"+e;for(t=pt.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],!(e.indexOf("!")>=0)&&e!=="="&&(pt.comparatorOp+="|\\!"+e)})();var St=function(){return{checks:[]}},Ve={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ku=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return Um(t.selector,e.selector)}),P1=function(){for(var t={},e,n=0;n<ku.length;n++)e=ku[n],t[e.selector]=e.matches;return t}(),D1=function(e,n){return P1[e](n)},L1="("+ku.map(function(t){return t.selector}).join("|")+")",Ni=function(e){return e.replace(new RegExp("\\\\("+pt.metaChar+")","g"),function(n,r){return r})},Fr=function(e,n,r){e[e.length-1]=r},Au=[{name:"group",query:!0,regex:"("+pt.group+")",populate:function(e,n,r){var i=Zt(r,1),a=i[0];n.checks.push({type:Ve.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:L1,populate:function(e,n,r){var i=Zt(r,1),a=i[0];n.checks.push({type:Ve.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+pt.id+")",populate:function(e,n,r){var i=Zt(r,1),a=i[0];n.checks.push({type:Ve.ID,value:Ni(a)})}},{name:"className",query:!0,regex:"\\.("+pt.className+")",populate:function(e,n,r){var i=Zt(r,1),a=i[0];n.checks.push({type:Ve.CLASS,value:Ni(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+pt.variable+")\\s*\\]",populate:function(e,n,r){var i=Zt(r,1),a=i[0];n.checks.push({type:Ve.DATA_EXIST,field:Ni(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+pt.variable+")\\s*("+pt.comparatorOp+")\\s*("+pt.value+")\\s*\\]",populate:function(e,n,r){var i=Zt(r,3),a=i[0],o=i[1],s=i[2],l=new RegExp("^"+pt.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),n.checks.push({type:Ve.DATA_COMPARE,field:Ni(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+pt.boolOp+")\\s*("+pt.variable+")\\s*\\]",populate:function(e,n,r){var i=Zt(r,2),a=i[0],o=i[1];n.checks.push({type:Ve.DATA_BOOL,field:Ni(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+pt.meta+")\\s*("+pt.comparatorOp+")\\s*("+pt.number+")\\s*\\]\\]",populate:function(e,n,r){var i=Zt(r,3),a=i[0],o=i[1],s=i[2];n.checks.push({type:Ve.META_COMPARE,field:Ni(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:pt.separator,populate:function(e,n){var r=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];r!=null&&(o.subject=r,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=St();return s}},{name:"directedEdge",separator:!0,regex:pt.directedEdge,populate:function(e,n){if(e.currentSubject==null){var r=St(),i=n,a=St();return r.checks.push({type:Ve.DIRECTED_EDGE,source:i,target:a}),Fr(e,n,r),e.edgeCount++,a}else{var o=St(),s=n,l=St();return o.checks.push({type:Ve.NODE_SOURCE,source:s,target:l}),Fr(e,n,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:pt.undirectedEdge,populate:function(e,n){if(e.currentSubject==null){var r=St(),i=n,a=St();return r.checks.push({type:Ve.UNDIRECTED_EDGE,nodes:[i,a]}),Fr(e,n,r),e.edgeCount++,a}else{var o=St(),s=n,l=St();return o.checks.push({type:Ve.NODE_NEIGHBOR,node:s,neighbor:l}),Fr(e,n,o),l}}},{name:"child",separator:!0,regex:pt.child,populate:function(e,n){if(e.currentSubject==null){var r=St(),i=St(),a=e[e.length-1];return r.checks.push({type:Ve.CHILD,parent:a,child:i}),Fr(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var o=St(),s=e[e.length-1],l=St(),u=St(),c=St(),f=St();return o.checks.push({type:Ve.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=n.checks,n.checks=[{type:Ve.TRUE}],f.checks.push({type:Ve.TRUE}),l.checks.push({type:Ve.PARENT,parent:f,child:c}),Fr(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var v=St(),g=St(),h=[{type:Ve.PARENT,parent:v,child:g}];return v.checks=n.checks,n.checks=h,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:pt.descendant,populate:function(e,n){if(e.currentSubject==null){var r=St(),i=St(),a=e[e.length-1];return r.checks.push({type:Ve.DESCENDANT,ancestor:a,descendant:i}),Fr(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var o=St(),s=e[e.length-1],l=St(),u=St(),c=St(),f=St();return o.checks.push({type:Ve.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=n.checks,n.checks=[{type:Ve.TRUE}],f.checks.push({type:Ve.TRUE}),l.checks.push({type:Ve.ANCESTOR,ancestor:f,descendant:c}),Fr(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var v=St(),g=St(),h=[{type:Ve.ANCESTOR,ancestor:v,descendant:g}];return v.checks=n.checks,n.checks=h,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:pt.subject,populate:function(e,n){if(e.currentSubject!=null&&e.currentSubject!==n)return xt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=n;var r=e[e.length-1],i=r.checks[0],a=i==null?null:i.type;a===Ve.DIRECTED_EDGE?i.type=Ve.NODE_TARGET:a===Ve.UNDIRECTED_EDGE&&(i.type=Ve.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Au.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var O1=function(e){for(var n,r,i,a=0;a<Au.length;a++){var o=Au[a],s=o.name,l=e.match(o.regexObj);if(l!=null){r=l,n=o,i=s;var u=l[0];e=e.substring(u.length);break}}return{expr:n,match:r,name:i,remaining:e}},B1=function(e){var n=e.match(/^\s+/);if(n){var r=n[0];e=e.substring(r.length)}return e},R1=function(e){var n=this,r=n.inputText=e,i=n[0]=St();for(n.length=1,r=B1(r);;){var a=O1(r);if(a.expr==null)return xt("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(n,i,o);if(s===!1)return!1;if(s!=null&&(i=s),r=a.remaining,r.match(/^\s*$/))break}var l=n[n.length-1];n.currentSubject!=null&&(l.subject=n.currentSubject),l.edgeCount=n.edgeCount,l.compoundCount=n.compoundCount;for(var u=0;u<n.length;u++){var c=n[u];if(c.compoundCount>0&&c.edgeCount>0)return xt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return xt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&xt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},N1=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},n=function(c){return Xe(c)?'"'+c+'"':e(c)},r=function(c){return" "+c+" "},i=function(c,f){var v=c.type,g=c.value;switch(v){case Ve.GROUP:{var h=e(g);return h.substring(0,h.length-1)}case Ve.DATA_COMPARE:{var m=c.field,w=c.operator;return"["+m+r(e(w))+n(g)+"]"}case Ve.DATA_BOOL:{var b=c.operator,E=c.field;return"["+e(b)+E+"]"}case Ve.DATA_EXIST:{var C=c.field;return"["+C+"]"}case Ve.META_COMPARE:{var x=c.operator,k=c.field;return"[["+k+r(e(x))+n(g)+"]]"}case Ve.STATE:return g;case Ve.ID:return"#"+g;case Ve.CLASS:return"."+g;case Ve.PARENT:case Ve.CHILD:return a(c.parent,f)+r(">")+a(c.child,f);case Ve.ANCESTOR:case Ve.DESCENDANT:return a(c.ancestor,f)+" "+a(c.descendant,f);case Ve.COMPOUND_SPLIT:{var A=a(c.left,f),p=a(c.subject,f),P=a(c.right,f);return A+(A.length>0?" ":"")+p+P}case Ve.TRUE:return""}},a=function(c,f){return c.checks.reduce(function(v,g,h){return v+(f===c&&h===0?"$":"")+i(g,f)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=a(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},F1={parse:R1,toString:N1},lv=function(e,n,r){var i,a=Xe(e),o=Fe(e),s=Xe(r),l,u,c=!1,f=!1,v=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),f=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),c=!0),(a||s||c)&&(l=!a&&!o?"":""+e,u=""+r),c&&(e=l=l.toLowerCase(),r=u=u.toLowerCase()),n){case"*=":i=l.indexOf(u)>=0;break;case"$=":i=l.indexOf(u,l.length-u.length)>=0;break;case"^=":i=l.indexOf(u)===0;break;case"=":i=e===r;break;case">":v=!0,i=e>r;break;case">=":v=!0,i=e>=r;break;case"<":v=!0,i=e<r;break;case"<=":v=!0,i=e<=r;break;default:i=!1;break}return f&&(e!=null||!v)&&(i=!i),i},z1=function(e,n){switch(n){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},H1=function(e){return e!==void 0},uc=function(e,n){return e.data(n)},$1=function(e,n){return e[n]()},Ft=[],It=function(e,n){return e.checks.every(function(r){return Ft[r.type](r,n)})};Ft[Ve.GROUP]=function(t,e){var n=t.value;return n==="*"||n===e.group()};Ft[Ve.STATE]=function(t,e){var n=t.value;return D1(n,e)};Ft[Ve.ID]=function(t,e){var n=t.value;return e.id()===n};Ft[Ve.CLASS]=function(t,e){var n=t.value;return e.hasClass(n)};Ft[Ve.META_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return lv($1(e,n),r,i)};Ft[Ve.DATA_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return lv(uc(e,n),r,i)};Ft[Ve.DATA_BOOL]=function(t,e){var n=t.field,r=t.operator;return z1(uc(e,n),r)};Ft[Ve.DATA_EXIST]=function(t,e){var n=t.field;return t.operator,H1(uc(e,n))};Ft[Ve.UNDIRECTED_EDGE]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),a=e.target();return It(n,i)&&It(r,a)||It(r,i)&&It(n,a)};Ft[Ve.NODE_NEIGHBOR]=function(t,e){return It(t.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&It(t.neighbor,n)})};Ft[Ve.DIRECTED_EDGE]=function(t,e){return It(t.source,e.source())&&It(t.target,e.target())};Ft[Ve.NODE_SOURCE]=function(t,e){return It(t.source,e)&&e.outgoers().some(function(n){return n.isNode()&&It(t.target,n)})};Ft[Ve.NODE_TARGET]=function(t,e){return It(t.target,e)&&e.incomers().some(function(n){return n.isNode()&&It(t.source,n)})};Ft[Ve.CHILD]=function(t,e){return It(t.child,e)&&It(t.parent,e.parent())};Ft[Ve.PARENT]=function(t,e){return It(t.parent,e)&&e.children().some(function(n){return It(t.child,n)})};Ft[Ve.DESCENDANT]=function(t,e){return It(t.descendant,e)&&e.ancestors().some(function(n){return It(t.ancestor,n)})};Ft[Ve.ANCESTOR]=function(t,e){return It(t.ancestor,e)&&e.descendants().some(function(n){return It(t.descendant,n)})};Ft[Ve.COMPOUND_SPLIT]=function(t,e){return It(t.subject,e)&&It(t.left,e)&&It(t.right,e)};Ft[Ve.TRUE]=function(){return!0};Ft[Ve.COLLECTION]=function(t,e){var n=t.value;return n.has(e)};Ft[Ve.FILTER]=function(t,e){var n=t.value;return n(e)};var V1=function(e){var n=this;if(n.length===1&&n[0].checks.length===1&&n[0].checks[0].type===Ve.ID)return e.getElementById(n[0].checks[0].value).collection();var r=function(a){for(var o=0;o<n.length;o++){var s=n[o];if(It(s,a))return!0}return!1};return n.text()==null&&(r=function(){return!0}),e.filter(r)},q1=function(e){for(var n=this,r=0;r<n.length;r++){var i=n[r];if(It(i,e))return!0}return!1},W1={matches:q1,filter:V1},Xr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Xe(e)&&e.match(/^\s*$/)||(Ln(e)?this.addQuery({checks:[{type:Ve.COLLECTION,value:e.collection()}]}):Rt(e)?this.addQuery({checks:[{type:Ve.FILTER,value:e}]}):Xe(e)?this.parse(e)||(this.invalid=!0):Ot("A selector must be created from a string; found "))},Yr=Xr.prototype;[F1,W1].forEach(function(t){return Je(Yr,t)});Yr.text=function(){return this.inputText};Yr.size=function(){return this.length};Yr.eq=function(t){return this[t]};Yr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Yr.addQuery=function(t){this[this.length++]=t};Yr.selector=Yr.toString;var Vr={allAre:function(e){var n=new Xr(e);return this.every(function(r){return n.matches(r)})},is:function(e){var n=new Xr(e);return this.some(function(r){return n.matches(r)})},some:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(i)return!0}return!1},every:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var n=this.length,r=e.length;return n!==r?!1:n===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(n){return e.hasElementWithId(n.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var n=this.neighborhood();return e.every(function(r){return n.hasElementWithId(r.id())})},contains:function(e){e=this.cy().collection(e);var n=this;return e.every(function(r){return n.hasElementWithId(r.id())})}};Vr.allAreNeighbours=Vr.allAreNeighbors;Vr.has=Vr.contains;Vr.equal=Vr.equals=Vr.same;var $n=function(e,n){return function(i,a,o,s){var l=i,u=this,c;if(l==null?c="":Ln(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var f=u[0]._private,v=f.traversalCache=f.traversalCache||{},g=v[n]=v[n]||[],h=jr(c),m=g[h];return m||(g[h]=e.call(u,i,a,o,s))}else return e.call(u,i,a,o,s)}},na={parent:function(e){var n=[];if(this.length===1){var r=this[0]._private.parent;if(r)return r}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&n.push(o)}return this.spawn(n,!0).filter(e)},parents:function(e){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var a=r[i];n.push(a)}r=r.parent()}return this.spawn(n,!0).filter(e)},commonAncestors:function(e){for(var n,r=0;r<this.length;r++){var i=this[r],a=i.parents();n=n||a,n=n.intersect(a)}return n.filter(e)},orphans:function(e){return this.stdFilter(function(n){return n.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(n){return n.isChild()}).filter(e)},children:$n(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var n=[];function r(i){for(var a=0;a<i.length;a++){var o=i[a];n.push(o),o.children().nonempty()&&r(o.children())}}return r(this.children()),this.spawn(n,!0).filter(e)}};function cc(t,e,n,r){for(var i=[],a=new ca,o=t.cy(),s=o.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];n?i.push(u):s&&r(i,a,u)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),s&&r(i,a,c)}return t}function uv(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];e.has(a.id())||t.push(a)}}na.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cc(this,t,e,uv)};function cv(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}na.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cc(this,t,e,cv)};function U1(t,e,n){cv(t,e,n),uv(t,e,n)}na.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cc(this,t,e,U1)};na.ancestors=na.parents;var ho,fv;ho=fv={data:wt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:wt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:wt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:wt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:wt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:wt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};ho.attr=ho.data;ho.removeAttr=ho.removeData;var G1=fv,fl={};function jl(t){return function(e){var n=this;if(e===void 0&&(e=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,i=n[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(r+=t(i,s))}return r}else return}}Je(fl,{degree:jl(function(t,e){return e.source().same(e.target())?2:1}),indegree:jl(function(t,e){return e.target().same(t)?1:0}),outdegree:jl(function(t,e){return e.source().same(t)?1:0})});function Fi(t,e){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[t](n);s!==void 0&&(r===void 0||e(s,r))&&(r=s)}return r}}Je(fl,{minDegree:Fi("degree",function(t,e){return t<e}),maxDegree:Fi("degree",function(t,e){return t>e}),minIndegree:Fi("indegree",function(t,e){return t<e}),maxIndegree:Fi("indegree",function(t,e){return t>e}),minOutdegree:Fi("outdegree",function(t,e){return t<e}),maxOutdegree:Fi("outdegree",function(t,e){return t>e})});Je(fl,{totalDegree:function(e){for(var n=0,r=this.nodes(),i=0;i<r.length;i++)n+=r[i].degree(e);return n}});var Jn,dv,hv=function(e,n,r){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:n.x!=null?n.x-o.x:0,y:n.y!=null?n.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,r),a.dirtyBoundingBoxCache()}}},Rf={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,n){hv(e,n,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Jn=dv={position:wt.data(Rf),silentPosition:wt.data(Je({},Rf,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,n){hv(e,n,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,n){if(gt(e))n?this.silentPosition(e):this.position(e);else if(Rt(e)){var r=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=r(o,a))&&(n?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,n,r){var i;if(gt(e)?(i={x:Fe(e.x)?e.x:0,y:Fe(e.y)?e.y:0},r=n):Xe(e)&&Fe(n)&&(i={x:0,y:0},i[e]=n),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+i.x,y:l.y+i.y};r?s.silentPosition(u):s.position(u)}}a.endBatch()}return this},silentShift:function(e,n){return gt(e)?this.shift(e,!0):Xe(e)&&Fe(n)&&this.shift(e,n,!0),this},renderedPosition:function(e,n){var r=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=gt(e)?e:void 0,l=s!==void 0||n!==void 0&&Xe(e);if(r&&r.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];n!==void 0?c.position(e,(n-o[e])/a):s!==void 0&&c.position(zh(s,a,o))}else{var f=r.position();return s=ol(f,a,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,n){var r=this[0],i=this.cy(),a=gt(e)?e:void 0,o=a!==void 0||n!==void 0&&Xe(e),s=i.hasCompoundNodes();if(r&&r.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],c=s?u.parent():null,f=c&&c.length>0,v=f;f&&(c=c[0]);var g=v?c.position():{x:0,y:0};n!==void 0?u.position(e,n+g[e]):a!==void 0&&u.position({x:a.x+g.x,y:a.y+g.y})}else{var h=r.position(),m=s?r.parent():null,w=m&&m.length>0,b=w;w&&(m=m[0]);var E=b?m.position():{x:0,y:0};return a={x:h.x-E.x,y:h.y-E.y},e===void 0?a:a[e]}else if(!o)return;return this}};Jn.modelPosition=Jn.point=Jn.position;Jn.modelPositions=Jn.points=Jn.positions;Jn.renderedPoint=Jn.renderedPosition;Jn.relativePoint=Jn.relativePosition;var j1=dv,Qi,ei;Qi=ei={};ei.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),a=e.x1*r+i.x,o=e.x2*r+i.x,s=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}};ei.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}}),this)};ei.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),v=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=v.x-f.w/2,f.x2=v.x+f.w/2,f.y1=v.y-f.h/2,f.y2=v.y+f.h/2);function g(_,O,D){var L=0,N=0,R=O+D;return _>0&&R>0&&(L=O/R*_,N=D/R*_),{biasDiff:L,biasComplementDiff:N}}function h(_,O,D,L){if(D.units==="%")switch(L){case"width":return _>0?D.pfValue*_:0;case"height":return O>0?D.pfValue*O:0;case"average":return _>0&&O>0?D.pfValue*(_+O)/2:0;case"min":return _>0&&O>0?_>O?D.pfValue*O:D.pfValue*_:0;case"max":return _>0&&O>0?_>O?D.pfValue*_:D.pfValue*O:0;default:return 0}else return D.units==="px"?D.pfValue:0}var m=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var w=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var b=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var E=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(E=E*100/c.height.val);var C=g(c.width.val-f.w,m,w),x=C.biasDiff,k=C.biasComplementDiff,A=g(c.height.val-f.h,b,E),p=A.biasDiff,P=A.biasComplementDiff;s.autoPadding=h(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),v.x=(-x+f.x1+f.x2+k)/2,s.autoHeight=Math.max(f.h,c.height.val),v.y=(-p+f.y1+f.y2+P)/2}for(var r=0;r<this.length;r++){var i=this[r],a=i._private;(!a.compoundBoundsClean||t)&&(n(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Hn=function(e){return e===1/0||e===-1/0?0:e},Kn=function(e,n,r,i,a){i-n===0||a-r===0||n==null||r==null||i==null||a==null||(e.x1=n<e.x1?n:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},vi=function(e,n){return n==null?e:Kn(e,n.x1,n.y1,n.x2,n.y2)},Ba=function(e,n,r){return Xn(e,n,r)},ns=function(e,n,r){if(!n.cy().headless()){var i=n._private,a=i.rstyle,o=a.arrowWidth/2,s=n.pstyle(r+"-arrow-shape").value,l,u;if(s!=="none"){r==="source"?(l=a.srcX,u=a.srcY):r==="target"?(l=a.tgtX,u=a.tgtY):(l=a.midX,u=a.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[r]=c[r]||{};f.x1=l-o,f.y1=u-o,f.x2=l+o,f.y2=u+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,ws(f,1),Kn(e,f.x1,f.y1,f.x2,f.y2)}}},Kl=function(e,n,r){if(!n.cy().headless()){var i;r?i=r+"-":i="";var a=n._private,o=a.rstyle,s=n.pstyle(i+"label").strValue;if(s){var l=n.pstyle("text-halign"),u=n.pstyle("text-valign"),c=Ba(o,"labelWidth",r),f=Ba(o,"labelHeight",r),v=Ba(o,"labelX",r),g=Ba(o,"labelY",r),h=n.pstyle(i+"text-margin-x").pfValue,m=n.pstyle(i+"text-margin-y").pfValue,w=n.isEdge(),b=n.pstyle(i+"text-rotation"),E=n.pstyle("text-outline-width").pfValue,C=n.pstyle("text-border-width").pfValue,x=C/2,k=n.pstyle("text-background-padding").pfValue,A=2,p=f,P=c,_=P/2,O=p/2,D,L,N,R;if(w)D=v-_,L=v+_,N=g-O,R=g+O;else{switch(l.value){case"left":D=v-P,L=v;break;case"center":D=v-_,L=v+_;break;case"right":D=v,L=v+P;break}switch(u.value){case"top":N=g-p,R=g;break;case"center":N=g-O,R=g+O;break;case"bottom":N=g,R=g+p;break}}var z=h-Math.max(E,x)-k-A,H=h+Math.max(E,x)+k+A,W=m-Math.max(E,x)-k-A,X=m+Math.max(E,x)+k+A;D+=z,L+=H,N+=W,R+=X;var re=r||"main",ae=a.labelBounds,J=ae[re]=ae[re]||{};J.x1=D,J.y1=N,J.x2=L,J.y2=R,J.w=L-D,J.h=R-N,J.leftPad=z,J.rightPad=H,J.topPad=W,J.botPad=X;var $=w&&b.strValue==="autorotate",U=b.pfValue!=null&&b.pfValue!==0;if($||U){var G=$?Ba(a.rstyle,"labelAngle",r):b.pfValue,V=Math.cos(G),Y=Math.sin(G),ne=(D+L)/2,se=(N+R)/2;if(!w){switch(l.value){case"left":ne=L;break;case"right":ne=D;break}switch(u.value){case"top":se=R;break;case"bottom":se=N;break}}var Z=function(qe,Re){return qe=qe-ne,Re=Re-se,{x:qe*V-Re*Y+ne,y:qe*Y+Re*V+se}},K=Z(D,N),ce=Z(D,R),ve=Z(L,N),De=Z(L,R);D=Math.min(K.x,ce.x,ve.x,De.x),L=Math.max(K.x,ce.x,ve.x,De.x),N=Math.min(K.y,ce.y,ve.y,De.y),R=Math.max(K.y,ce.y,ve.y,De.y)}var Oe=re+"Rot",Ze=ae[Oe]=ae[Oe]||{};Ze.x1=D,Ze.y1=N,Ze.x2=L,Ze.y2=R,Ze.w=L-D,Ze.h=R-N,Kn(e,D,N,L,R),Kn(a.labelBounds.all,D,N,L,R)}return e}},K1=function(e,n){if(!n.cy().headless()){var r=n.pstyle("outline-opacity").value,i=n.pstyle("outline-width").value;if(r>0&&i>0){var a=n.pstyle("outline-offset").value,o=n.pstyle("shape").value,s=i+a,l=(e.w+s*2)/e.w,u=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+s*2.4)/e.w:o==="star"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.6)/e.h,f=-s/3.8):o==="triangle"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.4)/e.h,f=-s/1.4):o==="vee"&&(l=(e.w+s*4.4)/e.w,u=(e.h+s*3.8)/e.h,f=-s*.5);var v=e.h*u-e.h,g=e.w*l-e.w;if(xs(e,[Math.ceil(v/2),Math.ceil(g/2)]),c!=0||f!==0){var h=m0(e,c,f);$h(e,h)}}}},X1=function(e,n){var r=e._private.cy,i=r.styleEnabled(),a=r.headless(),o=Tn(),s=e._private,l=e.isNode(),u=e.isEdge(),c,f,v,g,h,m,w=s.rstyle,b=l&&i?e.pstyle("bounds-expansion").pfValue:[0],E=function(nt){return nt.pstyle("display").value!=="none"},C=!i||E(e)&&(!u||E(e.source())&&E(e.target()));if(C){var x=0,k=0;i&&n.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(k=e.pstyle("overlay-padding").value));var A=0,p=0;i&&n.includeUnderlays&&(A=e.pstyle("underlay-opacity").value,A!==0&&(p=e.pstyle("underlay-padding").value));var P=Math.max(k,p),_=0,O=0;if(i&&(_=e.pstyle("width").pfValue,O=_/2),l&&n.includeNodes){var D=e.position();h=D.x,m=D.y;var L=e.outerWidth(),N=L/2,R=e.outerHeight(),z=R/2;c=h-N,f=h+N,v=m-z,g=m+z,Kn(o,c,v,f,g),i&&n.includeOutlines&&K1(o,e)}else if(u&&n.includeEdges)if(i&&!a){var H=e.pstyle("curve-style").strValue;if(c=Math.min(w.srcX,w.midX,w.tgtX),f=Math.max(w.srcX,w.midX,w.tgtX),v=Math.min(w.srcY,w.midY,w.tgtY),g=Math.max(w.srcY,w.midY,w.tgtY),c-=O,f+=O,v-=O,g+=O,Kn(o,c,v,f,g),H==="haystack"){var W=w.haystackPts;if(W&&W.length===2){if(c=W[0].x,v=W[0].y,f=W[1].x,g=W[1].y,c>f){var X=c;c=f,f=X}if(v>g){var re=v;v=g,g=re}Kn(o,c-O,v-O,f+O,g+O)}}else if(H==="bezier"||H==="unbundled-bezier"||H.endsWith("segments")||H.endsWith("taxi")){var ae;switch(H){case"bezier":case"unbundled-bezier":ae=w.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":ae=w.linePts;break}if(ae!=null)for(var J=0;J<ae.length;J++){var $=ae[J];c=$.x-O,f=$.x+O,v=$.y-O,g=$.y+O,Kn(o,c,v,f,g)}}}else{var U=e.source(),G=U.position(),V=e.target(),Y=V.position();if(c=G.x,f=Y.x,v=G.y,g=Y.y,c>f){var ne=c;c=f,f=ne}if(v>g){var se=v;v=g,g=se}c-=O,f+=O,v-=O,g+=O,Kn(o,c,v,f,g)}if(i&&n.includeEdges&&u&&(ns(o,e,"mid-source"),ns(o,e,"mid-target"),ns(o,e,"source"),ns(o,e,"target")),i){var Z=e.pstyle("ghost").value==="yes";if(Z){var K=e.pstyle("ghost-offset-x").pfValue,ce=e.pstyle("ghost-offset-y").pfValue;Kn(o,o.x1+K,o.y1+ce,o.x2+K,o.y2+ce)}}var ve=s.bodyBounds=s.bodyBounds||{};pf(ve,o),xs(ve,b),ws(ve,1),i&&(c=o.x1,f=o.x2,v=o.y1,g=o.y2,Kn(o,c-P,v-P,f+P,g+P));var De=s.overlayBounds=s.overlayBounds||{};pf(De,o),xs(De,b),ws(De,1);var Oe=s.labelBounds=s.labelBounds||{};Oe.all!=null?g0(Oe.all):Oe.all=Tn(),i&&n.includeLabels&&(n.includeMainLabels&&Kl(o,e,null),u&&(n.includeSourceLabels&&Kl(o,e,"source"),n.includeTargetLabels&&Kl(o,e,"target")))}return o.x1=Hn(o.x1),o.y1=Hn(o.y1),o.x2=Hn(o.x2),o.y2=Hn(o.y2),o.w=Hn(o.x2-o.x1),o.h=Hn(o.y2-o.y1),o.w>0&&o.h>0&&C&&(xs(o,b),ws(o,1)),o},vv=function(e){var n=0,r=function(o){return(o?1:0)<<n++},i=0;return i+=r(e.incudeNodes),i+=r(e.includeEdges),i+=r(e.includeLabels),i+=r(e.includeMainLabels),i+=r(e.includeSourceLabels),i+=r(e.includeTargetLabels),i+=r(e.includeOverlays),i+=r(e.includeOutlines),i},pv=function(e){if(e.isEdge()){var n=e.source().position(),r=e.target().position(),i=function(o){return Math.round(o)};return Ny([i(n.x),i(n.y),i(r.x),i(r.y)])}else return 0},Nf=function(e,n){var r=e._private,i,a=e.isEdge(),o=n==null?Ff:vv(n),s=o===Ff,l=pv(e),u=r.bbCachePosKey===l,c=n.useCache&&u,f=function(m){return m._private.bbCache==null||m._private.styleDirty},v=!c||f(e)||a&&(f(e.source())||f(e.target()));if(v?(u||e.recalculateRenderedStyle(c),i=X1(e,vo),r.bbCache=i,r.bbCachePosKey=l):i=r.bbCache,!s){var g=e.isNode();i=Tn(),(n.includeNodes&&g||n.includeEdges&&!g)&&(n.includeOverlays?vi(i,r.overlayBounds):vi(i,r.bodyBounds)),n.includeLabels&&(n.includeMainLabels&&(!a||n.includeSourceLabels&&n.includeTargetLabels)?vi(i,r.labelBounds.all):(n.includeMainLabels&&vi(i,r.labelBounds.mainRot),n.includeSourceLabels&&vi(i,r.labelBounds.sourceRot),n.includeTargetLabels&&vi(i,r.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},vo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Ff=vv(vo),zf=Qt(vo);ei.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=vo:t=zf(t),e=Nf(this[0],t);else{e=Tn(),t=t||vo;var n=zf(t),r=this,i=r.cy(),a=i.styleEnabled();if(a)for(var o=0;o<r.length;o++){var s=r[o],l=s._private,u=pv(s),c=l.bbCachePosKey===u,f=n.useCache&&c&&!l.styleDirty;s.recalculateRenderedStyle(f)}this.updateCompoundBounds(!t.useCache);for(var v=0;v<r.length;v++){var g=r[v];vi(e,Nf(g,n))}}return e.x1=Hn(e.x1),e.y1=Hn(e.y1),e.x2=Hn(e.x2),e.y2=Hn(e.y2),e.w=Hn(e.x2-e.x1),e.h=Hn(e.y2-e.y1),e};ei.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};ei.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(u){return u.isParent()}),e=e.not(i)),gt(t)){var a=t;t=function(){return a}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};n.startBatch(),e.forEach(o).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l=p0(this.boundingBox({useCache:!1}));return e.silentPositions(s),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),l};Qi.boundingbox=Qi.bb=Qi.boundingBox;Qi.renderedBoundingbox=Qi.renderedBoundingBox;var Y1=ei,ja,Ao;ja=Ao={};var gv=function(e){e.uppercaseName=lf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=lf(e.outerName),ja[e.name]=function(){var r=this[0],i=r._private,a=i.cy,o=a._private.styleEnabled;if(r)if(o){if(r.isParent())return r.updateCompoundBounds(),i[e.autoName]||0;var s=r.pstyle(e.name);switch(s.strValue){case"label":return r.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ja["outer"+e.uppercaseName]=function(){var r=this[0],i=r._private,a=i.cy,o=a._private.styleEnabled;if(r)if(o){var s=r[e.name](),l=r.pstyle("border-width").pfValue,u=2*r.padding();return s+l+u}else return 1},ja["rendered"+e.uppercaseName]=function(){var r=this[0];if(r){var i=r[e.name]();return i*this.cy().zoom()}},ja["rendered"+e.uppercaseOuterName]=function(){var r=this[0];if(r){var i=r[e.outerName]();return i*this.cy().zoom()}}};gv({name:"width"});gv({name:"height"});Ao.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Ao.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Ao.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Z1=Ao,Q1=function(e,n){if(e.isEdge())return n(e)},J1=function(e,n){if(e.isEdge()){var r=e.cy();return ol(n(e),r.zoom(),r.pan())}},ex=function(e,n){if(e.isEdge()){var r=e.cy(),i=r.pan(),a=r.zoom();return n(e).map(function(o){return ol(o,a,i)})}},tx=function(e){return e.renderer().getControlPoints(e)},nx=function(e){return e.renderer().getSegmentPoints(e)},rx=function(e){return e.renderer().getSourceEndpoint(e)},ix=function(e){return e.renderer().getTargetEndpoint(e)},ax=function(e){return e.renderer().getEdgeMidpoint(e)},Hf={controlPoints:{get:tx,mult:!0},segmentPoints:{get:nx,mult:!0},sourceEndpoint:{get:rx},targetEndpoint:{get:ix},midpoint:{get:ax}},ox=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},sx=Object.keys(Hf).reduce(function(t,e){var n=Hf[e],r=ox(e);return t[e]=function(){return Q1(this,n.get)},n.mult?t[r]=function(){return ex(this,n.get)}:t[r]=function(){return J1(this,n.get)},t},{}),lx=Je({},j1,Y1,Z1,sx);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var mv=function(e,n){this.recycle(e,n)};function Ra(){return!1}function rs(){return!0}mv.prototype={instanceString:function(){return"event"},recycle:function(e,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ra,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?rs:Ra):e!=null&&e.type?n=e:this.type=e,n!=null&&(this.originalEvent=n.originalEvent,this.type=n.type!=null?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var r=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:r.x*i+a.x,y:r.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=rs;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=rs;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=rs,this.stopPropagation()},isDefaultPrevented:Ra,isPropagationStopped:Ra,isImmediatePropagationStopped:Ra};var yv=/^([^.]+)(\.(?:[^.]+))?$/,ux=".*",bv={qualifierCompare:function(e,n){return e===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},$f=Object.keys(bv),cx={};function dl(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cx,e=arguments.length>1?arguments[1]:void 0,n=0;n<$f.length;n++){var r=$f[n];this[r]=t[r]||bv[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Zr=dl.prototype,wv=function(e,n,r,i,a,o,s){Rt(i)&&(a=i,i=null),s&&(o==null?o=s:o=Je({},o,s));for(var l=Tt(r)?r:r.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!Gr(c)){var f=c.match(yv);if(f){var v=f[1],g=f[2]?f[2]:null,h=n(e,c,v,g,i,a,o);if(h===!1)break}}}},Vf=function(e,n){return e.addEventFields(e.context,n),new mv(n.type,n)},fx=function(e,n,r){if(Om(r)){n(e,r);return}else if(gt(r)){n(e,Vf(e,r));return}for(var i=Tt(r)?r:r.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!Gr(o)){var s=o.match(yv);if(s){var l=s[1],u=s[2]?s[2]:null,c=Vf(e,{type:l,namespace:u,target:e.context});n(e,c)}}}};Zr.on=Zr.addListener=function(t,e,n,r,i){return wv(this,function(a,o,s,l,u,c,f){Rt(c)&&a.listeners.push({event:o,callback:c,type:s,namespace:l,qualifier:u,conf:f})},t,e,n,r,i),this};Zr.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})};Zr.removeListener=Zr.off=function(t,e,n,r){var i=this;this.emitting!==0&&(this.listeners=Vy(this.listeners));for(var a=this.listeners,o=function(u){var c=a[u];wv(i,function(f,v,g,h,m,w){if((c.type===g||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!m||f.qualifierCompare(c.qualifier,m))&&(!w||c.callback===w))return a.splice(u,1),!1},t,e,n,r)},s=a.length-1;s>=0;s--)o(s);return this};Zr.removeAllListeners=function(){return this.removeListener("*")};Zr.emit=Zr.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,Tt(e)||(e=[e]),fx(this,function(a,o){n!=null&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],i=r.length);for(var s=function(c){var f=r[c];if(f.type===o.type&&(!f.namespace||f.namespace===o.namespace||f.namespace===ux)&&a.eventMatches(a.context,f,o)){var v=[o];e!=null&&Wy(v,e),a.beforeEmit(a.context,f,o),f.conf&&f.conf.one&&(a.listeners=a.listeners.filter(function(m){return m!==f}));var g=a.callbackContext(a.context,f,o),h=f.callback.apply(g,v);a.afterEmit(a.context,f,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<i;l++)s(l);a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},t),this.emitting--,this};var dx={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&Co(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e.cy(),n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e},beforeEmit:function(e,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},is=function(e){return Xe(e)?new Xr(e):e},xv={createEmitter:function(){for(var e=0;e<this.length;e++){var n=this[e],r=n._private;r.emitter||(r.emitter=new dl(dx,n))}return this},emitter:function(){return this._private.emitter},on:function(e,n,r){for(var i=is(n),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,r)}return this},removeListener:function(e,n,r){for(var i=is(n),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var n=this[e];n.emitter().removeAllListeners()}return this},one:function(e,n,r){for(var i=is(n),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,r)}return this},once:function(e,n,r){for(var i=is(n),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,r,{once:!0,onceCollection:this})}},emit:function(e,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().emit(e,n)}return this},emitAndNotify:function(e,n){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,n),this}};wt.eventAliasesOn(xv);var Ev={nodes:function(e){return this.filter(function(n){return n.isNode()}).filter(e)},edges:function(e){return this.filter(function(n){return n.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),n=this.spawn(),r=0;r<this.length;r++){var i=this[r];i.isNode()?e.push(i):n.push(i)}return{nodes:e,edges:n}},filter:function(e,n){if(e===void 0)return this;if(Xe(e)||Ln(e))return new Xr(e).filter(this);if(Rt(e)){for(var r=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=n?e.apply(n,[o,a,i]):e(o,a,i);s&&r.push(o)}return r}return this.spawn()},not:function(e){if(e){Xe(e)&&(e=this.filter(e));for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r],a=e.has(i);a||n.push(i)}return n}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Xe(e)){var n=e;return this.filter(n)}for(var r=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,l=o?a:i,u=0;u<s.length;u++){var c=s[u];l.has(c)&&r.push(c)}return r},xor:function(e){var n=this._private.cy;Xe(e)&&(e=n.$(e));var r=this.spawn(),i=this,a=e,o=function(l,u){for(var c=0;c<l.length;c++){var f=l[c],v=f._private.data.id,g=u.hasElementWithId(v);g||r.push(f)}};return o(i,a),o(a,i),r},diff:function(e){var n=this._private.cy;Xe(e)&&(e=n.$(e));var r=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,l=function(c,f,v){for(var g=0;g<c.length;g++){var h=c[g],m=h._private.data.id,w=f.hasElementWithId(m);w?a.merge(h):v.push(h)}};return l(o,s,r),l(s,o,i),{left:r,right:i,both:a}},add:function(e){var n=this._private.cy;if(!e)return this;if(Xe(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var n=this._private,r=n.cy;if(!e)return this;if(e&&Xe(e)){var i=e;e=r.mutableElements().filter(i)}for(var a=n.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!a.has(l);if(u){var c=this.length++;this[c]=s,a.set(l,{ele:s,index:c})}}return this},unmergeAt:function(e){var n=this[e],r=n.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(r);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,a.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var n=this._private,r=e._private.data.id,i=n.map,a=i.get(r);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(e&&Xe(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var n=this.length-1;n>=0;n--){var r=this[n];e(r)&&this.unmergeAt(n)}return this},map:function(e,n){for(var r=[],i=this,a=0;a<i.length;a++){var o=i[a],s=n?e.apply(n,[o,a,i]):e(o,a,i);r.push(s)}return r},reduce:function(e,n){for(var r=n,i=this,a=0;a<i.length;a++)r=e(r,i[a],a,i);return r},max:function(e,n){for(var r=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],l=n?e.apply(n,[s,o,a]):e(s,o,a);l>r&&(r=l,i=s)}return{value:r,ele:i}},min:function(e,n){for(var r=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],l=n?e.apply(n,[s,o,a]):e(s,o,a);l<r&&(r=l,i=s)}return{value:r,ele:i}}},yt=Ev;yt.u=yt["|"]=yt["+"]=yt.union=yt.or=yt.add;yt["\\"]=yt["!"]=yt["-"]=yt.difference=yt.relativeComplement=yt.subtract=yt.not;yt.n=yt["&"]=yt["."]=yt.and=yt.intersection=yt.intersect;yt["^"]=yt["(+)"]=yt["(-)"]=yt.symmetricDifference=yt.symdiff=yt.xor;yt.fnFilter=yt.filterFn=yt.stdFilter=yt.filter;yt.complement=yt.abscomp=yt.absoluteComplement;var hx={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Cv=function(e,n){var r=e.cy(),i=r.hasCompoundNodes();function a(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Ju:0}var o=a(e)-a(n);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var l=s(e)-s(n);if(l!==0)return l;var u=e.pstyle("z-index").value-n.pstyle("z-index").value;return u!==0?u:e.poolIndex()-n.poolIndex()},Vs={forEach:function(e,n){if(Rt(e))for(var r=this.length,i=0;i<r;i++){var a=this[i],o=n?e.apply(n,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e},slice:function(e,n){var r=[],i=this.length;n==null&&(n=i),e==null&&(e=0),e<0&&(e=i+e),n<0&&(n=i+n);for(var a=e;a>=0&&a<n&&a<i;a++)r.push(this[a]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Rt(e))return this;var n=this.toArray().sort(e);return this.spawn(n)},sortByZIndex:function(){return this.sort(Cv)},zDepth:function(){var e=this[0];if(e){var n=e._private,r=n.group;if(r==="nodes"){var i=n.data.parent?e.parents().size():0;return e.isParent()?i:Ju-1}else{var a=n.source,o=n.target,s=a.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};Vs.each=Vs.forEach;var vx=function(){var e="undefined",n=(typeof Symbol>"u"?"undefined":jt(Symbol))!=e&&jt(Symbol.iterator)!=e;n&&(Vs[Symbol.iterator]=function(){var r=this,i={value:void 0,done:!1},a=0,o=this.length;return bh({next:function(){return a<o?i.value=r[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};vx();var px=Qt({nodeDimensionsIncludeLabels:!1}),Cs={layoutDimensions:function(e){e=px(e);var n;if(!this.takesUpSpace())n={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();n={w:r.w,h:r.h}}else n={w:this.outerWidth(),h:this.outerHeight()};return(n.w===0||n.h===0)&&(n.w=n.h=1),n},layoutPositions:function(e,n,r){var i=this.nodes().filter(function(k){return!k.isParent()}),a=this.cy(),o=n.eles,s=function(A){return A.id()},l=ao(r,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(A,p,P){var _={x:p.x1+p.w/2,y:p.y1+p.h/2},O={x:(P.x-_.x)*A,y:(P.y-_.y)*A};return{x:_.x+O.x,y:_.y+O.y}},c=n.spacingFactor&&n.spacingFactor!==1,f=function(){if(!c)return null;for(var A=Tn(),p=0;p<i.length;p++){var P=i[p],_=l(P,p);y0(A,_.x,_.y)}return A},v=f(),g=ao(function(k,A){var p=l(k,A);if(c){var P=Math.abs(n.spacingFactor);p=u(P,v,p)}return n.transform!=null&&(p=n.transform(k,p)),p},s);if(n.animate){for(var h=0;h<i.length;h++){var m=i[h],w=g(m,h),b=n.animateFilter==null||n.animateFilter(m,h);if(b){var E=m.animation({position:w,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(E)}else m.position(w)}if(n.fit){var C=a.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});e.animations.push(C)}else if(n.zoom!==void 0&&n.pan!==void 0){var x=a.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(x)}e.animations.forEach(function(k){return k.play()}),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),fa.all(e.animations.map(function(k){return k.promise()})).then(function(){e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(g),n.fit&&a.fit(n.eles,n.padding),n.zoom!=null&&a.zoom(n.zoom),n.pan&&a.pan(n.pan),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.makeLayout(Je({},e,{eles:this}))}};Cs.createLayout=Cs.makeLayout=Cs.layout;function Sv(t,e,n){var r=n._private,i=r.styleCache=r.styleCache||[],a;return(a=i[t])!=null||(a=i[t]=e(n)),a}function hl(t,e){return t=jr(t),function(r){return Sv(t,e,r)}}function vl(t,e){t=jr(t);var n=function(i){return e.call(i)};return function(){var i=this[0];if(i)return Sv(t,n,i)}}var rn={recalculateRenderedStyle:function(e){var n=this.cy(),r=n.renderer(),i=n.styleEnabled();return r&&i&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),n=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var r;r=this.spawnSelf().merge(this.descendants()).merge(this.parents()),r.merge(r.connectedEdges()),r.forEach(n)}else this.forEach(function(i){n(i),i.connectedEdges().forEach(n)});return this},updateStyle:function(e){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching()){var r=n._private.batchStyleEles;return r.merge(this),this}var i=n.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var n=0;n<this.length;n++){var r=this[n];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this[0],i=r.cy();if(i.styleEnabled()&&r){r._private.styleDirty&&(r._private.styleDirty=!1,i.style().apply(r));var a=r._private.style[e];return a??(n?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var n=this[0];if(n.cy().styleEnabled()&&n){var r=n.pstyle(e);return r.pfValue!==void 0?r.pfValue:r.value}},numericStyleUnits:function(e){var n=this[0];if(n.cy().styleEnabled()&&n)return n.pstyle(e).units},renderedStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=this[0];if(r)return n.style().getRenderedStyle(r,e)},style:function(e,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,a=r.style();if(gt(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(Xe(e))if(n===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,n,i),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?a.getRawStyle(l):void 0}return this},removeStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,r)}else{e=e.split(/\s+/);for(var l=0;l<a.length;l++){var u=a[l];i.removeBypasses(u,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var n=e.hasCompoundNodes(),r=this[0];if(r){var i=r._private,a=r.pstyle("opacity").value;if(!n)return a;var o=i.data.parent?r.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;a=u*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0],r=n.cy().hasCompoundNodes();if(n)return r?n.effectiveOpacity()===0:n.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0];return!!n._private.backgrounding}};function Xl(t,e){var n=t._private,r=n.data.parent?t.parents():null;if(r)for(var i=0;i<r.length;i++){var a=r[i];if(!e(a))return!1}return!0}function fc(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||Xl(a,r);var l=s.source,u=s.target;return n(l)&&(!o||Xl(l,n))&&(l===u||n(u)&&(!o||Xl(u,n)))}}}var pa=hl("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});rn.takesUpSpace=vl("takesUpSpace",fc({ok:pa}));var gx=hl("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&pa(t)}),mx=hl("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&pa(t)});rn.interactive=vl("interactive",fc({ok:gx,parentOk:mx,edgeOkViaNode:pa}));rn.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var yx=hl("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&pa(t)}),bx=pa;rn.visible=vl("visible",fc({ok:yx,edgeOkViaNode:bx}));rn.hidden=function(){var t=this[0];if(t)return!t.visible()};rn.isBundledBezier=vl("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});rn.bypass=rn.css=rn.style;rn.renderedCss=rn.renderedStyle;rn.removeBypass=rn.removeCss=rn.removeStyle;rn.pstyle=rn.parsedStyle;var qr={};function qf(t){return function(){var e=arguments,n=[];if(e.length===2){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(e.length===1&&Rt(e[0])){var a=e[0];this.on(t.event,a)}else if(e.length===0||e.length===1&&Tt(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&n.push(l))}var v=this.spawn(n);v.updateStyle(),v.emit(t.event),o&&v.emit(o)}return this}}function ga(t){qr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(n!==void 0)return n}return e._private[t.field]}},qr[t.on]=qf({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),qr[t.off]=qf({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ga({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ga({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ga({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ga({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});qr.deselect=qr.unselect;qr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};ga({field:"active",on:"activate",off:"unactivate"});ga({field:"pannable",on:"panify",off:"unpanify"});qr.inactive=function(){var t=this[0];if(t)return!t._private.active};var fn={},Wf=function(e){return function(r){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),c=0;c<u.length;c++){var f=u[c],v=f.source(),g=f.target();if(e.noIncomingEdges&&g===s&&v!==s||e.noOutgoingEdges&&v===s&&g!==s){l=!0;break}}l||a.push(s)}}return this.spawn(a,!0).filter(r)}},Uf=function(e){return function(n){for(var r=this,i=[],a=0;a<r.length;a++){var o=r[a];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),f=u.target();e.outgoing&&c===o?(i.push(u),i.push(f)):e.incoming&&f===o&&(i.push(u),i.push(c))}}return this.spawn(i,!0).filter(n)}},Gf=function(e){return function(n){for(var r=this,i=[],a={};;){var o=e.outgoing?r.outgoers():r.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],c=u.id();a[c]||(a[c]=!0,i.push(u),s=!0)}if(!s)break;r=o}return this.spawn(i,!0).filter(n)}};fn.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Je(fn,{roots:Wf({noIncomingEdges:!0}),leaves:Wf({noOutgoingEdges:!0}),outgoers:$n(Uf({outgoing:!0}),"outgoers"),successors:Gf({outgoing:!0}),incomers:$n(Uf({incoming:!0}),"incomers"),predecessors:Gf({incoming:!0})});Je(fn,{neighborhood:$n(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});fn.neighbourhood=fn.neighborhood;fn.closedNeighbourhood=fn.closedNeighborhood;fn.openNeighbourhood=fn.openNeighborhood;Je(fn,{source:$n(function(e){var n=this[0],r;return n&&(r=n._private.source||n.cy().collection()),r&&e?r.filter(e):r},"source"),target:$n(function(e){var n=this[0],r;return n&&(r=n._private.target||n.cy().collection()),r&&e?r.filter(e):r},"target"),sources:jf({attr:"source"}),targets:jf({attr:"target"})});function jf(t){return function(n){for(var r=[],i=0;i<this.length;i++){var a=this[i],o=a._private[t.attr];o&&r.push(o)}return this.spawn(r,!0).filter(n)}}Je(fn,{edgesWith:$n(Kf(),"edgesWith"),edgesTo:$n(Kf({thisIsSrc:!0}),"edgesTo")});function Kf(t){return function(n){var r=[],i=this._private.cy,a=t||{};Xe(n)&&(n=i.$(n));for(var o=0;o<n.length;o++)for(var s=n[o]._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data,f=this.hasElementWithId(c.source)&&n.hasElementWithId(c.target),v=n.hasElementWithId(c.source)&&this.hasElementWithId(c.target),g=f||v;g&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!f||a.thisIsTgt&&!v)||r.push(u))}return this.spawn(r,!0)}}Je(fn,{connectedEdges:$n(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:$n(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:$n(Xf(),"parallelEdges"),codirectedEdges:$n(Xf({codirected:!0}),"codirectedEdges")});function Xf(t){var e={codirected:!1};return t=Je({},e,t),function(r){for(var i=[],a=this.edges(),o=t,s=0;s<a.length;s++)for(var l=a[s],u=l._private,c=u.source,f=c._private.data.id,v=u.data.target,g=c._private.edges,h=0;h<g.length;h++){var m=g[h],w=m._private.data,b=w.target,E=w.source,C=b===v&&E===f,x=f===b&&v===E;(o.codirected&&C||!o.codirected&&(C||x))&&i.push(m)}return this.spawn(i,!0).filter(r)}}Je(fn,{components:function(e){var n=this,r=n.cy(),i=r.collection(),a=e==null?n.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(c,f){i.merge(c),a.unmerge(c),f.merge(c)};if(a.empty())return n.spawn();var l=function(){var c=r.collection();o.push(c);var f=a[0];s(f,c),n.bfs({directed:!1,roots:f,visit:function(g){return s(g,c)}}),c.forEach(function(v){v.connectedEdges().forEach(function(g){n.has(g)&&c.has(g.source())&&c.has(g.target())&&c.merge(g)})})};do l();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});fn.componentsOf=fn.components;var an=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Ot("A collection must have a reference to the core");return}var a=new cr,o=!1;if(!n)n=[];else if(n.length>0&&gt(n[0])&&!Co(n[0])){o=!0;for(var s=[],l=new ca,u=0,c=n.length;u<c;u++){var f=n[u];f.data==null&&(f.data={});var v=f.data;if(v.id==null)v.id=Nh();else if(e.hasElementWithId(v.id)||l.has(v.id))continue;var g=new al(e,f,!1);s.push(g),l.add(v.id)}n=s}this.length=0;for(var h=0,m=n.length;h<m;h++){var w=n[h][0];if(w!=null){var b=w._private.data.id;(!r||!a.has(b))&&(r&&a.set(b,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(E){this.lazyMap=E},rebuildMap:function(){for(var C=this.lazyMap=new cr,x=this.eles,k=0;k<x.length;k++){var A=x[k];C.set(A.id(),{index:k,ele:A})}}},r&&(this._private.map=a),o&&!i&&this.restore()},_t=al.prototype=an.prototype=Object.create(Array.prototype);_t.instanceString=function(){return"collection"};_t.spawn=function(t,e){return new an(this.cy(),t,e)};_t.spawnSelf=function(){return this.spawn(this)};_t.cy=function(){return this._private.cy};_t.renderer=function(){return this._private.cy.renderer()};_t.element=function(){return this[0]};_t.collection=function(){return Eh(this)?this:new an(this._private.cy,[this])};_t.unique=function(){return new an(this._private.cy,this,!0)};_t.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};_t.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new an(e)};_t.$id=_t.getElementById;_t.poolIndex=function(){var t=this._private.cy,e=t._private.elements,n=this[0]._private.data.id;return e._private.map.get(n).index};_t.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};_t.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};_t.json=function(t){var e=this.element(),n=this.cy();if(e==null&&t)return this;if(e!=null){var r=e._private;if(gt(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var a=!1,o={},s=t.data.source,l=t.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),l!=null&&l!=i.target&&(o.target=""+l,a=!0),a&&(e=e.move(o))}else{var u="parent"in t.data,c=t.data.parent;u&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(m,w,b){var E=t[m];E!=null&&E!==r[m]&&(E?e[w]():e[b]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),n.endBatch(),this}else if(t===void 0){var v={data:ur(r.data),position:ur(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};v.classes="";var g=0;return r.classes.forEach(function(h){return v.classes+=g++===0?h:" "+h}),v}}};_t.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t};_t.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),a=new al(t,i,!1);e.push(a)}return new an(t,e)};_t.copy=_t.clone;_t.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),i=r._private,a=[],o=[],s,l=0,u=n.length;l<u;l++){var c=n[l];e&&!c.removed()||(c.isNode()?a.push(c):o.push(c))}s=a.concat(o);var f,v=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var g=s[f],h=g._private,m=h.data;if(g.clearTraversalCache(),!(!e&&!h.removed)){if(m.id===void 0)m.id=Nh();else if(Fe(m.id))m.id=""+m.id;else if(Gr(m.id)||!Xe(m.id)){Ot("Can not create element with invalid string ID `"+m.id+"`"),v();continue}else if(r.hasElementWithId(m.id)){Ot("Can not create second element with ID `"+m.id+"`"),v();continue}}var w=m.id;if(g.isNode()){var b=h.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(g.isEdge()){for(var E=g,C=["source","target"],x=C.length,k=!1,A=0;A<x;A++){var p=C[A],P=m[p];Fe(P)&&(P=m[p]=""+m[p]),P==null||P===""?(Ot("Can not create edge `"+w+"` with unspecified "+p),k=!0):r.hasElementWithId(P)||(Ot("Can not create edge `"+w+"` with nonexistant "+p+" `"+P+"`"),k=!0)}if(k){v();continue}var _=r.getElementById(m.source),O=r.getElementById(m.target);_.same(O)?_._private.edges.push(E):(_._private.edges.push(E),O._private.edges.push(E)),E._private.source=_,E._private.target=O}h.map=new cr,h.map.set(w,{ele:g,index:0}),h.removed=!1,e&&r.addToPool(g)}for(var D=0;D<a.length;D++){var L=a[D],N=L._private.data;Fe(N.parent)&&(N.parent=""+N.parent);var R=N.parent,z=R!=null;if(z||L._private.parent){var H=L._private.parent?r.collection().merge(L._private.parent):r.getElementById(R);if(H.empty())N.parent=void 0;else if(H[0].removed())xt("Node added with missing parent, reference to parent removed"),N.parent=void 0,L._private.parent=null;else{for(var W=!1,X=H;!X.empty();){if(L.same(X)){W=!0,N.parent=void 0;break}X=X.parent()}W||(H[0]._private.children.push(L),L._private.parent=H[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var re=s.length===n.length?n:new an(r,s),ae=0;ae<re.length;ae++){var J=re[ae];J.isNode()||(J.parallelEdges().clearTraversalCache(),J.source().clearTraversalCache(),J.target().clearTraversalCache())}var $;i.hasCompoundNodes?$=r.collection().merge(re).merge(re.connectedNodes()).merge(re.parent()):$=re,$.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?re.emitAndNotify("add"):e&&re.emit("add")}return n};_t.removed=function(){var t=this[0];return t&&t._private.removed};_t.inside=function(){var t=this[0];return t&&!t._private.removed};_t.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],i={},a=n._private.cy;function o(R){for(var z=R._private.edges,H=0;H<z.length;H++)l(z[H])}function s(R){for(var z=R._private.children,H=0;H<z.length;H++)l(z[H])}function l(R){var z=i[R.id()];e&&R.removed()||z||(i[R.id()]=!0,R.isNode()?(r.push(R),o(R),s(R)):r.unshift(R))}for(var u=0,c=n.length;u<c;u++){var f=n[u];l(f)}function v(R,z){var H=R._private.edges;Kr(H,z),R.clearTraversalCache()}function g(R){R.clearTraversalCache()}var h=[];h.ids={};function m(R,z){z=z[0],R=R[0];var H=R._private.children,W=R.id();Kr(H,z),z._private.parent=null,h.ids[W]||(h.ids[W]=!0,h.push(R))}n.dirtyCompoundBoundsCache(),e&&a.removeFromPool(r);for(var w=0;w<r.length;w++){var b=r[w];if(b.isEdge()){var E=b.source()[0],C=b.target()[0];v(E,b),v(C,b);for(var x=b.parallelEdges(),k=0;k<x.length;k++){var A=x[k];g(A),A.isBundledBezier()&&A.dirtyBoundingBoxCache()}}else{var p=b.parent();p.length!==0&&m(p,b)}e&&(b._private.removed=!0)}var P=a._private.elements;a._private.hasCompoundNodes=!1;for(var _=0;_<P.length;_++){var O=P[_];if(O.isParent()){a._private.hasCompoundNodes=!0;break}}var D=new an(this.cy(),r);D.size()>0&&(t?D.emitAndNotify("remove"):e&&D.emit("remove"));for(var L=0;L<h.length;L++){var N=h[L];(!e||!N.removed())&&N.updateStyle()}return D};_t.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,a=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var o=a(t.source),s=a(t.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){n.remove(r,i),n.emitAndNotify("moveout");for(var g=0;g<n.length;g++){var h=n[g],m=h._private.data;h.isEdge()&&(l&&(m.source=o),u&&(m.target=s))}n.restore(r,i)}),n.emitAndNotify("move"))}else if(t.parent!==void 0){var c=a(t.parent),f=c===null||e.hasElementWithId(c);if(f){var v=c===null?void 0:c;e.batch(function(){var g=n.remove(r,i);g.emitAndNotify("moveout");for(var h=0;h<n.length;h++){var m=n[h],w=m._private.data;m.isNode()&&(w.parent=v)}g.restore(r,i)}),n.emitAndNotify("move")}}return this};[Yh,M1,Es,Vr,na,G1,fl,lx,xv,Ev,hx,Vs,Cs,rn,qr,fn].forEach(function(t){Je(_t,t)});var wx={add:function(e){var n,r=this;if(Ln(e)){var i=e;if(i._private.cy===r)n=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}n=new an(r,a)}}else if(Tt(e)){var l=e;n=new an(r,l)}else if(gt(e)&&(Tt(e.nodes)||Tt(e.edges))){for(var u=e,c=[],f=["nodes","edges"],v=0,g=f.length;v<g;v++){var h=f[v],m=u[h];if(Tt(m))for(var w=0,b=m.length;w<b;w++){var E=Je({group:h},m[w]);c.push(E)}}n=new an(r,c)}else{var C=e;n=new al(r,C).collection()}return n},remove:function(e){if(!Ln(e)){if(Xe(e)){var n=e;e=this.$(n)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function xx(t,e,n,r){var i=4,a=.001,o=1e-7,s=10,l=11,u=1/(l-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var v=c?new Float32Array(l):new Array(l);function g(O,D){return 1-3*D+3*O}function h(O,D){return 3*D-6*O}function m(O){return 3*O}function w(O,D,L){return((g(D,L)*O+h(D,L))*O+m(D))*O}function b(O,D,L){return 3*g(D,L)*O*O+2*h(D,L)*O+m(D)}function E(O,D){for(var L=0;L<i;++L){var N=b(D,t,n);if(N===0)return D;var R=w(D,t,n)-O;D-=R/N}return D}function C(){for(var O=0;O<l;++O)v[O]=w(O*u,t,n)}function x(O,D,L){var N,R,z=0;do R=D+(L-D)/2,N=w(R,t,n)-O,N>0?L=R:D=R;while(Math.abs(N)>o&&++z<s);return R}function k(O){for(var D=0,L=1,N=l-1;L!==N&&v[L]<=O;++L)D+=u;--L;var R=(O-v[L])/(v[L+1]-v[L]),z=D+R*u,H=b(z,t,n);return H>=a?E(O,z):H===0?z:x(O,D,D+u)}var A=!1;function p(){A=!0,(t!==e||n!==r)&&C()}var P=function(D){return A||p(),t===e&&n===r?D:D===0?0:D===1?1:w(k(D),e,r)};P.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var _="generateBezier("+[t,e,n,r]+")";return P.toString=function(){return _},P}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Ex=function(){function t(r){return-r.tension*r.x-r.friction*r.v}function e(r,i,a){var o={x:r.x+a.dx*i,v:r.v+a.dv*i,tension:r.tension,friction:r.friction};return{dx:o.v,dv:t(o)}}function n(r,i){var a={dx:r.v,dv:t(r)},o=e(r,i*.5,a),s=e(r,i*.5,o),l=e(r,i,s),u=1/6*(a.dx+2*(o.dx+s.dx)+l.dx),c=1/6*(a.dv+2*(o.dv+s.dv)+l.dv);return r.x=r.x+u*i,r.v=r.v+c*i,r}return function r(i,a,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,f=16/1e3,v,g,h;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,v=o!==null,v?(u=r(i,a),g=u/o*f):g=f;h=n(h||s,g),l.push(1+h.x),u+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return v?function(m){return l[m*(l.length-1)|0]}:u}}(),At=function(e,n,r,i){var a=xx(e,n,r,i);return function(o,s,l){return o+(s-o)*a(l)}},Ss={linear:function(e,n,r){return e+(n-e)*r},ease:At(.25,.1,.25,1),"ease-in":At(.42,0,1,1),"ease-out":At(0,0,.58,1),"ease-in-out":At(.42,0,.58,1),"ease-in-sine":At(.47,0,.745,.715),"ease-out-sine":At(.39,.575,.565,1),"ease-in-out-sine":At(.445,.05,.55,.95),"ease-in-quad":At(.55,.085,.68,.53),"ease-out-quad":At(.25,.46,.45,.94),"ease-in-out-quad":At(.455,.03,.515,.955),"ease-in-cubic":At(.55,.055,.675,.19),"ease-out-cubic":At(.215,.61,.355,1),"ease-in-out-cubic":At(.645,.045,.355,1),"ease-in-quart":At(.895,.03,.685,.22),"ease-out-quart":At(.165,.84,.44,1),"ease-in-out-quart":At(.77,0,.175,1),"ease-in-quint":At(.755,.05,.855,.06),"ease-out-quint":At(.23,1,.32,1),"ease-in-out-quint":At(.86,0,.07,1),"ease-in-expo":At(.95,.05,.795,.035),"ease-out-expo":At(.19,1,.22,1),"ease-in-out-expo":At(1,0,0,1),"ease-in-circ":At(.6,.04,.98,.335),"ease-out-circ":At(.075,.82,.165,1),"ease-in-out-circ":At(.785,.135,.15,.86),spring:function(e,n,r){if(r===0)return Ss.linear;var i=Ex(e,n,r);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":At};function Yf(t,e,n,r,i){if(r===1||e===n)return n;var a=i(e,n,r);return t==null||((t.roundValue||t.color)&&(a=Math.round(a)),t.min!==void 0&&(a=Math.max(a,t.min)),t.max!==void 0&&(a=Math.min(a,t.max))),a}function Zf(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function zi(t,e,n,r,i){var a=i!=null?i.type:null;n<0?n=0:n>1&&(n=1);var o=Zf(t,i),s=Zf(e,i);if(Fe(o)&&Fe(s))return Yf(a,o,s,n,r);if(Tt(o)&&Tt(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],f=s[u];if(c!=null&&f!=null){var v=Yf(a,c,f,n,r);l.push(v)}else l.push(f)}return l}}function Cx(t,e,n,r){var i=!r,a=t._private,o=e._private,s=o.easing,l=o.startTime,u=r?t:t.cy(),c=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=Ss.linear;else{var f;if(Xe(s)){var v=c.parse("transition-timing-function",s);f=v.value}else f=s;var g,h;Xe(f)?(g=f,h=[]):(g=f[1],h=f.slice(2).map(function(re){return+re})),h.length>0?(g==="spring"&&h.push(o.duration),o.easingImpl=Ss[g].apply(null,h)):o.easingImpl=Ss[g]}var m=o.easingImpl,w;if(o.duration===0?w=1:w=(n-l)/o.duration,o.applying&&(w=o.progress),w<0?w=0:w>1&&(w=1),o.delay==null){var b=o.startPosition,E=o.position;if(E&&i&&!t.locked()){var C={};Na(b.x,E.x)&&(C.x=zi(b.x,E.x,w,m)),Na(b.y,E.y)&&(C.y=zi(b.y,E.y,w,m)),t.position(C)}var x=o.startPan,k=o.pan,A=a.pan,p=k!=null&&r;p&&(Na(x.x,k.x)&&(A.x=zi(x.x,k.x,w,m)),Na(x.y,k.y)&&(A.y=zi(x.y,k.y,w,m)),t.emit("pan"));var P=o.startZoom,_=o.zoom,O=_!=null&&r;O&&(Na(P,_)&&(a.zoom=uo(a.minZoom,zi(P,_,w,m),a.maxZoom)),t.emit("zoom")),(p||O)&&t.emit("viewport");var D=o.style;if(D&&D.length>0&&i){for(var L=0;L<D.length;L++){var N=D[L],R=N.name,z=N,H=o.startStyle[R],W=c.properties[H.name],X=zi(H,z,w,m,W);c.overrideBypass(t,R,X)}t.emit("style")}}return o.progress=w,w}function Na(t,e){return t==null||e==null?!1:Fe(t)&&Fe(e)?!0:!!(t&&e)}function Sx(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function Qf(t,e){var n=e._private.aniEles,r=[];function i(c,f){var v=c._private,g=v.animation.current,h=v.animation.queue,m=!1;if(g.length===0){var w=h.shift();w&&g.push(w)}for(var b=function(A){for(var p=A.length-1;p>=0;p--){var P=A[p];P()}A.splice(0,A.length)},E=g.length-1;E>=0;E--){var C=g[E],x=C._private;if(x.stopped){g.splice(E,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.frames);continue}!x.playing&&!x.applying||(x.playing&&x.applying&&(x.applying=!1),x.started||Sx(c,C,t),Cx(c,C,t,f),x.applying&&(x.applying=!1),b(x.frames),x.step!=null&&x.step(t),C.completed()&&(g.splice(E,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.completes)),m=!0)}return!f&&g.length===0&&h.length===0&&r.push(c),m}for(var a=!1,o=0;o<n.length;o++){var s=n[o],l=i(s);a=a||l}var u=i(e,!0);(a||u)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Tx={animate:wt.animate(),animation:wt.animation(),animated:wt.animated(),clearQueue:wt.clearQueue(),delay:wt.delay(),delayAnimation:wt.delayAnimation(),stop:wt.stop(),addToAnimationPool:function(e){var n=this;n.styleEnabled()&&n._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function n(){e._private.animationsRunning&&Ns(function(a){Qf(a,e),n()})}var r=e.renderer();r&&r.beforeRender?r.beforeRender(function(a,o){Qf(o,e)},r.beforeRenderPriorities.animations):n()}},kx={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&Co(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e,n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e}},as=function(e){return Xe(e)?new Xr(e):e},Tv={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new dl(kx,this)),this},emitter:function(){return this._private.emitter},on:function(e,n,r){return this.emitter().on(e,as(n),r),this},removeListener:function(e,n,r){return this.emitter().removeListener(e,as(n),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,n,r){return this.emitter().one(e,as(n),r),this},once:function(e,n,r){return this.emitter().one(e,as(n),r),this},emit:function(e,n){return this.emitter().emit(e,n),this},emitAndNotify:function(e,n){return this.emit(e),this.notify(e,n),this}};wt.eventAliasesOn(Tv);var _u={png:function(e){var n=this._private.renderer;return e=e||{},n.png(e)},jpg:function(e){var n=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",n.jpg(e)}};_u.jpeg=_u.jpg;var Ts={layout:function(e){var n=this;if(e==null){Ot("Layout options must be specified to make a layout");return}if(e.name==null){Ot("A `name` must be specified to make a layout");return}var r=e.name,i=n.extension("layout",r);if(i==null){Ot("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Xe(e.eles)?a=n.$(e.eles):a=e.eles!=null?e.eles:n.$();var o=new i(Je({},e,{cy:n,eles:a}));return o}};Ts.createLayout=Ts.makeLayout=Ts.layout;var Ax={notify:function(e,n){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var i=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();n!=null&&i.merge(n);return}if(r.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,n)}},notifications:function(e){var n=this._private;return e===void 0?n.notificationsEnabled:(n.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(e.batchNotifications).forEach(function(r){var i=e.batchNotifications[r];i.empty()?n.notify(r):n.notify(r,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var n=this;return this.batch(function(){for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a],s=n.getElementById(a);s.data(o)}})}},_x=Qt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:12,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Iu={renderTo:function(e,n,r,i){var a=this._private.renderer;return a.renderTo(e,n,r,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var n=this,r=n.extension("renderer",e.name);if(r==null){Ot("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&xt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=_x(e);i.cy=n,n._private.renderer=new r(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var n=e.container();if(n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(r){var i=r._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Iu.invalidateDimensions=Iu.resize;var ks={collection:function(e,n){return Xe(e)?this.$(e):Ln(e)?e.collection():Tt(e)?(n||(n={}),new an(this,e,n.unique,n.removed)):new an(this)},nodes:function(e){var n=this.$(function(r){return r.isNode()});return e?n.filter(e):n},edges:function(e){var n=this.$(function(r){return r.isEdge()});return e?n.filter(e):n},$:function(e){var n=this._private.elements;return e?n.filter(e):n.spawnSelf()},mutableElements:function(){return this._private.elements}};ks.elements=ks.filter=ks.$;var hn={},Xa="t",Ix="f";hn.apply=function(t){for(var e=this,n=e._private,r=n.cy,i=r.collection(),a=0;a<t.length;a++){var o=t[a],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&i.push(o)}}return i};hn.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,a=r[i];if(a)return a;for(var o=[],s={},l=0;l<n.length;l++){var u=n[l],c=t[l]===Xa,f=e[l]===Xa,v=c!==f,g=u.mappedProperties.length>0;if(v||f&&g){var h=void 0;v&&g||v?h=u.properties:g&&(h=u.mappedProperties);for(var m=0;m<h.length;m++){for(var w=h[m],b=w.name,E=!1,C=l+1;C<n.length;C++){var x=n[C],k=e[C]===Xa;if(k&&(E=x.properties[w.name]!=null,E))break}!s[b]&&!E&&(s[b]=!0,o.push(b))}}}return r[i]=o,o};hn.getContextMeta=function(t){for(var e=this,n="",r,i=t._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(t);s?n+=Xa:n+=Ix}return r=e.getPropertiesDiff(i,n),t._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};hn.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},a=0;a<n.length;a++){var o=n[a],s=e[a]===Xa;if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];i[u.name]=u}}return r[e]=i,i};hn.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,a={},o=r.types,s=0;s<i.length;s++){var l=i[s],u=e[l],c=n.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var f=c.mapping,v=f.fnValue=u.value(n);if(v===f.prevFnValue)continue}var g=a[l]={prev:c};r.applyParsedProperty(n,u),g.next=n.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:a}};hn.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,a=function(ce,ve,De){return n.getPropertiesHash(ce,ve,De)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",l=t._private.style;r=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];e.styleKeys[c]=[Ui,Ua]}for(var f=function(ce,ve){return e.styleKeys[ve][0]=oo(ce,e.styleKeys[ve][0])},v=function(ce,ve){return e.styleKeys[ve][1]=so(ce,e.styleKeys[ve][1])},g=function(ce,ve){f(ce,ve),v(ce,ve)},h=function(ce,ve){for(var De=0;De<ce.length;De++){var Oe=ce.charCodeAt(De);f(Oe,ve),v(Oe,ve)}},m=2e9,w=function(ce){return-128<ce&&ce<128&&Math.floor(ce)!==ce?m-(ce*1024|0):ce},b=0;b<r.length;b++){var E=r[b],C=l[E];if(C!=null){var x=this.properties[E],k=x.type,A=x.groupKey,p=void 0;x.hashOverride!=null?p=x.hashOverride(t,C):C.pfValue!=null&&(p=C.pfValue);var P=x.enums==null?C.value:null,_=p!=null,O=P!=null,D=_||O,L=C.units;if(k.number&&D&&!k.multiple){var N=_?p:P;g(w(N),A),!_&&L!=null&&h(L,A)}else h(C.strValue,A)}}for(var R=[Ui,Ua],z=0;z<i.length;z++){var H=i[z],W=e.styleKeys[H];R[0]=oo(W[0],R[0]),R[1]=so(W[1],R[1])}e.styleKey=Ry(R[0],R[1]);var X=e.styleKeys;e.labelDimsKey=Nr(X.labelDimensions);var re=a(t,["label"],X.labelDimensions);if(e.labelKey=Nr(re),e.labelStyleKey=Nr(Yo(X.commonLabel,re)),!s){var ae=a(t,["source-label"],X.labelDimensions);e.sourceLabelKey=Nr(ae),e.sourceLabelStyleKey=Nr(Yo(X.commonLabel,ae));var J=a(t,["target-label"],X.labelDimensions);e.targetLabelKey=Nr(J),e.targetLabelStyleKey=Nr(Yo(X.commonLabel,J))}if(s){var $=e.styleKeys,U=$.nodeBody,G=$.nodeBorder,V=$.nodeOutline,Y=$.backgroundImage,ne=$.compound,se=$.pie,Z=[U,G,V,Y,ne,se].filter(function(K){return K!=null}).reduce(Yo,[Ui,Ua]);e.nodeKey=Nr(Z),e.hasPie=se!=null&&se[0]!==Ui&&se[1]!==Ua}return o!==e.styleKey};hn.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};hn.applyParsedProperty=function(t,e){var n=this,r=e,i=t._private.style,a,o=n.types,s=n.properties[r.name].type,l=r.bypass,u=i[r.name],c=u&&u.bypass,f=t._private,v="mapping",g=function(U){return U==null?null:U.pfValue!=null?U.pfValue:U.value},h=function(){var U=g(u),G=g(r);n.checkTriggers(t,r.name,U,G)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(r=e=this.parse(e.name,"bezier",l)),r.delete)return i[r.name]=void 0,h(),!0;if(r.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,h(),!0):!1:(h(),!0);if(r.deleteBypass)return u?u.bypass?(i[r.name]=u.bypassed,h(),!0):!1:(h(),!0);var m=function(){xt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case o.mapData:{for(var w=r.field.split("."),b=f.data,E=0;E<w.length&&b;E++){var C=w[E];b=b[C]}if(b==null)return m(),!1;var x;if(Fe(b)){var k=r.fieldMax-r.fieldMin;k===0?x=0:x=(b-r.fieldMin)/k}else return xt("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+b+"` for `"+t.id()+"` is non-numeric)"),!1;if(x<0?x=0:x>1&&(x=1),s.color){var A=r.valueMin[0],p=r.valueMax[0],P=r.valueMin[1],_=r.valueMax[1],O=r.valueMin[2],D=r.valueMax[2],L=r.valueMin[3]==null?1:r.valueMin[3],N=r.valueMax[3]==null?1:r.valueMax[3],R=[Math.round(A+(p-A)*x),Math.round(P+(_-P)*x),Math.round(O+(D-O)*x),Math.round(L+(N-L)*x)];a={bypass:r.bypass,name:r.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(s.number){var z=r.valueMin+(r.valueMax-r.valueMin)*x;a=this.parse(r.name,z,r.bypass,v)}else return!1;if(!a)return m(),!1;a.mapping=r,r=a;break}case o.data:{for(var H=r.field.split("."),W=f.data,X=0;X<H.length&&W;X++){var re=H[X];W=W[re]}if(W!=null&&(a=this.parse(r.name,W,r.bypass,v)),!a)return m(),!1;a.mapping=r,r=a;break}case o.fn:{var ae=r.value,J=r.fnValue!=null?r.fnValue:ae(t);if(r.prevFnValue=J,J==null)return xt("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+t.id()+"` is null)"),!1;if(a=this.parse(r.name,J,r.bypass,v),!a)return xt("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+t.id()+"` is invalid)"),!1;a.mapping=ur(r),r=a;break}case void 0:break;default:return!1}return l?(c?r.bypassed=u.bypassed:r.bypassed=u,i[r.name]=r):c?u.bypassed=r:i[r.name]=r,h(),!0};hn.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!e)r._private.style={};else for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];l!=null&&(l.bypass?l.bypassed=null:i[s]=null)}}};hn.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};hn.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],f=t.pstyle(c),v=e[c];if(v){var g=v.prev,h=g,m=v.next!=null?v.next:f,w=!1,b=void 0,E=1e-6;h&&(Fe(h.pfValue)&&Fe(m.pfValue)?(w=m.pfValue-h.pfValue,b=h.pfValue+E*w):Fe(h.value)&&Fe(m.value)?(w=m.value-h.value,b=h.value+E*w):Tt(h.value)&&Tt(m.value)&&(w=h.value[0]!==m.value[0]||h.value[1]!==m.value[1]||h.value[2]!==m.value[2],b=h.strValue),w&&(s[c]=m.strValue,this.applyBypass(t,c,b),l=!0))}}if(!l)return;r.transitioning=!0,new fa(function(C){o>0?t.delayAnimation(o).play().promise().then(C):C()}).then(function(){return t.animation({style:s,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)};hn.checkTrigger=function(t,e,n,r,i,a){var o=this.properties[e],s=i(o);s!=null&&s(n,r)&&a(o)};hn.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",t)})};hn.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(n==="bezier"||r==="bezier")&&t.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()}),i.triggersBoundsOfConnectedEdges&&e==="display"&&(n==="none"||r==="none")&&t.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};hn.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)};var _o={};_o.applyBypass=function(t,e,n,r){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(n!==void 0)for(var s=0;s<i.properties.length;s++){var l=i.properties[s],u=l.name,c=this.parse(u,n,!0);c&&a.push(c)}}else if(Xe(e)){var f=this.parse(e,n,!0);f&&a.push(f)}else if(gt(e)){var v=e;r=n;for(var g=Object.keys(v),h=0;h<g.length;h++){var m=g[h],w=v[m];if(w===void 0&&(w=v[rl(m)]),w!==void 0){var b=this.parse(m,w,!0);b&&a.push(b)}}}else return!1;if(a.length===0)return!1;for(var E=!1,C=0;C<t.length;C++){for(var x=t[C],k={},A=void 0,p=0;p<a.length;p++){var P=a[p];if(r){var _=x.pstyle(P.name);A=k[P.name]={prev:_}}E=this.applyParsedProperty(x,ur(P))||E,r&&(A.next=x.pstyle(P.name))}E&&this.updateStyleHints(x),r&&this.updateTransitions(x,k,o)}return E};_o.overrideBypass=function(t,e,n){e=Qu(e);for(var r=0;r<t.length;r++){var i=t[r],a=i._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,n):(a.value=n,a.pfValue!=null&&(a.pfValue=n),s?a.strValue="rgb("+n.join(",")+")":l?a.strValue=n.join(" "):a.strValue=""+n,this.updateStyleHints(i)),this.checkTriggers(i,e,u,n)}};_o.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};_o.removeBypasses=function(t,e,n){for(var r=!0,i=0;i<t.length;i++){for(var a=t[i],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],c=a.pstyle(u.name);if(!(!c||!c.bypass)){var f="",v=this.parse(l,f,!0),g=o[u.name]={prev:c};this.applyParsedProperty(a,v),g.next=a.pstyle(u.name)}}this.updateStyleHints(a),n&&this.updateTransitions(a,o,r)}};var dc={};dc.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};dc.containerCss=function(t){var e=this._private.cy,n=e.container(),r=e.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)};var hr={};hr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};hr.getRawStyle=function(t,e){var n=this;if(t=t[0],t){for(var r={},i=0;i<n.properties.length;i++){var a=n.properties[i],o=n.getStylePropertyValue(t,a.name,e);o!=null&&(r[a.name]=o,r[rl(a.name)]=o)}return r}};hr.getIndexedStyle=function(t,e,n,r){var i=t.pstyle(e)[n][r];return i??t.cy().style().getDefaultProperty(e)[n][0]};hr.getStylePropertyValue=function(t,e,n){var r=this;if(t=t[0],t){var i=r.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=t.pstyle(i.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(n&&a.number&&s!=null&&Fe(s)){var c=t.cy().zoom(),f=function(w){return w*c},v=function(w,b){return f(w)+b},g=Tt(s),h=g?l.every(function(m){return m!=null}):l!=null;return h?g?s.map(function(m,w){return v(m,l[w])}).join(" "):v(s,l):g?s.map(function(m){return Xe(m)?m:""+f(m)}).join(" "):""+f(s)}else if(u!=null)return u}return null}};hr.getAnimationStartStyle=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],a=i.name,o=t.pstyle(a);o!==void 0&&(gt(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(n[a]=o)}return n};hr.getPropsList=function(t){var e=this,n=[],r=t,i=e.properties;if(r)for(var a=Object.keys(r),o=0;o<a.length;o++){var s=a[o],l=r[s],u=i[s]||i[Qu(s)],c=this.parse(u.name,l);c&&n.push(c)}return n};hr.getNonDefaultPropertiesHash=function(t,e,n){var r=n.slice(),i,a,o,s,l,u;for(l=0;l<e.length;l++)if(i=e[l],a=t.pstyle(i,!1),a!=null)if(a.pfValue!=null)r[0]=oo(s,r[0]),r[1]=so(s,r[1]);else for(o=a.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),r[0]=oo(s,r[0]),r[1]=so(s,r[1]);return r};hr.getPropertiesHash=hr.getNonDefaultPropertiesHash;var pl={};pl.appendFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,a=r.style||r.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var l=o[s],u=a[l];e.css(l,u)}}return e};pl.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};pl.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:a})}return t};var hc={};hc.appendFromString=function(t){var e=this,n=this,r=""+t,i,a,o;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){r.length>i.length?r=r.substr(i.length):r=""}function l(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var u=r.match(/^\s*$/);if(u)break;var c=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){xt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}i=c[0];var f=c[1];if(f!=="core"){var v=new Xr(f);if(v.invalid){xt("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var g=c[2],h=!1;a=g;for(var m=[];;){var w=a.match(/^\s*$/);if(w)break;var b=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){xt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),h=!0;break}o=b[0];var E=b[1],C=b[2],x=e.properties[E];if(!x){xt("Skipping property: Invalid property name in: "+o),l();continue}var k=n.parse(E,C);if(!k){xt("Skipping property: Invalid property definition in: "+o),l();continue}m.push({name:E,val:C}),l()}if(h){s();break}n.selector(f);for(var A=0;A<m.length;A++){var p=m[A];n.css(p.name,p.val)}s()}return n};hc.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var tn={};(function(){var t=Gt,e=Hm,n=Vm,r=qm,i=Wm,a=function(Z){return"^"+Z+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(Z){var K=t+"|\\w+|"+e+"|"+n+"|"+r+"|"+i;return"^"+Z+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+K+")\\s*\\,\\s*("+K+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];tn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Z,K){switch(Z.length){case 2:return K[0]!=="deg"&&K[0]!=="rad"&&K[1]!=="deg"&&K[1]!=="rad";case 1:return Xe(Z[0])||K[0]==="deg"||K[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Z){var K=Z.length;return K===1||K===2||K===4}}};var l={zeroNonZero:function(Z,K){return(Z==null||K==null)&&Z!==K||Z==0&&K!=0?!0:Z!=0&&K==0},any:function(Z,K){return Z!=K},emptyNonEmpty:function(Z,K){var ce=Gr(Z),ve=Gr(K);return ce&&!ve||!ce&&ve}},u=tn.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],v=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],g=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],m=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],w=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],b=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],E=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],C=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],x=function(Z,K){return K.value==="label"?-Z.poolIndex():K.pfValue},k=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:x},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:x},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],A=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],p=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],P=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],_=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],O=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],D=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],L=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],N=[];tn.pieBackgroundN=16,N.push({name:"pie-size",type:u.sizeMaybePercent});for(var R=1;R<=tn.pieBackgroundN;R++)N.push({name:"pie-"+R+"-background-color",type:u.color}),N.push({name:"pie-"+R+"-background-size",type:u.percent}),N.push({name:"pie-"+R+"-background-opacity",type:u.zeroOneNumber});var z=[],H=tn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(se){H.forEach(function(Z){var K=Z+"-"+se.name,ce=se.type,ve=se.triggersBounds;z.push({name:K,type:ce,triggersBounds:ve})})},{});var W=tn.properties=[].concat(m,C,w,b,E,D,h,g,c,f,v,k,A,p,P,N,_,O,z,L),X=tn.propertyGroups={behavior:m,transition:C,visibility:w,overlay:b,underlay:E,ghost:D,commonLabel:h,labelDimensions:g,mainLabel:c,sourceLabel:f,targetLabel:v,nodeBody:k,nodeBorder:A,nodeOutline:p,backgroundImage:P,pie:N,compound:_,edgeLine:O,edgeArrow:z,core:L},re=tn.propertyGroupNames={},ae=tn.propertyGroupKeys=Object.keys(X);ae.forEach(function(se){re[se]=X[se].map(function(Z){return Z.name}),X[se].forEach(function(Z){return Z.groupKey=se})});var J=tn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];tn.propertyNames=W.map(function(se){return se.name});for(var $=0;$<W.length;$++){var U=W[$];W[U.name]=U}for(var G=0;G<J.length;G++){var V=J[G],Y=W[V.pointsTo],ne={name:V.name,alias:!0,pointsTo:Y};W.push(ne),W[V.name]=ne}})();tn.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};tn.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Je({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=tn.pieBackgroundN;c++){var f=u.name.replace("{{i}}",c),v=u.value;l[f]=v}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return tn.arrowPrefixes.forEach(function(c){var f=c+"-"+u.name,v=u.value;l[f]=v}),l},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);n[a]=s}}return t.defaultProperties=n,t.defaultProperties};tn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var gl={};gl.parse=function(t,e,n,r){var i=this;if(Rt(e))return i.parseImplWarn(t,e,n,r);var a=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,o=n?"t":"f",s=""+e,l=Oh(t,s,o,a),u=i.propCache=i.propCache||[],c;return(c=u[l])||(c=u[l]=i.parseImplWarn(t,e,n,r)),(n||r==="mapping")&&(c=ur(c),c&&(c.value=ur(c.value))),c};gl.parseImplWarn=function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return!i&&e!=null&&xt("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&xt("The style value of `label` is deprecated for `"+i.name+"`"),i};gl.parseImpl=function(t,e,n,r){var i=this;t=Qu(t);var a=i.properties[t],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,t=a.name);var l=Xe(e);l&&(e=e.trim());var u=a.type;if(!u)return null;if(n&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Rt(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};var c,f;if(!(!l||r||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(n)return!1;var v=s.data;return{name:t,value:c,strValue:""+e,mapped:v,field:c[1],bypass:n}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(n||u.multiple)return!1;var g=s.mapData;if(!(u.color||u.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var m=this.parse(t,f[5]);if(!m||m.mapped)return!1;if(h.pfValue===m.pfValue||h.strValue===m.strValue)return xt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(u.color){var w=h.value,b=m.value,E=w[0]===b[0]&&w[1]===b[1]&&w[2]===b[2]&&(w[3]===b[3]||(w[3]==null||w[3]===1)&&(b[3]==null||b[3]===1));if(E)return!1}return{name:t,value:f,strValue:""+e,mapped:g,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:m.value,bypass:n}}}if(u.multiple&&r!=="multiple"){var C;if(l?C=e.split(/\s+/):Tt(e)?C=e:C=[e],u.evenMultiple&&C.length%2!==0)return null;for(var x=[],k=[],A=[],p="",P=!1,_=0;_<C.length;_++){var O=i.parse(t,C[_],n,"multiple");P=P||Xe(O.value),x.push(O.value),A.push(O.pfValue!=null?O.pfValue:O.value),k.push(O.units),p+=(_>0?" ":"")+O.strValue}return u.validate&&!u.validate(x,k)?null:u.singleEnum&&P?x.length===1&&Xe(x[0])?{name:t,value:x[0],strValue:x[0],bypass:n}:null:{name:t,value:x,pfValue:A,strValue:p,bypass:n,units:k}}var D=function(){for(var Z=0;Z<u.enums.length;Z++){var K=u.enums[Z];if(K===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(u.number){var L,N="px";if(u.units&&(L=u.units),u.implicitUnits&&(N=u.implicitUnits),!u.unitless)if(l){var R="px|em"+(u.allowPercent?"|\\%":"");L&&(R=L);var z=e.match("^("+Gt+")("+R+")?$");z&&(e=z[1],L=z[2]||N)}else(!L||u.implicitUnits)&&(L=N);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,D();if(u.integer&&!Lm(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var H={name:t,value:e,strValue:""+e+(L||""),units:L,bypass:n};return u.unitless||L!=="px"&&L!=="em"?H.pfValue=e:H.pfValue=L==="px"||!L?e:this.getEmSizeInPixels()*e,(L==="ms"||L==="s")&&(H.pfValue=L==="ms"?e:1e3*e),(L==="deg"||L==="rad")&&(H.pfValue=L==="rad"?e:d0(e)),L==="%"&&(H.pfValue=e/100),H}else if(u.propList){var W=[],X=""+e;if(X!=="none"){for(var re=X.split(/\s*,\s*|\s+/),ae=0;ae<re.length;ae++){var J=re[ae].trim();i.properties[J]?W.push(J):xt("`"+J+"` is not a valid property name")}if(W.length===0)return null}return{name:t,value:W,strValue:W.length===0?"none":W.join(" "),bypass:n}}else if(u.color){var $=kh(e);return $?{name:t,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:n}:null}else if(u.regex||u.regexes){if(u.enums){var U=D();if(U)return U}for(var G=u.regexes?u.regexes:[u.regex],V=0;V<G.length;V++){var Y=new RegExp(G[V]),ne=Y.exec(e);if(ne)return{name:t,value:u.singleRegexMatchValue?ne[1]:ne,strValue:""+e,bypass:n}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:n}:u.enums?D():null};var cn=function t(e){if(!(this instanceof t))return new t(e);if(!Zu(e)){Ot("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},dn=cn.prototype;dn.instanceString=function(){return"style"};dn.clear=function(){for(var t=this._private,e=t.cy,n=e.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(n,!0),n.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};dn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};dn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};dn.selector=function(t){var e=t==="core"?null:new Xr(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this};dn.css=function(){var t=this,e=arguments;if(e.length===1)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],a=n[i.name];a===void 0&&(a=n[rl(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};dn.style=dn.css;dn.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this};dn.append=function(t){return Ch(t)?t.appendToStyle(this):Tt(t)?this.appendFromJson(t):Xe(t)&&this.appendFromString(t),this};cn.fromJson=function(t,e){var n=new cn(t);return n.fromJson(e),n};cn.fromString=function(t,e){return new cn(t).fromString(e)};[hn,_o,dc,hr,pl,hc,tn,gl].forEach(function(t){Je(dn,t)});cn.types=dn.types;cn.properties=dn.properties;cn.propertyGroups=dn.propertyGroups;cn.propertyGroupNames=dn.propertyGroupNames;cn.propertyGroupKeys=dn.propertyGroupKeys;var Mx={style:function(e){if(e){var n=this.setStyle(e);n.update()}return this._private.style},setStyle:function(e){var n=this._private;return Ch(e)?n.style=e.generateStyle(this):Tt(e)?n.style=cn.fromJson(this,e):Xe(e)?n.style=cn.fromString(this,e):n.style=cn(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},Px="single",ki={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var n=this._private;if(n.selectionType==null&&(n.selectionType=Px),e!==void 0)(e==="additive"||e==="single")&&(n.selectionType=e);else return n.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,n=this._private.pan,r,i,a,o,s;switch(e.length){case 0:return n;case 1:if(Xe(e[0]))return r=e[0],n[r];if(gt(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,Fe(o)&&(n.x=o),Fe(s)&&(n.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;r=e[0],i=e[1],(r==="x"||r==="y")&&Fe(i)&&(n[r]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,n){var r=arguments,i=this._private.pan,a,o,s,l,u;if(!this._private.panningEnabled)return this;switch(r.length){case 1:gt(e)&&(s=r[0],l=s.x,u=s.y,Fe(l)&&(i.x+=l),Fe(u)&&(i.y+=u),this.emit("pan viewport"));break;case 2:a=e,o=n,(a==="x"||a==="y")&&Fe(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,n){var r=this.getFitViewport(e,n);if(r){var i=this._private;i.zoom=r.zoom,i.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,n){if(Fe(e)&&n===void 0&&(n=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var r;if(Xe(e)){var i=e;e=this.$(i)}else if(Rm(e)){var a=e;r={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else Ln(e)||(e=this.mutableElements());if(!(Ln(e)&&e.empty())){r=r||e.boundingBox();var o=this.width(),s=this.height(),l;if(n=Fe(n)?n:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){l=Math.min((o-2*n)/r.w,(s-2*n)/r.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(r.x1+r.x2))/2,y:(s-l*(r.y1+r.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,n){var r=this._private;if(n==null){var i=e;e=i.min,n=i.max}return Fe(e)&&Fe(n)&&e<=n?(r.minZoom=e,r.maxZoom=n):Fe(e)&&n===void 0&&e<=r.maxZoom?r.minZoom=e:Fe(n)&&e===void 0&&n>=r.minZoom&&(r.maxZoom=n),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var n=this._private,r=n.pan,i=n.zoom,a,o,s=!1;if(n.zoomingEnabled||(s=!0),Fe(e)?o=e:gt(e)&&(o=e.level,e.position!=null?a=ol(e.position,i,r):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!n.panningEnabled&&(s=!0)),o=o>n.maxZoom?n.maxZoom:o,o=o<n.minZoom?n.minZoom:o,s||!Fe(o)||o===i||a!=null&&(!Fe(a.x)||!Fe(a.y)))return null;if(a!=null){var l=r,u=i,c=o,f={x:-c/u*(a.x-l.x)+a.x,y:-c/u*(a.y-l.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:r}},zoom:function(e){if(e===void 0)return this._private.zoom;var n=this.getZoomedViewport(e),r=this._private;return n==null||!n.zoomed?this:(r.zoom=n.zoom,n.panned&&(r.pan.x=n.pan.x,r.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var n=this._private,r=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(Fe(e.zoom)||(r=!1),gt(e.pan)||(i=!1),!r&&!i)return this;if(r){var l=e.zoom;l<n.minZoom||l>n.maxZoom||!n.zoomingEnabled?o=!0:(n.zoom=l,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&n.panningEnabled){var u=e.pan;Fe(u.x)&&(n.pan.x=u.x,s=!1),Fe(u.y)&&(n.pan.y=u.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var n=this.getCenterPan(e);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(Xe(e)){var r=e;e=this.mutableElements().filter(r)}else Ln(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();n=n===void 0?this._private.zoom:n;var s={x:(a-n*(i.x1+i.x2))/2,y:(o-n*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,n=e.container,r=this;return e.sizeCache=e.sizeCache||(n?function(){var i=r.window().getComputedStyle(n),a=function(s){return parseFloat(i.getPropertyValue(s))};return{width:n.clientWidth-a("padding-left")-a("padding-right"),height:n.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,n=this._private.zoom,r=this.renderedExtent(),i={x1:(r.x1-e.x)/n,x2:(r.x2-e.x)/n,y1:(r.y1-e.y)/n,y2:(r.y2-e.y)/n};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),n=this.height();return{x1:0,y1:0,x2:e,y2:n,w:e,h:n}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ki.centre=ki.center;ki.autolockNodes=ki.autolock;ki.autoungrabifyNodes=ki.autoungrabify;var po={data:wt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:wt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:wt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:wt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};po.attr=po.data;po.removeAttr=po.removeData;var go=function(e){var n=this;e=Je({},e);var r=e.container;r&&!Rs(r)&&Rs(r[0])&&(r=r[0]);var i=r?r._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];r&&(r._cyreg=i),i.cy=n;var o=Ut!==void 0&&r!==void 0&&!e.headless,s=e;s.layout=Je({name:o?"grid":"null"},s.layout),s.renderer=Je({name:o?"canvas":"null"},s.renderer);var l=function(h,m,w){return m!==void 0?m:w!==void 0?w:h},u=this._private={container:r,ready:!1,options:s,elements:new an(this),listeners:[],aniEles:new an(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Fe(s.zoom)?s.zoom:1,pan:{x:gt(s.pan)&&Fe(s.pan.x)?s.pan.x:0,y:gt(s.pan)&&Fe(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(h,m){var w=h.some(Nm);if(w)return fa.all(h).then(m);m(h)};u.styleEnabled&&n.setStyle([]);var f=Je({},s,s.renderer);n.initRenderer(f);var v=function(h,m,w){n.notifications(!1);var b=n.mutableElements();b.length>0&&b.remove(),h!=null&&(gt(h)||Tt(h))&&n.add(h),n.one("layoutready",function(C){n.notifications(!0),n.emit(C),n.one("load",m),n.emitAndNotify("load")}).one("layoutstop",function(){n.one("done",w),n.emit("done")});var E=Je({},n._private.options.layout);E.eles=n.elements(),n.layout(E).run()};c([s.style,s.elements],function(g){var h=g[0],m=g[1];u.styleEnabled&&n.style().append(h),v(m,function(){n.startAnimationLoop(),u.ready=!0,Rt(s.ready)&&n.on("ready",s.ready);for(var w=0;w<a.length;w++){var b=a[w];n.on("ready",b)}i&&(i.readies=[]),n.emit("ready")},s.done)})},qs=go.prototype;Je(qs,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Ut;var n=this._private.container.ownerDocument;return n===void 0||n==null?Ut:n.defaultView||Ut},mount:function(e){if(e!=null){var n=this,r=n._private,i=r.options;return!Rs(e)&&Rs(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=e,r.styleEnabled=!0,n.invalidateSize(),n.initRenderer(Je({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return ur(this._private.options)},json:function(e){var n=this,r=n._private,i=n.mutableElements(),a=function(x){return n.getElementById(x.id())};if(gt(e)){if(n.startBatch(),e.elements){var o={},s=function(x,k){for(var A=[],p=[],P=0;P<x.length;P++){var _=x[P];if(!_.data.id){xt("cy.json() cannot handle elements without an ID attribute");continue}var O=""+_.data.id,D=n.getElementById(O);o[O]=!0,D.length!==0?p.push({ele:D,json:_}):(k&&(_.group=k),A.push(_))}n.add(A);for(var L=0;L<p.length;L++){var N=p[L],R=N.ele,z=N.json;R.json(z)}};if(Tt(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],f=e.elements[c];Tt(f)&&s(f,c)}var v=n.collection();i.filter(function(C){return!o[C.id()]}).forEach(function(C){C.isParent()?v.merge(C):C.remove()}),v.forEach(function(C){return C.children().move({parent:null})}),v.forEach(function(C){return a(C).remove()})}e.style&&n.style(e.style),e.zoom!=null&&e.zoom!==r.zoom&&n.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&n.pan(e.pan),e.data&&n.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<g.length;h++){var m=g[h];e[m]!=null&&n[m](e[m])}return n.endBatch(),this}else{var w=!!e,b={};w?b.elements=this.elements().map(function(C){return C.json()}):(b.elements={},i.forEach(function(C){var x=C.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(C.json())})),this._private.styleEnabled&&(b.style=n.style().json()),b.data=ur(n.data());var E=r.options;return b.zoomingEnabled=r.zoomingEnabled,b.userZoomingEnabled=r.userZoomingEnabled,b.zoom=r.zoom,b.minZoom=r.minZoom,b.maxZoom=r.maxZoom,b.panningEnabled=r.panningEnabled,b.userPanningEnabled=r.userPanningEnabled,b.pan=ur(r.pan),b.boxSelectionEnabled=r.boxSelectionEnabled,b.renderer=ur(E.renderer),b.hideEdgesOnViewport=E.hideEdgesOnViewport,b.textureOnViewport=E.textureOnViewport,b.wheelSensitivity=E.wheelSensitivity,b.motionBlur=E.motionBlur,b.multiClickDebounceTime=E.multiClickDebounceTime,b}}});qs.$id=qs.getElementById;[wx,Tx,Tv,_u,Ts,Ax,Iu,ks,Mx,ki,po].forEach(function(t){Je(qs,t)});var Dx={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}},Lx={maximal:!1,acyclic:!1},Hi=function(e){return e.scratch("breadthfirst")},Jf=function(e,n){return e.scratch("breadthfirst",n)};function kv(t){this.options=Je({},Dx,Lx,t)}kv.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=n.nodes().filter(function(Re){return Re.isChildless()}),i=n,a=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,l=e.extent(),u=Tn(s?t.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),c;if(Ln(t.roots))c=t.roots;else if(Tt(t.roots)){for(var f=[],v=0;v<t.roots.length;v++){var g=t.roots[v],h=e.getElementById(g);f.push(h)}c=e.collection(f)}else if(Xe(t.roots))c=e.$(t.roots);else if(a)c=r.roots();else{var m=n.components();c=e.collection();for(var w=function(be){var Ce=m[be],Se=Ce.maxDegree(!1),ke=Ce.filter(function(Le){return Le.degree(!1)===Se});c=c.add(ke)},b=0;b<m.length;b++)w(b)}var E=[],C={},x=function(be,Ce){E[Ce]==null&&(E[Ce]=[]);var Se=E[Ce].length;E[Ce].push(be),Jf(be,{index:Se,depth:Ce})},k=function(be,Ce){var Se=Hi(be),ke=Se.depth,Le=Se.index;E[ke][Le]=null,be.isChildless()&&x(be,Ce)};i.bfs({roots:c,directed:t.directed,visit:function(be,Ce,Se,ke,Le){var je=be[0],Te=je.id();je.isChildless()&&x(je,Le),C[Te]=!0}});for(var A=[],p=0;p<r.length;p++){var P=r[p];C[P.id()]||A.push(P)}var _=function(be){for(var Ce=E[be],Se=0;Se<Ce.length;Se++){var ke=Ce[Se];if(ke==null){Ce.splice(Se,1),Se--;continue}Jf(ke,{depth:be,index:Se})}},O=function(be,Ce){for(var Se=Hi(be),ke=be.incomers().filter(function(pe){return pe.isNode()&&n.has(pe)}),Le=-1,je=be.id(),Te=0;Te<ke.length;Te++){var de=ke[Te],F=Hi(de);Le=Math.max(Le,F.depth)}if(Se.depth<=Le){if(!t.acyclic&&Ce[je])return null;var oe=Le+1;return k(be,oe),Ce[je]=oe,!0}return!1};if(a&&o){var D=[],L={},N=function(be){return D.push(be)},R=function(){return D.shift()};for(r.forEach(function(Re){return D.push(Re)});D.length>0;){var z=R(),H=O(z,L);if(H)z.outgoers().filter(function(Re){return Re.isNode()&&n.has(Re)}).forEach(N);else if(H===null){xt("Detected double maximal shift for node `"+z.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var W=0;if(t.avoidOverlap)for(var X=0;X<r.length;X++){var re=r[X],ae=re.layoutDimensions(t),J=ae.w,$=ae.h;W=Math.max(W,J,$)}var U={},G=function(be){if(U[be.id()])return U[be.id()];for(var Ce=Hi(be).depth,Se=be.neighborhood(),ke=0,Le=0,je=0;je<Se.length;je++){var Te=Se[je];if(!(Te.isEdge()||Te.isParent()||!r.has(Te))){var de=Hi(Te);if(de!=null){var F=de.index,oe=de.depth;if(!(F==null||oe==null)){var pe=E[oe].length;oe<Ce&&(ke+=F/pe,Le++)}}}}return Le=Math.max(1,Le),ke=ke/Le,Le===0&&(ke=0),U[be.id()]=ke,ke},V=function(be,Ce){var Se=G(be),ke=G(Ce),Le=Se-ke;return Le===0?Th(be.id(),Ce.id()):Le};t.depthSort!==void 0&&(V=t.depthSort);for(var Y=E.length,ne=0;ne<Y;ne++)E[ne].sort(V),_(ne);for(var se=[],Z=0;Z<A.length;Z++)se.push(A[Z]);var K=function(){for(var be=0;be<Y;be++)_(be)};se.length&&(E.unshift(se),Y=E.length,K());for(var ce=0,ve=0;ve<Y;ve++)ce=Math.max(E[ve].length,ce);var De={x:u.x1+u.w/2,y:u.y1+u.h/2},Oe=r.reduce(function(Re,be){return function(Ce){return{w:Re.w===-1?Ce.w:(Re.w+Ce.w)/2,h:Re.h===-1?Ce.h:(Re.h+Ce.h)/2}}(be.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Ze=Math.max(Y===1?0:s?(u.h-t.padding*2-Oe.h)/(Y-1):(u.h-t.padding*2-Oe.h)/(Y+1),W),nt=E.reduce(function(Re,be){return Math.max(Re,be.length)},0),qe=function(be){var Ce=Hi(be),Se=Ce.depth,ke=Ce.index;if(t.circle){var Le=Math.min(u.w/2/Y,u.h/2/Y);Le=Math.max(Le,W);var je=Le*Se+Le-(Y>0&&E[0].length<=3?Le/2:0),Te=2*Math.PI/E[Se].length*ke;return Se===0&&E[0].length===1&&(je=1),{x:De.x+je*Math.cos(Te),y:De.y+je*Math.sin(Te)}}else{var de=E[Se].length,F=Math.max(de===1?0:s?(u.w-t.padding*2-Oe.w)/((t.grid?nt:de)-1):(u.w-t.padding*2-Oe.w)/((t.grid?nt:de)+1),W),oe={x:De.x+(ke+1-(de+1)/2)*F,y:De.y+(Se+1-(Y+1)/2)*Ze};return oe}};return n.nodes().layoutPositions(this,t,qe),this};var Ox={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Av(t){this.options=Je({},Ox,t)}Av.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=r.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=Tn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,u=l/Math.max(1,a.length-1),c,f=0,v=0;v<a.length;v++){var g=a[v],h=g.layoutDimensions(e),m=h.w,w=h.h;f=Math.max(f,m,w)}if(Fe(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,a.length>1&&e.avoidOverlap){f*=1.75;var b=Math.cos(u)-Math.cos(0),E=Math.sin(u)-Math.sin(0),C=Math.sqrt(f*f/(b*b+E*E));c=Math.max(C,c)}var x=function(A,p){var P=e.startAngle+p*u*(i?1:-1),_=c*Math.cos(P),O=c*Math.sin(P),D={x:s.x+_,y:s.y+O};return D};return r.nodes().layoutPositions(this,e,x),this};var Bx={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function _v(t){this.options=Je({},Bx,t)}_v.prototype.run=function(){for(var t=this.options,e=t,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,a=i.nodes().not(":parent"),o=Tn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<a.length;c++){var f=a[c],v=void 0;v=e.concentric(f),l.push({value:v,node:f}),f._private.scratch.concentric=v}a.updateStyle();for(var g=0;g<a.length;g++){var h=a[g],m=h.layoutDimensions(e);u=Math.max(u,m.w,m.h)}l.sort(function(Oe,Ze){return Ze.value-Oe.value});for(var w=e.levelWidth(a),b=[[]],E=b[0],C=0;C<l.length;C++){var x=l[C];if(E.length>0){var k=Math.abs(E[0].value-x.value);k>=w&&(E=[],b.push(E))}E.push(x)}var A=u+e.minNodeSpacing;if(!e.avoidOverlap){var p=b.length>0&&b[0].length>1,P=Math.min(o.w,o.h)/2-A,_=P/(b.length+p?1:0);A=Math.min(A,_)}for(var O=0,D=0;D<b.length;D++){var L=b[D],N=e.sweep===void 0?2*Math.PI-2*Math.PI/L.length:e.sweep,R=L.dTheta=N/Math.max(1,L.length-1);if(L.length>1&&e.avoidOverlap){var z=Math.cos(R)-Math.cos(0),H=Math.sin(R)-Math.sin(0),W=Math.sqrt(A*A/(z*z+H*H));O=Math.max(W,O)}L.r=O,O+=A}if(e.equidistant){for(var X=0,re=0,ae=0;ae<b.length;ae++){var J=b[ae],$=J.r-re;X=Math.max(X,$)}re=0;for(var U=0;U<b.length;U++){var G=b[U];U===0&&(re=G.r),G.r=re,re+=X}}for(var V={},Y=0;Y<b.length;Y++)for(var ne=b[Y],se=ne.dTheta,Z=ne.r,K=0;K<ne.length;K++){var ce=ne[K],ve=e.startAngle+(n?1:-1)*se*K,De={x:s.x+Z*Math.cos(ve),y:s.y+Z*Math.sin(ve)};V[ce.node.id()]=De}return i.nodes().layoutPositions(this,e,function(Oe){var Ze=Oe.id();return V[Ze]}),this};var Yl,Rx={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function ml(t){this.options=Je({},Rx,t),this.options.layout=this;var e=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(i){var a=i.source().data("id"),o=i.target().data("id"),s=e.some(function(u){return u.data("id")===a}),l=e.some(function(u){return u.data("id")===o});return!s||!l});this.options.eles=this.options.eles.not(r)}ml.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,(t.animate===!0||t.animate===!1)&&n.emit({type:"layoutstart",layout:n}),t.debug===!0?Yl=!0:Yl=!1;var r=Nx(e,n,t);Yl&&Hx(r),t.randomize&&$x(r);var i=Sr(),a=function(){Vx(r,e,t),t.fit===!0&&e.fit(t.padding)},o=function(v){return!(n.stopped||v>=t.numIter||(qx(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)a(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var v=t.eles.nodes(),g=Iv(r,t,v);v.layoutPositions(n,t,g)}},l=0,u=!0;if(t.animate===!0){var c=function f(){for(var v=0;u&&v<t.refresh;)u=o(l),l++,v++;if(!u)td(r,t),s();else{var g=Sr();g-i>=t.animationThreshold&&a(),Ns(f)}};c()}else{for(;u;)u=o(l),l++;td(r,t),s()}return this};ml.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};ml.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Nx=function(e,n,r){for(var i=r.eles.edges(),a=r.eles.nodes(),o=Tn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=r.eles.components(),u={},c=0;c<l.length;c++)for(var f=l[c],v=0;v<f.length;v++){var g=f[v];u[g.id()]=c}for(var c=0;c<s.nodeSize;c++){var h=a[c],m=h.layoutDimensions(r),w={};w.isLocked=h.locked(),w.id=h.data("id"),w.parentId=h.data("parent"),w.cmptId=u[h.id()],w.children=[],w.positionX=h.position("x"),w.positionY=h.position("y"),w.offsetX=0,w.offsetY=0,w.height=m.w,w.width=m.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(h.style("padding")),w.padRight=parseFloat(h.style("padding")),w.padTop=parseFloat(h.style("padding")),w.padBottom=parseFloat(h.style("padding")),w.nodeRepulsion=Rt(r.nodeRepulsion)?r.nodeRepulsion(h):r.nodeRepulsion,s.layoutNodes.push(w),s.idToIndex[w.id]=c}for(var b=[],E=0,C=-1,x=[],c=0;c<s.nodeSize;c++){var h=s.layoutNodes[c],k=h.parentId;k!=null?s.layoutNodes[s.idToIndex[k]].children.push(h.id):(b[++C]=h.id,x.push(h.id))}for(s.graphSet.push(x);E<=C;){var A=b[E++],p=s.idToIndex[A],g=s.layoutNodes[p],P=g.children;if(P.length>0){s.graphSet.push(P);for(var c=0;c<P.length;c++)b[++C]=P[c]}}for(var c=0;c<s.graphSet.length;c++)for(var _=s.graphSet[c],v=0;v<_.length;v++){var O=s.idToIndex[_[v]];s.indexToGraph[O]=c}for(var c=0;c<s.edgeSize;c++){var D=i[c],L={};L.id=D.data("id"),L.sourceId=D.data("source"),L.targetId=D.data("target");var N=Rt(r.idealEdgeLength)?r.idealEdgeLength(D):r.idealEdgeLength,R=Rt(r.edgeElasticity)?r.edgeElasticity(D):r.edgeElasticity,z=s.idToIndex[L.sourceId],H=s.idToIndex[L.targetId],W=s.indexToGraph[z],X=s.indexToGraph[H];if(W!=X){for(var re=Fx(L.sourceId,L.targetId,s),ae=s.graphSet[re],J=0,w=s.layoutNodes[z];ae.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],J++;for(w=s.layoutNodes[H];ae.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],J++;N*=J*r.nestingFactor}L.idealLength=N,L.elasticity=R,s.layoutEdges.push(L)}return s},Fx=function(e,n,r){var i=zx(e,n,0,r);return 2>i.count?0:i.graph},zx=function t(e,n,r,i){var a=i.graphSet[r];if(-1<a.indexOf(e)&&-1<a.indexOf(n))return{count:2,graph:r};for(var o=0,s=0;s<a.length;s++){var l=a[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],v=t(e,n,f,i);if(v.count!==0)if(v.count===1){if(o++,o===2)break}else return v}}return{count:o,graph:r}},Hx,$x=function(e,n){for(var r=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*r,o.positionY=Math.random()*i)}},Iv=function(e,n,r){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(r.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(n.boundingBox){var u=(l.positionX-a.x1)/a.w,c=(l.positionY-a.y1)/a.h;return{x:i.x1+u*i.w,y:i.y1+c*i.h}}else return{x:l.positionX,y:l.positionY}}},Vx=function(e,n,r){var i=r.layout,a=r.eles.nodes(),o=Iv(e,r,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",r.ready),i.emit({type:"layoutready",layout:this}))},qx=function(e,n,r){Wx(e,n),jx(e),Kx(e,n),Xx(e),Yx(e)},Wx=function(e,n){for(var r=0;r<e.graphSet.length;r++)for(var i=e.graphSet[r],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],l=o+1;l<a;l++){var u=e.layoutNodes[e.idToIndex[i[l]]];Ux(s,u,e,n)}},ed=function(e){return-1+2*e*Math.random()},Ux=function(e,n,r,i){var a=e.cmptId,o=n.cmptId;if(!(a!==o&&!r.isCompound)){var s=n.positionX-e.positionX,l=n.positionY-e.positionY,u=1;s===0&&l===0&&(s=ed(u),l=ed(u));var c=Gx(e,n,s,l);if(c>0)var f=i.nodeOverlap*c,v=Math.sqrt(s*s+l*l),g=f*s/v,h=f*l/v;else var m=Ws(e,s,l),w=Ws(n,-1*s,-1*l),b=w.x-m.x,E=w.y-m.y,C=b*b+E*E,v=Math.sqrt(C),f=(e.nodeRepulsion+n.nodeRepulsion)/C,g=f*b/v,h=f*E/v;e.isLocked||(e.offsetX-=g,e.offsetY-=h),n.isLocked||(n.offsetX+=g,n.offsetY+=h)}},Gx=function(e,n,r,i){if(r>0)var a=e.maxX-n.minX;else var a=n.maxX-e.minX;if(i>0)var o=e.maxY-n.minY;else var o=n.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},Ws=function(e,n,r){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,l=r/n,u=o/s,c={};return n===0&&0<r||n===0&&0>r?(c.x=i,c.y=a+o/2,c):0<n&&-1*u<=l&&l<=u?(c.x=i+s/2,c.y=a+s*r/2/n,c):0>n&&-1*u<=l&&l<=u?(c.x=i-s/2,c.y=a-s*r/2/n,c):0<r&&(l<=-1*u||l>=u)?(c.x=i+o*n/2/r,c.y=a+o/2,c):(0>r&&(l<=-1*u||l>=u)&&(c.x=i-o*n/2/r,c.y=a-o/2),c)},jx=function(e,n){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(!(u===0&&c===0)){var f=Ws(o,u,c),v=Ws(l,-1*u,-1*c),g=v.x-f.x,h=v.y-f.y,m=Math.sqrt(g*g+h*h),w=Math.pow(i.idealLength-m,2)/i.elasticity;if(m!==0)var b=w*g/m,E=w*h/m;else var b=0,E=0;o.isLocked||(o.offsetX+=b,o.offsetY+=E),l.isLocked||(l.offsetX-=b,l.offsetY-=E)}}},Kx=function(e,n){if(n.gravity!==0)for(var r=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;for(var f=0;f<o;f++){var v=e.layoutNodes[e.idToIndex[a[f]]];if(!v.isLocked){var g=s-v.positionX,h=l-v.positionY,m=Math.sqrt(g*g+h*h);if(m>r){var w=n.gravity*g/m,b=n.gravity*h/m;v.offsetX+=w,v.offsetY+=b}}}}},Xx=function(e,n){var r=[],i=0,a=-1;for(r.push.apply(r,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=r[i++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,f=l.offsetY,v=0;v<u.length;v++){var g=e.layoutNodes[e.idToIndex[u[v]]];g.offsetX+=c,g.offsetY+=f,r[++a]=u[v]}l.offsetX=0,l.offsetY=0}}},Yx=function(e,n){for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(!(0<i.children.length||i.isLocked)){var a=Zx(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Qx(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},Zx=function(e,n,r){var i=Math.sqrt(e*e+n*n);if(i>r)var a={x:r*e/i,y:r*n/i};else var a={x:e,y:n};return a},Qx=function t(e,n){var r=e.parentId;if(r!=null){var i=n.layoutNodes[n.idToIndex[r]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return t(i,n)}},td=function(e,n){for(var r=e.layoutNodes,i=[],a=0;a<r.length;a++){var o=r[a],s=o.cmptId,l=i[s]=i[s]||[];l.push(o)}for(var u=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var v=c[f];c.x1=Math.min(c.x1,v.positionX-v.width/2),c.x2=Math.max(c.x2,v.positionX+v.width/2),c.y1=Math.min(c.y1,v.positionY-v.height/2),c.y2=Math.max(c.y2,v.positionY+v.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}i.sort(function(E,C){return C.w*C.h-E.w*E.h});for(var g=0,h=0,m=0,w=0,b=Math.sqrt(u)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var f=0;f<c.length;f++){var v=c[f];v.isLocked||(v.positionX+=g-c.x1,v.positionY+=h-c.y1)}g+=c.w+n.componentSpacing,m+=c.w+n.componentSpacing,w=Math.max(w,c.h),m>b&&(h+=w+n.componentSpacing,g=0,m=0,w=0)}}},Jx={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Mv(t){this.options=Je({},Jx,t)}Mv.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Tn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(a.h===0||a.w===0)r.nodes().layoutPositions(this,e,function(U){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),l=Math.round(s),u=Math.round(a.w/a.h*s),c=function(G){if(G==null)return Math.min(l,u);var V=Math.min(l,u);V==l?l=G:u=G},f=function(G){if(G==null)return Math.max(l,u);var V=Math.max(l,u);V==l?l=G:u=G},v=e.rows,g=e.cols!=null?e.cols:e.columns;if(v!=null&&g!=null)l=v,u=g;else if(v!=null&&g==null)l=v,u=Math.ceil(o/l);else if(v==null&&g!=null)u=g,l=Math.ceil(o/u);else if(u*l>o){var h=c(),m=f();(h-1)*m>=o?c(h-1):(m-1)*h>=o&&f(m-1)}else for(;u*l<o;){var w=c(),b=f();(b+1)*w>=o?f(b+1):c(w+1)}var E=a.w/u,C=a.h/l;if(e.condense&&(E=0,C=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var k=i[x],A=k._private.position;(A.x==null||A.y==null)&&(A.x=0,A.y=0);var p=k.layoutDimensions(e),P=e.avoidOverlapPadding,_=p.w+P,O=p.h+P;E=Math.max(E,_),C=Math.max(C,O)}for(var D={},L=function(G,V){return!!D["c-"+G+"-"+V]},N=function(G,V){D["c-"+G+"-"+V]=!0},R=0,z=0,H=function(){z++,z>=u&&(z=0,R++)},W={},X=0;X<i.length;X++){var re=i[X],ae=e.position(re);if(ae&&(ae.row!==void 0||ae.col!==void 0)){var J={row:ae.row,col:ae.col};if(J.col===void 0)for(J.col=0;L(J.row,J.col);)J.col++;else if(J.row===void 0)for(J.row=0;L(J.row,J.col);)J.row++;W[re.id()]=J,N(J.row,J.col)}}var $=function(G,V){var Y,ne;if(G.locked()||G.isParent())return!1;var se=W[G.id()];if(se)Y=se.col*E+E/2+a.x1,ne=se.row*C+C/2+a.y1;else{for(;L(R,z);)H();Y=z*E+E/2+a.x1,ne=R*C+C/2+a.y1,N(R,z),H()}return{x:Y,y:ne}};i.layoutPositions(this,e,$)}return this};var eE={ready:function(){},stop:function(){}};function vc(t){this.options=Je({},eE,t)}vc.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this};vc.prototype.stop=function(){return this};var tE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Pv(t){this.options=Je({},tE,t)}Pv.prototype.run=function(){var t=this.options,e=t.eles,n=e.nodes(),r=Rt(t.positions);function i(a){if(t.positions==null)return s0(a.position());if(r)return t.positions(a);var o=t.positions[a._private.data.id];return o??null}return n.layoutPositions(this,t,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var nE={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Dv(t){this.options=Je({},nE,t)}Dv.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=Tn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,t,i),this};var rE=[{name:"breadthfirst",impl:kv},{name:"circle",impl:Av},{name:"concentric",impl:_v},{name:"cose",impl:ml},{name:"grid",impl:Mv},{name:"null",impl:vc},{name:"preset",impl:Pv},{name:"random",impl:Dv}];function Lv(t){this.options=t,this.notifications=0}var nd=function(){},rd=function(){throw new Error("A headless instance can not render images")};Lv.prototype={recalculateRenderedStyle:nd,notify:function(){this.notifications++},init:nd,isHeadless:function(){return!0},png:rd,jpg:rd};var pc={};pc.arrowShapeWidth=.3;pc.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(u,c,f,v,g,h,m){var w=g.x-f/2-m,b=g.x+f/2+m,E=g.y-f/2-m,C=g.y+f/2+m,x=w<=u&&u<=b&&E<=c&&c<=C;return x},r=function(u,c,f,v,g){var h=u*Math.cos(v)-c*Math.sin(v),m=u*Math.sin(v)+c*Math.cos(v),w=h*f,b=m*f,E=w+g.x,C=b+g.y;return{x:E,y:C}},i=function(u,c,f,v){for(var g=[],h=0;h<u.length;h+=2){var m=u[h],w=u[h+1];g.push(r(m,w,c,f,v))}return g},a=function(u){for(var c=[],f=0;f<u.length;f++){var v=u[f];c.push(v.x,v.y)}return c},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,c){Xe(c)&&(c=t[c]),t[u]=Je({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(v,g,h,m,w,b){var E=a(i(this.points,h+2*b,m,w)),C=En(v,g,E);return C},roughCollide:n,draw:function(v,g,h,m){var w=i(this.points,g,h,m);e.arrowShapeImpl("polygon")(v,w)},spacing:function(v){return 0},gap:o},c)};s("none",{collide:Fs,roughCollide:Fs,draw:ec,spacing:hf,gap:hf}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(u,c,f,v,g){var h=i(this.points,c,f,v),m=this.controlPoint,w=r(m[0],m[1],c,f,v);e.arrowShapeImpl(this.name)(u,h,w)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,f,v,g,h,m){var w=a(i(this.points,f+2*m,v,g)),b=a(i(this.pointsTee,f+2*m,v,g)),E=En(u,c,w)||En(u,c,b);return E},draw:function(u,c,f,v,g){var h=i(this.points,c,f,v),m=i(this.pointsTee,c,f,v);e.arrowShapeImpl(this.name)(u,h,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,f,v,g,h,m){var w=g,b=Math.pow(w.x-u,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*m)*this.radius,2),E=a(i(this.points,f+2*m,v,g));return En(u,c,E)||b},draw:function(u,c,f,v,g){var h=i(this.pointsTr,c,f,v);e.arrowShapeImpl(this.name)(u,h,v.x,v.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var f=this.baseCrossLinePts.slice(),v=c/u,g=3,h=5;return f[g]=f[g]-v,f[h]=f[h]-v,f},collide:function(u,c,f,v,g,h,m){var w=a(i(this.points,f+2*m,v,g)),b=a(i(this.crossLinePts(f,h),f+2*m,v,g)),E=En(u,c,w)||En(u,c,b);return E},draw:function(u,c,f,v,g){var h=i(this.points,c,f,v),m=i(this.crossLinePts(c,g),c,f,v);e.arrowShapeImpl(this.name)(u,h,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,c,f,v,g,h,m){var w=g,b=Math.pow(w.x-u,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*m)*this.radius,2);return b},draw:function(u,c,f,v,g){e.arrowShapeImpl(this.name)(u,v.x,v.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Mi={};Mi.projectIntoViewport=function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],s=n.pan(),l=n.zoom(),u=((t-i)/o-s.x)/l,c=((e-a)/o-s.y)/l;return[u,c]};Mi.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=this.cy.window().getComputedStyle(t),r=function(b){return parseFloat(n.getPropertyValue(b))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},a={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,l=i.left+i.right,u=i.top+i.bottom,c=a.left+a.right,f=e.width/(o+c),v=o-l,g=s-u,h=e.left+i.left+a.left,m=e.top+i.top+a.top;return this.containerBB=[h,m,v,g,f]};Mi.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Mi.findNearestElement=function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]};Mi.findNearestElements=function(t,e,n,r){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],l=a.cy.zoom(),u=a.cy.hasCompoundNodes(),c=(r?24:8)/l,f=(r?8:2)/l,v=(r?8:2)/l,g=1/0,h,m;n&&(o=o.interactive);function w(p,P){if(p.isNode()){if(m)return;m=p,s.push(p)}if(p.isEdge()&&(P==null||P<g))if(h){if(h.pstyle("z-compound-depth").value===p.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===p.pstyle("z-compound-depth").value){for(var _=0;_<s.length;_++)if(s[_].isEdge()){s[_]=p,h=p,g=P??g;break}}}else s.push(p),h=p,g=P??g}function b(p){var P=p.outerWidth()+2*f,_=p.outerHeight()+2*f,O=P/2,D=_/2,L=p.position(),N=p.pstyle("corner-radius").value==="auto"?"auto":p.pstyle("corner-radius").pfValue,R=p._private.rscratch;if(L.x-O<=t&&t<=L.x+O&&L.y-D<=e&&e<=L.y+D){var z=a.nodeShapes[i.getNodeShape(p)];if(z.checkPoint(t,e,0,P,_,L.x,L.y,N,R))return w(p,0),!0}}function E(p){var P=p._private,_=P.rscratch,O=p.pstyle("width").pfValue,D=p.pstyle("arrow-scale").value,L=O/2+c,N=L*L,R=L*2,X=P.source,re=P.target,z;if(_.edgeType==="segments"||_.edgeType==="straight"||_.edgeType==="haystack"){for(var H=_.allpts,W=0;W+3<H.length;W+=2)if(w0(t,e,H[W],H[W+1],H[W+2],H[W+3],R)&&N>(z=T0(t,e,H[W],H[W+1],H[W+2],H[W+3])))return w(p,z),!0}else if(_.edgeType==="bezier"||_.edgeType==="multibezier"||_.edgeType==="self"||_.edgeType==="compound"){for(var H=_.allpts,W=0;W+5<_.allpts.length;W+=4)if(x0(t,e,H[W],H[W+1],H[W+2],H[W+3],H[W+4],H[W+5],R)&&N>(z=S0(t,e,H[W],H[W+1],H[W+2],H[W+3],H[W+4],H[W+5])))return w(p,z),!0}for(var X=X||P.source,re=re||P.target,ae=i.getArrowWidth(O,D),J=[{name:"source",x:_.arrowStartX,y:_.arrowStartY,angle:_.srcArrowAngle},{name:"target",x:_.arrowEndX,y:_.arrowEndY,angle:_.tgtArrowAngle},{name:"mid-source",x:_.midX,y:_.midY,angle:_.midsrcArrowAngle},{name:"mid-target",x:_.midX,y:_.midY,angle:_.midtgtArrowAngle}],W=0;W<J.length;W++){var $=J[W],U=a.arrowShapes[p.pstyle($.name+"-arrow-shape").value],G=p.pstyle("width").pfValue;if(U.roughCollide(t,e,ae,$.angle,{x:$.x,y:$.y},G,c)&&U.collide(t,e,ae,$.angle,{x:$.x,y:$.y},G,c))return w(p),!0}u&&s.length>0&&(b(X),b(re))}function C(p,P,_){return Xn(p,P,_)}function x(p,P){var _=p._private,O=v,D;P?D=P+"-":D="",p.boundingBox();var L=_.labelBounds[P||"main"],N=p.pstyle(D+"label").value,R=p.pstyle("text-events").strValue==="yes";if(!(!R||!N)){var z=C(_.rscratch,"labelX",P),H=C(_.rscratch,"labelY",P),W=C(_.rscratch,"labelAngle",P),X=p.pstyle(D+"text-margin-x").pfValue,re=p.pstyle(D+"text-margin-y").pfValue,ae=L.x1-O-X,J=L.x2+O-X,$=L.y1-O-re,U=L.y2+O-re;if(W){var G=Math.cos(W),V=Math.sin(W),Y=function(De,Oe){return De=De-z,Oe=Oe-H,{x:De*G-Oe*V+z,y:De*V+Oe*G+H}},ne=Y(ae,$),se=Y(ae,U),Z=Y(J,$),K=Y(J,U),ce=[ne.x+X,ne.y+re,Z.x+X,Z.y+re,K.x+X,K.y+re,se.x+X,se.y+re];if(En(t,e,ce))return w(p),!0}else if(ea(L,t,e))return w(p),!0}}for(var k=o.length-1;k>=0;k--){var A=o[k];A.isNode()?b(A)||x(A):E(A)||x(A)||x(A,"source")||x(A,"target")}return s};Mi.getAllInBox=function(t,e,n,r){var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(t,n),s=Math.max(t,n),l=Math.min(e,r),u=Math.max(e,r);t=o,n=s,e=l,r=u;for(var c=Tn({x1:t,y1:e,x2:n,y2:r}),f=0;f<i.length;f++){var v=i[f];if(v.isNode()){var g=v,h=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});rc(c,h)&&!Vh(h,c)&&a.push(g)}else{var m=v,w=m._private,b=w.rscratch;if(b.startX!=null&&b.startY!=null&&!ea(c,b.startX,b.startY)||b.endX!=null&&b.endY!=null&&!ea(c,b.endX,b.endY))continue;if(b.edgeType==="bezier"||b.edgeType==="multibezier"||b.edgeType==="self"||b.edgeType==="compound"||b.edgeType==="segments"||b.edgeType==="haystack"){for(var E=w.rstyle.bezierPts||w.rstyle.linePts||w.rstyle.haystackPts,C=!0,x=0;x<E.length;x++)if(!b0(c,E[x])){C=!1;break}C&&a.push(m)}else(b.edgeType==="haystack"||b.edgeType==="straight")&&a.push(m)}}return a};var Us={};Us.calculateArrowAngles=function(t){var e=t._private.rscratch,n=e.edgeType==="haystack",r=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,c,f,v,g,b,E;if(n?(c=e.haystackPts[0],f=e.haystackPts[1],v=e.haystackPts[2],g=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,v=e.arrowEndX,g=e.arrowEndY),b=e.midX,E=e.midY,a)l=c-e.segpts[0],u=f-e.segpts[1];else if(i||o||s||r){var h=e.allpts,m=Yt(h[0],h[2],h[4],.1),w=Yt(h[1],h[3],h[5],.1);l=c-m,u=f-w}else l=c-b,u=f-E;e.srcArrowAngle=Zo(l,u);var b=e.midX,E=e.midY;if(n&&(b=(c+v)/2,E=(f+g)/2),l=v-c,u=g-f,a){var h=e.allpts;if(h.length/2%2===0){var C=h.length/2,x=C-2;l=h[C]-h[x],u=h[C+1]-h[x+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var C=h.length/2-1,x=C-2;l=h[C]-h[x],u=h[C+1]-h[x+1]}}else if(i||o||s){var h=e.allpts,k=e.ctrlpts,A,p,P,_;if(k.length/2%2===0){var O=h.length/2-1,D=O+2,L=D+2;A=Yt(h[O],h[D],h[L],0),p=Yt(h[O+1],h[D+1],h[L+1],0),P=Yt(h[O],h[D],h[L],1e-4),_=Yt(h[O+1],h[D+1],h[L+1],1e-4)}else{var D=h.length/2-1,O=D-2,L=D+2;A=Yt(h[O],h[D],h[L],.4999),p=Yt(h[O+1],h[D+1],h[L+1],.4999),P=Yt(h[O],h[D],h[L],.5),_=Yt(h[O+1],h[D+1],h[L+1],.5)}l=P-A,u=_-p}if(e.midtgtArrowAngle=Zo(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,a){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var C=h.length/2-1,N=C+2;l=-(h[N]-h[C]),u=-(h[N+1]-h[C+1])}}}if(e.midsrcArrowAngle=Zo(l,u),a)l=v-e.segpts[e.segpts.length-2],u=g-e.segpts[e.segpts.length-1];else if(i||o||s||r){var h=e.allpts,R=h.length,m=Yt(h[R-6],h[R-4],h[R-2],.9),w=Yt(h[R-5],h[R-3],h[R-1],.9);l=v-m,u=g-w}else l=v-b,u=g-E;e.tgtArrowAngle=Zo(l,u)};Us.getArrowWidth=Us.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(t*13.37,.9),29)*e,n[t+", "+e]=r,r)};var Mu,Pu,sr={},Fn={},id,ad,yi,As,xr,ci,pi,or,$i,os,Ov,Bv,Du,Lu,od,sd=function(e,n,r){r.x=n.x-e.x,r.y=n.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},iE=function(e,n){n.x=e.x*-1,n.y=e.y*-1,n.nx=e.nx*-1,n.ny=e.ny*-1,n.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},aE=function(e,n,r,i,a){if(e!==od?sd(n,e,sr):iE(Fn,sr),sd(n,r,Fn),id=sr.nx*Fn.ny-sr.ny*Fn.nx,ad=sr.nx*Fn.nx-sr.ny*-Fn.ny,xr=Math.asin(Math.max(-1,Math.min(1,id))),Math.abs(xr)<1e-6){Mu=n.x,Pu=n.y,pi=$i=0;return}yi=1,As=!1,ad<0?xr<0?xr=Math.PI+xr:(xr=Math.PI-xr,yi=-1,As=!0):xr>0&&(yi=-1,As=!0),n.radius!==void 0?$i=n.radius:$i=i,ci=xr/2,os=Math.min(sr.len/2,Fn.len/2),a?(or=Math.abs(Math.cos(ci)*$i/Math.sin(ci)),or>os?(or=os,pi=Math.abs(or*Math.sin(ci)/Math.cos(ci))):pi=$i):(or=Math.min(os,$i),pi=Math.abs(or*Math.sin(ci)/Math.cos(ci))),Du=n.x+Fn.nx*or,Lu=n.y+Fn.ny*or,Mu=Du-Fn.ny*pi*yi,Pu=Lu+Fn.nx*pi*yi,Ov=n.x+sr.nx*or,Bv=n.y+sr.ny*or,od=n};function Rv(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function gc(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(aE(t,e,n,r,i),{cx:Mu,cy:Pu,radius:pi,startX:Ov,startY:Bv,stopX:Du,stopY:Lu,startAngle:sr.ang+Math.PI/2*yi,endAngle:Fn.ang-Math.PI/2*yi,counterClockwise:As})}var vn={};vn.findMidptPtsEtc=function(t,e){var n=e.posPts,r=e.intersectionPts,i=e.vectorNormInverse,a,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),l=o.units!=null&&s.units!=null,u=function(k,A,p,P){var _=P-A,O=p-k,D=Math.sqrt(O*O+_*_);return{x:-_/D,y:O/D}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":a=n;break;case"intersection":a=r;break;case"endpoints":{if(l){var f=this.manualEndptToPx(t.source()[0],o),v=Zt(f,2),g=v[0],h=v[1],m=this.manualEndptToPx(t.target()[0],s),w=Zt(m,2),b=w[0],E=w[1],C={x1:g,y1:h,x2:b,y2:E};i=u(g,h,b,E),a=C}else xt("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=r;break}}return{midptPts:a,vectorNormInverse:i}};vn.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=r.source,s=r.target,l=o.position(),u=s.position(),c=o.width(),f=s.width(),v=o.height(),g=s.height(),h=n.pstyle("haystack-radius").value,m=h/2;i.haystackPts=i.allpts=[i.source.x*c*m+l.x,i.source.y*v*m+l.y,i.target.x*f*m+u.x,i.target.y*g*m+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};vn.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),a=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(r.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<s;c++){var f=r.pfValue[c],v=i.pfValue[c],g=1-f,h=f,m=this.findMidptPtsEtc(t,e),w=m.midptPts,b=m.vectorNormInverse,E={x:w.x1*g+w.x2*h,y:w.y1*g+w.y2*h};n.segpts.push(E.x+b.x*v,E.y+b.y*v),n.radii.push(a.pfValue[c]!==void 0?a.pfValue[c]:l),n.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:u)==="arc-radius")}};vn.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,a=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var v=n,g=f;r&&(v=0,g=l);var h=u-Math.PI/2,m=h-c/2,w=h+c/2,b=u+"_"+c;v=a[b]===void 0?a[b]=0:++a[b],i.ctrlpts=[o.x+Math.cos(m)*1.4*g*(v/3+1),o.y+Math.sin(m)*1.4*g*(v/3+1),o.x+Math.cos(w)*1.4*g*(v/3+1),o.y+Math.sin(w)*1.4*g*(v/3+1)]};vn.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),g=v?v.pfValue[0]:void 0,h=n,m=f;r&&(h=0,m=g);var w=50,b={x:a.x-s/2,y:a.y-l/2},E={x:o.x-u/2,y:o.y-c/2},C={x:Math.min(b.x,E.x),y:Math.min(b.y,E.y)},x=.5,k=Math.max(x,Math.log(s*.01)),A=Math.max(x,Math.log(u*.01));i.ctrlpts=[C.x,C.y-(1+Math.pow(w,1.12)/100)*m*(h/3+1)*k,C.x-(1+Math.pow(w,1.12)/100)*m*(h/3+1)*A,C.y]};vn.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};vn.findBezierPoints=function(t,e,n,r,i){var a=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),l=t.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,f=l.value[0],v=r;a.edgeType=v?"multibezier":"bezier",a.ctrlpts=[];for(var g=0;g<u;g++){var h=(.5-e.eles.length/2+n)*o*(i?-1:1),m=void 0,w=Hh(h);v&&(c=s?s.pfValue[g]:o,f=l.value[g]),r?m=c:m=c!==void 0?w*c:void 0;var b=m!==void 0?m:h,E=1-f,C=f,x=this.findMidptPtsEtc(t,e),k=x.midptPts,A=x.vectorNormInverse,p={x:k.x1*E+k.x2*C,y:k.y1*E+k.y2*C};a.ctrlpts.push(p.x+A.x*b,p.y+A.y*b)}};vn.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",a="leftward",o="rightward",s="downward",l="upward",u="auto",c=e.posPts,f=e.srcW,v=e.srcH,g=e.tgtW,h=e.tgtH,m=t.pstyle("edge-distances").value,w=m!=="node-position",b=t.pstyle("taxi-direction").value,E=b,C=t.pstyle("taxi-turn"),x=C.units==="%",k=C.pfValue,A=k<0,p=t.pstyle("taxi-turn-min-distance").pfValue,P=w?(f+g)/2:0,_=w?(v+h)/2:0,O=c.x2-c.x1,D=c.y2-c.y1,L=function(ye,ee){return ye>0?Math.max(ye-ee,0):Math.min(ye+ee,0)},N=L(O,P),R=L(D,_),z=!1;E===u?b=Math.abs(N)>Math.abs(R)?i:r:E===l||E===s?(b=r,z=!0):(E===a||E===o)&&(b=i,z=!0);var H=b===r,W=H?R:N,X=H?D:O,re=Hh(X),ae=!1;!(z&&(x||A))&&(E===s&&X<0||E===l&&X>0||E===a&&X>0||E===o&&X<0)&&(re*=-1,W=re*Math.abs(W),ae=!0);var J;if(x){var $=k<0?1+k:k;J=$*W}else{var U=k<0?W:0;J=U+k*re}var G=function(ye){return Math.abs(ye)<p||Math.abs(ye)>=Math.abs(W)},V=G(J),Y=G(Math.abs(W)-Math.abs(J)),ne=V||Y;if(ne&&!ae)if(H){var se=Math.abs(X)<=v/2,Z=Math.abs(O)<=g/2;if(se){var K=(c.x1+c.x2)/2,ce=c.y1,ve=c.y2;n.segpts=[K,ce,K,ve]}else if(Z){var De=(c.y1+c.y2)/2,Oe=c.x1,Ze=c.x2;n.segpts=[Oe,De,Ze,De]}else n.segpts=[c.x1,c.y2]}else{var nt=Math.abs(X)<=f/2,qe=Math.abs(D)<=h/2;if(nt){var Re=(c.y1+c.y2)/2,be=c.x1,Ce=c.x2;n.segpts=[be,Re,Ce,Re]}else if(qe){var Se=(c.x1+c.x2)/2,ke=c.y1,Le=c.y2;n.segpts=[Se,ke,Se,Le]}else n.segpts=[c.x2,c.y1]}else if(H){var je=c.y1+J+(w?v/2*re:0),Te=c.x1,de=c.x2;n.segpts=[Te,je,de,je]}else{var F=c.x1+J+(w?f/2*re:0),oe=c.y1,pe=c.y2;n.segpts=[F,oe,F,pe]}if(n.isRound){var le=t.pstyle("taxi-radius").value,ue=t.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(le),n.isArcRadius=new Array(n.segpts.length/2).fill(ue)}};vn.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if(n.edgeType==="bezier"){var r=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,v=e.tgtCornerRadius,g=e.srcRs,h=e.tgtRs,m=!Fe(n.startX)||!Fe(n.startY),w=!Fe(n.arrowStartX)||!Fe(n.arrowStartY),b=!Fe(n.endX)||!Fe(n.endY),E=!Fe(n.arrowEndX)||!Fe(n.arrowEndY),C=3,x=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,k=C*x,A=Ci({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),p=A<k,P=Ci({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),_=P<k,O=!1;if(m||w||p){O=!0;var D={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},L=Math.sqrt(D.x*D.x+D.y*D.y),N={x:D.x/L,y:D.y/L},R=Math.max(a,o),z={x:n.ctrlpts[0]+N.x*2*R,y:n.ctrlpts[1]+N.y*2*R},H=u.intersectLine(r.x,r.y,a,o,z.x,z.y,0,f,g);p?(n.ctrlpts[0]=n.ctrlpts[0]+N.x*(k-A),n.ctrlpts[1]=n.ctrlpts[1]+N.y*(k-A)):(n.ctrlpts[0]=H[0]+N.x*k,n.ctrlpts[1]=H[1]+N.y*k)}if(b||E||_){O=!0;var W={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},X=Math.sqrt(W.x*W.x+W.y*W.y),re={x:W.x/X,y:W.y/X},ae=Math.max(a,o),J={x:n.ctrlpts[0]+re.x*2*ae,y:n.ctrlpts[1]+re.y*2*ae},$=c.intersectLine(i.x,i.y,s,l,J.x,J.y,0,v,h);_?(n.ctrlpts[0]=n.ctrlpts[0]+re.x*(k-P),n.ctrlpts[1]=n.ctrlpts[1]+re.y*(k-P)):(n.ctrlpts[0]=$[0]+re.x*k,n.ctrlpts[1]=$[1]+re.y*k)}O&&this.findEndpoints(t)}};vn.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);e.allpts.push(e.endX,e.endY);var r,i;e.ctrlpts.length/2%2===0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,i=.5,e.midX=Yt(e.allpts[r],e.allpts[r+2],e.allpts[r+4],i),e.midY=Yt(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var a=2;a+3<e.allpts.length;a+=2){var o=e.radii[a/2-1],s=e.isArcRadius[a/2-1];e.roundCorners.push(gc({x:e.allpts[a-2],y:e.allpts[a-1]},{x:e.allpts[a],y:e.allpts[a+1],radius:o},{x:e.allpts[a+2],y:e.allpts[a+3]},o,s))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},v=e.roundCorners[c/2],g=[f.x-v.cx,f.y-v.cy],h=v.radius/Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2));g=g.map(function(m){return m*h}),e.midX=v.cx+g[0],e.midY=v.cy+g[1],e.midVector=g}}}};vn.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||Fe(e.startX)&&Fe(e.startY)&&Fe(e.endX)&&Fe(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,xt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};vn.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var n=this,r=n.cy,i=r.hasCompoundNodes(),a={map:new cr,get:function(p){var P=this.map.get(p[0]);return P!=null?P.get(p[1]):null},set:function(p,P){var _=this.map.get(p[0]);_==null&&(_=new cr,this.map.set(p[0],_)),_.set(p[1],P)}},o=[],s=[],l=0;l<t.length;l++){var u=t[l],c=u._private,f=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(f==="haystack"){s.push(u);continue}var v=f==="unbundled-bezier"||f.endsWith("segments")||f==="straight"||f==="straight-triangle"||f.endsWith("taxi"),g=f==="unbundled-bezier"||f==="bezier",h=c.source,m=c.target,w=h.poolIndex(),b=m.poolIndex(),E=[w,b].sort(),C=a.get(E);C==null&&(C={eles:[]},a.set(E,C),o.push(E)),C.eles.push(u),v&&(C.hasUnbundled=!0),g&&(C.hasBezier=!0)}}for(var x=function(p){var P=o[p],_=a.get(P),O=void 0;if(!_.hasUnbundled){var D=_.eles[0].parallelEdges().filter(function(F){return F.isBundledBezier()});tc(_.eles),D.forEach(function(F){return _.eles.push(F)}),_.eles.sort(function(F,oe){return F.poolIndex()-oe.poolIndex()})}var L=_.eles[0],N=L.source(),R=L.target();if(N.poolIndex()>R.poolIndex()){var z=N;N=R,R=z}var H=_.srcPos=N.position(),W=_.tgtPos=R.position(),X=_.srcW=N.outerWidth(),re=_.srcH=N.outerHeight(),ae=_.tgtW=R.outerWidth(),J=_.tgtH=R.outerHeight(),$=_.srcShape=n.nodeShapes[e.getNodeShape(N)],U=_.tgtShape=n.nodeShapes[e.getNodeShape(R)],G=_.srcCornerRadius=N.pstyle("corner-radius").value==="auto"?"auto":N.pstyle("corner-radius").pfValue,V=_.tgtCornerRadius=R.pstyle("corner-radius").value==="auto"?"auto":R.pstyle("corner-radius").pfValue,Y=_.tgtRs=R._private.rscratch,ne=_.srcRs=N._private.rscratch;_.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var se=0;se<_.eles.length;se++){var Z=_.eles[se],K=Z[0]._private.rscratch,ce=Z.pstyle("curve-style").value,ve=ce==="unbundled-bezier"||ce.endsWith("segments")||ce.endsWith("taxi"),De=!N.same(Z.source());if(!_.calculatedIntersection&&N!==R&&(_.hasBezier||_.hasUnbundled)){_.calculatedIntersection=!0;var Oe=$.intersectLine(H.x,H.y,X,re,W.x,W.y,0,G,ne),Ze=_.srcIntn=Oe,nt=U.intersectLine(W.x,W.y,ae,J,H.x,H.y,0,V,Y),qe=_.tgtIntn=nt,Re=_.intersectionPts={x1:Oe[0],x2:nt[0],y1:Oe[1],y2:nt[1]},be=_.posPts={x1:H.x,x2:W.x,y1:H.y,y2:W.y},Ce=nt[1]-Oe[1],Se=nt[0]-Oe[0],ke=Math.sqrt(Se*Se+Ce*Ce),Le=_.vector={x:Se,y:Ce},je=_.vectorNorm={x:Le.x/ke,y:Le.y/ke},Te={x:-je.y,y:je.x};_.nodesOverlap=!Fe(ke)||U.checkPoint(Oe[0],Oe[1],0,ae,J,W.x,W.y,V,Y)||$.checkPoint(nt[0],nt[1],0,X,re,H.x,H.y,G,ne),_.vectorNormInverse=Te,O={nodesOverlap:_.nodesOverlap,dirCounts:_.dirCounts,calculatedIntersection:!0,hasBezier:_.hasBezier,hasUnbundled:_.hasUnbundled,eles:_.eles,srcPos:W,srcRs:Y,tgtPos:H,tgtRs:ne,srcW:ae,srcH:J,tgtW:X,tgtH:re,srcIntn:qe,tgtIntn:Ze,srcShape:U,tgtShape:$,posPts:{x1:be.x2,y1:be.y2,x2:be.x1,y2:be.y1},intersectionPts:{x1:Re.x2,y1:Re.y2,x2:Re.x1,y2:Re.y1},vector:{x:-Le.x,y:-Le.y},vectorNorm:{x:-je.x,y:-je.y},vectorNormInverse:{x:-Te.x,y:-Te.y}}}var de=De?O:_;K.nodesOverlap=de.nodesOverlap,K.srcIntn=de.srcIntn,K.tgtIntn=de.tgtIntn,K.isRound=ce.startsWith("round"),i&&(N.isParent()||N.isChild()||R.isParent()||R.isChild())&&(N.parents().anySame(R)||R.parents().anySame(N)||N.same(R)&&N.isParent())?e.findCompoundLoopPoints(Z,de,se,ve):N===R?e.findLoopPoints(Z,de,se,ve):ce.endsWith("segments")?e.findSegmentsPoints(Z,de):ce.endsWith("taxi")?e.findTaxiPoints(Z,de):ce==="straight"||!ve&&_.eles.length%2===1&&se===Math.floor(_.eles.length/2)?e.findStraightEdgePoints(Z):e.findBezierPoints(Z,de,se,ve,De),e.findEndpoints(Z),e.tryToCorrectInvalidPoints(Z,de),e.checkForInvalidEdgeWarning(Z),e.storeAllpts(Z),e.storeEdgeProjections(Z),e.calculateArrowAngles(Z),e.recalculateEdgeLabelProjections(Z),e.calculateLabelAngles(Z)}},k=0;k<o.length;k++)x(k);this.findHaystackPoints(s)}};function Nv(t){var e=[];if(t!=null){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}vn.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="segments")return Nv(e.segpts)};vn.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return Nv(e.ctrlpts)};vn.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Io={};Io.manualEndptToPx=function(t,e){var n=this,r=t.position(),i=t.outerWidth(),a=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=r.x,s[1]+=r.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(i,a),c=[r.x+Math.cos(l)*u,r.y+Math.sin(l)*u];return n.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,i,a,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};Io.findEndpoints=function(t){var e=this,n,r=t.source()[0],i=t.target()[0],a=r.position(),o=i.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=r._private.rscratch,v=i._private.rscratch,g=t.pstyle("curve-style").value,h=t._private.rscratch,m=h.edgeType,w=g==="taxi",b=m==="self"||m==="compound",E=m==="bezier"||m==="multibezier"||b,C=m!=="bezier",x=m==="straight"||m==="segments",k=m==="segments",A=E||C||x,p=b||w,P=t.pstyle("source-endpoint"),_=p?"outside-to-node":P.value,O=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,D=t.pstyle("target-endpoint"),L=p?"outside-to-node":D.value,N=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;h.srcManEndpt=P,h.tgtManEndpt=D;var R,z,H,W;if(E){var X=[h.ctrlpts[0],h.ctrlpts[1]],re=C?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:X;R=re,z=X}else if(x){var ae=k?h.segpts.slice(0,2):[o.x,o.y],J=k?h.segpts.slice(h.segpts.length-2):[a.x,a.y];R=J,z=ae}if(L==="inside-to-node")n=[o.x,o.y];else if(D.units)n=this.manualEndptToPx(i,D);else if(L==="outside-to-line")n=h.tgtIntn;else if(L==="outside-to-node"||L==="outside-to-node-or-label"?H=R:(L==="outside-to-line"||L==="outside-to-line-or-label")&&(H=[a.x,a.y]),n=e.nodeShapes[this.getNodeShape(i)].intersectLine(o.x,o.y,i.outerWidth(),i.outerHeight(),H[0],H[1],0,N,v),L==="outside-to-node-or-label"||L==="outside-to-line-or-label"){var $=i._private.rscratch,U=$.labelWidth,G=$.labelHeight,V=$.labelX,Y=$.labelY,ne=U/2,se=G/2,Z=i.pstyle("text-valign").value;Z==="top"?Y-=se:Z==="bottom"&&(Y+=se);var K=i.pstyle("text-halign").value;K==="left"?V-=ne:K==="right"&&(V+=ne);var ce=co(H[0],H[1],[V-ne,Y-se,V+ne,Y-se,V+ne,Y+se,V-ne,Y+se],o.x,o.y);if(ce.length>0){var ve=a,De=hi(ve,Gi(n)),Oe=hi(ve,Gi(ce)),Ze=De;if(Oe<De&&(n=ce,Ze=Oe),ce.length>2){var nt=hi(ve,{x:ce[2],y:ce[3]});nt<Ze&&(n=[ce[2],ce[3]])}}}var qe=Qo(n,R,e.arrowShapes[s].spacing(t)+u),Re=Qo(n,R,e.arrowShapes[s].gap(t)+u);if(h.endX=Re[0],h.endY=Re[1],h.arrowEndX=qe[0],h.arrowEndY=qe[1],_==="inside-to-node")n=[a.x,a.y];else if(P.units)n=this.manualEndptToPx(r,P);else if(_==="outside-to-line")n=h.srcIntn;else if(_==="outside-to-node"||_==="outside-to-node-or-label"?W=z:(_==="outside-to-line"||_==="outside-to-line-or-label")&&(W=[o.x,o.y]),n=e.nodeShapes[this.getNodeShape(r)].intersectLine(a.x,a.y,r.outerWidth(),r.outerHeight(),W[0],W[1],0,O,f),_==="outside-to-node-or-label"||_==="outside-to-line-or-label"){var be=r._private.rscratch,Ce=be.labelWidth,Se=be.labelHeight,ke=be.labelX,Le=be.labelY,je=Ce/2,Te=Se/2,de=r.pstyle("text-valign").value;de==="top"?Le-=Te:de==="bottom"&&(Le+=Te);var F=r.pstyle("text-halign").value;F==="left"?ke-=je:F==="right"&&(ke+=je);var oe=co(W[0],W[1],[ke-je,Le-Te,ke+je,Le-Te,ke+je,Le+Te,ke-je,Le+Te],a.x,a.y);if(oe.length>0){var pe=o,le=hi(pe,Gi(n)),ue=hi(pe,Gi(oe)),Ae=le;if(ue<le&&(n=[oe[0],oe[1]],Ae=ue),oe.length>2){var ye=hi(pe,{x:oe[2],y:oe[3]});ye<Ae&&(n=[oe[2],oe[3]])}}}var ee=Qo(n,z,e.arrowShapes[l].spacing(t)+c),we=Qo(n,z,e.arrowShapes[l].gap(t)+c);h.startX=we[0],h.startY=we[1],h.arrowStartX=ee[0],h.arrowStartY=ee[1],A&&(!Fe(h.startX)||!Fe(h.startY)||!Fe(h.endX)||!Fe(h.endY)?h.badLine=!0:h.badLine=!1)};Io.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Io.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var mc={};function oE(t,e,n){for(var r=function(u,c,f,v){return Yt(u,c,f,v)},i=e._private,a=i.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];a.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}}mc.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)oE(this,t,n.allpts.slice(i,i+6))}else if(r==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]});else if(r==="haystack"){var o=n.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};mc.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var mr={};mr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Gr(e)){var n,r,i=t._private,a=t.width(),o=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=i.rscratch,v=i.rstyle;switch(u){case"left":n=l.x-a/2-s;break;case"right":n=l.x+a/2+s;break;default:n=l.x}switch(c){case"top":r=l.y-o/2-s;break;case"bottom":r=l.y+o/2+s;break;default:r=l.y}f.labelX=n,f.labelY=r,v.labelX=n,v.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Fv=function(e,n){var r=Math.atan(n/e);return e===0&&r<0&&(r=r*-1),r},zv=function(e,n){var r=n.x-e.x,i=n.y-e.y;return Fv(r,i)},sE=function(e,n,r,i){var a=uo(0,i-.001,1),o=uo(0,i+.001,1),s=Xi(e,n,r,a),l=Xi(e,n,r,o);return zv(s,l)};mr.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:r.midX,y:r.midY};var o=function(f,v,g){zr(n.rscratch,f,v,g),zr(n.rstyle,f,v,g)};o("labelX",null,e.x),o("labelY",null,e.y);var s=Fv(r.midDispX,r.midDispY);o("labelAutoAngle",null,s);var l=function c(){if(c.cache)return c.cache;for(var f=[],v=0;v+5<r.allpts.length;v+=4){var g={x:r.allpts[v],y:r.allpts[v+1]},h={x:r.allpts[v+2],y:r.allpts[v+3]},m={x:r.allpts[v+4],y:r.allpts[v+5]};f.push({p0:g,p1:h,p2:m,startDist:0,length:0,segments:[]})}var w=n.rstyle.bezierPts,b=i.bezierProjPcts.length;function E(p,P,_,O,D){var L=Ci(P,_),N=p.segments[p.segments.length-1],R={p0:P,p1:_,t0:O,t1:D,startDist:N?N.startDist+N.length:0,length:L};p.segments.push(R),p.length+=L}for(var C=0;C<f.length;C++){var x=f[C],k=f[C-1];k&&(x.startDist=k.startDist+k.length),E(x,x.p0,w[C*b],0,i.bezierProjPcts[0]);for(var A=0;A<b-1;A++)E(x,w[C*b+A],w[C*b+A+1],i.bezierProjPcts[A],i.bezierProjPcts[A+1]);E(x,w[C*b+b-1],x.p2,i.bezierProjPcts[b-1],1)}return c.cache=f},u=function(f){var v,g=f==="source";if(a[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=l(),w,b=0,E=0,C=0;C<m.length;C++){for(var x=m[g?C:m.length-1-C],k=0;k<x.segments.length;k++){var A=x.segments[g?k:x.segments.length-1-k],p=C===m.length-1&&k===x.segments.length-1;if(b=E,E+=A.length,E>=h||p){w={cp:x,segment:A};break}}if(w)break}var P=w.cp,_=w.segment,O=(h-b)/_.length,D=_.t1-_.t0,L=g?_.t0+D*O:_.t1-D*O;L=uo(0,L,1),e=Xi(P.p0,P.p1,P.p2,L),v=sE(P.p0,P.p1,P.p2,L);break}case"straight":case"segments":case"haystack":{for(var N=0,R,z,H,W,X=r.allpts.length,re=0;re+3<X&&(g?(H={x:r.allpts[re],y:r.allpts[re+1]},W={x:r.allpts[re+2],y:r.allpts[re+3]}):(H={x:r.allpts[X-2-re],y:r.allpts[X-1-re]},W={x:r.allpts[X-4-re],y:r.allpts[X-3-re]}),R=Ci(H,W),z=N,N+=R,!(N>=h));re+=2);var ae=h-z,J=ae/R;J=uo(0,J,1),e=v0(H,W,J),v=zv(H,W);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,v)}};u("source"),u("target"),this.applyLabelDimensions(t)}};mr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};mr.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),a=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,s=Xn(n.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=i.height/l,c=u*a,f=i.width,v=i.height+(l-1)*(a-1)*u;zr(n.rstyle,"labelWidth",e,f),zr(n.rscratch,"labelWidth",e,f),zr(n.rstyle,"labelHeight",e,v),zr(n.rscratch,"labelHeight",e,v),zr(n.rscratch,"labelLineHeight",e,c)};mr.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,a=t.pstyle("text-transform").value,o=function(U,G){return G?(zr(n.rscratch,U,e,G),G):Xn(n.rscratch,U,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="â",c=i.split(`
`),f=t.pstyle("text-max-width").pfValue,v=t.pstyle("text-overflow-wrap").value,g=v==="anywhere",h=[],m=/[\s\u200b]+|$/g,w=0;w<c.length;w++){var b=c[w],E=this.calculateLabelDimensions(t,b),C=E.width;if(g){var x=b.split("").join(u);b=x}if(C>f){var k=b.matchAll(m),A="",p=0,P=Dn(k),_;try{for(P.s();!(_=P.n()).done;){var O=_.value,D=O[0],L=b.substring(p,O.index);p=O.index+D.length;var N=A.length===0?L:A+L+D,R=this.calculateLabelDimensions(t,N),z=R.width;z<=f?A+=L+D:(A&&h.push(A),A=L+D)}}catch($){P.e($)}finally{P.f()}A.match(/^[\s\u200b]+$/)||h.push(A)}else h.push(b)}o("labelWrapCachedLines",h),i=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var H=t.pstyle("text-max-width").pfValue,W="",X="â¦",re=!1;if(this.calculateLabelDimensions(t,i).width<H)return i;for(var ae=0;ae<i.length;ae++){var J=this.calculateLabelDimensions(t,W+i[ae]+X).width;if(J>H)break;W+=i[ae],ae===i.length-1&&(re=!0)}return re||(W+=X),W}return i};mr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};mr.calculateLabelDimensions=function(t,e){var n=this,r=n.cy.window(),i=r.document,a=jr(e,t._private.labelDimsKey),o=n.labelDimCache||(n.labelDimCache=[]),s=o[a];if(s!=null)return s;var l=0,u=t.pstyle("font-style").strValue,c=t.pstyle("font-size").pfValue,f=t.pstyle("font-family").strValue,v=t.pstyle("font-weight").strValue,g=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!g){g=this.labelCalcCanvas=i.createElement("canvas"),h=this.labelCalcCanvasContext=g.getContext("2d");var m=g.style;m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none"}h.font="".concat(u," ").concat(v," ").concat(c,"px ").concat(f);for(var w=0,b=0,E=e.split(`
`),C=0;C<E.length;C++){var x=E[C],k=h.measureText(x),A=Math.ceil(k.width),p=c;w=Math.max(A,w),b+=p}return w+=l,b+=l,o[a]={width:w,height:b}};mr.calculateLabelAngle=function(t,e){var n=t._private,r=n.rscratch,i=t.isEdge(),a=e?e+"-":"",o=t.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?r.labelAutoAngle:s==="autorotate"?0:o.pfValue};mr.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private,i=r.rscratch;i.labelAngle=e.calculateLabelAngle(t),n&&(i.sourceLabelAngle=e.calculateLabelAngle(t,"source"),i.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Hv={},ld=28,ud=!1;Hv.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if(n==="cutrectangle"&&(t.width()<ld||t.height()<ld))return ud||(xt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ud=!0),"rectangle";if(t.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n};var yl={};yl.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),n=this,r=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],c=u._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;r(s)}).on("style.* background.*",function(o){var s=o.target;r(s,!1)});var i=function(o){if(o){var s=n.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(r(u.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var v=s[f];v(o,e)}n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)};yl.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};yl.recalculateRenderedStyle=function(t,e){var n=function(x){return x._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<t.length;a++){var o=t[a],s=o._private,l=s.rstyle;o.isEdge()&&(!n(o.source())||!n(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):r.push(o),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],f=c._private,v=f.rstyle,g=c.position();this.recalculateNodeLabelProjection(c),v.nodeX=g.x,v.nodeY=g.y,v.nodeW=c.pstyle("width").pfValue,v.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var h=0;h<r.length;h++){var m=r[h],w=m._private,b=w.rstyle,E=w.rscratch;b.srcX=E.arrowStartX,b.srcY=E.arrowStartY,b.tgtX=E.arrowEndX,b.tgtY=E.arrowEndY,b.midX=E.midX,b.midY=E.midY,b.labelAngle=E.labelAngle,b.sourceLabelAngle=E.sourceLabelAngle,b.targetLabelAngle=E.targetLabelAngle}}};var bl={};bl.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?e.push(r):i.inDragLayer?t.drag.push(r):t.nondrag.push(r)}for(var n=0;n<e.length;n++){var r=e[n];t.drag.push(r)}}};bl.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};bl.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Cv),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var $v={};[Mi,Us,vn,Io,mc,mr,Hv,yl,bl].forEach(function(t){Je($v,t)});var Vv={};Vv.getCachedImage=function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},a=i[t];if(a)return a.image.complete||a.image.addEventListener("load",n),a.image;a=i[t]=i[t]||{};var o=a.image=new Image;o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0});var s="data:",l=t.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var ma={};ma.registerBinding=function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var a=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var l=this.binder(s);a.push(l.on.apply(l,i))}}return a}var l=this.binder(t);return l.on.apply(l,i)};ma.binder=function(t){var e=this,n=e.cy.window(),r=t===n||t===n.document||t===n.document.body||Bm(t);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var o=function(l,u,c){var f=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};ma.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};ma.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};ma.load=function(){var t=this,e=t.cy.window(),n=function(F){return F.selected()},r=function(F){var oe=F.getRootNode();if(oe&&oe.nodeType===11&&oe.host!==void 0)return oe},i=function(F,oe,pe,le){F==null&&(F=t.cy);for(var ue=0;ue<oe.length;ue++){var Ae=oe[ue];F.emit({originalEvent:pe,type:Ae,position:le})}},a=function(F){return F.shiftKey||F.metaKey||F.ctrlKey},o=function(F,oe){var pe=!0;if(t.cy.hasCompoundNodes()&&F&&F.pannable())for(var le=0;oe&&le<oe.length;le++){var F=oe[le];if(F.isNode()&&F.isParent()&&!F.pannable()){pe=!1;break}}else pe=!0;return pe},s=function(F){F[0]._private.grabbed=!0},l=function(F){F[0]._private.grabbed=!1},u=function(F){F[0]._private.rscratch.inDragLayer=!0},c=function(F){F[0]._private.rscratch.inDragLayer=!1},f=function(F){F[0]._private.rscratch.isGrabTarget=!0},v=function(F){F[0]._private.rscratch.isGrabTarget=!1},g=function(F,oe){var pe=oe.addToList,le=pe.has(F);!le&&F.grabbable()&&!F.locked()&&(pe.merge(F),s(F))},h=function(F,oe){if(F.cy().hasCompoundNodes()&&!(oe.inDragLayer==null&&oe.addToList==null)){var pe=F.descendants();oe.inDragLayer&&(pe.forEach(u),pe.connectedEdges().forEach(u)),oe.addToList&&g(pe,oe)}},m=function(F,oe){oe=oe||{};var pe=F.cy().hasCompoundNodes();oe.inDragLayer&&(F.forEach(u),F.neighborhood().stdFilter(function(le){return!pe||le.isEdge()}).forEach(u)),oe.addToList&&F.forEach(function(le){g(le,oe)}),h(F,oe),E(F,{inDragLayer:oe.inDragLayer}),t.updateCachedGrabbedEles()},w=m,b=function(F){F&&(t.getCachedZSortedEles().forEach(function(oe){l(oe),c(oe),v(oe)}),t.updateCachedGrabbedEles())},E=function(F,oe){if(!(oe.inDragLayer==null&&oe.addToList==null)&&F.cy().hasCompoundNodes()){var pe=F.ancestors().orphans();if(!pe.same(F)){var le=pe.descendants().spawnSelf().merge(pe).unmerge(F).unmerge(F.descendants()),ue=le.connectedEdges();oe.inDragLayer&&(ue.forEach(u),le.forEach(u)),oe.addToList&&le.forEach(function(Ae){g(Ae,oe)})}}},C=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},x=typeof MutationObserver<"u",k=typeof ResizeObserver<"u";x?(t.removeObserver=new MutationObserver(function(de){for(var F=0;F<de.length;F++){var oe=de[F],pe=oe.removedNodes;if(pe)for(var le=0;le<pe.length;le++){var ue=pe[le];if(ue===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(de){t.destroy()});var A=To(function(){t.cy.resize()},100);x&&(t.styleObserver=new MutationObserver(A),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",A),k&&(t.resizeObserver=new ResizeObserver(A),t.resizeObserver.observe(t.container));var p=function(F,oe){for(;F!=null;)oe(F),F=F.parentNode},P=function(){t.invalidateContainerClientCoordsCache()};p(t.container,function(de){t.registerBinding(de,"transitionend",P),t.registerBinding(de,"animationend",P),t.registerBinding(de,"scroll",P)}),t.registerBinding(t.container,"contextmenu",function(de){de.preventDefault()});var _=function(){return t.selection[4]!==0},O=function(F){for(var oe=t.findContainerClientCoords(),pe=oe[0],le=oe[1],ue=oe[2],Ae=oe[3],ye=F.touches?F.touches:[F],ee=!1,we=0;we<ye.length;we++){var Me=ye[we];if(pe<=Me.clientX&&Me.clientX<=pe+ue&&le<=Me.clientY&&Me.clientY<=le+Ae){ee=!0;break}}if(!ee)return!1;for(var _e=t.container,Be=F.target,Ge=Be.parentNode,We=!1;Ge;){if(Ge===_e){We=!0;break}Ge=Ge.parentNode}return!!We};t.registerBinding(t.container,"mousedown",function(F){if(O(F)&&!(t.hoverData.which===1&&F.which!==1)){F.preventDefault(),C(),t.hoverData.capture=!0,t.hoverData.which=F.which;var oe=t.cy,pe=[F.clientX,F.clientY],le=t.projectIntoViewport(pe[0],pe[1]),ue=t.selection,Ae=t.findNearestElements(le[0],le[1],!0,!1),ye=Ae[0],ee=t.dragData.possibleDragElements;t.hoverData.mdownPos=le,t.hoverData.mdownGPos=pe;var we=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var at=t.hoverData.down;at?at.emit({originalEvent:F,type:"taphold",position:{x:le[0],y:le[1]}}):oe.emit({originalEvent:F,type:"taphold",position:{x:le[0],y:le[1]}})}},t.tapholdDuration)};if(F.which==3){t.hoverData.cxtStarted=!0;var Me={originalEvent:F,type:"cxttapstart",position:{x:le[0],y:le[1]}};ye?(ye.activate(),ye.emit(Me),t.hoverData.down=ye):oe.emit(Me),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(F.which==1){ye&&ye.activate();{if(ye!=null&&t.nodeIsGrabbable(ye)){var _e=function(at){return{originalEvent:F,type:at,position:{x:le[0],y:le[1]}}},Be=function(at){at.emit(_e("grab"))};if(f(ye),!ye.selected())ee=t.dragData.possibleDragElements=oe.collection(),w(ye,{addToList:ee}),ye.emit(_e("grabon")).emit(_e("grab"));else{ee=t.dragData.possibleDragElements=oe.collection();var Ge=oe.$(function(We){return We.isNode()&&We.selected()&&t.nodeIsGrabbable(We)});m(Ge,{addToList:ee}),ye.emit(_e("grabon")),Ge.forEach(Be)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ye,t.hoverData.downs=Ae,t.hoverData.downTime=new Date().getTime()}i(ye,["mousedown","tapstart","vmousedown"],F,{x:le[0],y:le[1]}),ye==null?(ue[4]=1,t.data.bgActivePosistion={x:le[0],y:le[1]},t.redrawHint("select",!0),t.redraw()):ye.pannable()&&(ue[4]=1),we()}ue[0]=ue[2]=le[0],ue[1]=ue[3]=le[1]}},!1);var D=r(t.container);t.registerBinding([e,D],"mousemove",function(F){var oe=t.hoverData.capture;if(!(!oe&&!O(F))){var pe=!1,le=t.cy,ue=le.zoom(),Ae=[F.clientX,F.clientY],ye=t.projectIntoViewport(Ae[0],Ae[1]),ee=t.hoverData.mdownPos,we=t.hoverData.mdownGPos,Me=t.selection,_e=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(_e=t.findNearestElement(ye[0],ye[1],!0,!1));var Be=t.hoverData.last,Ge=t.hoverData.down,We=[ye[0]-Me[2],ye[1]-Me[3]],at=t.dragData.possibleDragElements,mt;if(we){var Mt=Ae[0]-we[0],$t=Mt*Mt,ut=Ae[1]-we[1],ot=ut*ut,Pt=$t+ot;t.hoverData.isOverThresholdDrag=mt=Pt>=t.desktopTapThreshold2}var zt=a(F);mt&&(t.hoverData.tapholdCancelled=!0);var Lt=function(){var Bn=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Bn.length===0?(Bn.push(We[0]),Bn.push(We[1])):(Bn[0]+=We[0],Bn[1]+=We[1])};pe=!0,i(_e,["mousemove","vmousemove","tapdrag"],F,{x:ye[0],y:ye[1]});var kn=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||le.emit({originalEvent:F,type:"boxstart",position:{x:ye[0],y:ye[1]}}),Me[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(mt){var qt={originalEvent:F,type:"cxtdrag",position:{x:ye[0],y:ye[1]}};Ge?Ge.emit(qt):le.emit(qt),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||_e!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:F,type:"cxtdragout",position:{x:ye[0],y:ye[1]}}),t.hoverData.cxtOver=_e,_e&&_e.emit({originalEvent:F,type:"cxtdragover",position:{x:ye[0],y:ye[1]}}))}}else if(t.hoverData.dragging){if(pe=!0,le.panningEnabled()&&le.userPanningEnabled()){var Jt;if(t.hoverData.justStartedPan){var An=t.hoverData.mdownPos;Jt={x:(ye[0]-An[0])*ue,y:(ye[1]-An[1])*ue},t.hoverData.justStartedPan=!1}else Jt={x:We[0]*ue,y:We[1]*ue};le.panBy(Jt),le.emit("dragpan"),t.hoverData.dragged=!0}ye=t.projectIntoViewport(F.clientX,F.clientY)}else if(Me[4]==1&&(Ge==null||Ge.pannable())){if(mt){if(!t.hoverData.dragging&&le.boxSelectionEnabled()&&(zt||!le.panningEnabled()||!le.userPanningEnabled()))kn();else if(!t.hoverData.selecting&&le.panningEnabled()&&le.userPanningEnabled()){var yn=o(Ge,t.hoverData.downs);yn&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Me[4]=0,t.data.bgActivePosistion=Gi(ee),t.redrawHint("select",!0),t.redraw())}Ge&&Ge.pannable()&&Ge.active()&&Ge.unactivate()}}else{if(Ge&&Ge.pannable()&&Ge.active()&&Ge.unactivate(),(!Ge||!Ge.grabbed())&&_e!=Be&&(Be&&i(Be,["mouseout","tapdragout"],F,{x:ye[0],y:ye[1]}),_e&&i(_e,["mouseover","tapdragover"],F,{x:ye[0],y:ye[1]}),t.hoverData.last=_e),Ge)if(mt){if(le.boxSelectionEnabled()&&zt)Ge&&Ge.grabbed()&&(b(at),Ge.emit("freeon"),at.emit("free"),t.dragData.didDrag&&(Ge.emit("dragfreeon"),at.emit("dragfree"))),kn();else if(Ge&&Ge.grabbed()&&t.nodeIsDraggable(Ge)){var Xt=!t.dragData.didDrag;Xt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||m(at,{inDragLayer:!0});var Vt={x:0,y:0};if(Fe(We[0])&&Fe(We[1])&&(Vt.x+=We[0],Vt.y+=We[1],Xt)){var sn=t.hoverData.dragDelta;sn&&Fe(sn[0])&&Fe(sn[1])&&(Vt.x+=sn[0],Vt.y+=sn[1])}t.hoverData.draggingEles=!0,at.silentShift(Vt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Lt();pe=!0}if(Me[2]=ye[0],Me[3]=ye[1],pe)return F.stopPropagation&&F.stopPropagation(),F.preventDefault&&F.preventDefault(),!1}},!1);var L,N,R;t.registerBinding(e,"mouseup",function(F){if(!(t.hoverData.which===1&&F.which!==1&&t.hoverData.capture)){var oe=t.hoverData.capture;if(oe){t.hoverData.capture=!1;var pe=t.cy,le=t.projectIntoViewport(F.clientX,F.clientY),ue=t.selection,Ae=t.findNearestElement(le[0],le[1],!0,!1),ye=t.dragData.possibleDragElements,ee=t.hoverData.down,we=a(F);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ee&&ee.unactivate(),t.hoverData.which===3){var Me={originalEvent:F,type:"cxttapend",position:{x:le[0],y:le[1]}};if(ee?ee.emit(Me):pe.emit(Me),!t.hoverData.cxtDragged){var _e={originalEvent:F,type:"cxttap",position:{x:le[0],y:le[1]}};ee?ee.emit(_e):pe.emit(_e)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(i(Ae,["mouseup","tapend","vmouseup"],F,{x:le[0],y:le[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(i(ee,["click","tap","vclick"],F,{x:le[0],y:le[1]}),N=!1,F.timeStamp-R<=pe.multiClickDebounceTime()?(L&&clearTimeout(L),N=!0,R=null,i(ee,["dblclick","dbltap","vdblclick"],F,{x:le[0],y:le[1]})):(L=setTimeout(function(){N||i(ee,["oneclick","onetap","voneclick"],F,{x:le[0],y:le[1]})},pe.multiClickDebounceTime()),R=F.timeStamp)),ee==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!a(F)&&(pe.$(n).unselect(["tapunselect"]),ye.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ye=pe.collection()),Ae==ee&&!t.dragData.didDrag&&!t.hoverData.selecting&&Ae!=null&&Ae._private.selectable&&(t.hoverData.dragging||(pe.selectionType()==="additive"||we?Ae.selected()?Ae.unselect(["tapunselect"]):Ae.select(["tapselect"]):we||(pe.$(n).unmerge(Ae).unselect(["tapunselect"]),Ae.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Be=pe.collection(t.getAllInBox(ue[0],ue[1],ue[2],ue[3]));t.redrawHint("select",!0),Be.length>0&&t.redrawHint("eles",!0),pe.emit({type:"boxend",originalEvent:F,position:{x:le[0],y:le[1]}});var Ge=function(mt){return mt.selectable()&&!mt.selected()};pe.selectionType()==="additive"||we||pe.$(n).unmerge(Be).unselect(),Be.emit("box").stdFilter(Ge).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ue[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var We=ee&&ee.grabbed();b(ye),We&&(ee.emit("freeon"),ye.emit("free"),t.dragData.didDrag&&(ee.emit("dragfreeon"),ye.emit("dragfree")))}}ue[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var z=function(F){if(!t.scrollingPage){var oe=t.cy,pe=oe.zoom(),le=oe.pan(),ue=t.projectIntoViewport(F.clientX,F.clientY),Ae=[ue[0]*pe+le.x,ue[1]*pe+le.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||_()){F.preventDefault();return}if(oe.panningEnabled()&&oe.userPanningEnabled()&&oe.zoomingEnabled()&&oe.userZoomingEnabled()){F.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var ye;F.deltaY!=null?ye=F.deltaY/-250:F.wheelDeltaY!=null?ye=F.wheelDeltaY/1e3:ye=F.wheelDelta/1e3,ye=ye*t.wheelSensitivity;var ee=F.deltaMode===1;ee&&(ye*=33);var we=oe.zoom()*Math.pow(10,ye);F.type==="gesturechange"&&(we=t.gestureStartZoom*F.scale),oe.zoom({level:we,renderedPosition:{x:Ae[0],y:Ae[1]}}),oe.emit(F.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",z,!0),t.registerBinding(e,"scroll",function(F){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(F){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||F.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(de){t.hasTouchStarted||z(de)},!0),t.registerBinding(t.container,"mouseout",function(F){var oe=t.projectIntoViewport(F.clientX,F.clientY);t.cy.emit({originalEvent:F,type:"mouseout",position:{x:oe[0],y:oe[1]}})},!1),t.registerBinding(t.container,"mouseover",function(F){var oe=t.projectIntoViewport(F.clientX,F.clientY);t.cy.emit({originalEvent:F,type:"mouseover",position:{x:oe[0],y:oe[1]}})},!1);var H,W,X,re,ae,J,$,U,G,V,Y,ne,se,Z=function(F,oe,pe,le){return Math.sqrt((pe-F)*(pe-F)+(le-oe)*(le-oe))},K=function(F,oe,pe,le){return(pe-F)*(pe-F)+(le-oe)*(le-oe)},ce;t.registerBinding(t.container,"touchstart",ce=function(F){if(t.hasTouchStarted=!0,!!O(F)){C(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var oe=t.cy,pe=t.touchData.now,le=t.touchData.earlier;if(F.touches[0]){var ue=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);pe[0]=ue[0],pe[1]=ue[1]}if(F.touches[1]){var ue=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);pe[2]=ue[0],pe[3]=ue[1]}if(F.touches[2]){var ue=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);pe[4]=ue[0],pe[5]=ue[1]}if(F.touches[1]){t.touchData.singleTouchMoved=!0,b(t.dragData.touchDragEles);var Ae=t.findContainerClientCoords();G=Ae[0],V=Ae[1],Y=Ae[2],ne=Ae[3],H=F.touches[0].clientX-G,W=F.touches[0].clientY-V,X=F.touches[1].clientX-G,re=F.touches[1].clientY-V,se=0<=H&&H<=Y&&0<=X&&X<=Y&&0<=W&&W<=ne&&0<=re&&re<=ne;var ye=oe.pan(),ee=oe.zoom();ae=Z(H,W,X,re),J=K(H,W,X,re),$=[(H+X)/2,(W+re)/2],U=[($[0]-ye.x)/ee,($[1]-ye.y)/ee];var we=200,Me=we*we;if(J<Me&&!F.touches[2]){var _e=t.findNearestElement(pe[0],pe[1],!0,!0),Be=t.findNearestElement(pe[2],pe[3],!0,!0);_e&&_e.isNode()?(_e.activate().emit({originalEvent:F,type:"cxttapstart",position:{x:pe[0],y:pe[1]}}),t.touchData.start=_e):Be&&Be.isNode()?(Be.activate().emit({originalEvent:F,type:"cxttapstart",position:{x:pe[0],y:pe[1]}}),t.touchData.start=Be):oe.emit({originalEvent:F,type:"cxttapstart",position:{x:pe[0],y:pe[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(F.touches[2])oe.boxSelectionEnabled()&&F.preventDefault();else if(!F.touches[1]){if(F.touches[0]){var Ge=t.findNearestElements(pe[0],pe[1],!0,!0),We=Ge[0];if(We!=null&&(We.activate(),t.touchData.start=We,t.touchData.starts=Ge,t.nodeIsGrabbable(We))){var at=t.dragData.touchDragEles=oe.collection(),mt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),We.selected()?(mt=oe.$(function(Pt){return Pt.selected()&&t.nodeIsGrabbable(Pt)}),m(mt,{addToList:at})):w(We,{addToList:at}),f(We);var Mt=function(zt){return{originalEvent:F,type:zt,position:{x:pe[0],y:pe[1]}}};We.emit(Mt("grabon")),mt?mt.forEach(function(Pt){Pt.emit(Mt("grab"))}):We.emit(Mt("grab"))}i(We,["touchstart","tapstart","vmousedown"],F,{x:pe[0],y:pe[1]}),We==null&&(t.data.bgActivePosistion={x:ue[0],y:ue[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&i(t.touchData.start,["taphold"],F,{x:pe[0],y:pe[1]})},t.tapholdDuration)}}if(F.touches.length>=1){for(var $t=t.touchData.startPosition=[null,null,null,null,null,null],ut=0;ut<pe.length;ut++)$t[ut]=le[ut]=pe[ut];var ot=F.touches[0];t.touchData.startGPosition=[ot.clientX,ot.clientY]}}},!1);var ve;t.registerBinding(e,"touchmove",ve=function(F){var oe=t.touchData.capture;if(!(!oe&&!O(F))){var pe=t.selection,le=t.cy,ue=t.touchData.now,Ae=t.touchData.earlier,ye=le.zoom();if(F.touches[0]){var ee=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ue[0]=ee[0],ue[1]=ee[1]}if(F.touches[1]){var ee=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);ue[2]=ee[0],ue[3]=ee[1]}if(F.touches[2]){var ee=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);ue[4]=ee[0],ue[5]=ee[1]}var we=t.touchData.startGPosition,Me;if(oe&&F.touches[0]&&we){for(var _e=[],Be=0;Be<ue.length;Be++)_e[Be]=ue[Be]-Ae[Be];var Ge=F.touches[0].clientX-we[0],We=Ge*Ge,at=F.touches[0].clientY-we[1],mt=at*at,Mt=We+mt;Me=Mt>=t.touchTapThreshold2}if(oe&&t.touchData.cxt){F.preventDefault();var $t=F.touches[0].clientX-G,ut=F.touches[0].clientY-V,ot=F.touches[1].clientX-G,Pt=F.touches[1].clientY-V,zt=K($t,ut,ot,Pt),Lt=zt/J,kn=150,qt=kn*kn,Jt=1.5,An=Jt*Jt;if(Lt>=An||zt>=qt){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var yn={originalEvent:F,type:"cxttapend",position:{x:ue[0],y:ue[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(yn),t.touchData.start=null):le.emit(yn)}}if(oe&&t.touchData.cxt){var yn={originalEvent:F,type:"cxtdrag",position:{x:ue[0],y:ue[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(yn):le.emit(yn),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Xt=t.findNearestElement(ue[0],ue[1],!0,!0);(!t.touchData.cxtOver||Xt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:F,type:"cxtdragout",position:{x:ue[0],y:ue[1]}}),t.touchData.cxtOver=Xt,Xt&&Xt.emit({originalEvent:F,type:"cxtdragover",position:{x:ue[0],y:ue[1]}}))}else if(oe&&F.touches[2]&&le.boxSelectionEnabled())F.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||le.emit({originalEvent:F,type:"boxstart",position:{x:ue[0],y:ue[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,pe[4]=1,!pe||pe.length===0||pe[0]===void 0?(pe[0]=(ue[0]+ue[2]+ue[4])/3,pe[1]=(ue[1]+ue[3]+ue[5])/3,pe[2]=(ue[0]+ue[2]+ue[4])/3+1,pe[3]=(ue[1]+ue[3]+ue[5])/3+1):(pe[2]=(ue[0]+ue[2]+ue[4])/3,pe[3]=(ue[1]+ue[3]+ue[5])/3),t.redrawHint("select",!0),t.redraw();else if(oe&&F.touches[1]&&!t.touchData.didSelect&&le.zoomingEnabled()&&le.panningEnabled()&&le.userZoomingEnabled()&&le.userPanningEnabled()){F.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Vt=t.dragData.touchDragEles;if(Vt){t.redrawHint("drag",!0);for(var sn=0;sn<Vt.length;sn++){var ii=Vt[sn]._private;ii.grabbed=!1,ii.rscratch.inDragLayer=!1}}var Bn=t.touchData.start,$t=F.touches[0].clientX-G,ut=F.touches[0].clientY-V,ot=F.touches[1].clientX-G,Pt=F.touches[1].clientY-V,Bo=Z($t,ut,ot,Pt),Ro=Bo/ae;if(se){var Sl=$t-H,Dr=ut-W,No=ot-X,xa=Pt-re,Ea=(Sl+No)/2,Di=(Dr+xa)/2,Lr=le.zoom(),Ca=Lr*Ro,er=le.pan(),Sa=U[0]*Lr+er.x,Ta=U[1]*Lr+er.y,Fo={x:-Ca/Lr*(Sa-er.x-Ea)+Sa,y:-Ca/Lr*(Ta-er.y-Di)+Ta};if(Bn&&Bn.active()){var Vt=t.dragData.touchDragEles;b(Vt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Bn.unactivate().emit("freeon"),Vt.emit("free"),t.dragData.didDrag&&(Bn.emit("dragfreeon"),Vt.emit("dragfree"))}le.viewport({zoom:Ca,pan:Fo,cancelOnFailedZoom:!0}),le.emit("pinchzoom"),ae=Bo,H=$t,W=ut,X=ot,re=Pt,t.pinching=!0}if(F.touches[0]){var ee=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ue[0]=ee[0],ue[1]=ee[1]}if(F.touches[1]){var ee=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);ue[2]=ee[0],ue[3]=ee[1]}if(F.touches[2]){var ee=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);ue[4]=ee[0],ue[5]=ee[1]}}else if(F.touches[0]&&!t.touchData.didSelect){var bn=t.touchData.start,ka=t.touchData.last,Xt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Xt=t.findNearestElement(ue[0],ue[1],!0,!0)),oe&&bn!=null&&F.preventDefault(),oe&&bn!=null&&t.nodeIsDraggable(bn))if(Me){var Vt=t.dragData.touchDragEles,Li=!t.dragData.didDrag;Li&&m(Vt,{inDragLayer:!0}),t.dragData.didDrag=!0;var ai={x:0,y:0};if(Fe(_e[0])&&Fe(_e[1])&&(ai.x+=_e[0],ai.y+=_e[1],Li)){t.redrawHint("eles",!0);var _n=t.touchData.dragDelta;_n&&Fe(_n[0])&&Fe(_n[1])&&(ai.x+=_n[0],ai.y+=_n[1])}t.hoverData.draggingEles=!0,Vt.silentShift(ai).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ae[0]&&t.touchData.startPosition[1]==Ae[1]&&t.redrawHint("eles",!0),t.redraw()}else{var _n=t.touchData.dragDelta=t.touchData.dragDelta||[];_n.length===0?(_n.push(_e[0]),_n.push(_e[1])):(_n[0]+=_e[0],_n[1]+=_e[1])}if(i(bn||Xt,["touchmove","tapdrag","vmousemove"],F,{x:ue[0],y:ue[1]}),(!bn||!bn.grabbed())&&Xt!=ka&&(ka&&ka.emit({originalEvent:F,type:"tapdragout",position:{x:ue[0],y:ue[1]}}),Xt&&Xt.emit({originalEvent:F,type:"tapdragover",position:{x:ue[0],y:ue[1]}})),t.touchData.last=Xt,oe)for(var sn=0;sn<ue.length;sn++)ue[sn]&&t.touchData.startPosition[sn]&&Me&&(t.touchData.singleTouchMoved=!0);if(oe&&(bn==null||bn.pannable())&&le.panningEnabled()&&le.userPanningEnabled()){var zo=o(bn,t.touchData.starts);zo&&(F.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Gi(t.touchData.startPosition)),t.swipePanning?(le.panBy({x:_e[0]*ye,y:_e[1]*ye}),le.emit("dragpan")):Me&&(t.swipePanning=!0,le.panBy({x:Ge*ye,y:at*ye}),le.emit("dragpan"),bn&&(bn.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ee=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ue[0]=ee[0],ue[1]=ee[1]}}for(var Be=0;Be<ue.length;Be++)Ae[Be]=ue[Be];oe&&F.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var De;t.registerBinding(e,"touchcancel",De=function(F){var oe=t.touchData.start;t.touchData.capture=!1,oe&&oe.unactivate()});var Oe,Ze,nt,qe;if(t.registerBinding(e,"touchend",Oe=function(F){var oe=t.touchData.start,pe=t.touchData.capture;if(pe)F.touches.length===0&&(t.touchData.capture=!1),F.preventDefault();else return;var le=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ue=t.cy,Ae=ue.zoom(),ye=t.touchData.now,ee=t.touchData.earlier;if(F.touches[0]){var we=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ye[0]=we[0],ye[1]=we[1]}if(F.touches[1]){var we=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);ye[2]=we[0],ye[3]=we[1]}if(F.touches[2]){var we=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);ye[4]=we[0],ye[5]=we[1]}oe&&oe.unactivate();var Me;if(t.touchData.cxt){if(Me={originalEvent:F,type:"cxttapend",position:{x:ye[0],y:ye[1]}},oe?oe.emit(Me):ue.emit(Me),!t.touchData.cxtDragged){var _e={originalEvent:F,type:"cxttap",position:{x:ye[0],y:ye[1]}};oe?oe.emit(_e):ue.emit(_e)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!F.touches[2]&&ue.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Be=ue.collection(t.getAllInBox(le[0],le[1],le[2],le[3]));le[0]=void 0,le[1]=void 0,le[2]=void 0,le[3]=void 0,le[4]=0,t.redrawHint("select",!0),ue.emit({type:"boxend",originalEvent:F,position:{x:ye[0],y:ye[1]}});var Ge=function(qt){return qt.selectable()&&!qt.selected()};Be.emit("box").stdFilter(Ge).select().emit("boxselect"),Be.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(oe!=null&&oe.unactivate(),F.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!F.touches[1]){if(!F.touches[0]){if(!F.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var We=t.dragData.touchDragEles;if(oe!=null){var at=oe._private.grabbed;b(We),t.redrawHint("drag",!0),t.redrawHint("eles",!0),at&&(oe.emit("freeon"),We.emit("free"),t.dragData.didDrag&&(oe.emit("dragfreeon"),We.emit("dragfree"))),i(oe,["touchend","tapend","vmouseup","tapdragout"],F,{x:ye[0],y:ye[1]}),oe.unactivate(),t.touchData.start=null}else{var mt=t.findNearestElement(ye[0],ye[1],!0,!0);i(mt,["touchend","tapend","vmouseup","tapdragout"],F,{x:ye[0],y:ye[1]})}var Mt=t.touchData.startPosition[0]-ye[0],$t=Mt*Mt,ut=t.touchData.startPosition[1]-ye[1],ot=ut*ut,Pt=$t+ot,zt=Pt*Ae*Ae;t.touchData.singleTouchMoved||(oe||ue.$(":selected").unselect(["tapunselect"]),i(oe,["tap","vclick"],F,{x:ye[0],y:ye[1]}),Ze=!1,F.timeStamp-qe<=ue.multiClickDebounceTime()?(nt&&clearTimeout(nt),Ze=!0,qe=null,i(oe,["dbltap","vdblclick"],F,{x:ye[0],y:ye[1]})):(nt=setTimeout(function(){Ze||i(oe,["onetap","voneclick"],F,{x:ye[0],y:ye[1]})},ue.multiClickDebounceTime()),qe=F.timeStamp)),oe!=null&&!t.dragData.didDrag&&oe._private.selectable&&zt<t.touchTapThreshold2&&!t.pinching&&(ue.selectionType()==="single"?(ue.$(n).unmerge(oe).unselect(["tapunselect"]),oe.select(["tapselect"])):oe.selected()?oe.unselect(["tapunselect"]):oe.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Lt=0;Lt<ye.length;Lt++)ee[Lt]=ye[Lt];t.dragData.didDrag=!1,F.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),F.touches.length<2&&(F.touches.length===1&&(t.touchData.startGPosition=[F.touches[0].clientX,F.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var Re=[],be=function(F){return{clientX:F.clientX,clientY:F.clientY,force:1,identifier:F.pointerId,pageX:F.pageX,pageY:F.pageY,radiusX:F.width/2,radiusY:F.height/2,screenX:F.screenX,screenY:F.screenY,target:F.target}},Ce=function(F){return{event:F,touch:be(F)}},Se=function(F){Re.push(Ce(F))},ke=function(F){for(var oe=0;oe<Re.length;oe++){var pe=Re[oe];if(pe.event.pointerId===F.pointerId){Re.splice(oe,1);return}}},Le=function(F){var oe=Re.filter(function(pe){return pe.event.pointerId===F.pointerId})[0];oe.event=F,oe.touch=be(F)},je=function(F){F.touches=Re.map(function(oe){return oe.touch})},Te=function(F){return F.pointerType==="mouse"||F.pointerType===4};t.registerBinding(t.container,"pointerdown",function(de){Te(de)||(de.preventDefault(),Se(de),je(de),ce(de))}),t.registerBinding(t.container,"pointerup",function(de){Te(de)||(ke(de),je(de),Oe(de))}),t.registerBinding(t.container,"pointercancel",function(de){Te(de)||(ke(de),je(de),De(de))}),t.registerBinding(t.container,"pointermove",function(de){Te(de)||(de.preventDefault(),Le(de),je(de),ve(de))})}};var Mr={};Mr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(r,i,a,o,s,l){this.renderer.nodeShapeImpl("polygon",r,i,a,o,s,this.points)},intersectLine:function(r,i,a,o,s,l,u,c){return co(s,l,this.points,r,i,a/2,o/2,u)},checkPoint:function(r,i,a,o,s,l,u,c){return Tr(r,i,this.points,l,u,o,s,[0,-1],a)}}};Mr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,n,r,i,a,o){this.renderer.nodeShapeImpl(this.name,e,n,r,i,a)},intersectLine:function(e,n,r,i,a,o,s,l){return A0(a,o,e,n,r/2+s,i/2+s)},checkPoint:function(e,n,r,i,a,o,s,l){return wi(e,n,i,a,o,s,r)}}};Mr.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(r,i,a,o,s,l,u){if(l[u]!==void 0&&l[u+"-cx"]===r&&l[u+"-cy"]===i)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=r,l[u+"-cy"]=i;var c=a/2,f=o/2;s=s==="auto"?Uh(a,o):s;for(var v=new Array(e.length/2),g=0;g<e.length/2;g++)v[g]={x:r+c*e[g*2],y:i+f*e[g*2+1]};var h,m,w,b,E=v.length;for(m=v[E-1],h=0;h<E;h++)w=v[h%E],b=v[(h+1)%E],l[u][h]=gc(m,w,b,s),m=w,w=b;return l[u]},draw:function(r,i,a,o,s,l,u){this.renderer.nodeShapeImpl("round-polygon",r,i,a,o,s,this.points,this.getOrCreateCorners(i,a,o,s,l,u,"drawCorners"))},intersectLine:function(r,i,a,o,s,l,u,c,f){return _0(s,l,this.points,r,i,a,o,u,this.getOrCreateCorners(r,i,a,o,c,f,"corners"))},checkPoint:function(r,i,a,o,s,l,u,c,f){return k0(r,i,this.points,l,u,o,s,this.getOrCreateCorners(l,u,o,s,c,f,"corners"))}}};Mr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:gn(4,0),draw:function(e,n,r,i,a,o){this.renderer.nodeShapeImpl(this.name,e,n,r,i,a,this.points,o)},intersectLine:function(e,n,r,i,a,o,s,l){return qh(a,o,e,n,r,i,s,l)},checkPoint:function(e,n,r,i,a,o,s,l){var u=i/2,c=a/2;l=l==="auto"?Si(i,a):l,l=Math.min(u,c,l);var f=l*2;return!!(Tr(e,n,this.points,o,s,i,a-f,[0,-1],r)||Tr(e,n,this.points,o,s,i-f,a,[0,-1],r)||wi(e,n,f,f,o-u+l,s-c+l,r)||wi(e,n,f,f,o+u-l,s-c+l,r)||wi(e,n,f,f,o+u-l,s+c-l,r)||wi(e,n,f,f,o-u+l,s+c-l,r))}}};Mr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:ic(),points:gn(4,0),draw:function(e,n,r,i,a,o){this.renderer.nodeShapeImpl(this.name,e,n,r,i,a,null,o)},generateCutTrianglePts:function(e,n,r,i,a){var o=a==="auto"?this.cornerLength:a,s=n/2,l=e/2,u=r-l,c=r+l,f=i-s,v=i+s;return{topLeft:[u,f+o,u+o,f,u+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,v-o,c-o,v,c-o,v-o],bottomLeft:[u+o,v,u,v-o,u+o,v-o]}},intersectLine:function(e,n,r,i,a,o,s,l){var u=this.generateCutTrianglePts(r+2*s,i+2*s,e,n,l),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return co(a,o,c,e,n)},checkPoint:function(e,n,r,i,a,o,s,l){var u=l==="auto"?this.cornerLength:l;if(Tr(e,n,this.points,o,s,i,a-2*u,[0,-1],r)||Tr(e,n,this.points,o,s,i-2*u,a,[0,-1],r))return!0;var c=this.generateCutTrianglePts(i,a,o,s);return En(e,n,c.topLeft)||En(e,n,c.topRight)||En(e,n,c.bottomRight)||En(e,n,c.bottomLeft)}}};Mr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:gn(4,0),draw:function(e,n,r,i,a,o){this.renderer.nodeShapeImpl(this.name,e,n,r,i,a)},intersectLine:function(e,n,r,i,a,o,s,l){var u=.15,c=.5,f=.85,v=this.generateBarrelBezierPts(r+2*s,i+2*s,e,n),g=function(w){var b=Xi({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},u),E=Xi({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},c),C=Xi({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},f);return[w[0],w[1],b.x,b.y,E.x,E.y,C.x,C.y,w[4],w[5]]},h=[].concat(g(v.topLeft),g(v.topRight),g(v.bottomRight),g(v.bottomLeft));return co(a,o,h,e,n)},generateBarrelBezierPts:function(e,n,r,i){var a=n/2,o=e/2,s=r-o,l=r+o,u=i-a,c=i+a,f=Cu(e,n),v=f.heightOffset,g=f.widthOffset,h=f.ctrlPtOffsetPct*e,m={topLeft:[s,u+v,s+h,u,s+g,u],topRight:[l-g,u,l-h,u,l,u+v],bottomRight:[l,c-v,l-h,c,l-g,c],bottomLeft:[s+g,c,s+h,c,s,c-v]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,n,r,i,a,o,s,l){var u=Cu(i,a),c=u.heightOffset,f=u.widthOffset;if(Tr(e,n,this.points,o,s,i,a-2*c,[0,-1],r)||Tr(e,n,this.points,o,s,i-2*f,a,[0,-1],r))return!0;for(var v=this.generateBarrelBezierPts(i,a,o,s),g=function(P,_,O){var D=O[4],L=O[2],N=O[0],R=O[5],z=O[1],H=Math.min(D,N),W=Math.max(D,N),X=Math.min(R,z),re=Math.max(R,z);if(H<=P&&P<=W&&X<=_&&_<=re){var ae=I0(D,L,N),J=E0(ae[0],ae[1],ae[2],P),$=J.filter(function(U){return 0<=U&&U<=1});if($.length>0)return $[0]}return null},h=Object.keys(v),m=0;m<h.length;m++){var w=h[m],b=v[w],E=g(e,n,b);if(E!=null){var C=b[5],x=b[3],k=b[1],A=Yt(C,x,k,E);if(b.isTop&&A<=n||b.isBottom&&n<=A)return!0}}return!1}}};Mr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:gn(4,0),draw:function(e,n,r,i,a,o){this.renderer.nodeShapeImpl(this.name,e,n,r,i,a,this.points,o)},intersectLine:function(e,n,r,i,a,o,s,l){var u=e-(r/2+s),c=n-(i/2+s),f=c,v=e+(r/2+s),g=Hr(a,o,e,n,u,c,v,f,!1);return g.length>0?g:qh(a,o,e,n,r,i,s,l)},checkPoint:function(e,n,r,i,a,o,s,l){l=l==="auto"?Si(i,a):l;var u=2*l;if(Tr(e,n,this.points,o,s,i,a-u,[0,-1],r)||Tr(e,n,this.points,o,s,i-u,a,[0,-1],r))return!0;var c=i/2+2*r,f=a/2+2*r,v=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(En(e,n,v)||wi(e,n,u,u,o+i/2-l,s+a/2-l,r)||wi(e,n,u,u,o-i/2+l,s+a/2-l,r))}}};Mr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",gn(3,0)),this.generateRoundPolygon("round-triangle",gn(3,0)),this.generatePolygon("rectangle",gn(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",gn(5,0)),this.generateRoundPolygon("round-pentagon",gn(5,0)),this.generatePolygon("hexagon",gn(6,0)),this.generateRoundPolygon("round-hexagon",gn(6,0)),this.generatePolygon("heptagon",gn(7,0)),this.generateRoundPolygon("round-heptagon",gn(7,0)),this.generatePolygon("octagon",gn(8,0)),this.generateRoundPolygon("round-octagon",gn(8,0));var r=new Array(20);{var i=Eu(5,0),a=Eu(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)r[s*4]=i[s*2],r[s*4+1]=i[s*2+1],r[s*4+2]=a[s*2],r[s*4+3]=a[s*2+1]}r=Wh(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var c=u.join("$"),f="polygon-"+c,v;return(v=this[f])?v:e.generatePolygon(f,u)}};var Mo={};Mo.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Mo.redraw=function(t){t=t||Fh();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Mo.beforeRender=function(t,e){if(!this.destroyed){e==null&&Ot("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(r,i){return i.priority-r.priority})}};var cd=function(e,n,r){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(n,r)};Mo.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var n=function r(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){cd(t,!0,i);var a=Sr();t.render(t.renderOptions);var o=t.lastDrawTime=Sr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-a),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-a;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else cd(t,!1,i);t.skipFrame=!1,Ns(r)}};Ns(n)}};var lE=function(e){this.init(e)},qv=lE,ya=qv.prototype;ya.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];ya.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container(),r=e.cy.window();if(r){var i=r.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=i.getElementById(o)!=null;if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!l){var u=i.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",a.insertBefore(u,a.children[0])}var c=r.getComputedStyle(n),f=c.getPropertyValue("position");f==="static"&&xt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=Fe(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};ya.notify=function(t,e){var n=this,r=n.cy;if(!this.destroyed){if(t==="init"){n.load();return}if(t==="destroy"){n.destroy();return}(t==="add"||t==="remove"||t==="move"&&r.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&n.invalidateCachedZSortedEles(),t==="viewport"&&n.redrawHint("select",!0),t==="gc"&&n.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};ya.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};ya.isHeadless=function(){return!1};[pc,$v,Vv,ma,Mr,Mo].forEach(function(t){Je(ya,t)});var Zl=1e3/60,Wv={setupDequeueing:function(e){return function(){var r=this,i=this.renderer;if(!r.dequeueingSetup){r.dequeueingSetup=!0;var a=To(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(u,c){var f=Sr(),v=i.averageRedrawTime,g=i.lastRedrawTime,h=[],m=i.cy.extent(),w=i.getPixelRatio();for(u||i.flushRenderedStyleQueue();;){var b=Sr(),E=b-f,C=b-c;if(g<Zl){var x=Zl-(u?v:0);if(C>=e.deqFastCost*x)break}else if(u){if(E>=e.deqCost*g||E>=e.deqAvgCost*v)break}else if(C>=e.deqNoDrawCost*Zl)break;var k=e.deq(r,w,m);if(k.length>0)for(var A=0;A<k.length;A++)h.push(k[A]);else break}h.length>0&&(e.onDeqd(r,h),!u&&e.shouldRedraw(r,h,w,m)&&a())},s=e.priority||ec;i.beforeRender(o,s(r))}}}},uE=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fs;Qr(this,t),this.idsByKey=new cr,this.keyForId=new cr,this.cachesByLvl=new cr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return Jr(t,[{key:"getIdsFor",value:function(n){n==null&&Ot("Can not get id list for null key");var r=this.idsByKey,i=this.idsByKey.get(n);return i||(i=new ca,r.set(n,i)),i}},{key:"addIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).add(r)}},{key:"deleteIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).delete(r)}},{key:"getNumberOfIdsForKey",value:function(n){return n==null?0:this.getIdsFor(n).size}},{key:"updateKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),a=this.getKey(n);this.deleteIdForKey(i,r),this.addIdForKey(a,r),this.keyForId.set(r,a)}},{key:"deleteKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteIdForKey(i,r),this.keyForId.delete(r)}},{key:"keyHasChangedFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),a=this.getKey(n);return i!==a}},{key:"isInvalid",value:function(n){return this.keyHasChangedFor(n)||this.doesEleInvalidateKey(n)}},{key:"getCachesAt",value:function(n){var r=this.cachesByLvl,i=this.lvls,a=r.get(n);return a||(a=new cr,r.set(n,a),i.push(n)),a}},{key:"getCache",value:function(n,r){return this.getCachesAt(r).get(n)}},{key:"get",value:function(n,r){var i=this.getKey(n),a=this.getCache(i,r);return a!=null&&this.updateKeyMappingFor(n),a}},{key:"getForCachedKey",value:function(n,r){var i=this.keyForId.get(n.id()),a=this.getCache(i,r);return a}},{key:"hasCache",value:function(n,r){return this.getCachesAt(r).has(n)}},{key:"has",value:function(n,r){var i=this.getKey(n);return this.hasCache(i,r)}},{key:"setCache",value:function(n,r,i){i.key=n,this.getCachesAt(r).set(n,i)}},{key:"set",value:function(n,r,i){var a=this.getKey(n);this.setCache(a,r,i),this.updateKeyMappingFor(n)}},{key:"deleteCache",value:function(n,r){this.getCachesAt(r).delete(n)}},{key:"delete",value:function(n,r){var i=this.getKey(n);this.deleteCache(i,r)}},{key:"invalidateKey",value:function(n){var r=this;this.lvls.forEach(function(i){return r.deleteCache(n,i)})}},{key:"invalidate",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteKeyMappingFor(n);var a=this.doesEleInvalidateKey(n);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}]),t}(),fd=25,ss=50,_s=-4,Ou=3,Uv=7.99,cE=8,fE=1024,dE=1024,hE=1024,vE=.2,pE=.8,gE=10,mE=.15,yE=.1,bE=.9,wE=.9,xE=100,EE=1,ji={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},CE=Qt({getKey:null,doesEleInvalidateKey:Fs,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Bh,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ka=function(e,n){var r=this;r.renderer=e,r.onDequeues=[];var i=CE(n);Je(r,i),r.lookup=new uE(i.getKey,i.doesEleInvalidateKey),r.setupDequeueing()},Kt=Ka.prototype;Kt.reasons=ji;Kt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Kt.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{},r=n[t]=n[t]||[];return r};Kt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new ko(function(n,r){return r.reqs-n.reqs});return e};Kt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Kt.getElement=function(t,e,n,r,i){var a=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(r==null&&(r=Math.ceil(nc(s*n))),r<_s)r=_s;else if(s>=Uv||r>Ou)return null;var u=Math.pow(2,r),c=e.h*u,f=e.w*u,v=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,v))return null;var g=l.get(t,r);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var h;if(c<=fd?h=fd:c<=ss?h=ss:h=Math.ceil(c/ss)*ss,c>hE||f>dE)return null;var m=a.getTextureQueue(h),w=m[m.length-2],b=function(){return a.recycleTexture(h,f)||a.addTexture(h,f)};w||(w=m[m.length-1]),w||(w=b()),w.width-w.usedWidth<f&&(w=b());for(var E=function(H){return H&&H.scaledLabelShown===v},C=i&&i===ji.dequeue,x=i&&i===ji.highQuality,k=i&&i===ji.downscale,A,p=r+1;p<=Ou;p++){var P=l.get(t,p);if(P){A=P;break}}var _=A&&A.level===r+1?A:null,O=function(){w.context.drawImage(_.texture.canvas,_.x,0,_.width,_.height,w.usedWidth,0,f,c)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,f,h),E(_))O();else if(E(A))if(x){for(var D=A.level;D>r;D--)_=a.getElement(t,e,n,D,ji.downscale);O()}else return a.queueElement(t,A.level-1),A;else{var L;if(!C&&!x&&!k)for(var N=r-1;N>=_s;N--){var R=l.get(t,N);if(R){L=R;break}}if(E(L))return a.queueElement(t,r),L;w.context.translate(w.usedWidth,0),w.context.scale(u,u),this.drawElement(w.context,t,e,v,!1),w.context.scale(1/u,1/u),w.context.translate(-w.usedWidth,0)}return g={x:w.usedWidth,texture:w,level:r,scale:u,width:f,height:c,scaledLabelShown:v},w.usedWidth+=Math.ceil(f+cE),w.eleCaches.push(g),l.set(t,r,g),a.checkTextureFullness(w),g};Kt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Kt.invalidateElement=function(t){var e=this,n=e.lookup,r=[],i=n.isInvalid(t);if(i){for(var a=_s;a<=Ou;a++){var o=n.getForCachedKey(t,a);o&&r.push(o)}var s=n.invalidate(t);if(s)for(var l=0;l<r.length;l++){var u=r[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Kt.checkTextureUtility=function(t){t.invalidatedWidth>=vE*t.width&&this.retireTexture(t)};Kt.checkTextureFullness=function(t){var e=this,n=e.getTextureQueue(t.height);t.usedWidth/t.width>pE&&t.fullnessChecks>=gE?Kr(n,t):t.fullnessChecks++};Kt.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n),i=this.lookup;Kr(r,t),t.retired=!0;for(var a=t.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}tc(a);var l=e.getRetiredTextureQueue(n);l.push(t)};Kt.addTexture=function(t,e){var n=this,r=n.getTextureQueue(t),i={};return r.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(fE,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=n.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Kt.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),i=n.getRetiredTextureQueue(t),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,tc(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Kr(i,o),r.push(o),o}};Kt.queueElement=function(t,e){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),a=this.getKey(t),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,r.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:a};r.push(s),i[a]=s}};Kt.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<EE&&n.size()>0;o++){var s=n.pop(),l=s.key,u=s.eles[0],c=a.hasCache(u,s.level);if(r[l]=null,c)continue;i.push(s);var f=e.getBoundingBox(u);e.getElement(u,f,t,s.level,ji.dequeue)}return i};Kt.removeFromQueue=function(t){var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=this.getKey(t),a=r[i];a!=null&&(a.eles.length===1?(a.reqs=Ju,n.updateItem(a),n.pop(),r[i]=null):a.eles.unmerge(t))};Kt.onDequeue=function(t){this.onDequeues.push(t)};Kt.offDequeue=function(t){Kr(this.onDequeues,t)};Kt.setupDequeueing=Wv.setupDequeueing({deqRedrawThreshold:xE,deqCost:mE,deqAvgCost:yE,deqNoDrawCost:bE,deqFastCost:wE,deq:function(e,n,r){return e.dequeue(n,r)},onDeqd:function(e,n){for(var r=0;r<e.onDequeues.length;r++){var i=e.onDequeues[r];i(n)}},shouldRedraw:function(e,n,r,i){for(var a=0;a<n.length;a++)for(var o=n[a].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(rc(l,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var SE=1,Ya=-4,Gs=2,TE=3.99,kE=50,AE=50,_E=.15,IE=.1,ME=.9,PE=.9,DE=1,dd=250,LE=4e3*4e3,hd=32767,OE=!0,Gv=function(e){var n=this,r=n.renderer=e,i=r.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=Sr()-2*dd,n.skipping=!1,n.eleTxrDeqs=i.collection(),n.scheduleElementRefinement=To(function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)},AE),r.beforeRender(function(o,s){s-n.lastInvalidationTime<=dd?n.skipping=!0:n.skipping=!1},r.beforeRenderPriorities.lyrTxrSkip);var a=function(s,l){return l.reqs-s.reqs};n.layersQueue=new ko(a),n.setupDequeueing()},on=Gv.prototype,vd=0,BE=Math.pow(2,53)-1;on.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:vd=++vd%BE,bb:t,level:e,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(n,n),s.translate(l,u),o};on.getLayers=function(t,e,n){var r=this,i=r.renderer,a=i.cy,o=a.zoom(),s=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(nc(o*e)),n<Ya)n=Ya;else if(o>=TE||n>Gs)return null}r.validateLayersElesOrdering(n,t);var l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[],f,v=r.levelIsComplete(n,t),g,h=function(){var O=function(z){if(r.validateLayersElesOrdering(z,t),r.levelIsComplete(z,t))return g=l[z],!0},D=function(z){if(!g)for(var H=n+z;Ya<=H&&H<=Gs&&!O(H);H+=z);};D(1),D(-1);for(var L=c.length-1;L>=0;L--){var N=c[L];N.invalid&&Kr(c,N)}};if(!v)h();else return c;var m=function(){if(!f){f=Tn();for(var O=0;O<t.length;O++)$h(f,t[O].boundingBox())}return f},w=function(O){O=O||{};var D=O.after;m();var L=Math.ceil(f.w*u),N=Math.ceil(f.h*u);if(L>hd||N>hd)return null;var R=L*N;if(R>LE)return null;var z=r.makeLayer(f,n);if(D!=null){var H=c.indexOf(D)+1;c.splice(H,0,z)}else(O.insert===void 0||O.insert)&&c.unshift(z);return z};if(r.skipping&&!s)return null;for(var b=null,E=t.length/SE,C=!s,x=0;x<t.length;x++){var k=t[x],A=k._private.rscratch,p=A.imgLayerCaches=A.imgLayerCaches||{},P=p[n];if(P){b=P;continue}if((!b||b.eles.length>=E||!Vh(b.bb,k.boundingBox()))&&(b=w({insert:!0,after:b}),!b))return null;g||C?r.queueLayer(b,k):r.drawEleInLayer(b,k,n,e),b.eles.push(k),p[n]=b}return g||(C?null:c)};on.getEleLevelForLayerLevel=function(t,e){return t};on.drawEleInLayer=function(t,e,n,r){var i=this,a=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(n=i.getEleLevelForLayerLevel(n,r),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,n,OE),a.setImgSmoothing(o,!0))};on.levelIsComplete=function(t,e){var n=this,r=n.layersByLevel[t];if(!r||r.length===0)return!1;for(var i=0,a=0;a<r.length;a++){var o=r[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};on.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};on.updateElementsInLayers=function(t,e){for(var n=this,r=Co(t[0]),i=0;i<t.length;i++)for(var a=r?null:t[i],o=r?t[i]:t[i].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=Ya;u<=Gs;u++){var c=l[u];c&&(a&&n.getEleLevelForLayerLevel(c.level)!==a.level||e(c,o,a))}};on.haveLayers=function(){for(var t=this,e=!1,n=Ya;n<=Gs;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e};on.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Sr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(r,i,a){e.invalidateLayer(r)}))};on.invalidateLayer=function(t){if(this.lastInvalidationTime=Sr(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];Kr(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var a=n[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};on.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(r,i,a){var o=r.replacement;if(o||(o=r.replacement=e.makeLayer(r.bb,r.level),o.replaces=r,o.eles=r.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};on.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};on.queueLayer=function(t,e){var n=this,r=n.layersQueue,i=t.elesQueue,a=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}};on.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<DE&&n.size()!==0;){var a=n.peek();if(a.replacement){n.pop();continue}if(a.replaces&&a!==a.replaces.replacement){n.pop();continue}if(a.invalid){n.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,t),i++),r.length===0&&r.push(!0),a.elesQueue.length===0&&(n.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return r};on.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var a=0;a<t.eles.length;a++){var o=t.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};on.requestRedraw=To(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);on.setupDequeueing=Wv.setupDequeueing({deqRedrawThreshold:kE,deqCost:_E,deqAvgCost:IE,deqNoDrawCost:ME,deqFastCost:PE,deq:function(e,n){return e.dequeue(n)},onDeqd:ec,shouldRedraw:Bh,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var jv={},pd;function RE(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function NE(t,e,n){for(var r,i=0;i<e.length;i++){var a=e[i];i===0&&(r=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function gd(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var a=r[i];t.lineTo(a.x,a.y)}var o=n,s=n[0];t.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];t.lineTo(a.x,a.y)}t.closePath&&t.closePath()}function FE(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,Math.PI*2,!1);var a=e,o=a[0];t.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var l=a[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function zE(t,e,n,r){t.arc(e,n,r,0,Math.PI*2,!1)}jv.arrowShapeImpl=function(t){return(pd||(pd={polygon:RE,"triangle-backcurve":NE,"triangle-tee":gd,"circle-triangle":FE,"triangle-cross":gd,circle:zE}))[t]};var yr={};yr.drawElement=function(t,e,n,r,i,a){var o=this;e.isNode()?o.drawNode(t,e,n,r,i,a):o.drawEdge(t,e,n,r,i,a)};yr.drawElementOverlay=function(t,e){var n=this;e.isNode()?n.drawNodeOverlay(t,e):n.drawEdgeOverlay(t,e)};yr.drawElementUnderlay=function(t,e){var n=this;e.isNode()?n.drawNodeUnderlay(t,e):n.drawEdgeUnderlay(t,e)};yr.drawCachedElementPortion=function(t,e,n,r,i,a,o,s){var l=this,u=n.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=n.getElement(e,u,r,i,a);if(c!=null){var f=s(l,e);if(f===0)return;var v=o(l,e),g=u.x1,h=u.y1,m=u.w,w=u.h,b,E,C,x,k;if(v!==0){var A=n.getRotationPoint(e);C=A.x,x=A.y,t.translate(C,x),t.rotate(v),k=l.getImgSmoothing(t),k||l.setImgSmoothing(t,!0);var p=n.getRotationOffset(e);b=p.x,E=p.y}else b=g,E=h;var P;f!==1&&(P=t.globalAlpha,t.globalAlpha=P*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,b,E,m,w),f!==1&&(t.globalAlpha=P),v!==0&&(t.rotate(-v),t.translate(-C,-x),k||l.setImgSmoothing(t,!1))}else n.drawElement(t,e)}};var HE=function(){return 0},$E=function(e,n){return e.getTextAngle(n,null)},VE=function(e,n){return e.getTextAngle(n,"source")},qE=function(e,n){return e.getTextAngle(n,"target")},WE=function(e,n){return n.effectiveOpacity()},Ql=function(e,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};yr.drawCachedElement=function(t,e,n,r,i,a){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,v=e.boundingBox(),g=a===!0?l.reasons.highQuality:null;if(!(v.w===0||v.h===0||!e.visible())&&(!r||rc(v,r))){var h=e.isEdge(),m=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,l,n,i,g,HE,WE),(!h||!m)&&o.drawCachedElementPortion(t,e,u,n,i,g,$E,Ql),h&&!m&&(o.drawCachedElementPortion(t,e,c,n,i,g,VE,Ql),o.drawCachedElementPortion(t,e,f,n,i,g,qE,Ql)),o.drawElementOverlay(t,e)}};yr.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}};yr.drawCachedElements=function(t,e,n,r){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(t,o,n,r)}};yr.drawCachedNodes=function(t,e,n,r){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(t,o,n,r)}};yr.drawLayeredElements=function(t,e,n,r){var i=this,a=i.data.lyrTxrCache.getLayers(e,n);if(a)for(var o=0;o<a.length;o++){var s=a[o],l=s.bb;l.w===0||l.h===0||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else i.drawCachedElements(t,e,n,r)};var Pr={};Pr.drawEdge=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;n&&(l=n,t.translate(-l.x1,-l.y1));var u=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,v=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,m=e.pstyle("line-outline-width").value,w=e.pstyle("line-outline-color").value,b=u*c,E=u*c,C=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;f==="straight-triangle"?(o.eleStrokeStyle(t,e,z),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=g,t.lineCap=h,o.eleStrokeStyle(t,e,z),o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},x=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(t.lineWidth=g+m,t.lineCap=h,m>0)o.colorStrokeStyle(t,w[0],w[1],w[2],z);else{t.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},k=function(){i&&o.drawEdgeOverlay(t,e)},A=function(){i&&o.drawEdgeUnderlay(t,e)},p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E;o.drawArrowheads(t,e,z)},P=function(){o.drawElementText(t,e,null,r)};t.lineJoin="round";var _=e.pstyle("ghost").value==="yes";if(_){var O=e.pstyle("ghost-offset-x").pfValue,D=e.pstyle("ghost-offset-y").pfValue,L=e.pstyle("ghost-opacity").value,N=b*L;t.translate(O,D),C(N),p(N),t.translate(-O,-D)}else x();A(),C(),p(),k(),P(),n&&t.translate(l.x1,l.y1)}};var Kv=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r){if(r.visible()){var i=r.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=r._private.rscratch,l=r.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=r.pstyle("".concat(e,"-color")).value;n.lineWidth=u,s.edgeType==="self"&&!o?n.lineCap="butt":n.lineCap="round",a.colorStrokeStyle(n,c[0],c[1],c[2],i),a.drawEdgePath(r,n,s.allpts,"solid")}}}};Pr.drawEdgeOverlay=Kv("overlay");Pr.drawEdgeUnderlay=Kv("underlay");Pr.drawEdgePath=function(t,e,n,r){var i=t._private.rscratch,a=e,o,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=n.join("$"),v=i.pathCacheKey&&i.pathCacheKey===f;v?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=f,i.pathCache=o)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<n.length;g+=4)e.quadraticCurveTo(n[g],n[g+1],n[g+2],n[g+3]);break;case"straight":case"haystack":for(var h=2;h+1<n.length;h+=2)e.lineTo(n[h],n[h+1]);break;case"segments":if(i.isRound){var m=Dn(i.roundCorners),w;try{for(m.s();!(w=m.n()).done;){var b=w.value;Rv(e,b)}}catch(C){m.e(C)}finally{m.f()}e.lineTo(n[n.length-2],n[n.length-1])}else for(var E=2;E+1<n.length;E+=2)e.lineTo(n[E],n[E+1]);break}e=a,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Pr.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var a=[n[i+2]-n[i],n[i+3]-n[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*r/2,s[1]*r/2];e.beginPath(),e.moveTo(n[i]-l[0],n[i+1]-l[1]),e.lineTo(n[i]+l[0],n[i+1]+l[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}};Pr.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i=r.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};Pr.drawArrowhead=function(t,e,n,r,i,a,o){if(!(isNaN(r)||r==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,l=e.pstyle(n+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,f=e.pstyle("width").pfValue,v=e.pstyle(n+"-arrow-width"),g=v.value==="match-line"?f:v.pfValue;v.units==="%"&&(g*=f);var h=e.pstyle("opacity").value;o===void 0&&(o=h);var m=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,f,l,g,r,i,a),t.globalCompositeOperation=m);var w=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,w[0],w[1],w[2],o),s.colorStrokeStyle(t,w[0],w[1],w[2],o),s.drawArrowShape(e,t,c,f,l,g,r,i,a)}}};Pr.drawArrowShape=function(t,e,n,r,i,a,o,s,l){var u=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,v,g=e,h={x:o,y:s},m=t.pstyle("arrow-scale").value,w=this.getArrowWidth(r,m),b=u.arrowShapes[i];if(c){var E=u.arrowPathCache=u.arrowPathCache||[],C=jr(i),x=E[C];x!=null?(v=e=x,f=!0):(v=e=new Path2D,E[C]=v)}f||(e.beginPath&&e.beginPath(),c?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,w,l,h,r),e.closePath&&e.closePath()),e=g,c&&(e.translate(o,s),e.rotate(l),e.scale(w,w)),(n==="filled"||n==="both")&&(c?e.fill(v):e.fill()),(n==="hollow"||n==="both")&&(e.lineWidth=a/(c?w:1),e.lineJoin="miter",c?e.stroke(v):e.stroke()),c&&(e.scale(1/w,1/w),e.rotate(-l),e.translate(-o,-s))};var yc={};yc.safeDrawImage=function(t,e,n,r,i,a,o,s,l,u){if(!(i<=0||a<=0||l<=0||u<=0))try{t.drawImage(e,n,r,i,a,o,s,l,u)}catch(c){xt(c)}};yc.drawInscribedImage=function(t,e,n,r,i){var a=this,o=n.position(),s=o.x,l=o.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),f=c(n,"background-fit","value",r),v=c(n,"background-repeat","value",r),g=n.width(),h=n.height(),m=n.padding()*2,w=g+(c(n,"background-width-relative-to","value",r)==="inner"?0:m),b=h+(c(n,"background-height-relative-to","value",r)==="inner"?0:m),E=n._private.rscratch,C=c(n,"background-clip","value",r),x=C==="node",k=c(n,"background-image-opacity","value",r)*i,A=c(n,"background-image-smoothing","value",r),p=n.pstyle("corner-radius").value;p!=="auto"&&(p=n.pstyle("corner-radius").pfValue);var P=e.width||e.cachedW,_=e.height||e.cachedH;(P==null||_==null)&&(document.body.appendChild(e),P=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var O=P,D=_;if(c(n,"background-width","value",r)!=="auto"&&(c(n,"background-width","units",r)==="%"?O=c(n,"background-width","pfValue",r)*w:O=c(n,"background-width","pfValue",r)),c(n,"background-height","value",r)!=="auto"&&(c(n,"background-height","units",r)==="%"?D=c(n,"background-height","pfValue",r)*b:D=c(n,"background-height","pfValue",r)),!(O===0||D===0)){if(f==="contain"){var L=Math.min(w/O,b/D);O*=L,D*=L}else if(f==="cover"){var L=Math.max(w/O,b/D);O*=L,D*=L}var N=s-w/2,R=c(n,"background-position-x","units",r),z=c(n,"background-position-x","pfValue",r);R==="%"?N+=(w-O)*z:N+=z;var H=c(n,"background-offset-x","units",r),W=c(n,"background-offset-x","pfValue",r);H==="%"?N+=(w-O)*W:N+=W;var X=l-b/2,re=c(n,"background-position-y","units",r),ae=c(n,"background-position-y","pfValue",r);re==="%"?X+=(b-D)*ae:X+=ae;var J=c(n,"background-offset-y","units",r),$=c(n,"background-offset-y","pfValue",r);J==="%"?X+=(b-D)*$:X+=$,E.pathCache&&(N-=s,X-=l,s=0,l=0);var U=t.globalAlpha;t.globalAlpha=k;var G=a.getImgSmoothing(t),V=!1;if(A==="no"&&G?(a.setImgSmoothing(t,!1),V=!0):A==="yes"&&!G&&(a.setImgSmoothing(t,!0),V=!0),v==="no-repeat")x&&(t.save(),E.pathCache?t.clip(E.pathCache):(a.nodeShapes[a.getNodeShape(n)].draw(t,s,l,w,b,p,E),t.clip())),a.safeDrawImage(t,e,0,0,P,_,N,X,O,D),x&&t.restore();else{var Y=t.createPattern(e,v);t.fillStyle=Y,a.nodeShapes[a.getNodeShape(n)].draw(t,s,l,w,b,p,E),t.translate(N,X),t.fill(),t.translate(-N,-X)}t.globalAlpha=U,V&&a.setImgSmoothing(t,G)}};var Pi={};Pi.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(nc(n*r));e=Math.pow(2,i)}var a=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};Pi.drawElementText=function(t,e,n,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(r==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(r===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),v=e.pstyle("target-label");if(u||(!c||!c.value)&&(!f||!f.value)&&(!v||!v.value))return;t.textAlign="center",t.textBaseline="bottom"}var g=!n,h;n&&(h=n,t.translate(-h.x1,-h.y1)),i==null?(o.drawText(t,e,null,g,a),e.isEdge()&&(o.drawText(t,e,"source",g,a),o.drawText(t,e,"target",g,a))):o.drawText(t,e,i,g,a),n&&t.translate(h.x1,h.y1)};Pi.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Pi.setupTextStyle=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+o+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)};function Jl(t,e,n,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),o?t.stroke():t.fill()}Pi.getTextAngle=function(t,e){var n,r=t._private,i=r.rscratch,a=e?e+"-":"",o=t.pstyle(a+"text-rotation");if(o.strValue==="autorotate"){var s=Xn(i,"labelAngle",e);n=t.isEdge()?s:0}else o.strValue==="none"?n=0:n=o.pfValue;return n};Pi.drawText=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var l=Xn(o,"labelX",n),u=Xn(o,"labelY",n),c,f,v=this.getLabelText(e,n);if(v!=null&&v!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,i);var g=n?n+"-":"",h=Xn(o,"labelWidth",n),m=Xn(o,"labelHeight",n),w=e.pstyle(g+"text-margin-x").pfValue,b=e.pstyle(g+"text-margin-y").pfValue,E=e.isEdge(),C=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;E&&(C="center",x="center"),l+=w,u+=b;var k;switch(r?k=this.getTextAngle(e,n):k=0,k!==0&&(c=l,f=u,t.translate(c,f),t.rotate(k),l=0,u=0),x){case"top":break;case"center":u+=m/2;break;case"bottom":u+=m;break}var A=e.pstyle("text-background-opacity").value,p=e.pstyle("text-border-opacity").value,P=e.pstyle("text-border-width").pfValue,_=e.pstyle("text-background-padding").pfValue,O=e.pstyle("text-background-shape").strValue,D=O.indexOf("round")===0,L=2;if(A>0||P>0&&p>0){var N=l-_;switch(C){case"left":N-=h;break;case"center":N-=h/2;break}var R=u-m-_,z=h+2*_,H=m+2*_;if(A>0){var W=t.fillStyle,X=e.pstyle("text-background-color").value;t.fillStyle="rgba("+X[0]+","+X[1]+","+X[2]+","+A*s+")",D?Jl(t,N,R,z,H,L):t.fillRect(N,R,z,H),t.fillStyle=W}if(P>0&&p>0){var re=t.strokeStyle,ae=t.lineWidth,J=e.pstyle("text-border-color").value,$=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+J[0]+","+J[1]+","+J[2]+","+p*s+")",t.lineWidth=P,t.setLineDash)switch($){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=P/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(D?Jl(t,N,R,z,H,L,"stroke"):t.strokeRect(N,R,z,H),$==="double"){var U=P/2;D?Jl(t,N+U,R+U,z-U*2,H-U*2,L,"stroke"):t.strokeRect(N+U,R+U,z-U*2,H-U*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=ae,t.strokeStyle=re}}var G=2*e.pstyle("text-outline-width").pfValue;if(G>0&&(t.lineWidth=G),e.pstyle("text-wrap").value==="wrap"){var V=Xn(o,"labelWrapCachedLines",n),Y=Xn(o,"labelLineHeight",n),ne=h/2,se=this.getLabelJustification(e);switch(se==="auto"||(C==="left"?se==="left"?l+=-h:se==="center"&&(l+=-ne):C==="center"?se==="left"?l+=-ne:se==="right"&&(l+=ne):C==="right"&&(se==="center"?l+=ne:se==="right"&&(l+=h))),x){case"top":u-=(V.length-1)*Y;break;case"center":case"bottom":u-=(V.length-1)*Y;break}for(var Z=0;Z<V.length;Z++)G>0&&t.strokeText(V[Z],l,u),t.fillText(V[Z],l,u),u+=Y}else G>0&&t.strokeText(v,l,u),t.fillText(v,l,u);k!==0&&(t.rotate(-k),t.translate(-c,-f))}}};var ba={};ba.drawNode=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,c=u.rscratch,f=e.position();if(!(!Fe(f.x)||!Fe(f.y))&&!(a&&!e.visible())){var v=a?e.effectiveOpacity():1,g=o.usePaths(),h,m=!1,w=e.padding();s=e.width()+2*w,l=e.height()+2*w;var b;n&&(b=n,t.translate(-b.x1,-b.y1));for(var E=e.pstyle("background-image"),C=E.value,x=new Array(C.length),k=new Array(C.length),A=0,p=0;p<C.length;p++){var P=C[p],_=x[p]=P!=null&&P!=="none";if(_){var O=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",p);A++,k[p]=o.getCachedImage(P,O,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var D=e.pstyle("background-blacken").value,L=e.pstyle("border-width").pfValue,N=e.pstyle("background-opacity").value*v,R=e.pstyle("border-color").value,z=e.pstyle("border-style").value,H=e.pstyle("border-join").value,W=e.pstyle("border-cap").value,X=e.pstyle("border-position").value,re=e.pstyle("border-dash-pattern").pfValue,ae=e.pstyle("border-dash-offset").pfValue,J=e.pstyle("border-opacity").value*v,$=e.pstyle("outline-width").pfValue,U=e.pstyle("outline-color").value,G=e.pstyle("outline-style").value,V=e.pstyle("outline-opacity").value*v,Y=e.pstyle("outline-offset").value,ne=e.pstyle("corner-radius").value;ne!=="auto"&&(ne=e.pstyle("corner-radius").pfValue);var se=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;o.eleFillStyle(t,e,le)},Z=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J;o.colorStrokeStyle(t,R[0],R[1],R[2],le)},K=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V;o.colorStrokeStyle(t,U[0],U[1],U[2],le)},ce=function(le,ue,Ae,ye){var ee=o.nodePathCache=o.nodePathCache||[],we=Oh(Ae==="polygon"?Ae+","+ye.join(","):Ae,""+ue,""+le,""+ne),Me=ee[we],_e,Be=!1;return Me!=null?(_e=Me,Be=!0,c.pathCache=_e):(_e=new Path2D,ee[we]=c.pathCache=_e),{path:_e,cacheHit:Be}},ve=e.pstyle("shape").strValue,De=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(f.x,f.y);var Oe=ce(s,l,ve,De);h=Oe.path,m=Oe.cacheHit}var Ze=function(){if(!m){var le=f;g&&(le={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||t,le.x,le.y,s,l,ne,c)}g?t.fill(h):t.fill()},nt=function(){for(var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ae=u.backgrounding,ye=0,ee=0;ee<k.length;ee++){var we=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ee);if(ue&&we==="over"||!ue&&we==="inside"){ye++;continue}x[ee]&&k[ee].complete&&!k[ee].error&&(ye++,o.drawInscribedImage(t,k[ee],e,ee,le))}u.backgrounding=ye!==A,Ae!==u.backgrounding&&e.updateStyle(!1)},qe=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasPie(e)&&(o.drawPie(t,e,ue),le&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,ne,c)))},Re=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ue=(D>0?D:-D)*le,Ae=D>0?0:255;D!==0&&(o.colorFillStyle(t,Ae,Ae,Ae,ue),g?t.fill(h):t.fill())},be=function(){if(L>0){if(t.lineWidth=L,t.lineCap=W,t.lineJoin=H,t.setLineDash)switch(z){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(re),t.lineDashOffset=ae;break;case"solid":case"double":t.setLineDash([]);break}if(X!=="center"){if(t.save(),t.lineWidth*=2,X==="inside")g?t.clip(h):t.clip();else{var le=new Path2D;le.rect(-s/2-L,-l/2-L,s+2*L,l+2*L),le.addPath(h),t.clip(le,"evenodd")}g?t.stroke(h):t.stroke(),t.restore()}else g?t.stroke(h):t.stroke();if(z==="double"){t.lineWidth=L/3;var ue=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(h):t.stroke(),t.globalCompositeOperation=ue}t.setLineDash&&t.setLineDash([])}},Ce=function(){if($>0){if(t.lineWidth=$,t.lineCap="butt",t.setLineDash)switch(G){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var le=f;g&&(le={x:0,y:0});var ue=o.getNodeShape(e),Ae=L;X==="inside"&&(Ae=0),X==="outside"&&(Ae*=2);var ye=(s+Ae+($+Y))/s,ee=(l+Ae+($+Y))/l,we=s*ye,Me=l*ee,_e=o.nodeShapes[ue].points,Be;if(g){var Ge=ce(we,Me,ue,_e);Be=Ge.path}if(ue==="ellipse")o.drawEllipsePath(Be||t,le.x,le.y,we,Me);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ue)){var We=0,at=0,mt=0;ue==="round-diamond"?We=(Ae+Y+$)*1.4:ue==="round-heptagon"?(We=(Ae+Y+$)*1.075,mt=-(Ae/2+Y+$)/35):ue==="round-hexagon"?We=(Ae+Y+$)*1.12:ue==="round-pentagon"?(We=(Ae+Y+$)*1.13,mt=-(Ae/2+Y+$)/15):ue==="round-tag"?(We=(Ae+Y+$)*1.12,at=(Ae/2+$+Y)*.07):ue==="round-triangle"&&(We=(Ae+Y+$)*(Math.PI/2),mt=-(Ae+Y/2+$)/Math.PI),We!==0&&(ye=(s+We)/s,we=s*ye,["round-hexagon","round-tag"].includes(ue)||(ee=(l+We)/l,Me=l*ee)),ne=ne==="auto"?Uh(we,Me):ne;for(var Mt=we/2,$t=Me/2,ut=ne+(Ae+$+Y)/2,ot=new Array(_e.length/2),Pt=new Array(_e.length/2),zt=0;zt<_e.length/2;zt++)ot[zt]={x:le.x+at+Mt*_e[zt*2],y:le.y+mt+$t*_e[zt*2+1]};var Lt,kn,qt,Jt,An=ot.length;for(kn=ot[An-1],Lt=0;Lt<An;Lt++)qt=ot[Lt%An],Jt=ot[(Lt+1)%An],Pt[Lt]=gc(kn,qt,Jt,ut),kn=qt,qt=Jt;o.drawRoundPolygonPath(Be||t,le.x+at,le.y+mt,s*ye,l*ee,_e,Pt)}else if(["roundrectangle","round-rectangle"].includes(ue))ne=ne==="auto"?Si(we,Me):ne,o.drawRoundRectanglePath(Be||t,le.x,le.y,we,Me,ne+(Ae+$+Y)/2);else if(["cutrectangle","cut-rectangle"].includes(ue))ne=ne==="auto"?ic():ne,o.drawCutRectanglePath(Be||t,le.x,le.y,we,Me,null,ne+(Ae+$+Y)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ue))ne=ne==="auto"?Si(we,Me):ne,o.drawBottomRoundRectanglePath(Be||t,le.x,le.y,we,Me,ne+(Ae+$+Y)/2);else if(ue==="barrel")o.drawBarrelPath(Be||t,le.x,le.y,we,Me);else if(ue.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ue)){var yn=(Ae+$+Y)/s;_e=zs(Hs(_e,yn)),o.drawPolygonPath(Be||t,le.x,le.y,s,l,_e)}else{var Xt=(Ae+$+Y)/s;_e=zs(Hs(_e,-Xt)),o.drawPolygonPath(Be||t,le.x,le.y,s,l,_e)}if(g?t.stroke(Be):t.stroke(),G==="double"){t.lineWidth=Ae/3;var Vt=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(Be):t.stroke(),t.globalCompositeOperation=Vt}t.setLineDash&&t.setLineDash([])}},Se=function(){i&&o.drawNodeOverlay(t,e,f,s,l)},ke=function(){i&&o.drawNodeUnderlay(t,e,f,s,l)},Le=function(){o.drawElementText(t,e,null,r)},je=e.pstyle("ghost").value==="yes";if(je){var Te=e.pstyle("ghost-offset-x").pfValue,de=e.pstyle("ghost-offset-y").pfValue,F=e.pstyle("ghost-opacity").value,oe=F*v;t.translate(Te,de),K(),Ce(),se(F*N),Ze(),nt(oe,!0),Z(F*J),be(),qe(D!==0||L!==0),nt(oe,!1),Re(oe),t.translate(-Te,-de)}g&&t.translate(-f.x,-f.y),ke(),g&&t.translate(f.x,f.y),K(),Ce(),se(),Ze(),nt(v,!0),Z(),be(),qe(D!==0||L!==0),nt(v,!1),Re(),g&&t.translate(-f.x,-f.y),Le(),Se(),n&&t.translate(b.x1,b.y1)}};var Xv=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r,i,a,o){var s=this;if(r.visible()){var l=r.pstyle("".concat(e,"-padding")).pfValue,u=r.pstyle("".concat(e,"-opacity")).value,c=r.pstyle("".concat(e,"-color")).value,f=r.pstyle("".concat(e,"-shape")).value,v=r.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(i=i||r.position(),a==null||o==null){var g=r.padding();a=r.width()+2*g,o=r.height()+2*g}s.colorFillStyle(n,c[0],c[1],c[2],u),s.nodeShapes[f].draw(n,i.x,i.y,a+l*2,o+l*2,v),n.fill()}}}};ba.drawNodeOverlay=Xv("overlay");ba.drawNodeUnderlay=Xv("underlay");ba.hasPie=function(t){return t=t[0],t._private.hasPie};ba.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=r.x,s=r.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,f=0,v=this.usePaths();v&&(o=0,s=0),a.units==="%"?c=c*a.pfValue:a.pfValue!==void 0&&(c=a.pfValue/2);for(var g=1;g<=i.pieBackgroundN;g++){var h=e.pstyle("pie-"+g+"-background-size").value,m=e.pstyle("pie-"+g+"-background-color").value,w=e.pstyle("pie-"+g+"-background-opacity").value*n,b=h/100;b+f>1&&(b=1-f);var E=1.5*Math.PI+2*Math.PI*f,C=2*Math.PI*b,x=E+C;h===0||f>=1||f+b>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,c,E,x),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],w),t.fill(),f+=b)}};var mn={},UE=100;mn.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/n};mn.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],n=!0,r,i=0;i<e.length;i++)if(r=e[i],r.context===t){n=!1;break}return n&&(r={context:t},e.push(r)),r};mn.createGradientStyleFor=function(t,e,n,r,i){var a,o=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,l=n.pstyle(e+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),f=n.midpoint(),v=Ci(u,f),g=Ci(c,f);a=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(v,g))}else{var h=o?{x:0,y:0}:n.position(),m=n.paddedWidth(),w=n.paddedHeight();a=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(m,w))}else if(n.isEdge()){var b=n.sourceEndpoint(),E=n.targetEndpoint();a=t.createLinearGradient(b.x,b.y,E.x,E.y)}else{var C=o?{x:0,y:0}:n.position(),x=n.paddedWidth(),k=n.paddedHeight(),A=x/2,p=k/2,P=n.pstyle("background-gradient-direction").value;switch(P){case"to-bottom":a=t.createLinearGradient(C.x,C.y-p,C.x,C.y+p);break;case"to-top":a=t.createLinearGradient(C.x,C.y+p,C.x,C.y-p);break;case"to-left":a=t.createLinearGradient(C.x+A,C.y,C.x-A,C.y);break;case"to-right":a=t.createLinearGradient(C.x-A,C.y,C.x+A,C.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(C.x-A,C.y-p,C.x+A,C.y+p);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(C.x-A,C.y+p,C.x+A,C.y-p);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(C.x+A,C.y-p,C.x-A,C.y+p);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(C.x+A,C.y+p,C.x-A,C.y-p);break}}if(!a)return null;for(var _=l.length===s.length,O=s.length,D=0;D<O;D++)a.addColorStop(_?l[D]:D/(O-1),"rgba("+s[D][0]+","+s[D][1]+","+s[D][2]+","+i+")");return a};mn.gradientFillStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i};mn.colorFillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"};mn.eleFillStyle=function(t,e,n){var r=e.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}};mn.gradientStrokeStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i};mn.colorStrokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"};mn.eleStrokeStyle=function(t,e,n){var r=e.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}};mn.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],a=r[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=i*o,u=a*o,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var f=n.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var v=0;v<e.CANVAS_LAYERS;v++)c=n.canvases[v],c.width=l,c.height=u,c.style.width=i+"px",c.style.height=a+"px";for(var v=0;v<e.BUFFER_COUNT;v++)c=n.bufferCanvases[v],c.width=l,c.height=u,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,o<=1&&(c=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u,e.pixelRatio=o}};mn.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};mn.clearCanvas=function(){var t=this,e=t.data;function n(r){r.clearRect(0,0,t.canvasWidth,t.canvasHeight)}n(e.contexts[t.NODE]),n(e.contexts[t.DRAG])};mn.render=function(t){var e=this;t=t||Fh();var n=e.cy,r=t.forcedContext,i=t.drawAllLayers,a=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=e.data,c=u.canvasNeedsRedraw,f=e.textureOnViewport&&!r&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),v=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,h=n.hasCompoundNodes(),m=e.hoverData.draggingEles,w=!!(e.hoverData.selecting||e.touchData.selecting);v=v&&!r&&e.motionBlurEnabled&&!w;var b=v;r||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!r&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),v&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var E=n.style(),C=n.zoom(),x=o!==void 0?o:C,k=n.pan(),A={x:k.x,y:k.y},p={zoom:C,pan:{x:k.x,y:k.y}},P=e.prevViewport,_=P===void 0||p.zoom!==P.zoom||p.pan.x!==P.pan.x||p.pan.y!==P.pan.y;!_&&!(m&&!h)&&(e.motionBlurPxRatio=1),s&&(A=s),x*=l,A.x*=l,A.y*=l;var O=e.getCachedZSortedEles();function D(Z,K,ce,ve,De){var Oe=Z.globalCompositeOperation;Z.globalCompositeOperation="destination-out",e.colorFillStyle(Z,255,255,255,e.motionBlurTransparency),Z.fillRect(K,ce,ve,De),Z.globalCompositeOperation=Oe}function L(Z,K){var ce,ve,De,Oe;!e.clearingMotionBlur&&(Z===u.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Z===u.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(ce={x:k.x*g,y:k.y*g},ve=C*g,De=e.canvasWidth*g,Oe=e.canvasHeight*g):(ce=A,ve=x,De=e.canvasWidth,Oe=e.canvasHeight),Z.setTransform(1,0,0,1,0,0),K==="motionBlur"?D(Z,0,0,De,Oe):!r&&(K===void 0||K)&&Z.clearRect(0,0,De,Oe),i||(Z.translate(ce.x,ce.y),Z.scale(ve,ve)),s&&Z.translate(s.x,s.y),o&&Z.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=n.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var N=e.data.bufferContexts[e.TEXTURE_BUFFER];N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:N,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var p=e.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:e.canvasWidth,height:e.canvasHeight};p.mpan={x:(0-p.pan.x)/p.zoom,y:(0-p.pan.y)/p.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var R=u.contexts[e.NODE],z=e.textureCache.texture,p=e.textureCache.viewport;R.setTransform(1,0,0,1,0,0),v?D(R,0,0,p.width,p.height):R.clearRect(0,0,p.width,p.height);var H=E.core("outside-texture-bg-color").value,W=E.core("outside-texture-bg-opacity").value;e.colorFillStyle(R,H[0],H[1],H[2],W),R.fillRect(0,0,p.width,p.height);var C=n.zoom();L(R,!1),R.clearRect(p.mpan.x,p.mpan.y,p.width/p.zoom/l,p.height/p.zoom/l),R.drawImage(z,p.mpan.x,p.mpan.y,p.width/p.zoom/l,p.height/p.zoom/l)}else e.textureOnViewport&&!r&&(e.textureCache=null);var X=n.extent(),re=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),ae=e.hideEdgesOnViewport&&re,J=[];if(J[e.NODE]=!c[e.NODE]&&v&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,J[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),J[e.DRAG]=!c[e.DRAG]&&v&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,J[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||a||J[e.NODE]){var $=v&&!J[e.NODE]&&g!==1,R=r||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:u.contexts[e.NODE]),U=v&&!$?"motionBlur":void 0;L(R,U),ae?e.drawCachedNodes(R,O.nondrag,l,X):e.drawLayeredElements(R,O.nondrag,l,X),e.debug&&e.drawDebugPoints(R,O.nondrag),!i&&!v&&(c[e.NODE]=!1)}if(!a&&(c[e.DRAG]||i||J[e.DRAG])){var $=v&&!J[e.DRAG]&&g!==1,R=r||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:u.contexts[e.DRAG]);L(R,v&&!$?"motionBlur":void 0),ae?e.drawCachedNodes(R,O.drag,l,X):e.drawCachedElements(R,O.drag,l,X),e.debug&&e.drawDebugPoints(R,O.drag),!i&&!v&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,L),v&&g!==1){var G=u.contexts[e.NODE],V=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Y=u.contexts[e.DRAG],ne=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],se=function(K,ce,ve){K.setTransform(1,0,0,1,0,0),ve||!b?K.clearRect(0,0,e.canvasWidth,e.canvasHeight):D(K,0,0,e.canvasWidth,e.canvasHeight);var De=g;K.drawImage(ce,0,0,e.canvasWidth*De,e.canvasHeight*De,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||J[e.NODE])&&(se(G,V,J[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||J[e.DRAG])&&(se(Y,ne,J[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=p,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),v&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},UE)),r||n.emit("render")};var Fa;mn.drawSelectionRectangle=function(t,e){var n=this,r=n.cy,i=n.data,a=r.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,l=i.canvasNeedsRedraw,u=t.forcedContext;if(n.showFps||!o&&l[n.SELECT_BOX]&&!s){var c=u||i.contexts[n.SELECT_BOX];if(e(c),n.selection[4]==1&&(n.hoverData.selecting||n.touchData.selecting)){var f=n.cy.zoom(),v=a.core("selection-box-border-width").value/f;c.lineWidth=v,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]),v>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]))}if(i.bgActivePosistion&&!n.hoverData.selecting){var f=n.cy.zoom(),g=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(g.x,g.y,a.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var h=n.lastRedrawTime;if(n.showFps&&h){h=Math.round(h);var m=Math.round(1e3/h),w="1 frame = "+h+" ms = "+m+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Fa){var b=c.measureText(w);Fa=b.actualBoundingBoxAscent}c.fillText(w,0,Fa);var E=60;c.strokeRect(0,Fa+10,250,20),c.fillRect(0,Fa+10,250*Math.min(m/E,1),20)}s||(l[n.SELECT_BOX]=!1)}};function md(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r}function GE(t,e,n){var r=md(t,t.VERTEX_SHADER,e),i=md(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,i),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function jE(t,e,n){n===void 0&&(n=e);var r=t.makeOffscreenCanvas(e,n),i=r.context=r.getContext("2d");return r.clear=function(){return i.clearRect(0,0,r.width,r.height)},r.clear(),r}function bc(t){var e=t.pixelRatio,n=t.cy.zoom(),r=t.cy.pan();return{zoom:n*e,pan:{x:r.x*e,y:r.y*e}}}function KE(t,e,n,r,i){var a=r*n+e.x,o=i*n+e.y;return o=Math.round(t.canvasHeight-o),[a,o]}function ls(t,e,n){var r=t[0]/255,i=t[1]/255,a=t[2]/255,o=e,s=n||new Array(4);return s[0]=r*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function us(t,e){var n=e||new Array(4);return n[0]=(t>>0&255)/255,n[1]=(t>>8&255)/255,n[2]=(t>>16&255)/255,n[3]=(t>>24&255)/255,n}function XE(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function YE(t,e){var n=t.createTexture();return n.buffer=function(r){t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},n.deleteTexture=function(){t.deleteTexture(n)},n}function Yv(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function Zv(t,e,n){switch(e){case t.FLOAT:return new Float32Array(n);case t.INT:return new Int32Array(n)}}function ZE(t,e,n,r,i,a){switch(e){case t.FLOAT:return new Float32Array(n.buffer,a*r,i);case t.INT:return new Int32Array(n.buffer,a*r,i)}}function QE(t,e,n,r){var i=Yv(t,e),a=Zt(i,2),o=a[0],s=a[1],l=Zv(t,s,r),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(n,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(n,o,s,0,0),t.enableVertexAttribArray(n),t.bindBuffer(t.ARRAY_BUFFER,null),u}function In(t,e,n,r){var i=Yv(t,n),a=Zt(i,3),o=a[0],s=a[1],l=a[2],u=Zv(t,s,e*o),c=o*l,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(r),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,c,0),t.vertexAttribDivisor(r,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var v=new Array(e),g=0;g<e;g++)v[g]=ZE(t,s,u,c,o,g);return f.dataArray=u,f.stride=c,f.size=o,f.getView=function(h){return v[h]},f.setPoint=function(h,m,w){var b=v[h];b[0]=m,b[1]=w},f.bufferSubData=function(h){t.bindBuffer(t.ARRAY_BUFFER,f),h?t.bufferSubData(t.ARRAY_BUFFER,0,u,0,h*o):t.bufferSubData(t.ARRAY_BUFFER,0,u)},f}function JE(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(r,i){t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var yd=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Za(){var t=new yd(9);return yd!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Qv(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function eC(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],v=n[0],g=n[1],h=n[2],m=n[3],w=n[4],b=n[5],E=n[6],C=n[7],x=n[8];return t[0]=v*r+g*o+h*u,t[1]=v*i+g*s+h*c,t[2]=v*a+g*l+h*f,t[3]=m*r+w*o+b*u,t[4]=m*i+w*s+b*c,t[5]=m*a+w*l+b*f,t[6]=E*r+C*o+x*u,t[7]=E*i+C*s+x*c,t[8]=E*a+C*l+x*f,t}function js(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],v=n[0],g=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=v*r+g*o+u,t[7]=v*i+g*s+c,t[8]=v*a+g*l+f,t}function Jv(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],v=Math.sin(n),g=Math.cos(n);return t[0]=g*r+v*o,t[1]=g*i+v*s,t[2]=g*a+v*l,t[3]=g*o-v*r,t[4]=g*s-v*i,t[5]=g*l-v*a,t[6]=u,t[7]=c,t[8]=f,t}function wc(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function tC(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var Qa={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},za=Qt({getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:null,getPadding:null}),nC=function(){function t(e,n){Qr(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.atlasSize=n.webglTexSize,this.rows=n.webglTexRows,this.enableWrapping=n.enableWrapping,this.texHeight=Math.floor(this.atlasSize/this.rows),this.maxTexWidth=this.atlasSize,this.texture=null,this.canvas=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=n.createTextureCanvas(e,this.atlasSize,this.atlasSize),this.scratch=n.createTextureCanvas(e,this.atlasSize,this.texHeight,"scratch")}return Jr(t,[{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(n){var r=n.w,i=n.h,a=this.texHeight,o=this.maxTexWidth,s=a/i,l=r*s,u=i*s;return l>o&&(s=o/r,l=r*s,u=i*s),{scale:s,texW:l,texH:u}}},{key:"draw",value:function(n,r,i){var a=this,o=this.atlasSize,s=this.rows,l=this.texHeight,u=this.getScale(r),c=u.scale,f=u.texW,v=u.texH,g=[null,null],h=function(C,x){if(i&&x){var k=x.context,A=C.x,p=C.row,P=A,_=l*p;k.save(),k.translate(P,_),k.scale(c,c),i(k,r),k.restore()}},m=function(){h(a.freePointer,a.canvas),g[0]={x:a.freePointer.x,y:a.freePointer.row*l,w:f,h:v},g[1]={x:a.freePointer.x+f,y:a.freePointer.row*l,w:0,h:v},a.freePointer.x+=f,a.freePointer.x==o&&(a.freePointer.x=0,a.freePointer.row++)},w=function(){var C=a.scratch,x=a.canvas;C.clear(),h({x:0,row:0},C);var k=o-a.freePointer.x,A=f-k,p=l;{var P=a.freePointer.x,_=a.freePointer.row*l,O=k;x.context.drawImage(C,0,0,O,p,P,_,O,p),g[0]={x:P,y:_,w:O,h:v}}{var D=k,L=(a.freePointer.row+1)*l,N=A;x&&x.context.drawImage(C,D,0,N,p,0,L,N,p),g[1]={x:0,y:L,w:N,h:v}}a.freePointer.x=A,a.freePointer.row++},b=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+f<=o)m();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(b(),m()):this.enableWrapping?w():(b(),m())}return this.keyToLocation.set(n,g),this.needsBuffer=!0,g}},{key:"getOffsets",value:function(n){return this.keyToLocation.get(n)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(n){var r=this.atlasSize,i=this.rows,a=this.getScale(n),o=a.texW;return this.freePointer.x+o>r?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(n){this.texture||(this.texture=YE(n,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1)}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null,this.needsBuffer=!0)}}]),t}(),rC=function(){function t(e,n){Qr(this,t),this.r=e,this.opts=n,this.keyToIds=new Map,this.idToKey=new Map,this.atlases=[],this.styleKeyToAtlas=new Map,this.styleKeyNeedsRedraw=new Set,this.forceGC=!1}return Jr(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"getIdsFor",value:function(n){var r=this.keyToIds.get(n);return r||(r=new Set,this.keyToIds.set(n,r)),r}},{key:"_createAtlas",value:function(){var n=this.r,r=this.opts;return new nC(n,r)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var n=this.r,r=this.opts,i=r.webglTexSize,a=Math.floor(i/r.webglTexRows);this.scratch=r.createTextureCanvas(n,i,a,"scratch")}return this.scratch}},{key:"draw",value:function(n,r,i,a){if(this.styleKeyNeedsRedraw.has(r)){this.styleKeyNeedsRedraw.delete(r),this.deleteKey(n,r);var o=this.styleKeyToAtlas.get(r);o&&(o.forceGC=!0),this.styleKeyToAtlas.delete(r)}var s=this.styleKeyToAtlas.get(r);return s||(s=this.atlases[this.atlases.length-1],(!s||!s.canFit(i))&&(s=this._createAtlas(),this.atlases.push(s)),s.draw(r,i,a),this.styleKeyToAtlas.set(r,s),this.getIdsFor(r).add(n),this.idToKey.set(n,r)),s}},{key:"getAtlas",value:function(n){return this.styleKeyToAtlas.get(n)}},{key:"hasAtlas",value:function(n){return this.styleKeyToAtlas.has(n)}},{key:"deleteKey",value:function(n,r){this.idToKey.delete(n),this.getIdsFor(r).delete(n)}},{key:"checkKeyIsInvalid",value:function(n,r){if(!this.idToKey.has(n))return!1;var i=this.idToKey.get(n);return i!=r?(this.deleteKey(n,i),!0):!1}},{key:"_getKeysToCollect",value:function(){var n=new Set,r=Dn(this.styleKeyToAtlas.keys()),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;this.getIdsFor(a).size==0&&n.add(a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"gc",value:function(){var n=this,r=this.atlases.some(function(v){return v.forceGC}),i=this._getKeysToCollect();if(i.size===0&&!r){console.log("nothing to garbage collect");return}var a=[],o=new Map,s=null,l=Dn(this.atlases),u;try{var c=function(){var g=u.value,h=g.getKeys(),m=iC(i,h);if(m.size===0&&!g.forceGC)return a.push(g),h.forEach(function(p){return o.set(p,g)}),"continue";s||(s=n._createAtlas(),a.push(s));var w=Dn(h),b;try{for(w.s();!(b=w.n()).done;){var E=b.value;if(!m.has(E)){var C=g.getOffsets(E),x=Zt(C,2),k=x[0],A=x[1];s.canFit({w:k.w+A.w,h:k.h})||(s=n._createAtlas(),a.push(s)),n._copyTextureToNewAtlas(E,g,s),o.set(E,s)}}}catch(p){w.e(p)}finally{w.f()}};for(l.s();!(u=l.n()).done;)var f=c()}catch(v){l.e(v)}finally{l.f()}this.atlases=a,this.styleKeyToAtlas=o}},{key:"_copyTextureToNewAtlas",value:function(n,r,i){var a=r.getOffsets(n),o=Zt(a,2),s=o[0],l=o[1];if(l.w===0)i.draw(n,s,function(v){v.drawImage(r.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(r.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),u.context.drawImage(r.canvas,l.x,l.y,l.w,l.h,s.w,0,l.w,l.h);var c=s.w+l.w,f=s.h;i.draw(n,{w:c,h:f},function(v){v.drawImage(u,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}]),t}();function iC(t,e){return t.intersection?t.intersection(e):new Set(wh(t).filter(function(n){return e.has(n)}))}var aC=function(){function t(e,n){Qr(this,t),this.r=e;var r=n;this.globalOptions=r,this.maxAtlases=r.webglTexPerBatch,this.atlasSize=r.webglTexSize,this.renderTypes=new Map,this.maxAtlasesPerBatch=n.webglTexPerBatch,this.batchAtlases=[],this._cacheScratchCanvas(r)}return Jr(t,[{key:"_cacheScratchCanvas",value:function(n){var r=-1,i=-1,a=null,o=n.createTextureCanvas;n.createTextureCanvas=function(s,l,u,c){return c?((!a||l!=r||u!=i)&&(r=l,i=u,a=o(s,l,u)),a):o(s,l,u)}}},{key:"addRenderType",value:function(n,r){var i=new rC(this.r,this.globalOptions),a=r;this.renderTypes.set(n,Je({type:n,atlasCollection:i},a))}},{key:"getRenderTypes",value:function(){return wh(this.renderTypes.values())}},{key:"getRenderTypeOpts",value:function(n){return this.renderTypes.get(n)}},{key:"invalidate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.forceRedraw,a=i===void 0?!1:i,o=r.filterEle,s=o===void 0?function(){return!0}:o,l=r.filterType,u=l===void 0?function(){return!0}:l,c=!1,f=Dn(n),v;try{for(f.s();!(v=f.n()).done;){var g=v.value;if(s(g)){var h=g.id(),m=Dn(this.getRenderTypes()),w;try{for(m.s();!(w=m.n()).done;){var b=w.value;if(u(b.type)){var E=b.getKey(g);a?(b.atlasCollection.deleteKey(h,E),b.atlasCollection.styleKeyNeedsRedraw.add(E),c=!0):c|=b.atlasCollection.checkKeyIsInvalid(h,E)}}}catch(C){m.e(C)}finally{m.f()}}}}catch(C){f.e(C)}finally{f.f()}return c}},{key:"gc",value:function(){var n=Dn(this.getRenderTypes()),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;i.atlasCollection.gc()}}catch(a){n.e(a)}finally{n.f()}}},{key:"isRenderable",value:function(n,r){var i=this.getRenderTypeOpts(r);return i&&i.isVisible(n)}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"getOrCreateAtlas",value:function(n,r,i){var a=this.renderTypes.get(i),o=a.getKey(n),s=n.id();return a.atlasCollection.draw(s,o,r,function(l){a.drawElement(l,n,r,!0,!0)})}},{key:"getAtlasIndexForBatch",value:function(n){var r=this.batchAtlases.indexOf(n);if(r<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(n),r=this.batchAtlases.length-1}return r}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlases},function(n,r){return r})}},{key:"getAtlasInfo",value:function(n,r){var i=this.renderTypes.get(r),a=i.getBoundingBox(n),o=this.getOrCreateAtlas(n,a,r),s=this.getAtlasIndexForBatch(o);if(s!==void 0){var l=i.getKey(n),u=o.getOffsets(l),c=Zt(u,2),f=c[0],v=c[1];return{atlasID:s,tex:f,tex1:f,tex2:v,bb:a,type:r,styleKey:l}}}},{key:"canAddToCurrentBatch",value:function(n,r){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var i=this.renderTypes.get(r),a=i.getKey(n),o=i.atlasCollection.getAtlas(a);return o&&this.batchAtlases.includes(o)}return!0}},{key:"setTransformMatrix",value:function(n,r,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=r.bb,s=r.type,l=r.tex1,u=r.tex2,c=this.getRenderTypeOpts(s),f=c.getPadding?c.getPadding(i):0,v=l.w/(l.w+u.w);a||(v=1-v);var g=this.getAdjustedBB(o,f,a,v),h,m;Qv(n);var w=c.getRotation?c.getRotation(i):0;if(w!==0){var b=c.getRotationPoint(i),E=b.x,C=b.y;js(n,n,[E,C]),Jv(n,n,w);var x=c.getRotationOffset(i);h=x.x+g.xOffset,m=x.y}else h=g.x1,m=g.y1;js(n,n,[h,m]),wc(n,n,[g.w,g.h])}},{key:"getTransformMatrix",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Za();return this.setTransformMatrix(a,n,r,i),a}},{key:"getAdjustedBB",value:function(n,r,i,a){var o=n.x1,s=n.y1,l=n.w,u=n.h;r&&(o-=r,s-=r,l+=2*r,u+=2*r);var c=0,f=l*a;return i&&a<1?l=f:!i&&a<1&&(c=l-f,o+=c,l=f),{x1:o,y1:s,w:l,h:u,xOffset:c}}},{key:"getDebugInfo",value:function(){var n=[],r=Dn(this.renderTypes),i;try{for(r.s();!(i=r.n()).done;){var a=Zt(i.value,2),o=a[0],s=a[1],l=s.atlasCollection.getCounts(),u=l.keyCount,c=l.atlasCount;n.push({type:o,keyCount:u,atlasCount:c})}}catch(f){r.e(f)}finally{r.f()}return n}}]),t}(),eu=0,bd=1,wd=2,tu=3,oC=function(){function t(e,n,r){Qr(this,t),this.r=e,this.gl=n,this.maxInstances=r.webglBatchSize,this.maxAtlases=r.webglTexPerBatch,this.atlasSize=r.webglTexSize,this.bgColor=r.bgColor,r.enableWrapping=!0,r.createTextureCanvas=jE,this.atlasManager=new aC(e,r),this.program=this.createShaderProgram(Qa.SCREEN),this.pickingProgram=this.createShaderProgram(Qa.PICKING),this.vao=this.createVAO(),this.debugInfo=[]}return Jr(t,[{key:"addTextureRenderType",value:function(n,r){this.atlasManager.addRenderType(n,r)}},{key:"invalidate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.type,a=this.atlasManager;return i?a.invalidate(n,{filterType:function(s){return s===i},forceRedraw:!0}):a.invalidate(n)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"createShaderProgram",value:function(n){var r=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; 

      // what are we rendering?
      in int aVertType;

      // for picking
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex1; // x/y/w/h of texture in atlas
      in vec4 aTex2; 

      // for any transforms that are needed
      in vec4 aScaleRotate1;  // vectors use fewer attributes than matrices
      in vec2 aTranslate1;
      in vec4 aScaleRotate2;
      in vec2 aTranslate2;

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in float aLineWidth;
      in vec4 aEdgeColor;

      out vec2 vTexCoord;
      out vec4 vEdgeColor;
      flat out int vAtlasId;
      flat out vec4 vIndex;
      flat out int vVertType;

      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition;

        if(aVertType == `.concat(eu,`) {
          float texX;
          float texY;
          float texW;
          float texH;
          mat3  texMatrix;

          int vid = gl_VertexID;
          if(vid <= 5) {
            texX = aTex1.x;
            texY = aTex1.y;
            texW = aTex1.z;
            texH = aTex1.w;
            texMatrix = mat3(
              vec3(aScaleRotate1.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate1,      1.0)
            );
          } else {
            texX = aTex2.x;
            texY = aTex2.y;
            texW = aTex2.z;
            texH = aTex2.w;
            texMatrix = mat3(
              vec3(aScaleRotate2.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate2,      1.0)
            );
          }

          if(vid == 1 || vid == 2 || vid == 4 || vid == 7 || vid == 8 || vid == 10) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5 || vid == 8 || vid == 10 || vid == 11) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * texMatrix * vec3(position, 1.0), 1.0);
        } 
        else if(aVertType == `).concat(bd,` && vid < 6) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(wd,` && vid < 6) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0 = pointA;
          vec2 p1 = pointB;
          vec2 p2 = pointC;
          vec2 pos = position;
          if(position.x == 1.0) {
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth;

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(tu,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2( 0.0,   0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          mat3 transform = mat3(
            vec3(aScaleRotate1.xy, 0.0),
            vec3(aScaleRotate1.zw, 0.0),
            vec3(aTranslate1,      1.0)
          );
          gl_Position = vec4(uPanZoomMatrix * transform * vec3(position, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vIndex = aIndex;
        vVertType = aVertType;
      }
    `),a=this.atlasManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // define texture unit for each node in the batch
      `.concat(a.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;

      in vec2 vTexCoord;
      in vec4 vEdgeColor;
      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;

      out vec4 outColor;

      void main(void) {
        if(vVertType == `).concat(eu,`) {
          `).concat(a.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } else if(vVertType == `).concat(tu,`) {
          // blend arrow color with background (using premultiplied alpha)
          outColor.rgb = vEdgeColor.rgb + (uBGColor.rgb * (1.0 - vEdgeColor.a)); 
          outColor.a = 1.0; // make opaque, masks out line under arrow
        } else {
          outColor = vEdgeColor;
        }

        `).concat(n.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=GE(r,i,o);s.aPosition=r.getAttribLocation(s,"aPosition"),s.aIndex=r.getAttribLocation(s,"aIndex"),s.aVertType=r.getAttribLocation(s,"aVertType"),s.aAtlasId=r.getAttribLocation(s,"aAtlasId"),s.aTex1=r.getAttribLocation(s,"aTex1"),s.aTex2=r.getAttribLocation(s,"aTex2"),s.aScaleRotate1=r.getAttribLocation(s,"aScaleRotate1"),s.aTranslate1=r.getAttribLocation(s,"aTranslate1"),s.aScaleRotate2=r.getAttribLocation(s,"aScaleRotate2"),s.aTranslate2=r.getAttribLocation(s,"aTranslate2"),s.aPointAPointB=r.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=r.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=r.getAttribLocation(s,"aLineWidth"),s.aEdgeColor=r.getAttribLocation(s,"aEdgeColor"),s.uPanZoomMatrix=r.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=r.getUniformLocation(s,"uAtlasSize"),s.uBGColor=r.getUniformLocation(s,"uBGColor"),s.uTextures=[];for(var l=0;l<this.atlasManager.maxAtlases;l++)s.uTextures.push(r.getUniformLocation(s,"uTexture".concat(l)));return s}},{key:"createVAO",value:function(){var n=[0,0,1,0,1,1,0,0,1,1,0,1],r=[].concat(n,n);this.vertexCount=r.length/2;var i=this.maxInstances,a=this.gl,o=this.program,s=a.createVertexArray();return a.bindVertexArray(s),QE(a,"vec2",o.aPosition,r),this.indexBuffer=In(a,i,"vec4",o.aIndex),this.vertTypeBuffer=In(a,i,"int",o.aVertType),this.atlasIdBuffer=In(a,i,"int",o.aAtlasId),this.tex1Buffer=In(a,i,"vec4",o.aTex1),this.tex2Buffer=In(a,i,"vec4",o.aTex2),this.scaleRotate1Buffer=In(a,i,"vec4",o.aScaleRotate1),this.translate1Buffer=In(a,i,"vec2",o.aTranslate1),this.scaleRotate2Buffer=In(a,i,"vec4",o.aScaleRotate2),this.translate2Buffer=In(a,i,"vec2",o.aTranslate2),this.pointAPointBBuffer=In(a,i,"vec4",o.aPointAPointB),this.pointCPointDBuffer=In(a,i,"vec4",o.aPointCPointD),this.lineWidthBuffer=In(a,i,"float",o.aLineWidth),this.edgeColorBuffer=In(a,i,"vec4",o.aEdgeColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var n=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(r){return r.endsWith("Buffer")}).map(function(r){return n[r]})),this._buffers}},{key:"startFrame",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qa.SCREEN;this.panZoomMatrix=n,this.debugInfo=r,this.renderTarget=i,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.atlasManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"getTempMatrix",value:function(){return this.tempMatrix=this.tempMatrix||Za()}},{key:"drawTexture",value:function(n,r,i){var a=this.atlasManager;if(a.isRenderable(n,i)){a.canAddToCurrentBatch(n,i)||this.endBatch();var o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=eu;var s=this.indexBuffer.getView(o);us(r,s);var l=a.getAtlasInfo(n,i,l),u=l.atlasID,c=l.tex1,f=l.tex2,v=this.atlasIdBuffer.getView(o);v[0]=u;var g=this.tex1Buffer.getView(o);g[0]=c.x,g[1]=c.y,g[2]=c.w,g[3]=c.h;var h=this.tex2Buffer.getView(o);h[0]=f.x,h[1]=f.y,h[2]=f.w,h[3]=f.h;for(var m=this.getTempMatrix(),w=0,b=[1,2];w<b.length;w++){var E=b[w];a.setTransformMatrix(m,l,n,E===1);var C=this["scaleRotate".concat(E,"Buffer")].getView(o);C[0]=m[0],C[1]=m[1],C[2]=m[3],C[3]=m[4];var x=this["translate".concat(E,"Buffer")].getView(o);x[0]=m[6],x[1]=m[7]}this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawEdgeArrow",value:function(n,r,i){var a=n._private.rscratch,o,s,l;if(i==="source"?(o=a.arrowStartX,s=a.arrowStartY,l=a.srcArrowAngle):(o=a.arrowEndX,s=a.arrowEndY,l=a.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(l)||l==null)){var u=n.pstyle(i+"-arrow-shape").value;if(u!=="none"){var c=n.pstyle(i+"-arrow-color").value,f=n.pstyle("opacity").value,v=n.pstyle("line-opacity").value,g=f*v,h=n.pstyle("width").pfValue,m=n.pstyle("arrow-scale").value,w=this.r.getArrowWidth(h,m),b=this.getTempMatrix();Qv(b),js(b,b,[o,s]),wc(b,b,[w,w]),Jv(b,b,l);var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=tu;var C=this.indexBuffer.getView(E);us(r,C);var x=this.edgeColorBuffer.getView(E);ls(c,g,x);var k=this.scaleRotate1Buffer.getView(E);k[0]=b[0],k[1]=b[1],k[2]=b[3],k[3]=b[4];var A=this.translate1Buffer.getView(E);A[0]=b[6],A[1]=b[7],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(n,r){var i=n.pstyle("opacity").value,a=n.pstyle("line-opacity").value,o=n.pstyle("width").pfValue,s=n.pstyle("line-color").value,l=i*a,u=this.getEdgePoints(n);if(u.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),u.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=bd;var f=this.indexBuffer.getView(c);us(r,f);var v=this.edgeColorBuffer.getView(c);ls(s,l,v);var g=this.lineWidthBuffer.getView(c);g[0]=o;var h=this.pointAPointBBuffer.getView(c);h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var m=0;m<u.length-2;m+=2){var w=this.instanceCount;this.vertTypeBuffer.getView(w)[0]=wd;var b=this.indexBuffer.getView(w);us(r,b);var E=this.edgeColorBuffer.getView(w);ls(s,l,E);var C=this.lineWidthBuffer.getView(w);C[0]=o;var x=u[m-2],k=u[m-1],A=u[m],p=u[m+1],P=u[m+2],_=u[m+3],O=u[m+4],D=u[m+5];m==0&&(x=2*A-P+.001,k=2*p-_+.001),m==u.length-4&&(O=2*P-A+.001,D=2*_-p+.001);var L=this.pointAPointBBuffer.getView(w);L[0]=x,L[1]=k,L[2]=A,L[3]=p;var N=this.pointCPointDBuffer.getView(w);N[0]=P,N[1]=_,N[2]=O,N[3]=D,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"getEdgePoints",value:function(n){var r=n._private.rscratch,i=r.allpts;if(i.length==4)return i;var a=this.getNumSegments(n);return this.getCurveSegmentPoints(i,a)}},{key:"getNumSegments",value:function(n){var r=15;return Math.min(Math.max(r,5),this.maxInstances)}},{key:"getCurveSegmentPoints",value:function(n,r){if(n.length==4)return n;for(var i=Array((r+1)*2),a=0;a<=r;a++)if(a==0)i[0]=n[0],i[1]=n[1];else if(a==r)i[a*2]=n[n.length-2],i[a*2+1]=n[n.length-1];else{var o=a/r;this.setCurvePoint(n,o,i,a*2)}return i}},{key:"setCurvePoint",value:function(n,r,i,a){if(n.length<=2)i[a]=n[0],i[a+1]=n[1];else{for(var o=Array(n.length-2),s=0;s<o.length;s+=2){var l=(1-r)*n[s]+r*n[s+2],u=(1-r)*n[s+1]+r*n[s+3];o[s]=l,o[s+1]=u}return this.setCurvePoint(o,r,i,a)}}},{key:"endBatch",value:function(){var n=this.gl,r=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;n.useProgram(o),n.bindVertexArray(r);var s=Dn(this.buffers),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.bufferSubData(a)}}catch(h){s.e(h)}finally{s.f()}for(var c=this.atlasManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(n);for(var v=0;v<c.length;v++)n.activeTexture(n.TEXTURE0+v),n.bindTexture(n.TEXTURE_2D,c[v].texture),n.uniform1i(o.uTextures[v],v);n.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),n.uniform1i(o.uAtlasSize,this.atlasManager.atlasSize);var g=ls(this.bgColor,1);n.uniform4fv(o.uBGColor,g),n.drawArraysInstanced(n.TRIANGLES,0,i,a),n.bindVertexArray(null),n.bindTexture(n.TEXTURE_2D,null),this.debugInfo&&this.debugInfo.push({count:a,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){return this.debugInfo}},{key:"getAtlasDebugInfo",value:function(){return this.atlasManager.getDebugInfo()}}]),t}();function xd(t,e){return"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(e,")")}var sC=function(){function t(e){Qr(this,t),this.r=e}return Jr(t,[{key:"getStyleKey",value:function(n,r){var i=this.getStyle(n,r),a=i.shape,o=i.opacity,s=i.color;if(!a)return null;var l=r.width(),u=r.height(),c=xd(s,o);return jr("".concat(a,"-").concat(l,"-").concat(u,"-").concat(c))}},{key:"isVisible",value:function(n,r){var i=r.pstyle("".concat(n,"-opacity")).value;return i>0}},{key:"getStyle",value:function(n,r){var i=r.pstyle("".concat(n,"-opacity")).value,a=r.pstyle("".concat(n,"-color")).value,o=r.pstyle("".concat(n,"-shape")).value;return{opacity:i,color:a,shape:o}}},{key:"getPadding",value:function(n,r){return r.pstyle("".concat(n,"-padding")).pfValue}},{key:"draw",value:function(n,r,i,a){if(this.isVisible(n,i)){var o=this.r,s=a.w,l=a.h,u=s/2,c=l/2,f=this.getStyle(n,i),v=f.shape,g=f.color,h=f.opacity;r.save(),r.fillStyle=xd(g,h),v==="round-rectangle"||v==="roundrectangle"?o.drawRoundRectanglePath(r,u,c,s,l,"auto"):v==="ellipse"&&o.drawEllipsePath(r,u,c,s,l),r.fill(),r.restore()}}}]),t}();function lC(t){var e=t&&t.style&&t.style.backgroundColor||"white";return kh(e)}var ep={};ep.initWebgl=function(t,e){var n=this,r=n.data.contexts[n.WEBGL],i=t.cy.container();t.bgColor=lC(i),t.webglTexSize=Math.min(t.webglTexSize,r.getParameter(r.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),n.webglDebug=t.webglDebug,n.webglDebugShowAtlases=t.webglDebugShowAtlases,console.log("max texture units",r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),console.log("max texture size",r.getParameter(r.MAX_TEXTURE_SIZE)),console.log("webgl options",t),n.pickingFrameBuffer=JE(r),n.pickingFrameBuffer.needsDraw=!0;var a=function(c){return n.getTextAngle(c,null)},o=function(c){var f=c.pstyle("label");return f&&f.value};n.eleDrawing=new oC(n,r,t);var s=new sC(n);n.eleDrawing.addTextureRenderType("node-body",za({getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement,isVisible:function(c){return c.visible()}})),n.eleDrawing.addTextureRenderType("node-label",za({getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:a,getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o})),n.eleDrawing.addTextureRenderType("node-overlay",za({getBoundingBox:e.getElementBox,getKey:function(c){return s.getStyleKey("overlay",c)},drawElement:function(c,f,v){return s.draw("overlay",c,f,v)},isVisible:function(c){return s.isVisible("overlay",c)},getPadding:function(c){return s.getPadding("overlay",c)}})),n.eleDrawing.addTextureRenderType("node-underlay",za({getBoundingBox:e.getElementBox,getKey:function(c){return s.getStyleKey("underlay",c)},drawElement:function(c,f,v){return s.draw("underlay",c,f,v)},isVisible:function(c){return s.isVisible("underlay",c)},getPadding:function(c){return s.getPadding("underlay",c)}})),n.eleDrawing.addTextureRenderType("edge-label",za({getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:a,getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o}));var l=To(function(){console.log("garbage collect flag set"),n.data.gc=!0},1e4);n.onUpdateEleCalcs(function(u,c){var f=!1;c&&c.length>0&&(f|=n.eleDrawing.invalidate(c)),f&&l()}),uC(n)};function uC(t){{var e=t.render;t.render=function(a){a=a||{};var o=t.cy;t.webgl&&(o.zoom()>Uv?(cC(t),e.call(t,a)):(fC(t),np(t,a,Qa.SCREEN)))}}{var n=t.matchCanvasSize;t.matchCanvasSize=function(a){n.call(t,a),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(a,o,s,l){return mC(t,a,o)};{var r=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){r.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var i=t.notify;t.notify=function(a,o){i.call(t,a,o),a==="viewport"||a==="bounds"?t.pickingFrameBuffer.needsDraw=!0:a==="background"&&t.eleDrawing.invalidate(o,{type:"node-body"})}}}function cC(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function fC(t){var e=function(r){r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.canvasWidth,t.canvasHeight),r.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function dC(t){var e=t.canvasWidth,n=t.canvasHeight,r=bc(t),i=r.pan,a=r.zoom,o=Za();js(o,o,[i.x,i.y]),wc(o,o,[a,a]);var s=Za();tC(s,e,n);var l=Za();return eC(l,s,o),l}function tp(t,e){var n=t.canvasWidth,r=t.canvasHeight,i=bc(t),a=i.pan,o=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n,r),e.translate(a.x,a.y),e.scale(o,o)}function hC(t,e){t.drawSelectionRectangle(e,function(n){return tp(t,n)})}function vC(t){var e=t.data.contexts[t.NODE];e.save(),tp(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function pC(t){var e=function(i,a,o){for(var s=i.atlasManager.getRenderTypeOpts(a),l=t.data.contexts[t.NODE],u=.125,c=s.atlasCollection.atlases,f=0;f<c.length;f++){var v=c[f],g=v.canvas,h=g.width,m=g.height,w=h*f,b=g.height*o;l.save(),l.scale(u,u),l.drawImage(g,w,b),l.strokeStyle="black",l.rect(w,b,h,m),l.stroke(),l.restore()}},n=0;e(t.eleDrawing,"node-body",n++),e(t.eleDrawing,"node-label",n++)}function gC(t,e,n,r,i){var a,o,s,l,u=bc(t),c=u.pan,f=u.zoom;{var v=KE(t,c,f,e,n),g=Zt(v,2),h=g[0],m=g[1],w=6;a=h-w/2,o=m-w/2,s=w,l=w}if(s===0||l===0)return[];var b=t.data.contexts[t.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),np(t,null,Qa.PICKING),t.pickingFrameBuffer.needsDraw=!1);var E=s*l,C=new Uint8Array(E*4);b.readPixels(a,o,s,l,b.RGBA,b.UNSIGNED_BYTE,C),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var x=new Set,k=0;k<E;k++){var A=C.slice(k*4,k*4+4),p=XE(A)-1;p>=0&&x.add(p)}return x}function mC(t,e,n){var r=gC(t,e,n),i=t.getCachedZSortedEles(),a,o,s=Dn(r),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,c=i[u];if(!a&&c.isNode()&&(a=c),!o&&c.isEdge()&&(o=c),a&&o)break}}catch(f){s.e(f)}finally{s.f()}return[a,o].filter(Boolean)}function np(t,e,n){var r,i;t.webglDebug&&(i=[],r=performance.now());var a=t.eleDrawing,o=0;if(n.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&hC(t,e),t.data.canvasNeedsRedraw[t.NODE]||n.picking){var s=function(L,N){N+=1,L.isNode()?(a.drawTexture(L,N,"node-underlay"),a.drawTexture(L,N,"node-body"),a.drawTexture(L,N,"node-label"),a.drawTexture(L,N,"node-overlay")):(a.drawEdgeLine(L,N),a.drawEdgeArrow(L,N,"source"),a.drawEdgeArrow(L,N,"target"),a.drawTexture(L,N,"edge-label"))},l=t.data.contexts[t.WEBGL];n.screen?(l.clearColor(0,0,0,0),l.enable(l.BLEND),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA)):l.disable(l.BLEND),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),l.viewport(0,0,l.canvas.width,l.canvas.height);var u=dC(t),c=t.getCachedZSortedEles();if(o=c.length,a.startFrame(u,i,n),n.screen){for(var f=0;f<c.nondrag.length;f++)s(c.nondrag[f],f);for(var v=0;v<c.drag.length;v++)s(c.drag[v],-1)}else if(n.picking)for(var g=0;g<c.length;g++)s(c[g],g);a.endFrame(),t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc()),n.screen&&t.webglDebugShowAtlases&&(vC(t),pC(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var h=performance.now(),m=!0,w=0,b=0,E=Dn(i),C;try{for(E.s();!(C=E.n()).done;){var x=C.value;w++,b+=x.count}}catch(D){E.e(D)}finally{E.f()}var k=Math.ceil(h-r),A="".concat(o," elements, ").concat(b," rectangles, ").concat(w," batches");if(m)console.log("WebGL (".concat(n.name,") - ").concat(A));else{console.log("WebGL render (".concat(n.name,") - frame time ").concat(k,"ms")),console.log("  ".concat(A)),console.log("Texture Atlases Used:");var p=a.getAtlasDebugInfo(),P=Dn(p),_;try{for(P.s();!(_=P.n()).done;){var O=_.value;console.log("  ".concat(O.type,": ").concat(O.keyCount," keys, ").concat(O.atlasCount," atlases"))}}catch(D){P.e(D)}finally{P.f()}console.log("")}}}var ti={};ti.drawPolygonPath=function(t,e,n,r,i,a){var o=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*a[0],n+s*a[1]);for(var l=1;l<a.length/2;l++)t.lineTo(e+o*a[l*2],n+s*a[l*2+1]);t.closePath()};ti.drawRoundPolygonPath=function(t,e,n,r,i,a,o){o.forEach(function(s){return Rv(t,s)}),t.closePath()};ti.drawRoundRectanglePath=function(t,e,n,r,i,a){var o=r/2,s=i/2,l=a==="auto"?Si(r,i):Math.min(a,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+o,n-s,e+o,n,l),t.arcTo(e+o,n+s,e,n+s,l),t.arcTo(e-o,n+s,e-o,n,l),t.arcTo(e-o,n-s,e,n-s,l),t.lineTo(e,n-s),t.closePath()};ti.drawBottomRoundRectanglePath=function(t,e,n,r,i,a){var o=r/2,s=i/2,l=a==="auto"?Si(r,i):a;t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.lineTo(e+o,n-s),t.lineTo(e+o,n),t.arcTo(e+o,n+s,e,n+s,l),t.arcTo(e-o,n+s,e-o,n,l),t.lineTo(e-o,n-s),t.lineTo(e,n-s),t.closePath()};ti.drawCutRectanglePath=function(t,e,n,r,i,a,o){var s=r/2,l=i/2,u=o==="auto"?ic():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+u,n-l),t.lineTo(e+s-u,n-l),t.lineTo(e+s,n-l+u),t.lineTo(e+s,n+l-u),t.lineTo(e+s-u,n+l),t.lineTo(e-s+u,n+l),t.lineTo(e-s,n+l-u),t.lineTo(e-s,n-l+u),t.closePath()};ti.drawBarrelPath=function(t,e,n,r,i){var a=r/2,o=i/2,s=e-a,l=e+a,u=n-o,c=n+o,f=Cu(r,i),v=f.widthOffset,g=f.heightOffset,h=f.ctrlPtOffsetPct*v;t.beginPath&&t.beginPath(),t.moveTo(s,u+g),t.lineTo(s,c-g),t.quadraticCurveTo(s+h,c,s+v,c),t.lineTo(l-v,c),t.quadraticCurveTo(l-h,c,l,c-g),t.lineTo(l,u+g),t.quadraticCurveTo(l-h,u,l-v,u),t.lineTo(s+v,u),t.quadraticCurveTo(s+h,u,s,u+g),t.closePath()};var Ed=Math.sin(0),Cd=Math.cos(0),Bu={},Ru={},rp=Math.PI/40;for(var Vi=0*Math.PI;Vi<2*Math.PI;Vi+=rp)Bu[Vi]=Math.sin(Vi),Ru[Vi]=Math.cos(Vi);ti.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=rp)a=e-s*Bu[u]*Ed+s*Ru[u]*Cd,o=n+l*Ru[u]*Ed+l*Bu[u]*Cd,u===0?t.moveTo(a,o):t.lineTo(a,o);t.closePath()};var Po={};Po.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]};Po.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),a=t.full?Math.ceil(r.w):i[2],o=t.full?Math.ceil(r.h):i[3],s=Fe(t.maxWidth)||Fe(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)a*=t.scale,o*=t.scale,u=t.scale;else if(s){var c=1/0,f=1/0;Fe(t.maxWidth)&&(c=u*t.maxWidth/a),Fe(t.maxHeight)&&(f=u*t.maxHeight/o),u=Math.min(c,f),a*=u,o*=u}s||(a*=l,o*=l,u*=l);var v=document.createElement("canvas");v.width=a,v.height=o,v.style.width=a+"px",v.style.height=o+"px";var g=v.getContext("2d");if(a>0&&o>0){g.clearRect(0,0,a,o),g.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)g.translate(-r.x1*u,-r.y1*u),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(r.x1*u,r.y1*u);else{var m=e.pan(),w={x:m.x*u,y:m.y*u};u*=e.zoom(),g.translate(w.x,w.y),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(-w.x,-w.y)}t.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=t.bg,g.rect(0,0,a,o),g.fill())}return v};function yC(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([r],{type:e})}function Sd(t){var e=t.indexOf(",");return t.substr(e+1)}function ip(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new fa(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(o){a(o)}});case"blob":return yC(Sd(r()),n);case"base64":return Sd(r());case"base64uri":default:return r()}}Po.png=function(t){return ip(t,this.bufferCanvasImage(t),"image/png")};Po.jpg=function(t){return ip(t,this.bufferCanvasImage(t),"image/jpeg")};var ap={};ap.nodeShapeImpl=function(t,e,n,r,i,a,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,a);case"polygon":return this.drawPolygonPath(e,n,r,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,a,s);case"barrel":return this.drawBarrelPath(e,n,r,i,a)}};var bC=op,lt=op.prototype;lt.CANVAS_LAYERS=3;lt.SELECT_BOX=0;lt.DRAG=1;lt.NODE=2;lt.WEBGL=3;lt.CANVAS_TYPES=["2d","2d","2d","webgl2"];lt.BUFFER_COUNT=3;lt.TEXTURE_BUFFER=0;lt.MOTIONBLUR_BUFFER_NODE=1;lt.MOTIONBLUR_BUFFER_DRAG=2;function op(t){var e=this,n=e.cy.window(),r=n.document;t.webgl&&(lt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(lt.CANVAS_LAYERS),contexts:new Array(lt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(lt.CANVAS_LAYERS),bufferCanvases:new Array(lt.BUFFER_COUNT),bufferContexts:new Array(lt.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=r.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=a,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=a;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Fm()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<lt.CANVAS_LAYERS;u++){var c=e.data.canvases[u]=r.createElement("canvas"),f=lt.CANVAS_TYPES[u];e.data.contexts[u]=c.getContext(f),e.data.contexts[u]||Ot("Could not create canvas of type "+f),Object.keys(l).forEach(function(Z){c.style[Z]=l[Z]}),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(lt.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[u]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[lt.NODE].setAttribute("data-id","layer"+lt.NODE+"-node"),e.data.canvases[lt.SELECT_BOX].setAttribute("data-id","layer"+lt.SELECT_BOX+"-selectbox"),e.data.canvases[lt.DRAG].setAttribute("data-id","layer"+lt.DRAG+"-drag"),e.data.canvases[lt.WEBGL]&&e.data.canvases[lt.WEBGL].setAttribute("data-id","layer"+lt.WEBGL+"-webgl");for(var u=0;u<lt.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=r.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var v=Tn(),g=function(K){return{x:(K.x1+K.x2)/2,y:(K.y1+K.y2)/2}},h=function(K){return{x:-K.w/2,y:-K.h/2}},m=function(K){var ce=K[0]._private,ve=ce.oldBackgroundTimestamp===ce.backgroundTimestamp;return!ve},w=function(K){return K[0]._private.nodeKey},b=function(K){return K[0]._private.labelStyleKey},E=function(K){return K[0]._private.sourceLabelStyleKey},C=function(K){return K[0]._private.targetLabelStyleKey},x=function(K,ce,ve,De,Oe){return e.drawElement(K,ce,ve,!1,!1,Oe)},k=function(K,ce,ve,De,Oe){return e.drawElementText(K,ce,ve,De,"main",Oe)},A=function(K,ce,ve,De,Oe){return e.drawElementText(K,ce,ve,De,"source",Oe)},p=function(K,ce,ve,De,Oe){return e.drawElementText(K,ce,ve,De,"target",Oe)},P=function(K){return K.boundingBox(),K[0]._private.bodyBounds},_=function(K){return K.boundingBox(),K[0]._private.labelBounds.main||v},O=function(K){return K.boundingBox(),K[0]._private.labelBounds.source||v},D=function(K){return K.boundingBox(),K[0]._private.labelBounds.target||v},L=function(K,ce){return ce},N=function(K){return g(P(K))},R=function(K,ce,ve){var De=K?K+"-":"";return{x:ce.x+ve.pstyle(De+"text-margin-x").pfValue,y:ce.y+ve.pstyle(De+"text-margin-y").pfValue}},z=function(K,ce,ve){var De=K[0]._private.rscratch;return{x:De[ce],y:De[ve]}},H=function(K){return R("",z(K,"labelX","labelY"),K)},W=function(K){return R("source",z(K,"sourceLabelX","sourceLabelY"),K)},X=function(K){return R("target",z(K,"targetLabelX","targetLabelY"),K)},re=function(K){return h(P(K))},ae=function(K){return h(O(K))},J=function(K){return h(D(K))},$=function(K){var ce=_(K),ve=h(_(K));if(K.isNode()){switch(K.pstyle("text-halign").value){case"left":ve.x=-ce.w-(ce.leftPad||0);break;case"right":ve.x=-(ce.rightPad||0);break}switch(K.pstyle("text-valign").value){case"top":ve.y=-ce.h-(ce.topPad||0);break;case"bottom":ve.y=-(ce.botPad||0);break}}return ve},U=e.data.eleTxrCache=new Ka(e,{getKey:w,doesEleInvalidateKey:m,drawElement:x,getBoundingBox:P,getRotationPoint:N,getRotationOffset:re,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),G=e.data.lblTxrCache=new Ka(e,{getKey:b,drawElement:k,getBoundingBox:_,getRotationPoint:H,getRotationOffset:$,isVisible:L}),V=e.data.slbTxrCache=new Ka(e,{getKey:E,drawElement:A,getBoundingBox:O,getRotationPoint:W,getRotationOffset:ae,isVisible:L}),Y=e.data.tlbTxrCache=new Ka(e,{getKey:C,drawElement:p,getBoundingBox:D,getRotationPoint:X,getRotationOffset:J,isVisible:L}),ne=e.data.lyrTxrCache=new Gv(e);e.onUpdateEleCalcs(function(K,ce){U.invalidateElements(ce),G.invalidateElements(ce),V.invalidateElements(ce),Y.invalidateElements(ce),ne.invalidateElements(ce);for(var ve=0;ve<ce.length;ve++){var De=ce[ve]._private;De.oldBackgroundTimestamp=De.backgroundTimestamp}});var se=function(K){for(var ce=0;ce<K.length;ce++)ne.enqueueElementRefinement(K[ce].ele)};U.onDequeue(se),G.onDequeue(se),V.onDequeue(se),Y.onDequeue(se),t.webgl&&e.initWebgl(t,{getStyleKey:w,getLabelKey:b,drawElement:x,drawLabel:k,getElementBox:P,getLabelBox:_,getElementRotationPoint:N,getElementRotationOffset:re,getLabelRotationPoint:H,getLabelRotationOffset:$})}lt.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[lt.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[lt.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[lt.SELECT_BOX]=e;break;case"gc":n.data.gc=!0;break}};var wC=typeof Path2D<"u";lt.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};lt.usePaths=function(){return wC&&this.pathsEnabled};lt.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};lt.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};lt.makeOffscreenCanvas=function(t,e){var n;if((typeof OffscreenCanvas>"u"?"undefined":jt(OffscreenCanvas))!=="undefined")n=new OffscreenCanvas(t,e);else{var r=this.cy.window(),i=r.document;n=i.createElement("canvas"),n.width=t,n.height=e}return n};[jv,yr,Pr,yc,Pi,ba,mn,ep,ti,Po,ap].forEach(function(t){Je(lt,t)});var xC=[{name:"null",impl:Lv},{name:"base",impl:qv},{name:"canvas",impl:bC}],EC=[{type:"layout",extensions:rE},{type:"renderer",extensions:xC}],sp={},lp={};function up(t,e,n){var r=n,i=function(P){xt("Can not register `"+e+"` for `"+t+"` since `"+P+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(go.prototype[e])return i(e);go.prototype[e]=n}else if(t==="collection"){if(an.prototype[e])return i(e);an.prototype[e]=n}else if(t==="layout"){for(var a=function(P){this.options=P,n.call(this,P),gt(this._private)||(this._private={}),this._private.cy=P.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=n.prototype.stop;o.stop=function(){var p=this.options;if(p&&p.animate){var P=this.animations;if(P)for(var _=0;_<P.length;_++)P[_].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(P){return P._private.cy},v={addEventFields:function(P,_){_.layout=P,_.cy=f(P),_.target=P},bubble:function(){return!0},parent:function(P){return f(P)}};Je(o,{createEmitter:function(){return this._private.emitter=new dl(v,this),this},emitter:function(){return this._private.emitter},on:function(P,_){return this.emitter().on(P,_),this},one:function(P,_){return this.emitter().one(P,_),this},once:function(P,_){return this.emitter().one(P,_),this},removeListener:function(P,_){return this.emitter().removeListener(P,_),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(P,_){return this.emitter().emit(P,_),this}}),wt.eventAliasesOn(o),r=a}else if(t==="renderer"&&e!=="null"&&e!=="base"){var g=cp("renderer","base"),h=g.prototype,m=n,w=n.prototype,b=function(){g.apply(this,arguments),m.apply(this,arguments)},E=b.prototype;for(var C in h){var x=h[C],k=w[C]!=null;if(k)return i(C);E[C]=x}for(var A in w)E[A]=w[A];h.clientFunctions.forEach(function(p){E[p]=E[p]||function(){Ot("Renderer does not implement `renderer."+p+"()` on its prototype")}}),r=b}else if(t==="__proto__"||t==="constructor"||t==="prototype")return Ot(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ah({map:sp,keys:[t,e],value:r})}function cp(t,e){return _h({map:sp,keys:[t,e]})}function CC(t,e,n,r,i){return Ah({map:lp,keys:[t,e,n,r],value:i})}function SC(t,e,n,r){return _h({map:lp,keys:[t,e,n,r]})}var Nu=function(){if(arguments.length===2)return cp.apply(null,arguments);if(arguments.length===3)return up.apply(null,arguments);if(arguments.length===4)return SC.apply(null,arguments);if(arguments.length===5)return CC.apply(null,arguments);Ot("Invalid extension access syntax")};go.prototype.extension=Nu;EC.forEach(function(t){t.extensions.forEach(function(e){up(t.type,e.name,e.impl)})});var fp=function t(){if(!(this instanceof t))return new t;this.length=0},Ai=fp.prototype;Ai.instanceString=function(){return"stylesheet"};Ai.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Ai.css=function(t,e){var n=this.length-1;if(Xe(t))this[n].properties.push({name:t,value:e});else if(gt(t))for(var r=t,i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],s=r[o];if(s!=null){var l=cn.properties[o]||cn.properties[rl(o)];if(l!=null){var u=l.name,c=s;this[n].properties.push({name:u,value:c})}}}return this};Ai.style=Ai.css;Ai.generateStyle=function(t){var e=new cn(t);return this.appendToStyle(e)};Ai.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var a=0;a<i.length;a++){var o=i[a];t.css(o.name,o.value)}}return t};var TC="3.31.0",vr=function(e){if(e===void 0&&(e={}),gt(e))return new go(e);if(Xe(e))return Nu.apply(Nu,arguments)};vr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(vr),t.apply(null,e),this};vr.warnings=function(t){return Rh(t)};vr.version=TC;vr.stylesheet=vr.Stylesheet=fp;var Is={exports:{}},kC=Is.exports,Td;function AC(){return Td||(Td=1,function(t,e){(function(r,i){t.exports=i()})(kC,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.i=function(a){return a},i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=11)}([function(n,r,i){n.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var o=arguments.length,s=Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return s.forEach(function(u){Object.keys(u).forEach(function(c){return a[c]=u[c]})}),a}},function(n,r,i){var a=i(0),o=Object.freeze({source:null,target:null,length:80,coeff:2e-4,weight:1});function s(u){return a({},o,u)}function l(u){var c=u.source,f=u.target,v=u.length<0?o.length:u.length,g=f.pos.x-c.pos.x,h=f.pos.y-c.pos.y,m=Math.sqrt(g*g+h*h);m===0&&(g=(Math.random()-.5)/50,h=(Math.random()-.5)/50,m=Math.sqrt(g*g+h*h));var w=m-v,b=(!u.coeff||u.coeff<0?o.springCoeff:u.coeff)*w/m*u.weight;c.force.x+=b*g,c.force.y+=b*h,f.force.x-=b*g,f.force.y-=b*h}n.exports={makeSpring:s,applySpring:l}},function(n,r,i){var a=function(){function R(z,H){for(var W=0;W<H.length;W++){var X=H[W];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(z,X.key,X)}}return function(z,H,W){return H&&R(z.prototype,H),W&&R(z,W),z}}();function o(R,z){if(!(R instanceof z))throw new TypeError("Cannot call a class as a function")}function s(R,z){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:R}function l(R,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);R.prototype=Object.create(z&&z.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(R,z):R.__proto__=z)}var u=i(13),c=i(0),f=i(4),v=i(10),g=v.tick,h=i(7),m=h.makeQuadtree,w=i(3),b=w.makeBody,E=i(1),C=E.makeSpring,x=function(z){return typeof z=="function"},k=function(z){return z.isParent()},A=function(z){return!k(z)},p=function(z){return k(z.source())||k(z.target())},P=function(z){return!p(z)},_=function(z){return z.scratch("euler").body},O=function(z){return k(z)?z.descendants().filter(A):z},D=function(z){var H=z.scratch("euler");return H||(H={},z.scratch("euler",H)),H},L=function(z,H){return x(z)?z(H):z},N=function(R){l(z,R);function z(H){return o(this,z),s(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,c({},f,H)))}return a(z,[{key:"prerun",value:function(W){var X=W;X.quadtree=m();var re=X.bodies=[];X.nodes.filter(function(J){return A(J)}).forEach(function(J){var $=D(J),U=b({pos:{x:$.x,y:$.y},mass:L(X.mass,J),locked:$.locked});U._cyNode=J,$.body=U,U._scratch=$,re.push(U)});var ae=X.springs=[];X.edges.filter(P).forEach(function(J){var $=C({source:_(J.source()),target:_(J.target()),length:L(X.springLength,J),coeff:L(X.springCoeff,J)});$._cyEdge=J;var U=D(J);$._scratch=U,U.spring=$,ae.push($)}),X.edges.filter(p).forEach(function(J){var $=O(J.source()),U=O(J.target());$=[$[0]],U=[U[0]],$.forEach(function(G){U.forEach(function(V){ae.push(C({source:_(G),target:_(V),length:L(X.springLength,J),coeff:L(X.springCoeff,J)}))})})})}},{key:"tick",value:function(W){var X=g(W),re=X<=W.movementThreshold;return re}}]),z}(u);n.exports=N},function(n,r,i){var a=Object.freeze({pos:{x:0,y:0},prevPos:{x:0,y:0},force:{x:0,y:0},velocity:{x:0,y:0},mass:1}),o=function(f){return{x:f.x,y:f.y}},s=function(f,v){return f??v},l=function(f,v){return o(s(f,v))};function u(c){var f={};return f.pos=l(c.pos,a.pos),f.prevPos=l(c.prevPos,f.pos),f.force=l(c.force,a.force),f.velocity=l(c.velocity,a.velocity),f.mass=c.mass!=null?c.mass:a.mass,f.locked=c.locked,f}n.exports={makeBody:u}},function(n,r,i){var a=Object.freeze({springLength:function(s){return 80},springCoeff:function(s){return 8e-4},mass:function(s){return 4},gravity:-1.2,pull:.001,theta:.666,dragCoeff:.02,movementThreshold:1,timeStep:20});n.exports=a},function(n,r,i){var a=.02;function o(s,l){var u=void 0;l!=null?u=l:s.dragCoeff!=null?u=s.dragCoeff:u=a,s.force.x-=u*s.velocity.x,s.force.y-=u*s.velocity.y}n.exports={applyDrag:o}},function(n,r,i){function a(o,s){var l=0,u=0,c=0,f=0,v,g=o.length;if(g===0)return 0;for(v=0;v<g;++v){var h=o[v],m=s/h.mass;if(!h.grabbed){h.locked?(h.velocity.x=0,h.velocity.y=0):(h.velocity.x+=m*h.force.x,h.velocity.y+=m*h.force.y);var w=h.velocity.x,b=h.velocity.y,E=Math.sqrt(w*w+b*b);E>1&&(h.velocity.x=w/E,h.velocity.y=b/E),l=s*h.velocity.x,c=s*h.velocity.y,h.pos.x+=l,h.pos.y+=c,u+=Math.abs(l),f+=Math.abs(c)}}return(u*u+f*f)/g}n.exports={integrate:a}},function(n,r,i){var a=i(9),o=i(8),s=function(g){g.x=0,g.y=0},l=function(g,h){var m=1e-8,w=Math.abs(g.x-h.x),b=Math.abs(g.y-h.y);return w<m&&b<m};function u(){var v=[],g=new o,h=[],m=0,w=b();function b(){var k=h[m];return k?(k.quad0=null,k.quad1=null,k.quad2=null,k.quad3=null,k.body=null,k.mass=k.massX=k.massY=0,k.left=k.right=k.top=k.bottom=0):(k=new a,h[m]=k),++m,k}function E(k,A,p,P){var _=v,O=void 0,D=void 0,L=void 0,N=void 0,R=0,z=0,H=1,W=0,X=1;_[0]=w,s(k.force);var re=-k.pos.x,ae=-k.pos.y,J=Math.sqrt(re*re+ae*ae),$=k.mass*P/J;for(R+=$*re,z+=$*ae;H;){var U=_[W],G=U.body;H-=1,W+=1;var V=G!==k;G&&V?(D=G.pos.x-k.pos.x,L=G.pos.y-k.pos.y,N=Math.sqrt(D*D+L*L),N===0&&(D=(Math.random()-.5)/50,L=(Math.random()-.5)/50,N=Math.sqrt(D*D+L*L)),O=A*G.mass*k.mass/(N*N*N),R+=O*D,z+=O*L):V&&(D=U.massX/U.mass-k.pos.x,L=U.massY/U.mass-k.pos.y,N=Math.sqrt(D*D+L*L),N===0&&(D=(Math.random()-.5)/50,L=(Math.random()-.5)/50,N=Math.sqrt(D*D+L*L)),(U.right-U.left)/N<p?(O=A*U.mass*k.mass/(N*N*N),R+=O*D,z+=O*L):(U.quad0&&(_[X]=U.quad0,H+=1,X+=1),U.quad1&&(_[X]=U.quad1,H+=1,X+=1),U.quad2&&(_[X]=U.quad2,H+=1,X+=1),U.quad3&&(_[X]=U.quad3,H+=1,X+=1)))}k.force.x+=R,k.force.y+=z}function C(k){if(k.length!==0){var A=Number.MAX_VALUE,p=Number.MAX_VALUE,P=Number.MIN_VALUE,_=Number.MIN_VALUE,O=void 0,D=k.length;for(O=D;O--;){var L=k[O].pos.x,N=k[O].pos.y;L<A&&(A=L),L>P&&(P=L),N<p&&(p=N),N>_&&(_=N)}var R=P-A,z=_-p;for(R>z?_=p+R:P=A+z,m=0,w=b(),w.left=A,w.right=P,w.top=p,w.bottom=_,O=D-1,O>=0&&(w.body=k[O]);O--;)x(k[O])}}function x(k){for(g.reset(),g.push(w,k);!g.isEmpty();){var A=g.pop(),p=A.node,P=A.body;if(p.body){var W=p.body;if(p.body=null,l(W.pos,P.pos)){var X=3;do{var re=Math.random(),ae=(p.right-p.left)*re,J=(p.bottom-p.top)*re;W.pos.x=p.left+ae,W.pos.y=p.top+J,X-=1}while(X>0&&l(W.pos,P.pos));if(X===0&&l(W.pos,P.pos))return}g.push(p,W),g.push(p,P)}else{var _=P.pos.x,O=P.pos.y;p.mass=p.mass+P.mass,p.massX=p.massX+P.mass*_,p.massY=p.massY+P.mass*O;var D=0,L=p.left,N=(p.right+L)/2,R=p.top,z=(p.bottom+R)/2;_>N&&(D=D+1,L=N,N=p.right),O>z&&(D=D+2,R=z,z=p.bottom);var H=c(p,D);H?g.push(H,P):(H=b(),H.left=L,H.top=R,H.right=N,H.bottom=z,H.body=P,f(p,D,H))}}}return{insertBodies:C,updateBodyForce:E}}function c(v,g){return g===0?v.quad0:g===1?v.quad1:g===2?v.quad2:g===3?v.quad3:null}function f(v,g,h){g===0?v.quad0=h:g===1?v.quad1=h:g===2?v.quad2=h:g===3&&(v.quad3=h)}n.exports={makeQuadtree:u}},function(n,r,i){n.exports=a;function a(){this.stack=[],this.popIdx=0}a.prototype={isEmpty:function(){return this.popIdx===0},push:function(l,u){var c=this.stack[this.popIdx];c?(c.node=l,c.body=u):this.stack[this.popIdx]=new o(l,u),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function o(s,l){this.node=s,this.body=l}},function(n,r,i){n.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(n,r,i){var a=i(6),o=a.integrate,s=i(5),l=s.applyDrag,u=i(1),c=u.applySpring;function f(v){var g=v.bodies,h=v.springs,m=v.quadtree,w=v.timeStep,b=v.gravity,E=v.theta,C=v.dragCoeff,x=v.pull;g.forEach(function(O){var D=O._scratch;D&&(O.locked=D.locked,O.grabbed=D.grabbed,O.pos.x=D.x,O.pos.y=D.y)}),m.insertBodies(g);for(var k=0;k<g.length;k++){var A=g[k];m.updateBodyForce(A,b,E,x),l(A,C)}for(var p=0;p<h.length;p++){var P=h[p];c(P)}var _=o(g,w);return g.forEach(function(O){var D=O._scratch;D&&(D.x=O.pos.x,D.y=O.pos.y)}),_}n.exports={tick:f}},function(n,r,i){var a=i(2),o=function(l){l&&l("layout","euler",a)};typeof cytoscape<"u"&&o(cytoscape),n.exports=o},function(n,r,i){n.exports=Object.freeze({animate:!0,refresh:10,maxIterations:1e3,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,infinite:!1})},function(n,r,i){var a=function(){function b(E,C){for(var x=0;x<C.length;x++){var k=C[x];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}return function(E,C,x){return C&&b(E.prototype,C),x&&b(E,x),E}}();function o(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}var s=i(0),l=i(12),u=i(14),c=i(15),f=c.setInitialPositionState,v=c.refreshPositions,g=c.getNodePositionData,h=i(16),m=h.multitick,w=function(){function b(E){o(this,b);var C=this.options=s({},l,E),x=C.eles.nodes();if(!C.randomize){x=x.sort(function(P,_){return P.position().x-_.position().x});var k={x:0,y:0},A={};x.forEach(function(P){Object.assign(A,P.position()),Math.abs(k.x-A.x)<C.theta&&Math.abs(k.y-A.y)<C.theta&&P.position({x:Math.random()*100,y:Math.random()*100}),Object.assign(k,A)})}var p=this.state=s({},C,{layout:this,nodes:x,edges:C.eles.edges(),tickIndex:0,firstUpdate:!0});p.animateEnd=C.animate&&C.animate==="end",p.animateContinuously=C.animate&&!p.animateEnd}return a(b,[{key:"run",value:function(){var C=this,x=this.state;if(x.tickIndex=0,x.firstUpdate=!0,x.startTime=Date.now(),x.running=!0,x.currentBoundingBox=u(x.boundingBox,x.cy),x.ready&&C.one("ready",x.ready),x.stop&&C.one("stop",x.stop),x.nodes.forEach(function(ae){return f(ae,x)}),C.prerun(x),x.animateContinuously){var k=function(J){if(x.ungrabifyWhileSimulating){var $=g(J,x).grabbable=J.grabbable();$&&J.ungrabify()}},A=function(J){if(x.ungrabifyWhileSimulating){var $=g(J,x).grabbable;$&&J.grabify()}},p=function(J){return g(J,x).grabbed=J.grabbed()},P=function(J){var $=J.target;p($)},_=P,O=function(J){var $=J.target,U=g($,x),G=$.position();U.x=G.x,U.y=G.y},D=function(J){J.on("grab",P),J.on("free",_),J.on("drag",O)},L=function(J){J.removeListener("grab",P),J.removeListener("free",_),J.removeListener("drag",O)},N=function(){x.fit&&x.animateContinuously&&x.cy.fit(x.padding)},R=function(){v(x.nodes,x),N(),requestAnimationFrame(z)},z=function(){m(x,R,H)},H=function(){v(x.nodes,x),N(),x.nodes.forEach(function(J){A(J),L(J)}),x.running=!1,C.emit("layoutstop")};C.emit("layoutstart"),x.nodes.forEach(function(ae){k(ae),D(ae)}),z()}else{for(var W=!1,X=function(){},re=function(){return W=!0};!W;)m(x,X,re);x.eles.layoutPositions(this,x,function(ae){var J=g(ae,x);return{x:J.x,y:J.y}})}return C.postrun(x),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"tick",value:function(){}},{key:"stop",value:function(){return this.state.running=!1,this}},{key:"destroy",value:function(){return this}}]),b}();n.exports=w},function(n,r,i){n.exports=function(a,o){return a==null?a={x1:0,y1:0,w:o.width(),h:o.height()}:a={x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2,w:a.w,h:a.h},a.x2==null&&(a.x2=a.x1+a.w),a.w==null&&(a.w=a.x2-a.x1),a.y2==null&&(a.y2=a.y1+a.h),a.h==null&&(a.h=a.y2-a.y1),a}},function(n,r,i){var a=i(0),o=function(c,f){var v=c.position(),g=f.currentBoundingBox,h=c.scratch(f.name);h==null&&(h={},c.scratch(f.name,h)),a(h,f.randomize?{x:g.x1+Math.random()*g.w,y:g.y1+Math.random()*g.h}:{x:v.x,y:v.y}),h.locked=c.locked()},s=function(c,f){return c.scratch(f.name)},l=function(c,f){c.positions(function(v){var g=v.scratch(f.name);return{x:g.x,y:g.y}})};n.exports={setInitialPositionState:o,getNodePositionData:s,refreshPositions:l}},function(n,r,i){var a=function(){},o=function(u){var c=u,f=u.layout,v=f.tick(c);c.firstUpdate&&(c.animateContinuously&&c.layout.emit("layoutready"),c.firstUpdate=!1),c.tickIndex++;var g=Date.now()-c.startTime;return!c.infinite&&(v||c.tickIndex>=c.maxIterations||g>=c.maxSimulationTime)},s=function(u){for(var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,v=!1,g=u,h=0;h<g.refresh&&(v=!g.running||o(g),!v);h++);v?f():c()};n.exports={tick:o,multitick:s}}])})}(Is)),Is.exports}var _C=AC();const IC=Ii(_C);vr.use(IC);const MC=500;let qi;function dp(t,e,n=!1){return"layout"+t+e.sort().toString().replace(/[^a-z]/g,"")+!!n}function hp(t){const e=[];for(let n=0;n<t.size();n++){const r=t[n];e.push([r.data(Ye.ID),r.position()])}return e}function kd(t){const e={x:0,y:0};for(let n=0;n<t.length;n++){const r=t[n].position();e.x+=r.x,e.y+=r.y}return e.x/=t.length,e.y/=t.length,e}async function Vn(t,e,n,r=!1,i=!1){if(t.nodes().size()===0)return Ie.warn("layout.js#run: Graph empty. Nothing to layout."),!1;const a=ua("layout");if(r){const v=new Set,g=[],h=t.nodes();for(let m=0;m<h.length;m++){const w=h[m],b=w.data(Ye.SOURCE);b&&(v.has(b)||(t.add({group:"nodes",data:{id:b,mass:400,type:"virtual"}}),v.add(b)),g.push({group:"edges",data:{source:w.data(Ye.ID),target:b,springLength:180}}))}Ie.debug("Separate subontologies checked"),Ie.debug(`Adding ${g.length} virtual edges.`),t.add(g)}else Ie.debug("Separate subontologies unchecked");qi&&qi.stop();let o,s;t.nodes(":selected").size()>1?(o=t.elements(":selected"),s=!0):(o=t.elements(":visible"),s=!1);let l;s&&(l=kd(o.nodes()));const u=o.size()>MC&&typeof window<"u",c={...e,animate:u};qi=o.layout(c),qi.on("layoutstop",()=>{if(s){const v=kd(o.nodes());o.nodes().shift({x:l.x-v.x,y:l.y-v.y})}if(a.stop(),n&&r){const v=t.nodes("[type='virtual']");Ie.debug(`Removing ${v.length} virtual nodes.`),t.remove(v)}if(n&&i){if(typeof localStorage>"u")return Ie.warn("web storage not available, could not write to cache."),!0;const v=hp(t.nodes()),g=dp(e.name,n,r);localStorage.setItem(g,JSON.stringify(v)),Ie.info("Replaced layout cache.")}});const f=qi.promiseOn("layoutready");return qi.run(),await f,!0}async function PC(t,e){const n=new Map(e);let r=0,i=0;const o=await Vn(t,{name:"preset",fit:!0,positions:s=>{let l;return(l=n.get(s.data(Ye.ID)))?(r++,l):(i++,{x:0,y:0})}});if(i>0||r<hp.length){Ie.debug(`...${r}/${t.nodes().size()} node positions set. ${e.length-r} superfluous layout positions .`);const s=r/e.length,l=r/t.nodes().size();if(s<Ue.layoutCacheMinPrecision)return Ie.warn(`Preset layout precision of ${s} less than minimal required precision of ${Ue.layoutCacheMinPrecision}.`),!1;if(l<Ue.layoutCacheMinRecall)return Ie.warn(`Recall of ${l} less than minimal required of recall of ${Ue.layoutCacheMinRecall}.`),!1}else Ie.debug("...layout applied with 100% overlap.");return r===0?(Ie.error("0 hits in the preset layout."),!1):o}async function DC(t,e,n,r=!1){if(typeof localStorage>"u")return Ie.error("Web storage not available, could not access browser-based cache."),Vn(t,e,n,r,!1);if(!n)return Ie.debug("subs not supplied, run layout without cache"),Vn(t,e,void 0,!1,!1);const i=dp(e.name,n,r),a=localStorage.getItem(i);if(a)try{const o=JSON.parse(a);if(Ie.debug(`Loaded layout from cache, applying ${o.length} positions...`),await PC(t,o))return!0;Ie.warn("Could not apply layout to active graph, recalculating layout...")}catch(o){Ie.warn("Could not load cache item, recalculating layout...",o)}else Ie.warn("Layout not in cache, recalculating layout...");return Vn(t,e,n,r,!0)}function LC(t){const e=t.data("springLength");return e||800}const Ms={name:"euler",springLength:t=>LC(t),animate:!0,refresh:50,maxSimulationTime:4e4,maxIterations:500,timeStep:80,randomize:!0,movementThreshold:1,fit:!1,mass:t=>t.data("mass")|40},xc={name:"euler",springLength:40,animate:!1,maxSimulationTime:1e4,maxIterations:100,timeStep:80,refresh:50,randomize:!1,movementThreshold:1,fit:!1,mass:40},vp={name:"cose",animate:!0,refresh:50,numIter:500,initialTemp:1e3,nestingFactor:1.01,randomize:!1,fit:!0};function OC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cs(t){return function(e){if(Array.isArray(e))return nu(e)}(t)||function(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return nu(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nu(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ad,ru,fi,iu,_d,Yn=(Ad=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],ru=function(){function t(r){var i=r.targetModal,a=r.triggers,o=a===void 0?[]:a,s=r.onShow,l=s===void 0?function(){}:s,u=r.onClose,c=u===void 0?function(){}:u,f=r.openTrigger,v=f===void 0?"data-micromodal-trigger":f,g=r.closeTrigger,h=g===void 0?"data-micromodal-close":g,m=r.openClass,w=m===void 0?"is-open":m,b=r.disableScroll,E=b!==void 0&&b,C=r.disableFocus,x=C!==void 0&&C,k=r.awaitCloseAnimation,A=k!==void 0&&k,p=r.awaitOpenAnimation,P=p!==void 0&&p,_=r.debugMode,O=_!==void 0&&_;(function(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")})(this,t),this.modal=document.getElementById(i),this.config={debugMode:O,disableScroll:E,openTrigger:v,closeTrigger:h,openClass:w,onShow:l,onClose:c,awaitCloseAnimation:A,awaitOpenAnimation:P,disableFocus:x},o.length>0&&this.registerTriggers.apply(this,cs(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,n;return e=t,(n=[{key:"registerTriggers",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.filter(Boolean).forEach(function(s){s.addEventListener("click",function(l){return r.showModal(l)})})}},{key:"showModal",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var a=function o(){r.modal.removeEventListener("animationend",o,!1),r.setFocusToFirstNode()};this.modal.addEventListener("animationend",a,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,i)}},{key:"closeModal",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,r),this.config.awaitCloseAnimation){var a=this.config.openClass;this.modal.addEventListener("animationend",function o(){i.classList.remove(a),i.removeEventListener("animationend",o,!1)},!1)}else i.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(r){this.modal=document.getElementById(r),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(r){if(this.config.disableScroll){var i=document.querySelector("body");switch(r){case"enable":Object.assign(i.style,{overflow:""});break;case"disable":Object.assign(i.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(r){(r.target.hasAttribute(this.config.closeTrigger)||r.target.parentNode.hasAttribute(this.config.closeTrigger))&&(r.preventDefault(),r.stopPropagation(),this.closeModal(r))}},{key:"onKeydown",value:function(r){r.keyCode===27&&this.closeModal(r),r.keyCode===9&&this.retainFocus(r)}},{key:"getFocusableNodes",value:function(){var r=this.modal.querySelectorAll(Ad);return Array.apply(void 0,cs(r))}},{key:"setFocusToFirstNode",value:function(){var r=this;if(!this.config.disableFocus){var i=this.getFocusableNodes();if(i.length!==0){var a=i.filter(function(o){return!o.hasAttribute(r.config.closeTrigger)});a.length>0&&a[0].focus(),a.length===0&&i[0].focus()}}}},{key:"retainFocus",value:function(r){var i=this.getFocusableNodes();if(i.length!==0)if(i=i.filter(function(o){return o.offsetParent!==null}),this.modal.contains(document.activeElement)){var a=i.indexOf(document.activeElement);r.shiftKey&&a===0&&(i[i.length-1].focus(),r.preventDefault()),!r.shiftKey&&i.length>0&&a===i.length-1&&(i[0].focus(),r.preventDefault())}else i[0].focus()}}])&&OC(e.prototype,n),t}(),fi=null,iu=function(t){if(!document.getElementById(t))return console.warn("MicroModal: âSeems like you have missed %c'".concat(t,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(t,'"></div>')),!1},_d=function(t,e){if(function(r){r.length<=0&&(console.warn("MicroModal: âPlease specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(t),!e)return!0;for(var n in e)iu(n);return!0},{init:function(t){var e=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),n=cs(document.querySelectorAll("[".concat(e.openTrigger,"]"))),r=function(o,s){var l=[];return o.forEach(function(u){var c=u.attributes[s].value;l[c]===void 0&&(l[c]=[]),l[c].push(u)}),l}(n,e.openTrigger);if(e.debugMode!==!0||_d(n,r)!==!1)for(var i in r){var a=r[i];e.targetModal=i,e.triggers=cs(a),fi=new ru(e)}},show:function(t,e){var n=e||{};n.targetModal=t,n.debugMode===!0&&iu(t)===!1||(fi&&fi.removeEventListeners(),(fi=new ru(n)).showModal())},close:function(t){t?fi.closeModalById(t):fi.closeModal()}});typeof window<"u"&&(window.MicroModal=Yn);const pp=new Map,gp=new Map,fs=new Set;async function Id(t,e){const n=`SELECT DISTINCT(?class) ?label
  FROM <http://www.snik.eu/ontology/${t}>
  {
    ?class meta:chapter/meta:subChapterOf* <${e}>.
    ?class rdfs:label ?label.
    FILTER(LANGMATCHES(LANG(?label),"en"))
  }
  ORDER BY ASC(?class)`,r=await Ir(n);r.forEach(a=>{gp.set(a.class.value,a.label.value)});const i=r.map(a=>a.class.value);return pp.set(e,i),new Set(i)}async function Md(t,e){const n=Pn("tab:chapter-search-classes");for(;n.rows.length>0;)n.deleteRow(0);const r=(o,s)=>{const u=n.insertRow().insertCell(),c=document.createElement("a");u.appendChild(c),c.innerText=o,c.addEventListener("click",()=>{Yn.close("chapter-search"),t.resetStyle(),t.presentUris(Array.from(e),s)})};r("Show Only those in Graph",!0),r("Highlight All in Graph",!1);const a=n.insertRow().insertCell();a.innerHTML="&nbsp;";for(const o of e){const l=n.insertRow().insertCell(),u=document.createElement("a");l.appendChild(u),u.innerText=gp.get(o),u.addEventListener("click",()=>{Yn.close("chapter-search"),t.presentUri(o)})}}async function Pd(t,e){Yn.show("chapter-search");const n=Pn("tab:chapter-search-chapters");for(;n.rows.length>0;)n.deleteRow(0);{const s=Pn("tab:chapter-search-classes");for(;s.rows.length>0;)s.deleteRow(0)}fs.clear();const r=n.insertRow().insertCell(),i=document.createElement("a");r.appendChild(i),i.setAttribute("data-i18n","deselect-all"),i.innerText=ro("deselect-all"),i.addEventListener("click",()=>{for(const s of document.getElementsByClassName("chaptersearch-checkbox"))s.checked&&s.click()});const a=`SELECT COUNT(DISTINCT(?c)) AS ?count ?ch
  FROM <http://www.snik.eu/ontology/${e}>
  {
    ?c meta:chapter/meta:subChapterOf* ?ch.
  } ORDER BY ASC(?ch)`,o=await Ir(a);for(const s of o){const l=s.ch.value,u=n.insertRow(),c=u.insertCell();c.addEventListener("click",async()=>Md(t,await Id(e,l)));const f=document.createElement("a");c.appendChild(f),f.innerText=s.ch.value;const v=u.insertCell();v.innerHTML=s.count.value;const g=u.insertCell(),h=document.createElement("input");g.appendChild(h),h.setAttribute("type","checkbox"),h.classList.add("chaptersearch-checkbox"),g.addEventListener("input",async()=>{h.checked?(await Id(e,l),fs.add(l)):fs.delete(l),Md(t,new Set([...fs].map(m=>pp.get(m)).flat().sort()))})}}const au=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function ou(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),n)}function Ha(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on".concat(e),n)}function mp(t,e){const n=e.slice(0,e.length-1);for(let r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function yp(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function BC(t,e){const n=t.length>=e.length?t:e,r=t.length>=e.length?e:t;let i=!0;for(let a=0;a<n.length;a++)r.indexOf(n[a])===-1&&(i=!1);return i}const mo={backspace:8,"â«":8,tab:9,clear:12,enter:13,"â©":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"âª":20,",":188,".":190,"/":191,"`":192,"-":au?173:189,"=":au?61:187,";":au?59:186,"'":222,"[":219,"]":221,"\\":220},pr={"â§":16,shift:16,"â¥":18,alt:18,option:18,"â":17,ctrl:17,control:17,"â":91,cmd:91,command:91},Ps={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},nn={16:!1,18:!1,17:!1,91:!1},Bt={};for(let t=1;t<20;t++)mo["f".concat(t)]=111+t;let Dt=[],Ja=null,bp="all";const Er=new Map,Do=t=>mo[t.toLowerCase()]||pr[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),RC=t=>Object.keys(mo).find(e=>mo[e]===t),NC=t=>Object.keys(pr).find(e=>pr[e]===t);function wp(t){bp=t||"all"}function yo(){return bp||"all"}function FC(){return Dt.slice(0)}function zC(){return Dt.map(t=>RC(t)||NC(t)||String.fromCharCode(t))}function HC(){const t=[];return Object.keys(Bt).forEach(e=>{Bt[e].forEach(n=>{let{key:r,scope:i,mods:a,shortcut:o}=n;t.push({scope:i,shortcut:o,mods:a,keys:r.split("+").map(s=>Do(s))})})}),t}function $C(t){const e=t.target||t.srcElement,{tagName:n}=e;let r=!0;const i=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function VC(t){return typeof t=="string"&&(t=Do(t)),Dt.indexOf(t)!==-1}function qC(t,e){let n,r;t||(t=yo());for(const i in Bt)if(Object.prototype.hasOwnProperty.call(Bt,i))for(n=Bt[i],r=0;r<n.length;)n[r].scope===t?n.splice(r,1).forEach(o=>{let{element:s}=o;return Ec(s)}):r++;yo()===t&&wp(e||"all")}function WC(t){let e=t.keyCode||t.which||t.charCode;const n=Dt.indexOf(e);if(n>=0&&Dt.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&Dt.splice(0,Dt.length),(e===93||e===224)&&(e=91),e in nn){nn[e]=!1;for(const r in pr)pr[r]===e&&(Cr[r]=!1)}}function xp(t){if(typeof t>"u")Object.keys(Bt).forEach(i=>{Array.isArray(Bt[i])&&Bt[i].forEach(a=>ds(a)),delete Bt[i]}),Ec(null);else if(Array.isArray(t))t.forEach(i=>{i.key&&ds(i)});else if(typeof t=="object")t.key&&ds(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];let[i,a]=n;typeof i=="function"&&(a=i,i=""),ds({key:t,scope:i,method:a,splitKey:"+"})}}const ds=t=>{let{key:e,scope:n,method:r,splitKey:i="+"}=t;yp(e).forEach(o=>{const s=o.split(i),l=s.length,u=s[l-1],c=u==="*"?"*":Do(u);if(!Bt[c])return;n||(n=yo());const f=l>1?mp(pr,s):[],v=[];Bt[c]=Bt[c].filter(g=>{const m=(r?g.method===r:!0)&&g.scope===n&&BC(g.mods,f);return m&&v.push(g.element),!m}),v.forEach(g=>Ec(g))})};function Dd(t,e,n,r){if(e.element!==r)return;let i;if(e.scope===n||e.scope==="all"){i=e.mods.length>0;for(const a in nn)Object.prototype.hasOwnProperty.call(nn,a)&&(!nn[a]&&e.mods.indexOf(+a)>-1||nn[a]&&e.mods.indexOf(+a)===-1)&&(i=!1);(e.mods.length===0&&!nn[16]&&!nn[18]&&!nn[17]&&!nn[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(Dt),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function Ld(t,e){const n=Bt["*"];let r=t.keyCode||t.which||t.charCode;if(!Cr.filter.call(this,t))return;if((r===93||r===224)&&(r=91),Dt.indexOf(r)===-1&&r!==229&&Dt.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(s=>{const l=Ps[s];t[s]&&Dt.indexOf(l)===-1?Dt.push(l):!t[s]&&Dt.indexOf(l)>-1?Dt.splice(Dt.indexOf(l),1):s==="metaKey"&&t[s]&&(Dt=Dt.filter(u=>u in Ps||u===r))}),r in nn){nn[r]=!0;for(const s in pr)pr[s]===r&&(Cr[s]=!0);if(!n)return}for(const s in nn)Object.prototype.hasOwnProperty.call(nn,s)&&(nn[s]=t[Ps[s]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Dt.indexOf(17)===-1&&Dt.push(17),Dt.indexOf(18)===-1&&Dt.push(18),nn[17]=!0,nn[18]=!0);const i=yo();if(n)for(let s=0;s<n.length;s++)n[s].scope===i&&(t.type==="keydown"&&n[s].keydown||t.type==="keyup"&&n[s].keyup)&&Dd(t,n[s],i,e);if(!(r in Bt))return;const a=Bt[r],o=a.length;for(let s=0;s<o;s++)if((t.type==="keydown"&&a[s].keydown||t.type==="keyup"&&a[s].keyup)&&a[s].key){const l=a[s],{splitKey:u}=l,c=l.key.split(u),f=[];for(let v=0;v<c.length;v++)f.push(Do(c[v]));f.sort().join("")===Dt.sort().join("")&&Dd(t,l,i,e)}}function Cr(t,e,n){Dt=[];const r=yp(t);let i=[],a="all",o=document,s=0,l=!1,u=!0,c="+",f=!1,v=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(a=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(f=e.capture),typeof e.splitKey=="string"&&(c=e.splitKey),e.single===!0&&(v=!0)),typeof e=="string"&&(a=e),v&&xp(t,a);s<r.length;s++)t=r[s].split(c),i=[],t.length>1&&(i=mp(pr,t)),t=t[t.length-1],t=t==="*"?"*":Do(t),t in Bt||(Bt[t]=[]),Bt[t].push({keyup:l,keydown:u,scope:a,mods:i,shortcut:r[s],method:n,key:r[s],splitKey:c,element:o});if(typeof o<"u"&&window){if(!Er.has(o)){const g=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return Ld(m,o)},h=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Ld(m,o),WC(m)};Er.set(o,{keydownListener:g,keyupListenr:h,capture:f}),ou(o,"keydown",g,f),ou(o,"keyup",h,f)}if(!Ja){const g=()=>{Dt=[]};Ja={listener:g,capture:f},ou(window,"focus",g,f)}}}function UC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Bt).forEach(n=>{Bt[n].filter(i=>i.scope===e&&i.shortcut===t).forEach(i=>{i&&i.method&&i.method()})})}function Ec(t){const e=Object.values(Bt).flat();if(e.findIndex(r=>{let{element:i}=r;return i===t})<0){const{keydownListener:r,keyupListenr:i,capture:a}=Er.get(t)||{};r&&i&&(Ha(t,"keyup",i,a),Ha(t,"keydown",r,a),Er.delete(t))}if((e.length<=0||Er.size<=0)&&(Object.keys(Er).forEach(i=>{const{keydownListener:a,keyupListenr:o,capture:s}=Er.get(i)||{};a&&o&&(Ha(i,"keyup",o,s),Ha(i,"keydown",a,s),Er.delete(i))}),Er.clear(),Object.keys(Bt).forEach(i=>delete Bt[i]),Ja)){const{listener:i,capture:a}=Ja;Ha(window,"focus",i,a),Ja=null}}const su={getPressedKeyString:zC,setScope:wp,getScope:yo,deleteScope:qC,getPressedKeyCodes:FC,getAllKeyCodes:HC,isPressed:VC,filter:$C,trigger:UC,unbind:xp,keyMap:mo,modifier:pr,modifierMap:Ps};for(const t in su)Object.prototype.hasOwnProperty.call(su,t)&&(Cr[t]=su[t]);if(typeof window<"u"){const t=window.hotkeys;Cr.noConflict=e=>(e&&window.hotkeys===Cr&&(window.hotkeys=t),Cr),window.hotkeys=Cr}function GC(){Yn.show("subontology-connectivity");const t=document.getElementById("subontology-connectivity-form");t.listener||(t.listener=async e=>{e.preventDefault(),Yn.close("subontology-connectivity");const n=new $e;await n.initialized;const r=[t[0].value,t[1].value];Ie.debug(`Showing connectivity between the subontologies ${r[0]} and ${r[1]}.`);const i=r.map(s=>n.state.cy.nodes(`[source="${s}"]`)),o=i[0].edgesWith(i[1]).connectedNodes();bt.setVisible(n.state.cy.elements(),!1),bt.setVisible(o,!0),bt.setVisible(o.edgesWith(o),!0),o.layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:60,concentric:function(s){return i[0].contains(s)?2:1}}).run()},t.addEventListener("submit",t.listener))}let Ks=null;class Xs{constructor(){Ct(this,"separateSubsBox");Ct(this,"dayModeBox");Ct(this,"coloredEdgesBox");Ct(this,"showPropertyBox");if(Ks)throw Error("Menu already exists.");document.body.addEventListener("click",Xs.closeListener),this.showCloseMatches=this.showCloseMatches.bind(this),this.addMenu(),Ks=this}separateSubs(){return this.separateSubsBox.checked}coloredEdges(){return this.coloredEdgesBox.checked}showProperty(){return this.showPropertyBox.checked}setLanguage(e){if(qg(e)){Qc();for(const n of $e.views()){const r=n.state.graph.cy.elements();n.state.graph.cy.remove(r),r.restore(),n.recreateContextMenus()}}}static about(){var r,i,a,o;const e=(i=(r=$e==null?void 0:$e.activeState())==null?void 0:r.graph)==null?void 0:i.cy,n=`
${(a=e==null?void 0:e.nodes())==null?void 0:a.size()} nodes, ${(o=e==null?void 0:e.edges())==null?void 0:o.size()} edges loaded.`;window.alert(hh()+n)}showCloseMatches(){Ie.debug("show close matches start");const n=$e.activeState().graph.cy.elements(".unfiltered").not(".hidden").connectedEdges(".unfiltered").filter('[pl="closeMatch"]');bt.setVisible(n,!0),bt.setVisible(n.connectedNodes(".unfiltered"),!0),Ie.debug("show close matches end")}menuData(){return[{i18n:"file",id:"file",entries:[{action:async()=>{await yh($e.activeState().graph.cy,[]),io(async()=>{var e,n;return await DC($e.activeState().graph.cy,Ms,(n=(e=Ue.ontology)==null?void 0:e.snik)==null?void 0:n.defaultSubOntologies,this.separateSubs())})},i18n:"load-sparql"},{action:()=>JC(this.optionsToJSON()),i18n:"save-session"},{action:()=>QC($e.activeState().graph),i18n:"save-snik-graph"},{action:()=>eS($e.activeState()),i18n:"save-view"},{action:()=>tS($e.activeState()),i18n:"save-layout"},{action:()=>{io(()=>{var e,n;return Vn($e.activeState().cy,Ms,(n=(e=Ue.ontology)==null?void 0:e.snik)==null?void 0:n.defaultSubOntologies,this.separateSubs(),!0)})},i18n:"recalculate-layout-replace"},{action:()=>hs($e.activeState().graph,this.dayModeBox.checked,!1,!1),i18n:"save-image-png-visible-region"},{action:()=>hs($e.activeState().graph,this.dayModeBox.checked,!0,!1),i18n:"save-image-png-complete-partial-graph"},{action:()=>hs($e.activeState().graph,this.dayModeBox.checked,!1,!0),i18n:"save-image-png-visible-region-high-res"},{action:()=>hs($e.activeState().graph,this.dayModeBox.checked,!0,!0),i18n:"save-image-png-complete-partial-graph-high-res"},{action:()=>Bd($e.activeState().graph,this.dayModeBox.checked,!1),i18n:"save-image-svg-visible-region"},{action:()=>Bd($e.activeState().graph,this.dayModeBox.checked,!0),i18n:"save-image-svg-complete-partial-graph"},{action:()=>new $e,i18n:"new-view"}]},{i18n:"filter",id:"filter",entries:[]},{i18n:"options",id:"options",entries:[]},{i18n:"layout",entries:[{action:this.showCloseMatches,i18n:"show-close-matches"},{action:()=>{var e,n;Vn($e.activeState().graph.cy,Ms,(n=(e=Ue.ontology)==null?void 0:e.snik)==null?void 0:n.defaultSubOntologies,this.separateSubs()&&!$e.activeState().graph.starMode,!0)},i18n:"recalculate-layout",hotkey:"ctrl+alt+l"},{action:()=>{var e,n;Vn($e.activeState().graph.cy,xc,(n=(e=Ue.ontology)==null?void 0:e.snik)==null?void 0:n.defaultSubOntologies,this.separateSubs()&&!$e.activeState().graph.starMode,!1)},i18n:"tight-layout",hotkey:"ctrl+alt+t"},{action:()=>{var e,n;Vn($e.activeState().graph.cy,vp,(n=(e=Ue.ontology)==null?void 0:e.snik)==null?void 0:n.defaultSubOntologies,this.separateSubs()&&!$e.activeState().graph.starMode,!1)},i18n:"compound-layout",hotkey:"ctrl+alt+c"},{action:()=>$e.activeState().graph.moveAllMatches(0),i18n:"move-match-on-top"},{action:()=>$e.activeState().graph.moveAllMatches(100),i18n:"move-match-nearby"},{action:()=>{Pd($e.activeState().graph,"bb")},i18n:"bb-chapter-search"},{action:()=>{Pd($e.activeState().graph,"ob")},i18n:"ob-chapter-search"},{action:GC,i18n:"subontology-connectivity"},{action:$e.mainView.state.graph.resetStyle,i18n:"reset-view",hotkey:"ctrl+alt+r"},{action:()=>{$e.activeView().setTitle(prompt("Rename: "+$e.activeView().config.title)||$e.activeView().config.title),$e.activeState().title=$e.activeView().config.title},i18n:"change-title"}]},{i18n:"services",entries:[{action:Ue.ontology.links.sparqlEndpoint,i18n:"sparql-endpoint"},{action:Ue.ontology.links.rdfBrowser,i18n:"rdf-browser"}]},{i18n:"language",entries:[{action:()=>this.setLanguage(Ye.LABEL_ENGLISH),i18n:"english"},{action:()=>this.setLanguage(Ye.LABEL_GERMAN),i18n:"german"},{action:()=>this.setLanguage(Ye.LABEL_PERSIAN),i18n:"persian"}]},{i18n:"help",entries:[{action:"html/manual.html",i18n:"manual"},{action:"html/layoutHelp.html",i18n:"layout-help"},{action:"doc/index.html",i18n:"developer-doc"},{action:Ue.ontology.links.youtube,i18n:"youtube-channel"},{action:"html/troubleshooting.html",i18n:"troubleshooting"},{action:"html/contribute.html",i18n:"contribute"},{action:Ue.ontology.links.homepage,i18n:"project-homepage"},{action:Ue.ontology.links.metamodel,i18n:"meta-model"},{action:Xs.about,i18n:"about"},{action:Ue.ontology.links.feedbackOntology,i18n:"feedback-ontology"},{action:Ue.ontology.links.featureRequest,i18n:"feature-request"},{action:nm,i18n:"bug-report"}]}]}addOptions(e){const n=Pn("options-menu-content"),r=["separateSubs","cumulativeSearch","grid","combineMatchMode","dayMode","coloredEdges","showProperty"];this.optionBoxes={};for(const i of r){Ie.trace("Add option "+i);const a=document.createElement("a");e.push(a),n.appendChild(a),a.setAttribute("tabindex","-1"),a.classList.add("dropdown-entry");const o=document.createElement("input");this.optionBoxes[i]=o,a.appendChild(o),o.type="checkbox",o.autocomplete="off",this[i+"Box"]=o,o.id=i+"Box",a.addEventListener("keydown",vh(o)),a.appendChild(ph(o,ro(i),i))}this.separateSubsBox.addEventListener("change",()=>{Ie.debug("Set separate Subontologies to "+this.separateSubsBox.checked)}),this.dayModeBox.addEventListener("change",()=>{for(const i of $e.views())i.state.graph.applyStyle(this.dayModeBox.checked,this.coloredEdgesBox.checked,this.showPropertyBox.checked);Ie.debug("Set dayMode to "+this.dayModeBox.checked)}),this.showPropertyBox.addEventListener("change",()=>{for(const i of $e.views())i.state.graph.applyStyle(this.dayModeBox.checked,this.coloredEdgesBox.checked,this.showPropertyBox.checked);Ie.debug("Set showProperty to "+this.showPropertyBox.checked)}),this.gridBox.addEventListener("change",()=>{document.body.classList[this.gridBox.checked?"add":"remove"]("grid"),Ie.debug("set gridBox to "+this.gridBox.checked)}),Ue.activeOptions.includes("day")&&this.dayModeBox.click(),Ue.activeOptions.includes("showproperty")&&this.showPropertyBox.click(),this.cumulativeSearchBox.addEventListener("change",()=>{Ie.debug("Set cumulative search to "+this.cumulativeSearchBox.checked)}),this.combineMatchModeBox.addEventListener("change",()=>{Ie.debug("Set combine match mode to "+this.combineMatchModeBox.checked),setTimeout(()=>{this.combineMatches()},10)}),this.coloredEdgesBox.addEventListener("change",()=>{const i=this.coloredEdgesBox.checked;Ie.debug("Set coloredEdges to "+i),Ue.edgesColorized=i;for(const a of $e.views())a.state.graph.applyStyle(this.dayModeBox.checked,this.coloredEdgesBox.checked,this.showPropertyBox.checked)}),Ue.activeOptions.includes("edgecolor")&&setTimeout(()=>this.coloredEdgesBox.click(),100)}addMenu(){console.groupCollapsed("Add menu");const e=document.createElement("ul");Pn("top").prepend(e),e.classList.add("dropdown-bar"),e.setAttribute("tabindex","0");const n=this.menuData(),r=[],i=[];for(let a=0;a<n.length;a++){const o=n[a],s=document.createElement("li");s.setAttribute("tabindex","-1"),e.appendChild(s);const l=document.createElement("span");r.push(l),s.appendChild(l),l.classList.add("dropdown-menu"),l.setAttribute("data-i18n",o.i18n),l.setAttribute("tabindex","-1");const u=document.createElement("div");s.appendChild(u),u.classList.add("dropdown-content"),u.setAttribute("tabindex","-1"),o.id&&(u.id=o.id+"-menu-content"),l.addEventListener("click",()=>{for(const f of document.getElementsByClassName("dropdown-content"))u!==f&&f.classList.remove("show");u.classList.toggle("show")});const c=[];i.push(c);for(const f of o.entries){if(f===null)continue;const v=document.createElement("a");switch(c.push(v),v.classList.add("dropdown-entry"),v.setAttribute("data-i18n",f.i18n),f.hotkey&&v.setAttribute("hotkey",f.hotkey),v.setAttribute("tabindex","-1"),u.appendChild(v),v.innerHTML=ro(f.i18n),typeof f.action){case"string":{v.href=f.action,v.target="_blank";break}case"function":{v.addEventListener("click",f.action);const g=f.hotkey;g&&(Cr(g,f.action),v.innerHTML=v.innerHTML+` (${g.toUpperCase()})`);break}default:Ie.error("unknown menu entry action type: "+typeof f.action)}}l.addEventListener("keydown",f=>{switch(f.key){case"ArrowLeft":r[(a-1+r.length)%r.length].focus(),r[(a-1+r.length)%r.length].click();break;case"ArrowRight":r[(a+1)%r.length].focus(),r[(a+1)%r.length].click();break;case"ArrowDown":c[0].focus();break}})}oS($e.activeState().graph,Pn("file-menu-content"),i[0]),Ie.debug("fileLoadEntries added"),xo.addFilterEntries(Pn("filter-menu-content"),i[1]),Ie.debug("filter entries added"),this.addOptions(i[2]);for(let a=0;a<i.length;a++){const o=i[a];for(let s=0;s<o.length;s++)o[s].addEventListener("keydown",l=>{switch(l.key){case"ArrowLeft":r[(a-1+r.length)%r.length].focus(),r[(a-1+r.length)%r.length].click();break;case"ArrowRight":r[(a+1)%r.length].focus(),r[(a+1)%r.length].click();break;case"ArrowUp":o[(s-1+o.length)%o.length].focus();break;case"ArrowDown":o[(s+1)%o.length].focus();break}})}Ie.debug("Menu added"),console.groupEnd(),Qc()}static closeListener(e){if(e&&e.target&&e.target.matches&&!e.target.matches(".dropdown-entry")&&!e.target.matches(".dropdown-menu")&&!e.target.matches("input.filterbox")){const n=document.getElementsByClassName("dropdown-content");Array.from(n).forEach(r=>r.classList.remove("show"))}}optionsToJSON(){const e=["separateSubs","cumulativeSearch","grid","combineMatchMode","dayMode","coloredEdges"],n={};for(const r of e)n[r]=this.optionBoxes[r].checked;return n}optionsFromJSON(e){const n=this.optionsToJSON();for(const[r,i]of Object.entries(e))n[r]!==i&&this.optionBoxes[r].click()}applyOptions(){this.combineMatchModeBox.checked&&this.combineMatches()}combineMatches(){$e.views().map(e=>e.state.graph).forEach(e=>e.combineMatch(this.combineMatchModeBox.checked))}}const jC={version:Ur};function Ep(){const t={filters:xo.toJSON(),options:Ks.optionsToJSON()};return Object.assign(t,jC),t}function KC(t){xo.fromJSON(t.filters),Ks.optionsFromJSON(t.options)}var lu={exports:{}},Od;function XC(){return Od||(Od=1,function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:s})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var l in a)i.d(s,l,(function(u){return a[u]}).bind(null,l));return s},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=0)}([function(n,r,i){var a=i(1),o=function(s){s&&s("core","svg",a.svg)};typeof cytoscape<"u"&&o(cytoscape),n.exports=o},function(n,r,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},o=i(2),s={},l={};l.number=function(u){return u!=null&&(u===void 0?"undefined":a(u))===a(1)&&!isNaN(u)},s.bufferCanvasImage=function(u,c){var f=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach(function(D){D._private.rscratch.pathCacheKey=null,D._private.rscratch.pathCache=null});var v=c.renderer(),g=c.mutableElements().boundingBox(),h=v.findContainerClientCoords(),m=u.full?Math.ceil(g.w):h[2],w=u.full?Math.ceil(g.h):h[3],b=l.number(u.maxWidth)||l.number(u.maxHeight),E=v.getPixelRatio(),C=1;if(u.scale!==void 0)m*=u.scale,w*=u.scale,C=u.scale;else if(b){var x=1/0,k=1/0;l.number(u.maxWidth)&&(x=C*u.maxWidth/m),l.number(u.maxHeight)&&(k=C*u.maxHeight/w),m*=C=Math.min(x,k),w*=C}b||(m*=E,w*=E,C*=E);var A=null,p=A=new o(m,w);if(m>0&&w>0){A.clearRect(0,0,m,w),u.bg&&(A.globalCompositeOperation="destination-over",A.fillStyle=u.bg,A.fillRect(0,0,m,w)),A.globalCompositeOperation="source-over";var P=v.getCachedZSortedEles();if(u.full)A.translate(-g.x1*C,-g.y1*C),A.scale(C,C),v.drawElements(A,P),A.scale(1/C,1/C),A.translate(g.x1*C,g.y1*C);else{var _=c.pan(),O={x:_.x*C,y:_.y*C};C*=c.zoom(),A.translate(O.x,O.y),A.scale(C,C),v.drawElements(A,P),A.scale(1/C,1/C),A.translate(-O.x,-O.y)}}return c.renderer().usePaths=f,p},s.svg=function(u){return s.bufferCanvasImage(u||{},this).getSerializedSvg()},n.exports=s},function(n,r,i){(function(){var a,o,s,l,u;function c(h,m){var w,b=Object.keys(m);for(w=0;w<b.length;w++)h=h.replace(new RegExp("\\{"+b[w]+"\\}","gi"),m[b[w]]);return h}function f(h){var m,w,b;if(!h)throw new Error("cannot create a random attribute name for an undefined object");m="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",w="";do for(w="",b=0;b<12;b++)w+=m[Math.floor(Math.random()*m.length)];while(h[w]);return w}function v(h){var m={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return m[h]||m.alphabetic}u=function(h,m){var w,b,E,C={};for(h=h.split(","),m=m||10,w=0;w<h.length;w+=2)b="&"+h[w+1]+";",E=parseInt(h[w],m),C[b]="&#"+E+";";return C["\\xa0"]="&#160;",C}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(h,m){this.__root=h,this.__ctx=m}).prototype.addColorStop=function(h,m){var w,b=this.__ctx.__createElement("stop");b.setAttribute("offset",h),m.indexOf("rgba")!==-1?(w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(m),b.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:w[1],g:w[2],b:w[3]})),b.setAttribute("stop-opacity",w[4])):b.setAttribute("stop-color",m),this.__root.appendChild(b)},l=function(h,m){this.__root=h,this.__ctx=m},(o=function(h){var m,w={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((m=w).width=arguments[0],m.height=arguments[1]):m=h||w,!(this instanceof o))return new o(m);this.width=m.width||w.width,this.height=m.height||w.height,this.enableMirroring=m.enableMirroring!==void 0?m.enableMirroring:w.enableMirroring,this.canvas=this,this.__document=m.document||document,m.ctx?this.__ctx=m.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(h,m,w){m===void 0&&(m={});var b,E,C=this.__document.createElementNS("http://www.w3.org/2000/svg",h),x=Object.keys(m);for(w&&(C.setAttribute("fill","none"),C.setAttribute("stroke","none")),b=0;b<x.length;b++)E=x[b],C.setAttribute(E,m[E]);return C},o.prototype.__setDefaultStyles=function(){var h,m,w=Object.keys(a);for(h=0;h<w.length;h++)this[m=w[h]]=a[m].canvas},o.prototype.__applyStyleState=function(h){if(h){var m,w,b=Object.keys(h);for(m=0;m<b.length;m++)this[w=b[m]]=h[w]}},o.prototype.__getStyleState=function(){var h,m,w={},b=Object.keys(a);for(h=0;h<b.length;h++)w[m=b[h]]=this[m];return w},o.prototype.__applyStyleToCurrentElement=function(h){var m=this.__currentElement;this.__currentElementsToStyle;var w,b,E,C,x,k=Object.keys(a);for(w=0;w<k.length;w++)if(b=a[k[w]],E=this[k[w]],b.apply){if(E instanceof l){if(E.__ctx)for(;E.__ctx.__defs.childNodes.length;)C=E.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[C]=C,this.__defs.appendChild(E.__ctx.__defs.childNodes[0]);m.setAttribute(b.apply,c("url(#{id})",{id:E.__root.getAttribute("id")}))}else if(E instanceof s)m.setAttribute(b.apply,c("url(#{id})",{id:E.__root.getAttribute("id")}));else if(b.apply.indexOf(h)!==-1&&b.svg!==E)if(b.svgAttr!=="stroke"&&b.svgAttr!=="fill"||E.indexOf("rgba")===-1){var A=b.svgAttr;if(k[w]==="globalAlpha"&&(A=h+"-"+b.svgAttr,m.getAttribute(A)))continue;m.setAttribute(A,E)}else{x=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(E),m.setAttribute(b.svgAttr,c("rgb({r},{g},{b})",{r:x[1],g:x[2],b:x[3]}));var p=x[4],P=this.globalAlpha;P!=null&&(p*=P),m.setAttribute(b.svgAttr+"-opacity",p)}}},o.prototype.__closestGroupOrSvg=function(h){return(h=h||this.__currentElement).nodeName==="g"||h.nodeName==="svg"?h:this.__closestGroupOrSvg(h.parentNode)},o.prototype.getSerializedSvg=function(h){var m,w,b,E,C,x=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(x)&&(x=x.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),h)for(m=Object.keys(u),w=0;w<m.length;w++)b=m[w],E=u[b],(C=new RegExp(b,"gi")).test(x)&&(x=x.replace(C,E));return x},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var h=this.__createElement("g"),m=this.__closestGroupOrSvg();this.__groupStack.push(m),m.appendChild(h),this.__currentElement=h,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var h=this.__stack.pop();this.__applyStyleState(h)},o.prototype.__addTransform=function(h){var m=this.__closestGroupOrSvg();if(m.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:m,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var w=this.__createElement("g");m.appendChild(w),this.__currentElement=w}var b=this.__currentElement.getAttribute("transform");b?b+=" ":b="",b+=h,this.__currentElement.setAttribute("transform",b)},o.prototype.scale=function(h,m){m===void 0&&(m=h),this.__addTransform(c("scale({x},{y})",{x:h,y:m}))},o.prototype.rotate=function(h){var m=180*h/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:m,cx:0,cy:0}))},o.prototype.translate=function(h,m){this.__addTransform(c("translate({x},{y})",{x:h,y:m}))},o.prototype.transform=function(h,m,w,b,E,C){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:h,b:m,c:w,d:b,e:E,f:C}))},o.prototype.beginPath=function(){var h;this.__currentDefaultPath="",this.__currentPosition={},h=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(h),this.__currentElement=h},o.prototype.__applyCurrentDefaultPath=function(){var h=this.__currentElement;h.nodeName==="path"?h.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",h.nodeName)},o.prototype.__addPathCommand=function(h){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=h},o.prototype.moveTo=function(h,m){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:h,y:m},this.__addPathCommand(c("M {x} {y}",{x:h,y:m}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(h,m){this.__currentPosition={x:h,y:m},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:h,y:m})):this.__addPathCommand(c("M {x} {y}",{x:h,y:m}))},o.prototype.bezierCurveTo=function(h,m,w,b,E,C){this.__currentPosition={x:E,y:C},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:h,cp1y:m,cp2x:w,cp2y:b,x:E,y:C}))},o.prototype.quadraticCurveTo=function(h,m,w,b){this.__currentPosition={x:w,y:b},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:h,cpy:m,x:w,y:b}))};var g=function(h){var m=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return[h[0]/m,h[1]/m]};o.prototype.arcTo=function(h,m,w,b,E){var C=this.__currentPosition&&this.__currentPosition.x,x=this.__currentPosition&&this.__currentPosition.y;if(C!==void 0&&x!==void 0){if(E<0)throw new Error("IndexSizeError: The radius provided ("+E+") is negative.");if(C===h&&x===m||h===w&&m===b||E===0)this.lineTo(h,m);else{var k=g([C-h,x-m]),A=g([w-h,b-m]);if(k[0]*A[1]!=k[1]*A[0]){var p=k[0]*A[0]+k[1]*A[1],P=Math.acos(Math.abs(p)),_=g([k[0]+A[0],k[1]+A[1]]),O=E/Math.sin(P/2),D=h+O*_[0],L=m+O*_[1],N=[-k[1],k[0]],R=[A[1],-A[0]],z=function(X){var re=X[0];return X[1]>=0?Math.acos(re):-Math.acos(re)},H=z(N),W=z(R);this.lineTo(D+N[0]*E,L+N[1]*E),this.arc(D,L,E,H,W)}else this.lineTo(h,m)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(h,m,w,b){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(h,m),this.lineTo(h+w,m),this.lineTo(h+w,m+b),this.lineTo(h,m+b),this.lineTo(h,m),this.closePath()},o.prototype.fillRect=function(h,m,w,b){var E;E=this.__createElement("rect",{x:h,y:m,width:w,height:b},!0),this.__closestGroupOrSvg().appendChild(E),this.__currentElement=E,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(h,m,w,b){var E;E=this.__createElement("rect",{x:h,y:m,width:w,height:b},!0),this.__closestGroupOrSvg().appendChild(E),this.__currentElement=E,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var h=this.__closestGroupOrSvg().getAttribute("transform"),m=this.__root.childNodes[1],w=m.childNodes,b=w.length-1;b>=0;b--)w[b]&&m.removeChild(w[b]);this.__currentElement=m,this.__groupStack=[],h&&this.__addTransform(h)},o.prototype.clearRect=function(h,m,w,b){if(h!==0||m!==0||w!==this.width||b!==this.height){var E,C=this.__closestGroupOrSvg();E=this.__createElement("rect",{x:h,y:m,width:w,height:b,fill:"#FFFFFF"},!0),C.appendChild(E)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(h,m,w,b){var E=this.__createElement("linearGradient",{id:f(this.__ids),x1:h+"px",x2:w+"px",y1:m+"px",y2:b+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(E),new s(E,this)},o.prototype.createRadialGradient=function(h,m,w,b,E,C){var x=this.__createElement("radialGradient",{id:f(this.__ids),cx:b+"px",cy:E+"px",r:C+"px",fx:h+"px",fy:m+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(x),new s(x,this)},o.prototype.__parseFont=function(){var h=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),m={style:h[1]||"normal",size:h[4]||"10px",family:h[6]||"sans-serif",weight:h[3]||"normal",decoration:h[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(m.decoration="underline"),this.__fontHref&&(m.href=this.__fontHref),m},o.prototype.__wrapTextLink=function(h,m){if(h.href){var w=this.__createElement("a");return w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.href),w.appendChild(m),w}return m},o.prototype.__applyText=function(h,m,w,b){var E,C,x=this.__parseFont(),k=this.__closestGroupOrSvg(),A=this.__createElement("text",{"font-family":x.family,"font-size":x.size,"font-style":x.style,"font-weight":x.weight,"text-decoration":x.decoration,x:m,y:w,"text-anchor":(E=this.textAlign,C={left:"start",right:"end",center:"middle",start:"start",end:"end"},C[E]||C.start),"dominant-baseline":v(this.textBaseline)},!0);A.appendChild(this.__document.createTextNode(h)),this.__currentElement=A,this.__applyStyleToCurrentElement(b),k.appendChild(this.__wrapTextLink(x,A))},o.prototype.fillText=function(h,m,w){this.__applyText(h,m,w,"fill")},o.prototype.strokeText=function(h,m,w){this.__applyText(h,m,w,"stroke")},o.prototype.measureText=function(h){return this.__ctx.font=this.font,this.__ctx.measureText(h)},o.prototype.arc=function(h,m,w,b,E,C){if(b!==E){(b%=2*Math.PI)===(E%=2*Math.PI)&&(E=(E+2*Math.PI-.001*(C?-1:1))%(2*Math.PI));var x=h+w*Math.cos(E),k=m+w*Math.sin(E),A=h+w*Math.cos(b),p=m+w*Math.sin(b),P=C?0:1,_=0,O=E-b;O<0&&(O+=2*Math.PI),_=C?O>Math.PI?0:1:O>Math.PI?1:0,this.lineTo(A,p),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:w,ry:w,xAxisRotation:0,largeArcFlag:_,sweepFlag:P,endX:x,endY:k})),this.__currentPosition={x,y:k}}},o.prototype.clip=function(){var h=this.__closestGroupOrSvg(),m=this.__createElement("clipPath"),w=f(this.__ids),b=this.__createElement("g");this.__applyCurrentDefaultPath(),h.removeChild(this.__currentElement),m.setAttribute("id",w),m.appendChild(this.__currentElement),this.__defs.appendChild(m),h.setAttribute("clip-path",c("url(#{id})",{id:w})),h.appendChild(b),this.__currentElement=b},o.prototype.drawImage=function(){var h,m,w,b,E,C,x,k,A,p,P,_,O,D=Array.prototype.slice.call(arguments),L=D[0],N=0,R=0;if(D.length===3)h=D[1],m=D[2],w=E=L.width,b=C=L.height;else if(D.length===5)h=D[1],m=D[2],w=D[3],b=D[4],E=L.width,C=L.height;else{if(D.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);N=D[1],R=D[2],E=D[3],C=D[4],h=D[5],m=D[6],w=D[7],b=D[8]}x=this.__closestGroupOrSvg(),this.__currentElement;var z="translate("+h+", "+m+")";if(L instanceof o){if((k=L.getSvg().cloneNode(!0)).childNodes&&k.childNodes.length>1){for(A=k.childNodes[0];A.childNodes.length;)O=A.childNodes[0].getAttribute("id"),this.__ids[O]=O,this.__defs.appendChild(A.childNodes[0]);if(p=k.childNodes[1]){var H,W=p.getAttribute("transform");H=W?W+" "+z:z,p.setAttribute("transform",H),x.appendChild(p)}}}else L.nodeName!=="CANVAS"&&L.nodeName!=="IMG"||((P=this.__createElement("image")).setAttribute("width",w),P.setAttribute("height",b),P.setAttribute("opacity",this.globalAlpha),P.setAttribute("preserveAspectRatio","none"),(_=this.__document.createElement("canvas")).width=w,_.height=b,_.getContext("2d").drawImage(L,N,R,E,C,0,0,w,b),L=_,P.setAttribute("transform",z),P.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",L.nodeName==="CANVAS"?L.toDataURL():L.getAttribute("src")),x.appendChild(P))},o.prototype.createPattern=function(h,m){var w,b=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),E=f(this.__ids);return b.setAttribute("id",E),b.setAttribute("width",h.width),b.setAttribute("height",h.height),h.nodeName==="CANVAS"||h.nodeName==="IMG"?((w=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",h.width),w.setAttribute("height",h.height),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.nodeName==="CANVAS"?h.toDataURL():h.getAttribute("src")),b.appendChild(w),this.__defs.appendChild(b)):h instanceof o&&(b.appendChild(h.__root.childNodes[1]),this.__defs.appendChild(b)),new l(b,this)},o.prototype.setLineDash=function(h){h&&h.length>0?this.lineDash=h.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof n.exports=="object"&&(n.exports=o)})()}])})}(lu)),lu.exports}var YC=XC();const ZC=Ii(YC);vr.use(ZC);var Cc=(t=>(t[t.VIEW=0]="VIEW",t[t.LAYOUT=1]="LAYOUT",t))(Cc||{});const Wr=document.createElement("a");document.body.appendChild(Wr);Wr.style.display="none";function wl(t,e){const n=JSON.stringify(t),r=new Blob([n],{type:"application/json"}),i=window.URL.createObjectURL(r);Wr.href=i,Wr.download=e,Wr.click(),window.URL.revokeObjectURL(i),Ie.debug("JSON File saved: "+e)}function Cp(t,e){Wr.href=t,Wr.download=e,Wr.click(),window.URL.revokeObjectURL(t),Ie.debug("File saved: "+e)}function QC(t){const e=t.cy.json();delete e.style,wl(e,"snik.json")}function JC(t){const e={title:$e.mainView.state.title,graph:$e.mainView.state.cy.json(),options:t};delete e.graph.style;const n={tabs:[],state:Ep(),mainGraph:e};for(const r of $e.partViews){const i={title:r.state.title,graph:r.state.cy.json()};delete i.graph.style,n.tabs.push(i)}wl(n,"snik-session.json")}function eS(t){const e={version:Ur,title:t.title,type:0,graph:t.cy.json()};delete e.graph.style,wl(e,"snik-view.json")}function tS(t){const e=t.cy.nodes(":visible").map(r=>[r.data(Ye.ID),r.position()]),n={version:Ur,title:t.title,type:1,graph:e};wl(n,"snik-layout.json")}function hs(t,e,n,r){const i={bg:e?"white":"black",full:n,maxWidth:void 0,maxHeight:void 0};r?(i.maxWidth=Ue.download.image.max.width,i.maxHeight=Ue.download.image.max.height):n&&(i.maxWidth=Ue.download.image.standard.width,i.maxHeight=Ue.download.image.standard.height);const a=t.cy.png(i);Cp(a,"snik.png")}function Bd(t,e,n=!0){const r={full:n,scale:1,bg:e?"white":"black"},i=t.cy.svg(r),a=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),o=window.URL.createObjectURL(a);Cp(o,"snik.svg")}function xl(t,e){const n=t.target.files[0],r=new FileReader;r.onload=()=>e(JSON.parse(r.result)),r.readAsText(n)}function Ys(t,e){const n=t.cy;n.elements().remove(),n.json(e),n.elements().addClass("unfiltered");const r=1*t.cy.elements(":visible").size()/t.cy.elements().size(),i=r<.8;Ie.debug("Load Graph from File: Visible fraction: "+r+" set star mode to "+i),t.cy.nodes(":child").size()>0&&(document.getElementById("combineMatchModeBox").checked=!0),t.starMode=i;const a=n.nodes(":visible");n.center(a),n.fit(a),n.elements().removeClass("highlighted"),n.elements().removeClass("source")}const nS=t=>e=>{xl(e,n=>{Ys(t,n)})};async function rS(t){confirm("This will override the current session. Continue?")&&xl(t,async e=>{if(e.state.version!==Ur&&!confirm(`Your file was saved in version ${e.state.version}, but SNIK Graph has version ${Ur}, so it may not work properly. Continue anyway?`))return;$e.reset();const n=new $e(!1),r=[n.initialized];Ys(n.state.graph,e.mainGraph.graph),$e.activeView().setTitle(e.mainGraph.title);for(let i=0;i<e.tabs.length;i++){const a=new $e(!1);r.push(a.initialized),Ys(a.state.graph,e.tabs[i].graph),$e.activeView().setTitle(e.tabs[i].title)}await Promise.all(r),KC(e.state)})}function Sp(t,e){let n=!0;return e.version!==Ur&&!confirm(`Your file was saved in version ${e.version}, but SNIK Graph has version ${Ur}, so it may not work properly. Continue anyway?`)?n=!1:e.type===void 0?(alert("Unknown file format, aborting."),n=!1):e.type!==t&&(alert(`Your file was saved as ${e.type}, but you are trying to load a ${t}, aborting.`),n=!1),n}function iS(t){xl(t,e=>{if(!Sp(Cc.VIEW,e))return;const n=new $e(!1);Ys(n.state.graph,e.graph),$e.activeView().setTitle(e.title)})}function Tp(t,e){if(!Sp(Cc.LAYOUT,t))return;const n=e.cy;n.batch(()=>{const r=n.collection();r.merge(t.graph.flatMap(o=>{const s={x:o[1].x,y:o[1].y},l=n.nodes("node[id='"+o[0]+"']");if(l.size()===0)return Ie.warn(`Node with id ${o[0]} was not found.`),null;const u=l.first();return u.unlock(),u.position(s),u}).filter(o=>o));const i=n.nodes().unmerge(r);i.forEach((o,s)=>{o.position({x:(1+s%20)*100,y:s*2})});const a=r.union(r.edges());bt.setVisible(a,!0),bt.setVisible(i,!1),n.elements().unselect(),n.center(r),n.fit(r),console.log("Loaded %d visible nodes into the graph. Hid %d nodes.",r.size(),i.size())})}function aS(t){console.groupCollapsed("Loading JSON Layout file into View."),xl(t,e=>{const n=new $e(!0,e.title);Tp(e,n.state.graph)}),console.info("Finished loading layout from file."),console.groupEnd()}function uu(t,e,n,r,i){const a=document.createElement("a");i.push(a),a.classList.add("dropdown-entry"),a.setAttribute("tabindex","-1"),t.appendChild(a);const o=document.createElement("input");o.type="file",o.style.display="none",a.appendChild(o);const s=document.createElement("span");s.innerText=n,s.setAttribute("data-i18n",e),a.appendChild(s),a.addEventListener("click",()=>o.click()),o.addEventListener("change",r)}function oS(t,e,n){uu(e,"load-view","Load Partial Graph into Session",iS,n),uu(e,"load-layout","Load Layout of Partial Graph into Session",aS,n),uu(e,"load-session","Load Session",rS,n)}function Ar(t){return Array.isArray?Array.isArray(t):_p(t)==="[object Array]"}function sS(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function lS(t){return t==null?"":sS(t)}function fr(t){return typeof t=="string"}function kp(t){return typeof t=="number"}function uS(t){return t===!0||t===!1||cS(t)&&_p(t)=="[object Boolean]"}function Ap(t){return typeof t=="object"}function cS(t){return Ap(t)&&t!==null}function Mn(t){return t!=null}function cu(t){return!t.trim().length}function _p(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const fS="Incorrect 'index' type",dS=t=>`Invalid value for key ${t}`,hS=t=>`Pattern length exceeds max of ${t}.`,vS=t=>`Missing ${t} property in key`,pS=t=>`Property 'weight' in key '${t}' must be a positive integer`,Rd=Object.prototype.hasOwnProperty;class gS{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=Ip(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ip(t){let e=null,n=null,r=null,i=1,a=null;if(fr(t)||Ar(t))r=t,e=Nd(t),n=Fu(t);else{if(!Rd.call(t,"name"))throw new Error(vS("name"));const o=t.name;if(r=o,Rd.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(pS(o));e=Nd(o),n=Fu(o),a=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:a}}function Nd(t){return Ar(t)?t:t.split(".")}function Fu(t){return Ar(t)?t.join("."):t}function mS(t,e){let n=[],r=!1;const i=(a,o,s)=>{if(Mn(a))if(!o[s])n.push(a);else{let l=o[s];const u=a[l];if(!Mn(u))return;if(s===o.length-1&&(fr(u)||kp(u)||uS(u)))n.push(lS(u));else if(Ar(u)){r=!0;for(let c=0,f=u.length;c<f;c+=1)i(u[c],o,s+1)}else o.length&&i(u,o,s+1)}};return i(t,fr(e)?e.split("."):e,0),r?n:n[0]}const yS={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},bS={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},wS={location:0,threshold:.6,distance:100},xS={useExtendedSearch:!1,getFn:mS,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var it={...bS,...yS,...wS,...xS};const ES=/[^ ]+/g;function CS(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const a=i.match(ES).length;if(n.has(a))return n.get(a);const o=1/Math.pow(a,.5*t),s=parseFloat(Math.round(o*r)/r);return n.set(a,s),s},clear(){n.clear()}}}class Sc{constructor({getFn:e=it.getFn,fieldNormWeight:n=it.fieldNormWeight}={}){this.norm=CS(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,fr(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();fr(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Mn(e)||cu(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,a)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Mn(o)){if(Ar(o)){let s=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(Mn(c))if(fr(c)&&!cu(c)){let f={v:c,i:u,n:this.norm.get(c)};s.push(f)}else Ar(c)&&c.forEach((f,v)=>{l.push({nestedArrIndex:v,value:f})})}r.$[a]=s}else if(fr(o)&&!cu(o)){let s={v:o,n:this.norm.get(o)};r.$[a]=s}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Mp(t,e,{getFn:n=it.getFn,fieldNormWeight:r=it.fieldNormWeight}={}){const i=new Sc({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(Ip)),i.setSources(e),i.create(),i}function SS(t,{getFn:e=it.getFn,fieldNormWeight:n=it.fieldNormWeight}={}){const{keys:r,records:i}=t,a=new Sc({getFn:e,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(i),a}function vs(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=it.distance,ignoreLocation:a=it.ignoreLocation}={}){const o=e/t.length;if(a)return o;const s=Math.abs(r-n);return i?o+s/i:s?1:o}function TS(t=[],e=it.minMatchCharLength){let n=[],r=-1,i=-1,a=0;for(let o=t.length;a<o;a+=1){let s=t[a];s&&r===-1?r=a:!s&&r!==-1&&(i=a-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[a-1]&&a-r>=e&&n.push([r,a-1]),n}const bi=32;function kS(t,e,n,{location:r=it.location,distance:i=it.distance,threshold:a=it.threshold,findAllMatches:o=it.findAllMatches,minMatchCharLength:s=it.minMatchCharLength,includeMatches:l=it.includeMatches,ignoreLocation:u=it.ignoreLocation}={}){if(e.length>bi)throw new Error(hS(bi));const c=e.length,f=t.length,v=Math.max(0,Math.min(r,f));let g=a,h=v;const m=s>1||l,w=m?Array(f):[];let b;for(;(b=t.indexOf(e,h))>-1;){let p=vs(e,{currentLocation:b,expectedLocation:v,distance:i,ignoreLocation:u});if(g=Math.min(p,g),h=b+c,m){let P=0;for(;P<c;)w[b+P]=1,P+=1}}h=-1;let E=[],C=1,x=c+f;const k=1<<c-1;for(let p=0;p<c;p+=1){let P=0,_=x;for(;P<_;)vs(e,{errors:p,currentLocation:v+_,expectedLocation:v,distance:i,ignoreLocation:u})<=g?P=_:x=_,_=Math.floor((x-P)/2+P);x=_;let O=Math.max(1,v-_+1),D=o?f:Math.min(v+_,f)+c,L=Array(D+2);L[D+1]=(1<<p)-1;for(let R=D;R>=O;R-=1){let z=R-1,H=n[t.charAt(z)];if(m&&(w[z]=+!!H),L[R]=(L[R+1]<<1|1)&H,p&&(L[R]|=(E[R+1]|E[R])<<1|1|E[R+1]),L[R]&k&&(C=vs(e,{errors:p,currentLocation:z,expectedLocation:v,distance:i,ignoreLocation:u}),C<=g)){if(g=C,h=z,h<=v)break;O=Math.max(1,2*v-h)}}if(vs(e,{errors:p+1,currentLocation:v,expectedLocation:v,distance:i,ignoreLocation:u})>g)break;E=L}const A={isMatch:h>=0,score:Math.max(.001,C)};if(m){const p=TS(w,s);p.length?l&&(A.indices=p):A.isMatch=!1}return A}function AS(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class Pp{constructor(e,{location:n=it.location,threshold:r=it.threshold,distance:i=it.distance,includeMatches:a=it.includeMatches,findAllMatches:o=it.findAllMatches,minMatchCharLength:s=it.minMatchCharLength,isCaseSensitive:l=it.isCaseSensitive,ignoreLocation:u=it.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:a,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(v,g)=>{this.chunks.push({pattern:v,alphabet:AS(v),startIndex:g})},f=this.pattern.length;if(f>bi){let v=0;const g=f%bi,h=f-g;for(;v<h;)c(this.pattern.substr(v,bi),v),v+=bi;if(g){const m=f-bi;c(this.pattern.substr(m),m)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let h={isMatch:!0,score:0};return r&&(h.indices=[[0,e.length-1]]),h}const{location:i,distance:a,threshold:o,findAllMatches:s,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],f=0,v=!1;this.chunks.forEach(({pattern:h,alphabet:m,startIndex:w})=>{const{isMatch:b,score:E,indices:C}=kS(e,h,m,{location:i+w,distance:a,threshold:o,findAllMatches:s,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});b&&(v=!0),f+=E,b&&C&&(c=[...c,...C])});let g={isMatch:v,score:v?f/this.chunks.length:1};return v&&r&&(g.indices=c),g}}class ni{constructor(e){this.pattern=e}static isMultiMatch(e){return Fd(e,this.multiRegex)}static isSingleMatch(e){return Fd(e,this.singleRegex)}search(){}}function Fd(t,e){const n=t.match(e);return n?n[1]:null}class _S extends ni{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class IS extends ni{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class MS extends ni{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class PS extends ni{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class DS extends ni{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class LS extends ni{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Dp extends ni{constructor(e,{location:n=it.location,threshold:r=it.threshold,distance:i=it.distance,includeMatches:a=it.includeMatches,findAllMatches:o=it.findAllMatches,minMatchCharLength:s=it.minMatchCharLength,isCaseSensitive:l=it.isCaseSensitive,ignoreLocation:u=it.ignoreLocation}={}){super(e),this._bitapSearch=new Pp(e,{location:n,threshold:r,distance:i,includeMatches:a,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Lp extends ni{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],a=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+a,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const zu=[_S,Lp,MS,PS,LS,DS,IS,Dp],zd=zu.length,OS=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,BS="|";function RS(t,e={}){return t.split(BS).map(n=>{let r=n.trim().split(OS).filter(a=>a&&!!a.trim()),i=[];for(let a=0,o=r.length;a<o;a+=1){const s=r[a];let l=!1,u=-1;for(;!l&&++u<zd;){const c=zu[u];let f=c.isMultiMatch(s);f&&(i.push(new c(f,e)),l=!0)}if(!l)for(u=-1;++u<zd;){const c=zu[u];let f=c.isSingleMatch(s);if(f){i.push(new c(f,e));break}}}return i})}const NS=new Set([Dp.type,Lp.type]);class FS{constructor(e,{isCaseSensitive:n=it.isCaseSensitive,includeMatches:r=it.includeMatches,minMatchCharLength:i=it.minMatchCharLength,ignoreLocation:a=it.ignoreLocation,findAllMatches:o=it.findAllMatches,location:s=it.location,threshold:l=it.threshold,distance:u=it.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:a,location:s,threshold:l,distance:u},this.pattern=n?e:e.toLowerCase(),this.query=RS(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let a=0,o=[],s=0;for(let l=0,u=n.length;l<u;l+=1){const c=n[l];o.length=0,a=0;for(let f=0,v=c.length;f<v;f+=1){const g=c[f],{isMatch:h,indices:m,score:w}=g.search(e);if(h){if(a+=1,s+=w,r){const b=g.constructor.type;NS.has(b)?o=[...o,...m]:o.push(m)}}else{s=0,a=0,o.length=0;break}}if(a){let f={isMatch:!0,score:s/a};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Hu=[];function zS(...t){Hu.push(...t)}function $u(t,e){for(let n=0,r=Hu.length;n<r;n+=1){let i=Hu[n];if(i.condition(t,e))return new i(t,e)}return new Pp(t,e)}const Zs={AND:"$and",OR:"$or"},Vu={PATH:"$path",PATTERN:"$val"},qu=t=>!!(t[Zs.AND]||t[Zs.OR]),HS=t=>!!t[Vu.PATH],$S=t=>!Ar(t)&&Ap(t)&&!qu(t),Hd=t=>({[Zs.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Op(t,e,{auto:n=!0}={}){const r=i=>{let a=Object.keys(i);const o=HS(i);if(!o&&a.length>1&&!qu(i))return r(Hd(i));if($S(i)){const l=o?i[Vu.PATH]:a[0],u=o?i[Vu.PATTERN]:i[l];if(!fr(u))throw new Error(dS(l));const c={keyId:Fu(l),pattern:u};return n&&(c.searcher=$u(u,e)),c}let s={children:[],operator:a[0]};return a.forEach(l=>{const u=i[l];Ar(u)&&u.forEach(c=>{s.children.push(r(c))})}),s};return qu(t)||(t=Hd(t)),r(t)}function VS(t,{ignoreFieldNorm:e=it.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:a,score:o})=>{const s=i?i.weight:null;r*=Math.pow(o===0&&s?Number.EPSILON:o,(s||1)*(e?1:a))}),n.score=r})}function qS(t,e){const n=t.matches;e.matches=[],Mn(n)&&n.forEach(r=>{if(!Mn(r.indices)||!r.indices.length)return;const{indices:i,value:a}=r;let o={indices:i,value:a};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function WS(t,e){e.score=t.score}function US(t,e,{includeMatches:n=it.includeMatches,includeScore:r=it.includeScore}={}){const i=[];return n&&i.push(qS),r&&i.push(WS),t.map(a=>{const{idx:o}=a,s={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(a,s)}),s})}class wa{constructor(e,n={},r){this.options={...it,...n},this.options.useExtendedSearch,this._keyStore=new gS(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Sc))throw new Error(fS);this._myIndex=n||Mp(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Mn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const a=this._docs[r];e(a,r)&&(this.removeAt(r),r-=1,i-=1,n.push(a))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:a,sortFn:o,ignoreFieldNorm:s}=this.options;let l=fr(e)?fr(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return VS(l,{ignoreFieldNorm:s}),a&&l.sort(o),kp(n)&&n>-1&&(l=l.slice(0,n)),US(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=$u(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:a,i:o,n:s})=>{if(!Mn(a))return;const{isMatch:l,score:u,indices:c}=n.searchIn(a);l&&i.push({item:a,idx:o,matches:[{score:u,value:a,norm:s,indices:c}]})}),i}_searchLogical(e){const n=Op(e,this.options),r=(s,l,u)=>{if(!s.children){const{keyId:f,searcher:v}=s,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:v});return g&&g.length?[{idx:u,item:l,matches:g}]:[]}const c=[];for(let f=0,v=s.children.length;f<v;f+=1){const g=s.children[f],h=r(g,l,u);if(h.length)c.push(...h);else if(s.operator===Zs.AND)return[]}return c},i=this._myIndex.records,a={},o=[];return i.forEach(({$:s,i:l})=>{if(Mn(s)){let u=r(n,s,l);u.length&&(a[l]||(a[l]={idx:l,item:s,matches:[]},o.push(a[l])),u.forEach(({matches:c})=>{a[l].matches.push(...c)}))}}),o}_searchObjectList(e){const n=$u(e,this.options),{keys:r,records:i}=this._myIndex,a=[];return i.forEach(({$:o,i:s})=>{if(!Mn(o))return;let l=[];r.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:n}))}),l.length&&a.push({idx:s,item:o,matches:l})}),a}_findMatches({key:e,value:n,searcher:r}){if(!Mn(n))return[];let i=[];if(Ar(n))n.forEach(({v:a,i:o,n:s})=>{if(!Mn(a))return;const{isMatch:l,score:u,indices:c}=r.searchIn(a);l&&i.push({score:u,key:e,value:a,idx:o,norm:s,indices:c})});else{const{v:a,n:o}=n,{isMatch:s,score:l,indices:u}=r.searchIn(a);s&&i.push({score:l,key:e,value:a,norm:o,indices:u})}return i}}wa.version="7.0.0";wa.createIndex=Mp;wa.parseIndex=SS;wa.config=it;wa.parseQuery=Op;zS(FS);let Wu=null;const GS={shouldSort:!0,tokenize:!0,threshold:.25,maxPatternLength:40,minMatchCharLength:3,matchAllTokens:!0,location:0,ignoreLocation:!0,distance:100,id:"uri",keys:[{name:"l",weight:.7},{name:"def",weight:.3}]};async function jS(){typeof window<"u"&&console.groupCollapsed("Create Fuse.js index");const t=ua("Create Fuse search index");Ie.debug("Create Fuse Search Index with searchCloseMatch = "+Ue.searchCloseMatch);const e=`select
  ?c as ?uri
  group_concat(distinct(str(?l));separator="|") as ?l
  group_concat(distinct(str(?def));separator="|") as ?def
  from <${Ue.ontology.sparql.graph}>
  {
    {
     {?c a owl:Class.} UNION {?c a [a owl:Class]}
     ?c rdfs:label ?l.
    }
    UNION {?c skos:altLabel ?l.}
    UNION {?c skos:closeMatch|^skos:closeMatch ?cm. ?cm rdfs:label|skos:altLabel ?l.}
    OPTIONAL {?c skos:definition ?def.}
  }`,n=await Ir(e),r=[];for(const i of n){const a=i.uri.value.replace(/.*\//,""),o={uri:i.uri.value,l:[...i.l.value.split("|"),a]};r.push(o),o.l=[...new Set(o.l)],i.def.value&&(o.def=i.def.value)}return Wu=new wa(r,GS),t.stop(r.length+" items"),typeof window<"u"&&console.groupEnd(),r}async function KS(t){return Wu||await jS(),Wu.search(t)}const fu=100;class XS{constructor(e){Ct(this,"resultNodes",[]);e.addEventListener("submit",n=>{n.preventDefault(),io(()=>this.showSearch(n.target.children.query.value))}),Ie.debug("search initialized")}showSearchResults(e,n){this.resultNodes=[];const r=Pn("tab:search-results");for(;r.rows.length>0;)r.deleteRow(0);if(n.length===0)return Pn("h2:search-results").innerHTML=`No Search Results for "${e}"`,!1;if(n.length===1)return Yn.close("search-results"),$e.activeState().graph.presentUri(n[0]),!0;n.length===fu?Pn("h2:search-results").innerHTML=`First ${fu} Search Results for "${e}"`:Pn("h2:search-results").innerHTML=`${n.length} Search Results for "${e}"`;const i={};n.forEach(s=>{const l=$e.activeState().cy.getElementById(s)[0];l?(i[s]=0,l.hasClass("hidden")&&!l.hasClass("filtered")?i[s]=1:l.hasClass("filtered")&&(i[s]=2)):i[s]=3});const a=new Set;n.sort((s,l)=>i[s]-i[l]),n.forEach(s=>{const l=r.insertRow(),u=l.insertCell(),c=document.createElement("input");c.type="checkbox",u.appendChild(c),u.addEventListener("change",h=>{a[h.target.checked?"add":"remove"](s)});const f=l.insertCell(),v=l.insertCell();window.presentUri=$e.activeState().graph.presentUri,f.innerHTML=`<a class="search-class${i[s]}" href="javascript:MicroModal.close('search-results');window.presentUri('${s}');void(0)">
          ${s.replace(gh.PREFIX,"")}</a>`;const g=`<a class="search-class${i[s]}" href="${s}" target="_blank">Description</a>`;v.innerHTML=g});const o=r.insertRow(0);o.insertCell();{const s=o.insertCell();s.innerHTML="<a href='#'>Highlight All</a>",s.addEventListener("click",l=>{Yn.close("search-results"),$e.activeState().graph.presentUris(n),l.preventDefault()})}{const s=o.insertCell();s.innerHTML="<a href='#'>Highlight Selected</a>",s.addEventListener("click",l=>{Yn.close("search-results"),$e.activeState().graph.presentUris([...a]),l.preventDefault()})}return!0}async search(e){const r=`select distinct(?s) { {?s a owl:Class.} UNION {?s a rdf:Property.}
        {?s rdfs:label ?l.} UNION {?s skos:altLabel ?l.}	filter(regex(lcase(replace(str(?l),"[ -]","")),lcase("${e.replace(/[\x22\x27\x5C\x0A\x0D -]/g,"")}"))) } order by asc(strlen(str(?l))) limit ${fu}`;return Ie.debug(r),(await Ir(r)).map(a=>a.s.value)}async showSearch(e){Yn.show("search-results");const r=(await KS(e)).map(i=>i.item.uri);return this.showSearchResults(e,r),!1}}var Cn="top",Wn="bottom",Un="right",Sn="left",Tc="auto",Lo=[Cn,Wn,Un,Sn],ra="start",bo="end",YS="clippingParents",Bp="viewport",$a="popper",ZS="reference",$d=Lo.reduce(function(t,e){return t.concat([e+"-"+ra,e+"-"+bo])},[]),Rp=[].concat(Lo,[Tc]).reduce(function(t,e){return t.concat([e,e+"-"+ra,e+"-"+bo])},[]),QS="beforeRead",JS="read",eT="afterRead",tT="beforeMain",nT="main",rT="afterMain",iT="beforeWrite",aT="write",oT="afterWrite",sT=[QS,JS,eT,tT,nT,rT,iT,aT,oT];function gr(t){return t?(t.nodeName||"").toLowerCase():null}function On(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _i(t){var e=On(t).Element;return t instanceof e||t instanceof Element}function qn(t){var e=On(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function kc(t){if(typeof ShadowRoot>"u")return!1;var e=On(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function lT(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},a=e.elements[n];!qn(a)||!gr(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function uT(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=o.reduce(function(l,u){return l[u]="",l},{});!qn(i)||!gr(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const Np={name:"applyStyles",enabled:!0,phase:"write",fn:lT,effect:uT,requires:["computeStyles"]};function dr(t){return t.split("-")[0]}var xi=Math.max,Qs=Math.min,ia=Math.round;function Uu(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Fp(){return!/^((?!chrome|android).)*safari/i.test(Uu())}function aa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,a=1;e&&qn(t)&&(i=t.offsetWidth>0&&ia(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&ia(r.height)/t.offsetHeight||1);var o=_i(t)?On(t):window,s=o.visualViewport,l=!Fp()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/i,c=(r.top+(l&&s?s.offsetTop:0))/a,f=r.width/i,v=r.height/a;return{width:f,height:v,top:c,right:u+f,bottom:c+v,left:u,x:u,y:c}}function Ac(t){var e=aa(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function zp(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&kc(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _r(t){return On(t).getComputedStyle(t)}function cT(t){return["table","td","th"].indexOf(gr(t))>=0}function ri(t){return((_i(t)?t.ownerDocument:t.document)||window.document).documentElement}function El(t){return gr(t)==="html"?t:t.assignedSlot||t.parentNode||(kc(t)?t.host:null)||ri(t)}function Vd(t){return!qn(t)||_r(t).position==="fixed"?null:t.offsetParent}function fT(t){var e=/firefox/i.test(Uu()),n=/Trident/i.test(Uu());if(n&&qn(t)){var r=_r(t);if(r.position==="fixed")return null}var i=El(t);for(kc(i)&&(i=i.host);qn(i)&&["html","body"].indexOf(gr(i))<0;){var a=_r(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Oo(t){for(var e=On(t),n=Vd(t);n&&cT(n)&&_r(n).position==="static";)n=Vd(n);return n&&(gr(n)==="html"||gr(n)==="body"&&_r(n).position==="static")?e:n||fT(t)||e}function _c(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function eo(t,e,n){return xi(t,Qs(e,n))}function dT(t,e,n){var r=eo(t,e,n);return r>n?n:r}function Hp(){return{top:0,right:0,bottom:0,left:0}}function $p(t){return Object.assign({},Hp(),t)}function Vp(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var hT=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,$p(typeof e!="number"?e:Vp(e,Lo))};function vT(t){var e,n=t.state,r=t.name,i=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=dr(n.placement),l=_c(s),u=[Sn,Un].indexOf(s)>=0,c=u?"height":"width";if(!(!a||!o)){var f=hT(i.padding,n),v=Ac(a),g=l==="y"?Cn:Sn,h=l==="y"?Wn:Un,m=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],w=o[l]-n.rects.reference[l],b=Oo(a),E=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,C=m/2-w/2,x=f[g],k=E-v[c]-f[h],A=E/2-v[c]/2+C,p=eo(x,A,k),P=l;n.modifiersData[r]=(e={},e[P]=p,e.centerOffset=p-A,e)}}function pT(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||zp(e.elements.popper,i)&&(e.elements.arrow=i))}const gT={name:"arrow",enabled:!0,phase:"main",fn:vT,effect:pT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function oa(t){return t.split("-")[1]}var mT={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yT(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:ia(n*i)/i||0,y:ia(r*i)/i||0}}function qd(t){var e,n=t.popper,r=t.popperRect,i=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,f=t.isFixed,v=o.x,g=v===void 0?0:v,h=o.y,m=h===void 0?0:h,w=typeof c=="function"?c({x:g,y:m}):{x:g,y:m};g=w.x,m=w.y;var b=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),C=Sn,x=Cn,k=window;if(u){var A=Oo(n),p="clientHeight",P="clientWidth";if(A===On(n)&&(A=ri(n),_r(A).position!=="static"&&s==="absolute"&&(p="scrollHeight",P="scrollWidth")),A=A,i===Cn||(i===Sn||i===Un)&&a===bo){x=Wn;var _=f&&A===k&&k.visualViewport?k.visualViewport.height:A[p];m-=_-r.height,m*=l?1:-1}if(i===Sn||(i===Cn||i===Wn)&&a===bo){C=Un;var O=f&&A===k&&k.visualViewport?k.visualViewport.width:A[P];g-=O-r.width,g*=l?1:-1}}var D=Object.assign({position:s},u&&mT),L=c===!0?yT({x:g,y:m},On(n)):{x:g,y:m};if(g=L.x,m=L.y,l){var N;return Object.assign({},D,(N={},N[x]=E?"0":"",N[C]=b?"0":"",N.transform=(k.devicePixelRatio||1)<=1?"translate("+g+"px, "+m+"px)":"translate3d("+g+"px, "+m+"px, 0)",N))}return Object.assign({},D,(e={},e[x]=E?m+"px":"",e[C]=b?g+"px":"",e.transform="",e))}function bT(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:dr(e.placement),variation:oa(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,qd(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,qd(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const wT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bT,data:{}};var ps={passive:!0};function xT(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,l=On(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",n.update,ps)}),s&&l.addEventListener("resize",n.update,ps),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",n.update,ps)}),s&&l.removeEventListener("resize",n.update,ps)}}const ET={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xT,data:{}};var CT={left:"right",right:"left",bottom:"top",top:"bottom"};function Ds(t){return t.replace(/left|right|bottom|top/g,function(e){return CT[e]})}var ST={start:"end",end:"start"};function Wd(t){return t.replace(/start|end/g,function(e){return ST[e]})}function Ic(t){var e=On(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Mc(t){return aa(ri(t)).left+Ic(t).scrollLeft}function TT(t,e){var n=On(t),r=ri(t),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var u=Fp();(u||!u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+Mc(t),y:l}}function kT(t){var e,n=ri(t),r=Ic(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=xi(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=xi(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Mc(t),l=-r.scrollTop;return _r(i||n).direction==="rtl"&&(s+=xi(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function Pc(t){var e=_r(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function qp(t){return["html","body","#document"].indexOf(gr(t))>=0?t.ownerDocument.body:qn(t)&&Pc(t)?t:qp(El(t))}function to(t,e){var n;e===void 0&&(e=[]);var r=qp(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),a=On(r),o=i?[a].concat(a.visualViewport||[],Pc(r)?r:[]):r,s=e.concat(o);return i?s:s.concat(to(El(o)))}function Gu(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function AT(t,e){var n=aa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ud(t,e,n){return e===Bp?Gu(TT(t,n)):_i(e)?AT(e,n):Gu(kT(ri(t)))}function _T(t){var e=to(El(t)),n=["absolute","fixed"].indexOf(_r(t).position)>=0,r=n&&qn(t)?Oo(t):t;return _i(r)?e.filter(function(i){return _i(i)&&zp(i,r)&&gr(i)!=="body"}):[]}function IT(t,e,n,r){var i=e==="clippingParents"?_T(t):[].concat(e),a=[].concat(i,[n]),o=a[0],s=a.reduce(function(l,u){var c=Ud(t,u,r);return l.top=xi(c.top,l.top),l.right=Qs(c.right,l.right),l.bottom=Qs(c.bottom,l.bottom),l.left=xi(c.left,l.left),l},Ud(t,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Wp(t){var e=t.reference,n=t.element,r=t.placement,i=r?dr(r):null,a=r?oa(r):null,o=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(i){case Cn:l={x:o,y:e.y-n.height};break;case Wn:l={x:o,y:e.y+e.height};break;case Un:l={x:e.x+e.width,y:s};break;case Sn:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var u=i?_c(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case ra:l[u]=l[u]-(e[c]/2-n[c]/2);break;case bo:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function wo(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,a=n.strategy,o=a===void 0?t.strategy:a,s=n.boundary,l=s===void 0?YS:s,u=n.rootBoundary,c=u===void 0?Bp:u,f=n.elementContext,v=f===void 0?$a:f,g=n.altBoundary,h=g===void 0?!1:g,m=n.padding,w=m===void 0?0:m,b=$p(typeof w!="number"?w:Vp(w,Lo)),E=v===$a?ZS:$a,C=t.rects.popper,x=t.elements[h?E:v],k=IT(_i(x)?x:x.contextElement||ri(t.elements.popper),l,c,o),A=aa(t.elements.reference),p=Wp({reference:A,element:C,strategy:"absolute",placement:i}),P=Gu(Object.assign({},C,p)),_=v===$a?P:A,O={top:k.top-_.top+b.top,bottom:_.bottom-k.bottom+b.bottom,left:k.left-_.left+b.left,right:_.right-k.right+b.right},D=t.modifiersData.offset;if(v===$a&&D){var L=D[i];Object.keys(O).forEach(function(N){var R=[Un,Wn].indexOf(N)>=0?1:-1,z=[Cn,Wn].indexOf(N)>=0?"y":"x";O[N]+=L[z]*R})}return O}function MT(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Rp:l,c=oa(r),f=c?s?$d:$d.filter(function(h){return oa(h)===c}):Lo,v=f.filter(function(h){return u.indexOf(h)>=0});v.length===0&&(v=f);var g=v.reduce(function(h,m){return h[m]=wo(t,{placement:m,boundary:i,rootBoundary:a,padding:o})[dr(m)],h},{});return Object.keys(g).sort(function(h,m){return g[h]-g[m]})}function PT(t){if(dr(t)===Tc)return[];var e=Ds(t);return[Wd(t),e,Wd(e)]}function DT(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,v=n.altBoundary,g=n.flipVariations,h=g===void 0?!0:g,m=n.allowedAutoPlacements,w=e.options.placement,b=dr(w),E=b===w,C=l||(E||!h?[Ds(w)]:PT(w)),x=[w].concat(C).reduce(function(G,V){return G.concat(dr(V)===Tc?MT(e,{placement:V,boundary:c,rootBoundary:f,padding:u,flipVariations:h,allowedAutoPlacements:m}):V)},[]),k=e.rects.reference,A=e.rects.popper,p=new Map,P=!0,_=x[0],O=0;O<x.length;O++){var D=x[O],L=dr(D),N=oa(D)===ra,R=[Cn,Wn].indexOf(L)>=0,z=R?"width":"height",H=wo(e,{placement:D,boundary:c,rootBoundary:f,altBoundary:v,padding:u}),W=R?N?Un:Sn:N?Wn:Cn;k[z]>A[z]&&(W=Ds(W));var X=Ds(W),re=[];if(a&&re.push(H[L]<=0),s&&re.push(H[W]<=0,H[X]<=0),re.every(function(G){return G})){_=D,P=!1;break}p.set(D,re)}if(P)for(var ae=h?3:1,J=function(V){var Y=x.find(function(ne){var se=p.get(ne);if(se)return se.slice(0,V).every(function(Z){return Z})});if(Y)return _=Y,"break"},$=ae;$>0;$--){var U=J($);if(U==="break")break}e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}}const LT={name:"flip",enabled:!0,phase:"main",fn:DT,requiresIfExists:["offset"],data:{_skip:!1}};function Gd(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function jd(t){return[Cn,Un,Wn,Sn].some(function(e){return t[e]>=0})}function OT(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=wo(e,{elementContext:"reference"}),s=wo(e,{altBoundary:!0}),l=Gd(o,r),u=Gd(s,i,a),c=jd(l),f=jd(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const BT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:OT};function RT(t,e,n){var r=dr(t),i=[Sn,Cn].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Sn,Un].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function NT(t){var e=t.state,n=t.options,r=t.name,i=n.offset,a=i===void 0?[0,0]:i,o=Rp.reduce(function(c,f){return c[f]=RT(f,e.rects,a),c},{}),s=o[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const FT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:NT};function zT(t){var e=t.state,n=t.name;e.modifiersData[n]=Wp({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const HT={name:"popperOffsets",enabled:!0,phase:"read",fn:zT,data:{}};function $T(t){return t==="x"?"y":"x"}function VT(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,v=n.tether,g=v===void 0?!0:v,h=n.tetherOffset,m=h===void 0?0:h,w=wo(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),b=dr(e.placement),E=oa(e.placement),C=!E,x=_c(b),k=$T(x),A=e.modifiersData.popperOffsets,p=e.rects.reference,P=e.rects.popper,_=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,O=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(A){if(a){var N,R=x==="y"?Cn:Sn,z=x==="y"?Wn:Un,H=x==="y"?"height":"width",W=A[x],X=W+w[R],re=W-w[z],ae=g?-P[H]/2:0,J=E===ra?p[H]:P[H],$=E===ra?-P[H]:-p[H],U=e.elements.arrow,G=g&&U?Ac(U):{width:0,height:0},V=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Hp(),Y=V[R],ne=V[z],se=eo(0,p[H],G[H]),Z=C?p[H]/2-ae-se-Y-O.mainAxis:J-se-Y-O.mainAxis,K=C?-p[H]/2+ae+se+ne+O.mainAxis:$+se+ne+O.mainAxis,ce=e.elements.arrow&&Oo(e.elements.arrow),ve=ce?x==="y"?ce.clientTop||0:ce.clientLeft||0:0,De=(N=D==null?void 0:D[x])!=null?N:0,Oe=W+Z-De-ve,Ze=W+K-De,nt=eo(g?Qs(X,Oe):X,W,g?xi(re,Ze):re);A[x]=nt,L[x]=nt-W}if(s){var qe,Re=x==="x"?Cn:Sn,be=x==="x"?Wn:Un,Ce=A[k],Se=k==="y"?"height":"width",ke=Ce+w[Re],Le=Ce-w[be],je=[Cn,Sn].indexOf(b)!==-1,Te=(qe=D==null?void 0:D[k])!=null?qe:0,de=je?ke:Ce-p[Se]-P[Se]-Te+O.altAxis,F=je?Ce+p[Se]+P[Se]-Te-O.altAxis:Le,oe=g&&je?dT(de,Ce,F):eo(g?de:ke,Ce,g?F:Le);A[k]=oe,L[k]=oe-Ce}e.modifiersData[r]=L}}const qT={name:"preventOverflow",enabled:!0,phase:"main",fn:VT,requiresIfExists:["offset"]};function WT(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function UT(t){return t===On(t)||!qn(t)?Ic(t):WT(t)}function GT(t){var e=t.getBoundingClientRect(),n=ia(e.width)/t.offsetWidth||1,r=ia(e.height)/t.offsetHeight||1;return n!==1||r!==1}function jT(t,e,n){n===void 0&&(n=!1);var r=qn(e),i=qn(e)&&GT(e),a=ri(e),o=aa(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((gr(e)!=="body"||Pc(a))&&(s=UT(e)),qn(e)?(l=aa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=Mc(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function KT(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&i(l)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||i(a)}),r}function XT(t){var e=KT(t);return sT.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function YT(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ZT(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Kd={placement:"bottom",modifiers:[],strategy:"absolute"};function Xd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function QT(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,a=i===void 0?Kd:i;return function(s,l,u){u===void 0&&(u=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Kd,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],v=!1,g={state:c,setOptions:function(b){var E=typeof b=="function"?b(c.options):b;m(),c.options=Object.assign({},a,c.options,E),c.scrollParents={reference:_i(s)?to(s):s.contextElement?to(s.contextElement):[],popper:to(l)};var C=XT(ZT([].concat(r,c.options.modifiers)));return c.orderedModifiers=C.filter(function(x){return x.enabled}),h(),g.update()},forceUpdate:function(){if(!v){var b=c.elements,E=b.reference,C=b.popper;if(Xd(E,C)){c.rects={reference:jT(E,Oo(C),c.options.strategy==="fixed"),popper:Ac(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var k=c.orderedModifiers[x],A=k.fn,p=k.options,P=p===void 0?{}:p,_=k.name;typeof A=="function"&&(c=A({state:c,options:P,name:_,instance:g})||c)}}}},update:YT(function(){return new Promise(function(w){g.forceUpdate(),w(c)})}),destroy:function(){m(),v=!0}};if(!Xd(s,l))return g;g.setOptions(u).then(function(w){!v&&u.onFirstUpdate&&u.onFirstUpdate(w)});function h(){c.orderedModifiers.forEach(function(w){var b=w.name,E=w.options,C=E===void 0?{}:E,x=w.effect;if(typeof x=="function"){var k=x({state:c,name:b,instance:g,options:C}),A=function(){};f.push(k||A)}})}function m(){f.forEach(function(w){return w()}),f=[]}return g}}var JT=[ET,HT,wT,Np,FT,LT,qT,gT,BT],ek=QT({defaultModifiers:JT}),tk="tippy-box",Up="tippy-content",nk="tippy-backdrop",Gp="tippy-arrow",jp="tippy-svg-arrow",gi={passive:!0,capture:!0},Kp=function(){return document.body};function du(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Dc(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Xp(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Yd(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function rk(t){return t.split(/\s+/).filter(Boolean)}function Wi(t){return[].concat(t)}function Zd(t,e){t.indexOf(e)===-1&&t.push(e)}function ik(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function ak(t){return t.split("-")[0]}function Js(t){return[].slice.call(t)}function Qd(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function no(){return document.createElement("div")}function Cl(t){return["Element","Fragment"].some(function(e){return Dc(t,e)})}function ok(t){return Dc(t,"NodeList")}function sk(t){return Dc(t,"MouseEvent")}function lk(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function uk(t){return Cl(t)?[t]:ok(t)?Js(t):Array.isArray(t)?t:Js(document.querySelectorAll(t))}function hu(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Jd(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function ck(t){var e,n=Wi(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function fk(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var a=i.popperRect,o=i.popperState,s=i.props,l=s.interactiveBorder,u=ak(o.placement),c=o.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,v=u==="top"?c.bottom.y:0,g=u==="right"?c.left.x:0,h=u==="left"?c.right.x:0,m=a.top-r+f>l,w=r-a.bottom-v>l,b=a.left-n+g>l,E=n-a.right-h>l;return m||w||b||E})}function vu(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function eh(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var lr={isTouch:!1},th=0;function dk(){lr.isTouch||(lr.isTouch=!0,window.performance&&document.addEventListener("mousemove",Yp))}function Yp(){var t=performance.now();t-th<20&&(lr.isTouch=!1,document.removeEventListener("mousemove",Yp)),th=t}function hk(){var t=document.activeElement;if(lk(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function vk(){document.addEventListener("touchstart",dk,gi),window.addEventListener("blur",hk)}var pk=typeof window<"u"&&typeof document<"u",gk=pk?!!window.msCrypto:!1,mk={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},yk={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Zn=Object.assign({appendTo:Kp,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},mk,yk),bk=Object.keys(Zn),wk=function(e){var n=Object.keys(e);n.forEach(function(r){Zn[r]=e[r]})};function Zp(t){var e=t.plugins||[],n=e.reduce(function(r,i){var a=i.name,o=i.defaultValue;if(a){var s;r[a]=t[a]!==void 0?t[a]:(s=Zn[a])!=null?s:o}return r},{});return Object.assign({},t,n)}function xk(t,e){var n=e?Object.keys(Zp(Object.assign({},Zn,{plugins:e}))):bk,r=n.reduce(function(i,a){var o=(t.getAttribute("data-tippy-"+a)||"").trim();if(!o)return i;if(a==="content")i[a]=o;else try{i[a]=JSON.parse(o)}catch{i[a]=o}return i},{});return r}function nh(t,e){var n=Object.assign({},e,{content:Xp(e.content,[t])},e.ignoreAttributes?{}:xk(t,e.plugins));return n.aria=Object.assign({},Zn.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Ek=function(){return"innerHTML"};function ju(t,e){t[Ek()]=e}function rh(t){var e=no();return t===!0?e.className=Gp:(e.className=jp,Cl(t)?e.appendChild(t):ju(e,t)),e}function ih(t,e){Cl(e.content)?(ju(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?ju(t,e.content):t.textContent=e.content)}function Ku(t){var e=t.firstElementChild,n=Js(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Up)}),arrow:n.find(function(r){return r.classList.contains(Gp)||r.classList.contains(jp)}),backdrop:n.find(function(r){return r.classList.contains(nk)})}}function Qp(t){var e=no(),n=no();n.className=tk,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=no();r.className=Up,r.setAttribute("data-state","hidden"),ih(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(a,o){var s=Ku(e),l=s.box,u=s.content,c=s.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(a.content!==o.content||a.allowHTML!==o.allowHTML)&&ih(u,t.props),o.arrow?c?a.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(rh(o.arrow))):l.appendChild(rh(o.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}Qp.$$tippy=!0;var Ck=1,gs=[],pu=[];function Sk(t,e){var n=nh(t,Object.assign({},Zn,Zp(Qd(e)))),r,i,a,o=!1,s=!1,l=!1,u=!1,c,f,v,g=[],h=Yd(Oe,n.interactiveDebounce),m,w=Ck++,b=null,E=ik(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},x={id:w,reference:t,popper:no(),popperInstance:b,props:n,state:C,plugins:E,clearDelayTimeouts:de,setProps:F,setContent:oe,show:pe,hide:le,hideWithInteractivity:ue,enable:je,disable:Te,unmount:Ae,destroy:ye};if(!n.render)return x;var k=n.render(x),A=k.popper,p=k.onUpdate;A.setAttribute("data-tippy-root",""),A.id="tippy-"+x.id,x.popper=A,t._tippy=x,A._tippy=x;var P=E.map(function(ee){return ee.fn(x)}),_=t.hasAttribute("aria-expanded");return ce(),ae(),W(),X("onCreate",[x]),n.showOnCreate&&ke(),A.addEventListener("mouseenter",function(){x.props.interactive&&x.state.isVisible&&x.clearDelayTimeouts()}),A.addEventListener("mouseleave",function(){x.props.interactive&&x.props.trigger.indexOf("mouseenter")>=0&&R().addEventListener("mousemove",h)}),x;function O(){var ee=x.props.touch;return Array.isArray(ee)?ee:[ee,0]}function D(){return O()[0]==="hold"}function L(){var ee;return!!((ee=x.props.render)!=null&&ee.$$tippy)}function N(){return m||t}function R(){var ee=N().parentNode;return ee?ck(ee):document}function z(){return Ku(A)}function H(ee){return x.state.isMounted&&!x.state.isVisible||lr.isTouch||c&&c.type==="focus"?0:du(x.props.delay,ee?0:1,Zn.delay)}function W(ee){ee===void 0&&(ee=!1),A.style.pointerEvents=x.props.interactive&&!ee?"":"none",A.style.zIndex=""+x.props.zIndex}function X(ee,we,Me){if(Me===void 0&&(Me=!0),P.forEach(function(Be){Be[ee]&&Be[ee].apply(Be,we)}),Me){var _e;(_e=x.props)[ee].apply(_e,we)}}function re(){var ee=x.props.aria;if(ee.content){var we="aria-"+ee.content,Me=A.id,_e=Wi(x.props.triggerTarget||t);_e.forEach(function(Be){var Ge=Be.getAttribute(we);if(x.state.isVisible)Be.setAttribute(we,Ge?Ge+" "+Me:Me);else{var We=Ge&&Ge.replace(Me,"").trim();We?Be.setAttribute(we,We):Be.removeAttribute(we)}})}}function ae(){if(!(_||!x.props.aria.expanded)){var ee=Wi(x.props.triggerTarget||t);ee.forEach(function(we){x.props.interactive?we.setAttribute("aria-expanded",x.state.isVisible&&we===N()?"true":"false"):we.removeAttribute("aria-expanded")})}}function J(){R().removeEventListener("mousemove",h),gs=gs.filter(function(ee){return ee!==h})}function $(ee){if(!(lr.isTouch&&(l||ee.type==="mousedown"))){var we=ee.composedPath&&ee.composedPath()[0]||ee.target;if(!(x.props.interactive&&eh(A,we))){if(Wi(x.props.triggerTarget||t).some(function(Me){return eh(Me,we)})){if(lr.isTouch||x.state.isVisible&&x.props.trigger.indexOf("click")>=0)return}else X("onClickOutside",[x,ee]);x.props.hideOnClick===!0&&(x.clearDelayTimeouts(),x.hide(),s=!0,setTimeout(function(){s=!1}),x.state.isMounted||Y())}}}function U(){l=!0}function G(){l=!1}function V(){var ee=R();ee.addEventListener("mousedown",$,!0),ee.addEventListener("touchend",$,gi),ee.addEventListener("touchstart",G,gi),ee.addEventListener("touchmove",U,gi)}function Y(){var ee=R();ee.removeEventListener("mousedown",$,!0),ee.removeEventListener("touchend",$,gi),ee.removeEventListener("touchstart",G,gi),ee.removeEventListener("touchmove",U,gi)}function ne(ee,we){Z(ee,function(){!x.state.isVisible&&A.parentNode&&A.parentNode.contains(A)&&we()})}function se(ee,we){Z(ee,we)}function Z(ee,we){var Me=z().box;function _e(Be){Be.target===Me&&(vu(Me,"remove",_e),we())}if(ee===0)return we();vu(Me,"remove",f),vu(Me,"add",_e),f=_e}function K(ee,we,Me){Me===void 0&&(Me=!1);var _e=Wi(x.props.triggerTarget||t);_e.forEach(function(Be){Be.addEventListener(ee,we,Me),g.push({node:Be,eventType:ee,handler:we,options:Me})})}function ce(){D()&&(K("touchstart",De,{passive:!0}),K("touchend",Ze,{passive:!0})),rk(x.props.trigger).forEach(function(ee){if(ee!=="manual")switch(K(ee,De),ee){case"mouseenter":K("mouseleave",Ze);break;case"focus":K(gk?"focusout":"blur",nt);break;case"focusin":K("focusout",nt);break}})}function ve(){g.forEach(function(ee){var we=ee.node,Me=ee.eventType,_e=ee.handler,Be=ee.options;we.removeEventListener(Me,_e,Be)}),g=[]}function De(ee){var we,Me=!1;if(!(!x.state.isEnabled||qe(ee)||s)){var _e=((we=c)==null?void 0:we.type)==="focus";c=ee,m=ee.currentTarget,ae(),!x.state.isVisible&&sk(ee)&&gs.forEach(function(Be){return Be(ee)}),ee.type==="click"&&(x.props.trigger.indexOf("mouseenter")<0||o)&&x.props.hideOnClick!==!1&&x.state.isVisible?Me=!0:ke(ee),ee.type==="click"&&(o=!Me),Me&&!_e&&Le(ee)}}function Oe(ee){var we=ee.target,Me=N().contains(we)||A.contains(we);if(!(ee.type==="mousemove"&&Me)){var _e=Se().concat(A).map(function(Be){var Ge,We=Be._tippy,at=(Ge=We.popperInstance)==null?void 0:Ge.state;return at?{popperRect:Be.getBoundingClientRect(),popperState:at,props:n}:null}).filter(Boolean);fk(_e,ee)&&(J(),Le(ee))}}function Ze(ee){var we=qe(ee)||x.props.trigger.indexOf("click")>=0&&o;if(!we){if(x.props.interactive){x.hideWithInteractivity(ee);return}Le(ee)}}function nt(ee){x.props.trigger.indexOf("focusin")<0&&ee.target!==N()||x.props.interactive&&ee.relatedTarget&&A.contains(ee.relatedTarget)||Le(ee)}function qe(ee){return lr.isTouch?D()!==ee.type.indexOf("touch")>=0:!1}function Re(){be();var ee=x.props,we=ee.popperOptions,Me=ee.placement,_e=ee.offset,Be=ee.getReferenceClientRect,Ge=ee.moveTransition,We=L()?Ku(A).arrow:null,at=Be?{getBoundingClientRect:Be,contextElement:Be.contextElement||N()}:t,mt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ut){var ot=ut.state;if(L()){var Pt=z(),zt=Pt.box;["placement","reference-hidden","escaped"].forEach(function(Lt){Lt==="placement"?zt.setAttribute("data-placement",ot.placement):ot.attributes.popper["data-popper-"+Lt]?zt.setAttribute("data-"+Lt,""):zt.removeAttribute("data-"+Lt)}),ot.attributes.popper={}}}},Mt=[{name:"offset",options:{offset:_e}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ge}},mt];L()&&We&&Mt.push({name:"arrow",options:{element:We,padding:3}}),Mt.push.apply(Mt,(we==null?void 0:we.modifiers)||[]),x.popperInstance=ek(at,A,Object.assign({},we,{placement:Me,onFirstUpdate:v,modifiers:Mt}))}function be(){x.popperInstance&&(x.popperInstance.destroy(),x.popperInstance=null)}function Ce(){var ee=x.props.appendTo,we,Me=N();x.props.interactive&&ee===Kp||ee==="parent"?we=Me.parentNode:we=Xp(ee,[Me]),we.contains(A)||we.appendChild(A),x.state.isMounted=!0,Re()}function Se(){return Js(A.querySelectorAll("[data-tippy-root]"))}function ke(ee){x.clearDelayTimeouts(),ee&&X("onTrigger",[x,ee]),V();var we=H(!0),Me=O(),_e=Me[0],Be=Me[1];lr.isTouch&&_e==="hold"&&Be&&(we=Be),we?r=setTimeout(function(){x.show()},we):x.show()}function Le(ee){if(x.clearDelayTimeouts(),X("onUntrigger",[x,ee]),!x.state.isVisible){Y();return}if(!(x.props.trigger.indexOf("mouseenter")>=0&&x.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(ee.type)>=0&&o)){var we=H(!1);we?i=setTimeout(function(){x.state.isVisible&&x.hide()},we):a=requestAnimationFrame(function(){x.hide()})}}function je(){x.state.isEnabled=!0}function Te(){x.hide(),x.state.isEnabled=!1}function de(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(a)}function F(ee){if(!x.state.isDestroyed){X("onBeforeUpdate",[x,ee]),ve();var we=x.props,Me=nh(t,Object.assign({},we,Qd(ee),{ignoreAttributes:!0}));x.props=Me,ce(),we.interactiveDebounce!==Me.interactiveDebounce&&(J(),h=Yd(Oe,Me.interactiveDebounce)),we.triggerTarget&&!Me.triggerTarget?Wi(we.triggerTarget).forEach(function(_e){_e.removeAttribute("aria-expanded")}):Me.triggerTarget&&t.removeAttribute("aria-expanded"),ae(),W(),p&&p(we,Me),x.popperInstance&&(Re(),Se().forEach(function(_e){requestAnimationFrame(_e._tippy.popperInstance.forceUpdate)})),X("onAfterUpdate",[x,ee])}}function oe(ee){x.setProps({content:ee})}function pe(){var ee=x.state.isVisible,we=x.state.isDestroyed,Me=!x.state.isEnabled,_e=lr.isTouch&&!x.props.touch,Be=du(x.props.duration,0,Zn.duration);if(!(ee||we||Me||_e)&&!N().hasAttribute("disabled")&&(X("onShow",[x],!1),x.props.onShow(x)!==!1)){if(x.state.isVisible=!0,L()&&(A.style.visibility="visible"),W(),V(),x.state.isMounted||(A.style.transition="none"),L()){var Ge=z(),We=Ge.box,at=Ge.content;hu([We,at],0)}v=function(){var Mt;if(!(!x.state.isVisible||u)){if(u=!0,A.offsetHeight,A.style.transition=x.props.moveTransition,L()&&x.props.animation){var $t=z(),ut=$t.box,ot=$t.content;hu([ut,ot],Be),Jd([ut,ot],"visible")}re(),ae(),Zd(pu,x),(Mt=x.popperInstance)==null||Mt.forceUpdate(),X("onMount",[x]),x.props.animation&&L()&&se(Be,function(){x.state.isShown=!0,X("onShown",[x])})}},Ce()}}function le(){var ee=!x.state.isVisible,we=x.state.isDestroyed,Me=!x.state.isEnabled,_e=du(x.props.duration,1,Zn.duration);if(!(ee||we||Me)&&(X("onHide",[x],!1),x.props.onHide(x)!==!1)){if(x.state.isVisible=!1,x.state.isShown=!1,u=!1,o=!1,L()&&(A.style.visibility="hidden"),J(),Y(),W(!0),L()){var Be=z(),Ge=Be.box,We=Be.content;x.props.animation&&(hu([Ge,We],_e),Jd([Ge,We],"hidden"))}re(),ae(),x.props.animation?L()&&ne(_e,x.unmount):x.unmount()}}function ue(ee){R().addEventListener("mousemove",h),Zd(gs,h),h(ee)}function Ae(){x.state.isVisible&&x.hide(),x.state.isMounted&&(be(),Se().forEach(function(ee){ee._tippy.unmount()}),A.parentNode&&A.parentNode.removeChild(A),pu=pu.filter(function(ee){return ee!==x}),x.state.isMounted=!1,X("onHidden",[x]))}function ye(){x.state.isDestroyed||(x.clearDelayTimeouts(),x.unmount(),ve(),delete t._tippy,x.state.isDestroyed=!0,X("onDestroy",[x]))}}function sa(t,e){e===void 0&&(e={});var n=Zn.plugins.concat(e.plugins||[]);vk();var r=Object.assign({},e,{plugins:n}),i=uk(t),a=i.reduce(function(o,s){var l=s&&Sk(s,r);return l&&o.push(l),o},[]);return Cl(t)?a[0]:a}sa.defaultProps=Zn;sa.setDefaultProps=wk;sa.currentInput=lr;Object.assign({},Np,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});sa.setDefaultProps({render:Qp});const Tk={"SNIK Graph Manual":{img:"graph.png"},"Multiview-Functionality":{"":"SNIK Graph supports the organization and management of different partial models in separate views.To copy a part of the whole graph, press 'C' or 'S' and to insert it into a new model press 'V' or 'P'.","search-field":"Search the currently active view for resources by entering a full or partial name.","View-specific menu":{"":"The view-specific menu can be found in the upper right position of each view, described from left to right.",img:"viewmenu.png",recalculatesign:"Recalculate Layout",tightlayoutsign:"Tight layout",compoundlayoutsign:"Compound layout",addsign:"Open new Tab",plussign:"Zoom in",minussign:"Zoom out"}},menu:{file:{"":"Holds different file options like loading and saving the graph in different ways.","load-sparql":"Discard the currently loaded graph and load all ontologies of SNIK.","load-session":"Load a complete session from a Cytoscape JSON File. Caution: Discards all changes!","load-view":"Load a saved view (partial graph) and include it in the current session.","load-layout":"Load a saved layout of a partial graph and include it in the current session.","save-session":"Save the complete Session (all views).","save-snik-graph":"Save the complete SNIK graph to a Cytoscape file.","save-view":"Save only the currently active view (partial graph).","save-layout":"Save only the position information of the nodes currently not hidden.","recalculate-layout-replace":"Recalculate the position of all visible nodes. May take a while when a large number of nodes are visible.","save-image-png-visible-region":"Save a screenshot of the currently active view.","save-image-png-complete-partial-graph":"Save an image of the whole graph with the same pixel density as the current view.","save-image-png-visible-region-high-res":"Save an image of the current view with a high resolution, for example for printing.","save-image-png-complete-partial-graph-high-res":"Save an image of the whole graph with a high resolution, for example for printing."},filter:{"":"A collection of filters to display relevant subgraphs. Filters are applied to all open views.",meta:"The Meta Ontology provides common superclasses and properties for the subontologies of SNIK.",bb:'Based on the book "Health Information Systems OntologyâArchitectures and Strategies".',ob:'Based on the book"IT-Projektmanagement im Gesundheitswesen - Lehrbuch und Projektleitfaden.',he:'Based on the book "Informationsmanagement: Grundlagen, Aufgaben, Methoden".',ciox:"Based on interviews about the Health Information System with Department B1, the Department for Information Management, of the Uniklinikum Leipzig.",role:"Who...",function:"...does what...",entitytype:"...and which information is therefore needed."},options:{"":"Here you can find different checkboxes that toggle the behaviour of SNIK Graph. These are applied to all open views.","separate-subs":"Spread the SNIK Graph into subgraphs of the subontologies.","cumulative-search":"Keep previous search results visible when searching again.",grid:"shows a grid that supports better organizing of nodes.","combine-match":'Highlights groups of classes representing the same concept from different subontologies (matches) by placing them in boxes. Use "move matches on top of each other" or "move matches nearby" to shrink those boxes.',showInstances:"Display instances of SNIK Classes, if loaded via parameter.","day-mode":"White background. Saves ink when printing.","dev-mode":"Additional context menu entries for developers.","ext-mode":"Additional context menu entries for power users."},layout:{"":"This part of the menu holds the layout features.","show-close-matches":"Shows (unhides) all nodes that are connected via close matches to visible nodes.","recalculate-layout":"Hotkey: Ctrl+Alt+L. Recalculates the position of all selected nodes, or all visible nodes if there are not at least two selected nodes. Can take a while if there are many visible nodes.","tight-layout":"Hotkey: Ctrl+Alt+T. You can use this for a more narrow view.","compound-layout":"Hotkey: Ctrl+Alt+C. Layout that tries to places combined matches next to each other.","move-match-on-top":'Requires enabled "Combine Matching" option. Places all matching nodes in the center of their group.',"move-match-nearby":'Requires enabled "Combine Matching" option. Places all matching nodes in a small circle in their group.',"bb-chapter-search":'Presents you all chapters of the "blue book" and lets you build a subgraph out of selected chapters .',"ob-chapter-search":'Presents you all chapters of the "orange book" and lets you build a subgraph out of selected chapters .',"subontology-connectivity":"Shows the connectivity between chosen Subontologies, i.e. between BB and OB, in a new tab.",img:"subontologyConnectivity.png","reset-view":"Resets all the layout operations to get you back to the starting point of the visualization.","change-title":"Opens a prompt to change the title of the currently active view."},services:{"":"Other ways to access SNIK.","sparql-endpoint":"Expert interface for the SPARQL Protocol and RDF Query Language endpoint.","rdf-browser":"Browse complete descriptions of resources in the RDF browser."},language:"Language switch, you can choose between English, German and Persian. Ontologies may not or not fully support all available languages.",help:"Common Help Menu, holds e.g. this manual"},"context-menu":{"":"Right click on a node/edge to open the context menu and choose among:","base-mode":{description:"Opens the node in an RDF browser, which shows all its properties and values.",star:{"":"Highlights and expands the node and all its directly connected nodes.",img:"star.png"},"incoming-star":"Highlights and expands the node and all neighbours directly connected via incoming edges.","outgoing-star":"Highlights and expands the node and all neighbours directly connected via outgoing edges.",path:{"":"Shortest Path between a selected source and this node.",img:"star.png"},spiderworm:{"":"The Spider Worm consists of the shortest path between a selected source and this node plus all direct neighbours. Displaying a spiderworm hides all other nodes and edges.",img:"spiderworm.png"},edit:"If you are a domain expert and notice incorrectly modelled facts or connections of a node, feel free to send us an issue.","combine-close-matches":"Merge equivalent classes from different subontologies.","class-use":"Visualize the interplay of role, function and entity type (related to the Meta model).",hide:"Hide the selected item until the view is resetted.","set-path-source":"Set the starting point for path operations.","confirm-link":"Confirm that the automatically generated interlink is correct."},"dev-mode":{"remove-permanently":"Send us an issue to delete the selected item permanently. Also removes it until graph is reloaded.",debug:"Get debug information to the edge/node from the JSON File"},"ext-mode":{doublestar:{"":"The double star is like the spiderworm but shows connected nodes for both source and target, not just the target.",img:"doublestar.png"},starpath:{"":"Creates a path and star (expand) every node along it.",img:"starpath.png"},circlestar:{"":"A star (expansion of the node) using a circular layout. Hides all other nodes.",img:"circlestar.png"},lodlive:"Third party data visualization exploration tool."}}};function Jp(t){const e={};for(const n in t){if(n===""||n==="img")continue;const r=t[n];if(typeof r=="string"){e[n]=r;continue}r[""]&&(e[n]=r[""]),Object.assign(e,Jp(r))}return e}const el=Jp(Tk);function ah(){const t="right-end",e="reddark";for(const n in el){const r=el[n];if(typeof r!="string"&&console.error("value "+r+" for key "+n+" not a string"),document.getElementById(n))sa("#"+n,{content:r,placement:t,theme:e});else{const a=`[data-i18n="${n}"]`;document.querySelectorAll(a).length>0?sa(a,{content:r,placement:t,theme:e}):Ie.trace(`tooltip init: found none of #${n} and [data-i18n="${n}"]`)}}}var Ls={exports:{}},kk=Ls.exports,oh;function Ak(){return oh||(oh=1,function(t,e){(function(n,r){t.exports=r()})(kk,function(){var n=function(){function r(g){return o.appendChild(g.dom),g}function i(g){for(var h=0;h<o.children.length;h++)o.children[h].style.display=h===g?"block":"none";a=g}var a=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(g){g.preventDefault(),i(++a%o.children.length)},!1);var s=(performance||Date).now(),l=s,u=0,c=r(new n.Panel("FPS","#0ff","#002")),f=r(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var v=r(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){s=(performance||Date).now()},end:function(){u++;var g=(performance||Date).now();if(f.update(g-s,200),g>l+1e3&&(c.update(1e3*u/(g-l),100),l=g,u=0,v)){var h=performance.memory;v.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return g},update:function(){s=this.end()},domElement:o,setMode:i}};return n.Panel=function(r,i,a){var o=1/0,s=0,l=Math.round,u=l(window.devicePixelRatio||1),c=80*u,f=48*u,v=3*u,g=2*u,h=3*u,m=15*u,w=74*u,b=30*u,E=document.createElement("canvas");E.width=c,E.height=f,E.style.cssText="width:80px;height:48px";var C=E.getContext("2d");return C.font="bold "+9*u+"px Helvetica,Arial,sans-serif",C.textBaseline="top",C.fillStyle=a,C.fillRect(0,0,c,f),C.fillStyle=i,C.fillText(r,v,g),C.fillRect(h,m,w,b),C.fillStyle=a,C.globalAlpha=.9,C.fillRect(h,m,w,b),{dom:E,update:function(x,k){o=Math.min(o,x),s=Math.max(s,x),C.fillStyle=a,C.globalAlpha=1,C.fillRect(0,0,c,m),C.fillStyle=i,C.fillText(l(x)+" "+r+" ("+l(o)+"-"+l(s)+")",v,g),C.drawImage(E,h+u,m,w-u,b,h,m,w-u,b),C.fillRect(h+w-u,m,u,b),C.fillStyle=a,C.globalAlpha=.9,C.fillRect(h+w-u,m,u,l((1-x/k)*b))}}},n})}(Ls)),Ls.exports}var _k=Ak();const gu=Ii(_k);function Ik(t){const e=[];for(let o=0;o<4;o++){const s=new gu;s.domElement.style.cssText=`position:absolute;top:0px;right:${100*o}px;`,document.body.appendChild(s.dom),e.push(s)}const r=e[2].addPanel(new gu.Panel("Nodes","#ff8","#221")),i=e[3].addPanel(new gu.Panel("Edges","#f8f","#212"));for(let o=0;o<e.length;o++)e[o].showPanel(Math.min(o,e.length-2));let a=0;requestAnimationFrame(function o(){for(const s of e)s.update();a=(a+1)%30,a===0&&(r.update(t.nodes(":visible").size()),i.update(t.edges(":visible").size())),requestAnimationFrame(o)})}function ms(t){return t===""||t==="true"}function Mk(){const t=new URL(window.location.href),e={sparql:Ue.ontology.sparql.endpoint,instances:Ue.ontology.sparql.instances},n=new Set(["empty","benchmark","instances","virtual","class","json","sparql","graph","sub"]),r=new Set(Array.from(t.searchParams.keys())).difference(n);return r.size>0&&Ie.warn("Unknown GET parameters: "+Array.from(r).join(", ")),Object.assign(e,{empty:ms(t.searchParams.get("empty")),benchmark:ms(t.searchParams.get("benchmark")),...t.searchParams.get("instances")&&{instances:ms(t.searchParams.get("instances"))},virtual:ms(t.searchParams.get("virtual")),class:t.searchParams.get("class"),json:t.searchParams.get("json"),...t.searchParams.get("sparql")&&{sparql:t.searchParams.get("sparql")},graph:t.searchParams.get("graph"),sub:t.searchParams.get("sub")})}async function Pk(t,e){var n,r;try{if(e.benchmark&&Ik(t.cy),e.empty){Ie.info('Parameter "empty" detected. Skip loading and display file load prompt.');const a=document.getElementById("loadarea"),o=document.createElement("center");a.appendChild(o),o.innerHTML+=`<button id="load-button" style="font-size:10vh;margin-top:20vh">Datei Laden
      <input id="load-input" type="file" style="display:none"></input>
      </button>`;const s=document.getElementById("load-input"),l=document.getElementById("load-button");l.onclick=()=>{s.click()},s.addEventListener("change",u=>{a.removeChild(o),t.cy.resize(),nS(t)(u)});return}if(e.json){Ie.info("Loading from JSON URL "+e.json);const a=await(await fetch(e.json)).json();t.cy.add(a),Vn(t.cy,xc);return}Ie.debug("Loading from SPARQL Endpoint "+e.sparql),Ue.ontology.sparql.endpoint=e.sparql;const i=[];if(Ue.ontology.snik){let a=((n=e.sub)==null?void 0:n.split(","))||[];a.length===0&&(a=[...Ue.ontology.snik.helperGraphs,...Ue.ontology.snik.defaultSubOntologies]),i.push(...a.map(o=>gh.PREFIX+o))}if(console.debug(`Loading graph with${e.instances?"":"out"} instances.`),await yh(t.cy,i,e.instances,e.virtual),t.instancesLoaded=e.instances,bt.setVisible(t.cy.edges("[p='http://www.w3.org/1999/02/22-rdf-syntax-ns#type']"),!1),(r=Ue.ontology)!=null&&r.initialView){const a=Ue.ontology.initialView;Tp(a,$e.activeState().graph)}e.class&&(Ie.info(`Parameter "class" detected. Centering on URI ${e.class}.`),setTimeout(()=>t.presentUri(e.class),300))}catch(i){Ie.error(i),Ie.error("Error initializing SNIK Graph "+i)}}async function Dk(t){document.title=Ue.ontology.title,document.getElementById("overlay-legend").innerHTML=Ue.ontology.legend,await io(async()=>{const e=Mk();await Pk(t,e),new XS(Pn("search")),ah()}),ah()}var Os={exports:{}},Lk=Os.exports,sh;function Ok(){return sh||(sh=1,function(t,e){(function(n,r){t.exports=r()})(Lk,function(){return(()=>{var n={621:(a,o,s)=>{function l($,U){(U==null||U>$.length)&&(U=$.length);for(var G=0,V=new Array(U);G<U;G++)V[G]=$[G];return V}function u($,U){var G={};for(var V in $)G[V]=$[V];for(var Y in U)G[Y]instanceof Array?G[Y]=G[Y].concat(U[Y]):G[Y]=U[Y];return G}function c($){for(var U="",G=0;G<$.length;G++)U+=$[G],G!==$.length-1&&(U+=" ");return U}function f($,U,G){G?$.setAttribute(U,""):$.removeAttribute(U)}function v($,U,G){customElements.get($)===void 0&&customElements.define($,U,{extends:G})}s.r(o),s.d(o,{contextMenus:()=>J});var g="cy-context-menus-divider",h={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function m($){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})($)}function w($,U){var G;if(typeof Symbol>"u"||$[Symbol.iterator]==null){if(Array.isArray($)||(G=function(K,ce){if(K){if(typeof K=="string")return b(K,ce);var ve=Object.prototype.toString.call(K).slice(8,-1);return ve==="Object"&&K.constructor&&(ve=K.constructor.name),ve==="Map"||ve==="Set"?Array.from(K):ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve)?b(K,ce):void 0}}($))||U){G&&($=G);var V=0,Y=function(){};return{s:Y,n:function(){return V>=$.length?{done:!0}:{done:!1,value:$[V++]}},e:function(K){throw K},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,se=!0,Z=!1;return{s:function(){G=$[Symbol.iterator]()},n:function(){var K=G.next();return se=K.done,K},e:function(K){Z=!0,ne=K},f:function(){try{se||G.return==null||G.return()}finally{if(Z)throw ne}}}}function b($,U){(U==null||U>$.length)&&(U=$.length);for(var G=0,V=new Array(U);G<U;G++)V[G]=$[G];return V}function E($,U){if(!($ instanceof U))throw new TypeError("Cannot call a class as a function")}function C($,U){for(var G=0;G<U.length;G++){var V=U[G];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty($,V.key,V)}}function x($,U,G){return U&&C($.prototype,U),G&&C($,G),$}function k($,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(U&&U.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),U&&N($,U)}function A($){var U=L();return function(){var G,V=R($);if(U){var Y=R(this).constructor;G=Reflect.construct(V,arguments,Y)}else G=V.apply(this,arguments);return p(this,G)}}function p($,U){return!U||m(U)!=="object"&&typeof U!="function"?P($):U}function P($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function _($,U,G){return(_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,Y,ne){var se=function(K,ce){for(;!Object.prototype.hasOwnProperty.call(K,ce)&&(K=R(K))!==null;);return K}(V,Y);if(se){var Z=Object.getOwnPropertyDescriptor(se,Y);return Z.get?Z.get.call(ne):Z.value}})($,U,G||$)}function O($){var U=typeof Map=="function"?new Map:void 0;return(O=function(G){if(G===null||(V=G,Function.toString.call(V).indexOf("[native code]")===-1))return G;var V;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(U!==void 0){if(U.has(G))return U.get(G);U.set(G,Y)}function Y(){return D(G,arguments,R(this).constructor)}return Y.prototype=Object.create(G.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),N(Y,G)})($)}function D($,U,G){return(D=L()?Reflect.construct:function(V,Y,ne){var se=[null];se.push.apply(se,Y);var Z=new(Function.bind.apply(V,se));return ne&&N(Z,ne.prototype),Z}).apply(null,arguments)}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function N($,U){return(N=Object.setPrototypeOf||function(G,V){return G.__proto__=V,G})($,U)}function R($){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})($)}function z($){$.preventDefault(),$.stopPropagation()}var H=function($){k(G,$);var U=A(G);function G(V,Y,ne){var se,Z,K,ce,ve,De,Oe,Ze,nt,qe;E(this,G),_((Z=P(qe=U.call(this)),R(G.prototype)),"setAttribute",Z).call(Z,"id",V.id);var Re=qe._getMenuItemClassStr(ne.cxtMenuItemClasses,V.hasTrailingDivider);if(_((K=P(qe),R(G.prototype)),"setAttribute",K).call(K,"class",Re),_((ce=P(qe),R(G.prototype)),"setAttribute",ce).call(ce,"title",(se=V.tooltipText)!==null&&se!==void 0?se:""),V.disabled&&f(P(qe),"disabled",!0),V.image){var be=document.createElement("img");be.src=V.image.src,be.width=V.image.width,be.height=V.image.height,be.style.position="absolute",be.style.top=V.image.y+"px",be.style.left=V.image.x+"px",_((ve=P(qe),R(G.prototype)),"appendChild",ve).call(ve,be)}if(qe.innerHTML+=V.content,qe.onMenuItemClick=Y,qe.data={},qe.clickFns=[],qe.selector=V.selector,qe.hasTrailingDivider=V.hasTrailingDivider,qe.show=V.show===void 0||V.show,qe.coreAsWell=V.coreAsWell||!1,qe.scratchpad=ne,V.onClickFunction===void 0&&V.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return qe.onClickFunction=V.onClickFunction,V.submenu instanceof Array&&qe._createSubmenu(V.submenu),_((De=P(qe),R(G.prototype)),"addEventListener",De).call(De,"mousedown",z),_((Oe=P(qe),R(G.prototype)),"addEventListener",Oe).call(Oe,"mouseup",z),_((Ze=P(qe),R(G.prototype)),"addEventListener",Ze).call(Ze,"touchstart",z),_((nt=P(qe),R(G.prototype)),"addEventListener",nt).call(nt,"touchend",z),qe}return x(G,[{key:"bindOnClickFunction",value:function(V){this.clickFns.push(V),_(R(G.prototype),"addEventListener",this).call(this,"click",V)}},{key:"unbindOnClickFunctions",value:function(){var V,Y=w(this.clickFns);try{for(Y.s();!(V=Y.n()).done;){var ne=V.value;_(R(G.prototype),"removeEventListener",this).call(this,"click",ne)}}catch(se){Y.e(se)}finally{Y.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(V){this.hasTrailingDivider=V}},{key:"hasSubmenu",value:function(){return this.submenu instanceof W}},{key:"appendSubmenuItem",value:function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(V,Y)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(V){var Y=this.getBoundingClientRect(),ne=function(ve){ve.style.opacity="0",ve.style.display="block";var De=ve.getBoundingClientRect();return ve.style.opacity="1",ve.style.display="none",De}(this.submenu),se=Y.right+ne.width>window.innerWidth,Z=Y.top+ne.height>window.innerHeight;se||Z?se&&!Z?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):se&&Z?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var K=Array.from(this.submenu.children).filter(function(ve){if(ve instanceof G)return ve.isVisible()}),ce=K.length;K.forEach(function(ve,De){ve instanceof G&&(De<ce-1&&ve.getHasTrailingDivider()?ve.classList.add(g):ve.getHasTrailingDivider()&&ve.classList.remove(g))})}},{key:"_onMouseLeave",value:function(V){var Y,ne,se,Z,K;Y={x:V.clientX,y:V.clientY},ne=this.submenu,Z=Y.y,(se=Y.x)>=(K=ne.getBoundingClientRect()).left&&se<=K.right&&Z>=K.top&&Z<=K.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new W(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var Y,ne=w(V);try{for(ne.s();!(Y=ne.n()).done;){var se=Y.value,Z=new G(se,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(Z)}}catch(K){ne.e(K)}finally{ne.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(V,Y){return Y?V+" "+g:V}}],[{key:"define",value:function(){v("ctx-menu-item",G,"button")}}]),G}(O(HTMLButtonElement)),W=function($){k(G,$);var U=A(G);function G(V,Y){var ne,se;return E(this,G),_((ne=P(se=U.call(this)),R(G.prototype)),"setAttribute",ne).call(ne,"class",Y.cxtMenuClasses),se.style.position="absolute",se.onMenuItemClick=V,se.scratchpad=Y,se}return x(G,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var V,Y=w(this.children);try{for(Y.s();!(V=Y.n()).done;){var ne=V.value;ne instanceof HTMLElement?ne.style.display="none":console.warn("".concat(ne," is not a HTMLElement"))}}catch(se){Y.e(se)}finally{Y.f()}}},{key:"hideSubmenus",value:function(){var V,Y=w(this.children);try{for(Y.s();!(V=Y.n()).done;){var ne=V.value;ne instanceof H&&ne.submenu&&ne.submenu.hide()}}catch(se){Y.e(se)}finally{Y.f()}}},{key:"appendMenuItem",value:function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(Y!==void 0){if(Y.parentNode!==this)throw new Error("The item with id='".concat(Y.id,"' is not a child of the context menu"));this.insertBefore(V,Y)}else this.appendChild(V);V.isClickable()&&this._performBindings(V)}},{key:"moveBefore",value:function(V,Y){if(V.parentNode!==this)throw new Error("The item with id='".concat(V.id,"' is not a child of context menu"));if(Y.parentNode!==this)throw new Error("The item with id='".concat(Y.id,"' is not a child of context menu"));this.removeChild(V),this.insertBefore(V,Y)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var V=this.lastChild;V instanceof H?this._removeImmediateMenuItem(V):(console.warn("Found non menu item in the context menu: ",V),this.removeChild(V))}}},{key:"_removeImmediateMenuItem",value:function(V){if(!this._detachImmediateMenuItem(V))throw new Error("menu item(id=".concat(V.id,") is not in the context menu"));V.detachSubmenu(),V.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(V){if(V.parentNode===this){if(this.removeChild(V),this.children.length<=0){var Y=this.parentNode;Y instanceof H&&Y.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(V){var Y=this._bindOnClick(V.onClickFunction);V.bindOnClickFunction(Y),V.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(V){var Y=this;return function(){var ne=Y.scratchpad.currentCyEvent;V(ne)}}}],[{key:"define",value:function(){v("menu-item-list",G,"div")}}]),G}(O(HTMLDivElement)),X=function($){k(G,$);var U=A(G);function G(V,Y){var ne;return E(this,G),(ne=U.call(this,V,Y)).onMenuItemClick=function(se){z(se),ne.hide(),V()},ne}return x(G,[{key:"removeMenuItem",value:function(V){var Y=V.parentElement;Y instanceof W&&this.contains(Y)&&Y._removeImmediateMenuItem(V)}},{key:"appendMenuItem",value:function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(V.id),_(R(G.prototype),"appendMenuItem",this).call(this,V,Y)}},{key:"insertMenuItem",value:function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=Y.before,se=Y.parent;if(this.ensureDoesntContain(V.id),ne!==void 0){if(!this.contains(ne))throw new Error("before(id=".concat(ne.id,") is not in the context menu"));var Z=ne.parentNode;if(!(Z instanceof W))throw new Error("Parent of before(id=".concat(ne.id,") is not a submenu"));Z.appendMenuItem(V,ne)}else if(se!==void 0){if(!this.contains(se))throw new Error("parent(id=".concat(se.id,") is not a descendant of the context menu"));se.appendSubmenuItem(V)}else this.appendMenuItem(V)}},{key:"moveBefore",value:function(V,Y){var ne=V.parentElement;if(!this.contains(ne))throw new Error("parent(id=".concat(ne.id,") is not in the contex menu"));if(!this.contains(Y))throw new Error("before(id=".concat(Y.id,") is not in the context menu"));ne.removeChild(V),this.insertMenuItem(V,{before:Y})}},{key:"moveToSubmenu",value:function(V){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,se=V.parentElement;if(!(se instanceof W))throw new Error("current parent(id=".concat(se.id,") is not a submenu"));if(!this.contains(se))throw new Error("parent of the menu item(id=".concat(se.id,") is not in the context menu"));if(Y!==null){if(!this.contains(Y))throw new Error("parent(id=".concat(Y.id,") is not in the context menu"));se._detachImmediateMenuItem(V),Y.appendSubmenuItem(V)}else ne!==null&&(V.selector=ne.selector,V.coreAsWell=ne.coreAsWell),se._detachImmediateMenuItem(V),this.appendMenuItem(V)}},{key:"ensureDoesntContain",value:function(V){var Y=document.getElementById(V);if(Y!==void 0&&this.contains(Y))throw new Error("There is already an element with id=".concat(V," in the context menu"))}},{key:"ensureContains",value:function(V){var Y=document.getElementById(V);if(Y==null||Y==null||!this.contains(Y))throw new Error("An element with id '".concat(V,"' does not exist!"))}}],[{key:"define",value:function(){v("ctx-menu",G,"div")}}]),G}(W);function re($,U){var G;if(typeof Symbol>"u"||$[Symbol.iterator]==null){if(Array.isArray($)||(G=function(K,ce){if(K){if(typeof K=="string")return ae(K,ce);var ve=Object.prototype.toString.call(K).slice(8,-1);return ve==="Object"&&K.constructor&&(ve=K.constructor.name),ve==="Map"||ve==="Set"?Array.from(K):ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve)?ae(K,ce):void 0}}($))||U){G&&($=G);var V=0,Y=function(){};return{s:Y,n:function(){return V>=$.length?{done:!0}:{done:!1,value:$[V++]}},e:function(K){throw K},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,se=!0,Z=!1;return{s:function(){G=$[Symbol.iterator]()},n:function(){var K=G.next();return se=K.done,K},e:function(K){Z=!0,ne=K},f:function(){try{se||G.return==null||G.return()}finally{if(Z)throw ne}}}}function ae($,U){(U==null||U>$.length)&&(U=$.length);for(var G=0,V=new Array(U);G<U;G++)V[G]=$[G];return V}function J($){var U=this;U.scratch("cycontextmenus")||U.scratch("cycontextmenus",{});var G,V,Y=function(be){return U.scratch("cycontextmenus")[be]},ne=function(be,Ce){return U.scratch("cycontextmenus")[be]=Ce},se=Y("options"),Z=Y("cxtMenu"),K=function(be){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,Se=ve(be);if(Ce!==void 0){var ke=Oe(Ce);Z.insertMenuItem(Se,{parent:ke})}else Z.insertMenuItem(Se)},ce=function(be){for(var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,Se=0;Se<be.length;Se++)K(be[Se],Ce)},ve=function(be){var Ce=U.scratch("cycontextmenus");return new H(be,Z.onMenuItemClick,Ce)},De=function(){Y("active")&&(Z.removeAllMenuItems(),U.off("tapstart",Y("eventCyTapStart")),U.off(se.evtType,Y("onCxttap")),U.off("viewport",Y("onViewport")),document.removeEventListener("mouseup",Y("hideOnNonCyClick")),Z.parentNode.removeChild(Z),Z=void 0,ne("cxtMenu",void 0),ne("active",!1),ne("anyVisibleChild",!1),ne("onCxttap",void 0),ne("onViewport",void 0),ne("hideOnNonCyClick",void 0))},Oe=function(be){var Ce=document.getElementById(be);if(Ce instanceof H)return Ce;throw new Error("The item with id=".concat(be," is not a menu item"))},Ze=function(){var be,Ce=!1,Se=re(Z.children);try{for(Se.s();!(be=Se.n()).done;){var ke=be.value;if(ke instanceof H&&ke.show&&ke.style.display!="none"){Ce=!0;break}}}catch(Le){Se.e(Le)}finally{Se.f()}Ce?Z.display():Z.hide()};if($!=="get"){H.define(),W.define(),X.define(),se=u(h,$),ne("options",se),Y("active")&&De(),ne("active",!0),ne("submenuIndicatorGen",(function(be){var Ce=document.createElement("img");return Ce.src=be.src,Ce.width=be.width,Ce.height=be.height,Ce.classList.add("cy-context-menus-submenu-indicator"),Ce}).bind(void 0,se.submenuIndicator));var nt=c(se.contextMenuClasses);ne("cxtMenuClasses",nt);var qe=U.scratch("cycontextmenus");Z=new X(function(){return ne("cxtMenuPosition",void 0)},qe),ne("cxtMenu",Z),U.container().appendChild(Z),ne("cxtMenuItemClasses",c(se.menuItemClasses));var Re=se.menuItems;ce(Re),V=function(be){ne("currentCyEvent",be),function(de){var F,oe=U.container(),pe=Y("cxtMenuPosition"),le=de.position||de.cyPosition;if(pe!=le){Z.hideMenuItems(),ne("anyVisibleChild",!1),ne("cxtMenuPosition",le);var ue={top:(F=oe.getBoundingClientRect()).top,left:F.left},Ae=de.renderedPosition||de.cyRenderedPosition,ye=getComputedStyle(oe)["border-width"],ee=parseInt(ye.replace("px",""))||0;ee>0&&(ue.top+=ee,ue.left+=ee);var we=oe.clientHeight,Me=oe.clientWidth,_e=we/2,Be=Me/2;Ae.y>_e&&Ae.x<=Be?(Z.style.left=Ae.x+"px",Z.style.bottom=we-Ae.y+"px",Z.style.right="auto",Z.style.top="auto"):Ae.y>_e&&Ae.x>Be?(Z.style.right=Me-Ae.x+"px",Z.style.bottom=we-Ae.y+"px",Z.style.left="auto",Z.style.top="auto"):Ae.y<=_e&&Ae.x<=Be?(Z.style.left=Ae.x+"px",Z.style.top=Ae.y+"px",Z.style.right="auto",Z.style.bottom="auto"):(Z.style.right=Me-Ae.x+"px",Z.style.top=Ae.y+"px",Z.style.left="auto",Z.style.bottom="auto")}}(be);var Ce,Se=be.target||be.cyTarget,ke=re(Z.children);try{for(ke.s();!(Ce=ke.n()).done;){var Le=Ce.value;Le instanceof H&&(Se===U?Le.coreAsWell:Se.is(Le.selector))&&Le.show&&(Z.display(),ne("anyVisibleChild",!0),Le.display())}}catch(de){ke.e(de)}finally{ke.f()}var je=Array.from(Z.children).filter(function(de){if(de instanceof H)return de.isVisible()}),Te=je.length;je.forEach(function(de,F){de instanceof H&&(F<Te-1&&de.getHasTrailingDivider()?de.classList.add(g):de.getHasTrailingDivider()&&de.classList.remove(g))}),!Y("anyVisibleChild")&&!function(de){return de.offsetWidth<=0&&de.offsetHeight<=0||de.style&&de.style.display||getComputedStyle(de).display}(Z)&&Z.hide()},U.on(se.evtType,V),ne("onCxttap",V),function(){var be=function(Se){if(Z.contains(Se.originalEvent.target))return!1;Z.hide(),ne("cxtMenuPosition",void 0),ne("currentCyEvent",void 0)};U.on("tapstart",be),ne("eventCyTapStart",be);var Ce=function(){Z.hide()};U.on("viewport",Ce),ne("onViewport",Ce)}(),G=function(be){U.container().contains(be.target)||Z.contains(be.target)||(Z.hide(),ne("cxtMenuPosition",void 0))},document.addEventListener("mouseup",G),ne("hideOnNonCyClick",G),function(){var be,Ce=function(Se,ke){var Le;if(typeof Symbol>"u"||Se[Symbol.iterator]==null){if(Array.isArray(Se)||(Le=function(pe,le){if(pe){if(typeof pe=="string")return l(pe,le);var ue=Object.prototype.toString.call(pe).slice(8,-1);return ue==="Object"&&pe.constructor&&(ue=pe.constructor.name),ue==="Map"||ue==="Set"?Array.from(pe):ue==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ue)?l(pe,le):void 0}}(Se))||ke){Le&&(Se=Le);var je=0,Te=function(){};return{s:Te,n:function(){return je>=Se.length?{done:!0}:{done:!1,value:Se[je++]}},e:function(pe){throw pe},f:Te}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var de,F=!0,oe=!1;return{s:function(){Le=Se[Symbol.iterator]()},n:function(){var pe=Le.next();return F=pe.done,pe},e:function(pe){oe=!0,de=pe},f:function(){try{F||Le.return==null||Le.return()}finally{if(oe)throw de}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(Ce.s();!(be=Ce.n()).done;)be.value.addEventListener("contextmenu",function(Se){return Se.preventDefault()})}catch(Se){Ce.e(Se)}finally{Ce.f()}}()}return function(be){return{isActive:function(){return Y("active")},appendMenuItem:function(Ce){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return K(Ce,Se),be},appendMenuItems:function(Ce){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ce(Ce,Se),be},removeMenuItem:function(Ce){var Se=Oe(Ce);return Z.removeMenuItem(Se),be},setTrailingDivider:function(Ce,Se){var ke=Oe(Ce);return ke.setHasTrailingDivider(Se),Se?ke.classList.add(g):ke.classList.remove(g),be},insertBeforeMenuItem:function(Ce,Se){var ke=ve(Ce),Le=Oe(Se);return Z.insertMenuItem(ke,{before:Le}),be},moveToSubmenu:function(Ce){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ke=Oe(Ce);if(Se===null)Z.moveToSubmenu(ke);else if(typeof Se=="string"){var Le=Oe(Se.toString());Z.moveToSubmenu(ke,Le)}else Se.coreAsWell!==void 0||Se.selector!==void 0?Z.moveToSubmenu(ke,null,Se):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return be},moveBeforeOtherMenuItem:function(Ce,Se){var ke=Oe(Ce),Le=Oe(Se);return Z.moveBefore(ke,Le),be},disableMenuItem:function(Ce){return Oe(Ce).disable(),be},enableMenuItem:function(Ce){return Oe(Ce).enable(),be},hideMenuItem:function(Ce){return Oe(Ce).hide(),Ze(),be},showMenuItem:function(Ce){return Oe(Ce).display(),Ze(),be},destroy:function(){return De(),be},getOptions:function(){return u(h,se)},swapItems:function(Ce,Se){Z.ensureContains(Ce),Z.ensureContains(Se);var ke=document.getElementById(Ce),Le=document.getElementById(Se),je=ke.nextSibling,Te=Le.nextSibling,de=ke.parentNode,F=Le.parentNode;if(!de.isSameNode(F))throw new Error("To swap, the items should have the same parent!");je&&je.isSameNode(Le)?de.insertBefore(Le,ke):Te&&Te.isSameNode(ke)?de.insertBefore(ke,Le):(de.insertBefore(Le,ke),de.insertBefore(ke,Te))}}}(this)}},579:(a,o,s)=>{var l=s(621).contextMenus,u=function(c){c&&c("core","contextMenus",l)};typeof cytoscape<"u"&&u(cytoscape),a.exports=u}},r={};function i(a){var o=r[a];if(o!==void 0)return o.exports;var s=r[a]={exports:{}};return n[a](s,s.exports,i),s.exports}return i.d=(a,o)=>{for(var s in o)i.o(o,s)&&!i.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:o[s]})},i.o=(a,o)=>Object.prototype.hasOwnProperty.call(a,o),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i(579)})()})}(Os)),Os.exports}var Bk=Ok();const Rk=Ii(Bk),Nk="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-chevron-right'%3e%3cpolyline%20points='9%2018%2015%2012%209%206'%3e%3c/polyline%3e%3c/svg%3e";vr.use(Rk);const mu={menuItems:[],evtType:"cxttap",submenuIndicator:{src:Nk,width:12,height:12}};class tl{constructor(e,n){Ct(this,"graph");this.graph=e,Ie.debug("Register Context Menu."),mu.menuItems=n,mu.menuItems.forEach(function r(i){tl.addTooltip(i),i.content=ro(i.id),i.submenu&&i.submenu.forEach(a=>r(a))}),e.cy.contextMenus(mu)}static logWrap(e,n){var i;if((i=e==null?void 0:e.onClickFunction)!=null&&i.wrapped)return;const r=e.onClickFunction;e.onClickFunction=a=>{Ie.debug("Context Menu: Operation "+e.content+" on "+n(a)),r(a)},e.onClickFunction.wrapped=!0}static addTooltip(e){(e.submenu??[]).forEach(tl.addTooltip),e.tooltipText=el[e.id]||el[e.id.replace("edge-","")]}}let Fk=0;async function zk(t,e){const n={R:["meta:Role","meta:Function","meta:EntityType"],F:["meta:Function","meta:Role","meta:EntityType"],E:["meta:EntityType","meta:Function","meta:Role"]};if(!(e in n)){Ie.error("Unknown subtop '"+e+"'. Cannot display class use.");return}const[r,i,a]=n[e],o=`select distinct ?inner ?middle ?outer ?outerx
    {
      <${t}> (rdfs:subClassOf|skos:closeMatch|^skos:closeMatch)* ?inner.
      ?inner rdf:type ${r}.
      OPTIONAL
      {
        ?inner ?p ?middle.
        ?middle rdf:type ${i}.
        OPTIONAL
        {
          ?middle ?q ?outer.
          ?outer rdf:type ${a}.
          OPTIONAL {?outer (skos:closeMatch|^skos:closeMatch|^rdfs:subClassOf)+ ?outerx.}
        }
      }
    }`,s=await Ir(o),[l,u,c,f]=[new Set,new Set,new Set,new Set];for(let x=0;x<s.length;x++)l.add(s[x].inner.value),s[x].middle&&u.add(s[x].middle.value),s[x].outer&&c.add(s[x].outer.value),s[x].outerx&&f.add(s[x].outerx.value);if(u.size===0){Ie.warn("Class "+t+" is not used.");return}const g=document.getElementById("combineMatchModeBox").checked;g&&$e.mainView.state.graph.combineMatch(!1);const h=new $e(!0,"Class Use "+ ++Fk+" "+Qn(t));await h.initialized;const m=h.state.graph;m.cy.startBatch(),m.resetStyle(),bt.setVisible(m.cy.elements(),!1),m.starMode=!0;const w=new Set([...l,...u,...c,...f]),b=m.cy.collection(`node[id='${t}']`);for(const x of w){const k=m.cy.nodes(`node[id='${x}']`);b.merge(k)}const E=b.merge(b.edgesWith(b));b.layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:20,concentric:function(x){const k=x.data(Ye.ID);return k===t?10:l.has(k)?9:u.has(k)?8:c.has(k)?7:f.has(k)?6:10}}).run(),bt.setVisible(E,!0),g&&[$e.mainView,h].forEach(x=>x.state.graph.combineMatch(!0));const C=m.cy.nodes(`node[id='${t}']`);m.cy.center(C),m.cy.fit(b),m.cy.endBatch()}const lh=t=>e=>t(e.target);function Hk(t){return[{id:"compound",selector:"node:compound",submenu:[{id:"open",onClickFunction:e=>{e.target.children().move({event:null}),t.cy.remove(e.target)}},{id:"move-match-on-top",onClickFunction:e=>t.moveNodes(e.target.children(),0)},{id:"move-match-nearby",onClickFunction:e=>t.moveNodes(e.target.children(),100)},{id:"compound-star",onClickFunction:e=>t.multiplex(t.showStar,e.target.children(),!0)()},{id:"compound-incoming-star",onClickFunction:e=>t.multiplex(n=>t.showStar(n,!1,mi.IN),e.target.children(),!0)()},{id:"compound-outgoing-star",onClickFunction:e=>t.multiplex(n=>t.showStar(n,!1,mi.OUT),e.target.children(),!0)()},{id:"compound-path-source",onClickFunction:e=>{t.setSource(e.target.children()[0])}}]},{id:"edit",selector:"node",onClickFunction:e=>{const n=e.target,r=`Problem with the class [${Qn(n.data(Ye.ID))}](${n.data(Ye.ID)}):

`;dh(Ue.git.repo.ontology,n.data(Ye.ID),r)}},{id:"class-use",selector:"node",onClickFunction:e=>{const n=e.target;zk(n.data(Ye.ID),n.data(Ye.SUBTOP))}},{id:"hide",selector:"node",onClickFunction:lh(t.multiplex(e=>bt.setVisible(e,!1)))},{id:"set-path-source",selector:"node",onClickFunction:e=>{t.setSource(e.target)}},{id:"description",selector:"node",onClickFunction:e=>{window.open(e.target.data(Ye.ID))}},{id:"star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,mi.BOTH))(e.target)}},{id:"incoming-star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,mi.IN))(e.target)}},{id:"outgoing-star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,mi.OUT))(e.target)}},{id:"path",selector:"node",onClickFunction:e=>t.multiplex(t.showPath(e.target))(t.getSource())},{id:"spiderworm",selector:"node",onClickFunction:e=>t.showWorm(t.getSource(),e.target)},{id:"dev",selector:"node",submenu:[{id:"remove-permanently",selector:"node",onClickFunction:e=>{t.cy.remove(e.target),Jg(e.target)}},{id:"debug",selector:"node",onClickFunction:e=>alert(JSON.stringify(e.target.data(),null,2))}]},{id:"ext",selector:"node",submenu:[{id:"doublestar",selector:"node",onClickFunction:e=>t.multiplex(t.showDoubleStar)(e.target)},{id:"starpath",selector:"node",onClickFunction:e=>t.multiplex(t.showPath(e.target,!0))(t.getSource())},{id:"circlestar",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!0,mi.BOTH,!0))(e.target)}},{id:"lodlive",selector:"node",onClickFunction:e=>{window.open("http://en.lodlive.it/?"+e.target.data(Ye.ID))}},{id:"move-selected",selector:"node",onClickFunction:e=>{t.cy.nodes(":selected").positions(()=>e.target.position())}},{id:"close-match",selector:"node",onClickFunction:lh(t.multiplex(t.showCloseMatch,void 0,!0))},{id:"show-instances",onClickFunction:async e=>{const r=e.target.data(Ye.ID),i=`SELECT ?i STR(SAMPLE(?label)) AS ?l {
        ?i a <${r}>
        OPTIONAL {?i rdfs:label ?label. FILTER(LANGMATCHES(LANG(?label),"${fh()}"))}
        }`;let o=(await Ir(i)).map(s=>s.i.value+" "+(s.l?s.l.value:"")).reduce((s,l)=>s+`
`+l,"");o===""&&(o=`Class ${r} does not have any instances.`),alert(o)}}]}]}function $k(t){return[{id:"edge-edit",selector:"edge",onClickFunction:n=>{const r=n.target,i=`Problem with the edge [${wu(r)}](${r.data(Ht.SOURCE)}):

`;dh(Ue.git.repo.ontology,wu(r),i)}},{id:"edge-hide",selector:"edge",onClickFunction:n=>bt.setVisible(n.target,!1)},{id:"edge-description",selector:"edge",onClickFunction:n=>{const r=n.target;r.data(Ht.AXIOM)?window.open(r.data(Ht.AXIOM)):Ie.warn("There is no description for this edge.")}},{id:"edge-confirm-link",selector:`edge[${Ht.GRAPH} = "http://www.snik.eu/ontology/limes-exact"]`,onClickFunction:n=>tm(n.target)},{id:"edge-dev",selector:"edge",submenu:[{id:"remove-permanently",onClickFunction:n=>{t.cy.remove(n.target),em(n.target)}},{id:"debug",onClickFunction:n=>{alert(JSON.stringify(n.target.data(),null,2))}}]}]}var yu={exports:{}},uh;function Vk(){return uh||(uh=1,function(t,e){(function(n){var r={config:{},container:{},controls:{},errors:{},items:{},utils:{}};r.utils.F=function(){},r.utils.extend=function(i,a){i.prototype=r.utils.createObject(a.prototype),i.prototype.contructor=i},r.utils.createObject=function(i){return typeof Object.create=="function"?Object.create(i):(r.utils.F.prototype=i,new r.utils.F)},r.utils.objectKeys=function(i){var a,o;if(typeof Object.keys=="function")return Object.keys(i);a=[];for(o in i)a.push(o);return a},r.utils.getHashValue=function(i){var a=location.hash.match(new RegExp(i+"=([^&]*)"));return a?a[1]:null},r.utils.getQueryStringParam=function(i){if(window.location.hash)return r.utils.getHashValue(i);if(!window.location.search)return null;var a=window.location.search.substr(1).split("&"),o={},s,l;for(l=0;l<a.length;l++)s=a[l].split("="),o[s[0]]=s[1];return o[i]||null},r.utils.copy=function(i,a){for(var o in a)i[o]=a[o];return i},r.utils.animFrame=function(i){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)})(function(){i()})},r.utils.indexOf=function(i,a){if(!(a instanceof Array))throw new Error("Haystack is not an Array");if(a.indexOf)return a.indexOf(i);for(var o=0;o<a.length;o++)if(a[o]===i)return o;return-1},typeof/./!="function"&&typeof Int8Array!="object"?r.utils.isFunction=function(i){return typeof i=="function"||!1}:r.utils.isFunction=function(i){return toString.call(i)==="[object Function]"},r.utils.fnBind=function(i,a,o){if(Function.prototype.bind!==void 0)return Function.prototype.bind.apply(i,[a].concat(o||[]));var s=function(){var l=(o||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof s))return i.apply(a,l);i.apply(this,l)};return s.prototype=i.prototype,s},r.utils.removeFromArray=function(i,a){var o=r.utils.indexOf(i,a);if(o===-1)throw new Error("Can't remove item from array. Item is not in the array");a.splice(o,1)},r.utils.now=function(){return typeof Date.now=="function"?Date.now():new Date().getTime()},r.utils.getUniqueId=function(){return(Math.random()*1e15).toString(36).replace(".","")},r.utils.filterXss=function(i,a){var o=i.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return a===!0?o:o.replace(/>/g,"&gt;").replace(/</g,"&lt;")},r.utils.stripTags=function(i){return n.trim(i.replace(/(<([^>]+)>)/ig,""))},r.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[r.utils.EventEmitter.ALL_EVENT]=[],this.on=function(i,a,o){if(!r.utils.isFunction(a))throw new Error("Tried to listen to event "+i+" with non-function callback "+a);this._mSubscriptions[i]||(this._mSubscriptions[i]=[]),this._mSubscriptions[i].push({fn:a,ctx:o})},this.emit=function(i){var a,o,s;s=Array.prototype.slice.call(arguments,1);var l=this._mSubscriptions[i];if(l)for(l=l.slice(),a=0;a<l.length;a++)o=l[a].ctx||{},l[a].fn.apply(o,s);s.unshift(i);var u=this._mSubscriptions[r.utils.EventEmitter.ALL_EVENT].slice();for(a=0;a<u.length;a++)o=u[a].ctx||{},u[a].fn.apply(o,s)},this.unbind=function(i,a,o){if(!this._mSubscriptions[i])throw new Error("No subscribtions to unsubscribe for event "+i);var s,l=!1;for(s=0;s<this._mSubscriptions[i].length;s++)(!a||this._mSubscriptions[i][s].fn===a)&&(!o||o===this._mSubscriptions[i][s].ctx)&&(this._mSubscriptions[i].splice(s,1),l=!0);if(l===!1)throw new Error("Nothing to unbind for "+i)},this.off=this.unbind,this.trigger=this.emit},r.utils.EventEmitter.ALL_EVENT="__all",r.utils.DragListener=function(i,a){r.utils.EventEmitter.call(this),this._eElement=n(i),this._oDocument=n(document),this._eBody=n(document.body),this._nButtonCode=a||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=r.utils.fnBind(this.onMouseMove,this),this._fUp=r.utils.fnBind(this.onMouseUp,this),this._fDown=r.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},r.utils.DragListener.timeout=null,r.utils.copy(r.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(i){if(i.preventDefault(),i.button==0||i.type==="touchstart"){var a=this._getCoordinates(i);this._nOriginalX=a.x,this._nOriginalY=a.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(r.utils.fnBind(this._startDrag,this),this._nDelay)}},onMouseMove:function(i){if(this._timeout!=null){i.preventDefault();var a=this._getCoordinates(i);this._nX=a.x-this._nOriginalX,this._nY=a.y-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,i)}},onMouseUp:function(i){this._timeout!=null&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",i,this._nOriginalX+this._nX)))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(i){return i=i.originalEvent&&i.originalEvent.touches?i.originalEvent.touches[0]:i,{x:i.pageX,y:i.pageY}}}),r.LayoutManager=function(i,a){if(!n||typeof n.noConflict!="function"){var o="jQuery is missing as dependency for GoldenLayout. ";throw o+=`Please either expose $ on GoldenLayout's scope (e.g. window) or add "jquery" to `,o+="your paths when using RequireJS/AMD",new Error(o)}r.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":r.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=r.utils.fnBind(this._onResize,this),this._unloadFunction=r.utils.fnBind(this._onUnload,this),this._maximisedItem=null,this._maximisePlaceholder=n('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new r.utils.EventHub(this),this.config=this._createConfig(i),this.container=a,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=n('<div class="lm_drop_tab_placeholder"></div>'),this.isSubWindow===!0&&n("body").css("visibility","hidden"),this._typeToItem={column:r.utils.fnBind(r.items.RowOrColumn,this,[!0]),row:r.utils.fnBind(r.items.RowOrColumn,this,[!1]),stack:r.items.Stack,component:r.items.Component}},r.LayoutManager.__lm=r,r.LayoutManager.minifyConfig=function(i){return new r.utils.ConfigMinifier().minifyConfig(i)},r.LayoutManager.unminifyConfig=function(i){return new r.utils.ConfigMinifier().unminifyConfig(i)},r.utils.copy(r.LayoutManager.prototype,{registerComponent:function(i,a){if(typeof a!="function")throw new Error("Please register a constructor function");if(this._components[i]!==void 0)throw new Error("Component "+i+" is already registered");this._components[i]=a},toConfig:function(i){var a,o,s;if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(i&&!(i instanceof r.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for(a={settings:r.utils.copy({},this.config.settings),dimensions:r.utils.copy({},this.config.dimensions),labels:r.utils.copy({},this.config.labels)},a.content=[],o=function(l,u){var c,f;for(c in u.config)c!=="content"&&(l[c]=u.config[c]);if(u.contentItems.length)for(l.content=[],f=0;f<u.contentItems.length;f++)l.content[f]={},o(l.content[f],u.contentItems[f])},i?o(a,{contentItems:[i]}):o(a,this.root),this._$reconcilePopoutWindows(),a.openPopouts=[],s=0;s<this.openPopouts.length;s++)a.openPopouts.push(this.openPopouts[s].toConfig());return a.maximisedItemId=this._maximisedItem?"__glMaximised":null,a},getComponent:function(i){if(this._components[i]===void 0)throw new r.errors.ConfigurationError('Unknown component "'+i+'"');return this._components[i]},init:function(){if(this._subWindowsCreated===!1&&(this._createSubWindows(),this._subWindowsCreated=!0),document.readyState==="loading"||document.body===null){n(document).ready(r.utils.fnBind(this.init,this));return}if(this.isSubWindow===!0&&this._creationTimeoutPassed===!1){setTimeout(r.utils.fnBind(this.init,this),7),this._creationTimeoutPassed=!0;return}this.isSubWindow===!0&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new r.controls.DropTargetIndicator(this.container),this.transitionIndicator=new r.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),this.emit("initialised")},updateSize:function(i,a){arguments.length===2?(this.width=i,this.height=a):(this.width=this.container.width(),this.height=this.container.height()),this.isInitialised===!0&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){this.isInitialised!==!1&&(this._onUnload(),n(window).off("resize",this._resizeFunction),n(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach(function(i){i._dragListener.destroy(),i._element=null,i._itemConfig=null,i._dragListener=null}),this._dragSources=[])},createContentItem:function(i,a){var o,s;if(typeof i.type!="string")throw new r.errors.ConfigurationError("Missing parameter 'type'",i);if(i.type==="react-component"&&(i.type="component",i.componentName="lm-react-component"),!this._typeToItem[i.type])throw o="Unknown type '"+i.type+"'. Valid types are "+r.utils.objectKeys(this._typeToItem).join(","),new r.errors.ConfigurationError(o);return i.type==="component"&&!(a instanceof r.items.Stack)&&a&&!(this.isSubWindow===!0&&a instanceof r.items.Root)&&(i={type:"stack",width:i.width,height:i.height,content:[i]}),s=new this._typeToItem[i.type](this,i,a),s},createPopout:function(i,a,o,s){var l=i,u=i instanceof r.items.AbstractContentItem,c=this,f,v,g,h,m,w;if(o=o||null,u){for(l=this.toConfig(i).content,o=r.utils.getUniqueId(),h=i.parent,m=i;h.contentItems.length===1&&!h.isRoot;)h=h.parent,m=m.parent;h.addId(o),isNaN(s)&&(s=r.utils.indexOf(m,h.contentItems))}else l instanceof Array||(l=[l]);return!a&&u&&(f=window.screenX||window.screenLeft,v=window.screenY||window.screenTop,g=i.element.offset(),a={left:f+g.left,top:v+g.top,width:i.element.width(),height:i.element.height()}),!a&&!u&&(a={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),u&&i.remove(),w=new r.controls.BrowserPopout(l,a,o,s,this),w.on("initialised",function(){c.emit("windowOpened",w)}),w.on("closed",function(){c._$reconcilePopoutWindows()}),this.openPopouts.push(w),w},createDragSource:function(i,a){this.config.settings.constrainDragToContainer=!1;var o=new r.controls.DragSource(n(i),a,this);return this._dragSources.push(o),o},selectItem:function(i,a){if(this.config.settings.selectionEnabled!==!0)throw new Error("Please set selectionEnabled to true to use this feature");i!==this.selectedItem&&(this.selectedItem!==null&&this.selectedItem.deselect(),i&&a!==!0&&i.select(),this.selectedItem=i,this.emit("selectionChanged",i))},_$maximiseItem:function(i){this._maximisedItem!==null&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=i,this._maximisedItem.addId("__glMaximised"),i.element.addClass("lm_maximised"),i.element.after(this._maximisePlaceholder),this.root.element.prepend(i.element),i.element.width(this.container.width()),i.element.height(this.container.height()),i.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(i){i.element.removeClass("lm_maximised"),i.removeId("__glMaximised"),this._maximisePlaceholder.after(i.element),this._maximisePlaceholder.remove(),i.parent.callDownwards("setSize"),this._maximisedItem=null,i.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(i,a){var o,s,l=1/0,u=null;for(o=0;o<this._itemAreas.length;o++)s=this._itemAreas[o],i>s.x1&&i<s.x2&&a>s.y1&&a<s.y2&&l>s.surface&&(l=s.surface,u=s);return u},_$createRootItemAreas:function(){var i=50,a={y2:0,x2:0,y1:"y2",x1:"x2"};for(var o in a){var s=this.root._$getArea();s.side=o,a[o]?s[o]=s[a[o]]-i:s[o]=i,s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$calculateItemAreas:function(){var i,a,o=this._getAllContentItems();if(this._itemAreas=[],o.length===1){this._itemAreas.push(this.root._$getArea());return}for(this._$createRootItemAreas(),i=0;i<o.length;i++)if(o[i].isStack&&(a=o[i]._$getArea(),a!==null))if(a instanceof Array)this._itemAreas=this._itemAreas.concat(a);else{this._itemAreas.push(a);var s={};r.utils.copy(s,a),r.utils.copy(s,a.contentItem._contentAreaDimensions.header.highlightArea),s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$normalizeContentItem:function(i,a){if(!i)throw new Error("No content item defined");if(r.utils.isFunction(i)&&(i=i()),i instanceof r.items.AbstractContentItem)return i;if(n.isPlainObject(i)&&i.type){var o=this.createContentItem(i,a);return o.callDownwards("_$init"),o}else throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var i=[],a;for(a=0;a<this.openPopouts.length;a++)this.openPopouts[a].getWindow().closed===!1?i.push(this.openPopouts[a]):this.emit("windowClosed",this.openPopouts[a]);this.openPopouts.length!==i.length&&(this.emit("stateChanged"),this.openPopouts=i)},_getAllContentItems:function(){var i=[],a=function(o){if(i.push(o),o.contentItems instanceof Array)for(var s=0;s<o.contentItems.length;s++)a(o.contentItems[s])};return a(this.root),i},_bindEvents:function(){this._isFullPage&&n(window).resize(this._resizeFunction),n(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(r.utils.fnBind(this.updateSize,this),100)},_createConfig:function(i){var a=r.utils.getQueryStringParam("gl-window");a&&(this.isSubWindow=!0,i=localStorage.getItem(a),i=JSON.parse(i),i=new r.utils.ConfigMinifier().unminifyConfig(i),localStorage.removeItem(a)),i=n.extend(!0,{},r.config.defaultConfig,i);var o=function(s){for(var l in s)l!=="props"&&typeof s[l]=="object"?o(s[l]):l==="type"&&s[l]==="react-component"&&(s.type="component",s.componentName="lm-react-component")};return o(i),i.settings.hasHeaders===!1&&(i.dimensions.headerHeight=0),i},_adjustToWindowMode:function(){var i=n('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');i.click(r.utils.fnBind(function(){this.emit("popIn")},this)),document.title=r.utils.stripTags(this.config.content[0].title),n("head").append(n("body link, body style, template, .gl_keep")),this.container=n("body").html("").css("visibility","visible").append(i),document.body.offsetHeight,window.__glInstance=this},_createSubWindows:function(){var i,a;for(i=0;i<this.config.openPopouts.length;i++)a=this.config.openPopouts[i],this.createPopout(a.content,a.dimensions,a.parentId,a.indexInParent)},_setContainer:function(){var i=n(this.container||"body");if(i.length===0)throw new Error("GoldenLayout container not found");if(i.length>1)throw new Error("GoldenLayout more than one container element specified");i[0]===document.body&&(this._isFullPage=!0,n("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=i},_create:function(i){var a;if(!(i.content instanceof Array))throw i.content===void 0?a="Missing setting 'content' on top level of configuration":a="Configuration parameter 'content' must be an array",new r.errors.ConfigurationError(a,i);if(i.content.length>1)throw a="Top level content can't contain more then one element.",new r.errors.ConfigurationError(a,i);this.root=new r.items.Root(this,{content:i.content},this.container),this.root.callDownwards("_$init"),i.maximisedItemId==="__glMaximised"&&this.root.getItemsById(i.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(this.config.settings.closePopoutsOnUnload===!0)for(var i=0;i<this.openPopouts.length;i++)this.openPopouts[i].close()},_adjustColumnsResponsive:function(){if(!this._useResponsiveLayout()||this._updatingColumnsResponsive||!this.config.dimensions||!this.config.dimensions.minItemWidth||this.root.contentItems.length===0||!this.root.contentItems[0].isRow){this._firstLoad=!1;return}this._firstLoad=!1;var i=this.root.contentItems[0].contentItems.length;if(!(i<=1)){var a=this.config.dimensions.minItemWidth,o=i*a;if(!(o<=this.width)){this._updatingColumnsResponsive=!0;for(var s=Math.max(Math.floor(this.width/a),1),l=i-s,u=this.root.contentItems[0],c=this._findAllStackContainers()[0],f=0;f<l;f++){var v=u.contentItems[u.contentItems.length-1];this._addChildContentItemsToContainer(c,v)}this._updatingColumnsResponsive=!1}}},_useResponsiveLayout:function(){return this.config.settings&&(this.config.settings.responsiveMode=="always"||this.config.settings.responsiveMode=="onload"&&this._firstLoad)},_addChildContentItemsToContainer:function(i,a){a.type==="stack"?a.contentItems.forEach(function(o){i.addChild(o),a.removeChild(o,!0)}):a.contentItems.forEach(r.utils.fnBind(function(o){this._addChildContentItemsToContainer(i,o)},this))},_findAllStackContainers:function(){var i=[];return this._findAllStackContainersRecursive(i,this.root),i},_findAllStackContainersRecursive:function(i,a){a.contentItems.forEach(r.utils.fnBind(function(o){o.type=="stack"?i.push(o):o.isComponent||this._findAllStackContainersRecursive(i,o)},this))}}),function(){t.exports=r.LayoutManager}(),r.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},r.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0,responsiveMode:"onload",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in",tabDropdown:"additional tabs"}},r.container.ItemContainer=function(i,a,o){r.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=i.componentName,this.parent=a,this.layoutManager=o,this.isHidden=!1,this._config=i,this._element=n(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},r.utils.copy(r.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),(this.height!=0||this.width!=0)&&this.emit("shown")},setSize:function(i,a){for(var o=this.parent,s=this,l,u,c,f,v,g;!o.isColumn&&!o.isRow;)if(s=o,o=o.parent,o.isRoot)return!1;for(c=o.isColumn?"height":"width",f=c==="height"?a:i,l=this[c]*(1/(s.config[c]/100)),u=f/l*100,v=(s.config[c]-u)/(o.contentItems.length-1),g=0;g<o.contentItems.length;g++)o.contentItems[g]===s?o.contentItems[g].config[c]=u:o.contentItems[g].config[c]+=v;return o.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(i){this.setState(n.extend(!0,this.getState(),i))},setState:function(i){this._config.componentState=i,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(i){this.parent.setTitle(i)},_$setSize:function(i,a){if(i!==this.width||a!==this.height){this.width=i,this.height=a;var o=this._contentElement[0],s=o.offsetWidth-o.clientWidth,l=o.offsetHeight-o.clientHeight;this._contentElement.width(this.width-s).height(this.height-l),this.emit("resize")}}}),r.controls.BrowserPopout=function(i,a,o,s,l){r.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=i,this._dimensions=a,this._parentId=o,this._indexInParent=s,this._layoutManager=l,this._popoutWindow=null,this._id=null,this._createWindow()},r.utils.copy(r.controls.BrowserPopout.prototype,{toConfig:function(){if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch{}},popIn:function(){var i,a;this._indexInParent,this._parentId&&(i=n.extend(!0,{},this.getGlInstance().toConfig()).content[0],a=this._layoutManager.root.getItemsById(this._parentId)[0],a||(this._layoutManager.root.contentItems.length>0?a=this._layoutManager.root.contentItems[0]:a=this._layoutManager.root)),a.addChild(i,this._indexInParent),this.close()},_createWindow:function(){var i,a=this._createUrl(),o=Math.floor(Math.random()*1e6).toString(36),s=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(a,o,s),!this._popoutWindow)if(this._layoutManager.config.settings.blockedPopoutsThrowError===!0){var l=new Error("Popout blocked");throw l.type="popoutBlocked",l}else return;n(this._popoutWindow).on("load",r.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",r.utils.fnBind(this._onClose,this)),i=setInterval(r.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(i))},this),10)},_serializeWindowOptions:function(i){var a=[],o;for(o in i)a.push(o+"="+i[o]);return a.join(",")},_createUrl:function(){var i={content:this._config},a="gl-window-config-"+r.utils.getUniqueId(),o;i=new r.utils.ConfigMinifier().minifyConfig(i);try{localStorage.setItem(a,JSON.stringify(i))}catch(s){throw new Error("Error while writing to localStorage "+s.toString())}return o=document.location.href.split("?"),o.length===1?o[0]+"?gl-window="+a:document.location.href+"&gl-window="+a},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(r.utils.fnBind(this.emit,this,["closed"]),50)}}),r.controls.DragProxy=function(i,a,o,s,l,u){r.utils.EventEmitter.call(this),this._dragListener=o,this._layoutManager=s,this._contentItem=l,this._originalParent=u,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=n(r.controls.DragProxy._template),u&&u._side&&(this._sided=u._sided,this.element.addClass("lm_"+u._side),["right","bottom"].indexOf(u._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:i,top:a}),this.element.find(".lm_tab").attr("title",r.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(l.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),n(document.body).append(this.element);var c=this._layoutManager.container.offset();this._minX=c.left,this._minY=c.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height(),this._setDropPosition(i,a)},r.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',r.utils.copy(r.controls.DragProxy.prototype,{_onDrag:function(i,a,o){o=o.originalEvent&&o.originalEvent.touches?o.originalEvent.touches[0]:o;var s=o.pageX,l=o.pageY,u=s>this._minX&&s<this._maxX&&l>this._minY&&l<this._maxY;!u&&this._layoutManager.config.settings.constrainDragToContainer===!0||this._setDropPosition(s,l)},_setDropPosition:function(i,a){this.element.css({left:i,top:a}),this._area=this._layoutManager._$getArea(i,a),this._area!==null&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(i,a,this._area))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),this._area!==null?this._area.contentItem._$onDrop(this._contentItem,this._area):this._lastValidArea!==null?this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):this._originalParent?this._originalParent.addChild(this._contentItem):this._contentItem._$destroy(),this.element.remove(),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var i=this._layoutManager.config.dimensions,a=i.dragProxyWidth,o=i.dragProxyHeight;this.element.width(a),this.element.height(o),a-=this._sided?i.headerHeight:0,o-=this._sided?0:i.headerHeight,this.childElementContainer.width(a),this.childElementContainer.height(o),this._contentItem.element.width(a),this._contentItem.element.height(o),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),r.controls.DragSource=function(i,a,o){this._element=i,this._itemConfig=a,this._layoutManager=o,this._dragListener=null,this._createDragListener()},r.utils.copy(r.controls.DragSource.prototype,{_createDragListener:function(){this._dragListener!==null&&this._dragListener.destroy(),this._dragListener=new r.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(i,a){var o=this._itemConfig;r.utils.isFunction(o)&&(o=o());var s=this._layoutManager._$normalizeContentItem(n.extend(!0,{},o)),l=new r.controls.DragProxy(i,a,this._dragListener,this._layoutManager,s,null);this._layoutManager.transitionIndicator.transitionElements(this._element,l.element)}}),r.controls.DropTargetIndicator=function(){this.element=n(r.controls.DropTargetIndicator._template),n(document.body).append(this.element)},r.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',r.utils.copy(r.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(i,a,o,s){this.highlightArea({x1:i,y1:a,x2:o,y2:s})},highlightArea:function(i){this.element.css({left:i.x1,top:i.y1,width:i.x2-i.x1,height:i.y2-i.y1}).show()},hide:function(){this.element.hide()}}),r.controls.Header=function(i,a){r.utils.EventEmitter.call(this),this.layoutManager=i,this.element=n(r.controls.Header._template),this.layoutManager.config.settings.selectionEnabled===!0&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",r.utils.fnBind(this._onHeaderClick,this))),this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.parent=a,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=r.utils.fnBind(this._hideAdditionalTabsDropdown,this),n(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,this._createControls()},r.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>','<ul class="lm_tabdropdown_list"></ul>',"</div>"].join(""),r.utils.copy(r.controls.Header.prototype,{createTab:function(i,a){var o,s;for(s=0;s<this.tabs.length;s++)if(this.tabs[s].contentItem===i)return;if(o=new r.controls.Tab(this,i),this.tabs.length===0){this.tabs.push(o),this.tabsContainer.append(o.element);return}a===void 0&&(a=this.tabs.length),a>0?this.tabs[a-1].element.after(o.element):this.tabs[0].element.before(o.element),this.tabs.splice(a,0,o),this._updateTabSizes()},removeTab:function(i){for(var a=0;a<this.tabs.length;a++)if(this.tabs[a].contentItem===i){this.tabs[a]._$destroy(),this.tabs.splice(a,1);return}throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(i){var a,o,s,l;for(a=0;a<this.tabs.length;a++)s=this.tabs[a].contentItem===i,this.tabs[a].setActive(s),s===!0&&(this.activeContentItem=i,this.parent.config.activeItemIndex=a);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&this._lastVisibleTabIndex!==-1&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(l=this.tabs[this.parent.config.activeItemIndex],o=this.parent.config.activeItemIndex;o>0;o--)this.tabs[o]=this.tabs[o-1];this.tabs[0]=l,this.parent.config.activeItemIndex=0}this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},position:function(i){var a=this.parent._header.show;return a&&!this.parent._side&&(a="top"),i!==void 0&&this.parent._header.show!=i&&(this.parent._header.show=i,this.parent._setupHeaderPosition()),a},_$setClosable:function(i){return this.closeButton&&this._isClosable()?(this.closeButton.element[i?"show":"hide"](),!0):!1},_$destroy:function(){this.emit("destroy",this);for(var i=0;i<this.tabs.length;i++)this.tabs[i]._$destroy();n(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(i){if(i in this.parent._header)return this.parent._header[i]},_createControls:function(){var i,a,o,s,l,u,c,f,v;v=r.utils.fnBind(this._showAdditionalTabsDropdown,this),f=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new r.controls.HeaderButton(this,f,"lm_tabdropdown",v),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(a=r.utils.fnBind(this._onPopoutClick,this),o=this._getHeaderSetting("popout"),new r.controls.HeaderButton(this,o,"lm_popout",a)),this._getHeaderSetting("maximise")&&(u=r.utils.fnBind(this.parent.toggleMaximise,this.parent),s=this._getHeaderSetting("maximise"),l=this._getHeaderSetting("minimise"),c=new r.controls.HeaderButton(this,s,"lm_maximise",u),this.parent.on("maximised",function(){c.element.attr("title",l)}),this.parent.on("minimised",function(){c.element.attr("title",s)})),this._isClosable()&&(i=r.utils.fnBind(this.parent.remove,this.parent),o=this._getHeaderSetting("close"),this.closeButton=new r.controls.HeaderButton(this,o,"lm_close",i))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(i){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){this.layoutManager.config.settings.popoutWholeStack===!0?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(i){i.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(i){if(this.tabs.length!==0){this.tabDropdownButton.element.toggle(i===!0);var a=function(C){return C?"width":"height"};this.element.css(a(!this.parent._sided),""),this.element[a(this.parent._sided)](this.layoutManager.config.dimensions.headerHeight);var o=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,s=0,l=0,u,c,f,v,g=0,h,m=this.layoutManager.config.settings.tabOverlapAllowance,w=!1,b=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,E=this.tabs[b];for(this.parent._sided&&(o=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,c=0;c<this.tabs.length;c++)if(u=this.tabs[c].element,this.tabsContainer.append(u),h=u.outerWidth()+parseInt(u.css("margin-right"),10),s+=h,b<=c?l=s:l=s+E.element.outerWidth()+parseInt(E.element.css("margin-right"),10),l>o){if(w)c===b&&(u.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(u));else if(b>0&&b<=c?g=(l-o)/(c-1):g=(l-o)/c,g<m){for(f=0;f<=c;f++)v=f!==b&&f!==0?"-"+g+"px":"",this.tabs[f].element.css({"z-index":c-f,"margin-left":v});this._lastVisibleTabIndex=c,this.tabsContainer.append(u)}else w=!0;if(w&&c!==b)if(i)u.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(u);else{this._updateTabSizes(!0);return}}else this._lastVisibleTabIndex=c,u.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(u)}}}),r.controls.HeaderButton=function(i,a,o,s){this._header=i,this.element=n('<li class="'+o+'" title="'+a+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=s,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},r.utils.copy(r.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),r.controls.Splitter=function(i,a,o){this._isVertical=i,this._size=a,this._grabSize=o<a?a:o,this.element=this._createElement(),this._dragListener=new r.utils.DragListener(this.element)},r.utils.copy(r.controls.Splitter.prototype,{on:function(i,a,o){this._dragListener.on(i,a,o)},_$destroy:function(){this.element.remove()},_createElement:function(){var i=n('<div class="lm_drag_handle"></div>'),a=n('<div class="lm_splitter"></div>');a.append(i);var o=this._grabSize-this._size,s=o/2;return this._isVertical?(i.css("top",-s),i.css("height",this._size+o),a.addClass("lm_vertical"),a.height(this._size)):(i.css("left",-s),i.css("width",this._size+o),a.addClass("lm_horizontal"),a.width(this._size)),a}}),r.controls.Tab=function(i,a){this.header=i,this.contentItem=a,this.element=n(r.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[a.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(a.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,this._layoutManager.config.settings.reorderEnabled===!0&&a.config.reorderEnabled===!0&&(this._dragListener=new r.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=r.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=r.utils.fnBind(this._onCloseClick,this),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},r.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',r.utils.copy(r.controls.Tab.prototype,{setTitle:function(i){this.element.attr("title",r.utils.stripTags(i)),this.titleElement.html(i)},setActive:function(i){i!==this.isActive&&(this.isActive=i,i?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(i,a){this.contentItem.parent.isMaximised===!0&&this.contentItem.parent.toggleMaximise(),new r.controls.DragProxy(i,a,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(i){if(i.button===0||i.type==="touchstart"){var a=this.header.parent.getActiveContentItem();this.contentItem!==a&&this.header.parent.setActiveContentItem(this.contentItem)}else i.button===1&&this.contentItem.config.isClosable&&this._onCloseClick(i)},_onCloseClick:function(i){i.stopPropagation(),this.header.parent.removeChild(this.contentItem)},_onCloseMousedown:function(i){i.stopPropagation()}}),r.controls.TransitionIndicator=function(){this._element=n('<div class="lm_transition_indicator"></div>'),n(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},r.utils.copy(r.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(i,a){},_nextAnimationFrame:function(){var i=this._measure(this._toElement),a=(r.utils.now()-this._animationStartTime)/this._totalAnimationDuration,o={},s;if(a>=1){this._element.hide();return}i.opacity=0;for(s in this._fromDimensions)o[s]=this._fromDimensions[s]+(i[s]-this._fromDimensions[s])*a;this._element.css(o),r.utils.animFrame(r.utils.fnBind(this._nextAnimationFrame,this))},_measure:function(i){var a=i.offset();return{left:a.left,top:a.top,width:i.outerWidth(),height:i.outerHeight()}}}),r.errors.ConfigurationError=function(i,a){Error.call(this),this.name="Configuration Error",this.message=i,this.node=a},r.errors.ConfigurationError.prototype=new Error,r.items.AbstractContentItem=function(i,a,o){r.utils.EventEmitter.call(this),this.config=this._extendItemNode(a),this.type=a.type,this.contentItems=[],this.parent=o,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=i,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(r.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),a.content&&this._createContentItems(a)},r.utils.copy(r.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(i,a,o,s){var l;for(o!==!0&&s!==!0&&this[i].apply(this,a||[]),l=0;l<this.contentItems.length;l++)this.contentItems[l].callDownwards(i,a,o);o===!0&&s!==!0&&this[i].apply(this,a||[])},removeChild:function(i,a){var o=r.utils.indexOf(i,this.contentItems);if(o===-1)throw new Error("Can't remove child item. Unknown content item");a!==!0&&this.contentItems[o]._$destroy(),this.contentItems.splice(o,1),this.config.content.splice(o,1),this.contentItems.length>0?this.callDownwards("setSize"):!(this instanceof r.items.Root)&&this.config.isClosable===!0&&this.parent.removeChild(this)},addChild:function(i,a){a===void 0&&(a=this.contentItems.length),this.contentItems.splice(a,0,i),this.config.content===void 0&&(this.config.content=[]),this.config.content.splice(a,0,i.config),i.parent=this,i.parent.isInitialised===!0&&i.isInitialised===!1&&i._$init()},replaceChild:function(i,a,o){a=this.layoutManager._$normalizeContentItem(a);var s=r.utils.indexOf(i,this.contentItems),l=i.element[0].parentNode;if(s===-1)throw new Error("Can't replace child. oldChild is not child of this");l.replaceChild(a.element[0],i.element[0]),o===!0&&(i.parent=null,i._$destroy()),this.contentItems[s]=a,a.parent=this,this.isStack&&(this.header.tabs[s].contentItem=a),a.parent.isInitialised===!0&&a.isInitialised===!1&&a._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var i=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),i},toggleMaximise:function(i){i&&i.preventDefault(),this.isMaximised===!0?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(i){this.config.title=i,this.emit("titleChanged",i),this.emit("stateChanged")},hasId:function(i){if(this.config.id){if(typeof this.config.id=="string")return this.config.id===i;if(this.config.id instanceof Array)return r.utils.indexOf(i,this.config.id)!==-1}else return!1},addId:function(i){this.hasId(i)||(this.config.id?typeof this.config.id=="string"?this.config.id=[this.config.id,i]:this.config.id instanceof Array&&this.config.id.push(i):this.config.id=i)},removeId:function(i){if(!this.hasId(i))throw new Error("Id not found");if(typeof this.config.id=="string")delete this.config.id;else if(this.config.id instanceof Array){var a=r.utils.indexOf(i,this.config.id);this.config.id.splice(a,1)}},getItemsByFilter:function(i){var a=[],o=function(s){for(var l=0;l<s.contentItems.length;l++)i(s.contentItems[l])===!0&&a.push(s.contentItems[l]),o(s.contentItems[l])};return o(this),a},getItemsById:function(i){return this.getItemsByFilter(function(a){return a.config.id instanceof Array?r.utils.indexOf(i,a.config.id)!==-1:a.config.id===i})},getItemsByType:function(i){return this._$getItemsByProperty("type",i)},getComponentsByName:function(i){var a=this._$getItemsByProperty("componentName",i),o=[],s;for(s=0;s<a.length;s++)o.push(a[s].instance);return o},_$getItemsByProperty:function(i,a){return this.getItemsByFilter(function(o){return o[i]===a})},_$setParent:function(i){this.parent=i},_$highlightDropZone:function(i,a,o){this.layoutManager.dropTargetIndicator.highlightArea(o)},_$onDrop:function(i){this.addChild(i)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(i){var a=this.getItemsByType("stack"),o,s;for(s=0;s<a.length;s++)o=a[s].getActiveContentItem(),o&&o.isComponent&&o.container[i]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(i){i=i||this.element;var a=i.offset(),o=i.width(),s=i.height();return{x1:a.left,y1:a.top,x2:a.left+o,y2:a.top+s,surface:o*s,contentItem:this}},_$init:function(){var i;for(this.setSize(),i=0;i<this.contentItems.length;i++)this.childElementContainer.append(this.contentItems[i].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(i){var a=new r.utils.BubblingEvent(i,this);this.emit(i,a)},_createContentItems:function(i){var a,o;if(!(i.content instanceof Array))throw new r.errors.ConfigurationError("content must be an Array",i);for(o=0;o<i.content.length;o++)a=this.layoutManager.createContentItem(i.content[o],this),this.contentItems.push(a)},_extendItemNode:function(i){for(var a in r.config.itemDefaultConfig)i[a]===void 0&&(i[a]=r.config.itemDefaultConfig[a]);return i},_propagateEvent:function(i,a){a instanceof r.utils.BubblingEvent&&a.isPropagationStopped===!1&&this.isInitialised===!0&&(this.isRoot===!1&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(i,a))},_scheduleEventPropagationToLayoutManager:function(i,a){r.utils.indexOf(i,this._throttledEvents)===-1?this.layoutManager.emit(i,a.origin):this._pendingEventPropagations[i]!==!0&&(this._pendingEventPropagations[i]=!0,r.utils.animFrame(r.utils.fnBind(this._propagateEventToLayoutManager,this,[i,a])))},_propagateEventToLayoutManager:function(i,a){this._pendingEventPropagations[i]=!1,this.layoutManager.emit(i,a)}}),r.items.Component=function(i,a,o){r.items.AbstractContentItem.call(this,i,a,o);var s=i.getComponent(this.config.componentName),l=n.extend(!0,{},this.config.componentState||{});l.componentName=this.config.componentName,this.componentName=this.config.componentName,this.config.title===""&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new r.container.ItemContainer(this.config,this,i),this.instance=new s(this.container,l),this.element=this.container._element},r.utils.extend(r.items.Component,r.items.AbstractContentItem),r.utils.copy(r.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){r.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),r.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),r.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),r.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),r.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),r.items.Root=function(i,a,o){r.items.AbstractContentItem.call(this,i,a,null),this.isRoot=!0,this.type="root",this.element=n('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=o,this._containerElement.append(this.element)},r.utils.extend(r.items.Root,r.items.AbstractContentItem),r.utils.copy(r.items.Root.prototype,{addChild:function(i){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");i=this.layoutManager._$normalizeContentItem(i,this),this.childElementContainer.append(i.element),r.items.AbstractContentItem.prototype.addChild.call(this,i),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(i,a){i=typeof i>"u"?this._containerElement.width():i,a=typeof a>"u"?this._containerElement.height():a,this.element.width(i),this.element.height(a),this.contentItems[0]&&(this.contentItems[0].element.width(i),this.contentItems[0].element.height(a))},_$highlightDropZone:function(i,a,o){this.layoutManager.tabDropPlaceholder.remove(),r.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(i,a){var o;if(i.isComponent&&(o=this.layoutManager.createContentItem({type:"stack",header:i.config.header||{}},this),o._$init(),o.addChild(i),i=o),!this.contentItems.length)this.addChild(i);else{var s=a.side[0]=="x"?"row":"column",l=a.side[0]=="x"?"width":"height",u=a.side[1]=="2",c=this.contentItems[0];if(!c instanceof r.items.RowOrColumn||c.type!=s){var f=this.layoutManager.createContentItem({type:s},this);this.replaceChild(c,f),f.addChild(i,u?0:void 0,!0),f.addChild(c,u?void 0:0,!0),c.config[l]=50,i.config[l]=50,f.callDownwards("setSize")}else{var v=c.contentItems[u?0:c.contentItems.length-1];c.addChild(i,u?0:void 0,!0),v.config[l]*=.5,i.config[l]=v.config[l],c.callDownwards("setSize")}}}}),r.items.RowOrColumn=function(i,a,o,s){r.items.AbstractContentItem.call(this,a,o,s),this.isRow=!i,this.isColumn=i,this.element=n('<div class="lm_item lm_'+(i?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=a.config.dimensions.borderWidth,this._splitterGrabSize=a.config.dimensions.borderGrabWidth,this._isColumn=i,this._dimension=i?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},r.utils.extend(r.items.RowOrColumn,r.items.AbstractContentItem),r.utils.copy(r.items.RowOrColumn.prototype,{addChild:function(i,a,o){var s,l,u,c;if(i=this.layoutManager._$normalizeContentItem(i,this),a===void 0&&(a=this.contentItems.length),this.contentItems.length>0?(c=this._createSplitter(Math.max(0,a-1)).element,a>0?(this.contentItems[a-1].element.after(c),c.after(i.element)):(this.contentItems[0].element.before(c),c.before(i.element))):this.childElementContainer.append(i.element),r.items.AbstractContentItem.prototype.addChild.call(this,i,a),s=1/this.contentItems.length*100,o===!0){this.emitBubblingEvent("stateChanged");return}for(u=0;u<this.contentItems.length;u++)this.contentItems[u]===i?i.config[this._dimension]=s:(l=this.contentItems[u].config[this._dimension]*=(100-s)/100,this.contentItems[u].config[this._dimension]=l);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(i,a){var o=i.config[this._dimension],s=r.utils.indexOf(i,this.contentItems),l=Math.max(s-1,0),u,c;if(s===-1)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[l]&&(this._splitter[l]._$destroy(),this._splitter.splice(l,1)),u=0;u<this.contentItems.length;u++)this.contentItems[u]!==i&&(this.contentItems[u].config[this._dimension]+=o/(this.contentItems.length-1));r.items.AbstractContentItem.prototype.removeChild.call(this,i,a),this.contentItems.length===1&&this.config.isClosable===!0?(c=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,c,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(i,a){var o=i.config[this._dimension];r.items.AbstractContentItem.prototype.replaceChild.call(this,i,a),a.config[this._dimension]=o,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){if(this.isInitialised!==!0){var i;for(r.items.AbstractContentItem.prototype._$init.call(this),i=0;i<this.contentItems.length-1;i++)this.contentItems[i].element.after(this._createSplitter(i).element)}},_setAbsoluteSizes:function(){var i,a=this._calculateAbsoluteSizes();for(i=0;i<this.contentItems.length;i++)a.additionalPixel-i>0&&a.itemSizes[i]++,this._isColumn?(this.contentItems[i].element.width(a.totalWidth),this.contentItems[i].element.height(a.itemSizes[i])):(this.contentItems[i].element.width(a.itemSizes[i]),this.contentItems[i].element.height(a.totalHeight))},_calculateAbsoluteSizes:function(){var i,a=(this.contentItems.length-1)*this._splitterSize,o=this.element.width(),s=this.element.height(),l=0,u,c,f=[];for(this._isColumn?s-=a:o-=a,i=0;i<this.contentItems.length;i++)this._isColumn?c=Math.floor(s*(this.contentItems[i].config.height/100)):c=Math.floor(o*(this.contentItems[i].config.width/100)),l+=c,f.push(c);return u=Math.floor((this._isColumn?s:o)-l),{itemSizes:f,additionalPixel:u,totalWidth:o,totalHeight:s}},_calculateRelativeSizes:function(){var i,a=0,o=[],s=this._isColumn?"height":"width";for(i=0;i<this.contentItems.length;i++)this.contentItems[i].config[s]!==void 0?a+=this.contentItems[i].config[s]:o.push(this.contentItems[i]);if(Math.round(a)===100){this._respectMinItemWidth();return}if(Math.round(a)<100&&o.length>0){for(i=0;i<o.length;i++)o[i].config[s]=(100-a)/o.length;this._respectMinItemWidth();return}if(Math.round(a)>100)for(i=0;i<o.length;i++)o[i].config[s]=50,a+=50;for(i=0;i<this.contentItems.length;i++)this.contentItems[i].config[s]=this.contentItems[i].config[s]/a*100;this._respectMinItemWidth()},_respectMinItemWidth:function(){var i=this.layoutManager.config.dimensions&&this.layoutManager.config.dimensions.minItemWidth||0,a=null,o=[],s=0,l=0,u=0,c=0,f,v,g=[],h;if(!(this._isColumn||!i||this.contentItems.length<=1)){a=this._calculateAbsoluteSizes();for(var m=0;m<this.contentItems.length;m++)this.contentItems[m],c=a.itemSizes[m],c<i?(l+=i-c,h={width:i}):(s+=c-i,h={width:c},o.push(h)),g.push(h);if(!(l===0||l>s)){for(f=l/s,u=l,m=0;m<o.length;m++)h=o[m],v=Math.round((h.width-i)*f),u-=v,h.width-=v;for(u!==0&&(g[g.length-1].width-=u),m=0;m<this.contentItems.length;m++)this.contentItems[m].config.width=g[m].width/a.totalWidth*100}}},_createSplitter:function(i){var a;return a=new r.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize),a.on("drag",r.utils.fnBind(this._onSplitterDrag,this,[a]),this),a.on("dragStop",r.utils.fnBind(this._onSplitterDragStop,this,[a]),this),a.on("dragStart",r.utils.fnBind(this._onSplitterDragStart,this,[a]),this),this._splitter.splice(i,0,a),a},_getItemsForSplitter:function(i){var a=r.utils.indexOf(i,this._splitter);return{before:this.contentItems[a],after:this.contentItems[a+1]}},_getMinimumDimensions:function(i){for(var a=0,o=0,s=0;s<i.length;++s)a=Math.max(i[s].minWidth||0,a),o=Math.max(i[s].minHeight||0,o);return{horizontal:a,vertical:o}},_onSplitterDragStart:function(i){var a=this._getItemsForSplitter(i),o=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],s=this._getMinimumDimensions(a.before.config.content),l=this._isColumn?s.vertical:s.horizontal,u=this._getMinimumDimensions(a.after.config.content),c=this._isColumn?u.vertical:u.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(a.before.element[this._dimension]()-(l||o)),this._splitterMaxPosition=a.after.element[this._dimension]()-(c||o)},_onSplitterDrag:function(i,a,o){var s=this._isColumn?o:a;s>this._splitterMinPosition&&s<this._splitterMaxPosition&&(this._splitterPosition=s,i.element.css(this._isColumn?"top":"left",s))},_onSplitterDragStop:function(i){var a=this._getItemsForSplitter(i),o=a.before.element[this._dimension](),s=a.after.element[this._dimension](),l=(this._splitterPosition+o)/(o+s),u=a.before.config[this._dimension]+a.after.config[this._dimension];a.before.config[this._dimension]=l*u,a.after.config[this._dimension]=(1-l)*u,i.element.css({top:0,left:0}),r.utils.animFrame(r.utils.fnBind(this.callDownwards,this,["setSize"]))}}),r.items.Stack=function(i,a,o){r.items.AbstractContentItem.call(this,i,a,o),this.element=n('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var s=i.config;this._header={show:s.settings.hasHeaders===!0&&a.hasHeaders!==!1,popout:s.settings.showPopoutIcon&&s.labels.popout,maximise:s.settings.showMaximiseIcon&&s.labels.maximise,close:s.settings.showCloseIcon&&s.labels.close,minimise:s.labels.minimise},s.header&&r.utils.copy(this._header,s.header),a.header&&r.utils.copy(this._header,a.header),a.content&&a.content[0]&&a.content[0].header&&r.utils.copy(this._header,a.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=n('<div class="lm_items"></div>'),this.header=new r.controls.Header(i,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},r.utils.extend(r.items.Stack,r.items.AbstractContentItem),r.utils.copy(r.items.Stack.prototype,{setSize:function(){var i,a=this._header.show?this.layoutManager.config.dimensions.headerHeight:0,o=this.element.width()-(this._sided?a:0),s=this.element.height()-(this._sided?0:a);for(this.childElementContainer.width(o),this.childElementContainer.height(s),i=0;i<this.contentItems.length;i++)this.contentItems[i].element.width(o).height(s);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var i,a;if(this.isInitialised!==!0){for(r.items.AbstractContentItem.prototype._$init.call(this),i=0;i<this.contentItems.length;i++)this.header.createTab(this.contentItems[i]),this.contentItems[i]._$hide();if(this.contentItems.length>0){if(a=this.contentItems[this.config.activeItemIndex||0],!a)throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(a)}}},setActiveContentItem:function(i){if(r.utils.indexOf(i,this.contentItems)===-1)throw new Error("contentItem is not a child of this stack");this._activeContentItem!==null&&this._activeContentItem._$hide(),this._activeContentItem=i,this.header.setActiveContentItem(i),i._$show(),this.emit("activeContentItemChanged",i),this.layoutManager.emit("activeContentItemChanged",i),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(i,a){i=this.layoutManager._$normalizeContentItem(i,this),r.items.AbstractContentItem.prototype.addChild.call(this,i,a),this.childElementContainer.append(i.element),this.header.createTab(i,a),this.setActiveContentItem(i),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(i,a){var o=r.utils.indexOf(i,this.contentItems);r.items.AbstractContentItem.prototype.removeChild.call(this,i,a),this.header.removeTab(i),this.header.activeContentItem===i&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(o-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var i,a,o;for(i=this.header._isClosable(),o=0,a=this.contentItems.length;o<a&&i;o++)i=this.contentItems[o].config.isClosable;this.header._$setClosable(i)},_$destroy:function(){r.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(i){if(this._dropSegment==="header"){this._resetHeaderDropZone(),this.addChild(i,this._dropIndex);return}if(this._dropSegment==="body"){this.addChild(i);return}var a=this._dropSegment==="top"||this._dropSegment==="bottom",o=this._dropSegment==="left"||this._dropSegment==="right",s=this._dropSegment==="top"||this._dropSegment==="left",l=a&&this.parent.isColumn||o&&this.parent.isRow,u=a?"column":"row",c=a?"height":"width",f,v,g;i.isComponent&&(v=this.layoutManager.createContentItem({type:"stack",header:i.config.header||{}},this),v._$init(),v.addChild(i),i=v),l?(f=r.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(i,s?f:f+1,!0),this.config[c]*=.5,i.config[c]=this.config[c],this.parent.callDownwards("setSize")):(u=a?"column":"row",g=this.layoutManager.createContentItem({type:u},this),this.parent.replaceChild(this,g),g.addChild(i,s?0:void 0,!0),g.addChild(this,s?void 0:0,!0),this.config[c]=50,i.config[c]=50,g.callDownwards("setSize"))},_$highlightDropZone:function(i,a){var o,s;for(o in this._contentAreaDimensions)if(s=this._contentAreaDimensions[o].hoverArea,s.x1<i&&s.x2>i&&s.y1<a&&s.y2>a){o==="header"?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?a:i)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(o));return}},_$getArea:function(){if(this.element.is(":visible")===!1)return null;var i=r.items.AbstractContentItem.prototype._$getArea,a=i.call(this,this.header.element),o=i.call(this,this.childElementContainer),s=o.x2-o.x1,l=o.y2-o.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},highlightArea:{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}}},this._activeContentItem&&this._activeContentItem.isComponent===!1?a:this.contentItems.length===0?(this._contentAreaDimensions.body={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}},i.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.25,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.5,y2:o.y2}},this._contentAreaDimensions.top={hoverArea:{x1:o.x1+s*.25,y1:o.y1,x2:o.x1+s*.75,y2:o.y1+l*.5},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y1+l*.5}},this._contentAreaDimensions.right={hoverArea:{x1:o.x1+s*.75,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1+s*.5,y1:o.y1,x2:o.x2,y2:o.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:o.x1+s*.25,y1:o.y1+l*.5,x2:o.x1+s*.75,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1+l*.5,x2:o.x2,y2:o.y2}},i.call(this,this.element))},_highlightHeaderDropZone:function(i){var a,o,s=this.header.tabs.length,l=!1,u,c,f,v,g,h,m;if(s===0){g=this.header.element.offset(),this.layoutManager.dropTargetIndicator.highlightArea({x1:g.left,x2:g.left+100,y1:g.top+this.header.element.height()-20,y2:g.top+this.header.element.height()});return}for(a=0;a<s;a++)if(o=this.header.tabs[a].element,f=o.offset(),this._sided?(c=f.top,u=f.left,h=o.height()):(c=f.left,u=f.top,h=o.width()),i>c&&i<c+h){l=!0;break}if(!(l===!1&&i<c)){if(m=c+h/2,i<m?(this._dropIndex=a,o.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(a+1,s),o.after(this.layoutManager.tabDropPlaceholder)),this._sided){placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,this.layoutManager.dropTargetIndicator.highlightArea({x1:u,x2:u+o.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});return}v=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:v,x2:v+this.layoutManager.tabDropPlaceholder.width(),y1:u,y2:u+o.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var i=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=i,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var a=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[a](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(i){var a=this._contentAreaDimensions[i].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(a),this._dropSegment=i}}),r.utils.BubblingEvent=function(i,a){this.name=i,this.origin=a,this.isPropagationStopped=!1},r.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},r.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw new Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},r.utils.copy(r.utils.ConfigMinifier.prototype,{minifyConfig:function(i){var a={};return this._nextLevel(i,a,"_min"),a},unminifyConfig:function(i){var a={};return this._nextLevel(i,a,"_max"),a},_nextLevel:function(i,a,o){var s,l;for(s in i)i instanceof Array&&(s=parseInt(s,10)),i.hasOwnProperty(s)&&(l=this[o](s,this._keys),typeof i[s]=="object"?(a[l]=i[s]instanceof Array?[]:{},this._nextLevel(i[s],a[l],o)):a[l]=this[o](i[s],this._values))},_min:function(i,a){if(typeof i=="string"&&i.length===1)return"___"+i;var o=r.utils.indexOf(i,a);return o===-1?i:o.toString(36)},_max:function(i,a){return typeof i=="string"&&i.length===1?a[parseInt(i,36)]:typeof i=="string"&&i.substr(0,3)==="___"?i[3]:i}}),r.utils.EventHub=function(i){r.utils.EventEmitter.call(this),this._layoutManager=i,this._dontPropagateToParent=null,this._childEventSource=null,this.on(r.utils.EventEmitter.ALL_EVENT,r.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=r.utils.fnBind(this._onEventFromChild,this),n(window).on("gl_child_event",this._boundOnEventFromChild)},r.utils.EventHub.prototype._onEventFromThis=function(){var i=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&i[0]!==this._dontPropagateToParent&&this._propagateToParent(i),this._propagateToChildren(i),this._dontPropagateToParent=null,this._childEventSource=null},r.utils.EventHub.prototype._$onEventFromParent=function(i){this._dontPropagateToParent=i[0],this.emit.apply(this,i)},r.utils.EventHub.prototype._onEventFromChild=function(i){this._childEventSource=i.originalEvent.__gl,this.emit.apply(this,i.originalEvent.__glArgs)},r.utils.EventHub.prototype._propagateToParent=function(i){var a,o="gl_child_event";document.createEvent?(a=window.opener.document.createEvent("HTMLEvents"),a.initEvent(o,!0,!0)):(a=window.opener.document.createEventObject(),a.eventType=o),a.eventName=o,a.__glArgs=i,a.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(a):window.opener.fireEvent("on"+a.eventType,a)},r.utils.EventHub.prototype._propagateToChildren=function(i){var a,o;for(o=0;o<this._layoutManager.openPopouts.length;o++)a=this._layoutManager.openPopouts[o].getGlInstance(),a&&a!==this._childEventSource&&a.eventHub._$onEventFromParent(i)},r.utils.EventHub.prototype.destroy=function(){n(window).off("gl_child_event",this._boundOnEventFromChild)},r.utils.ReactComponentHandler=function(i,a){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=i,this._initialState=a,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},r.utils.copy(r.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(i,a){this._container.setState(a),this._originalComponentWillUpdate.call(this._reactComponent,i,a)},_getReactClass:function(){var i=this._container._config.component,a;if(!i)throw new Error("No react component name. type: react-component needs a field `component`");if(a=this._container.layoutManager.getComponent(i),!a)throw new Error('React component "'+i+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return a},_getReactComponent:function(){var i={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},a=n.extend(i,this._container._config.props);return React.createElement(this._reactClass,a)}})})(window.$)}(yu)),yu.exports}var qk=Vk();const Wk=Ii(qk);function eg(){const t={settings:{selectionEnabled:!0},content:[{type:"stack",content:[]}]},e=new Wk(t);return e.on("selectionChanged ",n=>{Ie.info("SELECTION CHANGED"),Ie.info(n)}),e.on("stackCreated",function(n){e.selectItem(n);const r=Pn("goldenlayout-header"),i=document.importNode(r.content,!0);n.header.controlsContainer.prepend(i),n.on("activeContentItemChanged",()=>{e.selectItem(n)});const a=()=>n.getActiveContentItem().config.componentState,o=()=>a().cy,s=n.header.controlsContainer[0],l=()=>$e.getMenu().separateSubs()&&!a().graph.starMode,u=[[".plussign",()=>{o().zoom(o().zoom()*1.2)}],[".minussign",()=>{o().zoom(o().zoom()/1.2)}],[".addsign",()=>{new $e}],[".recalculatesign",()=>{Vn(o(),Ms,t.defaultSubOntologies,l(),!0)}],[".tightlayoutsign",()=>{Vn(o(),xc,t.defaultSubOntologies,l(),!0)}],[".compoundlayoutsign",()=>{Vn(o(),vp,t.defaultSubOntologies,!1,!0)}]];for(const c of u)s.querySelector(c[0]).addEventListener("click",c[1])}),e.init(),e}let Va=0,bu=null,di=eg();function tg(t,e){const n=[];if(t.type==="component"&&t.componentName!=="Main Graph")return n.push(t),n;for(const r of t.contentItems)n.push(...tg(r));return n}const un=class un{constructor(e=!0,n){Ct(this,"initialized");Ct(this,"state");Ct(this,"cyContainer",document.createElement("div"));Ct(this,"element");Ct(this,"cxtMenu");Ct(this,"menu",null);n!=="undefined"&&Va>0&&un.views().forEach(s=>{if(s.state.title===n){n="Teilmodell "+un.views().length;return}}),n=n??(Va===0?"Main Graph":"Partial Graph "+Va),Va++,this.state={title:n,name:"unnamed"};const r={title:n,type:"component",componentName:n,componentState:this.state,isClosable:un.mainView!==null},i=this;un.mainView!==null&&un.partViews.add(this),di.registerComponent(n,function(s){i.element=s.getElement()[0],s.getElement()[0].appendChild(i.cyContainer),s.on("destroy",()=>{un.partViews.delete(i)})}),di.root.contentItems[0].addChild(r);const a=new bt(i.cyContainer),o=a.cy;this.state.graph=a,this.state.cy=o,this.initialized=e?this.fill():Promise.resolve(),this.initialized.then(()=>{const s=Ep().options;this.state.graph.applyStyle(s.dayMode,s.edgesColorized,s.showProperty),this.recreateContextMenus()})}static views(){return[this.mainView,...this.partViews]}static activeState(){var e,n,r;return(r=(n=(e=di.selectedItem)==null?void 0:e.getActiveContentItem())==null?void 0:n.config)==null?void 0:r.componentState}static activeView(){var e;return(e=di.selectedItem)==null?void 0:e.getActiveContentItem()}async fill(){const e=this.state.graph;if(un.mainView===null)un.mainView=this,this.menu=new Xs,bu=Dk(e),await bu,Ie.debug(`Main view ${this.state.name} loaded with ${e.cy.elements().size()} elements.`);else{await bu,e.cy.add(un.mainView.state.cy.elements()),Ie.debug(`Create view ${this.state.title} with ${e.cy.elements().size()} hidden elements copied from ${un.mainView.state.title}.`);const n=e.cy.elements();bt.setVisible(n,!1),bt.setVisible(n.edgesWith(n),!1),n.removeClass("source"),e.starMode=!0}}recreateContextMenus(){const e=[...Hk(this.state.graph),...$k(this.state.graph)];this.cxtMenu=new tl(this.state.graph,e)}static reset(){const e=tg(di.root);for(const n of e)n.remove();un.partViews.clear(),Va=0,di.destroy(),di=eg()}static getMenu(){return un.mainView.menu}};Ct(un,"mainView",null),Ct(un,"partViews",new Set);let $e=un;var mi=(t=>(t[t.IN=0]="IN",t[t.OUT=1]="OUT",t[t.BOTH=2]="BOTH",t))(mi||{});class bt{constructor(e){Ct(this,"cy");Ct(this,"selectedNode",null);Ct(this,"starMode",!1);Ct(this,"matchComponents",[]);Ct(this,"pathSource",null);Ct(this,"container");Ct(this,"instancesLoaded",!1);const n=ua("graph-init");this.container=e,this.container.style.backgroundColor="black",this.cy=vr({container:e,style:tf.style.concat(rf),wheelSensitivity:.3,minZoom:.02,maxZoom:7}),this.cy.on("select","node",i=>{this.selectedNode=i.target});const r=["resetStyle","presentUri","showPath","showStar","showWorm","showDoubleStar","combineMatch","showCloseMatch","newGraph"];for(const i of r)this[i]=this[i].bind(this);n.stop()}cumulativeSearch(){return(document.getElementById("cumulativeSearchBox")||{}).checked}static setVisible(e,n=!0){if(n)e.removeClass("hidden");else{e.addClass("hidden"),e.removeClass("highlighted");const r=e.nodes().connectedEdges();r.addClass("hidden"),r.removeClass("highlighted")}$e.getMenu().applyOptions()}static starStyle(e){e.removeClass("hidden"),e.select()}resetStyle(){this.starMode=!1,this.cy.startBatch(),this.cy.elements().removeClass("highlighted"),this.cy.elements().removeClass("starmode"),this.cy.elements().removeClass("hidden"),bt.setVisible(this.cy.edges("[p='http://www.w3.org/1999/02/22-rdf-syntax-ns#type']"),!1),this.cy.endBatch()}showPath(e,n){return r=>{if(!r)return Ie.error("No path source."),!1;if(r===e)return Ie.warn(`Path source ${r.data(Ye.ID)} equals target.`),!1;const i=this.cy.elements(".unfiltered"),o=i.aStar({root:r,goal:e}).path;if(o){if(this.cy.startBatch(),this.cy.add(o),n){const s=o.connectedEdges(".unfiltered");o.merge(s),o.merge(s.connectedNodes(".unfiltered"))}bt.starStyle(o),this.starMode?o.select():(this.starMode=!0,bt.setVisible(i.not(o),!1)),this.cy.endBatch()}else return this.starMode||this.resetStyle(),Ie.warn("No path found!"),!1;return!0}}showStarMultiplexed(e=!1,n){return this.multiplex(r=>this.showStar(r,e,n),void 0,!0)}async showStarMultiplexedNew(e=!1,n=2,r=!1){const i=await this.newGraph(r);return o=>(i.multiplex(s=>i.showStar(i.assimilateNodes(s),e,n),i.assimilateNodes(this.cy.nodes(":selected")),!0)(o),i)}showStar(e,n=!1,r){console.log("center",e),this.cy.startBatch();let i=e,a;for(let f=0;f<i.size();)f=i.size(),a=i.connectedEdges(".unfiltered").filter('[pl="closeMatch"]'),i=i.union(a.connectedNodes(".unfiltered"));let o;switch(r){case 0:o=this.cy.elements(".unfiltered").edgesTo(i);break;case 1:o=i.edgesTo(".unfiltered");break;default:o=i.connectedEdges(".unfiltered")}const s=o.connectedNodes(".unfiltered"),l=i.union(s).union(o);l.merge(l.parent()),l.merge(l.children());const u=s.difference(i);(n||!this.starMode)&&(this.starMode=!0,bt.setVisible(this.cy.elements().not(l),!1)),console.log("star",l),bt.starStyle(l),n&&s.sort((v,g)=>{const h=Math.min(v.edgesTo(i).map(w=>w.data("pl").split("").reduce((b,E)=>b+E.charCodeAt(0),0))),m=Math.min(g.edgesTo(i).map(w=>w.data("pl").split("").reduce((b,E)=>b+E.charCodeAt(0),0)));return h-m}).layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:175,concentric:function(v){if(i.contains(v))return 2;if(u.contains(v))return 1;throw new Error("unexpected node in star")}}).run(),this.cy.endBatch(),bt.setVisible(u.edgesWith(this.cy.nodes(".unfiltered").not(".hidden")));const c=this.cy.nodes(":visible");c.size()<100&&this.cy.fit(c,100)}showWorm(e,n){return this.starMode=!0,this.showPath(n)(e)?(this.showStar(n),!0):!1}showDoubleStar(e){const n=this.getSource();return this.showPath(e)?(this.showStar(e),this.showStar(n),!0):!1}assimilate(e){return this.getElementsByIds(e.map(n=>n.id()))}assimilateNodes(e){return this.getElementsByIds(e.map(n=>n.id()))}getElementsByIds(e){const n=this.cy.collection();for(const r of e){const i=this.cy.getElementById(r);n.merge(i)}return n}getSource(){return this.pathSource?this.pathSource:this.selectedNode?(Ie.debug("Path source not set, using selected node"),this.selectedNode):null}setSource(e){return Ie.debug("Setting path source to "+e.data(Ye.ID)),e?e.length!==1?(Ie.error("Invalid source. Length != 1"),!1):(this.pathTarget&&this.cy.resize(),this.pathSource&&this.pathSource.removeClass("source"),this.pathSource===e?(Ie.info("Toggling path source off."),this.pathSource=null,!0):(this.pathSource=e,this.pathSource.addClass("source"),!0)):!1}applyStyle(e,n,r){let i=tf.style;e?(this.container.style.backgroundColor="white",i=i.concat(sm)):(this.container.style.backgroundColor="black",i=i.concat(rf)),n&&(i=i.concat(am)),r&&(i=i.concat(om)),this.cy.style().fromJson(i).update()}presentUri(e){this.cy.zoom(.6);const n=this.cy.elements().nodes().filter(`node[id= "${e}"]`);if(n.length<1)return Ie.warn(`Node not in graph. ${e} may be available on the SPARQL endpoint but not in the graph.`),!1;const r=n[0];return r.hasClass("filtered")?(Ie.warn(`Node is filtered out. ${e} is not visible. Please adjust filters.`),!1):(r.hasClass("hidden")&&(Ie.debug(`Node is hidden. Unhiding ${e}.`),bt.setVisible(r,!0),bt.setVisible(r.edgesWith(this.cy.nodes(":visible")),!0)),this.starMode||this.cumulativeSearch()||this.resetStyle(),this.cy.elements().unselect(),r.select(),this.cy.center(r),!0)}presentUris(e,n=!1){if(e.length<1)return Ie.warn("All search results are only available on the SPARQL endpoint but not in the graph."),!1;this.cumulativeSearch()||this.resetStyle();const r=this.cy.elements().nodes().filter(i=>e.includes(i.data(Ye.ID)));return n&&(bt.setVisible(this.cy.elements(),!1),bt.setVisible(r.union(r.edgesTo(r)),!0),this.starMode=!0),this.cy.elements().unselect(),r.select(),r.edgesTo(r).select(),this.cy.fit(this.cy.elements(":selected")),!0}multiplex(e,n,r){return i=>{const a=this.cy.nodes(":selected");let o=n;if(!n&&a.size()>1&&(o=a),o)if(i&&(o=o.union(i)),Ie.debug("multiplexing of "+o.size()+" elements (direct="+r+")"),r)e(o);else for(let s=0;s<o.length;s++)e(o[s]);else e(i)}}moveAllMatches(e){for(let n=0;n<this.matchComponents.length;n++){const r=this.matchComponents[n];r.length!==1&&this.moveNodes(r.nodes(),e)}}moveNodes(e,n){e.positions(e[0].position());for(let r=1;r<e.length;r++)e[r].shift({x:n*Math.cos(2*Math.PI*r/(e.length-1)),y:n*Math.sin(2*Math.PI*r/(e.length-1))})}async combineMatch(e){await io(()=>{if(!e){this.cy.startBatch(),this.cy.nodes(":child").move({parent:null}),this.cy.nodes("[id ^= 'parent']").remove(),this.matchComponents.length=0,this.cy.endBatch();return}this.cy.startBatch();const n=this.cy.edges('[pl="closeMatch"]').filter(".unfiltered").not(".hidden"),r=this.cy.nodes(".unfiltered").not(".hidden").union(n);!this.moveMatchNotified&&this.cy.nodes(":visible").size()>1e3&&(Ie.info("Combining Matches. Consider using Move Matches Nearby or Move Matches on top of each other."),this.moveMatchNotified=!0),this.matchComponents.length=0,this.matchComponents.push(...r.components());for(let i=0;i<this.matchComponents.length;i++){const a=this.matchComponents[i];if(a.length===1)continue;const o="parent"+i,s={};let l=a.nodes();for(let f=0;f<l.length;f++){const v=l[f].data("l");for(const g in v)s[g]||(s[g]=new Set),v[g].forEach(h=>s[g].add(h))}for(const f in s)s[f]=[[...s[f]].reduce((v,g)=>v+", "+g)];const u=["bb","ob","he","it4it","ciox","bb2"],c=f=>{let v=u.indexOf(f);return v===-1&&(v=99),v};l=l.sort((f,v)=>c(f.data(Ye.SOURCE))-c(v.data(Ye.SOURCE))),this.cy.add({group:"nodes",data:{id:o,l:s}});for(let f=0;f<l.length;f++)l[f].move({parent:o})}this.cy.endBatch()})}showCloseMatch(e){const n=e.connectedEdges(".unfiltered").filter('[pl="closeMatch"]'),r=n.connectedNodes(".unfiltered");Ie.debug(`Showing close matches of ${e.length} nodes ${JSON.stringify(e.map(a=>a.id()))}.
Results: ${JSON.stringify(r.map(a=>a.id()))}`);const i=r.union(n);bt.setVisible(i,!0),bt.starStyle(i)}async newGraph(e=!1){if(!e&&this!==$e.mainView.state.graph)return this;const n=new $e(!0);return await n.initialized,n.state.graph}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zn=function(){return zn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zn.apply(this,arguments)},Uk=function(){function t(e){this.options=e,this.listeners={}}return t.prototype.on=function(e,n){var r=this.listeners[e]||[];this.listeners[e]=r.concat([n])},t.prototype.triggerEvent=function(e,n){var r=this,i=this.listeners[e]||[];i.forEach(function(a){return a({target:r,event:n})})},t}(),la;(function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"})(la||(la={}));var Gk=function(){function t(){this.notifications=[]}return t.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,la.Add,this.notifications)},t.prototype.splice=function(e,n){var r=this.notifications.splice(e,n)[0];return this.updateFn(r,la.Remove,this.notifications),r},t.prototype.indexOf=function(e){return this.notifications.indexOf(e)},t.prototype.onUpdate=function(e){this.updateFn=e},t}(),$r;(function(t){t.Dismiss="dismiss",t.Click="click"})($r||($r={}));var ch={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},jk=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),n=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(n),document.body.appendChild(e),this.container=n,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(e,n){var r;this.events=zn(zn({},this.events),(r={},r[e]=n,r))},t.prototype.update=function(e,n){n===la.Add?this.addNotification(e):n===la.Remove&&this.removeNotification(e)},t.prototype.removeNotification=function(e){var n=this,r=this._popRenderedNotification(e),i;if(r){i=r.node,i.classList.add("notyf__toast--disappear");var a;i.addEventListener(this.animationEndEventName,a=function(o){o.target===i&&(i.removeEventListener(n.animationEndEventName,a),n.container.removeChild(i))})}},t.prototype.addNotification=function(e){var n=this._renderNotification(e);this.notifications.push({notification:e,node:n}),this._announce(e.options.message||"Notification")},t.prototype._renderNotification=function(e){var n,r=this._buildNotificationCard(e),i=e.options.className;return i&&(n=r.classList).add.apply(n,i.split(" ")),this.container.appendChild(r),r},t.prototype._popRenderedNotification=function(e){for(var n=-1,r=0;r<this.notifications.length&&n<0;r++)this.notifications[r].notification===e&&(n=r);if(n!==-1)return this.notifications.splice(n,1)[0]},t.prototype.getXPosition=function(e){var n;return((n=e==null?void 0:e.position)===null||n===void 0?void 0:n.x)||"right"},t.prototype.getYPosition=function(e){var n;return((n=e==null?void 0:e.position)===null||n===void 0?void 0:n.y)||"bottom"},t.prototype.adjustContainerAlignment=function(e){var n=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],r=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],i=this.container.style;i.setProperty("justify-content",r),i.setProperty("align-items",n)},t.prototype._buildNotificationCard=function(e){var n=this,r=e.options,i=r.icon;this.adjustContainerAlignment(r);var a=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),s=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),l=this._createHTMLElement({tagName:"div",className:"notyf__message"});l.innerHTML=r.message||"";var u=r.background||r.backgroundColor;if(i){var c=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof i=="string"||i instanceof String)&&(c.innerHTML=new String(i).valueOf()),typeof i=="object"){var f=i.tagName,v=f===void 0?"i":f,g=i.className,h=i.text,m=i.color,w=m===void 0?u:m,b=this._createHTMLElement({tagName:v,className:g,text:h});w&&(b.style.color=w),c.appendChild(b)}s.appendChild(c)}if(s.appendChild(l),a.appendChild(s),u&&(r.ripple?(o.style.background=u,a.appendChild(o)):a.style.background=u),r.dismissible){var E=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),C=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});E.appendChild(C),s.appendChild(E),a.classList.add("notyf__toast--dismissible"),C.addEventListener("click",function(k){var A,p;(p=(A=n.events)[$r.Dismiss])===null||p===void 0||p.call(A,{target:e,event:k}),k.stopPropagation()})}a.addEventListener("click",function(k){var A,p;return(p=(A=n.events)[$r.Click])===null||p===void 0?void 0:p.call(A,{target:e,event:k})});var x=this.getYPosition(r)==="top"?"upper":"lower";return a.classList.add("notyf__toast--"+x),a},t.prototype._createHTMLElement=function(e){var n=e.tagName,r=e.className,i=e.text,a=document.createElement(n);return r&&(a.className=r),a.textContent=i||null,a},t.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},t.prototype._announce=function(e){var n=this;this.a11yContainer.textContent="",setTimeout(function(){n.a11yContainer.textContent=e},100)},t.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),n={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},r;for(r in n)if(e.style[r]!==void 0)return n[r];return"animationend"},t}(),Kk=function(){function t(e){var n=this;this.dismiss=this._removeNotification,this.notifications=new Gk,this.view=new jk;var r=this.registerTypes(e);this.options=zn(zn({},ch),e),this.options.types=r,this.notifications.onUpdate(function(i,a){return n.view.update(i,a)}),this.view.on($r.Dismiss,function(i){var a=i.target,o=i.event;n._removeNotification(a),a.triggerEvent($r.Dismiss,o)}),this.view.on($r.Click,function(i){var a=i.target,o=i.event;return a.triggerEvent($r.Click,o)})}return t.prototype.error=function(e){var n=this.normalizeOptions("error",e);return this.open(n)},t.prototype.success=function(e){var n=this.normalizeOptions("success",e);return this.open(n)},t.prototype.open=function(e){var n=this.options.types.find(function(a){var o=a.type;return o===e.type})||{},r=zn(zn({},n),e);this.assignProps(["ripple","position","dismissible"],r);var i=new Uk(r);return this._pushNotification(i),i},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(e,n){var r=this;e.forEach(function(i){n[i]=n[i]==null?r.options[i]:n[i]})},t.prototype._pushNotification=function(e){var n=this;this.notifications.push(e);var r=e.options.duration!==void 0?e.options.duration:this.options.duration;r&&setTimeout(function(){return n._removeNotification(e)},r)},t.prototype._removeNotification=function(e){var n=this.notifications.indexOf(e);n!==-1&&this.notifications.splice(n,1)},t.prototype.normalizeOptions=function(e,n){var r={type:e};return typeof n=="string"?r.message=n:typeof n=="object"&&(r=zn(zn({},r),n)),r},t.prototype.registerTypes=function(e){var n=(e&&e.types||[]).slice(),r=ch.types.map(function(i){var a=-1;n.forEach(function(s,l){s.type===i.type&&(a=l)});var o=a!==-1?n.splice(a,1)[0]:{};return zn(zn({},i),o)});return r.concat(n)},t}();function Xk(){const t=new Kk({duration:1e4,types:[{type:"warn",backgroundColor:"orange",icon:{className:"material-icons",tagName:"i",text:"warning"}},{type:"info",backgroundColor:"green",icon:{className:"material-icons",tagName:"i",text:"info"}},{type:"debug",backgroundColor:"blue",icon:{className:"material-icons",tagName:"i",text:"debug"}},{type:"trace",backgroundColor:"darkgray",icon:{className:"material-icons",tagName:"i",text:"trace"}}]});Ie.setLevel(Ue.logLevelConsole);const e=["error","warn","info","debug","trace"],n={silent:0,error:1,warn:2,info:3,debug:4,trace:5};for(const r of e){const i=Ie[r];Ie[r]=a=>{i(a),n[r]<=n[Ue.logLevelMemory]&&(Ie.logs||(Ie.logs=[]),Ie.logs.push(a)),n[r]<=n[Ue.logLevelDisplay]&&t.open({type:r,message:a})}}}const qa=[];function Yk(){document.documentElement.addEventListener("keydown",t=>{const e=t.target;if(!e||e.nodeName!=="BODY")return;const n=$e.activeState();if(n){if((t.code==="Delete"||t.code==="Backspace")&&n.cy.remove(":selected"),t.code==="KeyS"||t.code==="KeyC"){const r=n.cy.nodes(":selected");if(r.size()===0)return;qa.length=0,qa.push(...r.map(i=>i.id())),Ie.debug(`Copied ${qa.length} elements from ${n.name}.`),Ie.info("Partial graph copied!")}if(t.code==="KeyP"||t.code==="KeyV"){n.cy.startBatch(),n.cy.elements().unselect();const r=n.graph.getElementsByIds(qa);bt.setVisible(r,!0),n.cy.endBatch();const i=n.cy.nodes(".unfiltered").not(".hidden"),a=r.edgesWith(i),o=r.union(a);bt.setVisible(o,!0),o.select(),n.cy.fit(n.cy.elements(".unfiltered").not(".hidden")),Ie.debug(`Pasted ${qa.length} elements into ${n.name}.`),Ie.info("Partial graph inserted!")}}})}async function Zk(){if(window.mainCalled){Ie.warn("main() is called multiple times for unknown reasons. Ignoring.");return}window.mainCalled=!0,console.groupCollapsed("Initializing"),console.time("Initializing"),Xk(),Yk(),Yn.init({openTrigger:"data-custom-open"});for(let t=0;t<Ue.multiview.initialTabs;t++)await new $e().initialized;console.timeEnd("Initializing"),console.groupEnd()}document.addEventListener("DOMContentLoaded",Zk);
//# sourceMappingURL=main-CVH_fnl3.js.map
