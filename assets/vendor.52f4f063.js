var th=Object.defineProperty;var ms=Object.getOwnPropertySymbols;var rh=Object.prototype.hasOwnProperty,nh=Object.prototype.propertyIsEnumerable;var ys=(t,e,r)=>e in t?th(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Er=(t,e)=>{for(var r in e||(e={}))rh.call(e,r)&&ys(t,r,e[r]);if(ms)for(var r of ms(e))nh.call(e,r)&&ys(t,r,e[r]);return t};var Ke=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Do(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cl={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.log=r()})(Ke,function(){var e=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function i(p,m){var g=p[m];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(p){return p==="debug"&&(p="log"),typeof console===r?!1:p==="trace"&&n?o:console[p]!==void 0?i(console,p):console.log!==void 0?i(console,"log"):e}function u(p,m){for(var g=0;g<a.length;g++){var b=a[g];this[b]=g<p?e:this.methodFactory(b,p,m)}this.log=this.debug}function l(p,m,g){return function(){typeof console!==r&&(u.call(this,m,g),this[p].apply(this,arguments))}}function c(p,m,g){return s(p)||l.apply(this,arguments)}function f(p,m,g){var b=this,w;m=m==null?"WARN":m;var y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function _(C){var k=(a[C]||"silent").toUpperCase();if(!(typeof window===r||!y)){try{window.localStorage[y]=k;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+k+";"}catch{}}}function E(){var C;if(!(typeof window===r||!y)){try{C=window.localStorage[y]}catch{}if(typeof C===r)try{var k=window.document.cookie,D=k.indexOf(encodeURIComponent(y)+"=");D!==-1&&(C=/^([^;]+)/.exec(k.slice(D))[1])}catch{}return b.levels[C]===void 0&&(C=void 0),C}}function x(){if(!(typeof window===r||!y)){try{window.localStorage.removeItem(y);return}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}b.name=p,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=g||c,b.getLevel=function(){return w},b.setLevel=function(C,k){if(typeof C=="string"&&b.levels[C.toUpperCase()]!==void 0&&(C=b.levels[C.toUpperCase()]),typeof C=="number"&&C>=0&&C<=b.levels.SILENT){if(w=C,k!==!1&&_(C),u.call(b,C,p),typeof console===r&&C<b.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+C},b.setDefaultLevel=function(C){m=C,E()||b.setLevel(C,!1)},b.resetLevel=function(){b.setLevel(m,!1),x()},b.enableAll=function(C){b.setLevel(b.levels.TRACE,C)},b.disableAll=function(C){b.setLevel(b.levels.SILENT,C)};var S=E();S==null&&(S=m),b.setLevel(S,!1)}var d=new f,v={};d.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var g=v[m];return g||(g=v[m]=new f(m,d.getLevel(),d.methodFactory)),g};var h=typeof window!==r?window.log:void 0;return d.noConflict=function(){return typeof window!==r&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return v},d.default=d,d})})(cl);var R1=cl.exports,Va=globalThis&&globalThis.__assign||function(){return Va=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Va.apply(this,arguments)},ah={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},N1=function(){function t(e){e===void 0&&(e={}),this.opts=Va(Va({},ah),e)}return t.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),no(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),ih(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&(typeof requestAnimationFrame!="undefined"?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function no(t,e){for(var r in e)t.style[r]=e[r];return t}function bs(t,e){return typeof t=="string"?t:t[e%t.length]}function ih(t,e){var r=Math.round(e.corners*e.width*500)/1e3+"px",n="none";e.shadow===!0?n="0 2px 4px #000":typeof e.shadow=="string"&&(n=e.shadow);for(var a=oh(n),i=0;i<e.lines;i++){var o=~~(360/e.lines*i+e.rotate),s=no(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:bs(e.fadeColor,i),borderRadius:r,transformOrigin:"left",transform:"rotate("+o+"deg) translateX("+e.radius+"px)"}),u=i*e.direction/e.lines/e.speed;u-=1/e.speed;var l=no(document.createElement("div"),{width:"100%",height:"100%",background:bs(e.color,i),borderRadius:r,boxShadow:sh(a,o),animation:1/e.speed+"s linear "+u+"s infinite "+e.animation});s.appendChild(l),t.appendChild(s)}}function oh(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,r=[],n=0,a=t.split(",");n<a.length;n++){var i=a[n],o=i.match(e);if(o!==null){var s=+o[2],u=+o[5],l=o[4],c=o[7];s===0&&!l&&(l=c),u===0&&!c&&(c=l),l===c&&r.push({prefix:o[1]||"",x:s,y:u,xUnits:l,yUnits:c,end:o[8]})}}return r}function sh(t,e){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n],o=uh(i.x,i.y,e);r.push(i.prefix+o[0]+i.xUnits+" "+o[1]+i.yUnits+i.end)}return r.join(", ")}function uh(t,e,r){var n=r*Math.PI/180,a=Math.sin(n),i=Math.cos(n);return[Math.round((t*i+e*a)*1e3)/1e3,Math.round((-t*a+e*i)*1e3)/1e3]}function lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ya(t){return function(e){if(Array.isArray(e))return Ii(e)}(t)||function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,r){if(!!e){if(typeof e=="string")return Ii(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ii(e,r)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ii(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ws,Mi,Cr,Ai,xs,ch=(ws=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Mi=function(){function t(n){var a=n.targetModal,i=n.triggers,o=i===void 0?[]:i,s=n.onShow,u=s===void 0?function(){}:s,l=n.onClose,c=l===void 0?function(){}:l,f=n.openTrigger,d=f===void 0?"data-micromodal-trigger":f,v=n.closeTrigger,h=v===void 0?"data-micromodal-close":v,p=n.openClass,m=p===void 0?"is-open":p,g=n.disableScroll,b=g!==void 0&&g,w=n.disableFocus,y=w!==void 0&&w,_=n.awaitCloseAnimation,E=_!==void 0&&_,x=n.awaitOpenAnimation,S=x!==void 0&&x,C=n.debugMode,k=C!==void 0&&C;(function(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")})(this,t),this.modal=document.getElementById(a),this.config={debugMode:k,disableScroll:b,openTrigger:d,closeTrigger:h,openClass:m,onShow:u,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:S,disableFocus:y},o.length>0&&this.registerTriggers.apply(this,ya(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,r;return e=t,(r=[{key:"registerTriggers",value:function(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];i.filter(Boolean).forEach(function(s){s.addEventListener("click",function(u){return n.showModal(u)})})}},{key:"showModal",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var i=function o(){n.modal.removeEventListener("animationend",o,!1),n.setFocusToFirstNode()};this.modal.addEventListener("animationend",i,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,a)}},{key:"closeModal",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,n),this.config.awaitCloseAnimation){var i=this.config.openClass;this.modal.addEventListener("animationend",function o(){a.classList.remove(i),a.removeEventListener("animationend",o,!1)},!1)}else a.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(n){this.modal=document.getElementById(n),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(n){if(this.config.disableScroll){var a=document.querySelector("body");switch(n){case"enable":Object.assign(a.style,{overflow:""});break;case"disable":Object.assign(a.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(n){(n.target.hasAttribute(this.config.closeTrigger)||n.target.parentNode.hasAttribute(this.config.closeTrigger))&&(n.preventDefault(),n.stopPropagation(),this.closeModal(n))}},{key:"onKeydown",value:function(n){n.keyCode===27&&this.closeModal(n),n.keyCode===9&&this.retainFocus(n)}},{key:"getFocusableNodes",value:function(){var n=this.modal.querySelectorAll(ws);return Array.apply(void 0,ya(n))}},{key:"setFocusToFirstNode",value:function(){var n=this;if(!this.config.disableFocus){var a=this.getFocusableNodes();if(a.length!==0){var i=a.filter(function(o){return!o.hasAttribute(n.config.closeTrigger)});i.length>0&&i[0].focus(),i.length===0&&a[0].focus()}}}},{key:"retainFocus",value:function(n){var a=this.getFocusableNodes();if(a.length!==0)if(a=a.filter(function(o){return o.offsetParent!==null}),this.modal.contains(document.activeElement)){var i=a.indexOf(document.activeElement);n.shiftKey&&i===0&&(a[a.length-1].focus(),n.preventDefault()),!n.shiftKey&&a.length>0&&i===a.length-1&&(a[0].focus(),n.preventDefault())}else a[0].focus()}}])&&lh(e.prototype,r),t}(),Cr=null,Ai=function(t){if(!document.getElementById(t))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(t,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(t,'"></div>')),!1},xs=function(t,e){if(function(n){n.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(t),!e)return!0;for(var r in e)Ai(r);return!0},{init:function(t){var e=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),r=ya(document.querySelectorAll("[".concat(e.openTrigger,"]"))),n=function(o,s){var u=[];return o.forEach(function(l){var c=l.attributes[s].value;u[c]===void 0&&(u[c]=[]),u[c].push(l)}),u}(r,e.openTrigger);if(e.debugMode!==!0||xs(r,n)!==!1)for(var a in n){var i=n[a];e.targetModal=a,e.triggers=ya(i),Cr=new Mi(e)}},show:function(t,e){var r=e||{};r.targetModal=t,r.debugMode===!0&&Ai(t)===!1||(Cr&&Cr.removeEventListeners(),(Cr=new Mi(r)).showModal())},close:function(t){t?Cr.closeModalById(t):Cr.closeModal()}});typeof window!="undefined"&&(window.MicroModal=ch);var fh="Expected a function",Es=0/0,hh="[object Symbol]",dh=/^\s+|\s+$/g,vh=/^[-+]0x[0-9a-f]+$/i,ph=/^0b[01]+$/i,gh=/^0o[0-7]+$/i,mh=parseInt,yh=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,bh=typeof self=="object"&&self&&self.Object===Object&&self,wh=yh||bh||Function("return this")(),xh=Object.prototype,Eh=xh.toString,Ch=Math.max,_h=Math.min,Pi=function(){return wh.Date.now()};function Sh(t,e,r){var n,a,i,o,s,u,l=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(fh);e=Cs(e)||0,ao(r)&&(c=!!r.leading,f="maxWait"in r,i=f?Ch(Cs(r.maxWait)||0,e):i,d="trailing"in r?!!r.trailing:d);function v(E){var x=n,S=a;return n=a=void 0,l=E,o=t.apply(S,x),o}function h(E){return l=E,s=setTimeout(g,e),c?v(E):o}function p(E){var x=E-u,S=E-l,C=e-x;return f?_h(C,i-S):C}function m(E){var x=E-u,S=E-l;return u===void 0||x>=e||x<0||f&&S>=i}function g(){var E=Pi();if(m(E))return b(E);s=setTimeout(g,p(E))}function b(E){return s=void 0,d&&n?v(E):(n=a=void 0,o)}function w(){s!==void 0&&clearTimeout(s),l=0,n=u=a=s=void 0}function y(){return s===void 0?o:b(Pi())}function _(){var E=Pi(),x=m(E);if(n=arguments,a=this,u=E,x){if(s===void 0)return h(u);if(f)return s=setTimeout(g,e),v(u)}return s===void 0&&(s=setTimeout(g,e)),o}return _.cancel=w,_.flush=y,_}function ao(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Th(t){return!!t&&typeof t=="object"}function Dh(t){return typeof t=="symbol"||Th(t)&&Eh.call(t)==hh}function Cs(t){if(typeof t=="number")return t;if(Dh(t))return Es;if(ao(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ao(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(dh,"");var r=ph.test(t);return r||gh.test(t)?mh(t.slice(2),r?2:8):vh.test(t)?Es:+t}var kh=Sh,fl={exports:{}};(function(t,e){(function(){var r,n,a,i,o,s,u,l,c,f,d,v,h,p,m;a=Math.floor,f=Math.min,n=function(g,b){return g<b?-1:g>b?1:0},c=function(g,b,w,y,_){var E;if(w==null&&(w=0),_==null&&(_=n),w<0)throw new Error("lo must be non-negative");for(y==null&&(y=g.length);w<y;)E=a((w+y)/2),_(b,g[E])<0?y=E:w=E+1;return[].splice.apply(g,[w,w-w].concat(b)),b},s=function(g,b,w){return w==null&&(w=n),g.push(b),p(g,0,g.length-1,w)},o=function(g,b){var w,y;return b==null&&(b=n),w=g.pop(),g.length?(y=g[0],g[0]=w,m(g,0,b)):y=w,y},l=function(g,b,w){var y;return w==null&&(w=n),y=g[0],g[0]=b,m(g,0,w),y},u=function(g,b,w){var y;return w==null&&(w=n),g.length&&w(g[0],b)<0&&(y=[g[0],b],b=y[0],g[0]=y[1],m(g,0,w)),b},i=function(g,b){var w,y,_,E,x,S;for(b==null&&(b=n),E=function(){S=[];for(var C=0,k=a(g.length/2);0<=k?C<k:C>k;0<=k?C++:C--)S.push(C);return S}.apply(this).reverse(),x=[],y=0,_=E.length;y<_;y++)w=E[y],x.push(m(g,w,b));return x},h=function(g,b,w){var y;if(w==null&&(w=n),y=g.indexOf(b),y!==-1)return p(g,0,y,w),m(g,y,w)},d=function(g,b,w){var y,_,E,x,S;if(w==null&&(w=n),_=g.slice(0,b),!_.length)return _;for(i(_,w),S=g.slice(b),E=0,x=S.length;E<x;E++)y=S[E],u(_,y,w);return _.sort(w).reverse()},v=function(g,b,w){var y,_,E,x,S,C,k,D,T;if(w==null&&(w=n),b*10<=g.length){if(E=g.slice(0,b).sort(w),!E.length)return E;for(_=E[E.length-1],k=g.slice(b),x=0,C=k.length;x<C;x++)y=k[x],w(y,_)<0&&(c(E,y,0,null,w),E.pop(),_=E[E.length-1]);return E}for(i(g,w),T=[],S=0,D=f(b,g.length);0<=D?S<D:S>D;0<=D?++S:--S)T.push(o(g,w));return T},p=function(g,b,w,y){var _,E,x;for(y==null&&(y=n),_=g[w];w>b;){if(x=w-1>>1,E=g[x],y(_,E)<0){g[w]=E,w=x;continue}break}return g[w]=_},m=function(g,b,w){var y,_,E,x,S;for(w==null&&(w=n),_=g.length,S=b,E=g[b],y=2*b+1;y<_;)x=y+1,x<_&&!(w(g[y],g[x])<0)&&(y=x),g[b]=g[y],b=y,y=2*b+1;return g[b]=E,p(g,S,b,w)},r=function(){g.push=s,g.pop=o,g.replace=l,g.pushpop=u,g.heapify=i,g.updateItem=h,g.nlargest=d,g.nsmallest=v;function g(b){this.cmp=b!=null?b:n,this.nodes=[]}return g.prototype.push=function(b){return s(this.nodes,b,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},g.prototype.replace=function(b){return l(this.nodes,b,this.cmp)},g.prototype.pushpop=function(b){return u(this.nodes,b,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(b){return h(this.nodes,b,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var b;return b=new g,b.nodes=this.nodes.slice(0),b},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,b){return t.exports=b()}(this,function(){return r})}).call(Ke)})(fl);var Ih=fl.exports,Mh="Expected a function",hl="__lodash_hash_undefined__",dl=1/0,Ah="[object Function]",Ph="[object GeneratorFunction]",Oh="[object Symbol]",Lh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bh=/^\w*$/,Rh=/^\./,Nh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zh=/[\\^$.*+?()[\]{}|]/g,Fh=/\\(\\)?/g,$h=/^\[object .+?Constructor\]$/,Hh=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Vh=typeof self=="object"&&self&&self.Object===Object&&self,ko=Hh||Vh||Function("return this")();function qh(t,e){return t==null?void 0:t[e]}function Wh(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Gh=Array.prototype,Kh=Function.prototype,vl=Object.prototype,Oi=ko["__core-js_shared__"],_s=function(){var t=/[^.]+$/.exec(Oi&&Oi.keys&&Oi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pl=Kh.toString,Io=vl.hasOwnProperty,gl=vl.toString,Uh=RegExp("^"+pl.call(Io).replace(zh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ss=ko.Symbol,Yh=Gh.splice,Xh=ml(ko,"Map"),$n=ml(Object,"create"),Ts=Ss?Ss.prototype:void 0,Ds=Ts?Ts.toString:void 0;function Mr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jh(){this.__data__=$n?$n(null):{}}function Zh(t){return this.has(t)&&delete this.__data__[t]}function Qh(t){var e=this.__data__;if($n){var r=e[t];return r===hl?void 0:r}return Io.call(e,t)?e[t]:void 0}function Jh(t){var e=this.__data__;return $n?e[t]!==void 0:Io.call(e,t)}function ed(t,e){var r=this.__data__;return r[t]=$n&&e===void 0?hl:e,this}Mr.prototype.clear=jh;Mr.prototype.delete=Zh;Mr.prototype.get=Qh;Mr.prototype.has=Jh;Mr.prototype.set=ed;function vn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function td(){this.__data__=[]}function rd(t){var e=this.__data__,r=ri(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Yh.call(e,r,1),!0}function nd(t){var e=this.__data__,r=ri(e,t);return r<0?void 0:e[r][1]}function ad(t){return ri(this.__data__,t)>-1}function id(t,e){var r=this.__data__,n=ri(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}vn.prototype.clear=td;vn.prototype.delete=rd;vn.prototype.get=nd;vn.prototype.has=ad;vn.prototype.set=id;function $r(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function od(){this.__data__={hash:new Mr,map:new(Xh||vn),string:new Mr}}function sd(t){return ni(this,t).delete(t)}function ud(t){return ni(this,t).get(t)}function ld(t){return ni(this,t).has(t)}function cd(t,e){return ni(this,t).set(t,e),this}$r.prototype.clear=od;$r.prototype.delete=sd;$r.prototype.get=ud;$r.prototype.has=ld;$r.prototype.set=cd;function ri(t,e){for(var r=t.length;r--;)if(xd(t[r][0],e))return r;return-1}function fd(t,e){e=pd(e,t)?[e]:vd(e);for(var r=0,n=e.length;t!=null&&r<n;)t=t[bd(e[r++])];return r&&r==n?t:void 0}function hd(t){if(!bl(t)||md(t))return!1;var e=Ed(t)||Wh(t)?Uh:$h;return e.test(wd(t))}function dd(t){if(typeof t=="string")return t;if(Ao(t))return Ds?Ds.call(t):"";var e=t+"";return e=="0"&&1/t==-dl?"-0":e}function vd(t){return yl(t)?t:yd(t)}function ni(t,e){var r=t.__data__;return gd(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ml(t,e){var r=qh(t,e);return hd(r)?r:void 0}function pd(t,e){if(yl(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ao(t)?!0:Bh.test(t)||!Lh.test(t)||e!=null&&t in Object(e)}function gd(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function md(t){return!!_s&&_s in t}var yd=Mo(function(t){t=_d(t);var e=[];return Rh.test(t)&&e.push(""),t.replace(Nh,function(r,n,a,i){e.push(a?i.replace(Fh,"$1"):n||r)}),e});function bd(t){if(typeof t=="string"||Ao(t))return t;var e=t+"";return e=="0"&&1/t==-dl?"-0":e}function wd(t){if(t!=null){try{return pl.call(t)}catch{}try{return t+""}catch{}}return""}function Mo(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Mh);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(Mo.Cache||$r),r}Mo.Cache=$r;function xd(t,e){return t===e||t!==t&&e!==e}var yl=Array.isArray;function Ed(t){var e=bl(t)?gl.call(t):"";return e==Ah||e==Ph}function bl(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Cd(t){return!!t&&typeof t=="object"}function Ao(t){return typeof t=="symbol"||Cd(t)&&gl.call(t)==Oh}function _d(t){return t==null?"":dd(t)}function Sd(t,e,r){var n=t==null?void 0:fd(t,e);return n===void 0?r:n}var Td=Sd,Dd="Expected a function",wl="__lodash_hash_undefined__",xl=1/0,kd=9007199254740991,Id="[object Function]",Md="[object GeneratorFunction]",Ad="[object Symbol]",Pd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Od=/^\w*$/,Ld=/^\./,Bd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rd=/[\\^$.*+?()[\]{}|]/g,Nd=/\\(\\)?/g,zd=/^\[object .+?Constructor\]$/,Fd=/^(?:0|[1-9]\d*)$/,$d=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Hd=typeof self=="object"&&self&&self.Object===Object&&self,Po=$d||Hd||Function("return this")();function Vd(t,e){return t==null?void 0:t[e]}function qd(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Wd=Array.prototype,Gd=Function.prototype,El=Object.prototype,Li=Po["__core-js_shared__"],ks=function(){var t=/[^.]+$/.exec(Li&&Li.keys&&Li.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Cl=Gd.toString,ai=El.hasOwnProperty,_l=El.toString,Kd=RegExp("^"+Cl.call(ai).replace(Rd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Is=Po.Symbol,Ud=Wd.splice,Yd=Sl(Po,"Map"),Hn=Sl(Object,"create"),Ms=Is?Is.prototype:void 0,As=Ms?Ms.toString:void 0;function Ar(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Xd(){this.__data__=Hn?Hn(null):{}}function jd(t){return this.has(t)&&delete this.__data__[t]}function Zd(t){var e=this.__data__;if(Hn){var r=e[t];return r===wl?void 0:r}return ai.call(e,t)?e[t]:void 0}function Qd(t){var e=this.__data__;return Hn?e[t]!==void 0:ai.call(e,t)}function Jd(t,e){var r=this.__data__;return r[t]=Hn&&e===void 0?wl:e,this}Ar.prototype.clear=Xd;Ar.prototype.delete=jd;Ar.prototype.get=Zd;Ar.prototype.has=Qd;Ar.prototype.set=Jd;function pn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ev(){this.__data__=[]}function tv(t){var e=this.__data__,r=ii(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ud.call(e,r,1),!0}function rv(t){var e=this.__data__,r=ii(e,t);return r<0?void 0:e[r][1]}function nv(t){return ii(this.__data__,t)>-1}function av(t,e){var r=this.__data__,n=ii(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}pn.prototype.clear=ev;pn.prototype.delete=tv;pn.prototype.get=rv;pn.prototype.has=nv;pn.prototype.set=av;function Hr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function iv(){this.__data__={hash:new Ar,map:new(Yd||pn),string:new Ar}}function ov(t){return oi(this,t).delete(t)}function sv(t){return oi(this,t).get(t)}function uv(t){return oi(this,t).has(t)}function lv(t,e){return oi(this,t).set(t,e),this}Hr.prototype.clear=iv;Hr.prototype.delete=ov;Hr.prototype.get=sv;Hr.prototype.has=uv;Hr.prototype.set=lv;function cv(t,e,r){var n=t[e];(!(ai.call(t,e)&&Tl(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function ii(t,e){for(var r=t.length;r--;)if(Tl(t[r][0],e))return r;return-1}function fv(t){if(!qa(t)||yv(t))return!1;var e=Ev(t)||qd(t)?Kd:zd;return e.test(xv(t))}function hv(t,e,r,n){if(!qa(t))return t;e=gv(e,t)?[e]:vv(e);for(var a=-1,i=e.length,o=i-1,s=t;s!=null&&++a<i;){var u=wv(e[a]),l=r;if(a!=o){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=qa(c)?c:pv(e[a+1])?[]:{})}cv(s,u,l),s=s[u]}return t}function dv(t){if(typeof t=="string")return t;if(Lo(t))return As?As.call(t):"";var e=t+"";return e=="0"&&1/t==-xl?"-0":e}function vv(t){return Dl(t)?t:bv(t)}function oi(t,e){var r=t.__data__;return mv(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Sl(t,e){var r=Vd(t,e);return fv(r)?r:void 0}function pv(t,e){return e=e==null?kd:e,!!e&&(typeof t=="number"||Fd.test(t))&&t>-1&&t%1==0&&t<e}function gv(t,e){if(Dl(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Lo(t)?!0:Od.test(t)||!Pd.test(t)||e!=null&&t in Object(e)}function mv(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function yv(t){return!!ks&&ks in t}var bv=Oo(function(t){t=_v(t);var e=[];return Ld.test(t)&&e.push(""),t.replace(Bd,function(r,n,a,i){e.push(a?i.replace(Nd,"$1"):n||r)}),e});function wv(t){if(typeof t=="string"||Lo(t))return t;var e=t+"";return e=="0"&&1/t==-xl?"-0":e}function xv(t){if(t!=null){try{return Cl.call(t)}catch{}try{return t+""}catch{}}return""}function Oo(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Dd);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(Oo.Cache||Hr),r}Oo.Cache=Hr;function Tl(t,e){return t===e||t!==t&&e!==e}var Dl=Array.isArray;function Ev(t){var e=qa(t)?_l.call(t):"";return e==Id||e==Md}function qa(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Cv(t){return!!t&&typeof t=="object"}function Lo(t){return typeof t=="symbol"||Cv(t)&&_l.call(t)==Ad}function _v(t){return t==null?"":dv(t)}function Sv(t,e,r){return t==null?t:hv(t,e,r)}var Tv=Sv,Dv="Expected a function",kl="__lodash_hash_undefined__",Il=1/0,kv="[object Function]",Iv="[object GeneratorFunction]",Mv="[object Symbol]",Av=/^\./,Pv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ov=/[\\^$.*+?()[\]{}|]/g,Lv=/\\(\\)?/g,Bv=/^\[object .+?Constructor\]$/,Rv=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Nv=typeof self=="object"&&self&&self.Object===Object&&self,Bo=Rv||Nv||Function("return this")();function zv(t,e){for(var r=-1,n=t?t.length:0,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}function Fv(t,e){return t==null?void 0:t[e]}function $v(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Hv=Array.prototype,Vv=Function.prototype,Ml=Object.prototype,Bi=Bo["__core-js_shared__"],Ps=function(){var t=/[^.]+$/.exec(Bi&&Bi.keys&&Bi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Al=Vv.toString,Ro=Ml.hasOwnProperty,Pl=Ml.toString,qv=RegExp("^"+Al.call(Ro).replace(Ov,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Os=Bo.Symbol,Wv=Hv.splice,Gv=Ol(Bo,"Map"),Vn=Ol(Object,"create"),Ls=Os?Os.prototype:void 0,Bs=Ls?Ls.toString:void 0;function Pr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Kv(){this.__data__=Vn?Vn(null):{}}function Uv(t){return this.has(t)&&delete this.__data__[t]}function Yv(t){var e=this.__data__;if(Vn){var r=e[t];return r===kl?void 0:r}return Ro.call(e,t)?e[t]:void 0}function Xv(t){var e=this.__data__;return Vn?e[t]!==void 0:Ro.call(e,t)}function jv(t,e){var r=this.__data__;return r[t]=Vn&&e===void 0?kl:e,this}Pr.prototype.clear=Kv;Pr.prototype.delete=Uv;Pr.prototype.get=Yv;Pr.prototype.has=Xv;Pr.prototype.set=jv;function gn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Zv(){this.__data__=[]}function Qv(t){var e=this.__data__,r=si(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Wv.call(e,r,1),!0}function Jv(t){var e=this.__data__,r=si(e,t);return r<0?void 0:e[r][1]}function ep(t){return si(this.__data__,t)>-1}function tp(t,e){var r=this.__data__,n=si(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}gn.prototype.clear=Zv;gn.prototype.delete=Qv;gn.prototype.get=Jv;gn.prototype.has=ep;gn.prototype.set=tp;function Vr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function rp(){this.__data__={hash:new Pr,map:new(Gv||gn),string:new Pr}}function np(t){return ui(this,t).delete(t)}function ap(t){return ui(this,t).get(t)}function ip(t){return ui(this,t).has(t)}function op(t,e){return ui(this,t).set(t,e),this}Vr.prototype.clear=rp;Vr.prototype.delete=np;Vr.prototype.get=ap;Vr.prototype.has=ip;Vr.prototype.set=op;function si(t,e){for(var r=t.length;r--;)if(pp(t[r][0],e))return r;return-1}function sp(t){if(!Ll(t)||fp(t))return!1;var e=mp(t)||$v(t)?qv:Bv;return e.test(vp(t))}function up(t){if(typeof t=="string")return t;if(zo(t))return Bs?Bs.call(t):"";var e=t+"";return e=="0"&&1/t==-Il?"-0":e}function lp(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function ui(t,e){var r=t.__data__;return cp(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ol(t,e){var r=Fv(t,e);return sp(r)?r:void 0}function cp(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function fp(t){return!!Ps&&Ps in t}var hp=No(function(t){t=bp(t);var e=[];return Av.test(t)&&e.push(""),t.replace(Pv,function(r,n,a,i){e.push(a?i.replace(Lv,"$1"):n||r)}),e});function dp(t){if(typeof t=="string"||zo(t))return t;var e=t+"";return e=="0"&&1/t==-Il?"-0":e}function vp(t){if(t!=null){try{return Al.call(t)}catch{}try{return t+""}catch{}}return""}function No(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Dv);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(No.Cache||Vr),r}No.Cache=Vr;function pp(t,e){return t===e||t!==t&&e!==e}var gp=Array.isArray;function mp(t){var e=Ll(t)?Pl.call(t):"";return e==kv||e==Iv}function Ll(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function yp(t){return!!t&&typeof t=="object"}function zo(t){return typeof t=="symbol"||yp(t)&&Pl.call(t)==Mv}function bp(t){return t==null?"":up(t)}function wp(t){return gp(t)?zv(t,dp):zo(t)?[t]:lp(hp(t))}var xp=wp;function ra(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var li=ra(kh),na=ra(Ih),Ep=ra(Td),Cp=ra(Tv),_p=ra(xp);function Ue(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ue=function(e){return typeof e}:Ue=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(t)}function Fo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $o(t,e,r){return e&&Rs(t.prototype,e),r&&Rs(t,r),t}function Bl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t,e){return Sp(t)||Tp(t,e)||Dp()}function Sp(t){if(Array.isArray(t))return t}function Tp(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(u){a=!0,i=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}function Dp(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var $e=typeof window=="undefined"?null:window,Ns=$e?$e.navigator:null;$e&&$e.document;var kp=Ue(""),Rl=Ue({}),Ip=Ue(function(){}),Mp=typeof HTMLElement=="undefined"?"undefined":Ue(HTMLElement),aa=function(e){return e&&e.instanceString&&He(e.instanceString)?e.instanceString():null},we=function(e){return e!=null&&Ue(e)==kp},He=function(e){return e!=null&&Ue(e)===Ip},Le=function(e){return!Et(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},ke=function(e){return e!=null&&Ue(e)===Rl&&!Le(e)&&e.constructor===Object},Ap=function(e){return e!=null&&Ue(e)===Rl},fe=function(e){return e!=null&&Ue(e)===Ue(1)&&!isNaN(e)},Pp=function(e){return fe(e)&&Math.floor(e)===e},Wa=function(e){if(Mp!=="undefined")return e!=null&&e instanceof HTMLElement},Et=function(e){return ia(e)||Nl(e)},ia=function(e){return aa(e)==="collection"&&e._private.single},Nl=function(e){return aa(e)==="collection"&&!e._private.single},Ho=function(e){return aa(e)==="core"},zl=function(e){return aa(e)==="stylesheet"},Op=function(e){return aa(e)==="event"},hr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Lp=function(e){return typeof HTMLElement=="undefined"?!1:e instanceof HTMLElement},Bp=function(e){return ke(e)&&fe(e.x1)&&fe(e.x2)&&fe(e.y1)&&fe(e.y2)},Rp=function(e){return Ap(e)&&He(e.then)},Np=function(){return Ns&&Ns.userAgent.match(/msie|trident|edge/i)},qn=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,u=r.apply(i,o),l=a.cache;return(s=l[u])||(s=l[u]=e.apply(i,o)),s};return n.cache={},n},Vo=qn(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),ci=qn(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Fl=qn(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),zs=function(e){return hr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Xe="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",zp="rgb[a]?\\(("+Xe+"[%]?)\\s*,\\s*("+Xe+"[%]?)\\s*,\\s*("+Xe+"[%]?)(?:\\s*,\\s*("+Xe+"))?\\)",Fp="rgb[a]?\\((?:"+Xe+"[%]?)\\s*,\\s*(?:"+Xe+"[%]?)\\s*,\\s*(?:"+Xe+"[%]?)(?:\\s*,\\s*(?:"+Xe+"))?\\)",$p="hsl[a]?\\(("+Xe+")\\s*,\\s*("+Xe+"[%])\\s*,\\s*("+Xe+"[%])(?:\\s*,\\s*("+Xe+"))?\\)",Hp="hsl[a]?\\((?:"+Xe+")\\s*,\\s*(?:"+Xe+"[%])\\s*,\\s*(?:"+Xe+"[%])(?:\\s*,\\s*(?:"+Xe+"))?\\)",Vp="\\#[0-9a-fA-F]{3}",qp="\\#[0-9a-fA-F]{6}",$l=function(e,r){return e<r?-1:e>r?1:0},Wp=function(e,r){return-1*$l(e,r)},Ee=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},Gp=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Kp=function(e){var r,n,a,i,o,s,u,l;function c(h,p,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?h+(p-h)*6*m:m<1/2?p:m<2/3?h+(p-h)*(2/3-m)*6:h}var f=new RegExp("^"+$p+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=u=l=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,v=2*i-d;s=Math.round(255*c(v,d,n+1/3)),u=Math.round(255*c(v,d,n)),l=Math.round(255*c(v,d,n-1/3))}r=[s,u,l,o]}return r},Up=function(e){var r,n=new RegExp("^"+zp+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},Yp=function(e){return jp[e.toLowerCase()]},Xp=function(e){return(Le(e)?e:null)||Yp(e)||Gp(e)||Up(e)||Kp(e)},jp={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Hl=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(ke(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},Vl=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(ke(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},Ri=$e?$e.performance:null,ql=Ri&&Ri.now?function(){return Ri.now()}:function(){return Date.now()},Zp=function(){if($e){if($e.requestAnimationFrame)return function(t){$e.requestAnimationFrame(t)};if($e.mozRequestAnimationFrame)return function(t){$e.mozRequestAnimationFrame(t)};if($e.webkitRequestAnimationFrame)return function(t){$e.webkitRequestAnimationFrame(t)};if($e.msRequestAnimationFrame)return function(t){$e.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(ql())},1e3/60)}}(),Ga=function(e){return Zp(e)},jt=ql,Zr=9261,Wl=65599,An=5381,Gl=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zr,n=r,a;a=e.next(),!a.done;)n=n*Wl+a.value|0;return n},Wn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zr;return r*Wl+e|0},Gn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:An;return(r<<5)+r+e|0},Qp=function(e,r){return e*2097152+r},ar=function(e){return e[0]*2097152+e[1]},ba=function(e,r){return[Wn(e[0],r[0]),Gn(e[1],r[1])]},Jp=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return Gl(o,r)},Or=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return Gl(o,r)},Kl=function(){return eg(arguments)},eg=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Or(a):r=Or(a,r)}return r},Fs=!0,tg=console.warn!=null,rg=console.trace!=null,qo=Number.MAX_SAFE_INTEGER||9007199254740991,Ul=function(){return!0},Ka=function(){return!1},$s=function(){return 0},Wo=function(){},Ve=function(e){throw new Error(e)},Yl=function(e){if(e!==void 0)Fs=!!e;else return Fs},Oe=function(e){!Yl()||(tg?console.warn(e):(console.log(e),rg&&console.trace()))},ng=function(e){return Ee({},e)},Ht=function(e){return e==null?e:Le(e)?e.slice():ke(e)?ng(e):e},ag=function(e){return e.slice()},Xl=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},ig={},jl=function(){return ig},at=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},dr=function(e,r,n){for(var a=e.length-1;a>=0&&!(e[a]===r&&(e.splice(a,1),n));a--);},Go=function(e){e.splice(0,e.length)},og=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Bt=function(e,r,n){return n&&(r=Fl(n,r)),e[r]},or=function(e,r,n,a){n&&(r=Fl(n,r)),e[r]=a},sg=function(){function t(){Fo(this,t),this._obj={}}return $o(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),Vt=typeof Map!="undefined"?Map:sg,ug="undefined",lg=function(){function t(e){if(Fo(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return $o(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),mn=(typeof Set=="undefined"?"undefined":Ue(Set))!==ug?Set:lg,fi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Ho(e)){Ve("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){Ve("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new mn,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),u=e.zoom();i.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];Le(r.classes)?l=r.classes:we(r.classes)&&(l=r.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var d=l[c];!d||d===""||i.classes.add(d)}this.createEmitter();var v=r.style||r.css;v&&(Oe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(v)),(n===void 0||n)&&this.restore()},Hs=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;ke(n)&&!Et(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!He(a)?a:i,a=He(a)?a:function(){};for(var s=this._private.cy,u=n=we(n)?this.filter(n):n,l=[],c=[],f={},d={},v={},h=0,p,m=this.byGroup(),g=m.nodes,b=m.edges,w=0;w<u.length;w++){var y=u[w],_=y.id();y.isNode()&&(l.unshift(y),e.bfs&&(v[_]=!0,c.push(y)),d[_]=0)}var E=function(){var P=e.bfs?l.shift():l.pop(),I=P.id();if(e.dfs){if(v[I])return"continue";v[I]=!0,c.push(P)}var B=d[I],L=f[I],N=L!=null?L.source():null,H=L!=null?L.target():null,W=L==null?void 0:P.same(N)?H[0]:N[0],F=void 0;if(F=a(P,L,W,h++,B),F===!0)return p=P,"break";if(F===!1)return"break";for(var A=P.connectedEdges().filter(function(q){return(!i||q.source().same(P))&&b.has(q)}),R=0;R<A.length;R++){var O=A[R],$=O.connectedNodes().filter(function(q){return!q.same(P)&&g.has(q)}),V=$.id();$.length!==0&&!v[V]&&($=$[0],l.push($),e.bfs&&(v[V]=!0,c.push($)),f[V]=O,d[V]=d[I]+1)}};e:for(;l.length!==0;){var x=E();switch(x){case"continue":continue;case"break":break e}}for(var S=s.collection(),C=0;C<c.length;C++){var k=c[C],D=f[k.id()];D!=null&&S.push(D),S.push(k)}return{path:s.collection(S),found:s.collection(p)}}},Kn={breadthFirstSearch:Hs({bfs:!0}),depthFirstSearch:Hs({dfs:!0})};Kn.bfs=Kn.breadthFirstSearch;Kn.dfs=Kn.depthFirstSearch;var cg=at({root:null,weight:function(e){return 1},directed:!1}),fg={dijkstra:function(e){if(!ke(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=cg(e),a=n.root,i=n.weight,o=n.directed,s=this,u=i,l=we(a)?this.filter(a)[0]:a[0],c={},f={},d={},v=this.byGroup(),h=v.nodes,p=v.edges;p.unmergeBy(function(B){return B.isLoop()});for(var m=function(L){return c[L.id()]},g=function(L,N){c[L.id()]=N,b.updateItem(L)},b=new na(function(B,L){return m(B)-m(L)}),w=0;w<h.length;w++){var y=h[w];c[y.id()]=y.same(l)?0:1/0,b.push(y)}for(var _=function(L,N){for(var H=(o?L.edgesTo(N):L.edgesWith(N)).intersect(p),W=1/0,F,A=0;A<H.length;A++){var R=H[A],O=u(R);(O<W||!F)&&(W=O,F=R)}return{edge:F,dist:W}};b.size()>0;){var E=b.pop(),x=m(E),S=E.id();if(d[S]=x,x!==1/0)for(var C=E.neighborhood().intersect(h),k=0;k<C.length;k++){var D=C[k],T=D.id(),P=_(E,D),I=x+P.dist;I<m(D)&&(g(D,I),f[T]={node:E,edge:P.edge})}}return{distanceTo:function(L){var N=we(L)?h.filter(L)[0]:L[0];return d[N.id()]},pathTo:function(L){var N=we(L)?h.filter(L)[0]:L[0],H=[],W=N,F=W.id();if(N.length>0)for(H.unshift(N);f[F];){var A=f[F];H.unshift(A.edge),H.unshift(A.node),W=A.node,F=W.id()}return s.spawn(H)}}}},hg={kruskal:function(e){e=e||function(w){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,u=function(y){for(var _=0;_<o.length;_++){var E=o[_];if(E.has(y))return _}},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var c=a.sort(function(w,y){return e(w)-e(y)}),f=0;f<c.length;f++){var d=c[f],v=d.source()[0],h=d.target()[0],p=u(v),m=u(h),g=o[p],b=o[m];p!==m&&(s.merge(d),g.merge(b),o.splice(m,1))}return s}},dg=at({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),vg={aStar:function(e){var r=this.cy(),n=dg(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var l=a.id(),c=i.id(),f={},d={},v={},h=new na(function(F,A){return d[F.id()]-d[A.id()]}),p=new mn,m={},g={},b=function(A,R){h.push(A),p.add(R)},w,y,_=function(){w=h.pop(),y=w.id(),p.delete(y)},E=function(A){return p.has(A)};b(a,l),f[l]=0,d[l]=o(a);for(var x=0;h.size()>0;){if(_(),x++,y===c){for(var S=[],C=i,k=c,D=g[k];S.unshift(C),D!=null&&S.unshift(D),C=m[k],C!=null;)k=C.id(),D=g[k];return{found:!0,distance:f[y],path:this.spawn(S),steps:x}}v[y]=!0;for(var T=w._private.edges,P=0;P<T.length;P++){var I=T[P];if(!!this.hasElementWithId(I.id())&&!(s&&I.data("source")!==y)){var B=I.source(),L=I.target(),N=B.id()!==y?B:L,H=N.id();if(!!this.hasElementWithId(H)&&!v[H]){var W=f[y]+u(I);if(!E(H)){f[H]=W,d[H]=W+o(N),b(N,H),m[H]=w,g[H]=I;continue}W<f[H]&&(f[H]=W,d[H]=W+o(N),m[H]=w,g[H]=I)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},pg=at({weight:function(e){return 1},directed:!1}),gg={floydWarshall:function(e){for(var r=this.cy(),n=pg(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,d=function(O){return u.indexOf(O)},v=function(O){return u[O]},h=new Array(f),p=0;p<f;p++){var m=p%c,g=(p-m)/c;g===m?h[p]=0:h[p]=1/0}for(var b=new Array(f),w=new Array(f),y=0;y<l.length;y++){var _=l[y],E=_.source()[0],x=_.target()[0];if(E!==x){var S=d(E),C=d(x),k=S*c+C,D=o(_);if(h[k]>D&&(h[k]=D,b[k]=C,w[k]=_),!i){var T=C*c+S;!i&&h[T]>D&&(h[T]=D,b[T]=S,w[T]=_)}}}for(var P=0;P<c;P++)for(var I=0;I<c;I++)for(var B=I*c+P,L=0;L<c;L++){var N=I*c+L,H=P*c+L;h[B]+h[H]<h[N]&&(h[N]=h[B]+h[H],b[N]=b[B])}var W=function(O){return(we(O)?r.filter(O):O)[0]},F=function(O){return d(W(O))},A={distance:function(O,$){var V=F(O),q=F($);return h[V*c+q]},path:function(O,$){var V=F(O),q=F($),z=v(V);if(V===q)return z.collection();if(b[V*c+q]==null)return r.collection();var U=r.collection(),Q=V,J;for(U.merge(z);V!==q;)Q=V,V=b[V*c+q],J=w[Q*c+V],U.merge(J),U.merge(v(V));return U}};return A}},mg=at({weight:function(e){return 1},directed:!1,root:null}),yg={bellmanFord:function(e){var r=this,n=mg(e),a=n.weight,i=n.directed,o=n.root,s=a,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,v=d.length,h=new Vt,p=!1,m=[];o=l.collection(o)[0],f.unmergeBy(function(Z){return Z.isLoop()});for(var g=f.length,b=function(j){var se=h.get(j.id());return se||(se={},h.set(j.id(),se)),se},w=function(j){return(we(j)?l.$(j):j)[0]},y=function(j){return b(w(j)).dist},_=function(j){for(var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,he=w(j),ye=[],me=he;;){if(me==null)return r.spawn();var Y=b(me),M=Y.edge,G=Y.pred;if(ye.unshift(me[0]),me.same(se)&&ye.length>0)break;M!=null&&ye.unshift(M),me=G}return u.spawn(ye)},E=0;E<v;E++){var x=d[E],S=b(x);x.same(o)?S.dist=0:S.dist=1/0,S.pred=null,S.edge=null}for(var C=!1,k=function(j,se,he,ye,me,Y){var M=ye.dist+Y;M<me.dist&&!he.same(ye.edge)&&(me.dist=M,me.pred=j,me.edge=he,C=!0)},D=1;D<v;D++){C=!1;for(var T=0;T<g;T++){var P=f[T],I=P.source(),B=P.target(),L=s(P),N=b(I),H=b(B);k(I,B,P,N,H,L),i||k(B,I,P,H,N,L)}if(!C)break}if(C)for(var W=[],F=0;F<g;F++){var A=f[F],R=A.source(),O=A.target(),$=s(A),V=b(R).dist,q=b(O).dist;if(V+$<q||!i&&q+$<V)if(p||(Oe("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var z=[];V+$<q&&z.push(R),!i&&q+$<V&&z.push(O);for(var U=z.length,Q=0;Q<U;Q++){var J=z[Q],ie=[J];ie.push(b(J).edge);for(var ve=b(J).pred;ie.indexOf(ve)===-1;)ie.push(ve),ie.push(b(ve).edge),ve=b(ve).pred;ie=ie.slice(ie.indexOf(ve));for(var xe=ie[0].id(),le=0,re=2;re<ie.length;re+=2)ie[re].id()<xe&&(xe=ie[re].id(),le=re);ie=ie.slice(le).concat(ie.slice(0,le)),ie.push(ie[0]);var ne=ie.map(function(Z){return Z.id()}).join(",");W.indexOf(ne)===-1&&(m.push(u.spawn(ie)),W.push(ne))}}else break}return{distanceTo:y,pathTo:_,hasNegativeWeightCycle:p,negativeWeightCycles:m}}},bg=Math.sqrt(2),wg=function(e,r,n){n.length===0&&Ve("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],u=r[o],l=n,c=l.length-1;c>=0;c--){var f=l[c],d=f[1],v=f[2];(r[d]===s&&r[v]===u||r[d]===u&&r[v]===s)&&l.splice(c,1)}for(var h=0;h<l.length;h++){var p=l[h];p[1]===u?(l[h]=p.slice(),l[h][1]=s):p[2]===u&&(l[h]=p.slice(),l[h][2]=s)}for(var m=0;m<r.length;m++)r[m]===u&&(r[m]=s);return l},Ni=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=wg(i,e,r),n--}return r},xg={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(H){return H.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/bg);if(i<2){Ve("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var f=a[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,v=[],h=new Array(i),p=new Array(i),m=new Array(i),g=function(W,F){for(var A=0;A<i;A++)F[A]=W[A]},b=0;b<=s;b++){for(var w=0;w<i;w++)p[w]=w;var y=Ni(p,l.slice(),i,u),_=y.slice();g(p,m);var E=Ni(p,y,u,2),x=Ni(m,_,u,2);E.length<=x.length&&E.length<d?(d=E.length,v=E,g(p,h)):x.length<=E.length&&x.length<d&&(d=x.length,v=x,g(m,h))}for(var S=this.spawn(v.map(function(H){return a[H[0]]})),C=this.spawn(),k=this.spawn(),D=h[0],T=0;T<h.length;T++){var P=h[T],I=n[T];P===D?C.merge(I):k.merge(I)}var B=function(W){var F=e.spawn();return W.forEach(function(A){F.merge(A),A.connectedEdges().forEach(function(R){e.contains(R)&&!S.contains(R)&&F.merge(R)})}),F},L=[B(C),B(k)],N={cut:S,components:L,partition1:C,partition2:k};return N}},Eg=function(e){return{x:e.x,y:e.y}},hi=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Zl=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Qr=function(e){return{x:e[0],y:e[1]}},Cg=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},_g=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},Sg=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},Tg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}i&&e.sort(function(d,v){return d-v});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},Dg=function(e){return Math.PI*e/180},wa=function(e,r){return Math.atan2(r,e)-Math.PI/2},Ko=Math.log2||function(t){return Math.log(t)/Math.log(2)},Ql=function(e){return e>0?1:e<0?-1:0},Lr=function(e,r){return Math.sqrt(_r(e,r))},_r=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},kg=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},Qe=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},en=function(e,r,n,a){return{x:Qe(e.x,r.x,n.x,a),y:Qe(e.y,r.y,n.y,a)}},Ig=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=Lr(e,r),s={x:i.x/o,y:i.y/o};return n=n==null?0:n,a=a!=null?a:n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},Un=function(e,r,n){return Math.max(e,Math.min(n,r))},wt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Mg=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Ag=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Pg=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Og=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},La=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},zi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=Yt(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Vs=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Uo=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},an=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},Lg=function(e,r){return an(e,r.x,r.y)},Jl=function(e,r){return an(e,r.x1,r.y1)&&an(e,r.x2,r.y2)},ec=function(e,r,n,a,i,o,s){var u=oa(i,o),l=i/2,c=o/2,f;{var d=n-l+u-s,v=a-c-s,h=n+l-u+s,p=v;if(f=sr(e,r,n,a,d,v,h,p,!1),f.length>0)return f}{var m=n+l+s,g=a-c+u-s,b=m,w=a+c-u+s;if(f=sr(e,r,n,a,m,g,b,w,!1),f.length>0)return f}{var y=n-l+u-s,_=a+c+s,E=n+l-u+s,x=_;if(f=sr(e,r,n,a,y,_,E,x,!1),f.length>0)return f}{var S=n-l-s,C=a-c+u-s,k=S,D=a+c-u+s;if(f=sr(e,r,n,a,S,C,k,D,!1),f.length>0)return f}var T;{var P=n-l+u,I=a-c+u;if(T=Pn(e,r,n,a,P,I,u+s),T.length>0&&T[0]<=P&&T[1]<=I)return[T[0],T[1]]}{var B=n+l-u,L=a-c+u;if(T=Pn(e,r,n,a,B,L,u+s),T.length>0&&T[0]>=B&&T[1]<=L)return[T[0],T[1]]}{var N=n+l-u,H=a+c-u;if(T=Pn(e,r,n,a,N,H,u+s),T.length>0&&T[0]>=N&&T[1]>=H)return[T[0],T[1]]}{var W=n-l+u,F=a+c-u;if(T=Pn(e,r,n,a,W,F,u+s),T.length>0&&T[0]<=W&&T[1]>=F)return[T[0],T[1]]}return[]},Bg=function(e,r,n,a,i,o,s){var u=s,l=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,o),d=Math.max(a,o);return l-u<=e&&e<=c+u&&f-u<=r&&r<=d+u},Rg=function(e,r,n,a,i,o,s,u,l){var c={x1:Math.min(n,s,i)-l,x2:Math.max(n,s,i)+l,y1:Math.min(a,u,o)-l,y2:Math.max(a,u,o)+l};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},Ng=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,u=(-r+o)/s,l=(-r-o)/s;return[u,l]},zg=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,u,l,c,f,d,v,h;if(u=(3*n-r*r)/9,l=-(27*a)+r*(9*n-2*(r*r)),l/=54,s=u*u*u+l*l,i[1]=0,v=r/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=l-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-v+f+d,v+=(f+d)/2,i[4]=i[2]=-v,v=Math.sqrt(3)*(-d+f)/2,i[3]=v,i[5]=-v;return}if(i[5]=i[3]=0,s===0){h=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-v+2*h,i[4]=i[2]=-(h+v);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),h=2*Math.sqrt(u),i[0]=-v+h*Math.cos(c/3),i[2]=-v+h*Math.cos((c+2*Math.PI)/3),i[4]=-v+h*Math.cos((c+4*Math.PI)/3)},Fg=function(e,r,n,a,i,o,s,u){var l=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*u+4*o*o-4*o*u+u*u,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*u-6*o*o+3*o*u,f=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*u-a*r+2*o*o+2*o*r-u*r,d=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,v=[];zg(l,c,f,d,v);for(var h=1e-7,p=[],m=0;m<6;m+=2)Math.abs(v[m+1])<h&&v[m]>=0&&v[m]<=1&&p.push(v[m]);p.push(1),p.push(0);for(var g=-1,b,w,y,_=0;_<p.length;_++)b=Math.pow(1-p[_],2)*n+2*(1-p[_])*p[_]*i+p[_]*p[_]*s,w=Math.pow(1-p[_],2)*a+2*(1-p[_])*p[_]*o+p[_]*p[_]*u,y=Math.pow(b-e,2)+Math.pow(w-r,2),g>=0?y<g&&(g=y):g=y;return g},$g=function(e,r,n,a,i,o){var s=[e-n,r-a],u=[i-n,o-a],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],d=f*f/l;return f<0?c:d>l?(e-i)*(e-i)+(r-o)*(r-o):c-d},mt=function(e,r,n){for(var a,i,o,s,u,l=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)u=(e-a)/(o-a)*(s-i)+i,u>r&&l++;else continue;return l%2!==0},Zt=function(e,r,n,a,i,o,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var d=Math.cos(-f),v=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=o/2*(n[h*2]*d-n[h*2+1]*v),c[h*2+1]=s/2*(n[h*2+1]*d+n[h*2]*v),c[h*2]+=a,c[h*2+1]+=i;var p;if(l>0){var m=rc(c,-l);p=tc(m)}else p=c;return mt(e,r,p)},Hg=function(e,r,n,a,i,o,s){for(var u=new Array(n.length),l=o/2,c=s/2,f=Yo(o,s),d=f*f,v=0;v<n.length/4;v++){var h=void 0,p=void 0;v===0?h=n.length-2:h=v*4-2,p=v*4+2;var m=a+l*n[v*4],g=i+c*n[v*4+1],b=-n[h]*n[p]-n[h+1]*n[p+1],w=f/Math.tan(Math.acos(b)/2),y=m-w*n[h],_=g-w*n[h+1],E=m+w*n[p],x=g+w*n[p+1];u[v*4]=y,u[v*4+1]=_,u[v*4+2]=E,u[v*4+3]=x;var S=n[h+1],C=-n[h],k=S*n[p]+C*n[p+1];k<0&&(S*=-1,C*=-1);var D=y+S*f,T=_+C*f,P=Math.pow(D-e,2)+Math.pow(T-r,2);if(P<=d)return!0}return mt(e,r,u)},tc=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var d=sr(n,a,i,o,s,u,l,c,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},rc=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-i,c=-(o-a),f=Math.sqrt(l*l+c*c),d=l/f,v=c/f;n[u*4]=a+d*r,n[u*4+1]=i+v*r,n[u*4+2]=o+d*r,n[u*4+3]=s+v*r}return n},Vg=function(e,r,n,a,i,o){var s=n-e,u=a-r;s/=i,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(a-r)*f+r]},kr=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},Pn=function(e,r,n,a,i,o,s){var u=[n-e,a-r],l=[e-i,r-o],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),d=l[0]*l[0]+l[1]*l[1]-s*s,v=f*f-4*c*d;if(v<0)return[];var h=(-f+Math.sqrt(v))/(2*c),p=(-f-Math.sqrt(v))/(2*c),m=Math.min(h,p),g=Math.max(h,p),b=[];if(m>=0&&m<=1&&b.push(m),g>=0&&g<=1&&b.push(g),b.length===0)return[];var w=b[0]*u[0]+e,y=b[0]*u[1]+r;if(b.length>1){if(b[0]==b[1])return[w,y];var _=b[1]*u[0]+e,E=b[1]*u[1]+r;return[w,y,_,E]}else return[w,y]},Fi=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},sr=function(e,r,n,a,i,o,s,u,l){var c=e-i,f=n-e,d=s-i,v=r-o,h=a-r,p=u-o,m=d*v-p*c,g=f*v-h*c,b=p*f-d*h;if(b!==0){var w=m/b,y=g/b,_=.001,E=0-_,x=1+_;return E<=w&&w<=x&&E<=y&&y<=x?[e+w*f,r+w*h]:l?[e+w*f,r+w*h]:[]}else return m===0||g===0?Fi(e,n,s)===s?[s,u]:Fi(e,n,i)===i?[i,o]:Fi(i,s,n)===n?[n,a]:[]:[]},Yn=function(e,r,n,a,i,o,s,u){var l=[],c,f=new Array(n.length),d=!0;o==null&&(d=!1);var v;if(d){for(var h=0;h<f.length/2;h++)f[h*2]=n[h*2]*o+a,f[h*2+1]=n[h*2+1]*s+i;if(u>0){var p=rc(f,-u);v=tc(p)}else v=f}else v=n;for(var m,g,b,w,y=0;y<v.length/2;y++)m=v[y*2],g=v[y*2+1],y<v.length/2-1?(b=v[(y+1)*2],w=v[(y+1)*2+1]):(b=v[0],w=v[1]),c=sr(e,r,a,i,m,g,b,w),c.length!==0&&l.push(c[0],c[1]);return l},qg=function(e,r,n,a,i,o,s,u){for(var l=[],c,f=new Array(n.length),d=o/2,v=s/2,h=Yo(o,s),p=0;p<n.length/4;p++){var m=void 0,g=void 0;p===0?m=n.length-2:m=p*4-2,g=p*4+2;var b=a+d*n[p*4],w=i+v*n[p*4+1],y=-n[m]*n[g]-n[m+1]*n[g+1],_=h/Math.tan(Math.acos(y)/2),E=b-_*n[m],x=w-_*n[m+1],S=b+_*n[g],C=w+_*n[g+1];p===0?(f[n.length-2]=E,f[n.length-1]=x):(f[p*4-2]=E,f[p*4-1]=x),f[p*4]=S,f[p*4+1]=C;var k=n[m+1],D=-n[m],T=k*n[g]+D*n[g+1];T<0&&(k*=-1,D*=-1);var P=E+k*h,I=x+D*h;c=Pn(e,r,a,i,P,I,h),c.length!==0&&l.push(c[0],c[1])}for(var B=0;B<f.length/4;B++)c=sr(e,r,a,i,f[B*4],f[B*4+1],f[B*4+2],f[B*4+3],!1),c.length!==0&&l.push(c[0],c[1]);if(l.length>2){for(var L=[l[0],l[1]],N=Math.pow(L[0]-e,2)+Math.pow(L[1]-r,2),H=1;H<l.length/2;H++){var W=Math.pow(l[H*2]-e,2)+Math.pow(l[H*2+1]-r,2);W<=N&&(L[0]=l[H*2],L[1]=l[H*2+1],N=W)}return L}return l},xa=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},ht=function(e,r){var n=io(e,r);return n=nc(n),n},nc=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<a;l++)r=e[2*l],n=e[2*l+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-i),f=2/(u-o),d=0;d<a;d++)r=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var v=0;v<a;v++)n=e[2*v+1]=e[2*v+1]+(-1-o);return e},io=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},oa=function(e,r){return Math.min(e/4,r/4,8)},Yo=function(e,r){return Math.min(e/10,r/10,8)},ac=function(){return 8},Wg=function(e,r,n){return[e-2*r+n,2*(r-e),e]},oo=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Gg=at({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Kg={pageRank:function(e){for(var r=Gg(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,d=f*f,v=c.length,h=new Array(d),p=new Array(f),m=(1-n)/f,g=0;g<f;g++){for(var b=0;b<f;b++){var w=g*f+b;h[w]=0}p[g]=0}for(var y=0;y<v;y++){var _=c[y],E=_.data("source"),x=_.data("target");if(E!==x){var S=l.indexOfId(E),C=l.indexOfId(x),k=o(_),D=C*f+S;h[D]+=k,p[S]+=k}}for(var T=1/f+m,P=0;P<f;P++)if(p[P]===0)for(var I=0;I<f;I++){var B=I*f+P;h[B]=T}else for(var L=0;L<f;L++){var N=L*f+P;h[N]=h[N]/p[P]+m}for(var H=new Array(f),W=new Array(f),F,A=0;A<f;A++)H[A]=1;for(var R=0;R<i;R++){for(var O=0;O<f;O++)W[O]=0;for(var $=0;$<f;$++)for(var V=0;V<f;V++){var q=$*f+V;W[$]+=h[q]*H[V]}kg(W),F=H,H=W,W=F;for(var z=0,U=0;U<f;U++){var Q=F[U]-H[U];z+=Q*Q}if(z<a)break}var J={rank:function(ve){return ve=s.collection(ve)[0],H[l.indexOf(ve)]}};return J}},qs=at({root:null,weight:function(e){return 1},directed:!1,alpha:0}),tn={degreeCentralityNormalized:function(e){e=qs(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,v=0,h=0;h<a;h++){var p=n[h],m=p.id();e.root=p;var g=this.degreeCentrality(e);d<g.indegree&&(d=g.indegree),v<g.outdegree&&(v=g.outdegree),c[m]=g.indegree,f[m]=g.outdegree}return{indegree:function(w){return d==0?0:(we(w)&&(w=r.filter(w)),c[w.id()]/d)},outdegree:function(w){return v===0?0:(we(w)&&(w=r.filter(w)),f[w.id()]/v)}}}else{for(var i={},o=0,s=0;s<a;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),i[u.id()]=l.degree}return{degree:function(w){return o===0?0:(we(w)&&(w=r.filter(w)),i[w.id()]/o)}}}},degreeCentrality:function(e){e=qs(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,u=a.alpha;if(i=r.collection(i)[0],s){for(var v=i.connectedEdges(),h=v.filter(function(E){return E.target().same(i)&&n.has(E)}),p=v.filter(function(E){return E.source().same(i)&&n.has(E)}),m=h.length,g=p.length,b=0,w=0,y=0;y<h.length;y++)b+=o(h[y]);for(var _=0;_<p.length;_++)w+=o(p[_]);return{indegree:Math.pow(m,1-u)*Math.pow(b,u),outdegree:Math.pow(g,1-u)*Math.pow(w,u)}}else{for(var l=i.connectedEdges().intersection(n),c=l.length,f=0,d=0;d<l.length;d++)f+=o(l[d]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};tn.dc=tn.degreeCentrality;tn.dcn=tn.degreeCentralityNormalised=tn.degreeCentralityNormalized;var Ws=at({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),rn={closenessCentralityNormalized:function(e){for(var r=Ws(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<l.length;f++){for(var d=0,v=l[f],h=0;h<l.length;h++)if(f!==h){var p=c.distance(v,l[h]);n?d+=1/p:d+=p}n||(d=1/d),u<d&&(u=d),s[v.id()]=d}return{closeness:function(g){return u==0?0:(we(g)?g=o.filter(g)[0].id():g=g.id(),s[g]/u)}}},closenessCentrality:function(e){var r=Ws(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var d=s.distanceTo(f);o?u+=1/d:u+=d}}return o?u:1/u}};rn.cc=rn.closenessCentrality;rn.ccn=rn.closenessCentralityNormalised=rn.closenessCentralityNormalized;var Ug=at({weight:null,directed:!1}),so={betweennessCentrality:function(e){for(var r=Ug(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(w,y){l[w]=y,y>c&&(c=y)},get:function(w){return l[w]}},d=0;d<s.length;d++){var v=s[d],h=v.id();n?u[h]=v.outgoers().nodes():u[h]=v.openNeighborhood().nodes(),f.set(h,0)}for(var p=function(w){for(var y=s[w].id(),_=[],E={},x={},S={},C=new na(function(V,q){return S[V]-S[q]}),k=0;k<s.length;k++){var D=s[k].id();E[D]=[],x[D]=0,S[D]=1/0}for(x[y]=1,S[y]=0,C.push(y);!C.empty();){var T=C.pop();if(_.push(T),i)for(var P=0;P<u[T].length;P++){var I=u[T][P],B=o.getElementById(T),L=void 0;B.edgesTo(I).length>0?L=B.edgesTo(I)[0]:L=I.edgesTo(B)[0];var N=a(L);I=I.id(),S[I]>S[T]+N&&(S[I]=S[T]+N,C.nodes.indexOf(I)<0?C.push(I):C.updateItem(I),x[I]=0,E[I]=[]),S[I]==S[T]+N&&(x[I]=x[I]+x[T],E[I].push(T))}else for(var H=0;H<u[T].length;H++){var W=u[T][H].id();S[W]==1/0&&(C.push(W),S[W]=S[T]+1),S[W]==S[T]+1&&(x[W]=x[W]+x[T],E[W].push(T))}}for(var F={},A=0;A<s.length;A++)F[s[A].id()]=0;for(;_.length>0;){for(var R=_.pop(),O=0;O<E[R].length;O++){var $=E[R][O];F[$]=F[$]+x[$]/x[R]*(1+F[R])}R!=s[w].id()&&f.set(R,f.get(R)+F[R])}},m=0;m<s.length;m++)p(m);var g={betweenness:function(w){var y=o.collection(w).id();return f.get(y)},betweennessNormalized:function(w){if(c==0)return 0;var y=o.collection(w).id();return f.get(y)/c}};return g.betweennessNormalised=g.betweennessNormalized,g}};so.bc=so.betweennessCentrality;var Yg=at({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Xg=function(e){return Yg(e)},jg=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},Zg=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},ic=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},Qg=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+s]*r[s*n+u]}return a},Jg=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=Qg(e,a,r);return e},em=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return ic(a,r),a},tm=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},rm=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],u=0;u<r;u++)Math.round(e[o*r+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&i.push(a.collection(s))}return i},nm=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},am=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&nm(e[r],e[n])&&e.splice(n,1);return e},Gs=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=Xg(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var u=r.length,l=u*u,c=new Array(l),f,d=0;d<l;d++)c[d]=0;for(var v=0;v<n.length;v++){var h=n[v],p=o[h.source().id()],m=o[h.target().id()],g=jg(h,i.attributes);c[p*u+m]+=g,c[m*u+p]+=g}Zg(c,u,i.multFactor),ic(c,u);for(var b=!0,w=0;b&&w<i.maxIterations;)b=!1,f=Jg(c,u,i.expandFactor),c=em(f,u,i.inflateFactor),tm(c,f,l,4)||(b=!0),w++;var y=rm(c,u,r,a);return y=am(y),y},im={markovClustering:Gs,mcl:Gs},om=function(e){return e},oc=function(e,r){return Math.abs(r-e)},Ks=function(e,r,n){return e+oc(r,n)},Us=function(e,r,n){return e+Math.pow(n-r,2)},sm=function(e){return Math.sqrt(e)},um=function(e,r,n){return Math.max(e,oc(r,n))},Tn=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:om,s=a,u,l,c=0;c<e;c++)u=r(c),l=n(c),s=i(s,u,l);return o(s)},on={euclidean:function(e,r,n){return e>=2?Tn(e,r,n,0,Us,sm):Tn(e,r,n,0,Ks)},squaredEuclidean:function(e,r,n){return Tn(e,r,n,0,Us)},manhattan:function(e,r,n){return Tn(e,r,n,0,Ks)},max:function(e,r,n){return Tn(e,r,n,-1/0,um)}};on["squared-euclidean"]=on.squaredEuclidean;on.squaredeuclidean=on.squaredEuclidean;function di(t,e,r,n,a,i){var o;return He(t)?o=t:o=on[t]||on.euclidean,e===0&&He(t)?o(a,i):o(e,r,n,a,i)}var lm=at({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Xo=function(e){return lm(e)},Ua=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(f){return n[f]}:function(f){return a[f](n)},u=function(d){return a[d](r)},l=n,c=r;return di(e,a.length,s,u,l,c)},$i=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var c=0;c<r;c++){u=[];for(var f=0;f<a;f++)u[f]=Math.random()*(o[f]-i[f])+i[f];s[c]=u}return s},sc=function(e,r,n,a,i){for(var o=1/0,s=0,u=0;u<r.length;u++){var l=Ua(n,e,r[u],a,i);l<o&&(o=l,s=u)}return s},uc=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},cm=function(e,r,n){return Math.abs(r-e)<=n},fm=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},hm=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Ys=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];hm(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Xs=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Ua("manhattan",r[i],e,n,"kMedoids");return a},dm=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Xo(e),o=new Array(i.k),s={},u;i.testMode?typeof i.testCentroids=="number"?u=$i(n,i.k,i.attributes):Ue(i.testCentroids)==="object"?u=i.testCentroids:u=$i(n,i.k,i.attributes):u=$i(n,i.k,i.attributes);for(var l=!0,c=0;l&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],s[a.id()]=sc(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var d=0;d<i.k;d++){var v=uc(d,n,s);if(v.length!==0){for(var h=i.attributes.length,p=u[d],m=new Array(h),g=new Array(h),b=0;b<h;b++){g[b]=0;for(var w=0;w<v.length;w++)a=v[w],g[b]+=i.attributes[b](a);m[b]=g[b]/v.length,cm(m[b],p[b],i.sensitivityThreshold)||(l=!0)}u[d]=m,o[d]=r.collection(v)}}c++}return o},vm=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Xo(e),o=new Array(i.k),s,u={},l,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Ue(i.testCentroids)==="object"?s=i.testCentroids:s=Ys(n,i.k)):s=Ys(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var v=0;v<n.length;v++)a=n[v],u[a.id()]=sc(a,s,i.distance,i.attributes,"kMedoids");f=!1;for(var h=0;h<s.length;h++){var p=uc(h,n,u);if(p.length!==0){c[h]=Xs(s[h],p,i.attributes);for(var m=0;m<p.length;m++)l=Xs(p[m],p,i.attributes),l<c[h]&&(c[h]=l,s[h]=p[m],f=!0);o[h]=r.collection(p)}}d++}return o},pm=function(e,r,n,a,i){for(var o,s,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){o=0,s=0;for(var d=0;d<r.length;d++)o+=a[d][c]*i.attributes[f](r[d]),s+=a[d][c];e[c][f]=o/s}},gm=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,u,l,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){s=0;for(var v=0;v<n.length;v++)u=Ua(i.distance,a[d],n[f],i.attributes,"cmeans"),l=Ua(i.distance,a[d],n[v],i.attributes,"cmeans"),s+=Math.pow(u/l,c);e[d][f]=1/s}},mm=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,u,l=0;l<r.length;l++){s=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[l][c]>s&&(s=r[l][c],u=c);i[u].push(e[l])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},js=function(e){var r=this.cy(),n=this.nodes(),a=Xo(e),i,o,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var v=0,h=0;h<a.k;h++)s[d][h]=Math.random(),v+=s[d][h];for(var p=0;p<a.k;p++)s[d][p]=s[d][p]/v}o=new Array(a.k);for(var m=0;m<a.k;m++)o[m]=new Array(a.attributes.length);l=new Array(n.length);for(var g=0;g<n.length;g++)l[g]=new Array(a.k);for(var b=!0,w=0;b&&w<a.maxIterations;)b=!1,pm(o,n,s,l,a),gm(s,u,o,n,a),fm(s,u,a.sensitivityThreshold)||(b=!0),w++;return i=mm(n,s,a,r),{clusters:i,degreeOfMembership:s}},ym={kMeans:dm,kMedoids:vm,fuzzyCMeans:js,fcm:js},bm=at({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),wm={single:"min",complete:"max"},xm=function(e){var r=bm(e),n=wm[r.linkage];return n!=null&&(r.linkage=n),r},Zs=function(e,r,n,a,i){for(var o=0,s=1/0,u,l=i.attributes,c=function(C,k){return di(i.distance,l.length,function(D){return l[D](C)},function(D){return l[D](k)},C,k)},f=0;f<e.length;f++){var d=e[f].key,v=n[d][a[d]];v<s&&(o=d,s=v)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=r[o],p=r[a[o]],m;i.mode==="dendrogram"?m={left:h,right:p,key:h.key}:m={value:h.value.concat(p.value),key:h.key},e[h.index]=m,e.splice(p.index,1),r[h.key]=m;for(var g=0;g<e.length;g++){var b=e[g];h.key===b.key?u=1/0:i.linkage==="min"?(u=n[h.key][b.key],n[h.key][b.key]>n[p.key][b.key]&&(u=n[p.key][b.key])):i.linkage==="max"?(u=n[h.key][b.key],n[h.key][b.key]<n[p.key][b.key]&&(u=n[p.key][b.key])):i.linkage==="mean"?u=(n[h.key][b.key]*h.size+n[p.key][b.key]*p.size)/(h.size+p.size):i.mode==="dendrogram"?u=c(b.value,h.value):u=c(b.value[0],h.value[0]),n[h.key][b.key]=n[b.key][h.key]=u}for(var w=0;w<e.length;w++){var y=e[w].key;if(a[y]===h.key||a[y]===p.key){for(var _=y,E=0;E<e.length;E++){var x=e[E].key;n[y][x]<n[y][_]&&(_=x)}a[y]=_}e[w].index=w}return h.key=p.key=h.index=p.index=null,!0},Ea=function t(e,r,n){!e||(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},Em=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Cm=function t(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&Ea(e.left,a),e.right&&Ea(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Ea(e.left,a),e.right&&Ea(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(i=t(e.right,r-1,n)),a.concat(i))},Qs=function(e){for(var r=this.cy(),n=this.nodes(),a=xm(e),i=a.attributes,o=function(w,y){return di(a.distance,i.length,function(_){return i[_](w)},function(_){return i[_](y)},w,y)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=d,c[f]=d,u[f]=[],l[f]=0}for(var v=0;v<s.length;v++)for(var h=0;h<=v;h++){var p=void 0;a.mode==="dendrogram"?p=v===h?1/0:o(s[v].value,s[h].value):p=v===h?1/0:o(s[v].value[0],s[h].value[0]),u[v][h]=p,u[h][v]=p,p<u[v][l[v]]&&(l[v]=h)}for(var m=Zs(s,c,u,l,a);m;)m=Zs(s,c,u,l,a);var g;return a.mode==="dendrogram"?(g=Cm(s[0],a.dendrogramDepth,r),a.addDendrogram&&Em(s[0],r)):(g=new Array(s.length),s.forEach(function(b,w){b.key=b.index=null,g[w]=r.collection(b.value)})),g},_m={hierarchicalClustering:Qs,hca:Qs},Sm=at({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Tm=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||Ve("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||fe(n)||Ve("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Sm(e)},Dm=function(e,r,n,a){var i=function(s,u){return a[u](s)};return-di(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},km=function(e,r){var n=null;return r==="median"?n=Tg(e):r==="mean"?n=Sg(e):r==="min"?n=Cg(e):r==="max"?n=_g(e):n=r,n},Im=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Js=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];r[i*e+l]>s&&(o=l,s=r[i*e+l])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},Mm=function(e,r,n){for(var a=Js(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var f=0,d=0;d<o.length;d++)f+=r[o[d]*e+o[c]];f>l&&(u=c,l=f)}n[i]=o[u]}return a=Js(e,r,n),a},eu=function(e){for(var r=this.cy(),n=this.nodes(),a=Tm(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,u,l,c,f,d;s=n.length,u=s*s,l=new Array(u);for(var v=0;v<u;v++)l[v]=-1/0;for(var h=0;h<s;h++)for(var p=0;p<s;p++)h!==p&&(l[h*s+p]=Dm(a.distance,n[h],n[p],a.attributes));c=km(l,a.preference);for(var m=0;m<s;m++)l[m*s+m]=c;f=new Array(u);for(var g=0;g<u;g++)f[g]=0;d=new Array(u);for(var b=0;b<u;b++)d[b]=0;for(var w=new Array(s),y=new Array(s),_=new Array(s),E=0;E<s;E++)w[E]=0,y[E]=0,_[E]=0;for(var x=new Array(s*a.minIterations),S=0;S<x.length;S++)x[S]=0;var C;for(C=0;C<a.maxIterations;C++){for(var k=0;k<s;k++){for(var D=-1/0,T=-1/0,P=-1,I=0,B=0;B<s;B++)w[B]=f[k*s+B],I=d[k*s+B]+l[k*s+B],I>=D?(T=D,D=I,P=B):I>T&&(T=I);for(var L=0;L<s;L++)f[k*s+L]=(1-a.damping)*(l[k*s+L]-D)+a.damping*w[L];f[k*s+P]=(1-a.damping)*(l[k*s+P]-T)+a.damping*w[P]}for(var N=0;N<s;N++){for(var H=0,W=0;W<s;W++)w[W]=d[W*s+N],y[W]=Math.max(0,f[W*s+N]),H+=y[W];H-=y[N],y[N]=f[N*s+N],H+=y[N];for(var F=0;F<s;F++)d[F*s+N]=(1-a.damping)*Math.min(0,H-y[F])+a.damping*w[F];d[N*s+N]=(1-a.damping)*(H-y[N])+a.damping*w[N]}for(var A=0,R=0;R<s;R++){var O=d[R*s+R]+f[R*s+R]>0?1:0;x[C%a.minIterations*s+R]=O,A+=O}if(A>0&&(C>=a.minIterations-1||C==a.maxIterations-1)){for(var $=0,V=0;V<s;V++){_[V]=0;for(var q=0;q<a.minIterations;q++)_[V]+=x[q*s+V];(_[V]===0||_[V]===a.minIterations)&&$++}if($===s)break}}for(var z=Im(s,f,d),U=Mm(s,l,z),Q={},J=0;J<z.length;J++)Q[z[J]]=[];for(var ie=0;ie<n.length;ie++){var ve=i[n[ie].id()],xe=U[ve];xe!=null&&Q[xe].push(n[ie])}for(var le=new Array(z.length),re=0;re<z.length;re++)le[re]=r.collection(Q[z[re]]);return le},Am={affinityPropagation:eu,ap:eu},Pm=at({root:void 0,directed:!1}),Om={hierholzer:function(e){if(!ke(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=Pm(e),a=n.root,i=n.directed,o=this,s=!1,u,l,c;a&&(c=we(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?o.forEach(function(b){var w=b.id();if(b.isNode()){var y=b.indegree(!0),_=b.outdegree(!0),E=y-_,x=_-y;E==1?u?s=!0:u=w:x==1?l?s=!0:l=w:(x>1||E>1)&&(s=!0),f[w]=[],b.outgoers().forEach(function(S){S.isEdge()&&f[w].push(S.id())})}else d[w]=[void 0,b.target().id()]}):o.forEach(function(b){var w=b.id();if(b.isNode()){var y=b.degree(!0);y%2&&(u?l?s=!0:l=w:u=w),f[w]=[],b.connectedEdges().forEach(function(_){return f[w].push(_.id())})}else d[w]=[b.source().id(),b.target().id()]});var v={found:!1,trail:void 0};if(s)return v;if(l&&u)if(i){if(c&&l!=c)return v;c=l}else{if(c&&l!=c&&u!=c)return v;c||(c=l)}else c||(c=o[0].id());var h=function(w){for(var y=w,_=[w],E,x,S;f[y].length;)E=f[y].shift(),x=d[E][0],S=d[E][1],y!=S?(f[S]=f[S].filter(function(C){return C!=E}),y=S):!i&&y!=x&&(f[x]=f[x].filter(function(C){return C!=E}),y=x),_.unshift(E),_.unshift(y);return _},p=[],m=[];for(m=h(c);m.length!=1;)f[m[0]].length==0?(p.unshift(o.getElementById(m.shift())),p.unshift(o.getElementById(m.shift()))):m=h(m.shift()).concat(m);p.unshift(o.getElementById(m.shift()));for(var g in f)if(f[g].length)return v;return v.found=!0,v.trail=this.spawn(p,!0),v}},Ca=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},u=function(d,v){for(var h=o.length-1,p=[],m=e.spawn();o[h].x!=d||o[h].y!=v;)p.push(o.pop().edge),h--;p.push(o.pop().edge),p.forEach(function(g){var b=g.connectedNodes().intersection(e);m.merge(g),b.forEach(function(w){var y=w.id(),_=w.connectedEdges().intersection(e);m.merge(w),r[y].cutVertex?m.merge(_.filter(function(E){return E.isLoop()})):m.merge(_)})}),i.push(m)},l=function f(d,v,h){d===h&&(a+=1),r[v]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(v).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(v)));else{var m,g,b,w;p.forEach(function(y){m=y.source().id(),g=y.target().id(),b=m===v?g:m,b!==h&&(w=y.id(),s[w]||(s[w]=!0,o.push({x:v,y:b,edge:y})),b in r?r[v].low=Math.min(r[v].low,r[b].id):(f(d,b,v),r[v].low=Math.min(r[v].low,r[b].low),r[v].id<=r[b].low&&(r[v].cutVertex=!0,u(v,b))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(a=0,l(d,d),r[d].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},Lm={hopcroftTarjanBiconnected:Ca,htbc:Ca,htb:Ca,hopcroftTarjanBiconnectedComponents:Ca},_a=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function u(l){i.push(l),r[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(p){var m=p.target().id();m!==l&&(m in r||u(m),r[m].explored||(r[l].low=Math.min(r[l].low,r[m].low)))}),r[l].index===r[l].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),r[d].low=r[l].index,r[d].explored=!0,d===l)break}var v=f.edgesWith(f),h=f.merge(v);a.push(h),o=o.difference(h)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||s(l)}}),{cut:o,components:a}},Bm={tarjanStronglyConnected:_a,tsc:_a,tscc:_a,tarjanStronglyConnectedComponents:_a},lc={};[Kn,fg,hg,vg,gg,yg,xg,Kg,tn,rn,so,im,ym,_m,Am,Om,Lm,Bm].forEach(function(t){Ee(lc,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var cc=0,fc=1,hc=2,Qt=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=cc,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Qt.prototype={fulfill:function(e){return tu(this,fc,"fulfillValue",e)},reject:function(e){return tu(this,hc,"rejectReason",e)},then:function(e,r){var n=this,a=new Qt;return n.onFulfilled.push(nu(e,a,"fulfill")),n.onRejected.push(nu(r,a,"reject")),dc(n),a.proxy}};var tu=function(e,r,n,a){return e.state===cc&&(e.state=r,e[n]=a,dc(e)),e},dc=function(e){e.state===fc?ru(e,"onFulfilled",e.fulfillValue):e.state===hc&&ru(e,"onRejected",e.rejectReason)},ru=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},nu=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}Rm(r,i)}}},Rm=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Ue(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):t(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Qt.all=function(t){return new Qt(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,l){n[u]=l,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var u=t[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){i(s,f)},function(f){r(f)});else{var c=u;i(s,c)}})(o)})};Qt.resolve=function(t){return new Qt(function(e,r){e(t)})};Qt.reject=function(t){return new Qt(function(e,r){r(t)})};var yn=typeof Promise!="undefined"?Promise:Qt,uo=function(e,r,n){var a=Ho(e),i=!a,o=this._private=Ee({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&He(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Br=uo.prototype;Ee(Br,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Et(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new yn(function(a,i){n.push(function(){a()})})}});Br.complete=Br.completed;Br.run=Br.play;Br.running=Br.playing;var Nm={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,u=!i,l=!u;if(!s.styleEnabled())return this;var c=s.style();r=Ee({},r,n);var f=Object.keys(r).length===0;if(f)return new uo(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var d=r.renderedPosition,v=s.pan(),h=s.zoom();r.position=Zl(d,h,v)}if(u&&r.panBy!=null){var p=r.panBy,m=s.pan();r.pan={x:m.x+p.x,y:m.y+p.y}}var g=r.center||r.centre;if(u&&g!=null){var b=s.getCenterPan(g.eles,r.zoom);b!=null&&(r.pan=b)}if(u&&r.fit!=null){var w=r.fit,y=s.getFitViewport(w.eles||w.boundingBox,w.padding);y!=null&&(r.pan=y.pan,r.zoom=y.zoom)}if(u&&ke(r.zoom)){var _=s.getZoomedViewport(r.zoom);_!=null?(_.zoomed&&(r.zoom=_.zoom),_.panned&&(r.pan=_.pan)):r.zoom=null}return new uo(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=Ee({},r,n));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(r.queue===void 0||r.queue),f=l.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,f=c.animation.current,d=0;d<f.length;d++){var v=f[d],h=v._private;n&&(h.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},zm={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Ee({},r,e),function(a,i){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(we(a)){var f=a.indexOf(".")!==-1,d=f&&_p(a);if(o.allowGetting&&i===void 0){var v;return c&&(o.beforeGet(c),d&&c._private[o.field][a]===void 0?v=Ep(c._private[o.field],d):v=c._private[o.field][a]),v}else if(o.allowSetting&&i!==void 0){var h=!o.immutableKeys[a];if(h){var p=Bl({},a,i);o.beforeSet(s,p);for(var m=0,g=l.length;m<g;m++){var b=l[m];o.canSet(b)&&(d&&c._private[o.field][a]===void 0?Cp(b._private[o.field],d,i):b._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&ke(a)){var w=a,y,_,E=Object.keys(w);o.beforeSet(s,w);for(var x=0;x<E.length;x++){y=E[x],_=w[y];var S=!o.immutableKeys[y];if(S)for(var C=0;C<l.length;C++){var k=l[C];o.canSet(k)&&(k._private[o.field][y]=_)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&He(a)){var D=a;s.on(o.bindingEvent,D)}else if(o.allowGetting&&a===void 0){var T;return c&&(o.beforeGet(c),T=c._private[o.field]),T}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Ee({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,u=s?o:[o];if(we(a)){for(var l=a.split(/\s+/),c=l.length,f=0;f<c;f++){var d=l[f];if(!hr(d)){var v=!i.immutableKeys[d];if(v)for(var h=0,p=u.length;h<p;h++)u[h]._private[i.field][d]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var m=0,g=u.length;m<g;m++)for(var b=u[m]._private[i.field],w=Object.keys(b),y=0;y<w.length;y++){var _=w[y],E=!i.immutableKeys[_];E&&(b[_]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},Fm={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new yn(function(s,u){var l=function(v){i.off.apply(i,f),s(v)},c=o.concat([l]),f=c.concat([]);i.on.apply(i,c)})}}},Ae={};[Nm,zm,Fm].forEach(function(t){Ee(Ae,t)});var $m={animate:Ae.animate(),animation:Ae.animation(),animated:Ae.animated(),clearQueue:Ae.clearQueue(),delay:Ae.delay(),delayAnimation:Ae.delayAnimation(),stop:Ae.stop()},Ba={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(h){return n.push(h)}),n}else Le(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new mn(e),o=0;o<r.length;o++){for(var s=r[o],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var d=e[f],v=l.has(d);if(!v){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Le(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],v=l.has(d),h=!1;r||a&&!v?(l.add(d),h=!0):(!r||a&&v)&&(l.delete(d),h=!0),!c&&h&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Ba.className=Ba.classNames=Ba.classes;var De={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Xe,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};De.variable="(?:[\\w-.]|(?:\\\\"+De.metaChar+"))+";De.value=De.string+"|"+De.number;De.className=De.variable;De.id=De.variable;(function(){var t,e,r;for(t=De.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],De.comparatorOp+="|@"+e;for(t=De.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(De.comparatorOp+="|\\!"+e)})();var Pe=function(){return{checks:[]}},pe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},lo=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return Wp(t.selector,e.selector)}),Hm=function(){for(var t={},e,r=0;r<lo.length;r++)e=lo[r],t[e.selector]=e.matches;return t}(),Vm=function(e,r){return Hm[e](r)},qm="("+lo.map(function(t){return t.selector}).join("|")+")",Gr=function(e){return e.replace(new RegExp("\\\\("+De.metaChar+")","g"),function(r,n){return n})},ir=function(e,r,n){e[e.length-1]=n},co=[{name:"group",query:!0,regex:"("+De.group+")",populate:function(e,r,n){var a=Yt(n,1),i=a[0];r.checks.push({type:pe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:qm,populate:function(e,r,n){var a=Yt(n,1),i=a[0];r.checks.push({type:pe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+De.id+")",populate:function(e,r,n){var a=Yt(n,1),i=a[0];r.checks.push({type:pe.ID,value:Gr(i)})}},{name:"className",query:!0,regex:"\\.("+De.className+")",populate:function(e,r,n){var a=Yt(n,1),i=a[0];r.checks.push({type:pe.CLASS,value:Gr(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+De.variable+")\\s*\\]",populate:function(e,r,n){var a=Yt(n,1),i=a[0];r.checks.push({type:pe.DATA_EXIST,field:Gr(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+De.variable+")\\s*("+De.comparatorOp+")\\s*("+De.value+")\\s*\\]",populate:function(e,r,n){var a=Yt(n,3),i=a[0],o=a[1],s=a[2],u=new RegExp("^"+De.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:pe.DATA_COMPARE,field:Gr(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+De.boolOp+")\\s*("+De.variable+")\\s*\\]",populate:function(e,r,n){var a=Yt(n,2),i=a[0],o=a[1];r.checks.push({type:pe.DATA_BOOL,field:Gr(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+De.meta+")\\s*("+De.comparatorOp+")\\s*("+De.number+")\\s*\\]\\]",populate:function(e,r,n){var a=Yt(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:pe.META_COMPARE,field:Gr(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:De.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Pe();return s}},{name:"directedEdge",separator:!0,regex:De.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Pe(),a=r,i=Pe();return n.checks.push({type:pe.DIRECTED_EDGE,source:a,target:i}),ir(e,r,n),e.edgeCount++,i}else{var o=Pe(),s=r,u=Pe();return o.checks.push({type:pe.NODE_SOURCE,source:s,target:u}),ir(e,r,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:De.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Pe(),a=r,i=Pe();return n.checks.push({type:pe.UNDIRECTED_EDGE,nodes:[a,i]}),ir(e,r,n),e.edgeCount++,i}else{var o=Pe(),s=r,u=Pe();return o.checks.push({type:pe.NODE_NEIGHBOR,node:s,neighbor:u}),ir(e,r,o),u}}},{name:"child",separator:!0,regex:De.child,populate:function(e,r){if(e.currentSubject==null){var n=Pe(),a=Pe(),i=e[e.length-1];return n.checks.push({type:pe.CHILD,parent:i,child:a}),ir(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Pe(),s=e[e.length-1],u=Pe(),l=Pe(),c=Pe(),f=Pe();return o.checks.push({type:pe.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:pe.TRUE}],f.checks.push({type:pe.TRUE}),u.checks.push({type:pe.PARENT,parent:f,child:c}),ir(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var d=Pe(),v=Pe(),h=[{type:pe.PARENT,parent:d,child:v}];return d.checks=r.checks,r.checks=h,e.compoundCount++,v}}},{name:"descendant",separator:!0,regex:De.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Pe(),a=Pe(),i=e[e.length-1];return n.checks.push({type:pe.DESCENDANT,ancestor:i,descendant:a}),ir(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Pe(),s=e[e.length-1],u=Pe(),l=Pe(),c=Pe(),f=Pe();return o.checks.push({type:pe.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:pe.TRUE}],f.checks.push({type:pe.TRUE}),u.checks.push({type:pe.ANCESTOR,ancestor:f,descendant:c}),ir(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var d=Pe(),v=Pe(),h=[{type:pe.ANCESTOR,ancestor:d,descendant:v}];return d.checks=r.checks,r.checks=h,e.compoundCount++,v}}},{name:"subject",modifier:!0,regex:De.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Oe("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===pe.DIRECTED_EDGE?a.type=pe.NODE_TARGET:i===pe.UNDIRECTED_EDGE&&(a.type=pe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];co.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Wm=function(e){for(var r,n,a,i=0;i<co.length;i++){var o=co[i],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,r=o,a=s;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:e}},Gm=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},Km=function(e){var r=this,n=r.inputText=e,a=r[0]=Pe();for(r.length=1,n=Gm(n);;){var i=Wm(n);if(i.expr==null)return Oe("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var c=r[l];if(c.compoundCount>0&&c.edgeCount>0)return Oe("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Oe("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Oe("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Um=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c==null?"":c},r=function(c){return we(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,v=c.value;switch(d){case pe.GROUP:{var h=e(v);return h.substring(0,h.length-1)}case pe.DATA_COMPARE:{var p=c.field,m=c.operator;return"["+p+n(e(m))+r(v)+"]"}case pe.DATA_BOOL:{var g=c.operator,b=c.field;return"["+e(g)+b+"]"}case pe.DATA_EXIST:{var w=c.field;return"["+w+"]"}case pe.META_COMPARE:{var y=c.operator,_=c.field;return"[["+_+n(e(y))+r(v)+"]]"}case pe.STATE:return v;case pe.ID:return"#"+v;case pe.CLASS:return"."+v;case pe.PARENT:case pe.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case pe.ANCESTOR:case pe.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case pe.COMPOUND_SPLIT:{var E=i(c.left,f),x=i(c.subject,f),S=i(c.right,f);return E+(E.length>0?" ":"")+x+S}case pe.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,v,h){return d+(f===c&&h===0?"$":"")+a(v,f)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=i(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Ym={parse:Km,toString:Um},vc=function(e,r,n){var a,i=we(e),o=fe(e),s=we(n),u,l,c=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(u=!i&&!o?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},Xm=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},jm=function(e){return e!==void 0},jo=function(e,r){return e.data(r)},Zm=function(e,r){return e[r]()},qe=[],Ne=function(e,r){return e.checks.every(function(n){return qe[n.type](n,r)})};qe[pe.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};qe[pe.STATE]=function(t,e){var r=t.value;return Vm(r,e)};qe[pe.ID]=function(t,e){var r=t.value;return e.id()===r};qe[pe.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};qe[pe.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return vc(Zm(e,r),n,a)};qe[pe.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return vc(jo(e,r),n,a)};qe[pe.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return Xm(jo(e,r),n)};qe[pe.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,jm(jo(e,r))};qe[pe.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Ne(r,a)&&Ne(n,i)||Ne(n,a)&&Ne(r,i)};qe[pe.NODE_NEIGHBOR]=function(t,e){return Ne(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Ne(t.neighbor,r)})};qe[pe.DIRECTED_EDGE]=function(t,e){return Ne(t.source,e.source())&&Ne(t.target,e.target())};qe[pe.NODE_SOURCE]=function(t,e){return Ne(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Ne(t.target,r)})};qe[pe.NODE_TARGET]=function(t,e){return Ne(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Ne(t.source,r)})};qe[pe.CHILD]=function(t,e){return Ne(t.child,e)&&Ne(t.parent,e.parent())};qe[pe.PARENT]=function(t,e){return Ne(t.parent,e)&&e.children().some(function(r){return Ne(t.child,r)})};qe[pe.DESCENDANT]=function(t,e){return Ne(t.descendant,e)&&e.ancestors().some(function(r){return Ne(t.ancestor,r)})};qe[pe.ANCESTOR]=function(t,e){return Ne(t.ancestor,e)&&e.descendants().some(function(r){return Ne(t.descendant,r)})};qe[pe.COMPOUND_SPLIT]=function(t,e){return Ne(t.subject,e)&&Ne(t.left,e)&&Ne(t.right,e)};qe[pe.TRUE]=function(){return!0};qe[pe.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};qe[pe.FILTER]=function(t,e){var r=t.value;return r(e)};var Qm=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===pe.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(Ne(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},Jm=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Ne(a,e))return!0}return!1},ey={matches:Jm,filter:Qm},vr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||we(e)&&e.match(/^\s*$/)||(Et(e)?this.addQuery({checks:[{type:pe.COLLECTION,value:e.collection()}]}):He(e)?this.addQuery({checks:[{type:pe.FILTER,value:e}]}):we(e)?this.parse(e)||(this.invalid=!0):Ve("A selector must be created from a string; found "))},pr=vr.prototype;[Ym,ey].forEach(function(t){return Ee(pr,t)});pr.text=function(){return this.inputText};pr.size=function(){return this.length};pr.eq=function(t){return this[t]};pr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};pr.addQuery=function(t){this[this.length++]=t};pr.selector=pr.toString;var cr={allAre:function(e){var r=new vr(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new vr(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};cr.allAreNeighbours=cr.allAreNeighbors;cr.has=cr.contains;cr.equal=cr.equals=cr.same;var Tt=function(e,r){return function(a,i,o,s){var u=a,l=this,c;if(u==null?c="":Et(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,d=f.traversalCache=f.traversalCache||{},v=d[r]=d[r]||[],h=Or(c),p=v[h];return p||(v[h]=e.call(l,a,i,o,s))}else return e.call(l,a,i,o,s)}},sn={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Tt(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Zo(t,e,r,n){for(var a=[],i=new mn,o=t.cy(),s=o.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?a.push(l):s&&n(a,i,l)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return t}function pc(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}sn.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Zo(this,t,e,pc)};function gc(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}sn.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Zo(this,t,e,gc)};function ty(t,e,r){gc(t,e,r),pc(t,e,r)}sn.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Zo(this,t,e,ty)};sn.ancestors=sn.parents;var Xn,mc;Xn=mc={data:Ae.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ae.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ae.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ae.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ae.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ae.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Xn.attr=Xn.data;Xn.removeAttr=Xn.removeData;var ry=mc,vi={};function Hi(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}Ee(vi,{degree:Hi(function(t,e){return e.source().same(e.target())?2:1}),indegree:Hi(function(t,e){return e.target().same(t)?1:0}),outdegree:Hi(function(t,e){return e.source().same(t)?1:0})});function Kr(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Ee(vi,{minDegree:Kr("degree",function(t,e){return t<e}),maxDegree:Kr("degree",function(t,e){return t>e}),minIndegree:Kr("indegree",function(t,e){return t<e}),maxIndegree:Kr("indegree",function(t,e){return t>e}),minOutdegree:Kr("outdegree",function(t,e){return t<e}),maxOutdegree:Kr("outdegree",function(t,e){return t>e})});Ee(vi,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Nt,yc,bc=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},au={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){bc(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Nt=yc={position:Ae.data(au),silentPosition:Ae.data(Ee({},au,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){bc(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(ke(e))r?this.silentPosition(e):this.position(e);else if(He(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(ke(e)?(a={x:fe(e.x)?e.x:0,y:fe(e.y)?e.y:0},n=r):we(e)&&fe(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+a.x,y:u.y+a.y};n?s.silentPosition(l):s.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return ke(e)?this.shift(e,!0):we(e)&&fe(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=ke(e)?e:void 0,u=s!==void 0||r!==void 0&&we(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(Zl(s,i,o))}else{var f=n.position();return s=hi(f,i,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=ke(e)?e:void 0,o=i!==void 0||r!==void 0&&we(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var v=d?c.position():{x:0,y:0};r!==void 0?l.position(e,r+v[e]):i!==void 0&&l.position({x:i.x+v.x,y:i.y+v.y})}else{var h=n.position(),p=s?n.parent():null,m=p&&p.length>0,g=m;m&&(p=p[0]);var b=g?p.position():{x:0,y:0};return i={x:h.x-b.x,y:h.y-b.y},e===void 0?i:i[e]}else if(!o)return;return this}};Nt.modelPosition=Nt.point=Nt.position;Nt.modelPositions=Nt.points=Nt.positions;Nt.renderedPoint=Nt.renderedPosition;Nt.relativePoint=Nt.relativePosition;var ny=yc,nn,mr;nn=mr={};mr.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:u,w:o-i,h:u-s}};mr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};mr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),d=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function v(C,k,D){var T=0,P=0,I=k+D;return C>0&&I>0&&(T=k/I*C,P=D/I*C),{biasDiff:T,biasComplementDiff:P}}function h(C,k,D,T){if(D.units==="%")switch(T){case"width":return C>0?D.pfValue*C:0;case"height":return k>0?D.pfValue*k:0;case"average":return C>0&&k>0?D.pfValue*(C+k)/2:0;case"min":return C>0&&k>0?C>k?D.pfValue*k:D.pfValue*C:0;case"max":return C>0&&k>0?C>k?D.pfValue*C:D.pfValue*k:0;default:return 0}else return D.units==="px"?D.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var m=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var g=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var b=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var w=v(c.width.val-f.w,p,m),y=w.biasDiff,_=w.biasComplementDiff,E=v(c.height.val-f.h,g,b),x=E.biasDiff,S=E.biasComplementDiff;s.autoPadding=h(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),d.x=(-y+f.x1+f.x2+_)/2,s.autoHeight=Math.max(f.h,c.height.val),d.y=(-x+f.y1+f.y2+S)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var St=function(e){return e===1/0||e===-1/0?0:e},Lt=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Sr=function(e,r){return r==null?e:Lt(e,r.x1,r.y1,r.x2,r.y2)},Dn=function(e,r,n){return Bt(e,r,n)},Sa=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-o,f.y1=l-o,f.x2=u+o,f.y2=l+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,La(f,1),Lt(e,f.x1,f.y1,f.x2,f.y2)}}},Vi=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),c=Dn(o,"labelWidth",n),f=Dn(o,"labelHeight",n),d=Dn(o,"labelX",n),v=Dn(o,"labelY",n),h=r.pstyle(a+"text-margin-x").pfValue,p=r.pstyle(a+"text-margin-y").pfValue,m=r.isEdge(),g=r.pstyle(a+"text-rotation"),b=r.pstyle("text-outline-width").pfValue,w=r.pstyle("text-border-width").pfValue,y=w/2,_=r.pstyle("text-background-padding").pfValue,E=2,x=f,S=c,C=S/2,k=x/2,D,T,P,I;if(m)D=d-C,T=d+C,P=v-k,I=v+k;else{switch(u.value){case"left":D=d-S,T=d;break;case"center":D=d-C,T=d+C;break;case"right":D=d,T=d+S;break}switch(l.value){case"top":P=v-x,I=v;break;case"center":P=v-k,I=v+k;break;case"bottom":P=v,I=v+x;break}}D+=h-Math.max(b,y)-_-E,T+=h+Math.max(b,y)+_+E,P+=p-Math.max(b,y)-_-E,I+=p+Math.max(b,y)+_+E;var B=n||"main",L=i.labelBounds,N=L[B]=L[B]||{};N.x1=D,N.y1=P,N.x2=T,N.y2=I,N.w=T-D,N.h=I-P;var H=m&&g.strValue==="autorotate",W=g.pfValue!=null&&g.pfValue!==0;if(H||W){var F=H?Dn(i.rstyle,"labelAngle",n):g.pfValue,A=Math.cos(F),R=Math.sin(F),O=(D+T)/2,$=(P+I)/2;if(!m){switch(u.value){case"left":O=T;break;case"right":O=D;break}switch(l.value){case"top":$=I;break;case"bottom":$=P;break}}var V=function(xe,le){return xe=xe-O,le=le-$,{x:xe*A-le*R+O,y:xe*R+le*A+$}},q=V(D,P),z=V(D,I),U=V(T,P),Q=V(T,I);D=Math.min(q.x,z.x,U.x,Q.x),T=Math.max(q.x,z.x,U.x,Q.x),P=Math.min(q.y,z.y,U.y,Q.y),I=Math.max(q.y,z.y,U.y,Q.y)}var J=B+"Rot",ie=L[J]=L[J]||{};ie.x1=D,ie.y1=P,ie.x2=T,ie.y2=I,ie.w=T-D,ie.h=I-P,Lt(e,D,P,T,I),Lt(i.labelBounds.all,D,P,T,I)}return e}},ay=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=wt(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,d,v,h,p,m=s.rstyle,g=u&&a?e.pstyle("bounds-expansion").pfValue:[0],b=function(xe){return xe.pstyle("display").value!=="none"},w=!a||b(e)&&(!l||b(e.source())&&b(e.target()));if(w){var y=0,_=0;a&&r.includeOverlays&&(y=e.pstyle("overlay-opacity").value,y!==0&&(_=e.pstyle("overlay-padding").value));var E=0,x=0;if(a&&(E=e.pstyle("width").pfValue,x=E/2),u&&r.includeNodes){var S=e.position();h=S.x,p=S.y;var C=e.outerWidth(),k=C/2,D=e.outerHeight(),T=D/2;c=h-k,f=h+k,d=p-T,v=p+T,Lt(o,c,d,f,v)}else if(l&&r.includeEdges)if(a&&!i){var P=e.pstyle("curve-style").strValue;if(c=Math.min(m.srcX,m.midX,m.tgtX),f=Math.max(m.srcX,m.midX,m.tgtX),d=Math.min(m.srcY,m.midY,m.tgtY),v=Math.max(m.srcY,m.midY,m.tgtY),c-=x,f+=x,d-=x,v+=x,Lt(o,c,d,f,v),P==="haystack"){var I=m.haystackPts;if(I&&I.length===2){if(c=I[0].x,d=I[0].y,f=I[1].x,v=I[1].y,c>f){var B=c;c=f,f=B}if(d>v){var L=d;d=v,v=L}Lt(o,c-x,d-x,f+x,v+x)}}else if(P==="bezier"||P==="unbundled-bezier"||P==="segments"||P==="taxi"){var N;switch(P){case"bezier":case"unbundled-bezier":N=m.bezierPts;break;case"segments":case"taxi":N=m.linePts;break}if(N!=null)for(var H=0;H<N.length;H++){var W=N[H];c=W.x-x,f=W.x+x,d=W.y-x,v=W.y+x,Lt(o,c,d,f,v)}}}else{var F=e.source(),A=F.position(),R=e.target(),O=R.position();if(c=A.x,f=O.x,d=A.y,v=O.y,c>f){var $=c;c=f,f=$}if(d>v){var V=d;d=v,v=V}c-=x,f+=x,d-=x,v+=x,Lt(o,c,d,f,v)}if(a&&r.includeEdges&&l&&(Sa(o,e,"mid-source"),Sa(o,e,"mid-target"),Sa(o,e,"source"),Sa(o,e,"target")),a){var q=e.pstyle("ghost").value==="yes";if(q){var z=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue;Lt(o,o.x1+z,o.y1+U,o.x2+z,o.y2+U)}}var Q=s.bodyBounds=s.bodyBounds||{};Vs(Q,o),zi(Q,g),La(Q,1),a&&(c=o.x1,f=o.x2,d=o.y1,v=o.y2,Lt(o,c-_,d-_,f+_,v+_));var J=s.overlayBounds=s.overlayBounds||{};Vs(J,o),zi(J,g),La(J,1);var ie=s.labelBounds=s.labelBounds||{};ie.all!=null?Ag(ie.all):ie.all=wt(),a&&r.includeLabels&&(r.includeMainLabels&&Vi(o,e,null),l&&(r.includeSourceLabels&&Vi(o,e,"source"),r.includeTargetLabels&&Vi(o,e,"target")))}return o.x1=St(o.x1),o.y1=St(o.y1),o.x2=St(o.x2),o.y2=St(o.y2),o.w=St(o.x2-o.x1),o.h=St(o.y2-o.y1),o.w>0&&o.h>0&&w&&(zi(o,g),La(o,1)),o},wc=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a},xc=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return Jp([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},iu=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?ou:wc(r),s=o===ou,u=xc(e),l=n.bbCachePosKey===u,c=r.useCache&&l,f=function(p){return p._private.bbCache==null||p._private.styleDirty},d=!c||f(e)||i&&f(e.source())||f(e.target());if(d?(l||e.recalculateRenderedStyle(c),a=ay(e,jn),n.bbCache=a,n.bbCachePosKey=u):a=n.bbCache,!s){var v=e.isNode();a=wt(),(r.includeNodes&&v||r.includeEdges&&!v)&&(r.includeOverlays?Sr(a,n.overlayBounds):Sr(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?Sr(a,n.labelBounds.all):(r.includeMainLabels&&Sr(a,n.labelBounds.mainRot),r.includeSourceLabels&&Sr(a,n.labelBounds.sourceRot),r.includeTargetLabels&&Sr(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},jn={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},ou=wc(jn),su=at(jn);mr.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=jn:t=su(t),e=iu(this[0],t);else{e=wt(),t=t||jn;var r=su(t),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],u=s._private,l=xc(s),c=u.bbCachePosKey===l,f=r.useCache&&c&&!u.styleDirty;s.recalculateRenderedStyle(f)}this.updateCompoundBounds(!t.useCache);for(var d=0;d<n.length;d++){var v=n[d];Sr(e,iu(v,r))}}return e.x1=St(e.x1),e.y1=St(e.y1),e.x2=St(e.x2),e.y2=St(e.y2),e.w=St(e.x2-e.x1),e.h=St(e.y2-e.y1),e};mr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};mr.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),ke(t)){var i=t;t=function(){return i}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=Mg(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};nn.boundingbox=nn.bb=nn.boundingBox;nn.renderedBoundingbox=nn.renderedBoundingBox;var iy=mr,On,sa;On=sa={};var Ec=function(e){e.uppercaseName=zs(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=zs(e.outerName),On[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},On["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-width").pfValue,l=2*n.padding();return s+u+l}else return 1},On["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},On["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Ec({name:"width"});Ec({name:"height"});sa.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};sa.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};sa.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var oy=sa,sy=function(e,r){if(e.isEdge())return r(e)},uy=function(e,r){if(e.isEdge()){var n=e.cy();return hi(r(e),n.zoom(),n.pan())}},ly=function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return hi(o,i,a)})}},cy=function(e){return e.renderer().getControlPoints(e)},fy=function(e){return e.renderer().getSegmentPoints(e)},hy=function(e){return e.renderer().getSourceEndpoint(e)},dy=function(e){return e.renderer().getTargetEndpoint(e)},vy=function(e){return e.renderer().getEdgeMidpoint(e)},uu={controlPoints:{get:cy,mult:!0},segmentPoints:{get:fy,mult:!0},sourceEndpoint:{get:hy},targetEndpoint:{get:dy},midpoint:{get:vy}},py=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},gy=Object.keys(uu).reduce(function(t,e){var r=uu[e],n=py(e);return t[e]=function(){return sy(this,r.get)},r.mult?t[n]=function(){return ly(this,r.get)}:t[n]=function(){return uy(this,r.get)},t},{}),my=Ee({},ny,iy,oy,gy);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Cc=function(e,r){this.recycle(e,r)};function kn(){return!1}function Ta(){return!0}Cc.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=kn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ta:kn):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ta;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ta;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ta,this.stopPropagation()},isDefaultPrevented:kn,isPropagationStopped:kn,isImmediatePropagationStopped:kn};var _c=/^([^.]+)(\.(?:[^.]+))?$/,yy=".*",Sc={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},lu=Object.keys(Sc),by={};function pi(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:by,e=arguments.length>1?arguments[1]:void 0,r=0;r<lu.length;r++){var n=lu[r];this[n]=t[n]||Sc[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var gr=pi.prototype,Tc=function(e,r,n,a,i,o,s){He(a)&&(i=a,a=null),s&&(o==null?o=s:o=Ee({},o,s));for(var u=Le(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!hr(c)){var f=c.match(_c);if(f){var d=f[1],v=f[2]?f[2]:null,h=r(e,c,d,v,a,i,o);if(h===!1)break}}}},cu=function(e,r){return e.addEventFields(e.context,r),new Cc(r.type,r)},wy=function(e,r,n){if(Op(n)){r(e,n);return}else if(ke(n)){r(e,cu(e,n));return}for(var a=Le(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!hr(o)){var s=o.match(_c);if(s){var u=s[1],l=s[2]?s[2]:null,c=cu(e,{type:u,namespace:l,target:e.context});r(e,c)}}}};gr.on=gr.addListener=function(t,e,r,n,a){return Tc(this,function(i,o,s,u,l,c,f){He(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:f})},t,e,r,n,a),this};gr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};gr.removeListener=gr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=ag(this.listeners));for(var i=this.listeners,o=function(l){var c=i[l];Tc(a,function(f,d,v,h,p,m){if((c.type===v||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!m||c.callback===m))return i.splice(l,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};gr.removeAllListeners=function(){return this.removeListener("*")};gr.emit=gr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Le(e)||(e=[e]),wy(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(c){var f=n[c];if(f.type===o.type&&(!f.namespace||f.namespace===o.namespace||f.namespace===yy)&&i.eventMatches(i.context,f,o)){var d=[o];e!=null&&og(d,e),i.beforeEmit(i.context,f,o),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(p){return p!==f}));var v=i.callbackContext(i.context,f,o),h=f.callback.apply(v,d);i.afterEmit(i.context,f,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<a;u++)s(u);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var xy={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ia(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Da=function(e){return we(e)?new vr(e):e},Dc={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new pi(xy,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=Da(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=Da(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=Da(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=Da(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Ae.eventAliasesOn(Dc);var kc={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(we(e)||Et(e))return new vr(e).filter(this);if(He(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){we(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(we(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,u=o?i:a,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],d=f._private.data.id,v=l.hasElementWithId(d);v||n.push(f)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,u=function(c,f,d){for(var v=0;v<c.length;v++){var h=c[v],p=h._private.data.id,m=f.hasElementWithId(p);m?i.merge(h):d.push(h)}};return u(o,s,n),u(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&we(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!i.has(u);if(l){var c=this.length++;this[c]=s,i.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u>n&&(n=u,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u<n&&(n=u,a=s)}return{value:n,ele:a}}},Me=kc;Me.u=Me["|"]=Me["+"]=Me.union=Me.or=Me.add;Me["\\"]=Me["!"]=Me["-"]=Me.difference=Me.relativeComplement=Me.subtract=Me.not;Me.n=Me["&"]=Me["."]=Me.and=Me.intersection=Me.intersect;Me["^"]=Me["(+)"]=Me["(-)"]=Me.symmetricDifference=Me.symdiff=Me.xor;Me.fnFilter=Me.filterFn=Me.stdFilter=Me.filter;Me.complement=Me.abscomp=Me.absoluteComplement;var Ey={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Ic=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?qo:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},Ya={forEach:function(e,r){if(He(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!He(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Ic)},zDepth:function(){var e=this[0];if(!!e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:qo-1}else{var i=r.source,o=r.target,s=i.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};Ya.each=Ya.forEach;var Cy=function(){var e="undefined",r=(typeof Symbol=="undefined"?"undefined":Ue(Symbol))!=e&&Ue(Symbol.iterator)!=e;r&&(Ya[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return Bl({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};Cy();var _y=at({nodeDimensionsIncludeLabels:!1}),Ra={layoutDimensions:function(e){e=_y(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(_){return!_.isParent()}),i=this.cy(),o=r.eles,s=function(E){return E.id()},u=qn(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(E,x,S){var C={x:x.x1+x.w/2,y:x.y1+x.h/2},k={x:(S.x-C.x)*E,y:(S.y-C.y)*E};return{x:C.x+k.x,y:C.y+k.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var E=wt(),x=0;x<a.length;x++){var S=a[x],C=u(S,x);Og(E,C.x,C.y)}return E},d=f(),v=qn(function(_,E){var x=u(_,E);if(c){var S=Math.abs(r.spacingFactor);x=l(S,d,x)}return r.transform!=null&&(x=r.transform(_,x)),x},s);if(r.animate){for(var h=0;h<a.length;h++){var p=a[h],m=v(p,h),g=r.animateFilter==null||r.animateFilter(p,h);if(g){var b=p.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else p.position(m)}if(r.fit){var w=i.animation({fit:{boundingBox:o.boundingBoxAt(v),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}else if(r.zoom!==void 0&&r.pan!==void 0){var y=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}e.animations.forEach(function(_){return _.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),yn.all(e.animations.map(function(_){return _.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(v),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Ee({},e,{eles:this}))}};Ra.createLayout=Ra.makeLayout=Ra.layout;function Mc(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function gi(t,e){return t=Or(t),function(n){return Mc(t,e,n)}}function mi(t,e){t=Or(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Mc(t,r,a)}}var rt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(!!a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i!=null?i:r?a.style().getDefaultProperty(e):null}},numericStyle:function(e){var r=this[0];if(!!r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(!!r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(ke(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(we(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function qi(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Qo(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||qi(i,n);var u=s.source,l=s.target;return r(u)&&(!o||qi(u,r))&&(u===l||r(l)&&(!o||qi(l,r)))}}}var bn=gi("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});rt.takesUpSpace=mi("takesUpSpace",Qo({ok:bn}));var Sy=gi("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&bn(t)}),Ty=gi("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&bn(t)});rt.interactive=mi("interactive",Qo({ok:Sy,parentOk:Ty,edgeOkViaNode:bn}));rt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Dy=gi("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&bn(t)}),ky=bn;rt.visible=mi("visible",Qo({ok:Dy,edgeOkViaNode:ky}));rt.hidden=function(){var t=this[0];if(t)return!t.visible()};rt.isBundledBezier=mi("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});rt.bypass=rt.css=rt.style;rt.renderedCss=rt.renderedStyle;rt.removeBypass=rt.removeCss=rt.removeStyle;rt.pstyle=rt.parsedStyle;var fr={};function fu(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&He(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Le(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[t.field]=t.value,c&&r.push(u))}var d=this.spawn(r);d.updateStyle(),d.emit(t.event),o&&d.emit(o)}return this}}function wn(t){fr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},fr[t.on]=fu({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),fr[t.off]=fu({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}wn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});wn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});wn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});wn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});fr.deselect=fr.unselect;fr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};wn({field:"active",on:"activate",off:"unactivate"});wn({field:"pannable",on:"panify",off:"unpanify"});fr.inactive=function(){var t=this[0];if(t)return!t._private.active};var ut={},hu=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(!!s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],d=f.source(),v=f.target();if(e.noIncomingEdges&&v===s&&d!==s||e.noOutgoingEdges&&d===s&&v!==s){u=!0;break}}u||i.push(s)}}return this.spawn(i,!0).filter(n)}},du=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(!!o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===o?(a.push(l),a.push(f)):e.incoming&&f===o&&(a.push(l),a.push(c))}}return this.spawn(a,!0).filter(r)}},vu=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();i[c]||(i[c]=!0,a.push(l),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};ut.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Ee(ut,{roots:hu({noIncomingEdges:!0}),leaves:hu({noOutgoingEdges:!0}),outgoers:Tt(du({outgoing:!0}),"outgoers"),successors:vu({outgoing:!0}),incomers:Tt(du({incoming:!0}),"incomers"),predecessors:vu({incoming:!0})});Ee(ut,{neighborhood:Tt(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],u=s.source(),l=s.target(),c=a===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});ut.neighbourhood=ut.neighborhood;ut.closedNeighbourhood=ut.closedNeighborhood;ut.openNeighbourhood=ut.openNeighborhood;Ee(ut,{source:Tt(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Tt(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:pu({attr:"source"}),targets:pu({attr:"target"})});function pu(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}Ee(ut,{edgesWith:Tt(gu(),"edgesWith"),edgesTo:Tt(gu({thisIsSrc:!0}),"edgesTo")});function gu(t){return function(r){var n=[],a=this._private.cy,i=t||{};we(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),d=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),v=f||d;!v||(i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(l)}return this.spawn(n,!0)}}Ee(ut,{connectedEdges:Tt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(!!a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Tt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];!a.isEdge()||(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Tt(mu(),"parallelEdges"),codirectedEdges:Tt(mu({codirected:!0}),"codirectedEdges")});function mu(t){var e={codirected:!1};return t=Ee({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var u=i[s],l=u._private,c=l.source,f=c._private.data.id,d=l.data.target,v=c._private.edges,h=0;h<v.length;h++){var p=v[h],m=p._private.data,g=m.target,b=m.source,w=g===d&&b===f,y=f===g&&d===b;(o.codirected&&w||!o.codirected&&(w||y))&&a.push(p)}return this.spawn(a,!0).filter(n)}}Ee(ut,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=n.collection();o.push(c);var f=i[0];s(f,c),r.bfs({directed:!1,roots:f,visit:function(v){return s(v,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(v){r.has(v)&&c.has(v.source())&&c.has(v.target())&&c.merge(v)})})};do u();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});ut.componentsOf=ut.components;var nt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e===void 0){Ve("A collection must have a reference to the core");return}var a=new Vt,i=!1;if(!r)r=[];else if(r.length>0&&ke(r[0])&&!ia(r[0])){i=!0;for(var o=[],s=new mn,u=0,l=r.length;u<l;u++){var c=r[u];c.data==null&&(c.data={});var f=c.data;if(f.id==null)f.id=Xl();else if(e.hasElementWithId(f.id)||s.has(f.id))continue;var d=new fi(e,c,!1);o.push(d),s.add(f.id)}r=o}this.length=0;for(var v=0,h=r.length;v<h;v++){var p=r[v][0];if(p!=null){var m=p._private.data.id;(!n||!a.has(m))&&(n&&a.set(m,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(g){this.lazyMap=g},rebuildMap:function(){for(var b=this.lazyMap=new Vt,w=this.eles,y=0;y<w.length;y++){var _=w[y];b.set(_.id(),{index:y,ele:_})}}},n&&(this._private.map=a),i&&this.restore()},Re=fi.prototype=nt.prototype=Object.create(Array.prototype);Re.instanceString=function(){return"collection"};Re.spawn=function(t,e){return new nt(this.cy(),t,e)};Re.spawnSelf=function(){return this.spawn(this)};Re.cy=function(){return this._private.cy};Re.renderer=function(){return this._private.cy.renderer()};Re.element=function(){return this[0]};Re.collection=function(){return Nl(this)?this:new nt(this._private.cy,[this])};Re.unique=function(){return new nt(this._private.cy,this,!0)};Re.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Re.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new nt(e)};Re.$id=Re.getElementById;Re.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};Re.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Re.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Re.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(ke(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,u=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),u!=null&&u!=a.target&&(o.target=""+u,i=!0),i&&(e=e.move(o))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(p,m,g){var b=t[p];b!=null&&b!==n[p]&&(b?e[m]():e[g]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var d={data:Ht(n.data),position:Ht(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var v=0;return n.classes.forEach(function(h){return d.classes+=v++===0?h:" "+h}),d}}};Re.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};Re.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new fi(t,a,!1);e.push(i)}return new nt(t,e)};Re.copy=Re.clone;Re.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,u=0,l=r.length;u<l;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var f,d=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var v=s[f],h=v._private,p=h.data;if(v.clearTraversalCache(),!(!e&&!h.removed)){if(p.id===void 0)p.id=Xl();else if(fe(p.id))p.id=""+p.id;else if(hr(p.id)||!we(p.id)){Ve("Can not create element with invalid string ID `"+p.id+"`"),d();continue}else if(n.hasElementWithId(p.id)){Ve("Can not create second element with ID `"+p.id+"`"),d();continue}}var m=p.id;if(v.isNode()){var g=h.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(v.isEdge()){for(var b=v,w=["source","target"],y=w.length,_=!1,E=0;E<y;E++){var x=w[E],S=p[x];fe(S)&&(S=p[x]=""+p[x]),S==null||S===""?(Ve("Can not create edge `"+m+"` with unspecified "+x),_=!0):n.hasElementWithId(S)||(Ve("Can not create edge `"+m+"` with nonexistant "+x+" `"+S+"`"),_=!0)}if(_){d();continue}var C=n.getElementById(p.source),k=n.getElementById(p.target);C.same(k)?C._private.edges.push(b):(C._private.edges.push(b),k._private.edges.push(b)),b._private.source=C,b._private.target=k}h.map=new Vt,h.map.set(m,{ele:v,index:0}),h.removed=!1,e&&n.addToPool(v)}for(var D=0;D<i.length;D++){var T=i[D],P=T._private.data;fe(P.parent)&&(P.parent=""+P.parent);var I=P.parent,B=I!=null;if(B){var L=n.getElementById(I);if(L.empty())P.parent=void 0;else{for(var N=!1,H=L;!H.empty();){if(T.same(H)){N=!0,P.parent=void 0;break}H=H.parent()}N||(L[0]._private.children.push(T),T._private.parent=L[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var W=s.length===r.length?r:new nt(n,s),F=0;F<W.length;F++){var A=W[F];A.isNode()||(A.parallelEdges().clearTraversalCache(),A.source().clearTraversalCache(),A.target().clearTraversalCache())}var R;a.hasCompoundNodes?R=n.collection().merge(W).merge(W.connectedNodes()).merge(W.parent()):R=W,R.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?W.emitAndNotify("add"):e&&W.emit("add")}return r};Re.removed=function(){var t=this[0];return t&&t._private.removed};Re.inside=function(){var t=this[0];return t&&!t._private.removed};Re.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(I){for(var B=I._private.edges,L=0;L<B.length;L++)u(B[L])}function s(I){for(var B=I._private.children,L=0;L<B.length;L++)u(B[L])}function u(I){var B=a[I.id()];e&&I.removed()||B||(a[I.id()]=!0,I.isNode()?(n.push(I),o(I),s(I)):n.unshift(I))}for(var l=0,c=r.length;l<c;l++){var f=r[l];u(f)}function d(I,B){var L=I._private.edges;dr(L,B),I.clearTraversalCache()}function v(I){I.clearTraversalCache()}var h=[];h.ids={};function p(I,B){B=B[0],I=I[0];var L=I._private.children,N=I.id();dr(L,B),B._private.parent=null,h.ids[N]||(h.ids[N]=!0,h.push(I))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var m=0;m<n.length;m++){var g=n[m];if(g.isEdge()){var b=g.source()[0],w=g.target()[0];d(b,g),d(w,g);for(var y=g.parallelEdges(),_=0;_<y.length;_++){var E=y[_];v(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var x=g.parent();x.length!==0&&p(x,g)}e&&(g._private.removed=!0)}var S=i._private.elements;i._private.hasCompoundNodes=!1;for(var C=0;C<S.length;C++){var k=S[C];if(k.isParent()){i._private.hasCompoundNodes=!0;break}}var D=new nt(this.cy(),n);D.size()>0&&(t?D.emitAndNotify("remove"):e&&D.emit("remove"));for(var T=0;T<h.length;T++){var P=h[T];(!e||!P.removed())&&P.updateStyle()}return D};Re.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var h=r[v],p=h._private.data;h.isEdge()&&(u&&(p.source=o),l&&(p.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var v=r.remove(n,a);v.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var p=r[h],m=p._private.data;p.isNode()&&(m.parent=d)}v.restore(n,a)}),r.emitAndNotify("move")}}return this};[lc,$m,Ba,cr,sn,ry,vi,my,Dc,kc,Ey,Ya,Ra,rt,fr,ut].forEach(function(t){Ee(Re,t)});var Iy={add:function(e){var r,n=this;if(Et(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new nt(n,i)}}else if(Le(e)){var u=e;r=new nt(n,u)}else if(ke(e)&&(Le(e.nodes)||Le(e.edges))){for(var l=e,c=[],f=["nodes","edges"],d=0,v=f.length;d<v;d++){var h=f[d],p=l[h];if(Le(p))for(var m=0,g=p.length;m<g;m++){var b=Ee({group:h},p[m]);c.push(b)}}r=new nt(n,c)}else{var w=e;r=new fi(n,w).collection()}return r},remove:function(e){if(!Et(e)){if(we(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function My(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array!="undefined";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=c?new Float32Array(u):new Array(u);function v(k,D){return 1-3*D+3*k}function h(k,D){return 3*D-6*k}function p(k){return 3*k}function m(k,D,T){return((v(D,T)*k+h(D,T))*k+p(D))*k}function g(k,D,T){return 3*v(D,T)*k*k+2*h(D,T)*k+p(D)}function b(k,D){for(var T=0;T<a;++T){var P=g(D,t,r);if(P===0)return D;var I=m(D,t,r)-k;D-=I/P}return D}function w(){for(var k=0;k<u;++k)d[k]=m(k*l,t,r)}function y(k,D,T){var P,I,B=0;do I=D+(T-D)/2,P=m(I,t,r)-k,P>0?T=I:D=I;while(Math.abs(P)>o&&++B<s);return I}function _(k){for(var D=0,T=1,P=u-1;T!==P&&d[T]<=k;++T)D+=l;--T;var I=(k-d[T])/(d[T+1]-d[T]),B=D+I*l,L=g(B,t,r);return L>=i?b(k,B):L===0?B:y(k,D,D+l)}var E=!1;function x(){E=!0,(t!==e||r!==n)&&w()}var S=function(D){return E||x(),t===e&&r===n?D:D===0?0:D===1?1:m(_(D),e,n)};S.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var C="generateBezier("+[t,e,r,n]+")";return S.toString=function(){return C},S}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Ay=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),u=e(n,a,s),l=1/6*(i.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,d,v,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,d=o!==null,d?(l=n(a,i),v=l/o*f):v=f;h=r(h||s,v),u.push(1+h.x),l+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return d?function(p){return u[p*(u.length-1)|0]}:l}}(),Be=function(e,r,n,a){var i=My(e,r,n,a);return function(o,s,u){return o+(s-o)*i(u)}},Na={linear:function(e,r,n){return e+(r-e)*n},ease:Be(.25,.1,.25,1),"ease-in":Be(.42,0,1,1),"ease-out":Be(0,0,.58,1),"ease-in-out":Be(.42,0,.58,1),"ease-in-sine":Be(.47,0,.745,.715),"ease-out-sine":Be(.39,.575,.565,1),"ease-in-out-sine":Be(.445,.05,.55,.95),"ease-in-quad":Be(.55,.085,.68,.53),"ease-out-quad":Be(.25,.46,.45,.94),"ease-in-out-quad":Be(.455,.03,.515,.955),"ease-in-cubic":Be(.55,.055,.675,.19),"ease-out-cubic":Be(.215,.61,.355,1),"ease-in-out-cubic":Be(.645,.045,.355,1),"ease-in-quart":Be(.895,.03,.685,.22),"ease-out-quart":Be(.165,.84,.44,1),"ease-in-out-quart":Be(.77,0,.175,1),"ease-in-quint":Be(.755,.05,.855,.06),"ease-out-quint":Be(.23,1,.32,1),"ease-in-out-quint":Be(.86,0,.07,1),"ease-in-expo":Be(.95,.05,.795,.035),"ease-out-expo":Be(.19,1,.22,1),"ease-in-out-expo":Be(1,0,0,1),"ease-in-circ":Be(.6,.04,.98,.335),"ease-out-circ":Be(.075,.82,.165,1),"ease-in-out-circ":Be(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Na.linear;var a=Ay(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":Be};function yu(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function bu(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Ur(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=bu(t,a),s=bu(e,a);if(fe(o)&&fe(s))return yu(i,o,s,r,n);if(Le(o)&&Le(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(c!=null&&f!=null){var d=yu(i,c,f,r,n);u.push(d)}else u.push(f)}return u}}function Py(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,u=o.startTime,l=n?t:t.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=Na.linear;else{var f;if(we(s)){var d=c.parse("transition-timing-function",s);f=d.value}else f=s;var v,h;we(f)?(v=f,h=[]):(v=f[1],h=f.slice(2).map(function(W){return+W})),h.length>0?(v==="spring"&&h.push(o.duration),o.easingImpl=Na[v].apply(null,h)):o.easingImpl=Na[v]}var p=o.easingImpl,m;if(o.duration===0?m=1:m=(r-u)/o.duration,o.applying&&(m=o.progress),m<0?m=0:m>1&&(m=1),o.delay==null){var g=o.startPosition,b=o.position;if(b&&a&&!t.locked()){var w={};In(g.x,b.x)&&(w.x=Ur(g.x,b.x,m,p)),In(g.y,b.y)&&(w.y=Ur(g.y,b.y,m,p)),t.position(w)}var y=o.startPan,_=o.pan,E=i.pan,x=_!=null&&n;x&&(In(y.x,_.x)&&(E.x=Ur(y.x,_.x,m,p)),In(y.y,_.y)&&(E.y=Ur(y.y,_.y,m,p)),t.emit("pan"));var S=o.startZoom,C=o.zoom,k=C!=null&&n;k&&(In(S,C)&&(i.zoom=Un(i.minZoom,Ur(S,C,m,p),i.maxZoom)),t.emit("zoom")),(x||k)&&t.emit("viewport");var D=o.style;if(D&&D.length>0&&a){for(var T=0;T<D.length;T++){var P=D[T],I=P.name,B=P,L=o.startStyle[I],N=c.properties[L.name],H=Ur(L,B,m,p,N);c.overrideBypass(t,I,H)}t.emit("style")}}return o.progress=m,m}function In(t,e){return t==null||e==null?!1:fe(t)&&fe(e)?!0:!!(t&&e)}function Oy(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function wu(t,e){var r=e._private.aniEles,n=[];function a(c,f){var d=c._private,v=d.animation.current,h=d.animation.queue,p=!1;if(v.length===0){var m=h.shift();m&&v.push(m)}for(var g=function(E){for(var x=E.length-1;x>=0;x--){var S=E[x];S()}E.splice(0,E.length)},b=v.length-1;b>=0;b--){var w=v[b],y=w._private;if(y.stopped){v.splice(b,1),y.hooked=!1,y.playing=!1,y.started=!1,g(y.frames);continue}!y.playing&&!y.applying||(y.playing&&y.applying&&(y.applying=!1),y.started||Oy(c,w,t),Py(c,w,t,f),y.applying&&(y.applying=!1),g(y.frames),y.step!=null&&y.step(t),w.completed()&&(v.splice(b,1),y.hooked=!1,y.playing=!1,y.started=!1,g(y.completes)),p=!0)}return!f&&v.length===0&&h.length===0&&n.push(c),p}for(var i=!1,o=0;o<r.length;o++){var s=r[o],u=a(s);i=i||u}var l=a(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var Ly={animate:Ae.animate(),animation:Ae.animation(),animated:Ae.animated(),clearQueue:Ae.clearQueue(),delay:Ae.delay(),delayAnimation:Ae.delayAnimation(),stop:Ae.stop(),addToAnimationPool:function(e){var r=this;!r.styleEnabled()||r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){!e._private.animationsRunning||Ga(function(i){wu(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){wu(o,e)},n.beforeRenderPriorities.animations):r()}},By={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ia(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},ka=function(e){return we(e)?new vr(e):e},Ac={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new pi(By,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,ka(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,ka(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,ka(r),n),this},once:function(e,r,n){return this.emitter().one(e,ka(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Ae.eventAliasesOn(Ac);var fo={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};fo.jpeg=fo.jpg;var za={layout:function(e){var r=this;if(e==null){Ve("Layout options must be specified to make a layout");return}if(e.name==null){Ve("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){Ve("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;we(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(Ee({},e,{cy:r,eles:i}));return o}};za.createLayout=za.makeLayout=za.layout;var Ry={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(!!n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},Ny=at({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ho={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){Ve("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Oe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=Ny(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};ho.invalidateDimensions=ho.resize;var Fa={collection:function(e,r){return we(e)?this.$(e):Et(e)?e.collection():Le(e)?new nt(this,e,r):new nt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Fa.elements=Fa.filter=Fa.$;var ct={},Bn="t",zy="f";ct.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};ct.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},u=0;u<r.length;u++){var l=r[u],c=t[u]===Bn,f=e[u]===Bn,d=c!==f,v=l.mappedProperties.length>0;if(d||f&&v){var h=void 0;d&&v||d?h=l.properties:v&&(h=l.mappedProperties);for(var p=0;p<h.length;p++){for(var m=h[p],g=m.name,b=!1,w=u+1;w<r.length;w++){var y=r[w],_=e[w]===Bn;if(!!_&&(b=y.properties[m.name]!=null,b))break}!s[g]&&!b&&(s[g]=!0,o.push(g))}}}return n[a]=o,o};ct.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=Bn:r+=zy}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};ct.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===Bn;if(!!s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];a[l.name]=l}}return n[e]=a,a};ct.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var u=a[s],l=e[u],c=r.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,d=f.fnValue=l.value(r);if(d===f.prevFnValue)continue}var v=i[u]={prev:c};n.applyParsedProperty(r,l),v.next=r.pstyle(u),v.next&&v.next.bypass&&(v.next=v.next.bypassed)}}return{diffProps:i}};ct.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(J,ie,ve){return r.getPropertiesHash(J,ie,ve)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var c=a[l];e.styleKeys[c]=[Zr,An]}for(var f=function(J,ie){return e.styleKeys[ie][0]=Wn(J,e.styleKeys[ie][0])},d=function(J,ie){return e.styleKeys[ie][1]=Gn(J,e.styleKeys[ie][1])},v=function(J,ie){f(J,ie),d(J,ie)},h=function(J,ie){for(var ve=0;ve<J.length;ve++){var xe=J.charCodeAt(ve);f(xe,ie),d(xe,ie)}},p=2e9,m=function(J){return-128<J&&J<128&&Math.floor(J)!==J?p-(J*1024|0):J},g=0;g<n.length;g++){var b=n[g],w=u[b];if(w!=null){var y=this.properties[b],_=y.type,E=y.groupKey,x=void 0;y.hashOverride!=null?x=y.hashOverride(t,w):w.pfValue!=null&&(x=w.pfValue);var S=y.enums==null?w.value:null,C=x!=null,k=S!=null,D=C||k,T=w.units;if(_.number&&D&&!_.multiple){var P=C?x:S;v(m(P),E),!C&&T!=null&&h(T,E)}else h(w.strValue,E)}}for(var I=[Zr,An],B=0;B<a.length;B++){var L=a[B],N=e.styleKeys[L];I[0]=Wn(N[0],I[0]),I[1]=Gn(N[1],I[1])}e.styleKey=Qp(I[0],I[1]);var H=e.styleKeys;e.labelDimsKey=ar(H.labelDimensions);var W=i(t,["label"],H.labelDimensions);if(e.labelKey=ar(W),e.labelStyleKey=ar(ba(H.commonLabel,W)),!s){var F=i(t,["source-label"],H.labelDimensions);e.sourceLabelKey=ar(F),e.sourceLabelStyleKey=ar(ba(H.commonLabel,F));var A=i(t,["target-label"],H.labelDimensions);e.targetLabelKey=ar(A),e.targetLabelStyleKey=ar(ba(H.commonLabel,A))}if(s){var R=e.styleKeys,O=R.nodeBody,$=R.nodeBorder,V=R.backgroundImage,q=R.compound,z=R.pie,U=[O,$,V,q,z].filter(function(Q){return Q!=null}).reduce(ba,[Zr,An]);e.nodeKey=ar(U),e.hasPie=z!=null&&z[0]!==Zr&&z[1]!==An}return o!==e.styleKey};ct.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};ct.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,u=n.bypass,l=a[n.name],c=l&&l.bypass,f=t._private,d="mapping",v=function(O){return O==null?null:O.pfValue!=null?O.pfValue:O.value},h=function(){var O=v(l),$=v(n);r.checkTriggers(t,n.name,O,$)};if(n&&n.name.substr(0,3)==="pie"&&Oe("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,h(),!0):!1:(h(),!0);var p=function(){Oe("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var m=n.field.split("."),g=f.data,b=0;b<m.length&&g;b++){var w=m[b];g=g[w]}if(g==null)return p(),!1;var y;if(fe(g)){var _=n.fieldMax-n.fieldMin;_===0?y=0:y=(g-n.fieldMin)/_}else return Oe("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+g+"` for `"+t.id()+"` is non-numeric)"),!1;if(y<0?y=0:y>1&&(y=1),s.color){var E=n.valueMin[0],x=n.valueMax[0],S=n.valueMin[1],C=n.valueMax[1],k=n.valueMin[2],D=n.valueMax[2],T=n.valueMin[3]==null?1:n.valueMin[3],P=n.valueMax[3]==null?1:n.valueMax[3],I=[Math.round(E+(x-E)*y),Math.round(S+(C-S)*y),Math.round(k+(D-k)*y),Math.round(T+(P-T)*y)];i={bypass:n.bypass,name:n.name,value:I,strValue:"rgb("+I[0]+", "+I[1]+", "+I[2]+")"}}else if(s.number){var B=n.valueMin+(n.valueMax-n.valueMin)*y;i=this.parse(n.name,B,n.bypass,d)}else return!1;if(!i)return p(),!1;i.mapping=n,n=i;break}case o.data:{for(var L=n.field.split("."),N=f.data,H=0;H<L.length&&N;H++){var W=L[H];N=N[W]}if(N!=null&&(i=this.parse(n.name,N,n.bypass,d)),!i)return p(),!1;i.mapping=n,n=i;break}case o.fn:{var F=n.value,A=n.fnValue!=null?n.fnValue:F(t);if(n.prevFnValue=A,A==null)return Oe("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,A,n.bypass,d),!i)return Oe("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Ht(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):c?l.bypassed=n:a[n.name]=n,h(),!0};ct.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],u=a[s];u!=null&&(u.bypass?u.bypassed=null:a[s]=null)}}};ct.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};ct.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},u=!1,l=0;l<a.length;l++){var c=a[l],f=t.pstyle(c),d=e[c];if(!!d){var v=d.prev,h=v,p=d.next!=null?d.next:f,m=!1,g=void 0,b=1e-6;!h||(fe(h.pfValue)&&fe(p.pfValue)?(m=p.pfValue-h.pfValue,g=h.pfValue+b*m):fe(h.value)&&fe(p.value)?(m=p.value-h.value,g=h.value+b*m):Le(h.value)&&Le(p.value)&&(m=h.value[0]!==p.value[0]||h.value[1]!==p.value[1]||h.value[2]!==p.value[2],g=h.strValue),m&&(s[c]=p.strValue,this.applyBypass(t,c,g),u=!0))}}if(!u)return;n.transitioning=!0,new yn(function(w){o>0?t.delayAnimation(o).play().promise().then(w):w()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};ct.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(r,n)&&i(o)};ct.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};ct.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),e==="curve-style"&&(r==="bezier"||n==="bezier")&&a.triggersBoundsOfParallelBeziers&&t.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})};ct.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var ua={};ua.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var u=a.properties[s],l=u.name,c=this.parse(l,r,!0);c&&i.push(c)}}else if(we(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(ke(e)){var d=e;n=r;for(var v=Object.keys(d),h=0;h<v.length;h++){var p=v[h],m=d[p];if(m===void 0&&(m=d[ci(p)]),m!==void 0){var g=this.parse(p,m,!0);g&&i.push(g)}}}else return!1;if(i.length===0)return!1;for(var b=!1,w=0;w<t.length;w++){for(var y=t[w],_={},E=void 0,x=0;x<i.length;x++){var S=i[x];if(n){var C=y.pstyle(S.name);E=_[S.name]={prev:C}}b=this.applyParsedProperty(y,Ht(S))||b,n&&(E.next=y.pstyle(S.name))}b&&this.updateStyleHints(y),n&&this.updateTransitions(y,_,o)}return b};ua.overrideBypass=function(t,e,r){e=Vo(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,l,r)}};ua.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};ua.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var f="",d=this.parse(u,f,!0),v=o[l.name]={prev:c};this.applyParsedProperty(i,d),v.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var Jo={};Jo.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Jo.containerCss=function(t){var e=this._private.cy,r=e.container();if($e&&r&&$e.getComputedStyle)return $e.getComputedStyle(r).getPropertyValue(t)};var Wt={};Wt.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Wt.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[ci(i.name)]=o)}return n}};Wt.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a!=null?a:t.cy().style().getDefaultProperty(e)[r][0]};Wt.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(r&&i.number&&s!=null&&fe(s)){var c=t.cy().zoom(),f=function(m){return m*c},d=function(m,g){return f(m)+g},v=Le(s),h=v?u.every(function(p){return p!=null}):u!=null;return h?v?s.map(function(p,m){return d(p,u[m])}).join(" "):d(s,u):v?s.map(function(p){return we(p)?p:""+f(p)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};Wt.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(ke(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};Wt.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],u=n[s],l=a[s]||a[Vo(s)],c=this.parse(l.name,u);c&&r.push(c)}return r};Wt.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Wn(s,n[0]),n[1]=Gn(s,n[1]);else for(o=i.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=Wn(s,n[0]),n[1]=Gn(s,n[1]);return n};Wt.getPropertiesHash=Wt.getNonDefaultPropertiesHash;var yi={};yi.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var u=o[s],l=i[u];e.css(u,l)}}return e};yi.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};yi.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var es={};es.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Oe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new vr(f);if(d.invalid){Oe("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var v=c[2],h=!1;i=v;for(var p=[];;){var m=i.match(/^\s*$/);if(m)break;var g=i.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){Oe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),h=!0;break}o=g[0];var b=g[1],w=g[2],y=e.properties[b];if(!y){Oe("Skipping property: Invalid property name in: "+o),u();continue}var _=r.parse(b,w);if(!_){Oe("Skipping property: Invalid property definition in: "+o),u();continue}p.push({name:b,val:w}),u()}if(h){s();break}r.selector(f);for(var E=0;E<p.length;E++){var x=p[E];r.css(x.name,x.val)}s()}return r};es.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var et={};(function(){var t=Xe,e=Fp,r=Hp,n=Vp,a=qp,i=function(U){return"^"+U+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(U){var Q=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+U+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+Q+")\\s*\\,\\s*("+Q+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];et.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(U,Q){switch(U.length){case 2:return Q[0]!=="deg"&&Q[0]!=="rad"&&Q[1]!=="deg"&&Q[1]!=="rad";case 1:return we(U[0])||Q[0]==="deg"||Q[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(U){var Q=U.length;return Q===1||Q===2||Q===4}}};var u={zeroNonZero:function(U,Q){return(U==null||Q==null)&&U!==Q||U==0&&Q!=0?!0:U!=0&&Q==0},any:function(U,Q){return U!=Q},emptyNonEmpty:function(U,Q){var J=hr(U),ie=hr(Q);return J&&!ie||!J&&ie}},l=et.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],v=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],h=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],p=[{name:"events",type:l.bool},{name:"text-events",type:l.bool}],m=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.nonNegativeInt,triggersZOrder:u.any}],g=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any}],b=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any}],w=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],y=function(U,Q){return Q.value==="label"?-U.poolIndex():Q.pfValue},_=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:y},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:y},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle}],x=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],S=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],C=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],k=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],D=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],T=[];et.pieBackgroundN=16,T.push({name:"pie-size",type:l.sizeMaybePercent});for(var P=1;P<=et.pieBackgroundN;P++)T.push({name:"pie-"+P+"-background-color",type:l.color}),T.push({name:"pie-"+P+"-background-size",type:l.percent}),T.push({name:"pie-"+P+"-background-opacity",type:l.zeroOneNumber});var I=[],B=et.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(z){B.forEach(function(U){var Q=U+"-"+z.name,J=z.type,ie=z.triggersBounds;I.push({name:Q,type:J,triggersBounds:ie})})},{});var L=et.properties=[].concat(p,w,m,g,b,k,h,v,c,f,d,_,E,x,T,S,C,I,D),N=et.propertyGroups={behavior:p,transition:w,visibility:m,overlay:g,underlay:b,ghost:k,commonLabel:h,labelDimensions:v,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:_,nodeBorder:E,backgroundImage:x,pie:T,compound:S,edgeLine:C,edgeArrow:I,core:D},H=et.propertyGroupNames={},W=et.propertyGroupKeys=Object.keys(N);W.forEach(function(z){H[z]=N[z].map(function(U){return U.name}),N[z].forEach(function(U){return U.groupKey=z})});var F=et.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];et.propertyNames=L.map(function(z){return z.name});for(var A=0;A<L.length;A++){var R=L[A];L[R.name]=R}for(var O=0;O<F.length;O++){var $=F[O],V=L[$.pointsTo],q={name:$.name,alias:!0,pointsTo:V};L.push(q),L[$.name]=q}})();et.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};et.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Ee({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=et.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(u,l){return et.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,d=l.value;u[f]=d}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};et.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var bi={};bi.parse=function(t,e,r,n){var a=this;if(He(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,u=Kl(t,s,o,i),l=a.propCache=a.propCache||[],c;return(c=l[u])||(c=l[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Ht(c),c&&(c.value=Ht(c.value))),c};bi.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Oe("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Oe("The style value of `label` is deprecated for `"+a.name+"`"),a};bi.parseImpl=function(t,e,r,n){var a=this;t=Vo(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=we(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(He(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var d=s.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(r||l.multiple)return!1;var v=s.mapData;if(!(l.color||l.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var p=this.parse(t,f[5]);if(!p||p.mapped)return!1;if(h.pfValue===p.pfValue||h.strValue===p.strValue)return Oe("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(l.color){var m=h.value,g=p.value,b=m[0]===g[0]&&m[1]===g[1]&&m[2]===g[2]&&(m[3]===g[3]||(m[3]==null||m[3]===1)&&(g[3]==null||g[3]===1));if(b)return!1}return{name:t,value:f,strValue:""+e,mapped:v,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:p.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var w;if(u?w=e.split(/\s+/):Le(e)?w=e:w=[e],l.evenMultiple&&w.length%2!==0)return null;for(var y=[],_=[],E=[],x="",S=!1,C=0;C<w.length;C++){var k=a.parse(t,w[C],r,"multiple");S=S||we(k.value),y.push(k.value),E.push(k.pfValue!=null?k.pfValue:k.value),_.push(k.units),x+=(C>0?" ":"")+k.strValue}return l.validate&&!l.validate(y,_)?null:l.singleEnum&&S?y.length===1&&we(y[0])?{name:t,value:y[0],strValue:y[0],bypass:r}:null:{name:t,value:y,pfValue:E,strValue:x,bypass:r,units:_}}var D=function(){for(var Q=0;Q<l.enums.length;Q++){var J=l.enums[Q];if(J===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var T,P="px";if(l.units&&(T=l.units),l.implicitUnits&&(P=l.implicitUnits),!l.unitless)if(u){var I="px|em"+(l.allowPercent?"|\\%":"");T&&(I=T);var B=e.match("^("+Xe+")("+I+")?$");B&&(e=B[1],T=B[2]||P)}else(!T||l.implicitUnits)&&(T=P);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,D();if(l.integer&&!Pp(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var L={name:t,value:e,strValue:""+e+(T||""),units:T,bypass:r};return l.unitless||T!=="px"&&T!=="em"?L.pfValue=e:L.pfValue=T==="px"||!T?e:this.getEmSizeInPixels()*e,(T==="ms"||T==="s")&&(L.pfValue=T==="ms"?e:1e3*e),(T==="deg"||T==="rad")&&(L.pfValue=T==="rad"?e:Dg(e)),T==="%"&&(L.pfValue=e/100),L}else if(l.propList){var N=[],H=""+e;if(H!=="none"){for(var W=H.split(/\s*,\s*|\s+/),F=0;F<W.length;F++){var A=W[F].trim();a.properties[A]?N.push(A):Oe("`"+A+"` is not a valid property name")}if(N.length===0)return null}return{name:t,value:N,strValue:N.length===0?"none":N.join(" "),bypass:r}}else if(l.color){var R=Xp(e);return R?{name:t,value:R,pfValue:R,strValue:"rgb("+R[0]+","+R[1]+","+R[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var O=D();if(O)return O}for(var $=l.regexes?l.regexes:[l.regex],V=0;V<$.length;V++){var q=new RegExp($[V]),z=q.exec(e);if(z)return{name:t,value:l.singleRegexMatchValue?z[1]:z,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?D():null};var st=function t(e){if(!(this instanceof t))return new t(e);if(!Ho(e)){Ve("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},lt=st.prototype;lt.instanceString=function(){return"style"};lt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};lt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};lt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};lt.selector=function(t){var e=t==="core"?null:new vr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};lt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[ci(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};lt.style=lt.css;lt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};lt.append=function(t){return zl(t)?t.appendToStyle(this):Le(t)?this.appendFromJson(t):we(t)&&this.appendFromString(t),this};st.fromJson=function(t,e){var r=new st(t);return r.fromJson(e),r};st.fromString=function(t,e){return new st(t).fromString(e)};[ct,ua,Jo,Wt,yi,es,et,bi].forEach(function(t){Ee(lt,t)});st.types=lt.types;st.properties=lt.properties;st.propertyGroups=lt.propertyGroups;st.propertyGroupNames=lt.propertyGroupNames;st.propertyGroupKeys=lt.propertyGroupKeys;var Fy={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return zl(e)?r.style=e.generateStyle(this):Le(e)?r.style=st.fromJson(this,e):we(e)?r.style=st.fromString(this,e):r.style=st(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},$y="single",Rr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=$y),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(we(e[0]))return n=e[0],r[n];if(ke(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,fe(o)&&(r.x=o),fe(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&fe(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:ke(e)&&(s=n[0],u=s.x,l=s.y,fe(u)&&(a.x+=u),fe(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&fe(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(fe(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(we(e)){var a=e;e=this.$(a)}else if(Bp(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Et(e)||(e=this.mutableElements());if(!(Et(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(r=fe(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*r)/n.w,(s-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return fe(e)&&fe(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):fe(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:fe(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),fe(e)?o=e:ke(e)&&(o=e.level,e.position!=null?i=hi(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!fe(o)||o===a||i!=null&&(!fe(i.x)||!fe(i.y)))return null;if(i!=null){var u=n,l=a,c=o,f={x:-c/l*(i.x-u.x)+i.x,y:-c/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(fe(e.zoom)||(n=!1),ke(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;fe(l.x)&&(r.pan.x=l.x,s=!1),fe(l.y)&&(r.pan.y=l.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(!!this._private.panningEnabled){if(we(e)){var n=e;e=this.mutableElements().filter(n)}else Et(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container;return e.sizeCache=e.sizeCache||(r?function(){var n=$e.getComputedStyle(r),a=function(o){return parseFloat(n.getPropertyValue(o))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Rr.centre=Rr.center;Rr.autolockNodes=Rr.autolock;Rr.autoungrabifyNodes=Rr.autoungrabify;var Zn={data:Ae.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ae.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ae.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ae.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Zn.attr=Zn.data;Zn.removeAttr=Zn.removeData;var Qn=function(e){var r=this;e=Ee({},e);var n=e.container;n&&!Wa(n)&&Wa(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=$e!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Ee({name:o?"grid":"null"},s.layout),s.renderer=Ee({name:o?"canvas":"null"},s.renderer);var u=function(h,p,m){return p!==void 0?p:m!==void 0?m:h},l=this._private={container:n,ready:!1,options:s,elements:new nt(this),listeners:[],aniEles:new nt(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:fe(s.zoom)?s.zoom:1,pan:{x:ke(s.pan)&&fe(s.pan.x)?s.pan.x:0,y:ke(s.pan)&&fe(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(h,p){var m=h.some(Rp);if(m)return yn.all(h).then(p);p(h)};l.styleEnabled&&r.setStyle([]);var f=Ee({},s,s.renderer);r.initRenderer(f);var d=function(h,p,m){r.notifications(!1);var g=r.mutableElements();g.length>0&&g.remove(),h!=null&&(ke(h)||Le(h))&&r.add(h),r.one("layoutready",function(w){r.notifications(!0),r.emit(w),r.one("load",p),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var b=Ee({},r._private.options.layout);b.eles=r.elements(),r.layout(b).run()};c([s.style,s.elements],function(v){var h=v[0],p=v[1];l.styleEnabled&&r.style().append(h),d(p,function(){r.startAnimationLoop(),l.ready=!0,He(s.ready)&&r.on("ready",s.ready);for(var m=0;m<i.length;m++){var g=i[m];r.on("ready",g)}a&&(a.readies=[]),r.emit("ready")},s.done)})},Xa=Qn.prototype;Ee(Xa,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Wa(e)&&Wa(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Ee({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Ht(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(y){return r.getElementById(y.id())};if(ke(e)){if(r.startBatch(),e.elements){var o={},s=function(y,_){for(var E=[],x=[],S=0;S<y.length;S++){var C=y[S];if(!C.data.id){Oe("cy.json() cannot handle elements without an ID attribute");continue}var k=""+C.data.id,D=r.getElementById(k);o[k]=!0,D.length!==0?x.push({ele:D,json:C}):(_&&(C.group=_),E.push(C))}r.add(E);for(var T=0;T<x.length;T++){var P=x[T],I=P.ele,B=P.json;I.json(B)}};if(Le(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];Le(f)&&s(f,c)}var d=r.collection();a.filter(function(w){return!o[w.id()]}).forEach(function(w){w.isParent()?d.merge(w):w.remove()}),d.forEach(function(w){return w.children().move({parent:null})}),d.forEach(function(w){return i(w).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<v.length;h++){var p=v[h];e[p]!=null&&r[p](e[p])}return r.endBatch(),this}else{var m=!!e,g={};m?g.elements=this.elements().map(function(w){return w.json()}):(g.elements={},a.forEach(function(w){var y=w.group();g.elements[y]||(g.elements[y]=[]),g.elements[y].push(w.json())})),this._private.styleEnabled&&(g.style=r.style().json()),g.data=Ht(r.data());var b=n.options;return g.zoomingEnabled=n.zoomingEnabled,g.userZoomingEnabled=n.userZoomingEnabled,g.zoom=n.zoom,g.minZoom=n.minZoom,g.maxZoom=n.maxZoom,g.panningEnabled=n.panningEnabled,g.userPanningEnabled=n.userPanningEnabled,g.pan=Ht(n.pan),g.boxSelectionEnabled=n.boxSelectionEnabled,g.renderer=Ht(b.renderer),g.hideEdgesOnViewport=b.hideEdgesOnViewport,g.textureOnViewport=b.textureOnViewport,g.wheelSensitivity=b.wheelSensitivity,g.motionBlur=b.motionBlur,g.multiClickDebounceTime=b.multiClickDebounceTime,g}}});Xa.$id=Xa.getElementById;[Iy,Ly,Ac,fo,za,Ry,ho,Fa,Fy,Rr,Zn].forEach(function(t){Ee(Xa,t)});var Hy={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},Yr=function(e){return e.scratch("breadthfirst")},xu=function(e,r){return e.scratch("breadthfirst",r)};function Pc(t){this.options=Ee({},Hy,t)}Pc.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(le){return!le.isParent()}),i=n,o=e.directed,s=e.maximal||e.maximalAdjustments>0,u=wt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l;if(Et(e.roots))l=e.roots;else if(Le(e.roots)){for(var c=[],f=0;f<e.roots.length;f++){var d=e.roots[f],v=r.getElementById(d);c.push(v)}l=r.collection(c)}else if(we(e.roots))l=r.$(e.roots);else if(o)l=a.roots();else{var h=n.components();l=r.collection();for(var p=function(re){var ne=h[re],Z=ne.maxDegree(!1),j=ne.filter(function(se){return se.degree(!1)===Z});l=l.add(j)},m=0;m<h.length;m++)p(m)}var g=[],b={},w=function(re,ne){g[ne]==null&&(g[ne]=[]);var Z=g[ne].length;g[ne].push(re),xu(re,{index:Z,depth:ne})},y=function(re,ne){var Z=Yr(re),j=Z.depth,se=Z.index;g[j][se]=null,w(re,ne)};i.bfs({roots:l,directed:e.directed,visit:function(re,ne,Z,j,se){var he=re[0],ye=he.id();w(he,se),b[ye]=!0}});for(var _=[],E=0;E<a.length;E++){var x=a[E];b[x.id()]||_.push(x)}var S=function(re){for(var ne=g[re],Z=0;Z<ne.length;Z++){var j=ne[Z];if(j==null){ne.splice(Z,1),Z--;continue}xu(j,{depth:re,index:Z})}},C=function(){for(var re=0;re<g.length;re++)S(re)},k=function(re,ne){for(var Z=Yr(re),j=re.incomers().filter(function(M){return M.isNode()&&n.has(M)}),se=-1,he=re.id(),ye=0;ye<j.length;ye++){var me=j[ye],Y=Yr(me);se=Math.max(se,Y.depth)}return Z.depth<=se?ne[he]?null:(y(re,se+1),ne[he]=!0,!0):!1};if(o&&s){var D=[],T={},P=function(re){return D.push(re)},I=function(){return D.shift()};for(a.forEach(function(le){return D.push(le)});D.length>0;){var B=I(),L=k(B,T);if(L)B.outgoers().filter(function(le){return le.isNode()&&n.has(le)}).forEach(P);else if(L===null){Oe("Detected double maximal shift for node `"+B.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}C();var N=0;if(e.avoidOverlap)for(var H=0;H<a.length;H++){var W=a[H],F=W.layoutDimensions(e),A=F.w,R=F.h;N=Math.max(N,A,R)}var O={},$=function(re){if(O[re.id()])return O[re.id()];for(var ne=Yr(re).depth,Z=re.neighborhood(),j=0,se=0,he=0;he<Z.length;he++){var ye=Z[he];if(!(ye.isEdge()||ye.isParent()||!a.has(ye))){var me=Yr(ye);if(me!=null){var Y=me.index,M=me.depth;if(!(Y==null||M==null)){var G=g[M].length;M<ne&&(j+=Y/G,se++)}}}}return se=Math.max(1,se),j=j/se,se===0&&(j=0),O[re.id()]=j,j},V=function(re,ne){var Z=$(re),j=$(ne),se=Z-j;return se===0?$l(re.id(),ne.id()):se};e.depthSort!==void 0&&(V=e.depthSort);for(var q=0;q<g.length;q++)g[q].sort(V),S(q);for(var z=[],U=0;U<_.length;U++)z.push(_[U]);g.unshift(z),C();for(var Q=0,J=0;J<g.length;J++)Q=Math.max(g[J].length,Q);var ie={x:u.x1+u.w/2,y:u.x1+u.h/2},ve=g.reduce(function(le,re){return Math.max(le,re.length)},0),xe=function(re){var ne=Yr(re),Z=ne.depth,j=ne.index,se=g[Z].length,he=Math.max(u.w/((e.grid?ve:se)+1),N),ye=Math.max(u.h/(g.length+1),N),me=Math.min(u.w/2/g.length,u.h/2/g.length);if(me=Math.max(me,N),e.circle){var M=me*Z+me-(g.length>0&&g[0].length<=3?me/2:0),G=2*Math.PI/g[Z].length*j;return Z===0&&g[0].length===1&&(M=1),{x:ie.x+M*Math.cos(G),y:ie.y+M*Math.sin(G)}}else{var Y={x:ie.x+(j+1-(se+1)/2)*he,y:(Z+1)*ye};return Y}};return n.nodes().layoutPositions(this,e,xe),this};var Vy={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Oc(t){this.options=Ee({},Vy,t)}Oc.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=wt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var v=i[d],h=v.layoutDimensions(e),p=h.w,m=h.h;f=Math.max(f,p,m)}if(fe(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var g=Math.cos(l)-Math.cos(0),b=Math.sin(l)-Math.sin(0),w=Math.sqrt(f*f/(g*g+b*b));c=Math.max(w,c)}var y=function(E,x){var S=e.startAngle+x*l*(a?1:-1),C=c*Math.cos(S),k=c*Math.sin(S),D={x:s.x+C,y:s.y+k};return D};return n.nodes().layoutPositions(this,e,y),this};var qy={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Lc(t){this.options=Ee({},qy,t)}Lc.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=wt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),u.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var v=0;v<i.length;v++){var h=i[v],p=h.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(le,re){return re.value-le.value});for(var m=e.levelWidth(i),g=[[]],b=g[0],w=0;w<u.length;w++){var y=u[w];if(b.length>0){var _=Math.abs(b[0].value-y.value);_>=m&&(b=[],g.push(b))}b.push(y)}var E=l+e.minNodeSpacing;if(!e.avoidOverlap){var x=g.length>0&&g[0].length>1,S=Math.min(o.w,o.h)/2-E,C=S/(g.length+x?1:0);E=Math.min(E,C)}for(var k=0,D=0;D<g.length;D++){var T=g[D],P=e.sweep===void 0?2*Math.PI-2*Math.PI/T.length:e.sweep,I=T.dTheta=P/Math.max(1,T.length-1);if(T.length>1&&e.avoidOverlap){var B=Math.cos(I)-Math.cos(0),L=Math.sin(I)-Math.sin(0),N=Math.sqrt(E*E/(B*B+L*L));k=Math.max(N,k)}T.r=k,k+=E}if(e.equidistant){for(var H=0,W=0,F=0;F<g.length;F++){var A=g[F],R=A.r-W;H=Math.max(H,R)}W=0;for(var O=0;O<g.length;O++){var $=g[O];O===0&&(W=$.r),$.r=W,W+=H}}for(var V={},q=0;q<g.length;q++)for(var z=g[q],U=z.dTheta,Q=z.r,J=0;J<z.length;J++){var ie=z[J],ve=e.startAngle+(r?1:-1)*U*J,xe={x:s.x+Q*Math.cos(ve),y:s.y+Q*Math.sin(ve)};V[ie.node.id()]=xe}return a.nodes().layoutPositions(this,e,function(le){var re=le.id();return V[re]}),this};var Wi,Wy={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function wi(t){this.options=Ee({},Wy,t),this.options.layout=this}wi.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Wi=!0:Wi=!1;var n=Gy(e,r,t);Wi&&Yy(n),t.randomize&&Xy(n);var a=jt(),i=function(){jy(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(d){return!(r.stopped||d>=t.numIter||(Zy(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var d=t.eles.nodes(),v=Bc(n,t,d);d.layoutPositions(r,t,v)}},u=0,l=!0;if(t.animate===!0){var c=function f(){for(var d=0;l&&d<t.refresh;)l=o(u),u++,d++;if(!l)Cu(n,t),s();else{var v=jt();v-a>=t.animationThreshold&&i(),Ga(f)}};c()}else{for(;l;)l=o(u),u++;Cu(n,t),s()}return this};wi.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};wi.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Gy=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:wt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),u={},l=0;l<s.length;l++)for(var c=s[l],f=0;f<c.length;f++){var d=c[f];u[d.id()]=l}for(var l=0;l<o.nodeSize;l++){var v=i[l],h=v.layoutDimensions(n),p={};p.isLocked=v.locked(),p.id=v.data("id"),p.parentId=v.data("parent"),p.cmptId=u[v.id()],p.children=[],p.positionX=v.position("x"),p.positionY=v.position("y"),p.offsetX=0,p.offsetY=0,p.height=h.w,p.width=h.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(v.style("padding")),p.padRight=parseFloat(v.style("padding")),p.padTop=parseFloat(v.style("padding")),p.padBottom=parseFloat(v.style("padding")),p.nodeRepulsion=He(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(p),o.idToIndex[p.id]=l}for(var m=[],g=0,b=-1,w=[],l=0;l<o.nodeSize;l++){var v=o.layoutNodes[l],y=v.parentId;y!=null?o.layoutNodes[o.idToIndex[y]].children.push(v.id):(m[++b]=v.id,w.push(v.id))}for(o.graphSet.push(w);g<=b;){var _=m[g++],E=o.idToIndex[_],d=o.layoutNodes[E],x=d.children;if(x.length>0){o.graphSet.push(x);for(var l=0;l<x.length;l++)m[++b]=x[l]}}for(var l=0;l<o.graphSet.length;l++)for(var S=o.graphSet[l],f=0;f<S.length;f++){var C=o.idToIndex[S[f]];o.indexToGraph[C]=l}for(var l=0;l<o.edgeSize;l++){var k=a[l],D={};D.id=k.data("id"),D.sourceId=k.data("source"),D.targetId=k.data("target");var T=He(n.idealEdgeLength)?n.idealEdgeLength(k):n.idealEdgeLength,P=He(n.edgeElasticity)?n.edgeElasticity(k):n.edgeElasticity,I=o.idToIndex[D.sourceId],B=o.idToIndex[D.targetId],L=o.indexToGraph[I],N=o.indexToGraph[B];if(L!=N){for(var H=Ky(D.sourceId,D.targetId,o),W=o.graphSet[H],F=0,p=o.layoutNodes[I];W.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],F++;for(p=o.layoutNodes[B];W.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],F++;T*=F*n.nestingFactor}D.idealLength=T,D.elasticity=P,o.layoutEdges.push(D)}return o},Ky=function(e,r,n){var a=Uy(e,r,0,n);return 2>a.count?0:a.graph},Uy=function t(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var u=i[s],l=a.idToIndex[u],c=a.layoutNodes[l].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=t(e,r,f,a);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},Yy,Xy=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},Bc=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var l=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},jy=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=Bc(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},Zy=function(e,r,n){Qy(e,r),t0(e),r0(e,r),n0(e),a0(e)},Qy=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],u=o+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];Jy(s,l,e,r)}},Eu=function(e){return-e+2*e*Math.random()},Jy=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;s===0&&u===0&&(s=Eu(l),u=Eu(l));var c=e0(e,r,s,u);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(s*s+u*u),v=f*s/d,h=f*u/d;else var p=ja(e,s,u),m=ja(r,-1*s,-1*u),g=m.x-p.x,b=m.y-p.y,w=g*g+b*b,d=Math.sqrt(w),f=(e.nodeRepulsion+r.nodeRepulsion)/w,v=f*g/d,h=f*b/d;e.isLocked||(e.offsetX-=v,e.offsetY-=h),r.isLocked||(r.offsetX+=v,r.offsetY+=h)}},e0=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},ja=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,u=n/r,l=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*l<=u&&u<=l?(c.x=a+s/2,c.y=i+s*n/2/r,c):0>r&&-1*l<=u&&u<=l?(c.x=a-s/2,c.y=i-s*n/2/r,c):0<n&&(u<=-1*l||u>=l)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},t0=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var f=ja(o,l,c),d=ja(u,-1*l,-1*c),v=d.x-f.x,h=d.y-f.y,p=Math.sqrt(v*v+h*h),m=Math.pow(a.idealLength-p,2)/a.elasticity;if(p!==0)var g=m*v/p,b=m*h/p;else var g=0,b=0;o.isLocked||(o.offsetX+=g,o.offsetY+=b),u.isLocked||(u.offsetX-=g,u.offsetY-=b)}}},r0=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<o;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var v=s-d.positionX,h=u-d.positionY,p=Math.sqrt(v*v+h*h);if(p>n){var m=r.gravity*v/p,g=r.gravity*h/p;d.offsetX+=m,d.offsetY+=g}}}}},n0=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,d=0;d<l.length;d++){var v=e.layoutNodes[e.idToIndex[l[d]]];v.offsetX+=c,v.offsetY+=f,n[++i]=l[d]}u.offsetX=0,u.offsetY=0}}},a0=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=i0(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,o0(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},i0=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},o0=function t(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return t(a,r)}},Cu=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,u=a[s]=a[s]||[];u.push(o)}for(var l=0,i=0;i<a.length;i++){var c=a[i];if(!!c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}a.sort(function(b,w){return w.w*w.h-b.w*b.h});for(var v=0,h=0,p=0,m=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(!!c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=v-c.x1,d.positionY+=h-c.y1)}v+=c.w+r.componentSpacing,p+=c.w+r.componentSpacing,m=Math.max(m,c.h),p>g&&(h+=m+r.componentSpacing,v=0,p=0,m=0)}}},s0={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Rc(t){this.options=Ee({},s0,t)}Rc.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=wt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(O){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),u=Math.round(s),l=Math.round(i.w/i.h*s),c=function($){if($==null)return Math.min(u,l);var V=Math.min(u,l);V==u?u=$:l=$},f=function($){if($==null)return Math.max(u,l);var V=Math.max(u,l);V==u?u=$:l=$},d=e.rows,v=e.cols!=null?e.cols:e.columns;if(d!=null&&v!=null)u=d,l=v;else if(d!=null&&v==null)u=d,l=Math.ceil(o/u);else if(d==null&&v!=null)l=v,u=Math.ceil(o/l);else if(l*u>o){var h=c(),p=f();(h-1)*p>=o?c(h-1):(p-1)*h>=o&&f(p-1)}else for(;l*u<o;){var m=c(),g=f();(g+1)*m>=o?f(g+1):c(m+1)}var b=i.w/l,w=i.h/u;if(e.condense&&(b=0,w=0),e.avoidOverlap)for(var y=0;y<a.length;y++){var _=a[y],E=_._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var x=_.layoutDimensions(e),S=e.avoidOverlapPadding,C=x.w+S,k=x.h+S;b=Math.max(b,C),w=Math.max(w,k)}for(var D={},T=function($,V){return!!D["c-"+$+"-"+V]},P=function($,V){D["c-"+$+"-"+V]=!0},I=0,B=0,L=function(){B++,B>=l&&(B=0,I++)},N={},H=0;H<a.length;H++){var W=a[H],F=e.position(W);if(F&&(F.row!==void 0||F.col!==void 0)){var A={row:F.row,col:F.col};if(A.col===void 0)for(A.col=0;T(A.row,A.col);)A.col++;else if(A.row===void 0)for(A.row=0;T(A.row,A.col);)A.row++;N[W.id()]=A,P(A.row,A.col)}}var R=function($,V){var q,z;if($.locked()||$.isParent())return!1;var U=N[$.id()];if(U)q=U.col*b+b/2+i.x1,z=U.row*w+w/2+i.y1;else{for(;T(I,B);)L();q=B*b+b/2+i.x1,z=I*w+w/2+i.y1,P(I,B),L()}return{x:q,y:z}};a.layoutPositions(this,e,R)}return this};var u0={ready:function(){},stop:function(){}};function ts(t){this.options=Ee({},u0,t)}ts.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};ts.prototype.stop=function(){return this};var l0={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Nc(t){this.options=Ee({},l0,t)}Nc.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=He(t.positions);function a(i){if(t.positions==null)return Eg(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o==null?null:o}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var c0={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function zc(t){this.options=Ee({},c0,t)}zc.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=wt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var f0=[{name:"breadthfirst",impl:Pc},{name:"circle",impl:Oc},{name:"concentric",impl:Lc},{name:"cose",impl:wi},{name:"grid",impl:Rc},{name:"null",impl:ts},{name:"preset",impl:Nc},{name:"random",impl:zc}];function Fc(t){this.options=t,this.notifications=0}var _u=function(){},Su=function(){throw new Error("A headless instance can not render images")};Fc.prototype={recalculateRenderedStyle:_u,notify:function(){this.notifications++},init:_u,isHeadless:function(){return!0},png:Su,jpg:Su};var rs={};rs.arrowShapeWidth=.3;rs.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,c,f,d,v,h,p){var m=v.x-f/2-p,g=v.x+f/2+p,b=v.y-f/2-p,w=v.y+f/2+p,y=m<=l&&l<=g&&b<=c&&c<=w;return y},n=function(l,c,f,d,v){var h=l*Math.cos(d)-c*Math.sin(d),p=l*Math.sin(d)+c*Math.cos(d),m=h*f,g=p*f,b=m+v.x,w=g+v.y;return{x:b,y:w}},a=function(l,c,f,d){for(var v=[],h=0;h<l.length;h+=2){var p=l[h],m=l[h+1];v.push(n(p,m,c,f,d))}return v},i=function(l){for(var c=[],f=0;f<l.length;f++){var d=l[f];c.push(d.x,d.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){we(c)&&(c=t[c]),t[l]=Ee({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,v,h,p,m,g){var b=i(a(this.points,h+2*g,p,m)),w=mt(d,v,b);return w},roughCollide:r,draw:function(d,v,h,p){var m=a(this.points,v,h,p);e.arrowShapeImpl("polygon")(d,m)},spacing:function(d){return 0},gap:o},c)};s("none",{collide:Ka,roughCollide:Ka,draw:Wo,spacing:$s,gap:$s}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,c,f,d,v){var h=a(this.points,c,f,d),p=this.controlPoint,m=n(p[0],p[1],c,f,d);e.arrowShapeImpl(this.name)(l,h,m)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,d,v,h,p){var m=i(a(this.points,f+2*p,d,v)),g=i(a(this.pointsTee,f+2*p,d,v)),b=mt(l,c,m)||mt(l,c,g);return b},draw:function(l,c,f,d,v){var h=a(this.points,c,f,d),p=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(l,h,p)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,d,v,h,p){var m=v,g=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2),b=i(a(this.points,f+2*p,d,v));return mt(l,c,b)||g},draw:function(l,c,f,d,v){var h=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(l,h,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),d=c/l,v=3,h=5;return f[v]=f[v]-d,f[h]=f[h]-d,f},collide:function(l,c,f,d,v,h,p){var m=i(a(this.points,f+2*p,d,v)),g=i(a(this.crossLinePts(f,h),f+2*p,d,v)),b=mt(l,c,m)||mt(l,c,g);return b},draw:function(l,c,f,d,v){var h=a(this.points,c,f,d),p=a(this.crossLinePts(c,v),c,f,d);e.arrowShapeImpl(this.name)(l,h,p)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,d,v,h,p){var m=v,g=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return g},draw:function(l,c,f,d,v){e.arrowShapeImpl(this.name)(l,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var qr={};qr.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),u=r.zoom(),l=((t-a)/o-s.x)/u,c=((e-i)/o-s.y)/u;return[l,c]};qr.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=$e.getComputedStyle(t),n=function(g){return parseFloat(r.getPropertyValue(g))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,u=a.left+a.right,l=a.top+a.bottom,c=i.left+i.right,f=e.width/(o+c),d=o-u,v=s-l,h=e.left+a.left+i.left,p=e.top+a.top+i.top;return this.containerBB=[h,p,d,v,f]};qr.invalidateContainerClientCoordsCache=function(){this.containerBB=null};qr.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};qr.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,d=(n?8:2)/u,v=1/0,h,p;r&&(o=o.interactive);function m(x,S){if(x.isNode()){if(p)return;p=x,s.push(x)}if(x.isEdge()&&(S==null||S<v))if(h){if(h.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var C=0;C<s.length;C++)if(s[C].isEdge()){s[C]=x,h=x,v=S!=null?S:v;break}}}else s.push(x),h=x,v=S!=null?S:v}function g(x){var S=x.outerWidth()+2*f,C=x.outerHeight()+2*f,k=S/2,D=C/2,T=x.position();if(T.x-k<=t&&t<=T.x+k&&T.y-D<=e&&e<=T.y+D){var P=i.nodeShapes[a.getNodeShape(x)];if(P.checkPoint(t,e,0,S,C,T.x,T.y))return m(x,0),!0}}function b(x){var S=x._private,C=S.rscratch,k=x.pstyle("width").pfValue,D=x.pstyle("arrow-scale").value,T=k/2+c,P=T*T,I=T*2,H=S.source,W=S.target,B;if(C.edgeType==="segments"||C.edgeType==="straight"||C.edgeType==="haystack"){for(var L=C.allpts,N=0;N+3<L.length;N+=2)if(Bg(t,e,L[N],L[N+1],L[N+2],L[N+3],I)&&P>(B=$g(t,e,L[N],L[N+1],L[N+2],L[N+3])))return m(x,B),!0}else if(C.edgeType==="bezier"||C.edgeType==="multibezier"||C.edgeType==="self"||C.edgeType==="compound"){for(var L=C.allpts,N=0;N+5<C.allpts.length;N+=4)if(Rg(t,e,L[N],L[N+1],L[N+2],L[N+3],L[N+4],L[N+5],I)&&P>(B=Fg(t,e,L[N],L[N+1],L[N+2],L[N+3],L[N+4],L[N+5])))return m(x,B),!0}for(var H=H||S.source,W=W||S.target,F=a.getArrowWidth(k,D),A=[{name:"source",x:C.arrowStartX,y:C.arrowStartY,angle:C.srcArrowAngle},{name:"target",x:C.arrowEndX,y:C.arrowEndY,angle:C.tgtArrowAngle},{name:"mid-source",x:C.midX,y:C.midY,angle:C.midsrcArrowAngle},{name:"mid-target",x:C.midX,y:C.midY,angle:C.midtgtArrowAngle}],N=0;N<A.length;N++){var R=A[N],O=i.arrowShapes[x.pstyle(R.name+"-arrow-shape").value],$=x.pstyle("width").pfValue;if(O.roughCollide(t,e,F,R.angle,{x:R.x,y:R.y},$,c)&&O.collide(t,e,F,R.angle,{x:R.x,y:R.y},$,c))return m(x),!0}l&&s.length>0&&(g(H),g(W))}function w(x,S,C){return Bt(x,S,C)}function y(x,S){var C=x._private,k=d,D;S?D=S+"-":D="",x.boundingBox();var T=C.labelBounds[S||"main"],P=x.pstyle(D+"label").value,I=x.pstyle("text-events").strValue==="yes";if(!(!I||!P)){var B=w(C.rscratch,"labelX",S),L=w(C.rscratch,"labelY",S),N=w(C.rscratch,"labelAngle",S),H=x.pstyle(D+"text-margin-x").pfValue,W=x.pstyle(D+"text-margin-y").pfValue,F=T.x1-k-H,A=T.x2+k-H,R=T.y1-k-W,O=T.y2+k-W;if(N){var $=Math.cos(N),V=Math.sin(N),q=function(xe,le){return xe=xe-B,le=le-L,{x:xe*$-le*V+B,y:xe*V+le*$+L}},z=q(F,R),U=q(F,O),Q=q(A,R),J=q(A,O),ie=[z.x+H,z.y+W,Q.x+H,Q.y+W,J.x+H,J.y+W,U.x+H,U.y+W];if(mt(t,e,ie))return m(x),!0}else if(an(T,t,e))return m(x),!0}}for(var _=o.length-1;_>=0;_--){var E=o[_];E.isNode()?g(E)||y(E):b(E)||y(E)||y(E,"source")||y(E,"target")}return s};qr.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(t,r),s=Math.max(t,r),u=Math.min(e,n),l=Math.max(e,n);t=o,r=s,e=u,n=l;for(var c=wt({x1:t,y1:e,x2:r,y2:n}),f=0;f<a.length;f++){var d=a[f];if(d.isNode()){var v=d,h=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Uo(c,h)&&!Jl(h,c)&&i.push(v)}else{var p=d,m=p._private,g=m.rscratch;if(g.startX!=null&&g.startY!=null&&!an(c,g.startX,g.startY)||g.endX!=null&&g.endY!=null&&!an(c,g.endX,g.endY))continue;if(g.edgeType==="bezier"||g.edgeType==="multibezier"||g.edgeType==="self"||g.edgeType==="compound"||g.edgeType==="segments"||g.edgeType==="haystack"){for(var b=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,w=!0,y=0;y<b.length;y++)if(!Lg(c,b[y])){w=!1;break}w&&i.push(p)}else(g.edgeType==="haystack"||g.edgeType==="straight")&&i.push(p)}}return i};var Za={};Za.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,d,v,g,b;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],v=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,v=e.arrowEndY),g=e.midX,b=e.midY,i)u=c-e.segpts[0],l=f-e.segpts[1];else if(a||o||s||n){var h=e.allpts,p=Qe(h[0],h[2],h[4],.1),m=Qe(h[1],h[3],h[5],.1);u=c-p,l=f-m}else u=c-g,l=f-b;e.srcArrowAngle=wa(u,l);var g=e.midX,b=e.midY;if(r&&(g=(c+d)/2,b=(f+v)/2),u=d-c,l=v-f,i){var h=e.allpts;if(h.length/2%2===0){var w=h.length/2,y=w-2;u=h[w]-h[y],l=h[w+1]-h[y+1]}else{var w=h.length/2-1,y=w-2,_=w+2;u=h[w]-h[y],l=h[w+1]-h[y+1]}}else if(a||o||s){var h=e.allpts,E=e.ctrlpts,x,S,C,k;if(E.length/2%2===0){var D=h.length/2-1,T=D+2,P=T+2;x=Qe(h[D],h[T],h[P],0),S=Qe(h[D+1],h[T+1],h[P+1],0),C=Qe(h[D],h[T],h[P],1e-4),k=Qe(h[D+1],h[T+1],h[P+1],1e-4)}else{var T=h.length/2-1,D=T-2,P=T+2;x=Qe(h[D],h[T],h[P],.4999),S=Qe(h[D+1],h[T+1],h[P+1],.4999),C=Qe(h[D],h[T],h[P],.5),k=Qe(h[D+1],h[T+1],h[P+1],.5)}u=C-x,l=k-S}if(e.midtgtArrowAngle=wa(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var h=e.allpts;if(h.length/2%2!==0){var w=h.length/2-1,_=w+2;u=-(h[_]-h[w]),l=-(h[_+1]-h[w+1])}}if(e.midsrcArrowAngle=wa(u,l),i)u=d-e.segpts[e.segpts.length-2],l=v-e.segpts[e.segpts.length-1];else if(a||o||s||n){var h=e.allpts,I=h.length,p=Qe(h[I-6],h[I-4],h[I-2],.9),m=Qe(h[I-5],h[I-3],h[I-1],.9);u=d-p,l=v-m}else u=d-g,l=v-b;e.tgtArrowAngle=wa(u,l)};Za.getArrowWidth=Za.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var dt={};dt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),d=o.height(),v=s.height(),h=r.pstyle("haystack-radius").value,p=h/2;a.haystackPts=a.allpts=[a.source.x*c*p+u.x,a.source.y*d*p+u.y,a.target.x*f*p+l.x,a.target.y*v*p+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};dt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=e.posPts,a=e.intersectionPts,i=e.vectorNormInverse,o=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),u=t.pstyle("segment-distances"),l=Math.min(s.pfValue.length,u.pfValue.length);r.edgeType="segments",r.segpts=[];for(var c=0;c<l;c++){var f=s.pfValue[c],d=u.pfValue[c],v=1-f,h=f,p=o==="node-position"?n:a,m={x:p.x1*v+p.x2*h,y:p.y1*v+p.y2*h};r.segpts.push(m.x+i.x*d,m.y+i.y*d)}};dt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=r,v=f;n&&(d=0,v=u);var h=l-Math.PI/2,p=h-c/2,m=h+c/2,g=String(l+"_"+c);d=i[g]===void 0?i[g]=0:++i[g],a.ctrlpts=[o.x+Math.cos(p)*1.4*v*(d/3+1),o.y+Math.sin(p)*1.4*v*(d/3+1),o.x+Math.cos(m)*1.4*v*(d/3+1),o.y+Math.sin(m)*1.4*v*(d/3+1)]};dt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),v=d?d.pfValue[0]:void 0,h=r,p=f;n&&(h=0,p=v);var m=50,g={x:i.x-s/2,y:i.y-u/2},b={x:o.x-l/2,y:o.y-c/2},w={x:Math.min(g.x,b.x),y:Math.min(g.y,b.y)},y=.5,_=Math.max(y,Math.log(s*.01)),E=Math.max(y,Math.log(l*.01));a.ctrlpts=[w.x,w.y-(1+Math.pow(m,1.12)/100)*p*(h/3+1)*_,w.x-(1+Math.pow(m,1.12)/100)*p*(h/3+1)*E,w.y]};dt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};dt.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=e.vectorNormInverse,s=e.posPts,u=e.intersectionPts,l=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),v=f&&d?Math.min(f.value.length,d.value.length):1,h=f?f.pfValue[0]:void 0,p=d.value[0],m=n;i.edgeType=m?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<v;g++){var b=(.5-e.eles.length/2+r)*c*(a?-1:1),w=void 0,y=Ql(b);m&&(h=f?f.pfValue[g]:c,p=d.value[g]),n?w=h:w=h!==void 0?y*h:void 0;var _=w!==void 0?w:b,E=1-p,x=p,S=l==="node-position"?s:u,C={x:S.x1*E+S.x2*x,y:S.y1*E+S.y2*x};i.ctrlpts.push(C.x+o.x*_,C.y+o.y*_)}};dt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,d=e.srcH,v=e.tgtW,h=e.tgtH,p=t.pstyle("edge-distances").value,m=p!=="node-position",g=t.pstyle("taxi-direction").value,b=g,w=t.pstyle("taxi-turn"),y=w.units==="%",_=w.pfValue,E=_<0,x=t.pstyle("taxi-turn-min-distance").pfValue,S=m?(f+v)/2:0,C=m?(d+h)/2:0,k=c.x2-c.x1,D=c.y2-c.y1,T=function(ce,_e){return ce>0?Math.max(ce-_e,0):Math.min(ce+_e,0)},P=T(k,S),I=T(D,C),B=!1;b===l?g=Math.abs(P)>Math.abs(I)?a:n:b===u||b===s?(g=n,B=!0):(b===i||b===o)&&(g=a,B=!0);var L=g===n,N=L?I:P,H=L?D:k,W=Ql(H),F=!1;!(B&&(y||E))&&(b===s&&H<0||b===u&&H>0||b===i&&H>0||b===o&&H<0)&&(W*=-1,N=W*Math.abs(N),F=!0);var A;if(y){var R=_<0?1+_:_;A=R*N}else{var O=_<0?N:0;A=O+_*W}var $=function(ce){return Math.abs(ce)<x||Math.abs(ce)>=Math.abs(N)},V=$(A),q=$(Math.abs(N)-Math.abs(A)),z=V||q;if(z&&!F)if(L){var U=Math.abs(H)<=d/2,Q=Math.abs(k)<=v/2;if(U){var J=(c.x1+c.x2)/2,ie=c.y1,ve=c.y2;r.segpts=[J,ie,J,ve]}else if(Q){var xe=(c.y1+c.y2)/2,le=c.x1,re=c.x2;r.segpts=[le,xe,re,xe]}else r.segpts=[c.x1,c.y2]}else{var ne=Math.abs(H)<=f/2,Z=Math.abs(D)<=h/2;if(ne){var j=(c.y1+c.y2)/2,se=c.x1,he=c.x2;r.segpts=[se,j,he,j]}else if(Z){var ye=(c.x1+c.x2)/2,me=c.y1,Y=c.y2;r.segpts=[ye,me,ye,Y]}else r.segpts=[c.x2,c.y1]}else if(L){var M=c.y1+A+(m?d/2*W:0),G=c.x1,te=c.x2;r.segpts=[G,M,te,M]}else{var ee=c.x1+A+(m?f/2*W:0),X=c.y1,ge=c.y2;r.segpts=[ee,X,ee,ge]}};dt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=!fe(r.startX)||!fe(r.startY),d=!fe(r.arrowStartX)||!fe(r.arrowStartY),v=!fe(r.endX)||!fe(r.endY),h=!fe(r.arrowEndX)||!fe(r.arrowEndY),p=3,m=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,g=p*m,b=Lr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=b<g,y=Lr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),_=y<g,E=!1;if(f||d||w){E=!0;var x={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},S=Math.sqrt(x.x*x.x+x.y*x.y),C={x:x.x/S,y:x.y/S},k=Math.max(i,o),D={x:r.ctrlpts[0]+C.x*2*k,y:r.ctrlpts[1]+C.y*2*k},T=l.intersectLine(n.x,n.y,i,o,D.x,D.y,0);w?(r.ctrlpts[0]=r.ctrlpts[0]+C.x*(g-b),r.ctrlpts[1]=r.ctrlpts[1]+C.y*(g-b)):(r.ctrlpts[0]=T[0]+C.x*g,r.ctrlpts[1]=T[1]+C.y*g)}if(v||h||_){E=!0;var P={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},I=Math.sqrt(P.x*P.x+P.y*P.y),B={x:P.x/I,y:P.y/I},L=Math.max(i,o),N={x:r.ctrlpts[0]+B.x*2*L,y:r.ctrlpts[1]+B.y*2*L},H=c.intersectLine(a.x,a.y,s,u,N.x,N.y,0);_?(r.ctrlpts[0]=r.ctrlpts[0]+B.x*(g-y),r.ctrlpts[1]=r.ctrlpts[1]+B.y*(g-y)):(r.ctrlpts[0]=H[0]+B.x*g,r.ctrlpts[1]=H[1]+B.y*g)}E&&this.findEndpoints(t)}};dt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Qe(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Qe(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}};dt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||fe(e.startX)&&fe(e.startY)&&fe(e.endX)&&fe(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Oe("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};dt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i={map:new Vt,get:function(x){var S=this.map.get(x[0]);return S!=null?S.get(x[1]):null},set:function(x,S){var C=this.map.get(x[0]);C==null&&(C=new Vt,this.map.set(x[0],C)),C.set(x[1],S)}},o=[],s=[],u=0;u<t.length;u++){var l=t[u],c=l._private,f=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(f==="haystack"){s.push(l);continue}var d=f==="unbundled-bezier"||f==="segments"||f==="straight"||f==="straight-triangle"||f==="taxi",v=f==="unbundled-bezier"||f==="bezier",h=c.source,p=c.target,m=h.poolIndex(),g=p.poolIndex(),b=[m,g].sort(),w=i.get(b);w==null&&(w={eles:[]},i.set(b,w),o.push(b)),w.eles.push(l),d&&(w.hasUnbundled=!0),v&&(w.hasBezier=!0)}}for(var y=function(x){var S=o[x],C=i.get(S),k=void 0;if(!C.hasUnbundled){var D=C.eles[0].parallelEdges().filter(function(Y){return Y.isBundledBezier()});Go(C.eles),D.forEach(function(Y){return C.eles.push(Y)}),C.eles.sort(function(Y,M){return Y.poolIndex()-M.poolIndex()})}var T=C.eles[0],P=T.source(),I=T.target();if(P.poolIndex()>I.poolIndex()){var B=P;P=I,I=B}var L=C.srcPos=P.position(),N=C.tgtPos=I.position(),H=C.srcW=P.outerWidth(),W=C.srcH=P.outerHeight(),F=C.tgtW=I.outerWidth(),A=C.tgtH=I.outerHeight(),R=C.srcShape=r.nodeShapes[e.getNodeShape(P)],O=C.tgtShape=r.nodeShapes[e.getNodeShape(I)];C.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<C.eles.length;$++){var V=C.eles[$],q=V[0]._private.rscratch,z=V.pstyle("curve-style").value,U=z==="unbundled-bezier"||z==="segments"||z==="taxi",Q=!P.same(V.source());if(!C.calculatedIntersection&&P!==I&&(C.hasBezier||C.hasUnbundled)){C.calculatedIntersection=!0;var J=R.intersectLine(L.x,L.y,H,W,N.x,N.y,0),ie=C.srcIntn=J,ve=O.intersectLine(N.x,N.y,F,A,L.x,L.y,0),xe=C.tgtIntn=ve,le=C.intersectionPts={x1:J[0],x2:ve[0],y1:J[1],y2:ve[1]},re=C.posPts={x1:L.x,x2:N.x,y1:L.y,y2:N.y},ne=ve[1]-J[1],Z=ve[0]-J[0],j=Math.sqrt(Z*Z+ne*ne),se=C.vector={x:Z,y:ne},he=C.vectorNorm={x:se.x/j,y:se.y/j},ye={x:-he.y,y:he.x};C.nodesOverlap=!fe(j)||O.checkPoint(J[0],J[1],0,F,A,N.x,N.y)||R.checkPoint(ve[0],ve[1],0,H,W,L.x,L.y),C.vectorNormInverse=ye,k={nodesOverlap:C.nodesOverlap,dirCounts:C.dirCounts,calculatedIntersection:!0,hasBezier:C.hasBezier,hasUnbundled:C.hasUnbundled,eles:C.eles,srcPos:N,tgtPos:L,srcW:F,srcH:A,tgtW:H,tgtH:W,srcIntn:xe,tgtIntn:ie,srcShape:O,tgtShape:R,posPts:{x1:re.x2,y1:re.y2,x2:re.x1,y2:re.y1},intersectionPts:{x1:le.x2,y1:le.y2,x2:le.x1,y2:le.y1},vector:{x:-se.x,y:-se.y},vectorNorm:{x:-he.x,y:-he.y},vectorNormInverse:{x:-ye.x,y:-ye.y}}}var me=Q?k:C;q.nodesOverlap=me.nodesOverlap,q.srcIntn=me.srcIntn,q.tgtIntn=me.tgtIntn,a&&(P.isParent()||P.isChild()||I.isParent()||I.isChild())&&(P.parents().anySame(I)||I.parents().anySame(P)||P.same(I)&&P.isParent())?e.findCompoundLoopPoints(V,me,$,U):P===I?e.findLoopPoints(V,me,$,U):z==="segments"?e.findSegmentsPoints(V,me):z==="taxi"?e.findTaxiPoints(V,me):z==="straight"||!U&&C.eles.length%2===1&&$===Math.floor(C.eles.length/2)?e.findStraightEdgePoints(V):e.findBezierPoints(V,me,$,U,Q),e.findEndpoints(V),e.tryToCorrectInvalidPoints(V,me),e.checkForInvalidEdgeWarning(V),e.storeAllpts(V),e.storeEdgeProjections(V),e.calculateArrowAngles(V),e.recalculateEdgeLabelProjections(V),e.calculateLabelAngles(V)}},_=0;_<o.length;_++)y(_);this.findHaystackPoints(s)}};function $c(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}dt.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),$c(e.segpts)};dt.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),$c(e.ctrlpts)};dt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var la={};la.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight();if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var s=e.pfValue[0];s=-Math.PI/2+s;var u=2*Math.max(a,i),l=[n.x+Math.cos(s)*u,n.y+Math.sin(s)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,l[0],l[1],0)}};la.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=t.pstyle("curve-style").value,d=t._private.rscratch,v=d.edgeType,h=f==="taxi",p=v==="self"||v==="compound",m=v==="bezier"||v==="multibezier"||p,g=v!=="bezier",b=v==="straight"||v==="segments",w=v==="segments",y=m||g||b,_=p||h,E=t.pstyle("source-endpoint"),x=_?"outside-to-node":E.value,S=t.pstyle("target-endpoint"),C=_?"outside-to-node":S.value;d.srcManEndpt=E,d.tgtManEndpt=S;var k,D,T,P;if(m){var I=[d.ctrlpts[0],d.ctrlpts[1]],B=g?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:I;k=B,D=I}else if(b){var L=w?d.segpts.slice(0,2):[o.x,o.y],N=w?d.segpts.slice(d.segpts.length-2):[i.x,i.y];k=N,D=L}if(C==="inside-to-node")r=[o.x,o.y];else if(S.units)r=this.manualEndptToPx(a,S);else if(C==="outside-to-line")r=d.tgtIntn;else if(C==="outside-to-node"||C==="outside-to-node-or-label"?T=k:(C==="outside-to-line"||C==="outside-to-line-or-label")&&(T=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),T[0],T[1],0),C==="outside-to-node-or-label"||C==="outside-to-line-or-label"){var H=a._private.rscratch,W=H.labelWidth,F=H.labelHeight,A=H.labelX,R=H.labelY,O=W/2,$=F/2,V=a.pstyle("text-valign").value;V==="top"?R-=$:V==="bottom"&&(R+=$);var q=a.pstyle("text-halign").value;q==="left"?A-=O:q==="right"&&(A+=O);var z=Yn(T[0],T[1],[A-O,R-$,A+O,R-$,A+O,R+$,A-O,R+$],o.x,o.y);if(z.length>0){var U=i,Q=_r(U,Qr(r)),J=_r(U,Qr(z)),ie=Q;if(J<Q&&(r=z,ie=J),z.length>2){var ve=_r(U,{x:z[2],y:z[3]});ve<ie&&(r=[z[2],z[3]])}}}var xe=xa(r,k,e.arrowShapes[s].spacing(t)+l),le=xa(r,k,e.arrowShapes[s].gap(t)+l);if(d.endX=le[0],d.endY=le[1],d.arrowEndX=xe[0],d.arrowEndY=xe[1],x==="inside-to-node")r=[i.x,i.y];else if(E.units)r=this.manualEndptToPx(n,E);else if(x==="outside-to-line")r=d.srcIntn;else if(x==="outside-to-node"||x==="outside-to-node-or-label"?P=D:(x==="outside-to-line"||x==="outside-to-line-or-label")&&(P=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),P[0],P[1],0),x==="outside-to-node-or-label"||x==="outside-to-line-or-label"){var re=n._private.rscratch,ne=re.labelWidth,Z=re.labelHeight,j=re.labelX,se=re.labelY,he=ne/2,ye=Z/2,me=n.pstyle("text-valign").value;me==="top"?se-=ye:me==="bottom"&&(se+=ye);var Y=n.pstyle("text-halign").value;Y==="left"?j-=he:Y==="right"&&(j+=he);var M=Yn(P[0],P[1],[j-he,se-ye,j+he,se-ye,j+he,se+ye,j-he,se+ye],i.x,i.y);if(M.length>0){var G=o,te=_r(G,Qr(r)),ee=_r(G,Qr(M)),X=te;if(ee<te&&(r=[M[0],M[1]],X=ee),M.length>2){var ge=_r(G,{x:M[2],y:M[3]});ge<X&&(r=[M[2],M[3]])}}}var ae=xa(r,D,e.arrowShapes[u].spacing(t)+c),ce=xa(r,D,e.arrowShapes[u].gap(t)+c);d.startX=ce[0],d.startY=ce[1],d.arrowStartX=ae[0],d.arrowStartY=ae[1],y&&(!fe(d.startX)||!fe(d.startY)||!fe(d.endX)||!fe(d.endY)?d.badLine=!0:d.badLine=!1)};la.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};la.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var ns={};function h0(t,e,r){for(var n=function(l,c,f,d){return Qe(l,c,f,d)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}ns.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)h0(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};ns.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Kt={};Kt.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!hr(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(l){case"left":r=u.x-i/2-s;break;case"right":r=u.x+i/2+s;break;default:r=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Hc=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},Vc=function(e,r){var n=r.x-e.x,a=r.y-e.y;return Hc(n,a)},d0=function(e,r,n,a){var i=Un(0,a-.001,1),o=Un(0,a+.001,1),s=en(e,r,n,i),u=en(e,r,n,o);return Vc(s,u)};Kt.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(!!(i.mid||i.source||i.target)){e={x:n.midX,y:n.midY};var o=function(f,d,v){or(r.rscratch,f,d,v),or(r.rstyle,f,d,v)};o("labelX",null,e.x),o("labelY",null,e.y);var s=Hc(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function c(){if(c.cache)return c.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var v={x:n.allpts[d],y:n.allpts[d+1]},h={x:n.allpts[d+2],y:n.allpts[d+3]},p={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:v,p1:h,p2:p,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,g=a.bezierProjPcts.length;function b(x,S,C,k,D){var T=Lr(S,C),P=x.segments[x.segments.length-1],I={p0:S,p1:C,t0:k,t1:D,startDist:P?P.startDist+P.length:0,length:T};x.segments.push(I),x.length+=T}for(var w=0;w<f.length;w++){var y=f[w],_=f[w-1];_&&(y.startDist=_.startDist+_.length),b(y,y.p0,m[w*g],0,a.bezierProjPcts[0]);for(var E=0;E<g-1;E++)b(y,m[w*g+E],m[w*g+E+1],a.bezierProjPcts[E],a.bezierProjPcts[E+1]);b(y,m[w*g+g-1],y.p2,a.bezierProjPcts[g-1],1)}return c.cache=f},l=function(f){var d,v=f==="source";if(!!i[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),m,g=0,b=0,w=0;w<p.length;w++){for(var y=p[v?w:p.length-1-w],_=0;_<y.segments.length;_++){var E=y.segments[v?_:y.segments.length-1-_],x=w===p.length-1&&_===y.segments.length-1;if(g=b,b+=E.length,b>=h||x){m={cp:y,segment:E};break}}if(m)break}var S=m.cp,C=m.segment,k=(h-g)/C.length,D=C.t1-C.t0,T=v?C.t0+D*k:C.t1-D*k;T=Un(0,T,1),e=en(S.p0,S.p1,S.p2,T),d=d0(S.p0,S.p1,S.p2,T);break}case"straight":case"segments":case"haystack":{for(var P=0,I,B,L,N,H=n.allpts.length,W=0;W+3<H&&(v?(L={x:n.allpts[W],y:n.allpts[W+1]},N={x:n.allpts[W+2],y:n.allpts[W+3]}):(L={x:n.allpts[H-2-W],y:n.allpts[H-1-W]},N={x:n.allpts[H-4-W],y:n.allpts[H-3-W]}),I=Lr(L,N),B=P,P+=I,!(P>=h));W+=2);var F=h-B,A=F/I;A=Un(0,A,1),e=Ig(L,N,A),d=Vc(L,N);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,d)}};l("source"),l("target"),this.applyLabelDimensions(t)}};Kt.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Kt.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),i=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,s=Bt(r.rscratch,"labelWrapCachedLines",e)||[],u=o!=="wrap"?1:Math.max(s.length,1),l=a.height/u,c=l*i,f=a.width,d=a.height+(u-1)*(i-1)*l;or(r.rstyle,"labelWidth",e,f),or(r.rscratch,"labelWidth",e,f),or(r.rstyle,"labelHeight",e,d),or(r.rscratch,"labelHeight",e,d),or(r.rscratch,"labelLineHeight",e,c)};Kt.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(F,A){return A?(or(r.rscratch,F,e,A),A):Bt(r.rscratch,F,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="\u200B",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,d=t.pstyle("text-overflow-wrap").value,v=d==="anywhere",h=[],p=/[\s\u200b]+/,m=v?"":" ",g=0;g<c.length;g++){var b=c[g],w=this.calculateLabelDimensions(t,b),y=w.width;if(v){var _=b.split("").join(l);b=_}if(y>f){for(var E=b.split(p),x="",S=0;S<E.length;S++){var C=E[S],k=x.length===0?C:x+m+C,D=this.calculateLabelDimensions(t,k),T=D.width;T<=f?x+=C+m:(x&&h.push(x),x=C+m)}x.match(/^[\s\u200b]+$/)||h.push(x)}else h.push(b)}o("labelWrapCachedLines",h),a=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var P=t.pstyle("text-max-width").pfValue,I="",B="\u2026",L=!1;if(this.calculateLabelDimensions(t,a).width<P)return a;for(var N=0;N<a.length;N++){var H=this.calculateLabelDimensions(t,I+a[N]+B).width;if(H>P)break;I+=a[N],N===a.length-1&&(L=!0)}return L||(I+=B),I}return a};Kt.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Kt.calculateLabelDimensions=function(t,e){var r=this,n=Or(e,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=t.pstyle("font-style").strValue,u=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,c=t.pstyle("font-weight").strValue,f=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=f.getContext("2d");var v=f.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}d.font="".concat(s," ").concat(c," ").concat(u,"px ").concat(l);for(var h=0,p=0,m=e.split(`
`),g=0;g<m.length;g++){var b=m[g],w=d.measureText(b),y=Math.ceil(w.width),_=u;h=Math.max(y,h),p+=_}return h+=o,p+=o,a[n]={width:h,height:p}};Kt.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Kt.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var qc={},Tu=28,Du=!1;qc.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Tu||t.height()<Tu))return Du||(Oe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Du=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var xi={};xi.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var d=s[f];d(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};xi.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};xi.recalculateRenderedStyle=function(t,e){var r=function(y){return y._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,u=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),u.clean=!0)}for(var l=0;l<a.length;l++){var c=a[l],f=c._private,d=f.rstyle,v=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=v.x,d.nodeY=v.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var p=n[h],m=p._private,g=m.rstyle,b=m.rscratch;g.srcX=b.arrowStartX,g.srcY=b.arrowStartY,g.tgtX=b.arrowEndX,g.tgtY=b.arrowEndY,g.midX=b.midX,g.midY=b.midY,g.labelAngle=b.labelAngle,g.sourceLabelAngle=b.sourceLabelAngle,g.targetLabelAngle=b.targetLabelAngle}}};var Ei={};Ei.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(!!t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Ei.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Ei.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Ic),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Wc={};[qr,Za,dt,la,ns,Kt,qc,xi,Ei].forEach(function(t){Ee(Wc,t)});var Gc={};Gc.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(o.crossOrigin=e),o.src=t,o};var xn={};xn.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(t);return i.on.apply(i,a)};xn.binder=function(t){var e=this,r=t===window||t===document||t===document.body||Lp(t);if(e.supportsPassiveEvents==null){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=n}var i=function(s,u,l){var c=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(c[2]={capture:l!=null?l:!1,passive:!1,once:!1}),e.bindings.push({target:t,args:c}),(t.addEventListener||t.on).apply(t,c),this};return{on:i,addEventListener:i,addListener:i,bind:i}};xn.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};xn.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};xn.load=function(){var t=this,e=function(M){return M.selected()},r=function(M,G,te,ee){M==null&&(M=t.cy);for(var X=0;X<G.length;X++){var ge=G[X];M.emit({originalEvent:te,type:ge,position:ee})}},n=function(M){return M.shiftKey||M.metaKey||M.ctrlKey},a=function(M,G){var te=!0;if(t.cy.hasCompoundNodes()&&M&&M.pannable())for(var ee=0;G&&ee<G.length;ee++){var M=G[ee];if(M.isNode()&&M.isParent()&&!M.pannable()){te=!1;break}}else te=!0;return te},i=function(M){M[0]._private.grabbed=!0},o=function(M){M[0]._private.grabbed=!1},s=function(M){M[0]._private.rscratch.inDragLayer=!0},u=function(M){M[0]._private.rscratch.inDragLayer=!1},l=function(M){M[0]._private.rscratch.isGrabTarget=!0},c=function(M){M[0]._private.rscratch.isGrabTarget=!1},f=function(M,G){var te=G.addToList,ee=te.has(M);!ee&&M.grabbable()&&!M.locked()&&(te.merge(M),i(M))},d=function(M,G){if(!!M.cy().hasCompoundNodes()&&!(G.inDragLayer==null&&G.addToList==null)){var te=M.descendants();G.inDragLayer&&(te.forEach(s),te.connectedEdges().forEach(s)),G.addToList&&f(te,G)}},v=function(M,G){G=G||{};var te=M.cy().hasCompoundNodes();G.inDragLayer&&(M.forEach(s),M.neighborhood().stdFilter(function(ee){return!te||ee.isEdge()}).forEach(s)),G.addToList&&M.forEach(function(ee){f(ee,G)}),d(M,G),m(M,{inDragLayer:G.inDragLayer}),t.updateCachedGrabbedEles()},h=v,p=function(M){!M||(t.getCachedZSortedEles().forEach(function(G){o(G),u(G),c(G)}),t.updateCachedGrabbedEles())},m=function(M,G){if(!(G.inDragLayer==null&&G.addToList==null)&&!!M.cy().hasCompoundNodes()){var te=M.ancestors().orphans();if(!te.same(M)){var ee=te.descendants().spawnSelf().merge(te).unmerge(M).unmerge(M.descendants()),X=ee.connectedEdges();G.inDragLayer&&(X.forEach(s),ee.forEach(s)),G.addToList&&ee.forEach(function(ge){f(ge,G)})}}},g=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},b=typeof MutationObserver!="undefined",w=typeof ResizeObserver!="undefined";b?(t.removeObserver=new MutationObserver(function(Y){for(var M=0;M<Y.length;M++){var G=Y[M],te=G.removedNodes;if(te)for(var ee=0;ee<te.length;ee++){var X=te[ee];if(X===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Y){t.destroy()});var y=li(function(){t.cy.resize()},100);b&&(t.styleObserver=new MutationObserver(y),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",y),w&&(t.resizeObserver=new ResizeObserver(y),t.resizeObserver.observe(t.container));var _=function(M,G){for(;M!=null;)G(M),M=M.parentNode},E=function(){t.invalidateContainerClientCoordsCache()};_(t.container,function(Y){t.registerBinding(Y,"transitionend",E),t.registerBinding(Y,"animationend",E),t.registerBinding(Y,"scroll",E)}),t.registerBinding(t.container,"contextmenu",function(Y){Y.preventDefault()});var x=function(){return t.selection[4]!==0},S=function(M){for(var G=t.findContainerClientCoords(),te=G[0],ee=G[1],X=G[2],ge=G[3],ae=M.touches?M.touches:[M],ce=!1,_e=0;_e<ae.length;_e++){var Se=ae[_e];if(te<=Se.clientX&&Se.clientX<=te+X&&ee<=Se.clientY&&Se.clientY<=ee+ge){ce=!0;break}}if(!ce)return!1;for(var K=t.container,oe=M.target,ue=oe.parentNode,de=!1;ue;){if(ue===K){de=!0;break}ue=ue.parentNode}return!!de};t.registerBinding(t.container,"mousedown",function(M){if(!!S(M)){M.preventDefault(),g(),t.hoverData.capture=!0,t.hoverData.which=M.which;var G=t.cy,te=[M.clientX,M.clientY],ee=t.projectIntoViewport(te[0],te[1]),X=t.selection,ge=t.findNearestElements(ee[0],ee[1],!0,!1),ae=ge[0],ce=t.dragData.possibleDragElements;t.hoverData.mdownPos=ee,t.hoverData.mdownGPos=te;var _e=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var be=t.hoverData.down;be?be.emit({originalEvent:M,type:"taphold",position:{x:ee[0],y:ee[1]}}):G.emit({originalEvent:M,type:"taphold",position:{x:ee[0],y:ee[1]}})}},t.tapholdDuration)};if(M.which==3){t.hoverData.cxtStarted=!0;var Se={originalEvent:M,type:"cxttapstart",position:{x:ee[0],y:ee[1]}};ae?(ae.activate(),ae.emit(Se),t.hoverData.down=ae):G.emit(Se),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(M.which==1){ae&&ae.activate();{if(ae!=null&&t.nodeIsGrabbable(ae)){var K=function(be){return{originalEvent:M,type:be,position:{x:ee[0],y:ee[1]}}},oe=function(be){be.emit(K("grab"))};if(l(ae),!ae.selected())ce=t.dragData.possibleDragElements=G.collection(),h(ae,{addToList:ce}),ae.emit(K("grabon")).emit(K("grab"));else{ce=t.dragData.possibleDragElements=G.collection();var ue=G.$(function(de){return de.isNode()&&de.selected()&&t.nodeIsGrabbable(de)});v(ue,{addToList:ce}),ae.emit(K("grabon")),ue.forEach(oe)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ae,t.hoverData.downs=ge,t.hoverData.downTime=new Date().getTime()}r(ae,["mousedown","tapstart","vmousedown"],M,{x:ee[0],y:ee[1]}),ae==null?(X[4]=1,t.data.bgActivePosistion={x:ee[0],y:ee[1]},t.redrawHint("select",!0),t.redraw()):ae.pannable()&&(X[4]=1),_e()}X[0]=X[2]=ee[0],X[1]=X[3]=ee[1]}},!1),t.registerBinding(window,"mousemove",function(M){var G=t.hoverData.capture;if(!(!G&&!S(M))){var te=!1,ee=t.cy,X=ee.zoom(),ge=[M.clientX,M.clientY],ae=t.projectIntoViewport(ge[0],ge[1]),ce=t.hoverData.mdownPos,_e=t.hoverData.mdownGPos,Se=t.selection,K=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(K=t.findNearestElement(ae[0],ae[1],!0,!1));var oe=t.hoverData.last,ue=t.hoverData.down,de=[ae[0]-Se[2],ae[1]-Se[3]],be=t.dragData.possibleDragElements,Te;if(_e){var ze=ge[0]-_e[0],Ze=ze*ze,We=ge[1]-_e[1],Ge=We*We,Ye=Ze+Ge;t.hoverData.isOverThresholdDrag=Te=Ye>=t.desktopTapThreshold2}var vt=n(M);Te&&(t.hoverData.tapholdCancelled=!0);var ft=function(){var Ft=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Ft.length===0?(Ft.push(de[0]),Ft.push(de[1])):(Ft[0]+=de[0],Ft[1]+=de[1])};te=!0,r(K,["mousemove","vmousemove","tapdrag"],M,{x:ae[0],y:ae[1]});var nr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||ee.emit({originalEvent:M,type:"boxstart",position:{x:ae[0],y:ae[1]}}),Se[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Te){var Mt={originalEvent:M,type:"cxtdrag",position:{x:ae[0],y:ae[1]}};ue?ue.emit(Mt):ee.emit(Mt),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||K!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:M,type:"cxtdragout",position:{x:ae[0],y:ae[1]}}),t.hoverData.cxtOver=K,K&&K.emit({originalEvent:M,type:"cxtdragover",position:{x:ae[0],y:ae[1]}}))}}else if(t.hoverData.dragging){if(te=!0,ee.panningEnabled()&&ee.userPanningEnabled()){var At;if(t.hoverData.justStartedPan){var pa=t.hoverData.mdownPos;At={x:(ae[0]-pa[0])*X,y:(ae[1]-pa[1])*X},t.hoverData.justStartedPan=!1}else At={x:de[0]*X,y:de[1]*X};ee.panBy(At),ee.emit("dragpan"),t.hoverData.dragged=!0}ae=t.projectIntoViewport(M.clientX,M.clientY)}else if(Se[4]==1&&(ue==null||ue.pannable())){if(Te){if(!t.hoverData.dragging&&ee.boxSelectionEnabled()&&(vt||!ee.panningEnabled()||!ee.userPanningEnabled()))nr();else if(!t.hoverData.selecting&&ee.panningEnabled()&&ee.userPanningEnabled()){var xr=a(ue,t.hoverData.downs);xr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Se[4]=0,t.data.bgActivePosistion=Qr(ce),t.redrawHint("select",!0),t.redraw())}ue&&ue.pannable()&&ue.active()&&ue.unactivate()}}else{if(ue&&ue.pannable()&&ue.active()&&ue.unactivate(),(!ue||!ue.grabbed())&&K!=oe&&(oe&&r(oe,["mouseout","tapdragout"],M,{x:ae[0],y:ae[1]}),K&&r(K,["mouseover","tapdragover"],M,{x:ae[0],y:ae[1]}),t.hoverData.last=K),ue)if(Te){if(ee.boxSelectionEnabled()&&vt)ue&&ue.grabbed()&&(p(be),ue.emit("freeon"),be.emit("free"),t.dragData.didDrag&&(ue.emit("dragfreeon"),be.emit("dragfree"))),nr();else if(ue&&ue.grabbed()&&t.nodeIsDraggable(ue)){var pt=!t.dragData.didDrag;pt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||v(be,{inDragLayer:!0});var ot={x:0,y:0};if(fe(de[0])&&fe(de[1])&&(ot.x+=de[0],ot.y+=de[1],pt)){var gt=t.hoverData.dragDelta;gt&&fe(gt[0])&&fe(gt[1])&&(ot.x+=gt[0],ot.y+=gt[1])}t.hoverData.draggingEles=!0,be.silentShift(ot).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else ft();te=!0}if(Se[2]=ae[0],Se[3]=ae[1],te)return M.stopPropagation&&M.stopPropagation(),M.preventDefault&&M.preventDefault(),!1}},!1);var C,k,D;t.registerBinding(window,"mouseup",function(M){var G=t.hoverData.capture;if(!!G){t.hoverData.capture=!1;var te=t.cy,ee=t.projectIntoViewport(M.clientX,M.clientY),X=t.selection,ge=t.findNearestElement(ee[0],ee[1],!0,!1),ae=t.dragData.possibleDragElements,ce=t.hoverData.down,_e=n(M);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ce&&ce.unactivate(),t.hoverData.which===3){var Se={originalEvent:M,type:"cxttapend",position:{x:ee[0],y:ee[1]}};if(ce?ce.emit(Se):te.emit(Se),!t.hoverData.cxtDragged){var K={originalEvent:M,type:"cxttap",position:{x:ee[0],y:ee[1]}};ce?ce.emit(K):te.emit(K)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(r(ge,["mouseup","tapend","vmouseup"],M,{x:ee[0],y:ee[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(ce,["click","tap","vclick"],M,{x:ee[0],y:ee[1]}),k=!1,M.timeStamp-D<=te.multiClickDebounceTime()?(C&&clearTimeout(C),k=!0,D=null,r(ce,["dblclick","dbltap","vdblclick"],M,{x:ee[0],y:ee[1]})):(C=setTimeout(function(){k||r(ce,["oneclick","onetap","voneclick"],M,{x:ee[0],y:ee[1]})},te.multiClickDebounceTime()),D=M.timeStamp)),ce==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!n(M)&&(te.$(e).unselect(["tapunselect"]),ae.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ae=te.collection()),ge==ce&&!t.dragData.didDrag&&!t.hoverData.selecting&&ge!=null&&ge._private.selectable&&(t.hoverData.dragging||(te.selectionType()==="additive"||_e?ge.selected()?ge.unselect(["tapunselect"]):ge.select(["tapselect"]):_e||(te.$(e).unmerge(ge).unselect(["tapunselect"]),ge.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var oe=te.collection(t.getAllInBox(X[0],X[1],X[2],X[3]));t.redrawHint("select",!0),oe.length>0&&t.redrawHint("eles",!0),te.emit({type:"boxend",originalEvent:M,position:{x:ee[0],y:ee[1]}});var ue=function(Te){return Te.selectable()&&!Te.selected()};te.selectionType()==="additive"||_e||te.$(e).unmerge(oe).unselect(),oe.emit("box").stdFilter(ue).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!X[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var de=ce&&ce.grabbed();p(ae),de&&(ce.emit("freeon"),ae.emit("free"),t.dragData.didDrag&&(ce.emit("dragfreeon"),ae.emit("dragfree")))}}X[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var T=function(M){if(!t.scrollingPage){var G=t.cy,te=G.zoom(),ee=G.pan(),X=t.projectIntoViewport(M.clientX,M.clientY),ge=[X[0]*te+ee.x,X[1]*te+ee.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||x()){M.preventDefault();return}if(G.panningEnabled()&&G.userPanningEnabled()&&G.zoomingEnabled()&&G.userZoomingEnabled()){M.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var ae;M.deltaY!=null?ae=M.deltaY/-250:M.wheelDeltaY!=null?ae=M.wheelDeltaY/1e3:ae=M.wheelDelta/1e3,ae=ae*t.wheelSensitivity;var ce=M.deltaMode===1;ce&&(ae*=33);var _e=G.zoom()*Math.pow(10,ae);M.type==="gesturechange"&&(_e=t.gestureStartZoom*M.scale),G.zoom({level:_e,renderedPosition:{x:ge[0],y:ge[1]}}),G.emit(M.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",T,!0),t.registerBinding(window,"scroll",function(M){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(M){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||M.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Y){t.hasTouchStarted||T(Y)},!0),t.registerBinding(t.container,"mouseout",function(M){var G=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseout",position:{x:G[0],y:G[1]}})},!1),t.registerBinding(t.container,"mouseover",function(M){var G=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseover",position:{x:G[0],y:G[1]}})},!1);var P,I,B,L,N,H,W,F,A,R,O,$,V,q=function(M,G,te,ee){return Math.sqrt((te-M)*(te-M)+(ee-G)*(ee-G))},z=function(M,G,te,ee){return(te-M)*(te-M)+(ee-G)*(ee-G)},U;t.registerBinding(t.container,"touchstart",U=function(M){if(t.hasTouchStarted=!0,!!S(M)){g(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var G=t.cy,te=t.touchData.now,ee=t.touchData.earlier;if(M.touches[0]){var X=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);te[0]=X[0],te[1]=X[1]}if(M.touches[1]){var X=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);te[2]=X[0],te[3]=X[1]}if(M.touches[2]){var X=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);te[4]=X[0],te[5]=X[1]}if(M.touches[1]){t.touchData.singleTouchMoved=!0,p(t.dragData.touchDragEles);var ge=t.findContainerClientCoords();A=ge[0],R=ge[1],O=ge[2],$=ge[3],P=M.touches[0].clientX-A,I=M.touches[0].clientY-R,B=M.touches[1].clientX-A,L=M.touches[1].clientY-R,V=0<=P&&P<=O&&0<=B&&B<=O&&0<=I&&I<=$&&0<=L&&L<=$;var ae=G.pan(),ce=G.zoom();N=q(P,I,B,L),H=z(P,I,B,L),W=[(P+B)/2,(I+L)/2],F=[(W[0]-ae.x)/ce,(W[1]-ae.y)/ce];var _e=200,Se=_e*_e;if(H<Se&&!M.touches[2]){var K=t.findNearestElement(te[0],te[1],!0,!0),oe=t.findNearestElement(te[2],te[3],!0,!0);K&&K.isNode()?(K.activate().emit({originalEvent:M,type:"cxttapstart",position:{x:te[0],y:te[1]}}),t.touchData.start=K):oe&&oe.isNode()?(oe.activate().emit({originalEvent:M,type:"cxttapstart",position:{x:te[0],y:te[1]}}),t.touchData.start=oe):G.emit({originalEvent:M,type:"cxttapstart",position:{x:te[0],y:te[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(M.touches[2])G.boxSelectionEnabled()&&M.preventDefault();else if(!M.touches[1]){if(M.touches[0]){var ue=t.findNearestElements(te[0],te[1],!0,!0),de=ue[0];if(de!=null&&(de.activate(),t.touchData.start=de,t.touchData.starts=ue,t.nodeIsGrabbable(de))){var be=t.dragData.touchDragEles=G.collection(),Te=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),de.selected()?(Te=G.$(function(Ye){return Ye.selected()&&t.nodeIsGrabbable(Ye)}),v(Te,{addToList:be})):h(de,{addToList:be}),l(de);var ze=function(vt){return{originalEvent:M,type:vt,position:{x:te[0],y:te[1]}}};de.emit(ze("grabon")),Te?Te.forEach(function(Ye){Ye.emit(ze("grab"))}):de.emit(ze("grab"))}r(de,["touchstart","tapstart","vmousedown"],M,{x:te[0],y:te[1]}),de==null&&(t.data.bgActivePosistion={x:X[0],y:X[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],M,{x:te[0],y:te[1]})},t.tapholdDuration)}}if(M.touches.length>=1){for(var Ze=t.touchData.startPosition=[],We=0;We<te.length;We++)Ze[We]=ee[We]=te[We];var Ge=M.touches[0];t.touchData.startGPosition=[Ge.clientX,Ge.clientY]}}},!1);var Q;t.registerBinding(window,"touchmove",Q=function(M){var G=t.touchData.capture;if(!(!G&&!S(M))){var te=t.selection,ee=t.cy,X=t.touchData.now,ge=t.touchData.earlier,ae=ee.zoom();if(M.touches[0]){var ce=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);X[0]=ce[0],X[1]=ce[1]}if(M.touches[1]){var ce=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);X[2]=ce[0],X[3]=ce[1]}if(M.touches[2]){var ce=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);X[4]=ce[0],X[5]=ce[1]}var _e=t.touchData.startGPosition,Se;if(G&&M.touches[0]&&_e){for(var K=[],oe=0;oe<X.length;oe++)K[oe]=X[oe]-ge[oe];var ue=M.touches[0].clientX-_e[0],de=ue*ue,be=M.touches[0].clientY-_e[1],Te=be*be,ze=de+Te;Se=ze>=t.touchTapThreshold2}if(G&&t.touchData.cxt){M.preventDefault();var Ze=M.touches[0].clientX-A,We=M.touches[0].clientY-R,Ge=M.touches[1].clientX-A,Ye=M.touches[1].clientY-R,vt=z(Ze,We,Ge,Ye),ft=vt/H,nr=150,Mt=nr*nr,At=1.5,pa=At*At;if(ft>=pa||vt>=Mt){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var xr={originalEvent:M,type:"cxttapend",position:{x:X[0],y:X[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(xr),t.touchData.start=null):ee.emit(xr)}}if(G&&t.touchData.cxt){var xr={originalEvent:M,type:"cxtdrag",position:{x:X[0],y:X[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(xr):ee.emit(xr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var pt=t.findNearestElement(X[0],X[1],!0,!0);(!t.touchData.cxtOver||pt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:M,type:"cxtdragout",position:{x:X[0],y:X[1]}}),t.touchData.cxtOver=pt,pt&&pt.emit({originalEvent:M,type:"cxtdragover",position:{x:X[0],y:X[1]}}))}else if(G&&M.touches[2]&&ee.boxSelectionEnabled())M.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||ee.emit({originalEvent:M,type:"boxstart",position:{x:X[0],y:X[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,te[4]=1,!te||te.length===0||te[0]===void 0?(te[0]=(X[0]+X[2]+X[4])/3,te[1]=(X[1]+X[3]+X[5])/3,te[2]=(X[0]+X[2]+X[4])/3+1,te[3]=(X[1]+X[3]+X[5])/3+1):(te[2]=(X[0]+X[2]+X[4])/3,te[3]=(X[1]+X[3]+X[5])/3),t.redrawHint("select",!0),t.redraw();else if(G&&M.touches[1]&&!t.touchData.didSelect&&ee.zoomingEnabled()&&ee.panningEnabled()&&ee.userZoomingEnabled()&&ee.userPanningEnabled()){M.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ot=t.dragData.touchDragEles;if(ot){t.redrawHint("drag",!0);for(var gt=0;gt<ot.length;gt++){var ga=ot[gt]._private;ga.grabbed=!1,ga.rscratch.inDragLayer=!1}}var Ft=t.touchData.start,Ze=M.touches[0].clientX-A,We=M.touches[0].clientY-R,Ge=M.touches[1].clientX-A,Ye=M.touches[1].clientY-R,ds=q(Ze,We,Ge,Ye),Kf=ds/N;if(V){var Uf=Ze-P,Yf=We-I,Xf=Ge-B,jf=Ye-L,Zf=(Uf+Xf)/2,Qf=(Yf+jf)/2,_n=ee.zoom(),Di=_n*Kf,ma=ee.pan(),vs=F[0]*_n+ma.x,ps=F[1]*_n+ma.y,Jf={x:-Di/_n*(vs-ma.x-Zf)+vs,y:-Di/_n*(ps-ma.y-Qf)+ps};if(Ft&&Ft.active()){var ot=t.dragData.touchDragEles;p(ot),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Ft.unactivate().emit("freeon"),ot.emit("free"),t.dragData.didDrag&&(Ft.emit("dragfreeon"),ot.emit("dragfree"))}ee.viewport({zoom:Di,pan:Jf,cancelOnFailedZoom:!0}),ee.emit("pinchzoom"),N=ds,P=Ze,I=We,B=Ge,L=Ye,t.pinching=!0}if(M.touches[0]){var ce=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);X[0]=ce[0],X[1]=ce[1]}if(M.touches[1]){var ce=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);X[2]=ce[0],X[3]=ce[1]}if(M.touches[2]){var ce=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);X[4]=ce[0],X[5]=ce[1]}}else if(M.touches[0]&&!t.touchData.didSelect){var Pt=t.touchData.start,ki=t.touchData.last,pt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(pt=t.findNearestElement(X[0],X[1],!0,!0)),G&&Pt!=null&&M.preventDefault(),G&&Pt!=null&&t.nodeIsDraggable(Pt))if(Se){var ot=t.dragData.touchDragEles,gs=!t.dragData.didDrag;gs&&v(ot,{inDragLayer:!0}),t.dragData.didDrag=!0;var Sn={x:0,y:0};if(fe(K[0])&&fe(K[1])&&(Sn.x+=K[0],Sn.y+=K[1],gs)){t.redrawHint("eles",!0);var Ot=t.touchData.dragDelta;Ot&&fe(Ot[0])&&fe(Ot[1])&&(Sn.x+=Ot[0],Sn.y+=Ot[1])}t.hoverData.draggingEles=!0,ot.silentShift(Sn).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ge[0]&&t.touchData.startPosition[1]==ge[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ot=t.touchData.dragDelta=t.touchData.dragDelta||[];Ot.length===0?(Ot.push(K[0]),Ot.push(K[1])):(Ot[0]+=K[0],Ot[1]+=K[1])}if(r(Pt||pt,["touchmove","tapdrag","vmousemove"],M,{x:X[0],y:X[1]}),(!Pt||!Pt.grabbed())&&pt!=ki&&(ki&&ki.emit({originalEvent:M,type:"tapdragout",position:{x:X[0],y:X[1]}}),pt&&pt.emit({originalEvent:M,type:"tapdragover",position:{x:X[0],y:X[1]}})),t.touchData.last=pt,G)for(var gt=0;gt<X.length;gt++)X[gt]&&t.touchData.startPosition[gt]&&Se&&(t.touchData.singleTouchMoved=!0);if(G&&(Pt==null||Pt.pannable())&&ee.panningEnabled()&&ee.userPanningEnabled()){var eh=a(Pt,t.touchData.starts);eh&&(M.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Qr(t.touchData.startPosition)),t.swipePanning?(ee.panBy({x:K[0]*ae,y:K[1]*ae}),ee.emit("dragpan")):Se&&(t.swipePanning=!0,ee.panBy({x:ue*ae,y:be*ae}),ee.emit("dragpan"),Pt&&(Pt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ce=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);X[0]=ce[0],X[1]=ce[1]}}for(var oe=0;oe<X.length;oe++)ge[oe]=X[oe];G&&M.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var J;t.registerBinding(window,"touchcancel",J=function(M){var G=t.touchData.start;t.touchData.capture=!1,G&&G.unactivate()});var ie,ve,xe,le;if(t.registerBinding(window,"touchend",ie=function(M){var G=t.touchData.start,te=t.touchData.capture;if(te)M.touches.length===0&&(t.touchData.capture=!1),M.preventDefault();else return;var ee=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var X=t.cy,ge=X.zoom(),ae=t.touchData.now,ce=t.touchData.earlier;if(M.touches[0]){var _e=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);ae[0]=_e[0],ae[1]=_e[1]}if(M.touches[1]){var _e=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);ae[2]=_e[0],ae[3]=_e[1]}if(M.touches[2]){var _e=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);ae[4]=_e[0],ae[5]=_e[1]}G&&G.unactivate();var Se;if(t.touchData.cxt){if(Se={originalEvent:M,type:"cxttapend",position:{x:ae[0],y:ae[1]}},G?G.emit(Se):X.emit(Se),!t.touchData.cxtDragged){var K={originalEvent:M,type:"cxttap",position:{x:ae[0],y:ae[1]}};G?G.emit(K):X.emit(K)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!M.touches[2]&&X.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var oe=X.collection(t.getAllInBox(ee[0],ee[1],ee[2],ee[3]));ee[0]=void 0,ee[1]=void 0,ee[2]=void 0,ee[3]=void 0,ee[4]=0,t.redrawHint("select",!0),X.emit({type:"boxend",originalEvent:M,position:{x:ae[0],y:ae[1]}});var ue=function(Mt){return Mt.selectable()&&!Mt.selected()};oe.emit("box").stdFilter(ue).select().emit("boxselect"),oe.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(G!=null&&G.unactivate(),M.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!M.touches[1]){if(!M.touches[0]){if(!M.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var de=t.dragData.touchDragEles;if(G!=null){var be=G._private.grabbed;p(de),t.redrawHint("drag",!0),t.redrawHint("eles",!0),be&&(G.emit("freeon"),de.emit("free"),t.dragData.didDrag&&(G.emit("dragfreeon"),de.emit("dragfree"))),r(G,["touchend","tapend","vmouseup","tapdragout"],M,{x:ae[0],y:ae[1]}),G.unactivate(),t.touchData.start=null}else{var Te=t.findNearestElement(ae[0],ae[1],!0,!0);r(Te,["touchend","tapend","vmouseup","tapdragout"],M,{x:ae[0],y:ae[1]})}var ze=t.touchData.startPosition[0]-ae[0],Ze=ze*ze,We=t.touchData.startPosition[1]-ae[1],Ge=We*We,Ye=Ze+Ge,vt=Ye*ge*ge;t.touchData.singleTouchMoved||(G||X.$(":selected").unselect(["tapunselect"]),r(G,["tap","vclick"],M,{x:ae[0],y:ae[1]}),ve=!1,M.timeStamp-le<=X.multiClickDebounceTime()?(xe&&clearTimeout(xe),ve=!0,le=null,r(G,["dbltap","vdblclick"],M,{x:ae[0],y:ae[1]})):(xe=setTimeout(function(){ve||r(G,["onetap","voneclick"],M,{x:ae[0],y:ae[1]})},X.multiClickDebounceTime()),le=M.timeStamp)),G!=null&&!t.dragData.didDrag&&G._private.selectable&&vt<t.touchTapThreshold2&&!t.pinching&&(X.selectionType()==="single"?(X.$(e).unmerge(G).unselect(["tapunselect"]),G.select(["tapselect"])):G.selected()?G.unselect(["tapunselect"]):G.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var ft=0;ft<ae.length;ft++)ce[ft]=ae[ft];t.dragData.didDrag=!1,M.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),M.touches.length<2&&(M.touches.length===1&&(t.touchData.startGPosition=[M.touches[0].clientX,M.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent=="undefined"){var re=[],ne=function(M){return{clientX:M.clientX,clientY:M.clientY,force:1,identifier:M.pointerId,pageX:M.pageX,pageY:M.pageY,radiusX:M.width/2,radiusY:M.height/2,screenX:M.screenX,screenY:M.screenY,target:M.target}},Z=function(M){return{event:M,touch:ne(M)}},j=function(M){re.push(Z(M))},se=function(M){for(var G=0;G<re.length;G++){var te=re[G];if(te.event.pointerId===M.pointerId){re.splice(G,1);return}}},he=function(M){var G=re.filter(function(te){return te.event.pointerId===M.pointerId})[0];G.event=M,G.touch=ne(M)},ye=function(M){M.touches=re.map(function(G){return G.touch})},me=function(M){return M.pointerType==="mouse"||M.pointerType===4};t.registerBinding(t.container,"pointerdown",function(Y){me(Y)||(Y.preventDefault(),j(Y),ye(Y),U(Y))}),t.registerBinding(t.container,"pointerup",function(Y){me(Y)||(se(Y),ye(Y),ie(Y))}),t.registerBinding(t.container,"pointercancel",function(Y){me(Y)||(se(Y),ye(Y),J(Y))}),t.registerBinding(t.container,"pointermove",function(Y){me(Y)||(Y.preventDefault(),he(Y),ye(Y),Q(Y))})}};var tr={};tr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,u,l){return Yn(s,u,this.points,n,a,i/2,o/2,l)},checkPoint:function(n,a,i,o,s,u,l){return Zt(n,a,this.points,u,l,o,s,[0,-1],i)}}};tr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return Vg(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s){return kr(e,r,a,i,o,s,n)}}};tr.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),n=0;n<e.length/2;n++){var a=n*2,i=void 0;n<e.length/2-1?i=(n+1)*2:i=0,r[n*4]=e[a],r[n*4+1]=e[a+1];var o=e[i]-e[a],s=e[i+1]-e[a+1],u=Math.sqrt(o*o+s*s);r[n*4+2]=o/u,r[n*4+3]=s/u}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(c,f,d,v,h){this.renderer.nodeShapeImpl("round-polygon",c,f,d,v,h,this.points)},intersectLine:function(c,f,d,v,h,p,m){return qg(h,p,this.points,c,f,d,v)},checkPoint:function(c,f,d,v,h,p,m){return Hg(c,f,this.points,p,m,v,h)}}};tr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:ht(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return ec(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var u=oa(a,i),l=u*2;return!!(Zt(e,r,this.points,o,s,a,i-l,[0,-1],n)||Zt(e,r,this.points,o,s,a-l,i,[0,-1],n)||kr(e,r,l,l,o-a/2+u,s-i/2+u,n)||kr(e,r,l,l,o+a/2-u,s-i/2+u,n)||kr(e,r,l,l,o+a/2-u,s+i/2-u,n)||kr(e,r,l,l,o-a/2+u,s+i/2-u,n))}}};tr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:ac(),points:ht(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},generateCutTrianglePts:function(e,r,n,a){var i=this.cornerLength,o=r/2,s=e/2,u=n-s,l=n+s,c=a-o,f=a+o;return{topLeft:[u,c+i,u+i,c,u+i,c+i],topRight:[l-i,c,l,c+i,l-i,c+i],bottomRight:[l,f-i,l-i,f,l-i,f-i],bottomLeft:[u+i,f,u,f-i,u+i,f-i]}},intersectLine:function(e,r,n,a,i,o,s){var u=this.generateCutTrianglePts(n+2*s,a+2*s,e,r),l=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Yn(i,o,l,e,r)},checkPoint:function(e,r,n,a,i,o,s){if(Zt(e,r,this.points,o,s,a,i-2*this.cornerLength,[0,-1],n)||Zt(e,r,this.points,o,s,a-2*this.cornerLength,i,[0,-1],n))return!0;var u=this.generateCutTrianglePts(a,i,o,s);return mt(e,r,u.topLeft)||mt(e,r,u.topRight)||mt(e,r,u.bottomRight)||mt(e,r,u.bottomLeft)}}};tr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:ht(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var u=.15,l=.5,c=.85,f=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),d=function(p){var m=en({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},u),g=en({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l),b=en({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c);return[p[0],p[1],m.x,m.y,g.x,g.y,b.x,b.y,p[4],p[5]]},v=[].concat(d(f.topLeft),d(f.topRight),d(f.bottomRight),d(f.bottomLeft));return Yn(i,o,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,u=n+o,l=a-i,c=a+i,f=oo(e,r),d=f.heightOffset,v=f.widthOffset,h=f.ctrlPtOffsetPct*e,p={topLeft:[s,l+d,s+h,l,s+v,l],topRight:[u-v,l,u-h,l,u,l+d],bottomRight:[u,c-d,u-h,c,u-v,c],bottomLeft:[s+v,c,s+h,c,s,c-d]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,r,n,a,i,o,s){var u=oo(a,i),l=u.heightOffset,c=u.widthOffset;if(Zt(e,r,this.points,o,s,a,i-2*l,[0,-1],n)||Zt(e,r,this.points,o,s,a-2*c,i,[0,-1],n))return!0;for(var f=this.generateBarrelBezierPts(a,i,o,s),d=function(x,S,C){var k=C[4],D=C[2],T=C[0],P=C[5],I=C[1],B=Math.min(k,T),L=Math.max(k,T),N=Math.min(P,I),H=Math.max(P,I);if(B<=x&&x<=L&&N<=S&&S<=H){var W=Wg(k,D,T),F=Ng(W[0],W[1],W[2],x),A=F.filter(function(R){return 0<=R&&R<=1});if(A.length>0)return A[0]}return null},v=Object.keys(f),h=0;h<v.length;h++){var p=v[h],m=f[p],g=d(e,r,m);if(g!=null){var b=m[5],w=m[3],y=m[1],_=Qe(b,w,y,g);if(m.isTop&&_<=r||m.isBottom&&r<=_)return!0}}return!1}}};tr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:ht(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var u=e-(n/2+s),l=r-(a/2+s),c=l,f=e+(n/2+s),d=sr(i,o,e,r,u,l,f,c,!1);return d.length>0?d:ec(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var u=oa(a,i),l=2*u;if(Zt(e,r,this.points,o,s,a,i-l,[0,-1],n)||Zt(e,r,this.points,o,s,a-l,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(mt(e,r,d)||kr(e,r,l,l,o+a/2-u,s+i/2-u,n)||kr(e,r,l,l,o-a/2+u,s+i/2-u,n))}}};tr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",ht(3,0)),this.generateRoundPolygon("round-triangle",ht(3,0)),this.generatePolygon("rectangle",ht(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",ht(5,0)),this.generateRoundPolygon("round-pentagon",ht(5,0)),this.generatePolygon("hexagon",ht(6,0)),this.generateRoundPolygon("round-hexagon",ht(6,0)),this.generatePolygon("heptagon",ht(7,0)),this.generateRoundPolygon("round-heptagon",ht(7,0)),this.generatePolygon("octagon",ht(8,0)),this.generateRoundPolygon("round-octagon",ht(8,0));var n=new Array(20);{var a=io(5,0),i=io(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=nc(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,l)}};var ca={};ca.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};ca.redraw=function(t){t=t||jl();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};ca.beforeRender=function(t,e){if(!this.destroyed){e==null&&Ve("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var ku=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};ca.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){ku(t,!0,a);var i=jt();t.render(t.renderOptions);var o=t.lastDrawTime=jt();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else ku(t,!1,a);t.skipFrame=!1,Ga(n)}};Ga(r)}};var v0=function(e){this.init(e)},Kc=v0,En=Kc.prototype;En.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];En.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container();if($e){var n=$e.document,a=n.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",s=n.getElementById(i)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!s){var u=n.createElement("style");u.id=i,u.innerHTML="."+o+" { position: relative; }",a.insertBefore(u,a.children[0])}var l=$e.getComputedStyle(r),c=l.getPropertyValue("position");c==="static"&&Oe("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=fe(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};En.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};En.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};En.isHeadless=function(){return!1};[rs,Wc,Gc,xn,tr,ca].forEach(function(t){Ee(En,t)});var Gi=1e3/60,Uc={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=li(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(l,c){var f=jt(),d=a.averageRedrawTime,v=a.lastRedrawTime,h=[],p=a.cy.extent(),m=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var g=jt(),b=g-f,w=g-c;if(v<Gi){var y=Gi-(l?d:0);if(w>=e.deqFastCost*y)break}else if(l){if(b>=e.deqCost*v||b>=e.deqAvgCost*d)break}else if(w>=e.deqNoDrawCost*Gi)break;var _=e.deq(n,m,p);if(_.length>0)for(var E=0;E<_.length;E++)h.push(_[E]);else break}h.length>0&&(e.onDeqd(n,h),!l&&e.shouldRedraw(n,h,m,p)&&i())},s=e.priority||Wo;a.beforeRender(o,s(n))}}}},p0=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ka;Fo(this,t),this.idsByKey=new Vt,this.keyForId=new Vt,this.cachesByLvl=new Vt,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return $o(t,[{key:"getIdsFor",value:function(r){r==null&&Ve("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new mn,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Vt,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),t}(),Iu=25,Ia=50,$a=-4,vo=3,g0=7.99,m0=8,y0=1024,b0=1024,w0=1024,x0=.2,E0=.8,C0=10,_0=.15,S0=.1,T0=.9,D0=.9,k0=100,I0=1,Jr={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},M0=at({getKey:null,doesEleInvalidateKey:Ka,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ul,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ln=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=M0(r);Ee(n,a),n.lookup=new p0(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},je=Ln.prototype;je.reasons=Jr;je.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};je.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};je.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new na(function(r,n){return n.reqs-r.reqs});return e};je.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};je.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Ko(s*r))),n<$a)n=$a;else if(s>=g0||n>vo)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,d=o.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,d))return null;var v=u.get(t,n);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;var h;if(c<=Iu?h=Iu:c<=Ia?h=Ia:h=Math.ceil(c/Ia)*Ia,c>w0||f>b0)return null;var p=i.getTextureQueue(h),m=p[p.length-2],g=function(){return i.recycleTexture(h,f)||i.addTexture(h,f)};m||(m=p[p.length-1]),m||(m=g()),m.width-m.usedWidth<f&&(m=g());for(var b=function(L){return L&&L.scaledLabelShown===d},w=a&&a===Jr.dequeue,y=a&&a===Jr.highQuality,_=a&&a===Jr.downscale,E,x=n+1;x<=vo;x++){var S=u.get(t,x);if(S){E=S;break}}var C=E&&E.level===n+1?E:null,k=function(){m.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,m.usedWidth,0,f,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,h),b(C))k();else if(b(E))if(y){for(var D=E.level;D>n;D--)C=i.getElement(t,e,r,D,Jr.downscale);k()}else return i.queueElement(t,E.level-1),E;else{var T;if(!w&&!y&&!_)for(var P=n-1;P>=$a;P--){var I=u.get(t,P);if(I){T=I;break}}if(b(T))return i.queueElement(t,n),T;m.context.translate(m.usedWidth,0),m.context.scale(l,l),this.drawElement(m.context,t,e,d,!1),m.context.scale(1/l,1/l),m.context.translate(-m.usedWidth,0)}return v={x:m.usedWidth,texture:m,level:n,scale:l,width:f,height:c,scaledLabelShown:d},m.usedWidth+=Math.ceil(f+m0),m.eleCaches.push(v),u.set(t,n,v),i.checkTextureFullness(m),v};je.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};je.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(!!a){for(var i=$a;i<=vo;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};je.checkTextureUtility=function(t){t.invalidatedWidth>=x0*t.width&&this.retireTexture(t)};je.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>E0&&t.fullnessChecks>=C0?dr(r,t):t.fullnessChecks++};je.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;dr(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Go(i);var u=e.getRetiredTextureQueue(r);u.push(t)};je.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(y0,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};je.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Go(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),dr(a,o),n.push(o),o}};je.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};je.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<I0&&r.size()>0;o++){var s=r.pop(),u=s.key,l=s.eles[0],c=i.hasCache(l,s.level);if(n[u]=null,c)continue;a.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,t,s.level,Jr.dequeue)}return a};je.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=qo,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};je.onDequeue=function(t){this.onDequeues.push(t)};je.offDequeue=function(t){dr(this.onDequeues,t)};je.setupDequeueing=Uc.setupDequeueing({deqRedrawThreshold:k0,deqCost:_0,deqAvgCost:S0,deqNoDrawCost:T0,deqFastCost:D0,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(Uo(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var A0=1,Rn=-4,Qa=2,P0=3.99,O0=50,L0=50,B0=.15,R0=.1,N0=.9,z0=.9,F0=1,Mu=250,$0=4e3*4e3,H0=!0,Yc=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=jt()-2*Mu,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=li(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},L0),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=Mu?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,u){return u.reqs-s.reqs};r.layersQueue=new na(i),r.setupDequeueing()},it=Yc.prototype,Au=0,V0=Math.pow(2,53)-1;it.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:Au=++Au%V0,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(r,r),s.translate(u,l),o};it.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Ko(o*e)),r<Rn)r=Rn;else if(o>=P0||r>Qa)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),c=u[r]=u[r]||[],f,d=n.levelIsComplete(r,t),v,h=function(){var k=function(B){if(n.validateLayersElesOrdering(B,t),n.levelIsComplete(B,t))return v=u[B],!0},D=function(B){if(!v)for(var L=r+B;Rn<=L&&L<=Qa&&!k(L);L+=B);};D(1),D(-1);for(var T=c.length-1;T>=0;T--){var P=c[T];P.invalid&&dr(c,P)}};if(!d)h();else return c;var p=function(){if(!f){f=wt();for(var k=0;k<t.length;k++)Pg(f,t[k].boundingBox())}return f},m=function(k){k=k||{};var D=k.after;p();var T=f.w*l*(f.h*l);if(T>$0)return null;var P=n.makeLayer(f,r);if(D!=null){var I=c.indexOf(D)+1;c.splice(I,0,P)}else(k.insert===void 0||k.insert)&&c.unshift(P);return P};if(n.skipping&&!s)return null;for(var g=null,b=t.length/A0,w=!s,y=0;y<t.length;y++){var _=t[y],E=_._private.rscratch,x=E.imgLayerCaches=E.imgLayerCaches||{},S=x[r];if(S){g=S;continue}if((!g||g.eles.length>=b||!Jl(g.bb,_.boundingBox()))&&(g=m({insert:!0,after:g}),!g))return null;v||w?n.queueLayer(g,_):n.drawEleInLayer(g,_,r,e),g.eles.push(_),x[r]=g}return v||(w?null:c)};it.getEleLevelForLayerLevel=function(t,e){return t};it.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,H0),i.setImgSmoothing(o,!0))};it.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};it.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(!!r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};it.updateElementsInLayers=function(t,e){for(var r=this,n=ia(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Rn;l<=Qa;l++){var c=u[l];!c||i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i)}};it.haveLayers=function(){for(var t=this,e=!1,r=Rn;r<=Qa;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};it.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=jt(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};it.invalidateLayer=function(t){if(this.lastInvalidationTime=jt(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];dr(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};it.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};it.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};it.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};it.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<F0&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};it.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};it.requestRedraw=li(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);it.setupDequeueing=Uc.setupDequeueing({deqRedrawThreshold:O0,deqCost:B0,deqAvgCost:R0,deqNoDrawCost:N0,deqFastCost:z0,deq:function(e,r){return e.dequeue(r)},onDeqd:Wo,shouldRedraw:Ul,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Xc={},Pu;function q0(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function W0(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Ou(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function G0(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var u=i[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function K0(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}Xc.arrowShapeImpl=function(t){return(Pu||(Pu={polygon:q0,"triangle-backcurve":W0,"triangle-tee":Ou,"circle-triangle":G0,"triangle-cross":Ou,circle:K0}))[t]};var Ut={};Ut.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};Ut.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Ut.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Ut.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=r.getElement(e,l,n,a,i);if(c!=null){var f=s(u,e);if(f===0)return;var d=o(u,e),v=l.x1,h=l.y1,p=l.w,m=l.h,g,b,w,y,_;if(d!==0){var E=r.getRotationPoint(e);w=E.x,y=E.y,t.translate(w,y),t.rotate(d),_=u.getImgSmoothing(t),_||u.setImgSmoothing(t,!0);var x=r.getRotationOffset(e);g=x.x,b=x.y}else g=v,b=h;var S;f!==1&&(S=t.globalAlpha,t.globalAlpha=S*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,g,b,p,m),f!==1&&(t.globalAlpha=S),d!==0&&(t.rotate(-d),t.translate(-w,-y),_||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var U0=function(){return 0},Y0=function(e,r){return e.getTextAngle(r,null)},X0=function(e,r){return e.getTextAngle(r,"source")},j0=function(e,r){return e.getTextAngle(r,"target")},Z0=function(e,r){return r.effectiveOpacity()},Ki=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Ut.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,d=e.boundingBox(),v=i===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Uo(d,n))){var h=e.isEdge(),p=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,u,r,a,v,U0,Z0),(!h||!p)&&o.drawCachedElementPortion(t,e,l,r,a,v,Y0,Ki),h&&!p&&(o.drawCachedElementPortion(t,e,c,r,a,v,X0,Ki),o.drawCachedElementPortion(t,e,f,r,a,v,j0,Ki)),o.drawElementOverlay(t,e)}};Ut.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Ut.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};Ut.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];!o.isNode()||a.drawCachedElement(t,o,r,n)}};Ut.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var rr={};rr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,v=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,p=l*c,m=l*c,g=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;f==="straight-triangle"?(o.eleStrokeStyle(t,e,T),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=v,t.lineCap=h,o.eleStrokeStyle(t,e,T),o.drawEdgePath(e,t,s.allpts,d),t.lineCap="butt")},b=function(){!a||o.drawEdgeOverlay(t,e)},w=function(){!a||o.drawEdgeUnderlay(t,e)},y=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;o.drawArrowheads(t,e,T)},_=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var E=e.pstyle("ghost").value==="yes";if(E){var x=e.pstyle("ghost-offset-x").pfValue,S=e.pstyle("ghost-offset-y").pfValue,C=e.pstyle("ghost-opacity").value,k=p*C;t.translate(x,S),g(k),y(k),t.translate(-x,-S)}w(),g(),y(),b(),_(),r&&t.translate(u.x1,u.y1)}};var jc=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(!!n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};rr.drawEdgeOverlay=jc("overlay");rr.drawEdgeUnderlay=jc("underlay");rr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var f=r.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=f,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var v=2;v+3<r.length;v+=4)e.quadraticCurveTo(r[v],r[v+1],r[v+2],r[v+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<r.length;h+=2)e.lineTo(r[h],r[h+1]);break}e=i,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};rr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};rr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};rr.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle("opacity").value;o===void 0&&(o=d);var v=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,f,u,n,a,i),t.globalCompositeOperation=v);var h=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,h[0],h[1],h[2],o),s.colorStrokeStyle(t,h[0],h[1],h[2],o),s.drawArrowShape(e,t,c,f,u,n,a,i)}}};rr.drawArrowShape=function(t,e,r,n,a,i,o,s){var u=this,l=this.usePaths()&&a!=="triangle-cross",c=!1,f,d=e,v={x:i,y:o},h=t.pstyle("arrow-scale").value,p=this.getArrowWidth(n,h),m=u.arrowShapes[a];if(l){var g=u.arrowPathCache=u.arrowPathCache||[],b=Or(a),w=g[b];w!=null?(f=e=w,c=!0):(f=e=new Path2D,g[b]=f)}c||(e.beginPath&&e.beginPath(),l?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,p,s,v,n),e.closePath&&e.closePath()),e=d,l&&(e.translate(i,o),e.rotate(s),e.scale(p,p)),(r==="filled"||r==="both")&&(l?e.fill(f):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=(m.matchEdgeWidth?n:1)/(l?p:1),e.lineJoin="miter",l?e.stroke(f):e.stroke()),l&&(e.scale(1/p,1/p),e.rotate(-s),e.translate(-i,-o))};var as={};as.safeDrawImage=function(t,e,r,n,a,i,o,s,u,l){a<=0||i<=0||u<=0||l<=0||t.drawImage(e,r,n,a,i,o,s,u,l)};as.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,u=o.y,l=r.cy().style(),c=l.getIndexedStyle.bind(l),f=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),v=r.width(),h=r.height(),p=r.padding()*2,m=v+(c(r,"background-width-relative-to","value",n)==="inner"?0:p),g=h+(c(r,"background-height-relative-to","value",n)==="inner"?0:p),b=r._private.rscratch,w=c(r,"background-clip","value",n),y=w==="node",_=c(r,"background-image-opacity","value",n)*a,E=c(r,"background-image-smoothing","value",n),x=e.width||e.cachedW,S=e.height||e.cachedH;(x==null||S==null)&&(document.body.appendChild(e),x=e.cachedW=e.width||e.offsetWidth,S=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var C=x,k=S;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?C=c(r,"background-width","pfValue",n)*m:C=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?k=c(r,"background-height","pfValue",n)*g:k=c(r,"background-height","pfValue",n)),!(C===0||k===0)){if(f==="contain"){var D=Math.min(m/C,g/k);C*=D,k*=D}else if(f==="cover"){var D=Math.max(m/C,g/k);C*=D,k*=D}var T=s-m/2,P=c(r,"background-position-x","units",n),I=c(r,"background-position-x","pfValue",n);P==="%"?T+=(m-C)*I:T+=I;var B=c(r,"background-offset-x","units",n),L=c(r,"background-offset-x","pfValue",n);B==="%"?T+=(m-C)*L:T+=L;var N=u-g/2,H=c(r,"background-position-y","units",n),W=c(r,"background-position-y","pfValue",n);H==="%"?N+=(g-k)*W:N+=W;var F=c(r,"background-offset-y","units",n),A=c(r,"background-offset-y","pfValue",n);F==="%"?N+=(g-k)*A:N+=A,b.pathCache&&(T-=s,N-=u,s=0,u=0);var R=t.globalAlpha;t.globalAlpha=_;var O=i.getImgSmoothing(t),$=!1;if(E==="no"&&O?(i.setImgSmoothing(t,!1),$=!0):E==="yes"&&!O&&(i.setImgSmoothing(t,!0),$=!0),d==="no-repeat")y&&(t.save(),b.pathCache?t.clip(b.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,m,g),t.clip())),i.safeDrawImage(t,e,0,0,x,S,T,N,C,k),y&&t.restore();else{var V=t.createPattern(e,d);t.fillStyle=V,i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,m,g),t.translate(T,N),t.fill(),t.translate(-T,-N)}t.globalAlpha=R,$&&i.setImgSmoothing(t,O)}};var Wr={};Wr.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Ko(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};Wr.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var v=!r,h;r&&(h=r,t.translate(-h.x1,-h.y1)),a==null?(o.drawText(t,e,null,v,i),e.isEdge()&&(o.drawText(t,e,"source",v,i),o.drawText(t,e,"target",v,i))):o.drawText(t,e,a,v,i),r&&t.translate(h.x1,h.y1)};Wr.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Wr.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function Q0(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),t.fill()}Wr.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=Bt(a,"labelAngle",e);return o.strValue==="autorotate"?r=t.isEdge()?s:0:o.strValue==="none"?r=0:r=o.pfValue,r};Wr.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Bt(o,"labelX",r),l=Bt(o,"labelY",r),c,f,d=this.getLabelText(e,r);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,a);var v=r?r+"-":"",h=Bt(o,"labelWidth",r),p=Bt(o,"labelHeight",r),m=e.pstyle(v+"text-margin-x").pfValue,g=e.pstyle(v+"text-margin-y").pfValue,b=e.isEdge(),w=e.pstyle("text-halign").value,y=e.pstyle("text-valign").value;b&&(w="center",y="center"),u+=m,l+=g;var _;switch(n?_=this.getTextAngle(e,r):_=0,_!==0&&(c=u,f=l,t.translate(c,f),t.rotate(_),u=0,l=0),y){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var E=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,S=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue;if(E>0||S>0&&x>0){var k=u-C;switch(w){case"left":k-=h;break;case"center":k-=h/2;break}var D=l-p-C,T=h+2*C,P=p+2*C;if(E>0){var I=t.fillStyle,B=e.pstyle("text-background-color").value;t.fillStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+E*s+")";var L=e.pstyle("text-background-shape").strValue;L.indexOf("round")===0?Q0(t,k,D,T,P,2):t.fillRect(k,D,T,P),t.fillStyle=I}if(S>0&&x>0){var N=t.strokeStyle,H=t.lineWidth,W=e.pstyle("text-border-color").value,F=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+W[0]+","+W[1]+","+W[2]+","+x*s+")",t.lineWidth=S,t.setLineDash)switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=S/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(t.strokeRect(k,D,T,P),F==="double"){var A=S/2;t.strokeRect(k+A,D+A,T-A*2,P-A*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=H,t.strokeStyle=N}}var R=2*e.pstyle("text-outline-width").pfValue;if(R>0&&(t.lineWidth=R),e.pstyle("text-wrap").value==="wrap"){var O=Bt(o,"labelWrapCachedLines",r),$=Bt(o,"labelLineHeight",r),V=h/2,q=this.getLabelJustification(e);switch(q==="auto"||(w==="left"?q==="left"?u+=-h:q==="center"&&(u+=-V):w==="center"?q==="left"?u+=-V:q==="right"&&(u+=V):w==="right"&&(q==="center"?u+=V:q==="right"&&(u+=h))),y){case"top":l-=(O.length-1)*$;break;case"center":case"bottom":l-=(O.length-1)*$;break}for(var z=0;z<O.length;z++)R>0&&t.strokeText(O[z],u,l),t.fillText(O[z],u,l),l+=$}else R>0&&t.strokeText(d,u,l),t.fillText(d,u,l);_!==0&&(t.rotate(-_),t.translate(-c,-f))}}};var Cn={};Cn.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!fe(f.x)||!fe(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,v=o.usePaths(),h,p=!1,m=e.padding();s=e.width()+2*m,u=e.height()+2*m;var g;r&&(g=r,t.translate(-g.x1,-g.y1));for(var b=e.pstyle("background-image"),w=b.value,y=new Array(w.length),_=new Array(w.length),E=0,x=0;x<w.length;x++){var S=w[x],C=y[x]=S!=null&&S!=="none";if(C){var k=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);E++,_[x]=o.getCachedImage(S,k,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var D=e.pstyle("background-blacken").value,T=e.pstyle("border-width").pfValue,P=e.pstyle("background-opacity").value*d,I=e.pstyle("border-color").value,B=e.pstyle("border-style").value,L=e.pstyle("border-opacity").value*d;t.lineJoin="miter";var N=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P;o.eleFillStyle(t,e,j)},H=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;o.colorStrokeStyle(t,I[0],I[1],I[2],j)},W=e.pstyle("shape").strValue,F=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(f.x,f.y);var A=o.nodePathCache=o.nodePathCache||[],R=Kl(W==="polygon"?W+","+F.join(","):W,""+u,""+s),O=A[R];O!=null?(h=O,p=!0,c.pathCache=h):(h=new Path2D,A[R]=c.pathCache=h)}var $=function(){if(!p){var j=f;v&&(j={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||t,j.x,j.y,s,u)}v?t.fill(h):t.fill()},V=function(){for(var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,he=l.backgrounding,ye=0,me=0;me<_.length;me++){var Y=e.cy().style().getIndexedStyle(e,"background-image-containment","value",me);if(se&&Y==="over"||!se&&Y==="inside"){ye++;continue}y[me]&&_[me].complete&&!_[me].error&&(ye++,o.drawInscribedImage(t,_[me],e,me,j))}l.backgrounding=ye!==E,he!==l.backgrounding&&e.updateStyle(!1)},q=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(t,e,se),j&&(v||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u)))},z=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,se=(D>0?D:-D)*j,he=D>0?0:255;D!==0&&(o.colorFillStyle(t,he,he,he,se),v?t.fill(h):t.fill())},U=function(){if(T>0){if(t.lineWidth=T,t.lineCap="butt",t.setLineDash)switch(B){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(v?t.stroke(h):t.stroke(),B==="double"){t.lineWidth=T/3;var j=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(h):t.stroke(),t.globalCompositeOperation=j}t.setLineDash&&t.setLineDash([])}},Q=function(){a&&o.drawNodeOverlay(t,e,f,s,u)},J=function(){a&&o.drawNodeUnderlay(t,e,f,s,u)},ie=function(){o.drawElementText(t,e,null,n)},ve=e.pstyle("ghost").value==="yes";if(ve){var xe=e.pstyle("ghost-offset-x").pfValue,le=e.pstyle("ghost-offset-y").pfValue,re=e.pstyle("ghost-opacity").value,ne=re*d;t.translate(xe,le),N(re*P),$(),V(ne,!0),H(re*L),U(),q(D!==0||T!==0),V(ne,!1),z(ne),t.translate(-xe,-le)}v&&t.translate(-f.x,-f.y),J(),v&&t.translate(f.x,f.y),N(),$(),V(d,!0),H(),U(),q(D!==0||T!==0),V(d,!1),z(),v&&t.translate(-f.x,-f.y),ie(),Q(),r&&t.translate(g.x1,g.y1)}};var Zc=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(!!n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value;if(l>0){if(a=a||n.position(),i==null||o==null){var d=n.padding();i=n.width()+2*d,o=n.height()+2*d}s.colorFillStyle(r,c[0],c[1],c[2],l),s.nodeShapes[f].draw(r,a.x,a.y,i+u*2,o+u*2),r.fill()}}}};Cn.drawNodeOverlay=Zc("overlay");Cn.drawNodeUnderlay=Zc("underlay");Cn.hasPie=function(t){return t=t[0],t._private.hasPie};Cn.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,f=0,d=this.usePaths();d&&(o=0,s=0),i.units==="%"?c=c*i.pfValue:i.pfValue!==void 0&&(c=i.pfValue/2);for(var v=1;v<=a.pieBackgroundN;v++){var h=e.pstyle("pie-"+v+"-background-size").value,p=e.pstyle("pie-"+v+"-background-color").value,m=e.pstyle("pie-"+v+"-background-opacity").value*r,g=h/100;g+f>1&&(g=1-f);var b=1.5*Math.PI+2*Math.PI*f,w=2*Math.PI*g,y=b+w;h===0||f>=1||f+g>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,c,b,y),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],m),t.fill(),f+=g)}};var Ct={},J0=100;Ct.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Ct.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Ct.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),d=Lr(l,f),v=Lr(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,v))}else{var h=o?{x:0,y:0}:r.position(),p=r.paddedWidth(),m=r.paddedHeight();i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,m))}else if(r.isEdge()){var g=r.sourceEndpoint(),b=r.targetEndpoint();i=t.createLinearGradient(g.x,g.y,b.x,b.y)}else{var w=o?{x:0,y:0}:r.position(),y=r.paddedWidth(),_=r.paddedHeight(),E=y/2,x=_/2,S=r.pstyle("background-gradient-direction").value;switch(S){case"to-bottom":i=t.createLinearGradient(w.x,w.y-x,w.x,w.y+x);break;case"to-top":i=t.createLinearGradient(w.x,w.y+x,w.x,w.y-x);break;case"to-left":i=t.createLinearGradient(w.x+E,w.y,w.x-E,w.y);break;case"to-right":i=t.createLinearGradient(w.x-E,w.y,w.x+E,w.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(w.x-E,w.y-x,w.x+E,w.y+x);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(w.x-E,w.y+x,w.x+E,w.y-x);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(w.x+E,w.y-x,w.x-E,w.y+x);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(w.x+E,w.y+x,w.x-E,w.y-x);break}}if(!i)return null;for(var C=u.length===s.length,k=s.length,D=0;D<k;D++)i.addColorStop(C?u[D]:D/(k-1),"rgba("+s[D][0]+","+s[D][1]+","+s[D][2]+","+a+")");return i};Ct.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Ct.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Ct.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Ct.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Ct.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Ct.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Ct.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=a*o,l=i*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=r.canvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=r.bufferCanvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}};Ct.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Ct.render=function(t){t=t||jl();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,i=t.forcedPan,o=this,s=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=o.cy,l=o.data,c=l.canvasNeedsRedraw,f=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),d=t.motionBlur!==void 0?t.motionBlur:o.motionBlur,v=o.motionBlurPxRatio,h=u.hasCompoundNodes(),p=o.hoverData.draggingEles,m=!!(o.hoverData.selecting||o.touchData.selecting);d=d&&!e&&o.motionBlurEnabled&&!m;var g=d;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),d&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(g=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!f&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var b=u.style(),w=u.zoom(),y=a!==void 0?a:w,_=u.pan(),E={x:_.x,y:_.y},x={zoom:w,pan:{x:_.x,y:_.y}},S=o.prevViewport,C=S===void 0||x.zoom!==S.zoom||x.pan.x!==S.pan.x||x.pan.y!==S.pan.y;!C&&!(p&&!h)&&(o.motionBlurPxRatio=1),i&&(E=i),y*=s,E.x*=s,E.y*=s;var k=o.getCachedZSortedEles();function D(le,re,ne,Z,j){var se=le.globalCompositeOperation;le.globalCompositeOperation="destination-out",o.colorFillStyle(le,255,255,255,o.motionBlurTransparency),le.fillRect(re,ne,Z,j),le.globalCompositeOperation=se}function T(le,re){var ne,Z,j,se;!o.clearingMotionBlur&&(le===l.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||le===l.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(ne={x:_.x*v,y:_.y*v},Z=w*v,j=o.canvasWidth*v,se=o.canvasHeight*v):(ne=E,Z=y,j=o.canvasWidth,se=o.canvasHeight),le.setTransform(1,0,0,1,0,0),re==="motionBlur"?D(le,0,0,j,se):!e&&(re===void 0||re)&&le.clearRect(0,0,j,se),r||(le.translate(ne.x,ne.y),le.scale(Z,Z)),i&&le.translate(i.x,i.y),a&&le.scale(a,a)}if(f||(o.textureDrawLastFrame=!1),f){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=u.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var P=o.data.bufferContexts[o.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:P,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var x=o.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:o.canvasWidth,height:o.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var I=l.contexts[o.NODE],B=o.textureCache.texture,x=o.textureCache.viewport;I.setTransform(1,0,0,1,0,0),d?D(I,0,0,x.width,x.height):I.clearRect(0,0,x.width,x.height);var L=b.core("outside-texture-bg-color").value,N=b.core("outside-texture-bg-opacity").value;o.colorFillStyle(I,L[0],L[1],L[2],N),I.fillRect(0,0,x.width,x.height);var w=u.zoom();T(I,!1),I.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s),I.drawImage(B,x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var H=u.extent(),W=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),F=o.hideEdgesOnViewport&&W,A=[];if(A[o.NODE]=!c[o.NODE]&&d&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,A[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),A[o.DRAG]=!c[o.DRAG]&&d&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,A[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||r||n||A[o.NODE]){var R=d&&!A[o.NODE]&&v!==1,I=e||(R?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:l.contexts[o.NODE]),O=d&&!R?"motionBlur":void 0;T(I,O),F?o.drawCachedNodes(I,k.nondrag,s,H):o.drawLayeredElements(I,k.nondrag,s,H),o.debug&&o.drawDebugPoints(I,k.nondrag),!r&&!d&&(c[o.NODE]=!1)}if(!n&&(c[o.DRAG]||r||A[o.DRAG])){var R=d&&!A[o.DRAG]&&v!==1,I=e||(R?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:l.contexts[o.DRAG]);T(I,d&&!R?"motionBlur":void 0),F?o.drawCachedNodes(I,k.drag,s,H):o.drawCachedElements(I,k.drag,s,H),o.debug&&o.drawDebugPoints(I,k.drag),!r&&!d&&(c[o.DRAG]=!1)}if(o.showFps||!n&&c[o.SELECT_BOX]&&!r){var I=e||l.contexts[o.SELECT_BOX];if(T(I),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var w=o.cy.zoom(),$=b.core("selection-box-border-width").value/w;I.lineWidth=$,I.fillStyle="rgba("+b.core("selection-box-color").value[0]+","+b.core("selection-box-color").value[1]+","+b.core("selection-box-color").value[2]+","+b.core("selection-box-opacity").value+")",I.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),$>0&&(I.strokeStyle="rgba("+b.core("selection-box-border-color").value[0]+","+b.core("selection-box-border-color").value[1]+","+b.core("selection-box-border-color").value[2]+","+b.core("selection-box-opacity").value+")",I.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(l.bgActivePosistion&&!o.hoverData.selecting){var w=o.cy.zoom(),V=l.bgActivePosistion;I.fillStyle="rgba("+b.core("active-bg-color").value[0]+","+b.core("active-bg-color").value[1]+","+b.core("active-bg-color").value[2]+","+b.core("active-bg-opacity").value+")",I.beginPath(),I.arc(V.x,V.y,b.core("active-bg-size").pfValue/w,0,2*Math.PI),I.fill()}var q=o.lastRedrawTime;if(o.showFps&&q){q=Math.round(q);var z=Math.round(1e3/q);I.setTransform(1,0,0,1,0,0),I.fillStyle="rgba(255, 0, 0, 0.75)",I.strokeStyle="rgba(255, 0, 0, 0.75)",I.lineWidth=1,I.fillText("1 frame = "+q+" ms = "+z+" fps",0,20);var U=60;I.strokeRect(0,30,250,20),I.fillRect(0,30,250*Math.min(z/U,1),20)}r||(c[o.SELECT_BOX]=!1)}if(d&&v!==1){var Q=l.contexts[o.NODE],J=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],ie=l.contexts[o.DRAG],ve=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],xe=function(re,ne,Z){re.setTransform(1,0,0,1,0,0),Z||!g?re.clearRect(0,0,o.canvasWidth,o.canvasHeight):D(re,0,0,o.canvasWidth,o.canvasHeight);var j=v;re.drawImage(ne,0,0,o.canvasWidth*j,o.canvasHeight*j,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||A[o.NODE])&&(xe(Q,J,A[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||A[o.DRAG])&&(xe(ie,ve,A[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=x,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),d&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!f,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},J0)),e||u.emit("render")};var yr={};yr.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+o*i[u*2],r+s*i[u*2+1]);t.closePath()};yr.drawRoundPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2,u=Yo(n,a);t.beginPath&&t.beginPath();for(var l=0;l<i.length/4;l++){var c=void 0,f=void 0;l===0?c=i.length-2:c=l*4-2,f=l*4+2;var d=e+o*i[l*4],v=r+s*i[l*4+1],h=-i[c]*i[f]-i[c+1]*i[f+1],p=u/Math.tan(Math.acos(h)/2),m=d-p*i[c],g=v-p*i[c+1],b=d+p*i[f],w=v+p*i[f+1];l===0?t.moveTo(m,g):t.lineTo(m,g),t.arcTo(d,v,b,w,u)}t.closePath()};yr.drawRoundRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=oa(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+i,r-o,e+i,r,s),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.arcTo(e-i,r-o,e,r-o,s),t.lineTo(e,r-o),t.closePath()};yr.drawBottomRoundRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=oa(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+i,r-o),t.lineTo(e+i,r),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.lineTo(e-i,r-o),t.lineTo(e,r-o),t.closePath()};yr.drawCutRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=ac();t.beginPath&&t.beginPath(),t.moveTo(e-i+s,r-o),t.lineTo(e+i-s,r-o),t.lineTo(e+i,r-o+s),t.lineTo(e+i,r+o-s),t.lineTo(e+i-s,r+o),t.lineTo(e-i+s,r+o),t.lineTo(e-i,r+o-s),t.lineTo(e-i,r-o+s),t.closePath()};yr.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,u=e+i,l=r-o,c=r+o,f=oo(n,a),d=f.widthOffset,v=f.heightOffset,h=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,l+v),t.lineTo(s,c-v),t.quadraticCurveTo(s+h,c,s+d,c),t.lineTo(u-d,c),t.quadraticCurveTo(u-h,c,u,c-v),t.lineTo(u,l+v),t.quadraticCurveTo(u-h,l,u-d,l),t.lineTo(s+d,l),t.quadraticCurveTo(s+h,l,s,l+v),t.closePath()};var Lu=Math.sin(0),Bu=Math.cos(0),po={},go={},Qc=Math.PI/40;for(var Xr=0*Math.PI;Xr<2*Math.PI;Xr+=Qc)po[Xr]=Math.sin(Xr),go[Xr]=Math.cos(Xr);yr.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=Qc)i=e-s*po[l]*Lu+s*go[l]*Bu,o=r+u*go[l]*Lu+u*po[l]*Bu,l===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var fa={};fa.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};fa.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=fe(t.maxWidth)||fe(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,l=t.scale;else if(s){var c=1/0,f=1/0;fe(t.maxWidth)&&(c=l*t.maxWidth/i),fe(t.maxHeight)&&(f=l*t.maxHeight/o),l=Math.min(c,f),i*=l,o*=l}s||(i*=u,o*=u,l*=u);var d=document.createElement("canvas");d.width=i,d.height=o,d.style.width=i+"px",d.style.height=o+"px";var v=d.getContext("2d");if(i>0&&o>0){v.clearRect(0,0,i,o),v.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)v.translate(-n.x1*l,-n.y1*l),v.scale(l,l),this.drawElements(v,h),v.scale(1/l,1/l),v.translate(n.x1*l,n.y1*l);else{var p=e.pan(),m={x:p.x*l,y:p.y*l};l*=e.zoom(),v.translate(m.x,m.y),v.scale(l,l),this.drawElements(v,h),v.scale(1/l,1/l),v.translate(-m.x,-m.y)}t.bg&&(v.globalCompositeOperation="destination-over",v.fillStyle=t.bg,v.rect(0,0,i,o),v.fill())}return d};function eb(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function Ru(t){var e=t.indexOf(",");return t.substr(e+1)}function Jc(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new yn(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return eb(Ru(n()),r);case"base64":return Ru(n());case"base64uri":default:return n()}}fa.png=function(t){return Jc(t,this.bufferCanvasImage(t),"image/png")};fa.jpg=function(t){return Jc(t,this.bufferCanvasImage(t),"image/jpeg")};var ef={};ef.nodeShapeImpl=function(t,e,r,n,a,i,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var tb=tf,Ie=tf.prototype;Ie.CANVAS_LAYERS=3;Ie.SELECT_BOX=0;Ie.DRAG=1;Ie.NODE=2;Ie.BUFFER_COUNT=3;Ie.TEXTURE_BUFFER=0;Ie.MOTIONBLUR_BUFFER_NODE=1;Ie.MOTIONBLUR_BUFFER_DRAG=2;function tf(t){var e=this;e.data={canvases:new Array(Ie.CANVAS_LAYERS),contexts:new Array(Ie.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ie.CANVAS_LAYERS),bufferCanvases:new Array(Ie.BUFFER_COUNT),bufferContexts:new Array(Ie.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=t.cy.container();i.appendChild(e.data.canvasContainer),i.style[r]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Np()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<Ie.CANVAS_LAYERS;s++){var u=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=u.getContext("2d"),Object.keys(o).forEach(function(q){u.style[q]=o[q]}),u.style.position="absolute",u.setAttribute("data-id","layer"+s),u.style.zIndex=String(Ie.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ie.NODE].setAttribute("data-id","layer"+Ie.NODE+"-node"),e.data.canvases[Ie.SELECT_BOX].setAttribute("data-id","layer"+Ie.SELECT_BOX+"-selectbox"),e.data.canvases[Ie.DRAG].setAttribute("data-id","layer"+Ie.DRAG+"-drag");for(var s=0;s<Ie.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var l=wt(),c=function(z){return{x:(z.x1+z.x2)/2,y:(z.y1+z.y2)/2}},f=function(z){return{x:-z.w/2,y:-z.h/2}},d=function(z){var U=z[0]._private,Q=U.oldBackgroundTimestamp===U.backgroundTimestamp;return!Q},v=function(z){return z[0]._private.nodeKey},h=function(z){return z[0]._private.labelStyleKey},p=function(z){return z[0]._private.sourceLabelStyleKey},m=function(z){return z[0]._private.targetLabelStyleKey},g=function(z,U,Q,J,ie){return e.drawElement(z,U,Q,!1,!1,ie)},b=function(z,U,Q,J,ie){return e.drawElementText(z,U,Q,J,"main",ie)},w=function(z,U,Q,J,ie){return e.drawElementText(z,U,Q,J,"source",ie)},y=function(z,U,Q,J,ie){return e.drawElementText(z,U,Q,J,"target",ie)},_=function(z){return z.boundingBox(),z[0]._private.bodyBounds},E=function(z){return z.boundingBox(),z[0]._private.labelBounds.main||l},x=function(z){return z.boundingBox(),z[0]._private.labelBounds.source||l},S=function(z){return z.boundingBox(),z[0]._private.labelBounds.target||l},C=function(z,U){return U},k=function(z){return c(_(z))},D=function(z,U,Q){var J=z?z+"-":"";return{x:U.x+Q.pstyle(J+"text-margin-x").pfValue,y:U.y+Q.pstyle(J+"text-margin-y").pfValue}},T=function(z,U,Q){var J=z[0]._private.rscratch;return{x:J[U],y:J[Q]}},P=function(z){return D("",T(z,"labelX","labelY"),z)},I=function(z){return D("source",T(z,"sourceLabelX","sourceLabelY"),z)},B=function(z){return D("target",T(z,"targetLabelX","targetLabelY"),z)},L=function(z){return f(_(z))},N=function(z){return f(x(z))},H=function(z){return f(S(z))},W=function(z){var U=E(z),Q=f(E(z));if(z.isNode()){switch(z.pstyle("text-halign").value){case"left":Q.x=-U.w;break;case"right":Q.x=0;break}switch(z.pstyle("text-valign").value){case"top":Q.y=-U.h;break;case"bottom":Q.y=0;break}}return Q},F=e.data.eleTxrCache=new Ln(e,{getKey:v,doesEleInvalidateKey:d,drawElement:g,getBoundingBox:_,getRotationPoint:k,getRotationOffset:L,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),A=e.data.lblTxrCache=new Ln(e,{getKey:h,drawElement:b,getBoundingBox:E,getRotationPoint:P,getRotationOffset:W,isVisible:C}),R=e.data.slbTxrCache=new Ln(e,{getKey:p,drawElement:w,getBoundingBox:x,getRotationPoint:I,getRotationOffset:N,isVisible:C}),O=e.data.tlbTxrCache=new Ln(e,{getKey:m,drawElement:y,getBoundingBox:S,getRotationPoint:B,getRotationOffset:H,isVisible:C}),$=e.data.lyrTxrCache=new Yc(e);e.onUpdateEleCalcs(function(z,U){F.invalidateElements(U),A.invalidateElements(U),R.invalidateElements(U),O.invalidateElements(U),$.invalidateElements(U);for(var Q=0;Q<U.length;Q++){var J=U[Q]._private;J.oldBackgroundTimestamp=J.backgroundTimestamp}});var V=function(z){for(var U=0;U<z.length;U++)$.enqueueElementRefinement(z[U].ele)};F.onDequeue(V),A.onDequeue(V),R.onDequeue(V),O.onDequeue(V)}Ie.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Ie.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Ie.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Ie.SELECT_BOX]=e;break}};var rb=typeof Path2D!="undefined";Ie.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Ie.usePaths=function(){return rb&&this.pathsEnabled};Ie.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Ie.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Ie.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas=="undefined"?"undefined":Ue(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r};[Xc,Ut,rr,as,Wr,Cn,Ct,yr,fa,ef].forEach(function(t){Ee(Ie,t)});var nb=[{name:"null",impl:Fc},{name:"base",impl:Kc},{name:"canvas",impl:tb}],ab=[{type:"layout",extensions:f0},{type:"renderer",extensions:nb}],rf={},nf={};function af(t,e,r){var n=r,a=function(S){Oe("Can not register `"+e+"` for `"+t+"` since `"+S+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Qn.prototype[e])return a(e);Qn.prototype[e]=r}else if(t==="collection"){if(nt.prototype[e])return a(e);nt.prototype[e]=r}else if(t==="layout"){for(var i=function(S){this.options=S,r.call(this,S),ke(this._private)||(this._private={}),this._private.cy=S.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var x=this.options;if(x&&x.animate){var S=this.animations;if(S)for(var C=0;C<S.length;C++)S[C].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(S){return S._private.cy},d={addEventFields:function(S,C){C.layout=S,C.cy=f(S),C.target=S},bubble:function(){return!0},parent:function(S){return f(S)}};Ee(o,{createEmitter:function(){return this._private.emitter=new pi(d,this),this},emitter:function(){return this._private.emitter},on:function(S,C){return this.emitter().on(S,C),this},one:function(S,C){return this.emitter().one(S,C),this},once:function(S,C){return this.emitter().one(S,C),this},removeListener:function(S,C){return this.emitter().removeListener(S,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(S,C){return this.emitter().emit(S,C),this}}),Ae.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var v=of("renderer","base"),h=v.prototype,p=r,m=r.prototype,g=function(){v.apply(this,arguments),p.apply(this,arguments)},b=g.prototype;for(var w in h){var y=h[w],_=m[w]!=null;if(_)return a(w);b[w]=y}for(var E in m)b[E]=m[E];h.clientFunctions.forEach(function(x){b[x]=b[x]||function(){Ve("Renderer does not implement `renderer."+x+"()` on its prototype")}}),n=g}else if(t==="__proto__"||t==="constructor"||t==="prototype")return Ve(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Hl({map:rf,keys:[t,e],value:n})}function of(t,e){return Vl({map:rf,keys:[t,e]})}function ib(t,e,r,n,a){return Hl({map:nf,keys:[t,e,r,n],value:a})}function ob(t,e,r,n){return Vl({map:nf,keys:[t,e,r,n]})}var mo=function(){if(arguments.length===2)return of.apply(null,arguments);if(arguments.length===3)return af.apply(null,arguments);if(arguments.length===4)return ob.apply(null,arguments);if(arguments.length===5)return ib.apply(null,arguments);Ve("Invalid extension access syntax")};Qn.prototype.extension=mo;ab.forEach(function(t){t.extensions.forEach(function(e){af(t.type,e.name,e.impl)})});var sf=function t(){if(!(this instanceof t))return new t;this.length=0},Nr=sf.prototype;Nr.instanceString=function(){return"stylesheet"};Nr.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Nr.css=function(t,e){var r=this.length-1;if(we(t))this[r].properties.push({name:t,value:e});else if(ke(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var u=st.properties[o]||st.properties[ci(o)];if(u!=null){var l=u.name,c=s;this[r].properties.push({name:l,value:c})}}}return this};Nr.style=Nr.css;Nr.generateStyle=function(t){var e=new st(t);return this.appendToStyle(e)};Nr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var sb="3.21.0",zr=function(e){if(e===void 0&&(e={}),ke(e))return new Qn(e);if(we(e))return mo.apply(mo,arguments)};zr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(zr),t.apply(null,e),this};zr.warnings=function(t){return Yl(t)};zr.version=sb;zr.stylesheet=zr.Stylesheet=sf;var z1=zr,yt="top",kt="bottom",It="right",bt="left",is="auto",ha=[yt,kt,It,bt],un="start",Jn="end",ub="clippingParents",uf="viewport",Mn="popper",lb="reference",Nu=ha.reduce(function(t,e){return t.concat([e+"-"+un,e+"-"+Jn])},[]),lf=[].concat(ha,[is]).reduce(function(t,e){return t.concat([e,e+"-"+un,e+"-"+Jn])},[]),cb="beforeRead",fb="read",hb="afterRead",db="beforeMain",vb="main",pb="afterMain",gb="beforeWrite",mb="write",yb="afterWrite",bb=[cb,fb,hb,db,vb,pb,gb,mb,yb];function Gt(t){return t?(t.nodeName||"").toLowerCase():null}function zt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ln(t){var e=zt(t).Element;return t instanceof e||t instanceof Element}function Dt(t){var e=zt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function cf(t){if(typeof ShadowRoot=="undefined")return!1;var e=zt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function wb(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},a=e.attributes[r]||{},i=e.elements[r];!Dt(i)||!Gt(i)||(Object.assign(i.style,n),Object.keys(a).forEach(function(o){var s=a[o];s===!1?i.removeAttribute(o):i.setAttribute(o,s===!0?"":s)}))})}function xb(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var a=e.elements[n],i=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),s=o.reduce(function(u,l){return u[l]="",u},{});!Dt(a)||!Gt(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(u){a.removeAttribute(u)}))})}}var ff={name:"applyStyles",enabled:!0,phase:"write",fn:wb,effect:xb,requires:["computeStyles"]};function qt(t){return t.split("-")[0]}var Ir=Math.max,Ja=Math.min,cn=Math.round;function fn(t,e){e===void 0&&(e=!1);var r=t.getBoundingClientRect(),n=1,a=1;if(Dt(t)&&e){var i=t.offsetHeight,o=t.offsetWidth;o>0&&(n=cn(r.width)/o||1),i>0&&(a=cn(r.height)/i||1)}return{width:r.width/n,height:r.height/a,top:r.top/a,right:r.right/n,bottom:r.bottom/a,left:r.left/n,x:r.left/n,y:r.top/a}}function os(t){var e=fn(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function hf(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&cf(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Jt(t){return zt(t).getComputedStyle(t)}function Eb(t){return["table","td","th"].indexOf(Gt(t))>=0}function br(t){return((ln(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ci(t){return Gt(t)==="html"?t:t.assignedSlot||t.parentNode||(cf(t)?t.host:null)||br(t)}function zu(t){return!Dt(t)||Jt(t).position==="fixed"?null:t.offsetParent}function Cb(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Dt(t)){var n=Jt(t);if(n.position==="fixed")return null}for(var a=Ci(t);Dt(a)&&["html","body"].indexOf(Gt(a))<0;){var i=Jt(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function da(t){for(var e=zt(t),r=zu(t);r&&Eb(r)&&Jt(r).position==="static";)r=zu(r);return r&&(Gt(r)==="html"||Gt(r)==="body"&&Jt(r).position==="static")?e:r||Cb(t)||e}function ss(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Nn(t,e,r){return Ir(t,Ja(e,r))}function _b(t,e,r){var n=Nn(t,e,r);return n>r?r:n}function df(){return{top:0,right:0,bottom:0,left:0}}function vf(t){return Object.assign({},df(),t)}function pf(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var Sb=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,vf(typeof e!="number"?e:pf(e,ha))};function Tb(t){var e,r=t.state,n=t.name,a=t.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,s=qt(r.placement),u=ss(s),l=[bt,It].indexOf(s)>=0,c=l?"height":"width";if(!(!i||!o)){var f=Sb(a.padding,r),d=os(i),v=u==="y"?yt:bt,h=u==="y"?kt:It,p=r.rects.reference[c]+r.rects.reference[u]-o[u]-r.rects.popper[c],m=o[u]-r.rects.reference[u],g=da(i),b=g?u==="y"?g.clientHeight||0:g.clientWidth||0:0,w=p/2-m/2,y=f[v],_=b-d[c]-f[h],E=b/2-d[c]/2+w,x=Nn(y,E,_),S=u;r.modifiersData[n]=(e={},e[S]=x,e.centerOffset=x-E,e)}}function Db(t){var e=t.state,r=t.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!hf(e.elements.popper,a)||(e.elements.arrow=a))}var kb={name:"arrow",enabled:!0,phase:"main",fn:Tb,effect:Db,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hn(t){return t.split("-")[1]}var Ib={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mb(t){var e=t.x,r=t.y,n=window,a=n.devicePixelRatio||1;return{x:cn(e*a)/a||0,y:cn(r*a)/a||0}}function Fu(t){var e,r=t.popper,n=t.popperRect,a=t.placement,i=t.variation,o=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,f=t.isFixed,d=o.x,v=d===void 0?0:d,h=o.y,p=h===void 0?0:h,m=typeof c=="function"?c({x:v,y:p}):{x:v,y:p};v=m.x,p=m.y;var g=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),w=bt,y=yt,_=window;if(l){var E=da(r),x="clientHeight",S="clientWidth";if(E===zt(r)&&(E=br(r),Jt(E).position!=="static"&&s==="absolute"&&(x="scrollHeight",S="scrollWidth")),E=E,a===yt||(a===bt||a===It)&&i===Jn){y=kt;var C=f&&_.visualViewport?_.visualViewport.height:E[x];p-=C-n.height,p*=u?1:-1}if(a===bt||(a===yt||a===kt)&&i===Jn){w=It;var k=f&&_.visualViewport?_.visualViewport.width:E[S];v-=k-n.width,v*=u?1:-1}}var D=Object.assign({position:s},l&&Ib),T=c===!0?Mb({x:v,y:p}):{x:v,y:p};if(v=T.x,p=T.y,u){var P;return Object.assign({},D,(P={},P[y]=b?"0":"",P[w]=g?"0":"",P.transform=(_.devicePixelRatio||1)<=1?"translate("+v+"px, "+p+"px)":"translate3d("+v+"px, "+p+"px, 0)",P))}return Object.assign({},D,(e={},e[y]=b?p+"px":"",e[w]=g?v+"px":"",e.transform="",e))}function Ab(t){var e=t.state,r=t.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,s=r.roundOffsets,u=s===void 0?!0:s,l={placement:qt(e.placement),variation:hn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Fu(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Fu(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Pb={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ab,data:{}},Ma={passive:!0};function Ob(t){var e=t.state,r=t.instance,n=t.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,s=o===void 0?!0:o,u=zt(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&l.forEach(function(c){c.addEventListener("scroll",r.update,Ma)}),s&&u.addEventListener("resize",r.update,Ma),function(){i&&l.forEach(function(c){c.removeEventListener("scroll",r.update,Ma)}),s&&u.removeEventListener("resize",r.update,Ma)}}var Lb={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ob,data:{}},Bb={left:"right",right:"left",bottom:"top",top:"bottom"};function Ha(t){return t.replace(/left|right|bottom|top/g,function(e){return Bb[e]})}var Rb={start:"end",end:"start"};function $u(t){return t.replace(/start|end/g,function(e){return Rb[e]})}function us(t){var e=zt(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ls(t){return fn(br(t)).left+us(t).scrollLeft}function Nb(t){var e=zt(t),r=br(t),n=e.visualViewport,a=r.clientWidth,i=r.clientHeight,o=0,s=0;return n&&(a=n.width,i=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:a,height:i,x:o+ls(t),y:s}}function zb(t){var e,r=br(t),n=us(t),a=(e=t.ownerDocument)==null?void 0:e.body,i=Ir(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Ir(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-n.scrollLeft+ls(t),u=-n.scrollTop;return Jt(a||r).direction==="rtl"&&(s+=Ir(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:u}}function cs(t){var e=Jt(t),r=e.overflow,n=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function gf(t){return["html","body","#document"].indexOf(Gt(t))>=0?t.ownerDocument.body:Dt(t)&&cs(t)?t:gf(Ci(t))}function zn(t,e){var r;e===void 0&&(e=[]);var n=gf(t),a=n===((r=t.ownerDocument)==null?void 0:r.body),i=zt(n),o=a?[i].concat(i.visualViewport||[],cs(n)?n:[]):n,s=e.concat(o);return a?s:s.concat(zn(Ci(o)))}function yo(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Fb(t){var e=fn(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Hu(t,e){return e===uf?yo(Nb(t)):ln(e)?Fb(e):yo(zb(br(t)))}function $b(t){var e=zn(Ci(t)),r=["absolute","fixed"].indexOf(Jt(t).position)>=0,n=r&&Dt(t)?da(t):t;return ln(n)?e.filter(function(a){return ln(a)&&hf(a,n)&&Gt(a)!=="body"}):[]}function Hb(t,e,r){var n=e==="clippingParents"?$b(t):[].concat(e),a=[].concat(n,[r]),i=a[0],o=a.reduce(function(s,u){var l=Hu(t,u);return s.top=Ir(l.top,s.top),s.right=Ja(l.right,s.right),s.bottom=Ja(l.bottom,s.bottom),s.left=Ir(l.left,s.left),s},Hu(t,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function mf(t){var e=t.reference,r=t.element,n=t.placement,a=n?qt(n):null,i=n?hn(n):null,o=e.x+e.width/2-r.width/2,s=e.y+e.height/2-r.height/2,u;switch(a){case yt:u={x:o,y:e.y-r.height};break;case kt:u={x:o,y:e.y+e.height};break;case It:u={x:e.x+e.width,y:s};break;case bt:u={x:e.x-r.width,y:s};break;default:u={x:e.x,y:e.y}}var l=a?ss(a):null;if(l!=null){var c=l==="y"?"height":"width";switch(i){case un:u[l]=u[l]-(e[c]/2-r[c]/2);break;case Jn:u[l]=u[l]+(e[c]/2-r[c]/2);break}}return u}function ea(t,e){e===void 0&&(e={});var r=e,n=r.placement,a=n===void 0?t.placement:n,i=r.boundary,o=i===void 0?ub:i,s=r.rootBoundary,u=s===void 0?uf:s,l=r.elementContext,c=l===void 0?Mn:l,f=r.altBoundary,d=f===void 0?!1:f,v=r.padding,h=v===void 0?0:v,p=vf(typeof h!="number"?h:pf(h,ha)),m=c===Mn?lb:Mn,g=t.rects.popper,b=t.elements[d?m:c],w=Hb(ln(b)?b:b.contextElement||br(t.elements.popper),o,u),y=fn(t.elements.reference),_=mf({reference:y,element:g,strategy:"absolute",placement:a}),E=yo(Object.assign({},g,_)),x=c===Mn?E:y,S={top:w.top-x.top+p.top,bottom:x.bottom-w.bottom+p.bottom,left:w.left-x.left+p.left,right:x.right-w.right+p.right},C=t.modifiersData.offset;if(c===Mn&&C){var k=C[a];Object.keys(S).forEach(function(D){var T=[It,kt].indexOf(D)>=0?1:-1,P=[yt,kt].indexOf(D)>=0?"y":"x";S[D]+=k[P]*T})}return S}function Vb(t,e){e===void 0&&(e={});var r=e,n=r.placement,a=r.boundary,i=r.rootBoundary,o=r.padding,s=r.flipVariations,u=r.allowedAutoPlacements,l=u===void 0?lf:u,c=hn(n),f=c?s?Nu:Nu.filter(function(h){return hn(h)===c}):ha,d=f.filter(function(h){return l.indexOf(h)>=0});d.length===0&&(d=f);var v=d.reduce(function(h,p){return h[p]=ea(t,{placement:p,boundary:a,rootBoundary:i,padding:o})[qt(p)],h},{});return Object.keys(v).sort(function(h,p){return v[h]-v[p]})}function qb(t){if(qt(t)===is)return[];var e=Ha(t);return[$u(t),e,$u(e)]}function Wb(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,s=o===void 0?!0:o,u=r.fallbackPlacements,l=r.padding,c=r.boundary,f=r.rootBoundary,d=r.altBoundary,v=r.flipVariations,h=v===void 0?!0:v,p=r.allowedAutoPlacements,m=e.options.placement,g=qt(m),b=g===m,w=u||(b||!h?[Ha(m)]:qb(m)),y=[m].concat(w).reduce(function($,V){return $.concat(qt(V)===is?Vb(e,{placement:V,boundary:c,rootBoundary:f,padding:l,flipVariations:h,allowedAutoPlacements:p}):V)},[]),_=e.rects.reference,E=e.rects.popper,x=new Map,S=!0,C=y[0],k=0;k<y.length;k++){var D=y[k],T=qt(D),P=hn(D)===un,I=[yt,kt].indexOf(T)>=0,B=I?"width":"height",L=ea(e,{placement:D,boundary:c,rootBoundary:f,altBoundary:d,padding:l}),N=I?P?It:bt:P?kt:yt;_[B]>E[B]&&(N=Ha(N));var H=Ha(N),W=[];if(i&&W.push(L[T]<=0),s&&W.push(L[N]<=0,L[H]<=0),W.every(function($){return $})){C=D,S=!1;break}x.set(D,W)}if(S)for(var F=h?3:1,A=function(V){var q=y.find(function(z){var U=x.get(z);if(U)return U.slice(0,V).every(function(Q){return Q})});if(q)return C=q,"break"},R=F;R>0;R--){var O=A(R);if(O==="break")break}e.placement!==C&&(e.modifiersData[n]._skip=!0,e.placement=C,e.reset=!0)}}var Gb={name:"flip",enabled:!0,phase:"main",fn:Wb,requiresIfExists:["offset"],data:{_skip:!1}};function Vu(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function qu(t){return[yt,It,kt,bt].some(function(e){return t[e]>=0})}function Kb(t){var e=t.state,r=t.name,n=e.rects.reference,a=e.rects.popper,i=e.modifiersData.preventOverflow,o=ea(e,{elementContext:"reference"}),s=ea(e,{altBoundary:!0}),u=Vu(o,n),l=Vu(s,a,i),c=qu(u),f=qu(l);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var Ub={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Kb};function Yb(t,e,r){var n=qt(t),a=[bt,yt].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[bt,It].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function Xb(t){var e=t.state,r=t.options,n=t.name,a=r.offset,i=a===void 0?[0,0]:a,o=lf.reduce(function(c,f){return c[f]=Yb(f,e.rects,i),c},{}),s=o[e.placement],u=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[n]=o}var jb={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xb};function Zb(t){var e=t.state,r=t.name;e.modifiersData[r]=mf({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Qb={name:"popperOffsets",enabled:!0,phase:"read",fn:Zb,data:{}};function Jb(t){return t==="x"?"y":"x"}function ew(t){var e=t.state,r=t.options,n=t.name,a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,s=o===void 0?!1:o,u=r.boundary,l=r.rootBoundary,c=r.altBoundary,f=r.padding,d=r.tether,v=d===void 0?!0:d,h=r.tetherOffset,p=h===void 0?0:h,m=ea(e,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),g=qt(e.placement),b=hn(e.placement),w=!b,y=ss(g),_=Jb(y),E=e.modifiersData.popperOffsets,x=e.rects.reference,S=e.rects.popper,C=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,k=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,T={x:0,y:0};if(!!E){if(i){var P,I=y==="y"?yt:bt,B=y==="y"?kt:It,L=y==="y"?"height":"width",N=E[y],H=N+m[I],W=N-m[B],F=v?-S[L]/2:0,A=b===un?x[L]:S[L],R=b===un?-S[L]:-x[L],O=e.elements.arrow,$=v&&O?os(O):{width:0,height:0},V=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:df(),q=V[I],z=V[B],U=Nn(0,x[L],$[L]),Q=w?x[L]/2-F-U-q-k.mainAxis:A-U-q-k.mainAxis,J=w?-x[L]/2+F+U+z+k.mainAxis:R+U+z+k.mainAxis,ie=e.elements.arrow&&da(e.elements.arrow),ve=ie?y==="y"?ie.clientTop||0:ie.clientLeft||0:0,xe=(P=D==null?void 0:D[y])!=null?P:0,le=N+Q-xe-ve,re=N+J-xe,ne=Nn(v?Ja(H,le):H,N,v?Ir(W,re):W);E[y]=ne,T[y]=ne-N}if(s){var Z,j=y==="x"?yt:bt,se=y==="x"?kt:It,he=E[_],ye=_==="y"?"height":"width",me=he+m[j],Y=he-m[se],M=[yt,bt].indexOf(g)!==-1,G=(Z=D==null?void 0:D[_])!=null?Z:0,te=M?me:he-x[ye]-S[ye]-G+k.altAxis,ee=M?he+x[ye]+S[ye]-G-k.altAxis:Y,X=v&&M?_b(te,he,ee):Nn(v?te:me,he,v?ee:Y);E[_]=X,T[_]=X-he}e.modifiersData[n]=T}}var tw={name:"preventOverflow",enabled:!0,phase:"main",fn:ew,requiresIfExists:["offset"]};function rw(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function nw(t){return t===zt(t)||!Dt(t)?us(t):rw(t)}function aw(t){var e=t.getBoundingClientRect(),r=cn(e.width)/t.offsetWidth||1,n=cn(e.height)/t.offsetHeight||1;return r!==1||n!==1}function iw(t,e,r){r===void 0&&(r=!1);var n=Dt(e),a=Dt(e)&&aw(e),i=br(e),o=fn(t,a),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((Gt(e)!=="body"||cs(i))&&(s=nw(e)),Dt(e)?(u=fn(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):i&&(u.x=ls(i))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function ow(t){var e=new Map,r=new Set,n=[];t.forEach(function(i){e.set(i.name,i)});function a(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(s){if(!r.has(s)){var u=e.get(s);u&&a(u)}}),n.push(i)}return t.forEach(function(i){r.has(i.name)||a(i)}),n}function sw(t){var e=ow(t);return bb.reduce(function(r,n){return r.concat(e.filter(function(a){return a.phase===n}))},[])}function uw(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function lw(t){var e=t.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Wu={placement:"bottom",modifiers:[],strategy:"absolute"};function Gu(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function cw(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,a=e.defaultOptions,i=a===void 0?Wu:a;return function(s,u,l){l===void 0&&(l=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wu,i),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},f=[],d=!1,v={state:c,setOptions:function(g){var b=typeof g=="function"?g(c.options):g;p(),c.options=Object.assign({},i,c.options,b),c.scrollParents={reference:ln(s)?zn(s):s.contextElement?zn(s.contextElement):[],popper:zn(u)};var w=sw(lw([].concat(n,c.options.modifiers)));return c.orderedModifiers=w.filter(function(y){return y.enabled}),h(),v.update()},forceUpdate:function(){if(!d){var g=c.elements,b=g.reference,w=g.popper;if(!!Gu(b,w)){c.rects={reference:iw(b,da(w),c.options.strategy==="fixed"),popper:os(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var _=c.orderedModifiers[y],E=_.fn,x=_.options,S=x===void 0?{}:x,C=_.name;typeof E=="function"&&(c=E({state:c,options:S,name:C,instance:v})||c)}}}},update:uw(function(){return new Promise(function(m){v.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!Gu(s,u))return v;v.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var g=m.name,b=m.options,w=b===void 0?{}:b,y=m.effect;if(typeof y=="function"){var _=y({state:c,name:g,instance:v,options:w}),E=function(){};f.push(_||E)}})}function p(){f.forEach(function(m){return m()}),f=[]}return v}}var fw=[Lb,Qb,Pb,ff,jb,Gb,tw,kb,Ub],hw=cw({defaultModifiers:fw}),dw="tippy-box",yf="tippy-content",vw="tippy-backdrop",bf="tippy-arrow",wf="tippy-svg-arrow",Tr={passive:!0,capture:!0},xf=function(){return document.body};function Ui(t,e,r){if(Array.isArray(t)){var n=t[e];return n==null?Array.isArray(r)?r[e]:r:n}return t}function fs(t,e){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(e+"]")>-1}function Ef(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Ku(t,e){if(e===0)return t;var r;return function(n){clearTimeout(r),r=setTimeout(function(){t(n)},e)}}function pw(t){return t.split(/\s+/).filter(Boolean)}function jr(t){return[].concat(t)}function Uu(t,e){t.indexOf(e)===-1&&t.push(e)}function gw(t){return t.filter(function(e,r){return t.indexOf(e)===r})}function mw(t){return t.split("-")[0]}function ei(t){return[].slice.call(t)}function Yu(t){return Object.keys(t).reduce(function(e,r){return t[r]!==void 0&&(e[r]=t[r]),e},{})}function Fn(){return document.createElement("div")}function _i(t){return["Element","Fragment"].some(function(e){return fs(t,e)})}function yw(t){return fs(t,"NodeList")}function bw(t){return fs(t,"MouseEvent")}function ww(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function xw(t){return _i(t)?[t]:yw(t)?ei(t):Array.isArray(t)?t:ei(document.querySelectorAll(t))}function Yi(t,e){t.forEach(function(r){r&&(r.style.transitionDuration=e+"ms")})}function Xu(t,e){t.forEach(function(r){r&&r.setAttribute("data-state",e)})}function Ew(t){var e,r=jr(t),n=r[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function Cw(t,e){var r=e.clientX,n=e.clientY;return t.every(function(a){var i=a.popperRect,o=a.popperState,s=a.props,u=s.interactiveBorder,l=mw(o.placement),c=o.modifiersData.offset;if(!c)return!0;var f=l==="bottom"?c.top.y:0,d=l==="top"?c.bottom.y:0,v=l==="right"?c.left.x:0,h=l==="left"?c.right.x:0,p=i.top-n+f>u,m=n-i.bottom-d>u,g=i.left-r+v>u,b=r-i.right-h>u;return p||m||g||b})}function Xi(t,e,r){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(a){t[n](a,r)})}function ju(t,e){for(var r=e;r;){var n;if(t.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var $t={isTouch:!1},Zu=0;function _w(){$t.isTouch||($t.isTouch=!0,window.performance&&document.addEventListener("mousemove",Cf))}function Cf(){var t=performance.now();t-Zu<20&&($t.isTouch=!1,document.removeEventListener("mousemove",Cf)),Zu=t}function Sw(){var t=document.activeElement;if(ww(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Tw(){document.addEventListener("touchstart",_w,Tr),window.addEventListener("blur",Sw)}var Dw=typeof window!="undefined"&&typeof document!="undefined",kw=Dw?!!window.msCrypto:!1,Iw={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Mw={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Rt=Object.assign({appendTo:xf,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Iw,Mw),Aw=Object.keys(Rt),Pw=function(e){var r=Object.keys(e);r.forEach(function(n){Rt[n]=e[n]})};function _f(t){var e=t.plugins||[],r=e.reduce(function(n,a){var i=a.name,o=a.defaultValue;if(i){var s;n[i]=t[i]!==void 0?t[i]:(s=Rt[i])!=null?s:o}return n},{});return Object.assign({},t,r)}function Ow(t,e){var r=e?Object.keys(_f(Object.assign({},Rt,{plugins:e}))):Aw,n=r.reduce(function(a,i){var o=(t.getAttribute("data-tippy-"+i)||"").trim();if(!o)return a;if(i==="content")a[i]=o;else try{a[i]=JSON.parse(o)}catch{a[i]=o}return a},{});return n}function Qu(t,e){var r=Object.assign({},e,{content:Ef(e.content,[t])},e.ignoreAttributes?{}:Ow(t,e.plugins));return r.aria=Object.assign({},Rt.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?e.interactive:r.aria.expanded,content:r.aria.content==="auto"?e.interactive?null:"describedby":r.aria.content},r}var Lw=function(){return"innerHTML"};function bo(t,e){t[Lw()]=e}function Ju(t){var e=Fn();return t===!0?e.className=bf:(e.className=wf,_i(t)?e.appendChild(t):bo(e,t)),e}function el(t,e){_i(e.content)?(bo(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?bo(t,e.content):t.textContent=e.content)}function wo(t){var e=t.firstElementChild,r=ei(e.children);return{box:e,content:r.find(function(n){return n.classList.contains(yf)}),arrow:r.find(function(n){return n.classList.contains(bf)||n.classList.contains(wf)}),backdrop:r.find(function(n){return n.classList.contains(vw)})}}function Sf(t){var e=Fn(),r=Fn();r.className=dw,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=Fn();n.className=yf,n.setAttribute("data-state","hidden"),el(n,t.props),e.appendChild(r),r.appendChild(n),a(t.props,t.props);function a(i,o){var s=wo(e),u=s.box,l=s.content,c=s.arrow;o.theme?u.setAttribute("data-theme",o.theme):u.removeAttribute("data-theme"),typeof o.animation=="string"?u.setAttribute("data-animation",o.animation):u.removeAttribute("data-animation"),o.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?u.setAttribute("role",o.role):u.removeAttribute("role"),(i.content!==o.content||i.allowHTML!==o.allowHTML)&&el(l,t.props),o.arrow?c?i.arrow!==o.arrow&&(u.removeChild(c),u.appendChild(Ju(o.arrow))):u.appendChild(Ju(o.arrow)):c&&u.removeChild(c)}return{popper:e,onUpdate:a}}Sf.$$tippy=!0;var Bw=1,Aa=[],ji=[];function Rw(t,e){var r=Qu(t,Object.assign({},Rt,_f(Yu(e)))),n,a,i,o=!1,s=!1,u=!1,l=!1,c,f,d,v=[],h=Ku(le,r.interactiveDebounce),p,m=Bw++,g=null,b=gw(r.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:m,reference:t,popper:Fn(),popperInstance:g,props:r,state:w,plugins:b,clearDelayTimeouts:te,setProps:ee,setContent:X,show:ge,hide:ae,hideWithInteractivity:ce,enable:M,disable:G,unmount:_e,destroy:Se};if(!r.render)return y;var _=r.render(y),E=_.popper,x=_.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+y.id,y.popper=E,t._tippy=y,E._tippy=y;var S=b.map(function(K){return K.fn(y)}),C=t.hasAttribute("aria-expanded");return ie(),F(),N(),H("onCreate",[y]),r.showOnCreate&&me(),E.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),E.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&I().addEventListener("mousemove",h)}),y;function k(){var K=y.props.touch;return Array.isArray(K)?K:[K,0]}function D(){return k()[0]==="hold"}function T(){var K;return!!((K=y.props.render)!=null&&K.$$tippy)}function P(){return p||t}function I(){var K=P().parentNode;return K?Ew(K):document}function B(){return wo(E)}function L(K){return y.state.isMounted&&!y.state.isVisible||$t.isTouch||c&&c.type==="focus"?0:Ui(y.props.delay,K?0:1,Rt.delay)}function N(K){K===void 0&&(K=!1),E.style.pointerEvents=y.props.interactive&&!K?"":"none",E.style.zIndex=""+y.props.zIndex}function H(K,oe,ue){if(ue===void 0&&(ue=!0),S.forEach(function(be){be[K]&&be[K].apply(be,oe)}),ue){var de;(de=y.props)[K].apply(de,oe)}}function W(){var K=y.props.aria;if(!!K.content){var oe="aria-"+K.content,ue=E.id,de=jr(y.props.triggerTarget||t);de.forEach(function(be){var Te=be.getAttribute(oe);if(y.state.isVisible)be.setAttribute(oe,Te?Te+" "+ue:ue);else{var ze=Te&&Te.replace(ue,"").trim();ze?be.setAttribute(oe,ze):be.removeAttribute(oe)}})}}function F(){if(!(C||!y.props.aria.expanded)){var K=jr(y.props.triggerTarget||t);K.forEach(function(oe){y.props.interactive?oe.setAttribute("aria-expanded",y.state.isVisible&&oe===P()?"true":"false"):oe.removeAttribute("aria-expanded")})}}function A(){I().removeEventListener("mousemove",h),Aa=Aa.filter(function(K){return K!==h})}function R(K){if(!($t.isTouch&&(u||K.type==="mousedown"))){var oe=K.composedPath&&K.composedPath()[0]||K.target;if(!(y.props.interactive&&ju(E,oe))){if(jr(y.props.triggerTarget||t).some(function(ue){return ju(ue,oe)})){if($t.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else H("onClickOutside",[y,K]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),s=!0,setTimeout(function(){s=!1}),y.state.isMounted||q())}}}function O(){u=!0}function $(){u=!1}function V(){var K=I();K.addEventListener("mousedown",R,!0),K.addEventListener("touchend",R,Tr),K.addEventListener("touchstart",$,Tr),K.addEventListener("touchmove",O,Tr)}function q(){var K=I();K.removeEventListener("mousedown",R,!0),K.removeEventListener("touchend",R,Tr),K.removeEventListener("touchstart",$,Tr),K.removeEventListener("touchmove",O,Tr)}function z(K,oe){Q(K,function(){!y.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&oe()})}function U(K,oe){Q(K,oe)}function Q(K,oe){var ue=B().box;function de(be){be.target===ue&&(Xi(ue,"remove",de),oe())}if(K===0)return oe();Xi(ue,"remove",f),Xi(ue,"add",de),f=de}function J(K,oe,ue){ue===void 0&&(ue=!1);var de=jr(y.props.triggerTarget||t);de.forEach(function(be){be.addEventListener(K,oe,ue),v.push({node:be,eventType:K,handler:oe,options:ue})})}function ie(){D()&&(J("touchstart",xe,{passive:!0}),J("touchend",re,{passive:!0})),pw(y.props.trigger).forEach(function(K){if(K!=="manual")switch(J(K,xe),K){case"mouseenter":J("mouseleave",re);break;case"focus":J(kw?"focusout":"blur",ne);break;case"focusin":J("focusout",ne);break}})}function ve(){v.forEach(function(K){var oe=K.node,ue=K.eventType,de=K.handler,be=K.options;oe.removeEventListener(ue,de,be)}),v=[]}function xe(K){var oe,ue=!1;if(!(!y.state.isEnabled||Z(K)||s)){var de=((oe=c)==null?void 0:oe.type)==="focus";c=K,p=K.currentTarget,F(),!y.state.isVisible&&bw(K)&&Aa.forEach(function(be){return be(K)}),K.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||o)&&y.props.hideOnClick!==!1&&y.state.isVisible?ue=!0:me(K),K.type==="click"&&(o=!ue),ue&&!de&&Y(K)}}function le(K){var oe=K.target,ue=P().contains(oe)||E.contains(oe);if(!(K.type==="mousemove"&&ue)){var de=ye().concat(E).map(function(be){var Te,ze=be._tippy,Ze=(Te=ze.popperInstance)==null?void 0:Te.state;return Ze?{popperRect:be.getBoundingClientRect(),popperState:Ze,props:r}:null}).filter(Boolean);Cw(de,K)&&(A(),Y(K))}}function re(K){var oe=Z(K)||y.props.trigger.indexOf("click")>=0&&o;if(!oe){if(y.props.interactive){y.hideWithInteractivity(K);return}Y(K)}}function ne(K){y.props.trigger.indexOf("focusin")<0&&K.target!==P()||y.props.interactive&&K.relatedTarget&&E.contains(K.relatedTarget)||Y(K)}function Z(K){return $t.isTouch?D()!==K.type.indexOf("touch")>=0:!1}function j(){se();var K=y.props,oe=K.popperOptions,ue=K.placement,de=K.offset,be=K.getReferenceClientRect,Te=K.moveTransition,ze=T()?wo(E).arrow:null,Ze=be?{getBoundingClientRect:be,contextElement:be.contextElement||P()}:t,We={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(vt){var ft=vt.state;if(T()){var nr=B(),Mt=nr.box;["placement","reference-hidden","escaped"].forEach(function(At){At==="placement"?Mt.setAttribute("data-placement",ft.placement):ft.attributes.popper["data-popper-"+At]?Mt.setAttribute("data-"+At,""):Mt.removeAttribute("data-"+At)}),ft.attributes.popper={}}}},Ge=[{name:"offset",options:{offset:de}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Te}},We];T()&&ze&&Ge.push({name:"arrow",options:{element:ze,padding:3}}),Ge.push.apply(Ge,(oe==null?void 0:oe.modifiers)||[]),y.popperInstance=hw(Ze,E,Object.assign({},oe,{placement:ue,onFirstUpdate:d,modifiers:Ge}))}function se(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function he(){var K=y.props.appendTo,oe,ue=P();y.props.interactive&&K===xf||K==="parent"?oe=ue.parentNode:oe=Ef(K,[ue]),oe.contains(E)||oe.appendChild(E),y.state.isMounted=!0,j()}function ye(){return ei(E.querySelectorAll("[data-tippy-root]"))}function me(K){y.clearDelayTimeouts(),K&&H("onTrigger",[y,K]),V();var oe=L(!0),ue=k(),de=ue[0],be=ue[1];$t.isTouch&&de==="hold"&&be&&(oe=be),oe?n=setTimeout(function(){y.show()},oe):y.show()}function Y(K){if(y.clearDelayTimeouts(),H("onUntrigger",[y,K]),!y.state.isVisible){q();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(K.type)>=0&&o)){var oe=L(!1);oe?a=setTimeout(function(){y.state.isVisible&&y.hide()},oe):i=requestAnimationFrame(function(){y.hide()})}}function M(){y.state.isEnabled=!0}function G(){y.hide(),y.state.isEnabled=!1}function te(){clearTimeout(n),clearTimeout(a),cancelAnimationFrame(i)}function ee(K){if(!y.state.isDestroyed){H("onBeforeUpdate",[y,K]),ve();var oe=y.props,ue=Qu(t,Object.assign({},oe,Yu(K),{ignoreAttributes:!0}));y.props=ue,ie(),oe.interactiveDebounce!==ue.interactiveDebounce&&(A(),h=Ku(le,ue.interactiveDebounce)),oe.triggerTarget&&!ue.triggerTarget?jr(oe.triggerTarget).forEach(function(de){de.removeAttribute("aria-expanded")}):ue.triggerTarget&&t.removeAttribute("aria-expanded"),F(),N(),x&&x(oe,ue),y.popperInstance&&(j(),ye().forEach(function(de){requestAnimationFrame(de._tippy.popperInstance.forceUpdate)})),H("onAfterUpdate",[y,K])}}function X(K){y.setProps({content:K})}function ge(){var K=y.state.isVisible,oe=y.state.isDestroyed,ue=!y.state.isEnabled,de=$t.isTouch&&!y.props.touch,be=Ui(y.props.duration,0,Rt.duration);if(!(K||oe||ue||de)&&!P().hasAttribute("disabled")&&(H("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,T()&&(E.style.visibility="visible"),N(),V(),y.state.isMounted||(E.style.transition="none"),T()){var Te=B(),ze=Te.box,Ze=Te.content;Yi([ze,Ze],0)}d=function(){var Ge;if(!(!y.state.isVisible||l)){if(l=!0,E.offsetHeight,E.style.transition=y.props.moveTransition,T()&&y.props.animation){var Ye=B(),vt=Ye.box,ft=Ye.content;Yi([vt,ft],be),Xu([vt,ft],"visible")}W(),F(),Uu(ji,y),(Ge=y.popperInstance)==null||Ge.forceUpdate(),H("onMount",[y]),y.props.animation&&T()&&U(be,function(){y.state.isShown=!0,H("onShown",[y])})}},he()}}function ae(){var K=!y.state.isVisible,oe=y.state.isDestroyed,ue=!y.state.isEnabled,de=Ui(y.props.duration,1,Rt.duration);if(!(K||oe||ue)&&(H("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,l=!1,o=!1,T()&&(E.style.visibility="hidden"),A(),q(),N(!0),T()){var be=B(),Te=be.box,ze=be.content;y.props.animation&&(Yi([Te,ze],de),Xu([Te,ze],"hidden"))}W(),F(),y.props.animation?T()&&z(de,y.unmount):y.unmount()}}function ce(K){I().addEventListener("mousemove",h),Uu(Aa,h),h(K)}function _e(){y.state.isVisible&&y.hide(),!!y.state.isMounted&&(se(),ye().forEach(function(K){K._tippy.unmount()}),E.parentNode&&E.parentNode.removeChild(E),ji=ji.filter(function(K){return K!==y}),y.state.isMounted=!1,H("onHidden",[y]))}function Se(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),ve(),delete t._tippy,y.state.isDestroyed=!0,H("onDestroy",[y]))}}function Si(t,e){e===void 0&&(e={});var r=Rt.plugins.concat(e.plugins||[]);Tw();var n=Object.assign({},e,{plugins:r}),a=xw(t),i=a.reduce(function(o,s){var u=s&&Rw(s,n);return u&&o.push(u),o},[]);return _i(t)?i[0]:i}Si.defaultProps=Rt;Si.setDefaultProps=Pw;Si.currentInput=$t;Object.assign({},ff,{effect:function(e){var r=e.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});Si.setDefaultProps({render:Sf});var Tf={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={621:(i,o,s)=>{function u(F,A){(A==null||A>F.length)&&(A=F.length);for(var R=0,O=new Array(A);R<A;R++)O[R]=F[R];return O}function l(F){for(var A="",R=0;R<F.length;R++)A+=F[R],R!==F.length-1&&(A+=" ");return A}function c(F,A,R){R?F.setAttribute(A,""):F.removeAttribute(A)}function f(F,A,R){customElements.get(F)===void 0&&customElements.define(F,A,{extends:R})}s.r(o),s.d(o,{contextMenus:()=>W});var d="cy-context-menus-divider",v={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function h(F){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(F)}function p(F,A){var R;if(typeof Symbol=="undefined"||F[Symbol.iterator]==null){if(Array.isArray(F)||(R=function(U,Q){if(U){if(typeof U=="string")return m(U,Q);var J=Object.prototype.toString.call(U).slice(8,-1);return J==="Object"&&U.constructor&&(J=U.constructor.name),J==="Map"||J==="Set"?Array.from(U):J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J)?m(U,Q):void 0}}(F))||A&&F&&typeof F.length=="number"){R&&(F=R);var O=0,$=function(){};return{s:$,n:function(){return O>=F.length?{done:!0}:{done:!1,value:F[O++]}},e:function(U){throw U},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V,q=!0,z=!1;return{s:function(){R=F[Symbol.iterator]()},n:function(){var U=R.next();return q=U.done,U},e:function(U){z=!0,V=U},f:function(){try{q||R.return==null||R.return()}finally{if(z)throw V}}}}function m(F,A){(A==null||A>F.length)&&(A=F.length);for(var R=0,O=new Array(A);R<A;R++)O[R]=F[R];return O}function g(F,A){if(!(F instanceof A))throw new TypeError("Cannot call a class as a function")}function b(F,A){for(var R=0;R<A.length;R++){var O=A[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(F,O.key,O)}}function w(F,A,R){return A&&b(F.prototype,A),R&&b(F,R),F}function y(F,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(A&&A.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),A&&T(F,A)}function _(F){var A=D();return function(){var R,O=P(F);if(A){var $=P(this).constructor;R=Reflect.construct(O,arguments,$)}else R=O.apply(this,arguments);return E(this,R)}}function E(F,A){return!A||h(A)!=="object"&&typeof A!="function"?x(F):A}function x(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function S(F,A,R){return(S=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(O,$,V){var q=function(U,Q){for(;!Object.prototype.hasOwnProperty.call(U,Q)&&(U=P(U))!==null;);return U}(O,$);if(q){var z=Object.getOwnPropertyDescriptor(q,$);return z.get?z.get.call(V):z.value}})(F,A,R||F)}function C(F){var A=typeof Map=="function"?new Map:void 0;return(C=function(R){if(R===null||(O=R,Function.toString.call(O).indexOf("[native code]")===-1))return R;var O;if(typeof R!="function")throw new TypeError("Super expression must either be null or a function");if(A!==void 0){if(A.has(R))return A.get(R);A.set(R,$)}function $(){return k(R,arguments,P(this).constructor)}return $.prototype=Object.create(R.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),T($,R)})(F)}function k(F,A,R){return(k=D()?Reflect.construct:function(O,$,V){var q=[null];q.push.apply(q,$);var z=new(Function.bind.apply(O,q));return V&&T(z,V.prototype),z}).apply(null,arguments)}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function T(F,A){return(T=Object.setPrototypeOf||function(R,O){return R.__proto__=O,R})(F,A)}function P(F){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(F)}function I(F){F.preventDefault(),F.stopPropagation()}var B=function(F){y(R,F);var A=_(R);function R(O,$,V){var q,z,U,Q,J,ie,ve,xe,le,re;g(this,R),S((z=x(re=A.call(this)),P(R.prototype)),"setAttribute",z).call(z,"id",O.id);var ne=re._getMenuItemClassStr(V.cxtMenuItemClasses,O.hasTrailingDivider);if(S((U=x(re),P(R.prototype)),"setAttribute",U).call(U,"class",ne),S((Q=x(re),P(R.prototype)),"setAttribute",Q).call(Q,"title",(q=O.tooltipText)!==null&&q!==void 0?q:""),O.disabled&&c(x(re),"disabled",!0),O.image){var Z=document.createElement("img");Z.src=O.image.src,Z.width=O.image.width,Z.height=O.image.height,Z.style.position="absolute",Z.style.top=O.image.y+"px",Z.style.left=O.image.x+"px",S((J=x(re),P(R.prototype)),"appendChild",J).call(J,Z)}if(re.innerHTML+=O.content,re.onMenuItemClick=$,re.data={},re.clickFns=[],re.selector=O.selector,re.hasTrailingDivider=O.hasTrailingDivider,re.show=O.show===void 0||O.show,re.coreAsWell=O.coreAsWell||!1,re.scratchpad=V,O.onClickFunction===void 0&&O.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return re.onClickFunction=O.onClickFunction,O.submenu instanceof Array&&re._createSubmenu(O.submenu),S((ie=x(re),P(R.prototype)),"addEventListener",ie).call(ie,"mousedown",I),S((ve=x(re),P(R.prototype)),"addEventListener",ve).call(ve,"mouseup",I),S((xe=x(re),P(R.prototype)),"addEventListener",xe).call(xe,"touchstart",I),S((le=x(re),P(R.prototype)),"addEventListener",le).call(le,"touchend",I),re}return w(R,[{key:"bindOnClickFunction",value:function(O){this.clickFns.push(O),S(P(R.prototype),"addEventListener",this).call(this,"click",O)}},{key:"unbindOnClickFunctions",value:function(){var O,$=p(this.clickFns);try{for($.s();!(O=$.n()).done;){var V=O.value;S(P(R.prototype),"removeEventListener",this).call(this,"click",V)}}catch(q){$.e(q)}finally{$.f()}this.clickFns=[]}},{key:"enable",value:function(){c(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){c(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(O){this.hasTrailingDivider=O}},{key:"hasSubmenu",value:function(){return this.submenu instanceof L}},{key:"appendSubmenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(O,$)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(O){var $=this.getBoundingClientRect(),V=function(J){J.style.opacity="0",J.style.display="block";var ie=J.getBoundingClientRect();return J.style.opacity="1",J.style.display="none",ie}(this.submenu),q=$.right+V.width>window.innerWidth,z=$.top+V.height>window.innerHeight;q||z?q&&!z?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):q&&z?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var U=Array.from(this.submenu.children).filter(function(J){if(J instanceof R)return J.isVisible()}),Q=U.length;U.forEach(function(J,ie){J instanceof R&&(ie<Q-1&&J.getHasTrailingDivider()?J.classList.add(d):J.getHasTrailingDivider()&&J.classList.remove(d))})}},{key:"_onMouseLeave",value:function(O){var $,V,q,z,U;$={x:O.clientX,y:O.clientY},V=this.submenu,z=$.y,(q=$.x)>=(U=V.getBoundingClientRect()).left&&q<=U.right&&z>=U.top&&z<=U.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new L(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var $,V=p(O);try{for(V.s();!($=V.n()).done;){var q=$.value,z=new R(q,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(z)}}catch(U){V.e(U)}finally{V.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(O,$){return $?O+" "+d:O}}],[{key:"define",value:function(){f("ctx-menu-item",R,"button")}}]),R}(C(HTMLButtonElement)),L=function(F){y(R,F);var A=_(R);function R(O,$){var V,q;return g(this,R),S((V=x(q=A.call(this)),P(R.prototype)),"setAttribute",V).call(V,"class",$.cxtMenuClasses),q.style.position="absolute",q.onMenuItemClick=O,q.scratchpad=$,q}return w(R,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var O,$=p(this.children);try{for($.s();!(O=$.n()).done;){var V=O.value;V instanceof HTMLElement?V.style.display="none":console.warn("".concat(V," is not a HTMLElement"))}}catch(q){$.e(q)}finally{$.f()}}},{key:"hideSubmenus",value:function(){var O,$=p(this.children);try{for($.s();!(O=$.n()).done;){var V=O.value;V instanceof B&&V.submenu&&V.submenu.hide()}}catch(q){$.e(q)}finally{$.f()}}},{key:"appendMenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if($!==void 0){if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of the context menu"));this.insertBefore(O,$)}else this.appendChild(O);O.isClickable()&&this._performBindings(O)}},{key:"moveBefore",value:function(O,$){if(O.parentNode!==this)throw new Error("The item with id='".concat(O.id,"' is not a child of context menu"));if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of context menu"));this.removeChild(O),this.insertBefore(O,$)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var O=this.lastChild;O instanceof B?this._removeImmediateMenuItem(O):(console.warn("Found non menu item in the context menu: ",O),this.removeChild(O))}}},{key:"_removeImmediateMenuItem",value:function(O){if(!this._detachImmediateMenuItem(O))throw new Error("menu item(id=".concat(O.id,") is not in the context menu"));O.detachSubmenu(),O.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(O){if(O.parentNode===this){if(this.removeChild(O),this.children.length<=0){var $=this.parentNode;$ instanceof B&&$.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(O){var $=this._bindOnClick(O.onClickFunction);O.bindOnClickFunction($),O.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(O){var $=this;return function(){var V=$.scratchpad.currentCyEvent;O(V)}}}],[{key:"define",value:function(){f("menu-item-list",R,"div")}}]),R}(C(HTMLDivElement)),N=function(F){y(R,F);var A=_(R);function R(O,$){var V;return g(this,R),(V=A.call(this,O,$)).onMenuItemClick=function(q){I(q),V.hide(),O()},V}return w(R,[{key:"removeMenuItem",value:function(O){var $=O.parentElement;$ instanceof L&&this.contains($)&&$._removeImmediateMenuItem(O)}},{key:"appendMenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(O.id),S(P(R.prototype),"appendMenuItem",this).call(this,O,$)}},{key:"insertMenuItem",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=$.before,q=$.parent;if(this.ensureDoesntContain(O.id),V!==void 0){if(!this.contains(V))throw new Error("before(id=".concat(V.id,") is not in the context menu"));var z=V.parentNode;if(!(z instanceof L))throw new Error("Parent of before(id=".concat(V.id,") is not a submenu"));z.appendMenuItem(O,V)}else if(q!==void 0){if(!this.contains(q))throw new Error("parent(id=".concat(q.id,") is not a descendant of the context menu"));q.appendSubmenuItem(O)}else this.appendMenuItem(O)}},{key:"moveBefore",value:function(O,$){var V=O.parentElement;if(!this.contains(V))throw new Error("parent(id=".concat(V.id,") is not in the contex menu"));if(!this.contains($))throw new Error("before(id=".concat($.id,") is not in the context menu"));V.removeChild(O),this.insertMenuItem(O,{before:$})}},{key:"moveToSubmenu",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,q=O.parentElement;if(!(q instanceof L))throw new Error("current parent(id=".concat(q.id,") is not a submenu"));if(!this.contains(q))throw new Error("parent of the menu item(id=".concat(q.id,") is not in the context menu"));if($!==null){if(!this.contains($))throw new Error("parent(id=".concat($.id,") is not in the context menu"));q._detachImmediateMenuItem(O),$.appendSubmenuItem(O)}else V!==null&&(O.selector=V.selector,O.coreAsWell=V.coreAsWell),q._detachImmediateMenuItem(O),this.appendMenuItem(O)}},{key:"ensureDoesntContain",value:function(O){var $=document.getElementById(O);if($!==void 0&&this.contains($))throw new Error("There is already an element with id=".concat(O," in the context menu"))}}],[{key:"define",value:function(){f("ctx-menu",R,"div")}}]),R}(L);function H(F,A){(A==null||A>F.length)&&(A=F.length);for(var R=0,O=new Array(A);R<A;R++)O[R]=F[R];return O}function W(F){var A=this;A.scratch("cycontextmenus")||A.scratch("cycontextmenus",{});var R,O,$=function(ne){return A.scratch("cycontextmenus")[ne]},V=function(ne,Z){return A.scratch("cycontextmenus")[ne]=Z},q=$("options"),z=$("cxtMenu"),U=function(ne){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=J(ne);if(Z!==void 0){var se=ve(Z);z.insertMenuItem(j,{parent:se})}else z.insertMenuItem(j)},Q=function(ne){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,j=0;j<ne.length;j++)U(ne[j],Z)},J=function(ne){var Z=A.scratch("cycontextmenus");return new B(ne,z.onMenuItemClick,Z)},ie=function(){$("active")&&(z.removeAllMenuItems(),A.off("tapstart",$("eventCyTapStart")),A.off(q.evtType,$("onCxttap")),A.off("viewport",$("onViewport")),document.removeEventListener("mouseup",$("hideOnNonCyClick")),z.parentNode.removeChild(z),z=void 0,V("cxtMenu",void 0),V("active",!1),V("anyVisibleChild",!1),V("onCxttap",void 0),V("onViewport",void 0),V("hideOnNonCyClick",void 0))},ve=function(ne){var Z=document.getElementById(ne);if(Z instanceof B)return Z;throw new Error("The item with id=".concat(ne," is not a menu item"))};if(F!=="get"){B.define(),L.define(),N.define(),q=function(ne,Z){var j={};for(var se in ne)j[se]=ne[se];for(var he in Z)j[he]instanceof Array?j[he]=j[he].concat(Z[he]):j[he]=Z[he];return j}(v,F),V("options",q),$("active")&&ie(),V("active",!0),V("submenuIndicatorGen",function(ne){var Z=document.createElement("img");return Z.src=ne.src,Z.width=ne.width,Z.height=ne.height,Z.classList.add("cy-context-menus-submenu-indicator"),Z}.bind(void 0,q.submenuIndicator));var xe=l(q.contextMenuClasses);V("cxtMenuClasses",xe);var le=A.scratch("cycontextmenus");z=new N(function(){return V("cxtMenuPosition",void 0)},le),V("cxtMenu",z),A.container().appendChild(z),V("cxtMenuItemClasses",l(q.menuItemClasses));var re=q.menuItems;Q(re),O=function(ne){V("currentCyEvent",ne),function(Y){var M,G=A.container(),te=$("cxtMenuPosition"),ee=Y.position||Y.cyPosition;if(te!=ee){z.hideMenuItems(),V("anyVisibleChild",!1),V("cxtMenuPosition",ee);var X={top:(M=G.getBoundingClientRect()).top,left:M.left},ge=Y.renderedPosition||Y.cyRenderedPosition,ae=getComputedStyle(G)["border-width"],ce=parseInt(ae.replace("px",""))||0;ce>0&&(X.top+=ce,X.left+=ce);var _e=G.clientHeight,Se=G.clientWidth,K=_e/2,oe=Se/2;ge.y>K&&ge.x<=oe?(z.style.left=ge.x+"px",z.style.bottom=_e-ge.y+"px",z.style.right="auto",z.style.top="auto"):ge.y>K&&ge.x>oe?(z.style.right=Se-ge.x+"px",z.style.bottom=_e-ge.y+"px",z.style.left="auto",z.style.top="auto"):ge.y<=K&&ge.x<=oe?(z.style.left=ge.x+"px",z.style.top=ge.y+"px",z.style.right="auto",z.style.bottom="auto"):(z.style.right=Se-ge.x+"px",z.style.top=ge.y+"px",z.style.left="auto",z.style.bottom="auto")}}(ne);var Z,j=ne.target||ne.cyTarget,se=function(Y,M){var G;if(typeof Symbol=="undefined"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(G=function(ce,_e){if(ce){if(typeof ce=="string")return H(ce,_e);var Se=Object.prototype.toString.call(ce).slice(8,-1);return Se==="Object"&&ce.constructor&&(Se=ce.constructor.name),Se==="Map"||Se==="Set"?Array.from(ce):Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se)?H(ce,_e):void 0}}(Y))||M&&Y&&typeof Y.length=="number"){G&&(Y=G);var te=0,ee=function(){};return{s:ee,n:function(){return te>=Y.length?{done:!0}:{done:!1,value:Y[te++]}},e:function(ce){throw ce},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X,ge=!0,ae=!1;return{s:function(){G=Y[Symbol.iterator]()},n:function(){var ce=G.next();return ge=ce.done,ce},e:function(ce){ae=!0,X=ce},f:function(){try{ge||G.return==null||G.return()}finally{if(ae)throw X}}}}(z.children);try{for(se.s();!(Z=se.n()).done;){var he=Z.value;he instanceof B&&(j===A?he.coreAsWell:j.is(he.selector))&&he.show&&(z.display(),V("anyVisibleChild",!0),he.display())}}catch(Y){se.e(Y)}finally{se.f()}var ye=Array.from(z.children).filter(function(Y){if(Y instanceof B)return Y.isVisible()}),me=ye.length;ye.forEach(function(Y,M){Y instanceof B&&(M<me-1&&Y.getHasTrailingDivider()?Y.classList.add(d):Y.getHasTrailingDivider()&&Y.classList.remove(d))}),!$("anyVisibleChild")&&!function(Y){return Y.offsetWidth<=0&&Y.offsetHeight<=0||Y.style&&Y.style.display||getComputedStyle(Y).display}(z)&&z.hide()},A.on(q.evtType,O),V("onCxttap",O),function(){var ne=function(j){if(z.contains(j.originalEvent.target))return!1;z.hide(),V("cxtMenuPosition",void 0),V("currentCyEvent",void 0)};A.on("tapstart",ne),V("eventCyTapStart",ne);var Z=function(){z.hide()};A.on("viewport",Z),V("onViewport",Z)}(),R=function(ne){A.container().contains(ne.target)||z.contains(ne.target)||(z.hide(),V("cxtMenuPosition",void 0))},document.addEventListener("mouseup",R),V("hideOnNonCyClick",R),function(){var ne,Z=function(j,se){var he;if(typeof Symbol=="undefined"||j[Symbol.iterator]==null){if(Array.isArray(j)||(he=function(te,ee){if(te){if(typeof te=="string")return u(te,ee);var X=Object.prototype.toString.call(te).slice(8,-1);return X==="Object"&&te.constructor&&(X=te.constructor.name),X==="Map"||X==="Set"?Array.from(te):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?u(te,ee):void 0}}(j))||se&&j&&typeof j.length=="number"){he&&(j=he);var ye=0,me=function(){};return{s:me,n:function(){return ye>=j.length?{done:!0}:{done:!1,value:j[ye++]}},e:function(te){throw te},f:me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y,M=!0,G=!1;return{s:function(){he=j[Symbol.iterator]()},n:function(){var te=he.next();return M=te.done,te},e:function(te){G=!0,Y=te},f:function(){try{M||he.return==null||he.return()}finally{if(G)throw Y}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(Z.s();!(ne=Z.n()).done;)ne.value.addEventListener("contextmenu",function(j){return j.preventDefault()})}catch(j){Z.e(j)}finally{Z.f()}}()}return function(ne){return{isActive:function(){return $("active")},appendMenuItem:function(Z){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return U(Z,j),ne},appendMenuItems:function(Z){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return Q(Z,j),ne},removeMenuItem:function(Z){var j=ve(Z);return z.removeMenuItem(j),ne},setTrailingDivider:function(Z,j){var se=ve(Z);return se.setHasTrailingDivider(j),j?se.classList.add(d):se.classList.remove(d),ne},insertBeforeMenuItem:function(Z,j){var se=J(Z),he=ve(j);return z.insertMenuItem(se,{before:he}),ne},moveToSubmenu:function(Z){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,se=ve(Z);if(j===null)z.moveToSubmenu(se);else if(typeof j=="string"){var he=ve(j.toString());z.moveToSubmenu(se,he)}else j.coreAsWell!==void 0||j.selector!==void 0?z.moveToSubmenu(se,null,j):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return ne},moveBeforeOtherMenuItem:function(Z,j){var se=ve(Z),he=ve(j);return z.moveBefore(se,he),ne},disableMenuItem:function(Z){return ve(Z).disable(),ne},enableMenuItem:function(Z){return ve(Z).enable(),ne},hideMenuItem:function(Z){return ve(Z).hide(),ne},showMenuItem:function(Z){return ve(Z).display(),ne},destroy:function(){return ie(),ne}}}(this)}},579:(i,o,s)=>{var u=s(621).contextMenus,l=function(c){c&&c("core","contextMenus",u)};typeof cytoscape!="undefined"&&l(cytoscape),i.exports=l}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})})(Tf);var F1=Do(Tf.exports),Df={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(Ke,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:s})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=11)}([function(r,n,a){r.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var o=arguments.length,s=Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(l){Object.keys(l).forEach(function(c){return i[c]=l[c]})}),i}},function(r,n,a){var i=a(0),o=Object.freeze({source:null,target:null,length:80,coeff:2e-4,weight:1});function s(l){return i({},o,l)}function u(l){var c=l.source,f=l.target,d=l.length<0?o.length:l.length,v=f.pos.x-c.pos.x,h=f.pos.y-c.pos.y,p=Math.sqrt(v*v+h*h);p===0&&(v=(Math.random()-.5)/50,h=(Math.random()-.5)/50,p=Math.sqrt(v*v+h*h));var m=p-d,g=(!l.coeff||l.coeff<0?o.springCoeff:l.coeff)*m/p*l.weight;c.force.x+=g*v,c.force.y+=g*h,f.force.x-=g*v,f.force.y-=g*h}r.exports={makeSpring:s,applySpring:u}},function(r,n,a){var i=function(){function I(B,L){for(var N=0;N<L.length;N++){var H=L[N];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(B,H.key,H)}}return function(B,L,N){return L&&I(B.prototype,L),N&&I(B,N),B}}();function o(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")}function s(I,B){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:I}function u(I,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);I.prototype=Object.create(B&&B.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(I,B):I.__proto__=B)}var l=a(13),c=a(0),f=a(4),d=a(10),v=d.tick,h=a(7),p=h.makeQuadtree,m=a(3),g=m.makeBody,b=a(1),w=b.makeSpring,y=function(B){return typeof B=="function"},_=function(B){return B.isParent()},E=function(B){return!_(B)},x=function(B){return _(B.source())||_(B.target())},S=function(B){return!x(B)},C=function(B){return B.scratch("euler").body},k=function(B){return _(B)?B.descendants().filter(E):B},D=function(B){var L=B.scratch("euler");return L||(L={},B.scratch("euler",L)),L},T=function(B,L){return y(B)?B(L):B},P=function(I){u(B,I);function B(L){return o(this,B),s(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,c({},f,L)))}return i(B,[{key:"prerun",value:function(N){var H=N;H.quadtree=p();var W=H.bodies=[];H.nodes.filter(function(A){return E(A)}).forEach(function(A){var R=D(A),O=g({pos:{x:R.x,y:R.y},mass:T(H.mass,A),locked:R.locked});O._cyNode=A,R.body=O,O._scratch=R,W.push(O)});var F=H.springs=[];H.edges.filter(S).forEach(function(A){var R=w({source:C(A.source()),target:C(A.target()),length:T(H.springLength,A),coeff:T(H.springCoeff,A)});R._cyEdge=A;var O=D(A);R._scratch=O,O.spring=R,F.push(R)}),H.edges.filter(x).forEach(function(A){var R=k(A.source()),O=k(A.target());R=[R[0]],O=[O[0]],R.forEach(function($){O.forEach(function(V){F.push(w({source:C($),target:C(V),length:T(H.springLength,A),coeff:T(H.springCoeff,A)}))})})})}},{key:"tick",value:function(N){var H=v(N),W=H<=N.movementThreshold;return W}}]),B}(l);r.exports=P},function(r,n,a){var i=Object.freeze({pos:{x:0,y:0},prevPos:{x:0,y:0},force:{x:0,y:0},velocity:{x:0,y:0},mass:1}),o=function(f){return{x:f.x,y:f.y}},s=function(f,d){return f!=null?f:d},u=function(f,d){return o(s(f,d))};function l(c){var f={};return f.pos=u(c.pos,i.pos),f.prevPos=u(c.prevPos,f.pos),f.force=u(c.force,i.force),f.velocity=u(c.velocity,i.velocity),f.mass=c.mass!=null?c.mass:i.mass,f.locked=c.locked,f}r.exports={makeBody:l}},function(r,n,a){var i=Object.freeze({springLength:function(s){return 80},springCoeff:function(s){return 8e-4},mass:function(s){return 4},gravity:-1.2,pull:.001,theta:.666,dragCoeff:.02,movementThreshold:1,timeStep:20});r.exports=i},function(r,n,a){var i=.02;function o(s,u){var l=void 0;u!=null?l=u:s.dragCoeff!=null?l=s.dragCoeff:l=i,s.force.x-=l*s.velocity.x,s.force.y-=l*s.velocity.y}r.exports={applyDrag:o}},function(r,n,a){function i(o,s){var u=0,l=0,c=0,f=0,d,v=o.length;if(v===0)return 0;for(d=0;d<v;++d){var h=o[d],p=s/h.mass;if(!h.grabbed){h.locked?(h.velocity.x=0,h.velocity.y=0):(h.velocity.x+=p*h.force.x,h.velocity.y+=p*h.force.y);var m=h.velocity.x,g=h.velocity.y,b=Math.sqrt(m*m+g*g);b>1&&(h.velocity.x=m/b,h.velocity.y=g/b),u=s*h.velocity.x,c=s*h.velocity.y,h.pos.x+=u,h.pos.y+=c,l+=Math.abs(u),f+=Math.abs(c)}}return(l*l+f*f)/v}r.exports={integrate:i}},function(r,n,a){var i=a(9),o=a(8),s=function(v){v.x=0,v.y=0},u=function(v,h){var p=1e-8,m=Math.abs(v.x-h.x),g=Math.abs(v.y-h.y);return m<p&&g<p};function l(){var d=[],v=new o,h=[],p=0,m=g();function g(){var _=h[p];return _?(_.quad0=null,_.quad1=null,_.quad2=null,_.quad3=null,_.body=null,_.mass=_.massX=_.massY=0,_.left=_.right=_.top=_.bottom=0):(_=new i,h[p]=_),++p,_}function b(_,E,x,S){var C=d,k=void 0,D=void 0,T=void 0,P=void 0,I=0,B=0,L=1,N=0,H=1;C[0]=m,s(_.force);var W=-_.pos.x,F=-_.pos.y,A=Math.sqrt(W*W+F*F),R=_.mass*S/A;for(I+=R*W,B+=R*F;L;){var O=C[N],$=O.body;L-=1,N+=1;var V=$!==_;$&&V?(D=$.pos.x-_.pos.x,T=$.pos.y-_.pos.y,P=Math.sqrt(D*D+T*T),P===0&&(D=(Math.random()-.5)/50,T=(Math.random()-.5)/50,P=Math.sqrt(D*D+T*T)),k=E*$.mass*_.mass/(P*P*P),I+=k*D,B+=k*T):V&&(D=O.massX/O.mass-_.pos.x,T=O.massY/O.mass-_.pos.y,P=Math.sqrt(D*D+T*T),P===0&&(D=(Math.random()-.5)/50,T=(Math.random()-.5)/50,P=Math.sqrt(D*D+T*T)),(O.right-O.left)/P<x?(k=E*O.mass*_.mass/(P*P*P),I+=k*D,B+=k*T):(O.quad0&&(C[H]=O.quad0,L+=1,H+=1),O.quad1&&(C[H]=O.quad1,L+=1,H+=1),O.quad2&&(C[H]=O.quad2,L+=1,H+=1),O.quad3&&(C[H]=O.quad3,L+=1,H+=1)))}_.force.x+=I,_.force.y+=B}function w(_){if(_.length!==0){var E=Number.MAX_VALUE,x=Number.MAX_VALUE,S=Number.MIN_VALUE,C=Number.MIN_VALUE,k=void 0,D=_.length;for(k=D;k--;){var T=_[k].pos.x,P=_[k].pos.y;T<E&&(E=T),T>S&&(S=T),P<x&&(x=P),P>C&&(C=P)}var I=S-E,B=C-x;for(I>B?C=x+I:S=E+B,p=0,m=g(),m.left=E,m.right=S,m.top=x,m.bottom=C,k=D-1,k>=0&&(m.body=_[k]);k--;)y(_[k])}}function y(_){for(v.reset(),v.push(m,_);!v.isEmpty();){var E=v.pop(),x=E.node,S=E.body;if(x.body){var N=x.body;if(x.body=null,u(N.pos,S.pos)){var H=3;do{var W=Math.random(),F=(x.right-x.left)*W,A=(x.bottom-x.top)*W;N.pos.x=x.left+F,N.pos.y=x.top+A,H-=1}while(H>0&&u(N.pos,S.pos));if(H===0&&u(N.pos,S.pos))return}v.push(x,N),v.push(x,S)}else{var C=S.pos.x,k=S.pos.y;x.mass=x.mass+S.mass,x.massX=x.massX+S.mass*C,x.massY=x.massY+S.mass*k;var D=0,T=x.left,P=(x.right+T)/2,I=x.top,B=(x.bottom+I)/2;C>P&&(D=D+1,T=P,P=x.right),k>B&&(D=D+2,I=B,B=x.bottom);var L=c(x,D);L?v.push(L,S):(L=g(),L.left=T,L.top=I,L.right=P,L.bottom=B,L.body=S,f(x,D,L))}}}return{insertBodies:w,updateBodyForce:b}}function c(d,v){return v===0?d.quad0:v===1?d.quad1:v===2?d.quad2:v===3?d.quad3:null}function f(d,v,h){v===0?d.quad0=h:v===1?d.quad1=h:v===2?d.quad2=h:v===3&&(d.quad3=h)}r.exports={makeQuadtree:l}},function(r,n,a){r.exports=i;function i(){this.stack=[],this.popIdx=0}i.prototype={isEmpty:function(){return this.popIdx===0},push:function(u,l){var c=this.stack[this.popIdx];c?(c.node=u,c.body=l):this.stack[this.popIdx]=new o(u,l),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function o(s,u){this.node=s,this.body=u}},function(r,n,a){r.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(r,n,a){var i=a(6),o=i.integrate,s=a(5),u=s.applyDrag,l=a(1),c=l.applySpring;function f(d){var v=d.bodies,h=d.springs,p=d.quadtree,m=d.timeStep,g=d.gravity,b=d.theta,w=d.dragCoeff,y=d.pull;v.forEach(function(k){var D=k._scratch;!D||(k.locked=D.locked,k.grabbed=D.grabbed,k.pos.x=D.x,k.pos.y=D.y)}),p.insertBodies(v);for(var _=0;_<v.length;_++){var E=v[_];p.updateBodyForce(E,g,b,y),u(E,w)}for(var x=0;x<h.length;x++){var S=h[x];c(S)}var C=o(v,m);return v.forEach(function(k){var D=k._scratch;!D||(D.x=k.pos.x,D.y=k.pos.y)}),C}r.exports={tick:f}},function(r,n,a){var i=a(2),o=function(u){!u||u("layout","euler",i)};typeof cytoscape!="undefined"&&o(cytoscape),r.exports=o},function(r,n,a){r.exports=Object.freeze({animate:!0,refresh:10,maxIterations:1e3,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,infinite:!1})},function(r,n,a){var i=function(){function g(b,w){for(var y=0;y<w.length;y++){var _=w[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}();function o(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}var s=a(0),u=a(12),l=a(14),c=a(15),f=c.setInitialPositionState,d=c.refreshPositions,v=c.getNodePositionData,h=a(16),p=h.multitick,m=function(){function g(b){o(this,g);var w=this.options=s({},u,b),y=this.state=s({},w,{layout:this,nodes:w.eles.nodes(),edges:w.eles.edges(),tickIndex:0,firstUpdate:!0});y.animateEnd=w.animate&&w.animate==="end",y.animateContinuously=w.animate&&!y.animateEnd}return i(g,[{key:"run",value:function(){var w=this,y=this.state;if(y.tickIndex=0,y.firstUpdate=!0,y.startTime=Date.now(),y.running=!0,y.currentBoundingBox=l(y.boundingBox,y.cy),y.ready&&w.one("ready",y.ready),y.stop&&w.one("stop",y.stop),y.nodes.forEach(function(F){return f(F,y)}),w.prerun(y),y.animateContinuously){var _=function(A){if(!!y.ungrabifyWhileSimulating){var R=v(A,y).grabbable=A.grabbable();R&&A.ungrabify()}},E=function(A){if(!!y.ungrabifyWhileSimulating){var R=v(A,y).grabbable;R&&A.grabify()}},x=function(A){return v(A,y).grabbed=A.grabbed()},S=function(A){var R=A.target;x(R)},C=S,k=function(A){var R=A.target,O=v(R,y),$=R.position();O.x=$.x,O.y=$.y},D=function(A){A.on("grab",S),A.on("free",C),A.on("drag",k)},T=function(A){A.removeListener("grab",S),A.removeListener("free",C),A.removeListener("drag",k)},P=function(){y.fit&&y.animateContinuously&&y.cy.fit(y.padding)},I=function(){d(y.nodes,y),P(),requestAnimationFrame(B)},B=function(){p(y,I,L)},L=function(){d(y.nodes,y),P(),y.nodes.forEach(function(A){E(A),T(A)}),y.running=!1,w.emit("layoutstop")};w.emit("layoutstart"),y.nodes.forEach(function(F){_(F),D(F)}),B()}else{for(var N=!1,H=function(){},W=function(){return N=!0};!N;)p(y,H,W);y.eles.layoutPositions(this,y,function(F){var A=v(F,y);return{x:A.x,y:A.y}})}return w.postrun(y),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"tick",value:function(){}},{key:"stop",value:function(){return this.state.running=!1,this}},{key:"destroy",value:function(){return this}}]),g}();r.exports=m},function(r,n,a){r.exports=function(i,o){return i==null?i={x1:0,y1:0,w:o.width(),h:o.height()}:i={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,w:i.w,h:i.h},i.x2==null&&(i.x2=i.x1+i.w),i.w==null&&(i.w=i.x2-i.x1),i.y2==null&&(i.y2=i.y1+i.h),i.h==null&&(i.h=i.y2-i.y1),i}},function(r,n,a){var i=a(0),o=function(c,f){var d=c.position(),v=f.currentBoundingBox,h=c.scratch(f.name);h==null&&(h={},c.scratch(f.name,h)),i(h,f.randomize?{x:v.x1+Math.random()*v.w,y:v.y1+Math.random()*v.h}:{x:d.x,y:d.y}),h.locked=c.locked()},s=function(c,f){return c.scratch(f.name)},u=function(c,f){c.positions(function(d){var v=d.scratch(f.name);return{x:v.x,y:v.y}})};r.exports={setInitialPositionState:o,getNodePositionData:s,refreshPositions:u}},function(r,n,a){var i=function(){},o=function(l){var c=l,f=l.layout,d=f.tick(c);c.firstUpdate&&(c.animateContinuously&&c.layout.emit("layoutready"),c.firstUpdate=!1),c.tickIndex++;var v=Date.now()-c.startTime;return!c.infinite&&(d||c.tickIndex>=c.maxIterations||v>=c.maxSimulationTime)},s=function(l){for(var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i,d=!1,v=l,h=0;h<v.refresh&&(d=!v.running||o(v),!d);h++);d?f():c()};r.exports={tick:o,multitick:s}}])})})(Df);var $1=Do(Df.exports),kf={exports:{}};(function(t,e){(function(r){var n={config:{},container:{},controls:{},errors:{},items:{},utils:{}};n.utils.F=function(){},n.utils.extend=function(a,i){a.prototype=n.utils.createObject(i.prototype),a.prototype.contructor=a},n.utils.createObject=function(a){return typeof Object.create=="function"?Object.create(a):(n.utils.F.prototype=a,new n.utils.F)},n.utils.objectKeys=function(a){var i,o;if(typeof Object.keys=="function")return Object.keys(a);i=[];for(o in a)i.push(o);return i},n.utils.getHashValue=function(a){var i=location.hash.match(new RegExp(a+"=([^&]*)"));return i?i[1]:null},n.utils.getQueryStringParam=function(a){if(window.location.hash)return n.utils.getHashValue(a);if(!window.location.search)return null;var i=window.location.search.substr(1).split("&"),o={},s,u;for(u=0;u<i.length;u++)s=i[u].split("="),o[s[0]]=s[1];return o[a]||null},n.utils.copy=function(a,i){for(var o in i)a[o]=i[o];return a},n.utils.animFrame=function(a){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)})(function(){a()})},n.utils.indexOf=function(a,i){if(!(i instanceof Array))throw new Error("Haystack is not an Array");if(i.indexOf)return i.indexOf(a);for(var o=0;o<i.length;o++)if(i[o]===a)return o;return-1},typeof/./!="function"&&typeof Int8Array!="object"?n.utils.isFunction=function(a){return typeof a=="function"||!1}:n.utils.isFunction=function(a){return toString.call(a)==="[object Function]"},n.utils.fnBind=function(a,i,o){if(Function.prototype.bind!==void 0)return Function.prototype.bind.apply(a,[i].concat(o||[]));var s=function(){var u=(o||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof s))return a.apply(i,u);a.apply(this,u)};return s.prototype=a.prototype,s},n.utils.removeFromArray=function(a,i){var o=n.utils.indexOf(a,i);if(o===-1)throw new Error("Can't remove item from array. Item is not in the array");i.splice(o,1)},n.utils.now=function(){return typeof Date.now=="function"?Date.now():new Date().getTime()},n.utils.getUniqueId=function(){return(Math.random()*1e15).toString(36).replace(".","")},n.utils.filterXss=function(a,i){var o=a.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return i===!0?o:o.replace(/>/g,"&gt;").replace(/</g,"&lt;")},n.utils.stripTags=function(a){return r.trim(a.replace(/(<([^>]+)>)/ig,""))},n.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[n.utils.EventEmitter.ALL_EVENT]=[],this.on=function(a,i,o){if(!n.utils.isFunction(i))throw new Error("Tried to listen to event "+a+" with non-function callback "+i);this._mSubscriptions[a]||(this._mSubscriptions[a]=[]),this._mSubscriptions[a].push({fn:i,ctx:o})},this.emit=function(a){var i,o,s;s=Array.prototype.slice.call(arguments,1);var u=this._mSubscriptions[a];if(u)for(u=u.slice(),i=0;i<u.length;i++)o=u[i].ctx||{},u[i].fn.apply(o,s);s.unshift(a);var l=this._mSubscriptions[n.utils.EventEmitter.ALL_EVENT].slice();for(i=0;i<l.length;i++)o=l[i].ctx||{},l[i].fn.apply(o,s)},this.unbind=function(a,i,o){if(!this._mSubscriptions[a])throw new Error("No subscribtions to unsubscribe for event "+a);var s,u=!1;for(s=0;s<this._mSubscriptions[a].length;s++)(!i||this._mSubscriptions[a][s].fn===i)&&(!o||o===this._mSubscriptions[a][s].ctx)&&(this._mSubscriptions[a].splice(s,1),u=!0);if(u===!1)throw new Error("Nothing to unbind for "+a)},this.off=this.unbind,this.trigger=this.emit},n.utils.EventEmitter.ALL_EVENT="__all",n.utils.DragListener=function(a,i){n.utils.EventEmitter.call(this),this._eElement=r(a),this._oDocument=r(document),this._eBody=r(document.body),this._nButtonCode=i||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=n.utils.fnBind(this.onMouseMove,this),this._fUp=n.utils.fnBind(this.onMouseUp,this),this._fDown=n.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},n.utils.DragListener.timeout=null,n.utils.copy(n.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(a){if(a.preventDefault(),a.button==0||a.type==="touchstart"){var i=this._getCoordinates(a);this._nOriginalX=i.x,this._nOriginalY=i.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(n.utils.fnBind(this._startDrag,this),this._nDelay)}},onMouseMove:function(a){if(this._timeout!=null){a.preventDefault();var i=this._getCoordinates(a);this._nX=i.x-this._nOriginalX,this._nY=i.y-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,a)}},onMouseUp:function(a){this._timeout!=null&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",a,this._nOriginalX+this._nX)))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(a){return a=a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0]:a,{x:a.pageX,y:a.pageY}}}),n.LayoutManager=function(a,i){if(!r||typeof r.noConflict!="function"){var o="jQuery is missing as dependency for GoldenLayout. ";throw o+=`Please either expose $ on GoldenLayout's scope (e.g. window) or add "jquery" to `,o+="your paths when using RequireJS/AMD",new Error(o)}n.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":n.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=n.utils.fnBind(this._onResize,this),this._unloadFunction=n.utils.fnBind(this._onUnload,this),this._maximisedItem=null,this._maximisePlaceholder=r('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new n.utils.EventHub(this),this.config=this._createConfig(a),this.container=i,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=r('<div class="lm_drop_tab_placeholder"></div>'),this.isSubWindow===!0&&r("body").css("visibility","hidden"),this._typeToItem={column:n.utils.fnBind(n.items.RowOrColumn,this,[!0]),row:n.utils.fnBind(n.items.RowOrColumn,this,[!1]),stack:n.items.Stack,component:n.items.Component}},n.LayoutManager.__lm=n,n.LayoutManager.minifyConfig=function(a){return new n.utils.ConfigMinifier().minifyConfig(a)},n.LayoutManager.unminifyConfig=function(a){return new n.utils.ConfigMinifier().unminifyConfig(a)},n.utils.copy(n.LayoutManager.prototype,{registerComponent:function(a,i){if(typeof i!="function")throw new Error("Please register a constructor function");if(this._components[a]!==void 0)throw new Error("Component "+a+" is already registered");this._components[a]=i},toConfig:function(a){var i,o,s;if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(a&&!(a instanceof n.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for(i={settings:n.utils.copy({},this.config.settings),dimensions:n.utils.copy({},this.config.dimensions),labels:n.utils.copy({},this.config.labels)},i.content=[],o=function(u,l){var c,f;for(c in l.config)c!=="content"&&(u[c]=l.config[c]);if(l.contentItems.length)for(u.content=[],f=0;f<l.contentItems.length;f++)u.content[f]={},o(u.content[f],l.contentItems[f])},a?o(i,{contentItems:[a]}):o(i,this.root),this._$reconcilePopoutWindows(),i.openPopouts=[],s=0;s<this.openPopouts.length;s++)i.openPopouts.push(this.openPopouts[s].toConfig());return i.maximisedItemId=this._maximisedItem?"__glMaximised":null,i},getComponent:function(a){if(this._components[a]===void 0)throw new n.errors.ConfigurationError('Unknown component "'+a+'"');return this._components[a]},init:function(){if(this._subWindowsCreated===!1&&(this._createSubWindows(),this._subWindowsCreated=!0),document.readyState==="loading"||document.body===null){r(document).ready(n.utils.fnBind(this.init,this));return}if(this.isSubWindow===!0&&this._creationTimeoutPassed===!1){setTimeout(n.utils.fnBind(this.init,this),7),this._creationTimeoutPassed=!0;return}this.isSubWindow===!0&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new n.controls.DropTargetIndicator(this.container),this.transitionIndicator=new n.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),this.emit("initialised")},updateSize:function(a,i){arguments.length===2?(this.width=a,this.height=i):(this.width=this.container.width(),this.height=this.container.height()),this.isInitialised===!0&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){this.isInitialised!==!1&&(this._onUnload(),r(window).off("resize",this._resizeFunction),r(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach(function(a){a._dragListener.destroy(),a._element=null,a._itemConfig=null,a._dragListener=null}),this._dragSources=[])},createContentItem:function(a,i){var o,s;if(typeof a.type!="string")throw new n.errors.ConfigurationError("Missing parameter 'type'",a);if(a.type==="react-component"&&(a.type="component",a.componentName="lm-react-component"),!this._typeToItem[a.type])throw o="Unknown type '"+a.type+"'. Valid types are "+n.utils.objectKeys(this._typeToItem).join(","),new n.errors.ConfigurationError(o);return a.type==="component"&&!(i instanceof n.items.Stack)&&!!i&&!(this.isSubWindow===!0&&i instanceof n.items.Root)&&(a={type:"stack",width:a.width,height:a.height,content:[a]}),s=new this._typeToItem[a.type](this,a,i),s},createPopout:function(a,i,o,s){var u=a,l=a instanceof n.items.AbstractContentItem,c=this,f,d,v,h,p,m;if(o=o||null,l){for(u=this.toConfig(a).content,o=n.utils.getUniqueId(),h=a.parent,p=a;h.contentItems.length===1&&!h.isRoot;)h=h.parent,p=p.parent;h.addId(o),isNaN(s)&&(s=n.utils.indexOf(p,h.contentItems))}else u instanceof Array||(u=[u]);return!i&&l&&(f=window.screenX||window.screenLeft,d=window.screenY||window.screenTop,v=a.element.offset(),i={left:f+v.left,top:d+v.top,width:a.element.width(),height:a.element.height()}),!i&&!l&&(i={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),l&&a.remove(),m=new n.controls.BrowserPopout(u,i,o,s,this),m.on("initialised",function(){c.emit("windowOpened",m)}),m.on("closed",function(){c._$reconcilePopoutWindows()}),this.openPopouts.push(m),m},createDragSource:function(a,i){this.config.settings.constrainDragToContainer=!1;var o=new n.controls.DragSource(r(a),i,this);return this._dragSources.push(o),o},selectItem:function(a,i){if(this.config.settings.selectionEnabled!==!0)throw new Error("Please set selectionEnabled to true to use this feature");a!==this.selectedItem&&(this.selectedItem!==null&&this.selectedItem.deselect(),a&&i!==!0&&a.select(),this.selectedItem=a,this.emit("selectionChanged",a))},_$maximiseItem:function(a){this._maximisedItem!==null&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=a,this._maximisedItem.addId("__glMaximised"),a.element.addClass("lm_maximised"),a.element.after(this._maximisePlaceholder),this.root.element.prepend(a.element),a.element.width(this.container.width()),a.element.height(this.container.height()),a.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(a){a.element.removeClass("lm_maximised"),a.removeId("__glMaximised"),this._maximisePlaceholder.after(a.element),this._maximisePlaceholder.remove(),a.parent.callDownwards("setSize"),this._maximisedItem=null,a.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(a,i){var o,s,u=1/0,l=null;for(o=0;o<this._itemAreas.length;o++)s=this._itemAreas[o],a>s.x1&&a<s.x2&&i>s.y1&&i<s.y2&&u>s.surface&&(u=s.surface,l=s);return l},_$createRootItemAreas:function(){var a=50,i={y2:0,x2:0,y1:"y2",x1:"x2"};for(var o in i){var s=this.root._$getArea();s.side=o,i[o]?s[o]=s[i[o]]-a:s[o]=a,s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$calculateItemAreas:function(){var a,i,o=this._getAllContentItems();if(this._itemAreas=[],o.length===1){this._itemAreas.push(this.root._$getArea());return}for(this._$createRootItemAreas(),a=0;a<o.length;a++)if(!!o[a].isStack&&(i=o[a]._$getArea(),i!==null))if(i instanceof Array)this._itemAreas=this._itemAreas.concat(i);else{this._itemAreas.push(i);var s={};n.utils.copy(s,i),n.utils.copy(s,i.contentItem._contentAreaDimensions.header.highlightArea),s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$normalizeContentItem:function(a,i){if(!a)throw new Error("No content item defined");if(n.utils.isFunction(a)&&(a=a()),a instanceof n.items.AbstractContentItem)return a;if(r.isPlainObject(a)&&a.type){var o=this.createContentItem(a,i);return o.callDownwards("_$init"),o}else throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var a=[],i;for(i=0;i<this.openPopouts.length;i++)this.openPopouts[i].getWindow().closed===!1?a.push(this.openPopouts[i]):this.emit("windowClosed",this.openPopouts[i]);this.openPopouts.length!==a.length&&(this.emit("stateChanged"),this.openPopouts=a)},_getAllContentItems:function(){var a=[],i=function(o){if(a.push(o),o.contentItems instanceof Array)for(var s=0;s<o.contentItems.length;s++)i(o.contentItems[s])};return i(this.root),a},_bindEvents:function(){this._isFullPage&&r(window).resize(this._resizeFunction),r(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(n.utils.fnBind(this.updateSize,this),100)},_createConfig:function(a){var i=n.utils.getQueryStringParam("gl-window");i&&(this.isSubWindow=!0,a=localStorage.getItem(i),a=JSON.parse(a),a=new n.utils.ConfigMinifier().unminifyConfig(a),localStorage.removeItem(i)),a=r.extend(!0,{},n.config.defaultConfig,a);var o=function(s){for(var u in s)u!=="props"&&typeof s[u]=="object"?o(s[u]):u==="type"&&s[u]==="react-component"&&(s.type="component",s.componentName="lm-react-component")};return o(a),a.settings.hasHeaders===!1&&(a.dimensions.headerHeight=0),a},_adjustToWindowMode:function(){var a=r('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');a.click(n.utils.fnBind(function(){this.emit("popIn")},this)),document.title=n.utils.stripTags(this.config.content[0].title),r("head").append(r("body link, body style, template, .gl_keep")),this.container=r("body").html("").css("visibility","visible").append(a),document.body.offsetHeight,window.__glInstance=this},_createSubWindows:function(){var a,i;for(a=0;a<this.config.openPopouts.length;a++)i=this.config.openPopouts[a],this.createPopout(i.content,i.dimensions,i.parentId,i.indexInParent)},_setContainer:function(){var a=r(this.container||"body");if(a.length===0)throw new Error("GoldenLayout container not found");if(a.length>1)throw new Error("GoldenLayout more than one container element specified");a[0]===document.body&&(this._isFullPage=!0,r("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=a},_create:function(a){var i;if(!(a.content instanceof Array))throw a.content===void 0?i="Missing setting 'content' on top level of configuration":i="Configuration parameter 'content' must be an array",new n.errors.ConfigurationError(i,a);if(a.content.length>1)throw i="Top level content can't contain more then one element.",new n.errors.ConfigurationError(i,a);this.root=new n.items.Root(this,{content:a.content},this.container),this.root.callDownwards("_$init"),a.maximisedItemId==="__glMaximised"&&this.root.getItemsById(a.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(this.config.settings.closePopoutsOnUnload===!0)for(var a=0;a<this.openPopouts.length;a++)this.openPopouts[a].close()},_adjustColumnsResponsive:function(){if(!this._useResponsiveLayout()||this._updatingColumnsResponsive||!this.config.dimensions||!this.config.dimensions.minItemWidth||this.root.contentItems.length===0||!this.root.contentItems[0].isRow){this._firstLoad=!1;return}this._firstLoad=!1;var a=this.root.contentItems[0].contentItems.length;if(!(a<=1)){var i=this.config.dimensions.minItemWidth,o=a*i;if(!(o<=this.width)){this._updatingColumnsResponsive=!0;for(var s=Math.max(Math.floor(this.width/i),1),u=a-s,l=this.root.contentItems[0],c=this._findAllStackContainers()[0],f=0;f<u;f++){var d=l.contentItems[l.contentItems.length-1];this._addChildContentItemsToContainer(c,d)}this._updatingColumnsResponsive=!1}}},_useResponsiveLayout:function(){return this.config.settings&&(this.config.settings.responsiveMode=="always"||this.config.settings.responsiveMode=="onload"&&this._firstLoad)},_addChildContentItemsToContainer:function(a,i){i.type==="stack"?i.contentItems.forEach(function(o){a.addChild(o),i.removeChild(o,!0)}):i.contentItems.forEach(n.utils.fnBind(function(o){this._addChildContentItemsToContainer(a,o)},this))},_findAllStackContainers:function(){var a=[];return this._findAllStackContainersRecursive(a,this.root),a},_findAllStackContainersRecursive:function(a,i){i.contentItems.forEach(n.utils.fnBind(function(o){o.type=="stack"?a.push(o):o.isComponent||this._findAllStackContainersRecursive(a,o)},this))}}),function(){t.exports=n.LayoutManager}(),n.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},n.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0,responsiveMode:"onload",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in",tabDropdown:"additional tabs"}},n.container.ItemContainer=function(a,i,o){n.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=a.componentName,this.parent=i,this.layoutManager=o,this.isHidden=!1,this._config=a,this._element=r(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},n.utils.copy(n.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),(this.height!=0||this.width!=0)&&this.emit("shown")},setSize:function(a,i){for(var o=this.parent,s=this,u,l,c,f,d,v;!o.isColumn&&!o.isRow;)if(s=o,o=o.parent,o.isRoot)return!1;for(c=o.isColumn?"height":"width",f=c==="height"?i:a,u=this[c]*(1/(s.config[c]/100)),l=f/u*100,d=(s.config[c]-l)/(o.contentItems.length-1),v=0;v<o.contentItems.length;v++)o.contentItems[v]===s?o.contentItems[v].config[c]=l:o.contentItems[v].config[c]+=d;return o.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(a){this.setState(r.extend(!0,this.getState(),a))},setState:function(a){this._config.componentState=a,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(a){this.parent.setTitle(a)},_$setSize:function(a,i){if(a!==this.width||i!==this.height){this.width=a,this.height=i;var o=this._contentElement[0],s=o.offsetWidth-o.clientWidth,u=o.offsetHeight-o.clientHeight;this._contentElement.width(this.width-s).height(this.height-u),this.emit("resize")}}}),n.controls.BrowserPopout=function(a,i,o,s,u){n.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=a,this._dimensions=i,this._parentId=o,this._indexInParent=s,this._layoutManager=u,this._popoutWindow=null,this._id=null,this._createWindow()},n.utils.copy(n.controls.BrowserPopout.prototype,{toConfig:function(){if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch{}},popIn:function(){var a,i;this._indexInParent,this._parentId&&(a=r.extend(!0,{},this.getGlInstance().toConfig()).content[0],i=this._layoutManager.root.getItemsById(this._parentId)[0],i||(this._layoutManager.root.contentItems.length>0?i=this._layoutManager.root.contentItems[0]:i=this._layoutManager.root)),i.addChild(a,this._indexInParent),this.close()},_createWindow:function(){var a,i=this._createUrl(),o=Math.floor(Math.random()*1e6).toString(36),s=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(i,o,s),!this._popoutWindow)if(this._layoutManager.config.settings.blockedPopoutsThrowError===!0){var u=new Error("Popout blocked");throw u.type="popoutBlocked",u}else return;r(this._popoutWindow).on("load",n.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",n.utils.fnBind(this._onClose,this)),a=setInterval(n.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(a))},this),10)},_serializeWindowOptions:function(a){var i=[],o;for(o in a)i.push(o+"="+a[o]);return i.join(",")},_createUrl:function(){var a={content:this._config},i="gl-window-config-"+n.utils.getUniqueId(),o;a=new n.utils.ConfigMinifier().minifyConfig(a);try{localStorage.setItem(i,JSON.stringify(a))}catch(s){throw new Error("Error while writing to localStorage "+s.toString())}return o=document.location.href.split("?"),o.length===1?o[0]+"?gl-window="+i:document.location.href+"&gl-window="+i},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(n.utils.fnBind(this.emit,this,["closed"]),50)}}),n.controls.DragProxy=function(a,i,o,s,u,l){n.utils.EventEmitter.call(this),this._dragListener=o,this._layoutManager=s,this._contentItem=u,this._originalParent=l,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=r(n.controls.DragProxy._template),l&&l._side&&(this._sided=l._sided,this.element.addClass("lm_"+l._side),["right","bottom"].indexOf(l._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:a,top:i}),this.element.find(".lm_tab").attr("title",n.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(u.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),r(document.body).append(this.element);var c=this._layoutManager.container.offset();this._minX=c.left,this._minY=c.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height(),this._setDropPosition(a,i)},n.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',n.utils.copy(n.controls.DragProxy.prototype,{_onDrag:function(a,i,o){o=o.originalEvent&&o.originalEvent.touches?o.originalEvent.touches[0]:o;var s=o.pageX,u=o.pageY,l=s>this._minX&&s<this._maxX&&u>this._minY&&u<this._maxY;!l&&this._layoutManager.config.settings.constrainDragToContainer===!0||this._setDropPosition(s,u)},_setDropPosition:function(a,i){this.element.css({left:a,top:i}),this._area=this._layoutManager._$getArea(a,i),this._area!==null&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(a,i,this._area))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),this._area!==null?this._area.contentItem._$onDrop(this._contentItem,this._area):this._lastValidArea!==null?this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):this._originalParent?this._originalParent.addChild(this._contentItem):this._contentItem._$destroy(),this.element.remove(),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var a=this._layoutManager.config.dimensions,i=a.dragProxyWidth,o=a.dragProxyHeight;this.element.width(i),this.element.height(o),i-=this._sided?a.headerHeight:0,o-=this._sided?0:a.headerHeight,this.childElementContainer.width(i),this.childElementContainer.height(o),this._contentItem.element.width(i),this._contentItem.element.height(o),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),n.controls.DragSource=function(a,i,o){this._element=a,this._itemConfig=i,this._layoutManager=o,this._dragListener=null,this._createDragListener()},n.utils.copy(n.controls.DragSource.prototype,{_createDragListener:function(){this._dragListener!==null&&this._dragListener.destroy(),this._dragListener=new n.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(a,i){var o=this._itemConfig;n.utils.isFunction(o)&&(o=o());var s=this._layoutManager._$normalizeContentItem(r.extend(!0,{},o)),u=new n.controls.DragProxy(a,i,this._dragListener,this._layoutManager,s,null);this._layoutManager.transitionIndicator.transitionElements(this._element,u.element)}}),n.controls.DropTargetIndicator=function(){this.element=r(n.controls.DropTargetIndicator._template),r(document.body).append(this.element)},n.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',n.utils.copy(n.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(a,i,o,s){this.highlightArea({x1:a,y1:i,x2:o,y2:s})},highlightArea:function(a){this.element.css({left:a.x1,top:a.y1,width:a.x2-a.x1,height:a.y2-a.y1}).show()},hide:function(){this.element.hide()}}),n.controls.Header=function(a,i){n.utils.EventEmitter.call(this),this.layoutManager=a,this.element=r(n.controls.Header._template),this.layoutManager.config.settings.selectionEnabled===!0&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",n.utils.fnBind(this._onHeaderClick,this))),this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.parent=i,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=n.utils.fnBind(this._hideAdditionalTabsDropdown,this),r(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,this._createControls()},n.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>','<ul class="lm_tabdropdown_list"></ul>',"</div>"].join(""),n.utils.copy(n.controls.Header.prototype,{createTab:function(a,i){var o,s;for(s=0;s<this.tabs.length;s++)if(this.tabs[s].contentItem===a)return;if(o=new n.controls.Tab(this,a),this.tabs.length===0){this.tabs.push(o),this.tabsContainer.append(o.element);return}i===void 0&&(i=this.tabs.length),i>0?this.tabs[i-1].element.after(o.element):this.tabs[0].element.before(o.element),this.tabs.splice(i,0,o),this._updateTabSizes()},removeTab:function(a){for(var i=0;i<this.tabs.length;i++)if(this.tabs[i].contentItem===a){this.tabs[i]._$destroy(),this.tabs.splice(i,1);return}throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(a){var i,o,s,u;for(i=0;i<this.tabs.length;i++)s=this.tabs[i].contentItem===a,this.tabs[i].setActive(s),s===!0&&(this.activeContentItem=a,this.parent.config.activeItemIndex=i);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&this._lastVisibleTabIndex!==-1&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(u=this.tabs[this.parent.config.activeItemIndex],o=this.parent.config.activeItemIndex;o>0;o--)this.tabs[o]=this.tabs[o-1];this.tabs[0]=u,this.parent.config.activeItemIndex=0}this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},position:function(a){var i=this.parent._header.show;return i&&!this.parent._side&&(i="top"),a!==void 0&&this.parent._header.show!=a&&(this.parent._header.show=a,this.parent._setupHeaderPosition()),i},_$setClosable:function(a){return this.closeButton&&this._isClosable()?(this.closeButton.element[a?"show":"hide"](),!0):!1},_$destroy:function(){this.emit("destroy",this);for(var a=0;a<this.tabs.length;a++)this.tabs[a]._$destroy();r(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(a){if(a in this.parent._header)return this.parent._header[a]},_createControls:function(){var a,i,o,s,u,l,c,f,d;d=n.utils.fnBind(this._showAdditionalTabsDropdown,this),f=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new n.controls.HeaderButton(this,f,"lm_tabdropdown",d),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(i=n.utils.fnBind(this._onPopoutClick,this),o=this._getHeaderSetting("popout"),new n.controls.HeaderButton(this,o,"lm_popout",i)),this._getHeaderSetting("maximise")&&(l=n.utils.fnBind(this.parent.toggleMaximise,this.parent),s=this._getHeaderSetting("maximise"),u=this._getHeaderSetting("minimise"),c=new n.controls.HeaderButton(this,s,"lm_maximise",l),this.parent.on("maximised",function(){c.element.attr("title",u)}),this.parent.on("minimised",function(){c.element.attr("title",s)})),this._isClosable()&&(a=n.utils.fnBind(this.parent.remove,this.parent),o=this._getHeaderSetting("close"),this.closeButton=new n.controls.HeaderButton(this,o,"lm_close",a))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(a){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){this.layoutManager.config.settings.popoutWholeStack===!0?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(a){a.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(a){if(this.tabs.length!==0){this.tabDropdownButton.element.toggle(a===!0);var i=function(w){return w?"width":"height"};this.element.css(i(!this.parent._sided),""),this.element[i(this.parent._sided)](this.layoutManager.config.dimensions.headerHeight);var o=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,s=0,u=0,l,c,f,d,v=0,h,p=this.layoutManager.config.settings.tabOverlapAllowance,m=!1,g=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,b=this.tabs[g];for(this.parent._sided&&(o=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,c=0;c<this.tabs.length;c++)if(l=this.tabs[c].element,this.tabsContainer.append(l),h=l.outerWidth()+parseInt(l.css("margin-right"),10),s+=h,g<=c?u=s:u=s+b.element.outerWidth()+parseInt(b.element.css("margin-right"),10),u>o){if(m)c===g&&(l.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(l));else if(g>0&&g<=c?v=(u-o)/(c-1):v=(u-o)/c,v<p){for(f=0;f<=c;f++)d=f!==g&&f!==0?"-"+v+"px":"",this.tabs[f].element.css({"z-index":c-f,"margin-left":d});this._lastVisibleTabIndex=c,this.tabsContainer.append(l)}else m=!0;if(m&&c!==g)if(a)l.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(l);else{this._updateTabSizes(!0);return}}else this._lastVisibleTabIndex=c,l.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(l)}}}),n.controls.HeaderButton=function(a,i,o,s){this._header=a,this.element=r('<li class="'+o+'" title="'+i+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=s,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},n.utils.copy(n.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),n.controls.Splitter=function(a,i,o){this._isVertical=a,this._size=i,this._grabSize=o<i?i:o,this.element=this._createElement(),this._dragListener=new n.utils.DragListener(this.element)},n.utils.copy(n.controls.Splitter.prototype,{on:function(a,i,o){this._dragListener.on(a,i,o)},_$destroy:function(){this.element.remove()},_createElement:function(){var a=r('<div class="lm_drag_handle"></div>'),i=r('<div class="lm_splitter"></div>');i.append(a);var o=this._grabSize-this._size,s=o/2;return this._isVertical?(a.css("top",-s),a.css("height",this._size+o),i.addClass("lm_vertical"),i.height(this._size)):(a.css("left",-s),a.css("width",this._size+o),i.addClass("lm_horizontal"),i.width(this._size)),i}}),n.controls.Tab=function(a,i){this.header=a,this.contentItem=i,this.element=r(n.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[i.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(i.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,this._layoutManager.config.settings.reorderEnabled===!0&&i.config.reorderEnabled===!0&&(this._dragListener=new n.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=n.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=n.utils.fnBind(this._onCloseClick,this),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},n.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',n.utils.copy(n.controls.Tab.prototype,{setTitle:function(a){this.element.attr("title",n.utils.stripTags(a)),this.titleElement.html(a)},setActive:function(a){a!==this.isActive&&(this.isActive=a,a?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(a,i){this.contentItem.parent.isMaximised===!0&&this.contentItem.parent.toggleMaximise(),new n.controls.DragProxy(a,i,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(a){if(a.button===0||a.type==="touchstart"){var i=this.header.parent.getActiveContentItem();this.contentItem!==i&&this.header.parent.setActiveContentItem(this.contentItem)}else a.button===1&&this.contentItem.config.isClosable&&this._onCloseClick(a)},_onCloseClick:function(a){a.stopPropagation(),this.header.parent.removeChild(this.contentItem)},_onCloseMousedown:function(a){a.stopPropagation()}}),n.controls.TransitionIndicator=function(){this._element=r('<div class="lm_transition_indicator"></div>'),r(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},n.utils.copy(n.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(a,i){},_nextAnimationFrame:function(){var a=this._measure(this._toElement),i=(n.utils.now()-this._animationStartTime)/this._totalAnimationDuration,o={},s;if(i>=1){this._element.hide();return}a.opacity=0;for(s in this._fromDimensions)o[s]=this._fromDimensions[s]+(a[s]-this._fromDimensions[s])*i;this._element.css(o),n.utils.animFrame(n.utils.fnBind(this._nextAnimationFrame,this))},_measure:function(a){var i=a.offset();return{left:i.left,top:i.top,width:a.outerWidth(),height:a.outerHeight()}}}),n.errors.ConfigurationError=function(a,i){Error.call(this),this.name="Configuration Error",this.message=a,this.node=i},n.errors.ConfigurationError.prototype=new Error,n.items.AbstractContentItem=function(a,i,o){n.utils.EventEmitter.call(this),this.config=this._extendItemNode(i),this.type=i.type,this.contentItems=[],this.parent=o,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=a,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(n.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),i.content&&this._createContentItems(i)},n.utils.copy(n.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(a,i,o,s){var u;for(o!==!0&&s!==!0&&this[a].apply(this,i||[]),u=0;u<this.contentItems.length;u++)this.contentItems[u].callDownwards(a,i,o);o===!0&&s!==!0&&this[a].apply(this,i||[])},removeChild:function(a,i){var o=n.utils.indexOf(a,this.contentItems);if(o===-1)throw new Error("Can't remove child item. Unknown content item");i!==!0&&this.contentItems[o]._$destroy(),this.contentItems.splice(o,1),this.config.content.splice(o,1),this.contentItems.length>0?this.callDownwards("setSize"):!(this instanceof n.items.Root)&&this.config.isClosable===!0&&this.parent.removeChild(this)},addChild:function(a,i){i===void 0&&(i=this.contentItems.length),this.contentItems.splice(i,0,a),this.config.content===void 0&&(this.config.content=[]),this.config.content.splice(i,0,a.config),a.parent=this,a.parent.isInitialised===!0&&a.isInitialised===!1&&a._$init()},replaceChild:function(a,i,o){i=this.layoutManager._$normalizeContentItem(i);var s=n.utils.indexOf(a,this.contentItems),u=a.element[0].parentNode;if(s===-1)throw new Error("Can't replace child. oldChild is not child of this");u.replaceChild(i.element[0],a.element[0]),o===!0&&(a.parent=null,a._$destroy()),this.contentItems[s]=i,i.parent=this,this.isStack&&(this.header.tabs[s].contentItem=i),i.parent.isInitialised===!0&&i.isInitialised===!1&&i._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var a=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),a},toggleMaximise:function(a){a&&a.preventDefault(),this.isMaximised===!0?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(a){this.config.title=a,this.emit("titleChanged",a),this.emit("stateChanged")},hasId:function(a){if(this.config.id){if(typeof this.config.id=="string")return this.config.id===a;if(this.config.id instanceof Array)return n.utils.indexOf(a,this.config.id)!==-1}else return!1},addId:function(a){this.hasId(a)||(this.config.id?typeof this.config.id=="string"?this.config.id=[this.config.id,a]:this.config.id instanceof Array&&this.config.id.push(a):this.config.id=a)},removeId:function(a){if(!this.hasId(a))throw new Error("Id not found");if(typeof this.config.id=="string")delete this.config.id;else if(this.config.id instanceof Array){var i=n.utils.indexOf(a,this.config.id);this.config.id.splice(i,1)}},getItemsByFilter:function(a){var i=[],o=function(s){for(var u=0;u<s.contentItems.length;u++)a(s.contentItems[u])===!0&&i.push(s.contentItems[u]),o(s.contentItems[u])};return o(this),i},getItemsById:function(a){return this.getItemsByFilter(function(i){return i.config.id instanceof Array?n.utils.indexOf(a,i.config.id)!==-1:i.config.id===a})},getItemsByType:function(a){return this._$getItemsByProperty("type",a)},getComponentsByName:function(a){var i=this._$getItemsByProperty("componentName",a),o=[],s;for(s=0;s<i.length;s++)o.push(i[s].instance);return o},_$getItemsByProperty:function(a,i){return this.getItemsByFilter(function(o){return o[a]===i})},_$setParent:function(a){this.parent=a},_$highlightDropZone:function(a,i,o){this.layoutManager.dropTargetIndicator.highlightArea(o)},_$onDrop:function(a){this.addChild(a)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(a){var i=this.getItemsByType("stack"),o,s;for(s=0;s<i.length;s++)o=i[s].getActiveContentItem(),o&&o.isComponent&&o.container[a]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(a){a=a||this.element;var i=a.offset(),o=a.width(),s=a.height();return{x1:i.left,y1:i.top,x2:i.left+o,y2:i.top+s,surface:o*s,contentItem:this}},_$init:function(){var a;for(this.setSize(),a=0;a<this.contentItems.length;a++)this.childElementContainer.append(this.contentItems[a].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(a){var i=new n.utils.BubblingEvent(a,this);this.emit(a,i)},_createContentItems:function(a){var i,o;if(!(a.content instanceof Array))throw new n.errors.ConfigurationError("content must be an Array",a);for(o=0;o<a.content.length;o++)i=this.layoutManager.createContentItem(a.content[o],this),this.contentItems.push(i)},_extendItemNode:function(a){for(var i in n.config.itemDefaultConfig)a[i]===void 0&&(a[i]=n.config.itemDefaultConfig[i]);return a},_propagateEvent:function(a,i){i instanceof n.utils.BubblingEvent&&i.isPropagationStopped===!1&&this.isInitialised===!0&&(this.isRoot===!1&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(a,i))},_scheduleEventPropagationToLayoutManager:function(a,i){n.utils.indexOf(a,this._throttledEvents)===-1?this.layoutManager.emit(a,i.origin):this._pendingEventPropagations[a]!==!0&&(this._pendingEventPropagations[a]=!0,n.utils.animFrame(n.utils.fnBind(this._propagateEventToLayoutManager,this,[a,i])))},_propagateEventToLayoutManager:function(a,i){this._pendingEventPropagations[a]=!1,this.layoutManager.emit(a,i)}}),n.items.Component=function(a,i,o){n.items.AbstractContentItem.call(this,a,i,o);var s=a.getComponent(this.config.componentName),u=r.extend(!0,{},this.config.componentState||{});u.componentName=this.config.componentName,this.componentName=this.config.componentName,this.config.title===""&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new n.container.ItemContainer(this.config,this,a),this.instance=new s(this.container,u),this.element=this.container._element},n.utils.extend(n.items.Component,n.items.AbstractContentItem),n.utils.copy(n.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){n.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),n.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),n.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),n.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),n.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),n.items.Root=function(a,i,o){n.items.AbstractContentItem.call(this,a,i,null),this.isRoot=!0,this.type="root",this.element=r('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=o,this._containerElement.append(this.element)},n.utils.extend(n.items.Root,n.items.AbstractContentItem),n.utils.copy(n.items.Root.prototype,{addChild:function(a){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");a=this.layoutManager._$normalizeContentItem(a,this),this.childElementContainer.append(a.element),n.items.AbstractContentItem.prototype.addChild.call(this,a),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(a,i){a=typeof a=="undefined"?this._containerElement.width():a,i=typeof i=="undefined"?this._containerElement.height():i,this.element.width(a),this.element.height(i),this.contentItems[0]&&(this.contentItems[0].element.width(a),this.contentItems[0].element.height(i))},_$highlightDropZone:function(a,i,o){this.layoutManager.tabDropPlaceholder.remove(),n.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(a,i){var o;if(a.isComponent&&(o=this.layoutManager.createContentItem({type:"stack",header:a.config.header||{}},this),o._$init(),o.addChild(a),a=o),!this.contentItems.length)this.addChild(a);else{var s=i.side[0]=="x"?"row":"column",u=i.side[0]=="x"?"width":"height",l=i.side[1]=="2",c=this.contentItems[0];if(!c instanceof n.items.RowOrColumn||c.type!=s){var f=this.layoutManager.createContentItem({type:s},this);this.replaceChild(c,f),f.addChild(a,l?0:void 0,!0),f.addChild(c,l?void 0:0,!0),c.config[u]=50,a.config[u]=50,f.callDownwards("setSize")}else{var d=c.contentItems[l?0:c.contentItems.length-1];c.addChild(a,l?0:void 0,!0),d.config[u]*=.5,a.config[u]=d.config[u],c.callDownwards("setSize")}}}}),n.items.RowOrColumn=function(a,i,o,s){n.items.AbstractContentItem.call(this,i,o,s),this.isRow=!a,this.isColumn=a,this.element=r('<div class="lm_item lm_'+(a?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=i.config.dimensions.borderWidth,this._splitterGrabSize=i.config.dimensions.borderGrabWidth,this._isColumn=a,this._dimension=a?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},n.utils.extend(n.items.RowOrColumn,n.items.AbstractContentItem),n.utils.copy(n.items.RowOrColumn.prototype,{addChild:function(a,i,o){var s,u,l,c;if(a=this.layoutManager._$normalizeContentItem(a,this),i===void 0&&(i=this.contentItems.length),this.contentItems.length>0?(c=this._createSplitter(Math.max(0,i-1)).element,i>0?(this.contentItems[i-1].element.after(c),c.after(a.element)):(this.contentItems[0].element.before(c),c.before(a.element))):this.childElementContainer.append(a.element),n.items.AbstractContentItem.prototype.addChild.call(this,a,i),s=1/this.contentItems.length*100,o===!0){this.emitBubblingEvent("stateChanged");return}for(l=0;l<this.contentItems.length;l++)this.contentItems[l]===a?a.config[this._dimension]=s:(u=this.contentItems[l].config[this._dimension]*=(100-s)/100,this.contentItems[l].config[this._dimension]=u);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(a,i){var o=a.config[this._dimension],s=n.utils.indexOf(a,this.contentItems),u=Math.max(s-1,0),l,c;if(s===-1)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[u]&&(this._splitter[u]._$destroy(),this._splitter.splice(u,1)),l=0;l<this.contentItems.length;l++)this.contentItems[l]!==a&&(this.contentItems[l].config[this._dimension]+=o/(this.contentItems.length-1));n.items.AbstractContentItem.prototype.removeChild.call(this,a,i),this.contentItems.length===1&&this.config.isClosable===!0?(c=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,c,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(a,i){var o=a.config[this._dimension];n.items.AbstractContentItem.prototype.replaceChild.call(this,a,i),i.config[this._dimension]=o,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){if(this.isInitialised!==!0){var a;for(n.items.AbstractContentItem.prototype._$init.call(this),a=0;a<this.contentItems.length-1;a++)this.contentItems[a].element.after(this._createSplitter(a).element)}},_setAbsoluteSizes:function(){var a,i=this._calculateAbsoluteSizes();for(a=0;a<this.contentItems.length;a++)i.additionalPixel-a>0&&i.itemSizes[a]++,this._isColumn?(this.contentItems[a].element.width(i.totalWidth),this.contentItems[a].element.height(i.itemSizes[a])):(this.contentItems[a].element.width(i.itemSizes[a]),this.contentItems[a].element.height(i.totalHeight))},_calculateAbsoluteSizes:function(){var a,i=(this.contentItems.length-1)*this._splitterSize,o=this.element.width(),s=this.element.height(),u=0,l,c,f=[];for(this._isColumn?s-=i:o-=i,a=0;a<this.contentItems.length;a++)this._isColumn?c=Math.floor(s*(this.contentItems[a].config.height/100)):c=Math.floor(o*(this.contentItems[a].config.width/100)),u+=c,f.push(c);return l=Math.floor((this._isColumn?s:o)-u),{itemSizes:f,additionalPixel:l,totalWidth:o,totalHeight:s}},_calculateRelativeSizes:function(){var a,i=0,o=[],s=this._isColumn?"height":"width";for(a=0;a<this.contentItems.length;a++)this.contentItems[a].config[s]!==void 0?i+=this.contentItems[a].config[s]:o.push(this.contentItems[a]);if(Math.round(i)===100){this._respectMinItemWidth();return}if(Math.round(i)<100&&o.length>0){for(a=0;a<o.length;a++)o[a].config[s]=(100-i)/o.length;this._respectMinItemWidth();return}if(Math.round(i)>100)for(a=0;a<o.length;a++)o[a].config[s]=50,i+=50;for(a=0;a<this.contentItems.length;a++)this.contentItems[a].config[s]=this.contentItems[a].config[s]/i*100;this._respectMinItemWidth()},_respectMinItemWidth:function(){var a=this.layoutManager.config.dimensions&&this.layoutManager.config.dimensions.minItemWidth||0,i=null,o=[],s=0,u=0,l=0,c=0,f,d,v=[],h;if(!(this._isColumn||!a||this.contentItems.length<=1)){i=this._calculateAbsoluteSizes();for(var p=0;p<this.contentItems.length;p++)this.contentItems[p],c=i.itemSizes[p],c<a?(u+=a-c,h={width:a}):(s+=c-a,h={width:c},o.push(h)),v.push(h);if(!(u===0||u>s)){for(f=u/s,l=u,p=0;p<o.length;p++)h=o[p],d=Math.round((h.width-a)*f),l-=d,h.width-=d;for(l!==0&&(v[v.length-1].width-=l),p=0;p<this.contentItems.length;p++)this.contentItems[p].config.width=v[p].width/i.totalWidth*100}}},_createSplitter:function(a){var i;return i=new n.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize),i.on("drag",n.utils.fnBind(this._onSplitterDrag,this,[i]),this),i.on("dragStop",n.utils.fnBind(this._onSplitterDragStop,this,[i]),this),i.on("dragStart",n.utils.fnBind(this._onSplitterDragStart,this,[i]),this),this._splitter.splice(a,0,i),i},_getItemsForSplitter:function(a){var i=n.utils.indexOf(a,this._splitter);return{before:this.contentItems[i],after:this.contentItems[i+1]}},_getMinimumDimensions:function(a){for(var i=0,o=0,s=0;s<a.length;++s)i=Math.max(a[s].minWidth||0,i),o=Math.max(a[s].minHeight||0,o);return{horizontal:i,vertical:o}},_onSplitterDragStart:function(a){var i=this._getItemsForSplitter(a),o=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],s=this._getMinimumDimensions(i.before.config.content),u=this._isColumn?s.vertical:s.horizontal,l=this._getMinimumDimensions(i.after.config.content),c=this._isColumn?l.vertical:l.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(i.before.element[this._dimension]()-(u||o)),this._splitterMaxPosition=i.after.element[this._dimension]()-(c||o)},_onSplitterDrag:function(a,i,o){var s=this._isColumn?o:i;s>this._splitterMinPosition&&s<this._splitterMaxPosition&&(this._splitterPosition=s,a.element.css(this._isColumn?"top":"left",s))},_onSplitterDragStop:function(a){var i=this._getItemsForSplitter(a),o=i.before.element[this._dimension](),s=i.after.element[this._dimension](),u=(this._splitterPosition+o)/(o+s),l=i.before.config[this._dimension]+i.after.config[this._dimension];i.before.config[this._dimension]=u*l,i.after.config[this._dimension]=(1-u)*l,a.element.css({top:0,left:0}),n.utils.animFrame(n.utils.fnBind(this.callDownwards,this,["setSize"]))}}),n.items.Stack=function(a,i,o){n.items.AbstractContentItem.call(this,a,i,o),this.element=r('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var s=a.config;this._header={show:s.settings.hasHeaders===!0&&i.hasHeaders!==!1,popout:s.settings.showPopoutIcon&&s.labels.popout,maximise:s.settings.showMaximiseIcon&&s.labels.maximise,close:s.settings.showCloseIcon&&s.labels.close,minimise:s.labels.minimise},s.header&&n.utils.copy(this._header,s.header),i.header&&n.utils.copy(this._header,i.header),i.content&&i.content[0]&&i.content[0].header&&n.utils.copy(this._header,i.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=r('<div class="lm_items"></div>'),this.header=new n.controls.Header(a,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},n.utils.extend(n.items.Stack,n.items.AbstractContentItem),n.utils.copy(n.items.Stack.prototype,{setSize:function(){var a,i=this._header.show?this.layoutManager.config.dimensions.headerHeight:0,o=this.element.width()-(this._sided?i:0),s=this.element.height()-(this._sided?0:i);for(this.childElementContainer.width(o),this.childElementContainer.height(s),a=0;a<this.contentItems.length;a++)this.contentItems[a].element.width(o).height(s);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var a,i;if(this.isInitialised!==!0){for(n.items.AbstractContentItem.prototype._$init.call(this),a=0;a<this.contentItems.length;a++)this.header.createTab(this.contentItems[a]),this.contentItems[a]._$hide();if(this.contentItems.length>0){if(i=this.contentItems[this.config.activeItemIndex||0],!i)throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(i)}}},setActiveContentItem:function(a){if(n.utils.indexOf(a,this.contentItems)===-1)throw new Error("contentItem is not a child of this stack");this._activeContentItem!==null&&this._activeContentItem._$hide(),this._activeContentItem=a,this.header.setActiveContentItem(a),a._$show(),this.emit("activeContentItemChanged",a),this.layoutManager.emit("activeContentItemChanged",a),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(a,i){a=this.layoutManager._$normalizeContentItem(a,this),n.items.AbstractContentItem.prototype.addChild.call(this,a,i),this.childElementContainer.append(a.element),this.header.createTab(a,i),this.setActiveContentItem(a),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(a,i){var o=n.utils.indexOf(a,this.contentItems);n.items.AbstractContentItem.prototype.removeChild.call(this,a,i),this.header.removeTab(a),this.header.activeContentItem===a&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(o-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var a,i,o;for(a=this.header._isClosable(),o=0,i=this.contentItems.length;o<i&&a;o++)a=this.contentItems[o].config.isClosable;this.header._$setClosable(a)},_$destroy:function(){n.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(a){if(this._dropSegment==="header"){this._resetHeaderDropZone(),this.addChild(a,this._dropIndex);return}if(this._dropSegment==="body"){this.addChild(a);return}var i=this._dropSegment==="top"||this._dropSegment==="bottom",o=this._dropSegment==="left"||this._dropSegment==="right",s=this._dropSegment==="top"||this._dropSegment==="left",u=i&&this.parent.isColumn||o&&this.parent.isRow,l=i?"column":"row",c=i?"height":"width",f,d,v;a.isComponent&&(d=this.layoutManager.createContentItem({type:"stack",header:a.config.header||{}},this),d._$init(),d.addChild(a),a=d),u?(f=n.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(a,s?f:f+1,!0),this.config[c]*=.5,a.config[c]=this.config[c],this.parent.callDownwards("setSize")):(l=i?"column":"row",v=this.layoutManager.createContentItem({type:l},this),this.parent.replaceChild(this,v),v.addChild(a,s?0:void 0,!0),v.addChild(this,s?void 0:0,!0),this.config[c]=50,a.config[c]=50,v.callDownwards("setSize"))},_$highlightDropZone:function(a,i){var o,s;for(o in this._contentAreaDimensions)if(s=this._contentAreaDimensions[o].hoverArea,s.x1<a&&s.x2>a&&s.y1<i&&s.y2>i){o==="header"?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?i:a)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(o));return}},_$getArea:function(){if(this.element.is(":visible")===!1)return null;var a=n.items.AbstractContentItem.prototype._$getArea,i=a.call(this,this.header.element),o=a.call(this,this.childElementContainer),s=o.x2-o.x1,u=o.y2-o.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}}},this._activeContentItem&&this._activeContentItem.isComponent===!1?i:this.contentItems.length===0?(this._contentAreaDimensions.body={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}},a.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.25,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.5,y2:o.y2}},this._contentAreaDimensions.top={hoverArea:{x1:o.x1+s*.25,y1:o.y1,x2:o.x1+s*.75,y2:o.y1+u*.5},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y1+u*.5}},this._contentAreaDimensions.right={hoverArea:{x1:o.x1+s*.75,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1+s*.5,y1:o.y1,x2:o.x2,y2:o.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:o.x1+s*.25,y1:o.y1+u*.5,x2:o.x1+s*.75,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1+u*.5,x2:o.x2,y2:o.y2}},a.call(this,this.element))},_highlightHeaderDropZone:function(a){var i,o,s=this.header.tabs.length,u=!1,l,c,f,d,v,h,p;if(s===0){v=this.header.element.offset(),this.layoutManager.dropTargetIndicator.highlightArea({x1:v.left,x2:v.left+100,y1:v.top+this.header.element.height()-20,y2:v.top+this.header.element.height()});return}for(i=0;i<s;i++)if(o=this.header.tabs[i].element,f=o.offset(),this._sided?(c=f.top,l=f.left,h=o.height()):(c=f.left,l=f.top,h=o.width()),a>c&&a<c+h){u=!0;break}if(!(u===!1&&a<c)){if(p=c+h/2,a<p?(this._dropIndex=i,o.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(i+1,s),o.after(this.layoutManager.tabDropPlaceholder)),this._sided){placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,this.layoutManager.dropTargetIndicator.highlightArea({x1:l,x2:l+o.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});return}d=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:d,x2:d+this.layoutManager.tabDropPlaceholder.width(),y1:l,y2:l+o.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var a=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=a,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var i=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[i](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(a){var i=this._contentAreaDimensions[a].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(i),this._dropSegment=a}}),n.utils.BubblingEvent=function(a,i){this.name=a,this.origin=i,this.isPropagationStopped=!1},n.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},n.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw new Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},n.utils.copy(n.utils.ConfigMinifier.prototype,{minifyConfig:function(a){var i={};return this._nextLevel(a,i,"_min"),i},unminifyConfig:function(a){var i={};return this._nextLevel(a,i,"_max"),i},_nextLevel:function(a,i,o){var s,u;for(s in a)a instanceof Array&&(s=parseInt(s,10)),!!a.hasOwnProperty(s)&&(u=this[o](s,this._keys),typeof a[s]=="object"?(i[u]=a[s]instanceof Array?[]:{},this._nextLevel(a[s],i[u],o)):i[u]=this[o](a[s],this._values))},_min:function(a,i){if(typeof a=="string"&&a.length===1)return"___"+a;var o=n.utils.indexOf(a,i);return o===-1?a:o.toString(36)},_max:function(a,i){return typeof a=="string"&&a.length===1?i[parseInt(a,36)]:typeof a=="string"&&a.substr(0,3)==="___"?a[3]:a}}),n.utils.EventHub=function(a){n.utils.EventEmitter.call(this),this._layoutManager=a,this._dontPropagateToParent=null,this._childEventSource=null,this.on(n.utils.EventEmitter.ALL_EVENT,n.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=n.utils.fnBind(this._onEventFromChild,this),r(window).on("gl_child_event",this._boundOnEventFromChild)},n.utils.EventHub.prototype._onEventFromThis=function(){var a=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&a[0]!==this._dontPropagateToParent&&this._propagateToParent(a),this._propagateToChildren(a),this._dontPropagateToParent=null,this._childEventSource=null},n.utils.EventHub.prototype._$onEventFromParent=function(a){this._dontPropagateToParent=a[0],this.emit.apply(this,a)},n.utils.EventHub.prototype._onEventFromChild=function(a){this._childEventSource=a.originalEvent.__gl,this.emit.apply(this,a.originalEvent.__glArgs)},n.utils.EventHub.prototype._propagateToParent=function(a){var i,o="gl_child_event";document.createEvent?(i=window.opener.document.createEvent("HTMLEvents"),i.initEvent(o,!0,!0)):(i=window.opener.document.createEventObject(),i.eventType=o),i.eventName=o,i.__glArgs=a,i.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(i):window.opener.fireEvent("on"+i.eventType,i)},n.utils.EventHub.prototype._propagateToChildren=function(a){var i,o;for(o=0;o<this._layoutManager.openPopouts.length;o++)i=this._layoutManager.openPopouts[o].getGlInstance(),i&&i!==this._childEventSource&&i.eventHub._$onEventFromParent(a)},n.utils.EventHub.prototype.destroy=function(){r(window).off("gl_child_event",this._boundOnEventFromChild)},n.utils.ReactComponentHandler=function(a,i){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=a,this._initialState=i,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},n.utils.copy(n.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(a,i){this._container.setState(i),this._originalComponentWillUpdate.call(this._reactComponent,a,i)},_getReactClass:function(){var a=this._container._config.component,i;if(!a)throw new Error("No react component name. type: react-component needs a field `component`");if(i=this._container.layoutManager.getComponent(a),!i)throw new Error('React component "'+a+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return i},_getReactComponent:function(){var a={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},i=r.extend(a,this._container._config.props);return React.createElement(this._reactClass,i)}})})(window.$)})(kf);var H1=kf.exports,If={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(window,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},a.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var u in i)a.d(s,u,function(l){return i[l]}.bind(null,u));return s},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=0)}([function(r,n,a){var i=a(1),o=function(s){s&&s("core","svg",i.svg)};typeof cytoscape!="undefined"&&o(cytoscape),r.exports=o},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},o=a(2),s={},u={};u.number=function(l){return l!=null&&(l===void 0?"undefined":i(l))===i(1)&&!isNaN(l)},s.bufferCanvasImage=function(l,c){var f=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach(function(D){D._private.rscratch.pathCacheKey=null,D._private.rscratch.pathCache=null});var d=c.renderer(),v=c.mutableElements().boundingBox(),h=d.findContainerClientCoords(),p=l.full?Math.ceil(v.w):h[2],m=l.full?Math.ceil(v.h):h[3],g=u.number(l.maxWidth)||u.number(l.maxHeight),b=d.getPixelRatio(),w=1;if(l.scale!==void 0)p*=l.scale,m*=l.scale,w=l.scale;else if(g){var y=1/0,_=1/0;u.number(l.maxWidth)&&(y=w*l.maxWidth/p),u.number(l.maxHeight)&&(_=w*l.maxHeight/m),p*=w=Math.min(y,_),m*=w}g||(p*=b,m*=b,w*=b);var E=null,x=E=new o(p,m);if(p>0&&m>0){E.clearRect(0,0,p,m),l.bg&&(E.globalCompositeOperation="destination-over",E.fillStyle=l.bg,E.fillRect(0,0,p,m)),E.globalCompositeOperation="source-over";var S=d.getCachedZSortedEles();if(l.full)E.translate(-v.x1*w,-v.y1*w),E.scale(w,w),d.drawElements(E,S),E.scale(1/w,1/w),E.translate(v.x1*w,v.y1*w);else{var C=c.pan(),k={x:C.x*w,y:C.y*w};w*=c.zoom(),E.translate(k.x,k.y),E.scale(w,w),d.drawElements(E,S),E.scale(1/w,1/w),E.translate(-k.x,-k.y)}}return c.renderer().usePaths=f,x},s.svg=function(l){return s.bufferCanvasImage(l||{},this).getSerializedSvg()},r.exports=s},function(r,n,a){(function(){var i,o,s,u,l;function c(h,p){var m,g=Object.keys(p);for(m=0;m<g.length;m++)h=h.replace(new RegExp("\\{"+g[m]+"\\}","gi"),p[g[m]]);return h}function f(h){var p,m,g;if(!h)throw new Error("cannot create a random attribute name for an undefined object");p="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",m="";do for(m="",g=0;g<12;g++)m+=p[Math.floor(Math.random()*p.length)];while(h[m]);return m}function d(h){var p={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return p[h]||p.alphabetic}l=function(h,p){var m,g,b,w={};for(h=h.split(","),p=p||10,m=0;m<h.length;m+=2)g="&"+h[m+1]+";",b=parseInt(h[m],p),w[g]="&#"+b+";";return w["\\xa0"]="&#160;",w}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(h,p){this.__root=h,this.__ctx=p}).prototype.addColorStop=function(h,p){var m,g=this.__ctx.__createElement("stop");g.setAttribute("offset",h),p.indexOf("rgba")!==-1?(m=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(p),g.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:m[1],g:m[2],b:m[3]})),g.setAttribute("stop-opacity",m[4])):g.setAttribute("stop-color",p),this.__root.appendChild(g)},u=function(h,p){this.__root=h,this.__ctx=p},(o=function(h){var p,m={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((p=m).width=arguments[0],p.height=arguments[1]):p=h||m,!(this instanceof o))return new o(p);this.width=p.width||m.width,this.height=p.height||m.height,this.enableMirroring=p.enableMirroring!==void 0?p.enableMirroring:m.enableMirroring,this.canvas=this,this.__document=p.document||document,p.ctx?this.__ctx=p.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(h,p,m){p===void 0&&(p={});var g,b,w=this.__document.createElementNS("http://www.w3.org/2000/svg",h),y=Object.keys(p);for(m&&(w.setAttribute("fill","none"),w.setAttribute("stroke","none")),g=0;g<y.length;g++)b=y[g],w.setAttribute(b,p[b]);return w},o.prototype.__setDefaultStyles=function(){var h,p,m=Object.keys(i);for(h=0;h<m.length;h++)this[p=m[h]]=i[p].canvas},o.prototype.__applyStyleState=function(h){if(h){var p,m,g=Object.keys(h);for(p=0;p<g.length;p++)this[m=g[p]]=h[m]}},o.prototype.__getStyleState=function(){var h,p,m={},g=Object.keys(i);for(h=0;h<g.length;h++)m[p=g[h]]=this[p];return m},o.prototype.__applyStyleToCurrentElement=function(h){var p=this.__currentElement,m=this.__currentElementsToStyle;m&&(p.setAttribute(h,""),p=m.element,m.children.forEach(function(k){k.setAttribute(h,"")}));var g,b,w,y,_,E=Object.keys(i);for(g=0;g<E.length;g++)if(b=i[E[g]],w=this[E[g]],b.apply){if(w instanceof u){if(w.__ctx)for(;w.__ctx.__defs.childNodes.length;)y=w.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[y]=y,this.__defs.appendChild(w.__ctx.__defs.childNodes[0]);p.setAttribute(b.apply,c("url(#{id})",{id:w.__root.getAttribute("id")}))}else if(w instanceof s)p.setAttribute(b.apply,c("url(#{id})",{id:w.__root.getAttribute("id")}));else if(b.apply.indexOf(h)!==-1&&b.svg!==w)if(b.svgAttr!=="stroke"&&b.svgAttr!=="fill"||w.indexOf("rgba")===-1){var x=b.svgAttr;if(E[g]==="globalAlpha"&&(x=h+"-"+b.svgAttr,p.getAttribute(x)))continue;p.setAttribute(x,w)}else{_=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(w),p.setAttribute(b.svgAttr,c("rgb({r},{g},{b})",{r:_[1],g:_[2],b:_[3]}));var S=_[4],C=this.globalAlpha;C!=null&&(S*=C),p.setAttribute(b.svgAttr+"-opacity",S)}}},o.prototype.__closestGroupOrSvg=function(h){return(h=h||this.__currentElement).nodeName==="g"||h.nodeName==="svg"?h:this.__closestGroupOrSvg(h.parentNode)},o.prototype.getSerializedSvg=function(h){var p,m,g,b,w,y=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(y)&&(y=y.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),h)for(p=Object.keys(l),m=0;m<p.length;m++)g=p[m],b=l[g],(w=new RegExp(g,"gi")).test(y)&&(y=y.replace(w,b));return y},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var h=this.__createElement("g"),p=this.__closestGroupOrSvg();this.__groupStack.push(p),p.appendChild(h),this.__currentElement=h,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var h=this.__stack.pop();this.__applyStyleState(h)},o.prototype.__addTransform=function(h){var p=this.__closestGroupOrSvg();if(p.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:p,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var m=this.__createElement("g");p.appendChild(m),this.__currentElement=m}var g=this.__currentElement.getAttribute("transform");g?g+=" ":g="",g+=h,this.__currentElement.setAttribute("transform",g)},o.prototype.scale=function(h,p){p===void 0&&(p=h),this.__addTransform(c("scale({x},{y})",{x:h,y:p}))},o.prototype.rotate=function(h){var p=180*h/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:p,cx:0,cy:0}))},o.prototype.translate=function(h,p){this.__addTransform(c("translate({x},{y})",{x:h,y:p}))},o.prototype.transform=function(h,p,m,g,b,w){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:h,b:p,c:m,d:g,e:b,f:w}))},o.prototype.beginPath=function(){var h;this.__currentDefaultPath="",this.__currentPosition={},h=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(h),this.__currentElement=h},o.prototype.__applyCurrentDefaultPath=function(){var h=this.__currentElement;h.nodeName==="path"?h.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",h.nodeName)},o.prototype.__addPathCommand=function(h){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=h},o.prototype.moveTo=function(h,p){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:h,y:p},this.__addPathCommand(c("M {x} {y}",{x:h,y:p}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(h,p){this.__currentPosition={x:h,y:p},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:h,y:p})):this.__addPathCommand(c("M {x} {y}",{x:h,y:p}))},o.prototype.bezierCurveTo=function(h,p,m,g,b,w){this.__currentPosition={x:b,y:w},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:h,cp1y:p,cp2x:m,cp2y:g,x:b,y:w}))},o.prototype.quadraticCurveTo=function(h,p,m,g){this.__currentPosition={x:m,y:g},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:h,cpy:p,x:m,y:g}))};var v=function(h){var p=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return[h[0]/p,h[1]/p]};o.prototype.arcTo=function(h,p,m,g,b){var w=this.__currentPosition&&this.__currentPosition.x,y=this.__currentPosition&&this.__currentPosition.y;if(w!==void 0&&y!==void 0){if(b<0)throw new Error("IndexSizeError: The radius provided ("+b+") is negative.");if(w===h&&y===p||h===m&&p===g||b===0)this.lineTo(h,p);else{var _=v([w-h,y-p]),E=v([m-h,g-p]);if(_[0]*E[1]!=_[1]*E[0]){var x=_[0]*E[0]+_[1]*E[1],S=Math.acos(Math.abs(x)),C=v([_[0]+E[0],_[1]+E[1]]),k=b/Math.sin(S/2),D=h+k*C[0],T=p+k*C[1],P=[-_[1],_[0]],I=[E[1],-E[0]],B=function(H){var W=H[0];return H[1]>=0?Math.acos(W):-Math.acos(W)},L=B(P),N=B(I);this.lineTo(D+P[0]*b,T+P[1]*b),this.arc(D,T,b,L,N)}else this.lineTo(h,p)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(h,p,m,g){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(h,p),this.lineTo(h+m,p),this.lineTo(h+m,p+g),this.lineTo(h,p+g),this.lineTo(h,p),this.closePath()},o.prototype.fillRect=function(h,p,m,g){var b;b=this.__createElement("rect",{x:h,y:p,width:m,height:g},!0),this.__closestGroupOrSvg().appendChild(b),this.__currentElement=b,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(h,p,m,g){var b;b=this.__createElement("rect",{x:h,y:p,width:m,height:g},!0),this.__closestGroupOrSvg().appendChild(b),this.__currentElement=b,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var h=this.__closestGroupOrSvg().getAttribute("transform"),p=this.__root.childNodes[1],m=p.childNodes,g=m.length-1;g>=0;g--)m[g]&&p.removeChild(m[g]);this.__currentElement=p,this.__groupStack=[],h&&this.__addTransform(h)},o.prototype.clearRect=function(h,p,m,g){if(h!==0||p!==0||m!==this.width||g!==this.height){var b,w=this.__closestGroupOrSvg();b=this.__createElement("rect",{x:h,y:p,width:m,height:g,fill:"#FFFFFF"},!0),w.appendChild(b)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(h,p,m,g){var b=this.__createElement("linearGradient",{id:f(this.__ids),x1:h+"px",x2:m+"px",y1:p+"px",y2:g+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(b),new s(b,this)},o.prototype.createRadialGradient=function(h,p,m,g,b,w){var y=this.__createElement("radialGradient",{id:f(this.__ids),cx:g+"px",cy:b+"px",r:w+"px",fx:h+"px",fy:p+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(y),new s(y,this)},o.prototype.__parseFont=function(){var h=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),p={style:h[1]||"normal",size:h[4]||"10px",family:h[6]||"sans-serif",weight:h[3]||"normal",decoration:h[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(p.decoration="underline"),this.__fontHref&&(p.href=this.__fontHref),p},o.prototype.__wrapTextLink=function(h,p){if(h.href){var m=this.__createElement("a");return m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.href),m.appendChild(p),m}return p},o.prototype.__applyText=function(h,p,m,g){var b,w,y=this.__parseFont(),_=this.__closestGroupOrSvg(),E=this.__createElement("text",{"font-family":y.family,"font-size":y.size,"font-style":y.style,"font-weight":y.weight,"text-decoration":y.decoration,x:p,y:m,"text-anchor":(b=this.textAlign,w={left:"start",right:"end",center:"middle",start:"start",end:"end"},w[b]||w.start),"dominant-baseline":d(this.textBaseline)},!0);E.appendChild(this.__document.createTextNode(h)),this.__currentElement=E,this.__applyStyleToCurrentElement(g),_.appendChild(this.__wrapTextLink(y,E))},o.prototype.fillText=function(h,p,m){this.__applyText(h,p,m,"fill")},o.prototype.strokeText=function(h,p,m){this.__applyText(h,p,m,"stroke")},o.prototype.measureText=function(h){return this.__ctx.font=this.font,this.__ctx.measureText(h)},o.prototype.arc=function(h,p,m,g,b,w){if(g!==b){(g%=2*Math.PI)===(b%=2*Math.PI)&&(b=(b+2*Math.PI-.001*(w?-1:1))%(2*Math.PI));var y=h+m*Math.cos(b),_=p+m*Math.sin(b),E=h+m*Math.cos(g),x=p+m*Math.sin(g),S=w?0:1,C=0,k=b-g;k<0&&(k+=2*Math.PI),C=w?k>Math.PI?0:1:k>Math.PI?1:0,this.lineTo(E,x),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:m,ry:m,xAxisRotation:0,largeArcFlag:C,sweepFlag:S,endX:y,endY:_})),this.__currentPosition={x:y,y:_}}},o.prototype.clip=function(){var h=this.__closestGroupOrSvg(),p=this.__createElement("clipPath"),m=f(this.__ids),g=this.__createElement("g");this.__applyCurrentDefaultPath(),h.removeChild(this.__currentElement),p.setAttribute("id",m),p.appendChild(this.__currentElement),this.__defs.appendChild(p),h.setAttribute("clip-path",c("url(#{id})",{id:m})),h.appendChild(g),this.__currentElement=g},o.prototype.drawImage=function(){var h,p,m,g,b,w,y,_,E,x,S,C,k,D=Array.prototype.slice.call(arguments),T=D[0],P=0,I=0;if(D.length===3)h=D[1],p=D[2],m=b=T.width,g=w=T.height;else if(D.length===5)h=D[1],p=D[2],m=D[3],g=D[4],b=T.width,w=T.height;else{if(D.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);P=D[1],I=D[2],b=D[3],w=D[4],h=D[5],p=D[6],m=D[7],g=D[8]}y=this.__closestGroupOrSvg(),this.__currentElement;var B="translate("+h+", "+p+")";if(T instanceof o){if((_=T.getSvg().cloneNode(!0)).childNodes&&_.childNodes.length>1){for(E=_.childNodes[0];E.childNodes.length;)k=E.childNodes[0].getAttribute("id"),this.__ids[k]=k,this.__defs.appendChild(E.childNodes[0]);if(x=_.childNodes[1]){var L,N=x.getAttribute("transform");L=N?N+" "+B:B,x.setAttribute("transform",L),y.appendChild(x)}}}else T.nodeName!=="CANVAS"&&T.nodeName!=="IMG"||((S=this.__createElement("image")).setAttribute("width",m),S.setAttribute("height",g),S.setAttribute("opacity",this.globalAlpha),S.setAttribute("preserveAspectRatio","none"),(C=this.__document.createElement("canvas")).width=m,C.height=g,C.getContext("2d").drawImage(T,P,I,b,w,0,0,m,g),T=C,S.setAttribute("transform",B),S.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T.nodeName==="CANVAS"?T.toDataURL():T.getAttribute("src")),y.appendChild(S))},o.prototype.createPattern=function(h,p){var m,g=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),b=f(this.__ids);return g.setAttribute("id",b),g.setAttribute("width",h.width),g.setAttribute("height",h.height),h.nodeName==="CANVAS"||h.nodeName==="IMG"?((m=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",h.width),m.setAttribute("height",h.height),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.nodeName==="CANVAS"?h.toDataURL():h.getAttribute("src")),g.appendChild(m),this.__defs.appendChild(g)):h instanceof o&&(g.appendChild(h.__root.childNodes[1]),this.__defs.appendChild(g)),new u(g,this)},o.prototype.setLineDash=function(h){h&&h.length>0?this.lineDash=h.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof r.exports=="object"&&(r.exports=o)})()}])})})(If);var V1=Do(If.exports);/*!
 * hotkeys-js v3.8.7
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * Copyright (c) 2021 kenny wong <wowohoo@qq.com>
 * http://jaywcjlove.github.io/hotkeys
 * 
 * Licensed under the MIT license.
 */var Zi=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Qi(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent&&t.attachEvent("on".concat(e),function(){r(window.event)})}function Mf(t,e){for(var r=e.slice(0,e.length-1),n=0;n<r.length;n++)r[n]=t[r[n].toLowerCase()];return r}function Af(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),r=e.lastIndexOf("");r>=0;)e[r-1]+=",",e.splice(r,1),r=e.lastIndexOf("");return e}function Nw(t,e){for(var r=t.length>=e.length?t:e,n=t.length>=e.length?e:t,a=!0,i=0;i<r.length;i++)n.indexOf(r[i])===-1&&(a=!1);return a}var Pf={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Zi?173:189,"=":Zi?61:187,";":Zi?59:186,"'":222,"[":219,"]":221,"\\":220},Fr={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},tl={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},tt={16:!1,18:!1,17:!1,91:!1},Je={};for(var Pa=1;Pa<20;Pa++)Pf["f".concat(Pa)]=111+Pa;var Fe=[],Of="all",Lf=[],Ti=function(e){return Pf[e.toLowerCase()]||Fr[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function Bf(t){Of=t||"all"}function ta(){return Of||"all"}function zw(){return Fe.slice(0)}function Fw(t){var e=t.target||t.srcElement,r=e.tagName,n=!0;return(e.isContentEditable||(r==="INPUT"||r==="TEXTAREA"||r==="SELECT")&&!e.readOnly)&&(n=!1),n}function $w(t){return typeof t=="string"&&(t=Ti(t)),Fe.indexOf(t)!==-1}function Hw(t,e){var r,n;t||(t=ta());for(var a in Je)if(Object.prototype.hasOwnProperty.call(Je,a))for(r=Je[a],n=0;n<r.length;)r[n].scope===t?r.splice(n,1):n++;ta()===t&&Bf(e||"all")}function Vw(t){var e=t.keyCode||t.which||t.charCode,r=Fe.indexOf(e);if(r>=0&&Fe.splice(r,1),t.key&&t.key.toLowerCase()==="meta"&&Fe.splice(0,Fe.length),(e===93||e===224)&&(e=91),e in tt){tt[e]=!1;for(var n in Fr)Fr[n]===e&&(ur[n]=!1)}}function qw(t){if(!t)Object.keys(Je).forEach(function(o){return delete Je[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&Ji(o)});else if(typeof t=="object")t.key&&Ji(t);else if(typeof t=="string"){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var a=r[0],i=r[1];typeof a=="function"&&(i=a,a=""),Ji({key:t,scope:a,method:i,splitKey:"+"})}}var Ji=function(e){var r=e.key,n=e.scope,a=e.method,i=e.splitKey,o=i===void 0?"+":i,s=Af(r);s.forEach(function(u){var l=u.split(o),c=l.length,f=l[c-1],d=f==="*"?"*":Ti(f);if(!!Je[d]){n||(n=ta());var v=c>1?Mf(Fr,l):[];Je[d]=Je[d].map(function(h){var p=a?h.method===a:!0;return p&&h.scope===n&&Nw(h.mods,v)?{}:h})}})};function rl(t,e,r){var n;if(e.scope===r||e.scope==="all"){n=e.mods.length>0;for(var a in tt)Object.prototype.hasOwnProperty.call(tt,a)&&(!tt[a]&&e.mods.indexOf(+a)>-1||tt[a]&&e.mods.indexOf(+a)===-1)&&(n=!1);(e.mods.length===0&&!tt[16]&&!tt[18]&&!tt[17]&&!tt[91]||n||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function nl(t){var e=Je["*"],r=t.keyCode||t.which||t.charCode;if(!!ur.filter.call(this,t)){if((r===93||r===224)&&(r=91),Fe.indexOf(r)===-1&&r!==229&&Fe.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(v){var h=tl[v];t[v]&&Fe.indexOf(h)===-1?Fe.push(h):!t[v]&&Fe.indexOf(h)>-1?Fe.splice(Fe.indexOf(h),1):v==="metaKey"&&t[v]&&Fe.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Fe=Fe.slice(Fe.indexOf(h))))}),r in tt){tt[r]=!0;for(var n in Fr)Fr[n]===r&&(ur[n]=!0);if(!e)return}for(var a in tt)Object.prototype.hasOwnProperty.call(tt,a)&&(tt[a]=t[tl[a]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Fe.indexOf(17)===-1&&Fe.push(17),Fe.indexOf(18)===-1&&Fe.push(18),tt[17]=!0,tt[18]=!0);var i=ta();if(e)for(var o=0;o<e.length;o++)e[o].scope===i&&(t.type==="keydown"&&e[o].keydown||t.type==="keyup"&&e[o].keyup)&&rl(t,e[o],i);if(r in Je){for(var s=0;s<Je[r].length;s++)if((t.type==="keydown"&&Je[r][s].keydown||t.type==="keyup"&&Je[r][s].keyup)&&Je[r][s].key){for(var u=Je[r][s],l=u.splitKey,c=u.key.split(l),f=[],d=0;d<c.length;d++)f.push(Ti(c[d]));f.sort().join("")===Fe.sort().join("")&&rl(t,u,i)}}}}function Ww(t){return Lf.indexOf(t)>-1}function ur(t,e,r){Fe=[];var n=Af(t),a=[],i="all",o=document,s=0,u=!1,l=!0,c="+";for(r===void 0&&typeof e=="function"&&(r=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(u=e.keyup),e.keydown!==void 0&&(l=e.keydown),typeof e.splitKey=="string"&&(c=e.splitKey)),typeof e=="string"&&(i=e);s<n.length;s++)t=n[s].split(c),a=[],t.length>1&&(a=Mf(Fr,t)),t=t[t.length-1],t=t==="*"?"*":Ti(t),t in Je||(Je[t]=[]),Je[t].push({keyup:u,keydown:l,scope:i,mods:a,shortcut:n[s],method:r,key:n[s],splitKey:c});typeof o!="undefined"&&!Ww(o)&&window&&(Lf.push(o),Qi(o,"keydown",function(f){nl(f)}),Qi(window,"focus",function(){Fe=[]}),Qi(o,"keyup",function(f){nl(f),Vw(f)}))}var eo={setScope:Bf,getScope:ta,deleteScope:Hw,getPressedKeyCodes:zw,isPressed:$w,filter:Fw,unbind:qw};for(var to in eo)Object.prototype.hasOwnProperty.call(eo,to)&&(ur[to]=eo[to]);if(typeof window!="undefined"){var Gw=window.hotkeys;ur.noConflict=function(t){return t&&window.hotkeys===ur&&(window.hotkeys=Gw),ur},window.hotkeys=ur}function er(t){return Array.isArray?Array.isArray(t):zf(t)==="[object Array]"}const Kw=1/0;function Uw(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Kw?"-0":e}function Yw(t){return t==null?"":Uw(t)}function Xt(t){return typeof t=="string"}function Rf(t){return typeof t=="number"}function Xw(t){return t===!0||t===!1||jw(t)&&zf(t)=="[object Boolean]"}function Nf(t){return typeof t=="object"}function jw(t){return Nf(t)&&t!==null}function xt(t){return t!=null}function ro(t){return!t.trim().length}function zf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Zw="Incorrect 'index' type",Qw=t=>`Invalid value for key ${t}`,Jw=t=>`Pattern length exceeds max of ${t}.`,e1=t=>`Missing ${t} property in key`,t1=t=>`Property 'weight' in key '${t}' must be a positive integer`,al=Object.prototype.hasOwnProperty;class r1{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let a=Ff(n);r+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ff(t){let e=null,r=null,n=null,a=1;if(Xt(t)||er(t))n=t,e=il(t),r=xo(t);else{if(!al.call(t,"name"))throw new Error(e1("name"));const i=t.name;if(n=i,al.call(t,"weight")&&(a=t.weight,a<=0))throw new Error(t1(i));e=il(i),r=xo(i)}return{path:e,id:r,weight:a,src:n}}function il(t){return er(t)?t:t.split(".")}function xo(t){return er(t)?t.join("."):t}function n1(t,e){let r=[],n=!1;const a=(i,o,s)=>{if(!!xt(i))if(!o[s])r.push(i);else{let u=o[s];const l=i[u];if(!xt(l))return;if(s===o.length-1&&(Xt(l)||Rf(l)||Xw(l)))r.push(Yw(l));else if(er(l)){n=!0;for(let c=0,f=l.length;c<f;c+=1)a(l[c],o,s+1)}else o.length&&a(l,o,s+1)}};return a(t,Xt(e)?e.split("."):e,0),n?r:r[0]}const a1={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},i1={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},o1={location:0,threshold:.6,distance:100},s1={useExtendedSearch:!1,getFn:n1,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ce=Er(Er(Er(Er({},i1),a1),o1),s1);const u1=/[^ ]+/g;function l1(t=1,e=3){const r=new Map,n=Math.pow(10,e);return{get(a){const i=a.match(u1).length;if(r.has(i))return r.get(i);const o=1/Math.pow(i,.5*t),s=parseFloat(Math.round(o*n)/n);return r.set(i,s),s},clear(){r.clear()}}}class hs{constructor({getFn:e=Ce.getFn,fieldNormWeight:r=Ce.fieldNormWeight}={}){this.norm=l1(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Xt(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();Xt(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!xt(e)||ro(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((a,i)=>{let o=this.getFn(e,a.path);if(!!xt(o)){if(er(o)){let s=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:l,value:c}=u.pop();if(!!xt(c))if(Xt(c)&&!ro(c)){let f={v:c,i:l,n:this.norm.get(c)};s.push(f)}else er(c)&&c.forEach((f,d)=>{u.push({nestedArrIndex:d,value:f})})}n.$[i]=s}else if(!ro(o)){let s={v:o,n:this.norm.get(o)};n.$[i]=s}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function $f(t,e,{getFn:r=Ce.getFn,fieldNormWeight:n=Ce.fieldNormWeight}={}){const a=new hs({getFn:r,fieldNormWeight:n});return a.setKeys(t.map(Ff)),a.setSources(e),a.create(),a}function c1(t,{getFn:e=Ce.getFn,fieldNormWeight:r=Ce.fieldNormWeight}={}){const{keys:n,records:a}=t,i=new hs({getFn:e,fieldNormWeight:r});return i.setKeys(n),i.setIndexRecords(a),i}function Oa(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:a=Ce.distance,ignoreLocation:i=Ce.ignoreLocation}={}){const o=e/t.length;if(i)return o;const s=Math.abs(n-r);return a?o+s/a:s?1:o}function f1(t=[],e=Ce.minMatchCharLength){let r=[],n=-1,a=-1,i=0;for(let o=t.length;i<o;i+=1){let s=t[i];s&&n===-1?n=i:!s&&n!==-1&&(a=i-1,a-n+1>=e&&r.push([n,a]),n=-1)}return t[i-1]&&i-n>=e&&r.push([n,i-1]),r}const Dr=32;function h1(t,e,r,{location:n=Ce.location,distance:a=Ce.distance,threshold:i=Ce.threshold,findAllMatches:o=Ce.findAllMatches,minMatchCharLength:s=Ce.minMatchCharLength,includeMatches:u=Ce.includeMatches,ignoreLocation:l=Ce.ignoreLocation}={}){if(e.length>Dr)throw new Error(Jw(Dr));const c=e.length,f=t.length,d=Math.max(0,Math.min(n,f));let v=i,h=d;const p=s>1||u,m=p?Array(f):[];let g;for(;(g=t.indexOf(e,h))>-1;){let x=Oa(e,{currentLocation:g,expectedLocation:d,distance:a,ignoreLocation:l});if(v=Math.min(x,v),h=g+c,p){let S=0;for(;S<c;)m[g+S]=1,S+=1}}h=-1;let b=[],w=1,y=c+f;const _=1<<c-1;for(let x=0;x<c;x+=1){let S=0,C=y;for(;S<C;)Oa(e,{errors:x,currentLocation:d+C,expectedLocation:d,distance:a,ignoreLocation:l})<=v?S=C:y=C,C=Math.floor((y-S)/2+S);y=C;let k=Math.max(1,d-C+1),D=o?f:Math.min(d+C,f)+c,T=Array(D+2);T[D+1]=(1<<x)-1;for(let I=D;I>=k;I-=1){let B=I-1,L=r[t.charAt(B)];if(p&&(m[B]=+!!L),T[I]=(T[I+1]<<1|1)&L,x&&(T[I]|=(b[I+1]|b[I])<<1|1|b[I+1]),T[I]&_&&(w=Oa(e,{errors:x,currentLocation:B,expectedLocation:d,distance:a,ignoreLocation:l}),w<=v)){if(v=w,h=B,h<=d)break;k=Math.max(1,2*d-h)}}if(Oa(e,{errors:x+1,currentLocation:d,expectedLocation:d,distance:a,ignoreLocation:l})>v)break;b=T}const E={isMatch:h>=0,score:Math.max(.001,w)};if(p){const x=f1(m,s);x.length?u&&(E.indices=x):E.isMatch=!1}return E}function d1(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const a=t.charAt(r);e[a]=(e[a]||0)|1<<n-r-1}return e}class Hf{constructor(e,{location:r=Ce.location,threshold:n=Ce.threshold,distance:a=Ce.distance,includeMatches:i=Ce.includeMatches,findAllMatches:o=Ce.findAllMatches,minMatchCharLength:s=Ce.minMatchCharLength,isCaseSensitive:u=Ce.isCaseSensitive,ignoreLocation:l=Ce.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:u,ignoreLocation:l},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,v)=>{this.chunks.push({pattern:d,alphabet:d1(d),startIndex:v})},f=this.pattern.length;if(f>Dr){let d=0;const v=f%Dr,h=f-v;for(;d<h;)c(this.pattern.substr(d,Dr),d),d+=Dr;if(v){const p=f-Dr;c(this.pattern.substr(p),p)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(e=e.toLowerCase()),this.pattern===e){let h={isMatch:!0,score:0};return n&&(h.indices=[[0,e.length-1]]),h}const{location:a,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:u,ignoreLocation:l}=this.options;let c=[],f=0,d=!1;this.chunks.forEach(({pattern:h,alphabet:p,startIndex:m})=>{const{isMatch:g,score:b,indices:w}=h1(e,h,p,{location:a+m,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:u,includeMatches:n,ignoreLocation:l});g&&(d=!0),f+=b,g&&w&&(c=[...c,...w])});let v={isMatch:d,score:d?f/this.chunks.length:1};return d&&n&&(v.indices=c),v}}class wr{constructor(e){this.pattern=e}static isMultiMatch(e){return ol(e,this.multiRegex)}static isSingleMatch(e){return ol(e,this.singleRegex)}search(){}}function ol(t,e){const r=t.match(e);return r?r[1]:null}class v1 extends wr{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class p1 extends wr{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class g1 extends wr{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class m1 extends wr{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class y1 extends wr{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class b1 extends wr{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Vf extends wr{constructor(e,{location:r=Ce.location,threshold:n=Ce.threshold,distance:a=Ce.distance,includeMatches:i=Ce.includeMatches,findAllMatches:o=Ce.findAllMatches,minMatchCharLength:s=Ce.minMatchCharLength,isCaseSensitive:u=Ce.isCaseSensitive,ignoreLocation:l=Ce.ignoreLocation}={}){super(e);this._bitapSearch=new Hf(e,{location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:u,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class qf extends wr{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n;const a=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+i,a.push([n,r-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const Eo=[v1,qf,g1,m1,b1,y1,p1,Vf],sl=Eo.length,w1=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,x1="|";function E1(t,e={}){return t.split(x1).map(r=>{let n=r.trim().split(w1).filter(i=>i&&!!i.trim()),a=[];for(let i=0,o=n.length;i<o;i+=1){const s=n[i];let u=!1,l=-1;for(;!u&&++l<sl;){const c=Eo[l];let f=c.isMultiMatch(s);f&&(a.push(new c(f,e)),u=!0)}if(!u)for(l=-1;++l<sl;){const c=Eo[l];let f=c.isSingleMatch(s);if(f){a.push(new c(f,e));break}}}return a})}const C1=new Set([Vf.type,qf.type]);class _1{constructor(e,{isCaseSensitive:r=Ce.isCaseSensitive,includeMatches:n=Ce.includeMatches,minMatchCharLength:a=Ce.minMatchCharLength,ignoreLocation:i=Ce.ignoreLocation,findAllMatches:o=Ce.findAllMatches,location:s=Ce.location,threshold:u=Ce.threshold,distance:l=Ce.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:a,findAllMatches:o,ignoreLocation:i,location:s,threshold:u,distance:l},this.pattern=r?e:e.toLowerCase(),this.query=E1(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a}=this.options;e=a?e:e.toLowerCase();let i=0,o=[],s=0;for(let u=0,l=r.length;u<l;u+=1){const c=r[u];o.length=0,i=0;for(let f=0,d=c.length;f<d;f+=1){const v=c[f],{isMatch:h,indices:p,score:m}=v.search(e);if(h){if(i+=1,s+=m,n){const g=v.constructor.type;C1.has(g)?o=[...o,...p]:o.push(p)}}else{s=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:s/i};return n&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Co=[];function S1(...t){Co.push(...t)}function _o(t,e){for(let r=0,n=Co.length;r<n;r+=1){let a=Co[r];if(a.condition(t,e))return new a(t,e)}return new Hf(t,e)}const ti={AND:"$and",OR:"$or"},So={PATH:"$path",PATTERN:"$val"},To=t=>!!(t[ti.AND]||t[ti.OR]),T1=t=>!!t[So.PATH],D1=t=>!er(t)&&Nf(t)&&!To(t),ul=t=>({[ti.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Wf(t,e,{auto:r=!0}={}){const n=a=>{let i=Object.keys(a);const o=T1(a);if(!o&&i.length>1&&!To(a))return n(ul(a));if(D1(a)){const u=o?a[So.PATH]:i[0],l=o?a[So.PATTERN]:a[u];if(!Xt(l))throw new Error(Qw(u));const c={keyId:xo(u),pattern:l};return r&&(c.searcher=_o(l,e)),c}let s={children:[],operator:i[0]};return i.forEach(u=>{const l=a[u];er(l)&&l.forEach(c=>{s.children.push(n(c))})}),s};return To(t)||(t=ul(t)),n(t)}function k1(t,{ignoreFieldNorm:e=Ce.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:a,norm:i,score:o})=>{const s=a?a.weight:null;n*=Math.pow(o===0&&s?Number.EPSILON:o,(s||1)*(e?1:i))}),r.score=n})}function I1(t,e){const r=t.matches;e.matches=[],!!xt(r)&&r.forEach(n=>{if(!xt(n.indices)||!n.indices.length)return;const{indices:a,value:i}=n;let o={indices:a,value:i};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function M1(t,e){e.score=t.score}function A1(t,e,{includeMatches:r=Ce.includeMatches,includeScore:n=Ce.includeScore}={}){const a=[];return r&&a.push(I1),n&&a.push(M1),t.map(i=>{const{idx:o}=i,s={item:e[o],refIndex:o};return a.length&&a.forEach(u=>{u(i,s)}),s})}class va{constructor(e,r={},n){this.options=Er(Er({},Ce),r),this.options.useExtendedSearch,this._keyStore=new r1(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof hs))throw new Error(Zw);this._myIndex=r||$f(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!xt(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let n=0,a=this._docs.length;n<a;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,a-=1,r.push(i))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:i,sortFn:o,ignoreFieldNorm:s}=this.options;let u=Xt(e)?Xt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return k1(u,{ignoreFieldNorm:s}),i&&u.sort(o),Rf(r)&&r>-1&&(u=u.slice(0,r)),A1(u,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(e){const r=_o(e,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:i,i:o,n:s})=>{if(!xt(i))return;const{isMatch:u,score:l,indices:c}=r.searchIn(i);u&&a.push({item:i,idx:o,matches:[{score:l,value:i,norm:s,indices:c}]})}),a}_searchLogical(e){const r=Wf(e,this.options),n=(s,u,l)=>{if(!s.children){const{keyId:f,searcher:d}=s,v=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:d});return v&&v.length?[{idx:l,item:u,matches:v}]:[]}const c=[];for(let f=0,d=s.children.length;f<d;f+=1){const v=s.children[f],h=n(v,u,l);if(h.length)c.push(...h);else if(s.operator===ti.AND)return[]}return c},a=this._myIndex.records,i={},o=[];return a.forEach(({$:s,i:u})=>{if(xt(s)){let l=n(r,s,u);l.length&&(i[u]||(i[u]={idx:u,item:s,matches:[]},o.push(i[u])),l.forEach(({matches:c})=>{i[u].matches.push(...c)}))}}),o}_searchObjectList(e){const r=_o(e,this.options),{keys:n,records:a}=this._myIndex,i=[];return a.forEach(({$:o,i:s})=>{if(!xt(o))return;let u=[];n.forEach((l,c)=>{u.push(...this._findMatches({key:l,value:o[c],searcher:r}))}),u.length&&i.push({idx:s,item:o,matches:u})}),i}_findMatches({key:e,value:r,searcher:n}){if(!xt(r))return[];let a=[];if(er(r))r.forEach(({v:i,i:o,n:s})=>{if(!xt(i))return;const{isMatch:u,score:l,indices:c}=n.searchIn(i);u&&a.push({score:l,key:e,value:i,idx:o,norm:s,indices:c})});else{const{v:i,n:o}=r,{isMatch:s,score:u,indices:l}=n.searchIn(i);s&&a.push({score:u,key:e,value:i,norm:o,indices:l})}return a}}va.version="6.5.3";va.createIndex=$f;va.parseIndex=c1;va.config=Ce;va.parseQuery=Wf;S1(_1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _t=function(){return _t=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_t.apply(this,arguments)},P1=function(){function t(e){this.options=e,this.listeners={}}return t.prototype.on=function(e,r){var n=this.listeners[e]||[];this.listeners[e]=n.concat([r])},t.prototype.triggerEvent=function(e,r){var n=this,a=this.listeners[e]||[];a.forEach(function(i){return i({target:n,event:r})})},t}(),dn;(function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"})(dn||(dn={}));var O1=function(){function t(){this.notifications=[]}return t.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,dn.Add,this.notifications)},t.prototype.splice=function(e,r){var n=this.notifications.splice(e,r)[0];return this.updateFn(n,dn.Remove,this.notifications),n},t.prototype.indexOf=function(e){return this.notifications.indexOf(e)},t.prototype.onUpdate=function(e){this.updateFn=e},t}(),lr;(function(t){t.Dismiss="dismiss",t.Click="click"})(lr||(lr={}));var ll={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},L1=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),r=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(r),document.body.appendChild(e),this.container=r,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(e,r){var n;this.events=_t(_t({},this.events),(n={},n[e]=r,n))},t.prototype.update=function(e,r){r===dn.Add?this.addNotification(e):r===dn.Remove&&this.removeNotification(e)},t.prototype.removeNotification=function(e){var r=this,n=this._popRenderedNotification(e),a;if(!!n){a=n.node,a.classList.add("notyf__toast--disappear");var i;a.addEventListener(this.animationEndEventName,i=function(o){o.target===a&&(a.removeEventListener(r.animationEndEventName,i),r.container.removeChild(a))})}},t.prototype.addNotification=function(e){var r=this._renderNotification(e);this.notifications.push({notification:e,node:r}),this._announce(e.options.message||"Notification")},t.prototype._renderNotification=function(e){var r,n=this._buildNotificationCard(e),a=e.options.className;return a&&(r=n.classList).add.apply(r,a.split(" ")),this.container.appendChild(n),n},t.prototype._popRenderedNotification=function(e){for(var r=-1,n=0;n<this.notifications.length&&r<0;n++)this.notifications[n].notification===e&&(r=n);if(r!==-1)return this.notifications.splice(r,1)[0]},t.prototype.getXPosition=function(e){var r;return((r=e==null?void 0:e.position)===null||r===void 0?void 0:r.x)||"right"},t.prototype.getYPosition=function(e){var r;return((r=e==null?void 0:e.position)===null||r===void 0?void 0:r.y)||"bottom"},t.prototype.adjustContainerAlignment=function(e){var r=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],a=this.container.style;a.setProperty("justify-content",n),a.setProperty("align-items",r)},t.prototype._buildNotificationCard=function(e){var r=this,n=e.options,a=n.icon;this.adjustContainerAlignment(n);var i=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),s=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),u=this._createHTMLElement({tagName:"div",className:"notyf__message"});u.innerHTML=n.message||"";var l=n.background||n.backgroundColor;if(a){var c=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof a=="string"||a instanceof String)&&(c.innerHTML=new String(a).valueOf()),typeof a=="object"){var f=a.tagName,d=f===void 0?"i":f,v=a.className,h=a.text,p=a.color,m=p===void 0?l:p,g=this._createHTMLElement({tagName:d,className:v,text:h});m&&(g.style.color=m),c.appendChild(g)}s.appendChild(c)}if(s.appendChild(u),i.appendChild(s),l&&(n.ripple?(o.style.background=l,i.appendChild(o)):i.style.background=l),n.dismissible){var b=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),w=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});b.appendChild(w),s.appendChild(b),i.classList.add("notyf__toast--dismissible"),w.addEventListener("click",function(_){var E,x;(x=(E=r.events)[lr.Dismiss])===null||x===void 0||x.call(E,{target:e,event:_}),_.stopPropagation()})}i.addEventListener("click",function(_){var E,x;return(x=(E=r.events)[lr.Click])===null||x===void 0?void 0:x.call(E,{target:e,event:_})});var y=this.getYPosition(n)==="top"?"upper":"lower";return i.classList.add("notyf__toast--"+y),i},t.prototype._createHTMLElement=function(e){var r=e.tagName,n=e.className,a=e.text,i=document.createElement(r);return n&&(i.className=n),i.textContent=a||null,i},t.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},t.prototype._announce=function(e){var r=this;this.a11yContainer.textContent="",setTimeout(function(){r.a11yContainer.textContent=e},100)},t.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),r={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},n;for(n in r)if(e.style[n]!==void 0)return r[n];return"animationend"},t}(),q1=function(){function t(e){var r=this;this.dismiss=this._removeNotification,this.notifications=new O1,this.view=new L1;var n=this.registerTypes(e);this.options=_t(_t({},ll),e),this.options.types=n,this.notifications.onUpdate(function(a,i){return r.view.update(a,i)}),this.view.on(lr.Dismiss,function(a){var i=a.target,o=a.event;r._removeNotification(i),i.triggerEvent(lr.Dismiss,o)}),this.view.on(lr.Click,function(a){var i=a.target,o=a.event;return i.triggerEvent(lr.Click,o)})}return t.prototype.error=function(e){var r=this.normalizeOptions("error",e);return this.open(r)},t.prototype.success=function(e){var r=this.normalizeOptions("success",e);return this.open(r)},t.prototype.open=function(e){var r=this.options.types.find(function(i){var o=i.type;return o===e.type})||{},n=_t(_t({},r),e);this.assignProps(["ripple","position","dismissible"],n);var a=new P1(n);return this._pushNotification(a),a},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(e,r){var n=this;e.forEach(function(a){r[a]=r[a]==null?n.options[a]:r[a]})},t.prototype._pushNotification=function(e){var r=this;this.notifications.push(e);var n=e.options.duration!==void 0?e.options.duration:this.options.duration;n&&setTimeout(function(){return r._removeNotification(e)},n)},t.prototype._removeNotification=function(e){var r=this.notifications.indexOf(e);r!==-1&&this.notifications.splice(r,1)},t.prototype.normalizeOptions=function(e,r){var n={type:e};return typeof r=="string"?n.message=r:typeof r=="object"&&(n=_t(_t({},n),r)),n},t.prototype.registerTypes=function(e){var r=(e&&e.types||[]).slice(),n=ll.types.map(function(a){var i=-1;r.forEach(function(s,u){s.type===a.type&&(i=u)});var o=i!==-1?r.splice(i,1)[0]:{};return _t(_t({},a),o)});return n.concat(r)},t}(),Gf={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Ke,function(){var r=function(){function n(v){return o.appendChild(v.dom),v}function a(v){for(var h=0;h<o.children.length;h++)o.children[h].style.display=h===v?"block":"none";i=v}var i=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(v){v.preventDefault(),a(++i%o.children.length)},!1);var s=(performance||Date).now(),u=s,l=0,c=n(new r.Panel("FPS","#0ff","#002")),f=n(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=n(new r.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:o,addPanel:n,showPanel:a,begin:function(){s=(performance||Date).now()},end:function(){l++;var v=(performance||Date).now();if(f.update(v-s,200),v>u+1e3&&(c.update(1e3*l/(v-u),100),u=v,l=0,d)){var h=performance.memory;d.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return v},update:function(){s=this.end()},domElement:o,setMode:a}};return r.Panel=function(n,a,i){var o=1/0,s=0,u=Math.round,l=u(window.devicePixelRatio||1),c=80*l,f=48*l,d=3*l,v=2*l,h=3*l,p=15*l,m=74*l,g=30*l,b=document.createElement("canvas");b.width=c,b.height=f,b.style.cssText="width:80px;height:48px";var w=b.getContext("2d");return w.font="bold "+9*l+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=i,w.fillRect(0,0,c,f),w.fillStyle=a,w.fillText(n,d,v),w.fillRect(h,p,m,g),w.fillStyle=i,w.globalAlpha=.9,w.fillRect(h,p,m,g),{dom:b,update:function(y,_){o=Math.min(o,y),s=Math.max(s,y),w.fillStyle=i,w.globalAlpha=1,w.fillRect(0,0,c,p),w.fillStyle=a,w.fillText(u(y)+" "+n+" ("+u(o)+"-"+u(s)+")",d,v),w.drawImage(b,h+l,p,m-l,g,h,p,m-l,g),w.fillRect(h+m-l,p,l,g),w.fillStyle=i,w.globalAlpha=.9,w.fillRect(h+m-l,p,l,u((1-y/_)*g))}}},r})})(Gf);var W1=Gf.exports;export{va as F,H1 as G,q1 as N,N1 as S,ch as a,F1 as b,z1 as c,$1 as d,W1 as e,ur as h,R1 as l,V1 as s,Si as t};
