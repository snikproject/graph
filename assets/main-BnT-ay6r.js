var h0=Object.defineProperty;var v0=(t,e,r)=>e in t?h0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var At=(t,e,r)=>v0(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function qi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Es={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var p0=Es.exports,Sd;function g0(){return Sd||(Sd=1,(function(t){(function(e,r){t.exports=e.document?r(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:p0,function(e,r){var n=[],i=Object.getPrototypeOf,a=n.slice,o=n.flat?function(d){return n.flat.call(d)}:function(d){return n.concat.apply([],d)},s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,v=f.toString,g=v.call(Object),h={},m=function(y){return typeof y=="function"&&typeof y.nodeType!="number"&&typeof y.item!="function"},w=function(y){return y!=null&&y===y.window},b=e.document,C={type:!0,src:!0,nonce:!0,noModule:!0};function E(d,y,S){S=S||b;var T,_,D=S.createElement("script");if(D.text=d,y)for(T in C)_=y[T]||y.getAttribute&&y.getAttribute(T),_&&D.setAttribute(T,_);S.head.appendChild(D).parentNode.removeChild(D)}function x(d){return d==null?d+"":typeof d=="object"||typeof d=="function"?l[c.call(d)]||"object":typeof d}var k="3.7.1",A=/HTML$/i,p=function(d,y){return new p.fn.init(d,y)};p.fn=p.prototype={jquery:k,constructor:p,length:0,toArray:function(){return a.call(this)},get:function(d){return d==null?a.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var y=p.merge(this.constructor(),d);return y.prevObject=this,y},each:function(d){return p.each(this,d)},map:function(d){return this.pushStack(p.map(this,function(y,S){return d.call(y,S,y)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(d,y){return(y+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(d,y){return y%2}))},eq:function(d){var y=this.length,S=+d+(d<0?y:0);return this.pushStack(S>=0&&S<y?[this[S]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var d,y,S,T,_,D,R=arguments[0]||{},J=1,X=arguments.length,se=!1;for(typeof R=="boolean"&&(se=R,R=arguments[J]||{},J++),typeof R!="object"&&!m(R)&&(R={}),J===X&&(R=this,J--);J<X;J++)if((d=arguments[J])!=null)for(y in d)T=d[y],!(y==="__proto__"||R===T)&&(se&&T&&(p.isPlainObject(T)||(_=Array.isArray(T)))?(S=R[y],_&&!Array.isArray(S)?D=[]:!_&&!p.isPlainObject(S)?D={}:D=S,_=!1,R[y]=p.extend(se,D,T)):T!==void 0&&(R[y]=T));return R},p.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var y,S;return!d||c.call(d)!=="[object Object]"?!1:(y=i(d),y?(S=f.call(y,"constructor")&&y.constructor,typeof S=="function"&&v.call(S)===g):!0)},isEmptyObject:function(d){var y;for(y in d)return!1;return!0},globalEval:function(d,y,S){E(d,{nonce:y&&y.nonce},S)},each:function(d,y){var S,T=0;if(I(d))for(S=d.length;T<S&&y.call(d[T],T,d[T])!==!1;T++);else for(T in d)if(y.call(d[T],T,d[T])===!1)break;return d},text:function(d){var y,S="",T=0,_=d.nodeType;if(!_)for(;y=d[T++];)S+=p.text(y);return _===1||_===11?d.textContent:_===9?d.documentElement.textContent:_===3||_===4?d.nodeValue:S},makeArray:function(d,y){var S=y||[];return d!=null&&(I(Object(d))?p.merge(S,typeof d=="string"?[d]:d):s.call(S,d)),S},inArray:function(d,y,S){return y==null?-1:u.call(y,d,S)},isXMLDoc:function(d){var y=d&&d.namespaceURI,S=d&&(d.ownerDocument||d).documentElement;return!A.test(y||S&&S.nodeName||"HTML")},merge:function(d,y){for(var S=+y.length,T=0,_=d.length;T<S;T++)d[_++]=y[T];return d.length=_,d},grep:function(d,y,S){for(var T,_=[],D=0,R=d.length,J=!S;D<R;D++)T=!y(d[D],D),T!==J&&_.push(d[D]);return _},map:function(d,y,S){var T,_,D=0,R=[];if(I(d))for(T=d.length;D<T;D++)_=y(d[D],D,S),_!=null&&R.push(_);else for(D in d)_=y(d[D],D,S),_!=null&&R.push(_);return o(R)},guid:1,support:h}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,y){l["[object "+y+"]"]=y.toLowerCase()});function I(d){var y=!!d&&"length"in d&&d.length,S=x(d);return m(d)||w(d)?!1:S==="array"||y===0||typeof y=="number"&&y>0&&y-1 in d}function M(d,y){return d.nodeName&&d.nodeName.toLowerCase()===y.toLowerCase()}var B=n.pop,P=n.sort,L=n.splice,O="[\\x20\\t\\r\\n\\f]",N=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");p.contains=function(d,y){var S=y&&y.parentNode;return d===S||!!(S&&S.nodeType===1&&(d.contains?d.contains(S):d.compareDocumentPosition&&d.compareDocumentPosition(S)&16))};var z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function W(d,y){return y?d==="\0"?"ï¿½":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}p.escapeSelector=function(d){return(d+"").replace(z,W)};var q=b,j=s;(function(){var d,y,S,T,_,D=j,R,J,X,se,ye,Ce=p.expando,de=0,De=0,ut=Ko(),mt=Ko(),dt=Ko(),sr=Ko(),Yt=function(U,te){return U===te&&(_=!0),0},sn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",un="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",gt="\\["+O+"*("+un+")(?:"+O+"*([*^$|!~]?=)"+O+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+un+"))|)"+O+"*\\]",bi=":("+un+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+gt+")*)|.*)\\)|)",yt=new RegExp(O+"+","g"),Ut=new RegExp("^"+O+"*,"+O+"*"),Ra=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),Wu=new RegExp(O+"|>"),ln=new RegExp(bi),Na=new RegExp("^"+un+"$"),cn={ID:new RegExp("^#("+un+")"),CLASS:new RegExp("^\\.("+un+")"),TAG:new RegExp("^("+un+"|[*])"),ATTR:new RegExp("^"+gt),PSEUDO:new RegExp("^"+bi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+sn+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},qn=/^(?:input|select|textarea|button)$/i,Vn=/^h\d$/i,zr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Uu=/[+~]/,Tn=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),kn=function(U,te){var fe="0x"+U.slice(1)-65536;return te||(fe<0?String.fromCharCode(fe+65536):String.fromCharCode(fe>>10|55296,fe&1023|56320))},o0=function(){Hn()},s0=Yo(function(U){return U.disabled===!0&&M(U,"fieldset")},{dir:"parentNode",next:"legend"});function u0(){try{return R.activeElement}catch{}}try{D.apply(n=a.call(q.childNodes),q.childNodes),n[q.childNodes.length].nodeType}catch{D={apply:function(te,fe){j.apply(te,a.call(fe))},call:function(te){j.apply(te,a.call(arguments,1))}}}function kt(U,te,fe,pe){var we,Pe,He,Ke,$e,vt,it,ct=te&&te.ownerDocument,pt=te?te.nodeType:9;if(fe=fe||[],typeof U!="string"||!U||pt!==1&&pt!==9&&pt!==11)return fe;if(!pe&&(Hn(te),te=te||R,X)){if(pt!==11&&($e=zr.exec(U)))if(we=$e[1]){if(pt===9)if(He=te.getElementById(we)){if(He.id===we)return D.call(fe,He),fe}else return fe;else if(ct&&(He=ct.getElementById(we))&&kt.contains(te,He)&&He.id===we)return D.call(fe,He),fe}else{if($e[2])return D.apply(fe,te.getElementsByTagName(U)),fe;if((we=$e[3])&&te.getElementsByClassName)return D.apply(fe,te.getElementsByClassName(we)),fe}if(!sr[U+" "]&&(!se||!se.test(U))){if(it=U,ct=te,pt===1&&(Wu.test(U)||Ra.test(U))){for(ct=Uu.test(U)&&Gu(te.parentNode)||te,(ct!=te||!h.scope)&&((Ke=te.getAttribute("id"))?Ke=p.escapeSelector(Ke):te.setAttribute("id",Ke=Ce)),vt=Fa(U),Pe=vt.length;Pe--;)vt[Pe]=(Ke?"#"+Ke:":scope")+" "+Xo(vt[Pe]);it=vt.join(",")}try{return D.apply(fe,ct.querySelectorAll(it)),fe}catch{sr(U,!0)}finally{Ke===Ce&&te.removeAttribute("id")}}}return Ed(U.replace(N,"$1"),te,fe,pe)}function Ko(){var U=[];function te(fe,pe){return U.push(fe+" ")>y.cacheLength&&delete te[U.shift()],te[fe+" "]=pe}return te}function Yr(U){return U[Ce]=!0,U}function Gi(U){var te=R.createElement("fieldset");try{return!!U(te)}catch{return!1}finally{te.parentNode&&te.parentNode.removeChild(te),te=null}}function l0(U){return function(te){return M(te,"input")&&te.type===U}}function c0(U){return function(te){return(M(te,"input")||M(te,"button"))&&te.type===U}}function xd(U){return function(te){return"form"in te?te.parentNode&&te.disabled===!1?"label"in te?"label"in te.parentNode?te.parentNode.disabled===U:te.disabled===U:te.isDisabled===U||te.isDisabled!==!U&&s0(te)===U:te.disabled===U:"label"in te?te.disabled===U:!1}}function wi(U){return Yr(function(te){return te=+te,Yr(function(fe,pe){for(var we,Pe=U([],fe.length,te),He=Pe.length;He--;)fe[we=Pe[He]]&&(fe[we]=!(pe[we]=fe[we]))})})}function Gu(U){return U&&typeof U.getElementsByTagName<"u"&&U}function Hn(U){var te,fe=U?U.ownerDocument||U:q;return fe==R||fe.nodeType!==9||!fe.documentElement||(R=fe,J=R.documentElement,X=!p.isXMLDoc(R),ye=J.matches||J.webkitMatchesSelector||J.msMatchesSelector,J.msMatchesSelector&&q!=R&&(te=R.defaultView)&&te.top!==te&&te.addEventListener("unload",o0),h.getById=Gi(function(pe){return J.appendChild(pe).id=p.expando,!R.getElementsByName||!R.getElementsByName(p.expando).length}),h.disconnectedMatch=Gi(function(pe){return ye.call(pe,"*")}),h.scope=Gi(function(){return R.querySelectorAll(":scope")}),h.cssHas=Gi(function(){try{return R.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),h.getById?(y.filter.ID=function(pe){var we=pe.replace(Tn,kn);return function(Pe){return Pe.getAttribute("id")===we}},y.find.ID=function(pe,we){if(typeof we.getElementById<"u"&&X){var Pe=we.getElementById(pe);return Pe?[Pe]:[]}}):(y.filter.ID=function(pe){var we=pe.replace(Tn,kn);return function(Pe){var He=typeof Pe.getAttributeNode<"u"&&Pe.getAttributeNode("id");return He&&He.value===we}},y.find.ID=function(pe,we){if(typeof we.getElementById<"u"&&X){var Pe,He,Ke,$e=we.getElementById(pe);if($e){if(Pe=$e.getAttributeNode("id"),Pe&&Pe.value===pe)return[$e];for(Ke=we.getElementsByName(pe),He=0;$e=Ke[He++];)if(Pe=$e.getAttributeNode("id"),Pe&&Pe.value===pe)return[$e]}return[]}}),y.find.TAG=function(pe,we){return typeof we.getElementsByTagName<"u"?we.getElementsByTagName(pe):we.querySelectorAll(pe)},y.find.CLASS=function(pe,we){if(typeof we.getElementsByClassName<"u"&&X)return we.getElementsByClassName(pe)},se=[],Gi(function(pe){var we;J.appendChild(pe).innerHTML="<a id='"+Ce+"' href='' disabled='disabled'></a><select id='"+Ce+"-\r\\' disabled='disabled'><option selected=''></option></select>",pe.querySelectorAll("[selected]").length||se.push("\\["+O+"*(?:value|"+sn+")"),pe.querySelectorAll("[id~="+Ce+"-]").length||se.push("~="),pe.querySelectorAll("a#"+Ce+"+*").length||se.push(".#.+[+~]"),pe.querySelectorAll(":checked").length||se.push(":checked"),we=R.createElement("input"),we.setAttribute("type","hidden"),pe.appendChild(we).setAttribute("name","D"),J.appendChild(pe).disabled=!0,pe.querySelectorAll(":disabled").length!==2&&se.push(":enabled",":disabled"),we=R.createElement("input"),we.setAttribute("name",""),pe.appendChild(we),pe.querySelectorAll("[name='']").length||se.push("\\["+O+"*name"+O+"*="+O+`*(?:''|"")`)}),h.cssHas||se.push(":has"),se=se.length&&new RegExp(se.join("|")),Yt=function(pe,we){if(pe===we)return _=!0,0;var Pe=!pe.compareDocumentPosition-!we.compareDocumentPosition;return Pe||(Pe=(pe.ownerDocument||pe)==(we.ownerDocument||we)?pe.compareDocumentPosition(we):1,Pe&1||!h.sortDetached&&we.compareDocumentPosition(pe)===Pe?pe===R||pe.ownerDocument==q&&kt.contains(q,pe)?-1:we===R||we.ownerDocument==q&&kt.contains(q,we)?1:T?u.call(T,pe)-u.call(T,we):0:Pe&4?-1:1)}),R}kt.matches=function(U,te){return kt(U,null,null,te)},kt.matchesSelector=function(U,te){if(Hn(U),X&&!sr[te+" "]&&(!se||!se.test(te)))try{var fe=ye.call(U,te);if(fe||h.disconnectedMatch||U.document&&U.document.nodeType!==11)return fe}catch{sr(te,!0)}return kt(te,R,null,[U]).length>0},kt.contains=function(U,te){return(U.ownerDocument||U)!=R&&Hn(U),p.contains(U,te)},kt.attr=function(U,te){(U.ownerDocument||U)!=R&&Hn(U);var fe=y.attrHandle[te.toLowerCase()],pe=fe&&f.call(y.attrHandle,te.toLowerCase())?fe(U,te,!X):void 0;return pe!==void 0?pe:U.getAttribute(te)},kt.error=function(U){throw new Error("Syntax error, unrecognized expression: "+U)},p.uniqueSort=function(U){var te,fe=[],pe=0,we=0;if(_=!h.sortStable,T=!h.sortStable&&a.call(U,0),P.call(U,Yt),_){for(;te=U[we++];)te===U[we]&&(pe=fe.push(we));for(;pe--;)L.call(U,fe[pe],1)}return T=null,U},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(a.apply(this)))},y=p.expr={cacheLength:50,createPseudo:Yr,match:cn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(U){return U[1]=U[1].replace(Tn,kn),U[3]=(U[3]||U[4]||U[5]||"").replace(Tn,kn),U[2]==="~="&&(U[3]=" "+U[3]+" "),U.slice(0,4)},CHILD:function(U){return U[1]=U[1].toLowerCase(),U[1].slice(0,3)==="nth"?(U[3]||kt.error(U[0]),U[4]=+(U[4]?U[5]+(U[6]||1):2*(U[3]==="even"||U[3]==="odd")),U[5]=+(U[7]+U[8]||U[3]==="odd")):U[3]&&kt.error(U[0]),U},PSEUDO:function(U){var te,fe=!U[6]&&U[2];return cn.CHILD.test(U[0])?null:(U[3]?U[2]=U[4]||U[5]||"":fe&&ln.test(fe)&&(te=Fa(fe,!0))&&(te=fe.indexOf(")",fe.length-te)-fe.length)&&(U[0]=U[0].slice(0,te),U[2]=fe.slice(0,te)),U.slice(0,3))}},filter:{TAG:function(U){var te=U.replace(Tn,kn).toLowerCase();return U==="*"?function(){return!0}:function(fe){return M(fe,te)}},CLASS:function(U){var te=ut[U+" "];return te||(te=new RegExp("(^|"+O+")"+U+"("+O+"|$)"))&&ut(U,function(fe){return te.test(typeof fe.className=="string"&&fe.className||typeof fe.getAttribute<"u"&&fe.getAttribute("class")||"")})},ATTR:function(U,te,fe){return function(pe){var we=kt.attr(pe,U);return we==null?te==="!=":te?(we+="",te==="="?we===fe:te==="!="?we!==fe:te==="^="?fe&&we.indexOf(fe)===0:te==="*="?fe&&we.indexOf(fe)>-1:te==="$="?fe&&we.slice(-fe.length)===fe:te==="~="?(" "+we.replace(yt," ")+" ").indexOf(fe)>-1:te==="|="?we===fe||we.slice(0,fe.length+1)===fe+"-":!1):!0}},CHILD:function(U,te,fe,pe,we){var Pe=U.slice(0,3)!=="nth",He=U.slice(-4)!=="last",Ke=te==="of-type";return pe===1&&we===0?function($e){return!!$e.parentNode}:function($e,vt,it){var ct,pt,Je,It,kr,gr=Pe!==He?"nextSibling":"previousSibling",qr=$e.parentNode,fn=Ke&&$e.nodeName.toLowerCase(),ji=!it&&!Ke,Cr=!1;if(qr){if(Pe){for(;gr;){for(Je=$e;Je=Je[gr];)if(Ke?M(Je,fn):Je.nodeType===1)return!1;kr=gr=U==="only"&&!kr&&"nextSibling"}return!0}if(kr=[He?qr.firstChild:qr.lastChild],He&&ji){for(pt=qr[Ce]||(qr[Ce]={}),ct=pt[U]||[],It=ct[0]===de&&ct[1],Cr=It&&ct[2],Je=It&&qr.childNodes[It];Je=++It&&Je&&Je[gr]||(Cr=It=0)||kr.pop();)if(Je.nodeType===1&&++Cr&&Je===$e){pt[U]=[de,It,Cr];break}}else if(ji&&(pt=$e[Ce]||($e[Ce]={}),ct=pt[U]||[],It=ct[0]===de&&ct[1],Cr=It),Cr===!1)for(;(Je=++It&&Je&&Je[gr]||(Cr=It=0)||kr.pop())&&!((Ke?M(Je,fn):Je.nodeType===1)&&++Cr&&(ji&&(pt=Je[Ce]||(Je[Ce]={}),pt[U]=[de,Cr]),Je===$e)););return Cr-=we,Cr===pe||Cr%pe===0&&Cr/pe>=0}}},PSEUDO:function(U,te){var fe,pe=y.pseudos[U]||y.setFilters[U.toLowerCase()]||kt.error("unsupported pseudo: "+U);return pe[Ce]?pe(te):pe.length>1?(fe=[U,U,"",te],y.setFilters.hasOwnProperty(U.toLowerCase())?Yr(function(we,Pe){for(var He,Ke=pe(we,te),$e=Ke.length;$e--;)He=u.call(we,Ke[$e]),we[He]=!(Pe[He]=Ke[$e])}):function(we){return pe(we,0,fe)}):pe}},pseudos:{not:Yr(function(U){var te=[],fe=[],pe=Yu(U.replace(N,"$1"));return pe[Ce]?Yr(function(we,Pe,He,Ke){for(var $e,vt=pe(we,null,Ke,[]),it=we.length;it--;)($e=vt[it])&&(we[it]=!(Pe[it]=$e))}):function(we,Pe,He){return te[0]=we,pe(te,null,He,fe),te[0]=null,!fe.pop()}}),has:Yr(function(U){return function(te){return kt(U,te).length>0}}),contains:Yr(function(U){return U=U.replace(Tn,kn),function(te){return(te.textContent||p.text(te)).indexOf(U)>-1}}),lang:Yr(function(U){return Na.test(U||"")||kt.error("unsupported lang: "+U),U=U.replace(Tn,kn).toLowerCase(),function(te){var fe;do if(fe=X?te.lang:te.getAttribute("xml:lang")||te.getAttribute("lang"))return fe=fe.toLowerCase(),fe===U||fe.indexOf(U+"-")===0;while((te=te.parentNode)&&te.nodeType===1);return!1}}),target:function(U){var te=e.location&&e.location.hash;return te&&te.slice(1)===U.id},root:function(U){return U===J},focus:function(U){return U===u0()&&R.hasFocus()&&!!(U.type||U.href||~U.tabIndex)},enabled:xd(!1),disabled:xd(!0),checked:function(U){return M(U,"input")&&!!U.checked||M(U,"option")&&!!U.selected},selected:function(U){return U.parentNode&&U.parentNode.selectedIndex,U.selected===!0},empty:function(U){for(U=U.firstChild;U;U=U.nextSibling)if(U.nodeType<6)return!1;return!0},parent:function(U){return!y.pseudos.empty(U)},header:function(U){return Vn.test(U.nodeName)},input:function(U){return qn.test(U.nodeName)},button:function(U){return M(U,"input")&&U.type==="button"||M(U,"button")},text:function(U){var te;return M(U,"input")&&U.type==="text"&&((te=U.getAttribute("type"))==null||te.toLowerCase()==="text")},first:wi(function(){return[0]}),last:wi(function(U,te){return[te-1]}),eq:wi(function(U,te,fe){return[fe<0?fe+te:fe]}),even:wi(function(U,te){for(var fe=0;fe<te;fe+=2)U.push(fe);return U}),odd:wi(function(U,te){for(var fe=1;fe<te;fe+=2)U.push(fe);return U}),lt:wi(function(U,te,fe){var pe;for(fe<0?pe=fe+te:fe>te?pe=te:pe=fe;--pe>=0;)U.push(pe);return U}),gt:wi(function(U,te,fe){for(var pe=fe<0?fe+te:fe;++pe<te;)U.push(pe);return U})}},y.pseudos.nth=y.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[d]=l0(d);for(d in{submit:!0,reset:!0})y.pseudos[d]=c0(d);function Cd(){}Cd.prototype=y.filters=y.pseudos,y.setFilters=new Cd;function Fa(U,te){var fe,pe,we,Pe,He,Ke,$e,vt=mt[U+" "];if(vt)return te?0:vt.slice(0);for(He=U,Ke=[],$e=y.preFilter;He;){(!fe||(pe=Ut.exec(He)))&&(pe&&(He=He.slice(pe[0].length)||He),Ke.push(we=[])),fe=!1,(pe=Ra.exec(He))&&(fe=pe.shift(),we.push({value:fe,type:pe[0].replace(N," ")}),He=He.slice(fe.length));for(Pe in y.filter)(pe=cn[Pe].exec(He))&&(!$e[Pe]||(pe=$e[Pe](pe)))&&(fe=pe.shift(),we.push({value:fe,type:Pe,matches:pe}),He=He.slice(fe.length));if(!fe)break}return te?He.length:He?kt.error(U):mt(U,Ke).slice(0)}function Xo(U){for(var te=0,fe=U.length,pe="";te<fe;te++)pe+=U[te].value;return pe}function Yo(U,te,fe){var pe=te.dir,we=te.next,Pe=we||pe,He=fe&&Pe==="parentNode",Ke=De++;return te.first?function($e,vt,it){for(;$e=$e[pe];)if($e.nodeType===1||He)return U($e,vt,it);return!1}:function($e,vt,it){var ct,pt,Je=[de,Ke];if(it){for(;$e=$e[pe];)if(($e.nodeType===1||He)&&U($e,vt,it))return!0}else for(;$e=$e[pe];)if($e.nodeType===1||He)if(pt=$e[Ce]||($e[Ce]={}),we&&M($e,we))$e=$e[pe]||$e;else{if((ct=pt[Pe])&&ct[0]===de&&ct[1]===Ke)return Je[2]=ct[2];if(pt[Pe]=Je,Je[2]=U($e,vt,it))return!0}return!1}}function ju(U){return U.length>1?function(te,fe,pe){for(var we=U.length;we--;)if(!U[we](te,fe,pe))return!1;return!0}:U[0]}function f0(U,te,fe){for(var pe=0,we=te.length;pe<we;pe++)kt(U,te[pe],fe);return fe}function Zo(U,te,fe,pe,we){for(var Pe,He=[],Ke=0,$e=U.length,vt=te!=null;Ke<$e;Ke++)(Pe=U[Ke])&&(!fe||fe(Pe,pe,we))&&(He.push(Pe),vt&&te.push(Ke));return He}function Ku(U,te,fe,pe,we,Pe){return pe&&!pe[Ce]&&(pe=Ku(pe)),we&&!we[Ce]&&(we=Ku(we,Pe)),Yr(function(He,Ke,$e,vt){var it,ct,pt,Je,It=[],kr=[],gr=Ke.length,qr=He||f0(te||"*",$e.nodeType?[$e]:$e,[]),fn=U&&(He||!te)?Zo(qr,It,U,$e,vt):qr;if(fe?(Je=we||(He?U:gr||pe)?[]:Ke,fe(fn,Je,$e,vt)):Je=fn,pe)for(it=Zo(Je,kr),pe(it,[],$e,vt),ct=it.length;ct--;)(pt=it[ct])&&(Je[kr[ct]]=!(fn[kr[ct]]=pt));if(He){if(we||U){if(we){for(it=[],ct=Je.length;ct--;)(pt=Je[ct])&&it.push(fn[ct]=pt);we(null,Je=[],it,vt)}for(ct=Je.length;ct--;)(pt=Je[ct])&&(it=we?u.call(He,pt):It[ct])>-1&&(He[it]=!(Ke[it]=pt))}}else Je=Zo(Je===Ke?Je.splice(gr,Je.length):Je),we?we(null,Ke,Je,vt):D.apply(Ke,Je)})}function Xu(U){for(var te,fe,pe,we=U.length,Pe=y.relative[U[0].type],He=Pe||y.relative[" "],Ke=Pe?1:0,$e=Yo(function(ct){return ct===te},He,!0),vt=Yo(function(ct){return u.call(te,ct)>-1},He,!0),it=[function(ct,pt,Je){var It=!Pe&&(Je||pt!=S)||((te=pt).nodeType?$e(ct,pt,Je):vt(ct,pt,Je));return te=null,It}];Ke<we;Ke++)if(fe=y.relative[U[Ke].type])it=[Yo(ju(it),fe)];else{if(fe=y.filter[U[Ke].type].apply(null,U[Ke].matches),fe[Ce]){for(pe=++Ke;pe<we&&!y.relative[U[pe].type];pe++);return Ku(Ke>1&&ju(it),Ke>1&&Xo(U.slice(0,Ke-1).concat({value:U[Ke-2].type===" "?"*":""})).replace(N,"$1"),fe,Ke<pe&&Xu(U.slice(Ke,pe)),pe<we&&Xu(U=U.slice(pe)),pe<we&&Xo(U))}it.push(fe)}return ju(it)}function d0(U,te){var fe=te.length>0,pe=U.length>0,we=function(Pe,He,Ke,$e,vt){var it,ct,pt,Je=0,It="0",kr=Pe&&[],gr=[],qr=S,fn=Pe||pe&&y.find.TAG("*",vt),ji=de+=qr==null?1:Math.random()||.1,Cr=fn.length;for(vt&&(S=He==R||He||vt);It!==Cr&&(it=fn[It])!=null;It++){if(pe&&it){for(ct=0,!He&&it.ownerDocument!=R&&(Hn(it),Ke=!X);pt=U[ct++];)if(pt(it,He||R,Ke)){D.call($e,it);break}vt&&(de=ji)}fe&&((it=!pt&&it)&&Je--,Pe&&kr.push(it))}if(Je+=It,fe&&It!==Je){for(ct=0;pt=te[ct++];)pt(kr,gr,He,Ke);if(Pe){if(Je>0)for(;It--;)kr[It]||gr[It]||(gr[It]=B.call($e));gr=Zo(gr)}D.apply($e,gr),vt&&!Pe&&gr.length>0&&Je+te.length>1&&p.uniqueSort($e)}return vt&&(de=ji,S=qr),kr};return fe?Yr(we):we}function Yu(U,te){var fe,pe=[],we=[],Pe=dt[U+" "];if(!Pe){for(te||(te=Fa(U)),fe=te.length;fe--;)Pe=Xu(te[fe]),Pe[Ce]?pe.push(Pe):we.push(Pe);Pe=dt(U,d0(we,pe)),Pe.selector=U}return Pe}function Ed(U,te,fe,pe){var we,Pe,He,Ke,$e,vt=typeof U=="function"&&U,it=!pe&&Fa(U=vt.selector||U);if(fe=fe||[],it.length===1){if(Pe=it[0]=it[0].slice(0),Pe.length>2&&(He=Pe[0]).type==="ID"&&te.nodeType===9&&X&&y.relative[Pe[1].type]){if(te=(y.find.ID(He.matches[0].replace(Tn,kn),te)||[])[0],te)vt&&(te=te.parentNode);else return fe;U=U.slice(Pe.shift().value.length)}for(we=cn.needsContext.test(U)?0:Pe.length;we--&&(He=Pe[we],!y.relative[Ke=He.type]);)if(($e=y.find[Ke])&&(pe=$e(He.matches[0].replace(Tn,kn),Uu.test(Pe[0].type)&&Gu(te.parentNode)||te))){if(Pe.splice(we,1),U=pe.length&&Xo(Pe),!U)return D.apply(fe,pe),fe;break}}return(vt||Yu(U,it))(pe,te,!X,fe,!te||Uu.test(U)&&Gu(te.parentNode)||te),fe}h.sortStable=Ce.split("").sort(Yt).join("")===Ce,Hn(),h.sortDetached=Gi(function(U){return U.compareDocumentPosition(R.createElement("fieldset"))&1}),p.find=kt,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,kt.compile=Yu,kt.select=Ed,kt.setDocument=Hn,kt.tokenize=Fa,kt.escape=p.escapeSelector,kt.getText=p.text,kt.isXML=p.isXMLDoc,kt.selectors=p.expr,kt.support=p.support,kt.uniqueSort=p.uniqueSort})();var ie=function(d,y,S){for(var T=[],_=S!==void 0;(d=d[y])&&d.nodeType!==9;)if(d.nodeType===1){if(_&&p(d).is(S))break;T.push(d)}return T},ne=function(d,y){for(var S=[];d;d=d.nextSibling)d.nodeType===1&&d!==y&&S.push(d);return S},Y=p.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function G(d,y,S){return m(y)?p.grep(d,function(T,_){return!!y.call(T,_,T)!==S}):y.nodeType?p.grep(d,function(T){return T===y!==S}):typeof y!="string"?p.grep(d,function(T){return u.call(y,T)>-1!==S}):p.filter(y,d,S)}p.filter=function(d,y,S){var T=y[0];return S&&(d=":not("+d+")"),y.length===1&&T.nodeType===1?p.find.matchesSelector(T,d)?[T]:[]:p.find.matches(d,p.grep(y,function(_){return _.nodeType===1}))},p.fn.extend({find:function(d){var y,S,T=this.length,_=this;if(typeof d!="string")return this.pushStack(p(d).filter(function(){for(y=0;y<T;y++)if(p.contains(_[y],this))return!0}));for(S=this.pushStack([]),y=0;y<T;y++)p.find(d,_[y],S);return T>1?p.uniqueSort(S):S},filter:function(d){return this.pushStack(G(this,d||[],!1))},not:function(d){return this.pushStack(G(this,d||[],!0))},is:function(d){return!!G(this,typeof d=="string"&&Y.test(d)?p(d):d||[],!1).length}});var K,V=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Q=p.fn.init=function(d,y,S){var T,_;if(!d)return this;if(S=S||K,typeof d=="string")if(d[0]==="<"&&d[d.length-1]===">"&&d.length>=3?T=[null,d,null]:T=V.exec(d),T&&(T[1]||!y))if(T[1]){if(y=y instanceof p?y[0]:y,p.merge(this,p.parseHTML(T[1],y&&y.nodeType?y.ownerDocument||y:b,!0)),H.test(T[1])&&p.isPlainObject(y))for(T in y)m(this[T])?this[T](y[T]):this.attr(T,y[T]);return this}else return _=b.getElementById(T[2]),_&&(this[0]=_,this.length=1),this;else return!y||y.jquery?(y||S).find(d):this.constructor(y).find(d);else{if(d.nodeType)return this[0]=d,this.length=1,this;if(m(d))return S.ready!==void 0?S.ready(d):d(p)}return p.makeArray(d,this)};Q.prototype=p.fn,K=p(b);var oe=/^(?:parents|prev(?:Until|All))/,he={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(d){var y=p(d,this),S=y.length;return this.filter(function(){for(var T=0;T<S;T++)if(p.contains(this,y[T]))return!0})},closest:function(d,y){var S,T=0,_=this.length,D=[],R=typeof d!="string"&&p(d);if(!Y.test(d)){for(;T<_;T++)for(S=this[T];S&&S!==y;S=S.parentNode)if(S.nodeType<11&&(R?R.index(S)>-1:S.nodeType===1&&p.find.matchesSelector(S,d))){D.push(S);break}}return this.pushStack(D.length>1?p.uniqueSort(D):D)},index:function(d){return d?typeof d=="string"?u.call(p(d),this[0]):u.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,y){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(d,y))))},addBack:function(d){return this.add(d==null?this.prevObject:this.prevObject.filter(d))}});function re(d,y){for(;(d=d[y])&&d.nodeType!==1;);return d}p.each({parent:function(d){var y=d.parentNode;return y&&y.nodeType!==11?y:null},parents:function(d){return ie(d,"parentNode")},parentsUntil:function(d,y,S){return ie(d,"parentNode",S)},next:function(d){return re(d,"nextSibling")},prev:function(d){return re(d,"previousSibling")},nextAll:function(d){return ie(d,"nextSibling")},prevAll:function(d){return ie(d,"previousSibling")},nextUntil:function(d,y,S){return ie(d,"nextSibling",S)},prevUntil:function(d,y,S){return ie(d,"previousSibling",S)},siblings:function(d){return ne((d.parentNode||{}).firstChild,d)},children:function(d){return ne(d.firstChild)},contents:function(d){return d.contentDocument!=null&&i(d.contentDocument)?d.contentDocument:(M(d,"template")&&(d=d.content||d),p.merge([],d.childNodes))}},function(d,y){p.fn[d]=function(S,T){var _=p.map(this,y,S);return d.slice(-5)!=="Until"&&(T=S),T&&typeof T=="string"&&(_=p.filter(T,_)),this.length>1&&(he[d]||p.uniqueSort(_),oe.test(d)&&_.reverse()),this.pushStack(_)}});var Z=/[^\x20\t\r\n\f]+/g;function ue(d){var y={};return p.each(d.match(Z)||[],function(S,T){y[T]=!0}),y}p.Callbacks=function(d){d=typeof d=="string"?ue(d):p.extend({},d);var y,S,T,_,D=[],R=[],J=-1,X=function(){for(_=_||d.once,T=y=!0;R.length;J=-1)for(S=R.shift();++J<D.length;)D[J].apply(S[0],S[1])===!1&&d.stopOnFalse&&(J=D.length,S=!1);d.memory||(S=!1),y=!1,_&&(S?D=[]:D="")},se={add:function(){return D&&(S&&!y&&(J=D.length-1,R.push(S)),(function ye(Ce){p.each(Ce,function(de,De){m(De)?(!d.unique||!se.has(De))&&D.push(De):De&&De.length&&x(De)!=="string"&&ye(De)})})(arguments),S&&!y&&X()),this},remove:function(){return p.each(arguments,function(ye,Ce){for(var de;(de=p.inArray(Ce,D,de))>-1;)D.splice(de,1),de<=J&&J--}),this},has:function(ye){return ye?p.inArray(ye,D)>-1:D.length>0},empty:function(){return D&&(D=[]),this},disable:function(){return _=R=[],D=S="",this},disabled:function(){return!D},lock:function(){return _=R=[],!S&&!y&&(D=S=""),this},locked:function(){return!!_},fireWith:function(ye,Ce){return _||(Ce=Ce||[],Ce=[ye,Ce.slice?Ce.slice():Ce],R.push(Ce),y||X()),this},fire:function(){return se.fireWith(this,arguments),this},fired:function(){return!!T}};return se};function ae(d){return d}function me(d){throw d}function Ae(d,y,S,T){var _;try{d&&m(_=d.promise)?_.call(d).done(y).fail(S):d&&m(_=d.then)?_.call(d,y,S):y.apply(void 0,[d].slice(T))}catch(D){S.apply(void 0,[D])}}p.extend({Deferred:function(d){var y=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],S="pending",T={state:function(){return S},always:function(){return _.done(arguments).fail(arguments),this},catch:function(D){return T.then(null,D)},pipe:function(){var D=arguments;return p.Deferred(function(R){p.each(y,function(J,X){var se=m(D[X[4]])&&D[X[4]];_[X[1]](function(){var ye=se&&se.apply(this,arguments);ye&&m(ye.promise)?ye.promise().progress(R.notify).done(R.resolve).fail(R.reject):R[X[0]+"With"](this,se?[ye]:arguments)})}),D=null}).promise()},then:function(D,R,J){var X=0;function se(ye,Ce,de,De){return function(){var ut=this,mt=arguments,dt=function(){var Yt,sn;if(!(ye<X)){if(Yt=de.apply(ut,mt),Yt===Ce.promise())throw new TypeError("Thenable self-resolution");sn=Yt&&(typeof Yt=="object"||typeof Yt=="function")&&Yt.then,m(sn)?De?sn.call(Yt,se(X,Ce,ae,De),se(X,Ce,me,De)):(X++,sn.call(Yt,se(X,Ce,ae,De),se(X,Ce,me,De),se(X,Ce,ae,Ce.notifyWith))):(de!==ae&&(ut=void 0,mt=[Yt]),(De||Ce.resolveWith)(ut,mt))}},sr=De?dt:function(){try{dt()}catch(Yt){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Yt,sr.error),ye+1>=X&&(de!==me&&(ut=void 0,mt=[Yt]),Ce.rejectWith(ut,mt))}};ye?sr():(p.Deferred.getErrorHook?sr.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(sr.error=p.Deferred.getStackHook()),e.setTimeout(sr))}}return p.Deferred(function(ye){y[0][3].add(se(0,ye,m(J)?J:ae,ye.notifyWith)),y[1][3].add(se(0,ye,m(D)?D:ae)),y[2][3].add(se(0,ye,m(R)?R:me))}).promise()},promise:function(D){return D!=null?p.extend(D,T):T}},_={};return p.each(y,function(D,R){var J=R[2],X=R[5];T[R[1]]=J.add,X&&J.add(function(){S=X},y[3-D][2].disable,y[3-D][3].disable,y[0][2].lock,y[0][3].lock),J.add(R[3].fire),_[R[0]]=function(){return _[R[0]+"With"](this===_?void 0:this,arguments),this},_[R[0]+"With"]=J.fireWith}),T.promise(_),d&&d.call(_,_),_},when:function(d){var y=arguments.length,S=y,T=Array(S),_=a.call(arguments),D=p.Deferred(),R=function(J){return function(X){T[J]=this,_[J]=arguments.length>1?a.call(arguments):X,--y||D.resolveWith(T,_)}};if(y<=1&&(Ae(d,D.done(R(S)).resolve,D.reject,!y),D.state()==="pending"||m(_[S]&&_[S].then)))return D.then();for(;S--;)Ae(_[S],R(S),D.reject);return D.promise()}});var Ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(d,y){e.console&&e.console.warn&&d&&Ve.test(d.name)&&e.console.warn("jQuery.Deferred exception: "+d.message,d.stack,y)},p.readyException=function(d){e.setTimeout(function(){throw d})};var rt=p.Deferred();p.fn.ready=function(d){return rt.then(d).catch(function(y){p.readyException(y)}),this},p.extend({isReady:!1,readyWait:1,ready:function(d){(d===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(d!==!0&&--p.readyWait>0)&&rt.resolveWith(b,[p]))}}),p.ready.then=rt.then;function Le(){b.removeEventListener("DOMContentLoaded",Le),e.removeEventListener("load",Le),p.ready()}b.readyState==="complete"||b.readyState!=="loading"&&!b.documentElement.doScroll?e.setTimeout(p.ready):(b.addEventListener("DOMContentLoaded",Le),e.addEventListener("load",Le));var Ue=function(d,y,S,T,_,D,R){var J=0,X=d.length,se=S==null;if(x(S)==="object"){_=!0;for(J in S)Ue(d,y,J,S[J],!0,D,R)}else if(T!==void 0&&(_=!0,m(T)||(R=!0),se&&(R?(y.call(d,T),y=null):(se=y,y=function(ye,Ce,de){return se.call(p(ye),de)})),y))for(;J<X;J++)y(d[J],S,R?T:T.call(d[J],J,y(d[J],S)));return _?d:se?y.call(d):X?y(d[0],S):D},Ee=/^-ms-/,ge=/-([a-z])/g;function xe(d,y){return y.toUpperCase()}function Te(d){return d.replace(Ee,"ms-").replace(ge,xe)}var Me=function(d){return d.nodeType===1||d.nodeType===9||!+d.nodeType};function ze(){this.expando=p.expando+ze.uid++}ze.uid=1,ze.prototype={cache:function(d){var y=d[this.expando];return y||(y={},Me(d)&&(d.nodeType?d[this.expando]=y:Object.defineProperty(d,this.expando,{value:y,configurable:!0}))),y},set:function(d,y,S){var T,_=this.cache(d);if(typeof y=="string")_[Te(y)]=S;else for(T in y)_[Te(T)]=y[T];return _},get:function(d,y){return y===void 0?this.cache(d):d[this.expando]&&d[this.expando][Te(y)]},access:function(d,y,S){return y===void 0||y&&typeof y=="string"&&S===void 0?this.get(d,y):(this.set(d,y,S),S!==void 0?S:y)},remove:function(d,y){var S,T=d[this.expando];if(T!==void 0){if(y!==void 0)for(Array.isArray(y)?y=y.map(Te):(y=Te(y),y=y in T?[y]:y.match(Z)||[]),S=y.length;S--;)delete T[y[S]];(y===void 0||p.isEmptyObject(T))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var y=d[this.expando];return y!==void 0&&!p.isEmptyObject(y)}};var Se=new ze,Ie=new ze,ot=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,lt=/[A-Z]/g;function Qe(d){return d==="true"?!0:d==="false"?!1:d==="null"?null:d===+d+""?+d:ot.test(d)?JSON.parse(d):d}function Ye(d,y,S){var T;if(S===void 0&&d.nodeType===1)if(T="data-"+y.replace(lt,"-$&").toLowerCase(),S=d.getAttribute(T),typeof S=="string"){try{S=Qe(S)}catch{}Ie.set(d,y,S)}else S=void 0;return S}p.extend({hasData:function(d){return Ie.hasData(d)||Se.hasData(d)},data:function(d,y,S){return Ie.access(d,y,S)},removeData:function(d,y){Ie.remove(d,y)},_data:function(d,y,S){return Se.access(d,y,S)},_removeData:function(d,y){Se.remove(d,y)}}),p.fn.extend({data:function(d,y){var S,T,_,D=this[0],R=D&&D.attributes;if(d===void 0){if(this.length&&(_=Ie.get(D),D.nodeType===1&&!Se.get(D,"hasDataAttrs"))){for(S=R.length;S--;)R[S]&&(T=R[S].name,T.indexOf("data-")===0&&(T=Te(T.slice(5)),Ye(D,T,_[T])));Se.set(D,"hasDataAttrs",!0)}return _}return typeof d=="object"?this.each(function(){Ie.set(this,d)}):Ue(this,function(J){var X;if(D&&J===void 0)return X=Ie.get(D,d),X!==void 0||(X=Ye(D,d),X!==void 0)?X:void 0;this.each(function(){Ie.set(this,d,J)})},null,y,arguments.length>1,null,!0)},removeData:function(d){return this.each(function(){Ie.remove(this,d)})}}),p.extend({queue:function(d,y,S){var T;if(d)return y=(y||"fx")+"queue",T=Se.get(d,y),S&&(!T||Array.isArray(S)?T=Se.access(d,y,p.makeArray(S)):T.push(S)),T||[]},dequeue:function(d,y){y=y||"fx";var S=p.queue(d,y),T=S.length,_=S.shift(),D=p._queueHooks(d,y),R=function(){p.dequeue(d,y)};_==="inprogress"&&(_=S.shift(),T--),_&&(y==="fx"&&S.unshift("inprogress"),delete D.stop,_.call(d,R,D)),!T&&D&&D.empty.fire()},_queueHooks:function(d,y){var S=y+"queueHooks";return Se.get(d,S)||Se.access(d,S,{empty:p.Callbacks("once memory").add(function(){Se.remove(d,[y+"queue",S])})})}}),p.fn.extend({queue:function(d,y){var S=2;return typeof d!="string"&&(y=d,d="fx",S--),arguments.length<S?p.queue(this[0],d):y===void 0?this:this.each(function(){var T=p.queue(this,d,y);p._queueHooks(this,d),d==="fx"&&T[0]!=="inprogress"&&p.dequeue(this,d)})},dequeue:function(d){return this.each(function(){p.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,y){var S,T=1,_=p.Deferred(),D=this,R=this.length,J=function(){--T||_.resolveWith(D,[D])};for(typeof d!="string"&&(y=d,d=void 0),d=d||"fx";R--;)S=Se.get(D[R],d+"queueHooks"),S&&S.empty&&(T++,S.empty.add(J));return J(),_.promise(y)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),F=["Top","Right","Bottom","Left"],$=b.documentElement,ee=function(d){return p.contains(d.ownerDocument,d)},le={composed:!0};$.getRootNode&&(ee=function(d){return p.contains(d.ownerDocument,d)||d.getRootNode(le)===d.ownerDocument});var ce=function(d,y){return d=y||d,d.style.display==="none"||d.style.display===""&&ee(d)&&p.css(d,"display")==="none"};function ke(d,y,S,T){var _,D,R=20,J=T?function(){return T.cur()}:function(){return p.css(d,y,"")},X=J(),se=S&&S[3]||(p.cssNumber[y]?"":"px"),ye=d.nodeType&&(p.cssNumber[y]||se!=="px"&&+X)&&ve.exec(p.css(d,y));if(ye&&ye[3]!==se){for(X=X/2,se=se||ye[3],ye=+X||1;R--;)p.style(d,y,ye+se),(1-D)*(1-(D=J()/X||.5))<=0&&(R=0),ye=ye/D;ye=ye*2,p.style(d,y,ye+se),S=S||[]}return S&&(ye=+ye||+X||0,_=S[1]?ye+(S[1]+1)*S[2]:+S[2],T&&(T.unit=se,T.start=ye,T.end=_)),_}var be={};function qe(d){var y,S=d.ownerDocument,T=d.nodeName,_=be[T];return _||(y=S.body.appendChild(S.createElement(T)),_=p.css(y,"display"),y.parentNode.removeChild(y),_==="none"&&(_="block"),be[T]=_,_)}function Re(d,y){for(var S,T,_=[],D=0,R=d.length;D<R;D++)T=d[D],T.style&&(S=T.style.display,y?(S==="none"&&(_[D]=Se.get(T,"display")||null,_[D]||(T.style.display="")),T.style.display===""&&ce(T)&&(_[D]=qe(T))):S!=="none"&&(_[D]="none",Se.set(T,"display",S)));for(D=0;D<R;D++)_[D]!=null&&(d[D].style.display=_[D]);return d}p.fn.extend({show:function(){return Re(this,!0)},hide:function(){return Re(this)},toggle:function(d){return typeof d=="boolean"?d?this.show():this.hide():this.each(function(){ce(this)?p(this).show():p(this).hide()})}});var je=/^(?:checkbox|radio)$/i,nt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,st=/^$|^module$|\/(?:java|ecma)script/i;(function(){var d=b.createDocumentFragment(),y=d.appendChild(b.createElement("div")),S=b.createElement("input");S.setAttribute("type","radio"),S.setAttribute("checked","checked"),S.setAttribute("name","t"),y.appendChild(S),h.checkClone=y.cloneNode(!0).cloneNode(!0).lastChild.checked,y.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!y.cloneNode(!0).lastChild.defaultValue,y.innerHTML="<option></option>",h.option=!!y.lastChild})();var Ne={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ne.tbody=Ne.tfoot=Ne.colgroup=Ne.caption=Ne.thead,Ne.th=Ne.td,h.option||(Ne.optgroup=Ne.option=[1,"<select multiple='multiple'>","</select>"]);function Xe(d,y){var S;return typeof d.getElementsByTagName<"u"?S=d.getElementsByTagName(y||"*"):typeof d.querySelectorAll<"u"?S=d.querySelectorAll(y||"*"):S=[],y===void 0||y&&M(d,y)?p.merge([d],S):S}function ft(d,y){for(var S=0,T=d.length;S<T;S++)Se.set(d[S],"globalEval",!y||Se.get(y[S],"globalEval"))}var Bt=/<|&#?\w+;/;function Et(d,y,S,T,_){for(var D,R,J,X,se,ye,Ce=y.createDocumentFragment(),de=[],De=0,ut=d.length;De<ut;De++)if(D=d[De],D||D===0)if(x(D)==="object")p.merge(de,D.nodeType?[D]:D);else if(!Bt.test(D))de.push(y.createTextNode(D));else{for(R=R||Ce.appendChild(y.createElement("div")),J=(nt.exec(D)||["",""])[1].toLowerCase(),X=Ne[J]||Ne._default,R.innerHTML=X[1]+p.htmlPrefilter(D)+X[2],ye=X[0];ye--;)R=R.lastChild;p.merge(de,R.childNodes),R=Ce.firstChild,R.textContent=""}for(Ce.textContent="",De=0;D=de[De++];){if(T&&p.inArray(D,T)>-1){_&&_.push(D);continue}if(se=ee(D),R=Xe(Ce.appendChild(D),"script"),se&&ft(R),S)for(ye=0;D=R[ye++];)st.test(D.type||"")&&S.push(D)}return Ce}var tr=/^([^.]*)(?:\.(.+)|)/;function Dt(){return!0}function Ot(){return!1}function zt(d,y,S,T,_,D){var R,J;if(typeof y=="object"){typeof S!="string"&&(T=T||S,S=void 0);for(J in y)zt(d,J,S,T,y[J],D);return d}if(T==null&&_==null?(_=S,T=S=void 0):_==null&&(typeof S=="string"?(_=T,T=void 0):(_=T,T=S,S=void 0)),_===!1)_=Ot;else if(!_)return d;return D===1&&(R=_,_=function(X){return p().off(X),R.apply(this,arguments)},_.guid=R.guid||(R.guid=p.guid++)),d.each(function(){p.event.add(this,y,_,T,S)})}p.event={global:{},add:function(d,y,S,T,_){var D,R,J,X,se,ye,Ce,de,De,ut,mt,dt=Se.get(d);if(Me(d))for(S.handler&&(D=S,S=D.handler,_=D.selector),_&&p.find.matchesSelector($,_),S.guid||(S.guid=p.guid++),(X=dt.events)||(X=dt.events=Object.create(null)),(R=dt.handle)||(R=dt.handle=function(sr){return typeof p<"u"&&p.event.triggered!==sr.type?p.event.dispatch.apply(d,arguments):void 0}),y=(y||"").match(Z)||[""],se=y.length;se--;)J=tr.exec(y[se])||[],De=mt=J[1],ut=(J[2]||"").split(".").sort(),De&&(Ce=p.event.special[De]||{},De=(_?Ce.delegateType:Ce.bindType)||De,Ce=p.event.special[De]||{},ye=p.extend({type:De,origType:mt,data:T,handler:S,guid:S.guid,selector:_,needsContext:_&&p.expr.match.needsContext.test(_),namespace:ut.join(".")},D),(de=X[De])||(de=X[De]=[],de.delegateCount=0,(!Ce.setup||Ce.setup.call(d,T,ut,R)===!1)&&d.addEventListener&&d.addEventListener(De,R)),Ce.add&&(Ce.add.call(d,ye),ye.handler.guid||(ye.handler.guid=S.guid)),_?de.splice(de.delegateCount++,0,ye):de.push(ye),p.event.global[De]=!0)},remove:function(d,y,S,T,_){var D,R,J,X,se,ye,Ce,de,De,ut,mt,dt=Se.hasData(d)&&Se.get(d);if(!(!dt||!(X=dt.events))){for(y=(y||"").match(Z)||[""],se=y.length;se--;){if(J=tr.exec(y[se])||[],De=mt=J[1],ut=(J[2]||"").split(".").sort(),!De){for(De in X)p.event.remove(d,De+y[se],S,T,!0);continue}for(Ce=p.event.special[De]||{},De=(T?Ce.delegateType:Ce.bindType)||De,de=X[De]||[],J=J[2]&&new RegExp("(^|\\.)"+ut.join("\\.(?:.*\\.|)")+"(\\.|$)"),R=D=de.length;D--;)ye=de[D],(_||mt===ye.origType)&&(!S||S.guid===ye.guid)&&(!J||J.test(ye.namespace))&&(!T||T===ye.selector||T==="**"&&ye.selector)&&(de.splice(D,1),ye.selector&&de.delegateCount--,Ce.remove&&Ce.remove.call(d,ye));R&&!de.length&&((!Ce.teardown||Ce.teardown.call(d,ut,dt.handle)===!1)&&p.removeEvent(d,De,dt.handle),delete X[De])}p.isEmptyObject(X)&&Se.remove(d,"handle events")}},dispatch:function(d){var y,S,T,_,D,R,J=new Array(arguments.length),X=p.event.fix(d),se=(Se.get(this,"events")||Object.create(null))[X.type]||[],ye=p.event.special[X.type]||{};for(J[0]=X,y=1;y<arguments.length;y++)J[y]=arguments[y];if(X.delegateTarget=this,!(ye.preDispatch&&ye.preDispatch.call(this,X)===!1)){for(R=p.event.handlers.call(this,X,se),y=0;(_=R[y++])&&!X.isPropagationStopped();)for(X.currentTarget=_.elem,S=0;(D=_.handlers[S++])&&!X.isImmediatePropagationStopped();)(!X.rnamespace||D.namespace===!1||X.rnamespace.test(D.namespace))&&(X.handleObj=D,X.data=D.data,T=((p.event.special[D.origType]||{}).handle||D.handler).apply(_.elem,J),T!==void 0&&(X.result=T)===!1&&(X.preventDefault(),X.stopPropagation()));return ye.postDispatch&&ye.postDispatch.call(this,X),X.result}},handlers:function(d,y){var S,T,_,D,R,J=[],X=y.delegateCount,se=d.target;if(X&&se.nodeType&&!(d.type==="click"&&d.button>=1)){for(;se!==this;se=se.parentNode||this)if(se.nodeType===1&&!(d.type==="click"&&se.disabled===!0)){for(D=[],R={},S=0;S<X;S++)T=y[S],_=T.selector+" ",R[_]===void 0&&(R[_]=T.needsContext?p(_,this).index(se)>-1:p.find(_,this,null,[se]).length),R[_]&&D.push(T);D.length&&J.push({elem:se,handlers:D})}}return se=this,X<y.length&&J.push({elem:se,handlers:y.slice(X)}),J},addProp:function(d,y){Object.defineProperty(p.Event.prototype,d,{enumerable:!0,configurable:!0,get:m(y)?function(){if(this.originalEvent)return y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(S){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:S})}})},fix:function(d){return d[p.expando]?d:new p.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var y=this||d;return je.test(y.type)&&y.click&&M(y,"input")&&$t(y,"click",!0),!1},trigger:function(d){var y=this||d;return je.test(y.type)&&y.click&&M(y,"input")&&$t(y,"click"),!0},_default:function(d){var y=d.target;return je.test(y.type)&&y.click&&M(y,"input")&&Se.get(y,"click")||M(y,"a")}},beforeunload:{postDispatch:function(d){d.result!==void 0&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}};function $t(d,y,S){if(!S){Se.get(d,y)===void 0&&p.event.add(d,y,Dt);return}Se.set(d,y,!1),p.event.add(d,y,{namespace:!1,handler:function(T){var _,D=Se.get(this,y);if(T.isTrigger&1&&this[y]){if(D)(p.event.special[y]||{}).delegateType&&T.stopPropagation();else if(D=a.call(arguments),Se.set(this,y,D),this[y](),_=Se.get(this,y),Se.set(this,y,!1),D!==_)return T.stopImmediatePropagation(),T.preventDefault(),_}else D&&(Se.set(this,y,p.event.trigger(D[0],D.slice(1),this)),T.stopPropagation(),T.isImmediatePropagationStopped=Dt)}})}p.removeEvent=function(d,y,S){d.removeEventListener&&d.removeEventListener(y,S)},p.Event=function(d,y){if(!(this instanceof p.Event))return new p.Event(d,y);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||d.defaultPrevented===void 0&&d.returnValue===!1?Dt:Ot,this.target=d.target&&d.target.nodeType===3?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,y&&p.extend(this,y),this.timeStamp=d&&d.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Ot,isPropagationStopped:Ot,isImmediatePropagationStopped:Ot,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Dt,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Dt,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Dt,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(d,y){function S(T){if(b.documentMode){var _=Se.get(this,"handle"),D=p.event.fix(T);D.type=T.type==="focusin"?"focus":"blur",D.isSimulated=!0,_(T),D.target===D.currentTarget&&_(D)}else p.event.simulate(y,T.target,p.event.fix(T))}p.event.special[d]={setup:function(){var T;if($t(this,d,!0),b.documentMode)T=Se.get(this,y),T||this.addEventListener(y,S),Se.set(this,y,(T||0)+1);else return!1},trigger:function(){return $t(this,d),!0},teardown:function(){var T;if(b.documentMode)T=Se.get(this,y)-1,T?Se.set(this,y,T):(this.removeEventListener(y,S),Se.remove(this,y));else return!1},_default:function(T){return Se.get(T.target,d)},delegateType:y},p.event.special[y]={setup:function(){var T=this.ownerDocument||this.document||this,_=b.documentMode?this:T,D=Se.get(_,y);D||(b.documentMode?this.addEventListener(y,S):T.addEventListener(d,S,!0)),Se.set(_,y,(D||0)+1)},teardown:function(){var T=this.ownerDocument||this.document||this,_=b.documentMode?this:T,D=Se.get(_,y)-1;D?Se.set(_,y,D):(b.documentMode?this.removeEventListener(y,S):T.removeEventListener(d,S,!0),Se.remove(_,y))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,y){p.event.special[d]={delegateType:y,bindType:y,handle:function(S){var T,_=this,D=S.relatedTarget,R=S.handleObj;return(!D||D!==_&&!p.contains(_,D))&&(S.type=R.origType,T=R.handler.apply(this,arguments),S.type=y),T}}}),p.fn.extend({on:function(d,y,S,T){return zt(this,d,y,S,T)},one:function(d,y,S,T){return zt(this,d,y,S,T,1)},off:function(d,y,S){var T,_;if(d&&d.preventDefault&&d.handleObj)return T=d.handleObj,p(d.delegateTarget).off(T.namespace?T.origType+"."+T.namespace:T.origType,T.selector,T.handler),this;if(typeof d=="object"){for(_ in d)this.off(_,y,d[_]);return this}return(y===!1||typeof y=="function")&&(S=y,y=void 0),S===!1&&(S=Ot),this.each(function(){p.event.remove(this,d,S,y)})}});var an=/<script|<style|<link/i,Wt=/checked\s*(?:[^=]|=\s*.checked.)/i,Kr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Nr(d,y){return M(d,"table")&&M(y.nodeType!==11?y:y.firstChild,"tr")&&p(d).children("tbody")[0]||d}function zn(d){return d.type=(d.getAttribute("type")!==null)+"/"+d.type,d}function $i(d){return(d.type||"").slice(0,5)==="true/"?d.type=d.type.slice(5):d.removeAttribute("type"),d}function on(d,y){var S,T,_,D,R,J,X;if(y.nodeType===1){if(Se.hasData(d)&&(D=Se.get(d),X=D.events,X)){Se.remove(y,"handle events");for(_ in X)for(S=0,T=X[_].length;S<T;S++)p.event.add(y,_,X[_][S])}Ie.hasData(d)&&(R=Ie.access(d),J=p.extend({},R),Ie.set(y,J))}}function hr(d,y){var S=y.nodeName.toLowerCase();S==="input"&&je.test(d.type)?y.checked=d.checked:(S==="input"||S==="textarea")&&(y.defaultValue=d.defaultValue)}function qt(d,y,S,T){y=o(y);var _,D,R,J,X,se,ye=0,Ce=d.length,de=Ce-1,De=y[0],ut=m(De);if(ut||Ce>1&&typeof De=="string"&&!h.checkClone&&Wt.test(De))return d.each(function(mt){var dt=d.eq(mt);ut&&(y[0]=De.call(this,mt,dt.html())),qt(dt,y,S,T)});if(Ce&&(_=Et(y,d[0].ownerDocument,!1,d,T),D=_.firstChild,_.childNodes.length===1&&(_=D),D||T)){for(R=p.map(Xe(_,"script"),zn),J=R.length;ye<Ce;ye++)X=_,ye!==de&&(X=p.clone(X,!0,!0),J&&p.merge(R,Xe(X,"script"))),S.call(d[ye],X,ye);if(J)for(se=R[R.length-1].ownerDocument,p.map(R,$i),ye=0;ye<J;ye++)X=R[ye],st.test(X.type||"")&&!Se.access(X,"globalEval")&&p.contains(se,X)&&(X.src&&(X.type||"").toLowerCase()!=="module"?p._evalUrl&&!X.noModule&&p._evalUrl(X.src,{nonce:X.nonce||X.getAttribute("nonce")},se):E(X.textContent.replace(Kr,""),X,se))}return d}function ar(d,y,S){for(var T,_=y?p.filter(y,d):d,D=0;(T=_[D])!=null;D++)!S&&T.nodeType===1&&p.cleanData(Xe(T)),T.parentNode&&(S&&ee(T)&&ft(Xe(T,"script")),T.parentNode.removeChild(T));return d}p.extend({htmlPrefilter:function(d){return d},clone:function(d,y,S){var T,_,D,R,J=d.cloneNode(!0),X=ee(d);if(!h.noCloneChecked&&(d.nodeType===1||d.nodeType===11)&&!p.isXMLDoc(d))for(R=Xe(J),D=Xe(d),T=0,_=D.length;T<_;T++)hr(D[T],R[T]);if(y)if(S)for(D=D||Xe(d),R=R||Xe(J),T=0,_=D.length;T<_;T++)on(D[T],R[T]);else on(d,J);return R=Xe(J,"script"),R.length>0&&ft(R,!X&&Xe(d,"script")),J},cleanData:function(d){for(var y,S,T,_=p.event.special,D=0;(S=d[D])!==void 0;D++)if(Me(S)){if(y=S[Se.expando]){if(y.events)for(T in y.events)_[T]?p.event.remove(S,T):p.removeEvent(S,T,y.handle);S[Se.expando]=void 0}S[Ie.expando]&&(S[Ie.expando]=void 0)}}}),p.fn.extend({detach:function(d){return ar(this,d,!0)},remove:function(d){return ar(this,d)},text:function(d){return Ue(this,function(y){return y===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=y)})},null,d,arguments.length)},append:function(){return qt(this,arguments,function(d){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=Nr(this,d);y.appendChild(d)}})},prepend:function(){return qt(this,arguments,function(d){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=Nr(this,d);y.insertBefore(d,y.firstChild)}})},before:function(){return qt(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return qt(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,y=0;(d=this[y])!=null;y++)d.nodeType===1&&(p.cleanData(Xe(d,!1)),d.textContent="");return this},clone:function(d,y){return d=d??!1,y=y??d,this.map(function(){return p.clone(this,d,y)})},html:function(d){return Ue(this,function(y){var S=this[0]||{},T=0,_=this.length;if(y===void 0&&S.nodeType===1)return S.innerHTML;if(typeof y=="string"&&!an.test(y)&&!Ne[(nt.exec(y)||["",""])[1].toLowerCase()]){y=p.htmlPrefilter(y);try{for(;T<_;T++)S=this[T]||{},S.nodeType===1&&(p.cleanData(Xe(S,!1)),S.innerHTML=y);S=0}catch{}}S&&this.empty().append(y)},null,d,arguments.length)},replaceWith:function(){var d=[];return qt(this,arguments,function(y){var S=this.parentNode;p.inArray(this,d)<0&&(p.cleanData(Xe(this)),S&&S.replaceChild(y,this))},d)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,y){p.fn[d]=function(S){for(var T,_=[],D=p(S),R=D.length-1,J=0;J<=R;J++)T=J===R?this:this.clone(!0),p(D[J])[y](T),s.apply(_,T.get());return this.pushStack(_)}});var Sn=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),vr=/^--/,hi=function(d){var y=d.ownerDocument.defaultView;return(!y||!y.opener)&&(y=e),y.getComputedStyle(d)},qo=function(d,y,S){var T,_,D={};for(_ in y)D[_]=d.style[_],d.style[_]=y[_];T=S.call(d);for(_ in y)d.style[_]=D[_];return T},Ou=new RegExp(F.join("|"),"i");(function(){function d(){if(se){X.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",se.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",$.appendChild(X).appendChild(se);var ye=e.getComputedStyle(se);S=ye.top!=="1%",J=y(ye.marginLeft)===12,se.style.right="60%",D=y(ye.right)===36,T=y(ye.width)===36,se.style.position="absolute",_=y(se.offsetWidth/3)===12,$.removeChild(X),se=null}}function y(ye){return Math.round(parseFloat(ye))}var S,T,_,D,R,J,X=b.createElement("div"),se=b.createElement("div");se.style&&(se.style.backgroundClip="content-box",se.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle=se.style.backgroundClip==="content-box",p.extend(h,{boxSizingReliable:function(){return d(),T},pixelBoxStyles:function(){return d(),D},pixelPosition:function(){return d(),S},reliableMarginLeft:function(){return d(),J},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var ye,Ce,de,De;return R==null&&(ye=b.createElement("table"),Ce=b.createElement("tr"),de=b.createElement("div"),ye.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ce.style.cssText="box-sizing:content-box;border:1px solid",Ce.style.height="1px",de.style.height="9px",de.style.display="block",$.appendChild(ye).appendChild(Ce).appendChild(de),De=e.getComputedStyle(Ce),R=parseInt(De.height,10)+parseInt(De.borderTopWidth,10)+parseInt(De.borderBottomWidth,10)===Ce.offsetHeight,$.removeChild(ye)),R}}))})();function vi(d,y,S){var T,_,D,R,J=vr.test(y),X=d.style;return S=S||hi(d),S&&(R=S.getPropertyValue(y)||S[y],J&&R&&(R=R.replace(N,"$1")||void 0),R===""&&!ee(d)&&(R=p.style(d,y)),!h.pixelBoxStyles()&&Sn.test(R)&&Ou.test(y)&&(T=X.width,_=X.minWidth,D=X.maxWidth,X.minWidth=X.maxWidth=X.width=R,R=S.width,X.width=T,X.minWidth=_,X.maxWidth=D)),R!==void 0?R+"":R}function Vo(d,y){return{get:function(){if(d()){delete this.get;return}return(this.get=y).apply(this,arguments)}}}var Ho=["Webkit","Moz","ms"],$o=b.createElement("div").style,Wo={};function pi(d){for(var y=d[0].toUpperCase()+d.slice(1),S=Ho.length;S--;)if(d=Ho[S]+y,d in $o)return d}function gi(d){var y=p.cssProps[d]||Wo[d];return y||(d in $o?d:Wo[d]=pi(d)||d)}var Wi=/^(none|table(?!-c[ea]).+)/,Uo={position:"absolute",visibility:"hidden",display:"block"},Ia={letterSpacing:"0",fontWeight:"400"};function Go(d,y,S){var T=ve.exec(y);return T?Math.max(0,T[2]-(S||0))+(T[3]||"px"):y}function xr(d,y,S,T,_,D){var R=y==="width"?1:0,J=0,X=0,se=0;if(S===(T?"border":"content"))return 0;for(;R<4;R+=2)S==="margin"&&(se+=p.css(d,S+F[R],!0,_)),T?(S==="content"&&(X-=p.css(d,"padding"+F[R],!0,_)),S!=="margin"&&(X-=p.css(d,"border"+F[R]+"Width",!0,_))):(X+=p.css(d,"padding"+F[R],!0,_),S!=="padding"?X+=p.css(d,"border"+F[R]+"Width",!0,_):J+=p.css(d,"border"+F[R]+"Width",!0,_));return!T&&D>=0&&(X+=Math.max(0,Math.ceil(d["offset"+y[0].toUpperCase()+y.slice(1)]-D-X-J-.5))||0),X+se}function Ui(d,y,S){var T=hi(d),_=!h.boxSizingReliable()||S,D=_&&p.css(d,"boxSizing",!1,T)==="border-box",R=D,J=vi(d,y,T),X="offset"+y[0].toUpperCase()+y.slice(1);if(Sn.test(J)){if(!S)return J;J="auto"}return(!h.boxSizingReliable()&&D||!h.reliableTrDimensions()&&M(d,"tr")||J==="auto"||!parseFloat(J)&&p.css(d,"display",!1,T)==="inline")&&d.getClientRects().length&&(D=p.css(d,"boxSizing",!1,T)==="border-box",R=X in d,R&&(J=d[X])),J=parseFloat(J)||0,J+xr(d,y,S||(D?"border":"content"),R,T,J)+"px"}p.extend({cssHooks:{opacity:{get:function(d,y){if(y){var S=vi(d,"opacity");return S===""?"1":S}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,y,S,T){if(!(!d||d.nodeType===3||d.nodeType===8||!d.style)){var _,D,R,J=Te(y),X=vr.test(y),se=d.style;if(X||(y=gi(J)),R=p.cssHooks[y]||p.cssHooks[J],S!==void 0){if(D=typeof S,D==="string"&&(_=ve.exec(S))&&_[1]&&(S=ke(d,y,_),D="number"),S==null||S!==S)return;D==="number"&&!X&&(S+=_&&_[3]||(p.cssNumber[J]?"":"px")),!h.clearCloneStyle&&S===""&&y.indexOf("background")===0&&(se[y]="inherit"),(!R||!("set"in R)||(S=R.set(d,S,T))!==void 0)&&(X?se.setProperty(y,S):se[y]=S)}else return R&&"get"in R&&(_=R.get(d,!1,T))!==void 0?_:se[y]}},css:function(d,y,S,T){var _,D,R,J=Te(y),X=vr.test(y);return X||(y=gi(J)),R=p.cssHooks[y]||p.cssHooks[J],R&&"get"in R&&(_=R.get(d,!0,S)),_===void 0&&(_=vi(d,y,T)),_==="normal"&&y in Ia&&(_=Ia[y]),S===""||S?(D=parseFloat(_),S===!0||isFinite(D)?D||0:_):_}}),p.each(["height","width"],function(d,y){p.cssHooks[y]={get:function(S,T,_){if(T)return Wi.test(p.css(S,"display"))&&(!S.getClientRects().length||!S.getBoundingClientRect().width)?qo(S,Uo,function(){return Ui(S,y,_)}):Ui(S,y,_)},set:function(S,T,_){var D,R=hi(S),J=!h.scrollboxSize()&&R.position==="absolute",X=J||_,se=X&&p.css(S,"boxSizing",!1,R)==="border-box",ye=_?xr(S,y,_,se,R):0;return se&&J&&(ye-=Math.ceil(S["offset"+y[0].toUpperCase()+y.slice(1)]-parseFloat(R[y])-xr(S,y,"border",!1,R)-.5)),ye&&(D=ve.exec(T))&&(D[3]||"px")!=="px"&&(S.style[y]=T,T=p.css(S,y)),Go(S,T,ye)}}}),p.cssHooks.marginLeft=Vo(h.reliableMarginLeft,function(d,y){if(y)return(parseFloat(vi(d,"marginLeft"))||d.getBoundingClientRect().left-qo(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(d,y){p.cssHooks[d+y]={expand:function(S){for(var T=0,_={},D=typeof S=="string"?S.split(" "):[S];T<4;T++)_[d+F[T]+y]=D[T]||D[T-2]||D[0];return _}},d!=="margin"&&(p.cssHooks[d+y].set=Go)}),p.fn.extend({css:function(d,y){return Ue(this,function(S,T,_){var D,R,J={},X=0;if(Array.isArray(T)){for(D=hi(S),R=T.length;X<R;X++)J[T[X]]=p.css(S,T[X],!1,D);return J}return _!==void 0?p.style(S,T,_):p.css(S,T)},d,y,arguments.length>1)}});function or(d,y,S,T,_){return new or.prototype.init(d,y,S,T,_)}p.Tween=or,or.prototype={constructor:or,init:function(d,y,S,T,_,D){this.elem=d,this.prop=S,this.easing=_||p.easing._default,this.options=y,this.start=this.now=this.cur(),this.end=T,this.unit=D||(p.cssNumber[S]?"":"px")},cur:function(){var d=or.propHooks[this.prop];return d&&d.get?d.get(this):or.propHooks._default.get(this)},run:function(d){var y,S=or.propHooks[this.prop];return this.options.duration?this.pos=y=p.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):this.pos=y=d,this.now=(this.end-this.start)*y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),S&&S.set?S.set(this):or.propHooks._default.set(this),this}},or.prototype.init.prototype=or.prototype,or.propHooks={_default:{get:function(d){var y;return d.elem.nodeType!==1||d.elem[d.prop]!=null&&d.elem.style[d.prop]==null?d.elem[d.prop]:(y=p.css(d.elem,d.prop,""),!y||y==="auto"?0:y)},set:function(d){p.fx.step[d.prop]?p.fx.step[d.prop](d):d.elem.nodeType===1&&(p.cssHooks[d.prop]||d.elem.style[gi(d.prop)]!=null)?p.style(d.elem,d.prop,d.now+d.unit):d.elem[d.prop]=d.now}}},or.propHooks.scrollTop=or.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},p.easing={linear:function(d){return d},swing:function(d){return .5-Math.cos(d*Math.PI)/2},_default:"swing"},p.fx=or.prototype.init,p.fx.step={};var Fr,pr,Ru=/^(?:toggle|show|hide)$/,ud=/queueHooks$/;function Pa(){pr&&(b.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Pa):e.setTimeout(Pa,p.fx.interval),p.fx.tick())}function ld(){return e.setTimeout(function(){Fr=void 0}),Fr=Date.now()}function jo(d,y){var S,T=0,_={height:d};for(y=y?1:0;T<4;T+=2-y)S=F[T],_["margin"+S]=_["padding"+S]=d;return y&&(_.opacity=_.width=d),_}function cd(d,y,S){for(var T,_=(Xr.tweeners[y]||[]).concat(Xr.tweeners["*"]),D=0,R=_.length;D<R;D++)if(T=_[D].call(S,y,d))return T}function zy(d,y,S){var T,_,D,R,J,X,se,ye,Ce="width"in y||"height"in y,de=this,De={},ut=d.style,mt=d.nodeType&&ce(d),dt=Se.get(d,"fxshow");S.queue||(R=p._queueHooks(d,"fx"),R.unqueued==null&&(R.unqueued=0,J=R.empty.fire,R.empty.fire=function(){R.unqueued||J()}),R.unqueued++,de.always(function(){de.always(function(){R.unqueued--,p.queue(d,"fx").length||R.empty.fire()})}));for(T in y)if(_=y[T],Ru.test(_)){if(delete y[T],D=D||_==="toggle",_===(mt?"hide":"show"))if(_==="show"&&dt&&dt[T]!==void 0)mt=!0;else continue;De[T]=dt&&dt[T]||p.style(d,T)}if(X=!p.isEmptyObject(y),!(!X&&p.isEmptyObject(De))){Ce&&d.nodeType===1&&(S.overflow=[ut.overflow,ut.overflowX,ut.overflowY],se=dt&&dt.display,se==null&&(se=Se.get(d,"display")),ye=p.css(d,"display"),ye==="none"&&(se?ye=se:(Re([d],!0),se=d.style.display||se,ye=p.css(d,"display"),Re([d]))),(ye==="inline"||ye==="inline-block"&&se!=null)&&p.css(d,"float")==="none"&&(X||(de.done(function(){ut.display=se}),se==null&&(ye=ut.display,se=ye==="none"?"":ye)),ut.display="inline-block")),S.overflow&&(ut.overflow="hidden",de.always(function(){ut.overflow=S.overflow[0],ut.overflowX=S.overflow[1],ut.overflowY=S.overflow[2]})),X=!1;for(T in De)X||(dt?"hidden"in dt&&(mt=dt.hidden):dt=Se.access(d,"fxshow",{display:se}),D&&(dt.hidden=!mt),mt&&Re([d],!0),de.done(function(){mt||Re([d]),Se.remove(d,"fxshow");for(T in De)p.style(d,T,De[T])})),X=cd(mt?dt[T]:0,T,de),T in dt||(dt[T]=X.start,mt&&(X.end=X.start,X.start=0))}}function qy(d,y){var S,T,_,D,R;for(S in d)if(T=Te(S),_=y[T],D=d[S],Array.isArray(D)&&(_=D[1],D=d[S]=D[0]),S!==T&&(d[T]=D,delete d[S]),R=p.cssHooks[T],R&&"expand"in R){D=R.expand(D),delete d[T];for(S in D)S in d||(d[S]=D[S],y[S]=_)}else y[T]=_}function Xr(d,y,S){var T,_,D=0,R=Xr.prefilters.length,J=p.Deferred().always(function(){delete X.elem}),X=function(){if(_)return!1;for(var Ce=Fr||ld(),de=Math.max(0,se.startTime+se.duration-Ce),De=de/se.duration||0,ut=1-De,mt=0,dt=se.tweens.length;mt<dt;mt++)se.tweens[mt].run(ut);return J.notifyWith(d,[se,ut,de]),ut<1&&dt?de:(dt||J.notifyWith(d,[se,1,0]),J.resolveWith(d,[se]),!1)},se=J.promise({elem:d,props:p.extend({},y),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},S),originalProperties:y,originalOptions:S,startTime:Fr||ld(),duration:S.duration,tweens:[],createTween:function(Ce,de){var De=p.Tween(d,se.opts,Ce,de,se.opts.specialEasing[Ce]||se.opts.easing);return se.tweens.push(De),De},stop:function(Ce){var de=0,De=Ce?se.tweens.length:0;if(_)return this;for(_=!0;de<De;de++)se.tweens[de].run(1);return Ce?(J.notifyWith(d,[se,1,0]),J.resolveWith(d,[se,Ce])):J.rejectWith(d,[se,Ce]),this}}),ye=se.props;for(qy(ye,se.opts.specialEasing);D<R;D++)if(T=Xr.prefilters[D].call(se,d,ye,se.opts),T)return m(T.stop)&&(p._queueHooks(se.elem,se.opts.queue).stop=T.stop.bind(T)),T;return p.map(ye,cd,se),m(se.opts.start)&&se.opts.start.call(d,se),se.progress(se.opts.progress).done(se.opts.done,se.opts.complete).fail(se.opts.fail).always(se.opts.always),p.fx.timer(p.extend(X,{elem:d,anim:se,queue:se.opts.queue})),se}p.Animation=p.extend(Xr,{tweeners:{"*":[function(d,y){var S=this.createTween(d,y);return ke(S.elem,d,ve.exec(y),S),S}]},tweener:function(d,y){m(d)?(y=d,d=["*"]):d=d.match(Z);for(var S,T=0,_=d.length;T<_;T++)S=d[T],Xr.tweeners[S]=Xr.tweeners[S]||[],Xr.tweeners[S].unshift(y)},prefilters:[zy],prefilter:function(d,y){y?Xr.prefilters.unshift(d):Xr.prefilters.push(d)}}),p.speed=function(d,y,S){var T=d&&typeof d=="object"?p.extend({},d):{complete:S||!S&&y||m(d)&&d,duration:d,easing:S&&y||y&&!m(y)&&y};return p.fx.off?T.duration=0:typeof T.duration!="number"&&(T.duration in p.fx.speeds?T.duration=p.fx.speeds[T.duration]:T.duration=p.fx.speeds._default),(T.queue==null||T.queue===!0)&&(T.queue="fx"),T.old=T.complete,T.complete=function(){m(T.old)&&T.old.call(this),T.queue&&p.dequeue(this,T.queue)},T},p.fn.extend({fadeTo:function(d,y,S,T){return this.filter(ce).css("opacity",0).show().end().animate({opacity:y},d,S,T)},animate:function(d,y,S,T){var _=p.isEmptyObject(d),D=p.speed(y,S,T),R=function(){var J=Xr(this,p.extend({},d),D);(_||Se.get(this,"finish"))&&J.stop(!0)};return R.finish=R,_||D.queue===!1?this.each(R):this.queue(D.queue,R)},stop:function(d,y,S){var T=function(_){var D=_.stop;delete _.stop,D(S)};return typeof d!="string"&&(S=y,y=d,d=void 0),y&&this.queue(d||"fx",[]),this.each(function(){var _=!0,D=d!=null&&d+"queueHooks",R=p.timers,J=Se.get(this);if(D)J[D]&&J[D].stop&&T(J[D]);else for(D in J)J[D]&&J[D].stop&&ud.test(D)&&T(J[D]);for(D=R.length;D--;)R[D].elem===this&&(d==null||R[D].queue===d)&&(R[D].anim.stop(S),_=!1,R.splice(D,1));(_||!S)&&p.dequeue(this,d)})},finish:function(d){return d!==!1&&(d=d||"fx"),this.each(function(){var y,S=Se.get(this),T=S[d+"queue"],_=S[d+"queueHooks"],D=p.timers,R=T?T.length:0;for(S.finish=!0,p.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),y=D.length;y--;)D[y].elem===this&&D[y].queue===d&&(D[y].anim.stop(!0),D.splice(y,1));for(y=0;y<R;y++)T[y]&&T[y].finish&&T[y].finish.call(this);delete S.finish})}}),p.each(["toggle","show","hide"],function(d,y){var S=p.fn[y];p.fn[y]=function(T,_,D){return T==null||typeof T=="boolean"?S.apply(this,arguments):this.animate(jo(y,!0),T,_,D)}}),p.each({slideDown:jo("show"),slideUp:jo("hide"),slideToggle:jo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,y){p.fn[d]=function(S,T,_){return this.animate(y,S,T,_)}}),p.timers=[],p.fx.tick=function(){var d,y=0,S=p.timers;for(Fr=Date.now();y<S.length;y++)d=S[y],!d()&&S[y]===d&&S.splice(y--,1);S.length||p.fx.stop(),Fr=void 0},p.fx.timer=function(d){p.timers.push(d),p.fx.start()},p.fx.interval=13,p.fx.start=function(){pr||(pr=!0,Pa())},p.fx.stop=function(){pr=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(d,y){return d=p.fx&&p.fx.speeds[d]||d,y=y||"fx",this.queue(y,function(S,T){var _=e.setTimeout(S,d);T.stop=function(){e.clearTimeout(_)}})},(function(){var d=b.createElement("input"),y=b.createElement("select"),S=y.appendChild(b.createElement("option"));d.type="checkbox",h.checkOn=d.value!=="",h.optSelected=S.selected,d=b.createElement("input"),d.value="t",d.type="radio",h.radioValue=d.value==="t"})();var fd,La=p.expr.attrHandle;p.fn.extend({attr:function(d,y){return Ue(this,p.attr,d,y,arguments.length>1)},removeAttr:function(d){return this.each(function(){p.removeAttr(this,d)})}}),p.extend({attr:function(d,y,S){var T,_,D=d.nodeType;if(!(D===3||D===8||D===2)){if(typeof d.getAttribute>"u")return p.prop(d,y,S);if((D!==1||!p.isXMLDoc(d))&&(_=p.attrHooks[y.toLowerCase()]||(p.expr.match.bool.test(y)?fd:void 0)),S!==void 0){if(S===null){p.removeAttr(d,y);return}return _&&"set"in _&&(T=_.set(d,S,y))!==void 0?T:(d.setAttribute(y,S+""),S)}return _&&"get"in _&&(T=_.get(d,y))!==null?T:(T=p.find.attr(d,y),T??void 0)}},attrHooks:{type:{set:function(d,y){if(!h.radioValue&&y==="radio"&&M(d,"input")){var S=d.value;return d.setAttribute("type",y),S&&(d.value=S),y}}}},removeAttr:function(d,y){var S,T=0,_=y&&y.match(Z);if(_&&d.nodeType===1)for(;S=_[T++];)d.removeAttribute(S)}}),fd={set:function(d,y,S){return y===!1?p.removeAttr(d,S):d.setAttribute(S,S),S}},p.each(p.expr.match.bool.source.match(/\w+/g),function(d,y){var S=La[y]||p.find.attr;La[y]=function(T,_,D){var R,J,X=_.toLowerCase();return D||(J=La[X],La[X]=R,R=S(T,_,D)!=null?X:null,La[X]=J),R}});var Vy=/^(?:input|select|textarea|button)$/i,Hy=/^(?:a|area)$/i;p.fn.extend({prop:function(d,y){return Ue(this,p.prop,d,y,arguments.length>1)},removeProp:function(d){return this.each(function(){delete this[p.propFix[d]||d]})}}),p.extend({prop:function(d,y,S){var T,_,D=d.nodeType;if(!(D===3||D===8||D===2))return(D!==1||!p.isXMLDoc(d))&&(y=p.propFix[y]||y,_=p.propHooks[y]),S!==void 0?_&&"set"in _&&(T=_.set(d,S,y))!==void 0?T:d[y]=S:_&&"get"in _&&(T=_.get(d,y))!==null?T:d[y]},propHooks:{tabIndex:{get:function(d){var y=p.find.attr(d,"tabindex");return y?parseInt(y,10):Vy.test(d.nodeName)||Hy.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(p.propHooks.selected={get:function(d){var y=d.parentNode;return y&&y.parentNode&&y.parentNode.selectedIndex,null},set:function(d){var y=d.parentNode;y&&(y.selectedIndex,y.parentNode&&y.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function mi(d){var y=d.match(Z)||[];return y.join(" ")}function yi(d){return d.getAttribute&&d.getAttribute("class")||""}function Nu(d){return Array.isArray(d)?d:typeof d=="string"?d.match(Z)||[]:[]}p.fn.extend({addClass:function(d){var y,S,T,_,D,R;return m(d)?this.each(function(J){p(this).addClass(d.call(this,J,yi(this)))}):(y=Nu(d),y.length?this.each(function(){if(T=yi(this),S=this.nodeType===1&&" "+mi(T)+" ",S){for(D=0;D<y.length;D++)_=y[D],S.indexOf(" "+_+" ")<0&&(S+=_+" ");R=mi(S),T!==R&&this.setAttribute("class",R)}}):this)},removeClass:function(d){var y,S,T,_,D,R;return m(d)?this.each(function(J){p(this).removeClass(d.call(this,J,yi(this)))}):arguments.length?(y=Nu(d),y.length?this.each(function(){if(T=yi(this),S=this.nodeType===1&&" "+mi(T)+" ",S){for(D=0;D<y.length;D++)for(_=y[D];S.indexOf(" "+_+" ")>-1;)S=S.replace(" "+_+" "," ");R=mi(S),T!==R&&this.setAttribute("class",R)}}):this):this.attr("class","")},toggleClass:function(d,y){var S,T,_,D,R=typeof d,J=R==="string"||Array.isArray(d);return m(d)?this.each(function(X){p(this).toggleClass(d.call(this,X,yi(this),y),y)}):typeof y=="boolean"&&J?y?this.addClass(d):this.removeClass(d):(S=Nu(d),this.each(function(){if(J)for(D=p(this),_=0;_<S.length;_++)T=S[_],D.hasClass(T)?D.removeClass(T):D.addClass(T);else(d===void 0||R==="boolean")&&(T=yi(this),T&&Se.set(this,"__className__",T),this.setAttribute&&this.setAttribute("class",T||d===!1?"":Se.get(this,"__className__")||""))}))},hasClass:function(d){var y,S,T=0;for(y=" "+d+" ";S=this[T++];)if(S.nodeType===1&&(" "+mi(yi(S))+" ").indexOf(y)>-1)return!0;return!1}});var $y=/\r/g;p.fn.extend({val:function(d){var y,S,T,_=this[0];return arguments.length?(T=m(d),this.each(function(D){var R;this.nodeType===1&&(T?R=d.call(this,D,p(this).val()):R=d,R==null?R="":typeof R=="number"?R+="":Array.isArray(R)&&(R=p.map(R,function(J){return J==null?"":J+""})),y=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!y||!("set"in y)||y.set(this,R,"value")===void 0)&&(this.value=R))})):_?(y=p.valHooks[_.type]||p.valHooks[_.nodeName.toLowerCase()],y&&"get"in y&&(S=y.get(_,"value"))!==void 0?S:(S=_.value,typeof S=="string"?S.replace($y,""):S??"")):void 0}}),p.extend({valHooks:{option:{get:function(d){var y=p.find.attr(d,"value");return y??mi(p.text(d))}},select:{get:function(d){var y,S,T,_=d.options,D=d.selectedIndex,R=d.type==="select-one",J=R?null:[],X=R?D+1:_.length;for(D<0?T=X:T=R?D:0;T<X;T++)if(S=_[T],(S.selected||T===D)&&!S.disabled&&(!S.parentNode.disabled||!M(S.parentNode,"optgroup"))){if(y=p(S).val(),R)return y;J.push(y)}return J},set:function(d,y){for(var S,T,_=d.options,D=p.makeArray(y),R=_.length;R--;)T=_[R],(T.selected=p.inArray(p.valHooks.option.get(T),D)>-1)&&(S=!0);return S||(d.selectedIndex=-1),D}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(d,y){if(Array.isArray(y))return d.checked=p.inArray(p(d).val(),y)>-1}},h.checkOn||(p.valHooks[this].get=function(d){return d.getAttribute("value")===null?"on":d.value})});var Ba=e.location,dd={guid:Date.now()},Fu=/\?/;p.parseXML=function(d){var y,S;if(!d||typeof d!="string")return null;try{y=new e.DOMParser().parseFromString(d,"text/xml")}catch{}return S=y&&y.getElementsByTagName("parsererror")[0],(!y||S)&&p.error("Invalid XML: "+(S?p.map(S.childNodes,function(T){return T.textContent}).join(`
`):d)),y};var hd=/^(?:focusinfocus|focusoutblur)$/,vd=function(d){d.stopPropagation()};p.extend(p.event,{trigger:function(d,y,S,T){var _,D,R,J,X,se,ye,Ce,de=[S||b],De=f.call(d,"type")?d.type:d,ut=f.call(d,"namespace")?d.namespace.split("."):[];if(D=Ce=R=S=S||b,!(S.nodeType===3||S.nodeType===8)&&!hd.test(De+p.event.triggered)&&(De.indexOf(".")>-1&&(ut=De.split("."),De=ut.shift(),ut.sort()),X=De.indexOf(":")<0&&"on"+De,d=d[p.expando]?d:new p.Event(De,typeof d=="object"&&d),d.isTrigger=T?2:3,d.namespace=ut.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+ut.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=S),y=y==null?[d]:p.makeArray(y,[d]),ye=p.event.special[De]||{},!(!T&&ye.trigger&&ye.trigger.apply(S,y)===!1))){if(!T&&!ye.noBubble&&!w(S)){for(J=ye.delegateType||De,hd.test(J+De)||(D=D.parentNode);D;D=D.parentNode)de.push(D),R=D;R===(S.ownerDocument||b)&&de.push(R.defaultView||R.parentWindow||e)}for(_=0;(D=de[_++])&&!d.isPropagationStopped();)Ce=D,d.type=_>1?J:ye.bindType||De,se=(Se.get(D,"events")||Object.create(null))[d.type]&&Se.get(D,"handle"),se&&se.apply(D,y),se=X&&D[X],se&&se.apply&&Me(D)&&(d.result=se.apply(D,y),d.result===!1&&d.preventDefault());return d.type=De,!T&&!d.isDefaultPrevented()&&(!ye._default||ye._default.apply(de.pop(),y)===!1)&&Me(S)&&X&&m(S[De])&&!w(S)&&(R=S[X],R&&(S[X]=null),p.event.triggered=De,d.isPropagationStopped()&&Ce.addEventListener(De,vd),S[De](),d.isPropagationStopped()&&Ce.removeEventListener(De,vd),p.event.triggered=void 0,R&&(S[X]=R)),d.result}},simulate:function(d,y,S){var T=p.extend(new p.Event,S,{type:d,isSimulated:!0});p.event.trigger(T,null,y)}}),p.fn.extend({trigger:function(d,y){return this.each(function(){p.event.trigger(d,y,this)})},triggerHandler:function(d,y){var S=this[0];if(S)return p.event.trigger(d,y,S,!0)}});var Wy=/\[\]$/,pd=/\r?\n/g,Uy=/^(?:submit|button|image|reset|file)$/i,Gy=/^(?:input|select|textarea|keygen)/i;function zu(d,y,S,T){var _;if(Array.isArray(y))p.each(y,function(D,R){S||Wy.test(d)?T(d,R):zu(d+"["+(typeof R=="object"&&R!=null?D:"")+"]",R,S,T)});else if(!S&&x(y)==="object")for(_ in y)zu(d+"["+_+"]",y[_],S,T);else T(d,y)}p.param=function(d,y){var S,T=[],_=function(D,R){var J=m(R)?R():R;T[T.length]=encodeURIComponent(D)+"="+encodeURIComponent(J??"")};if(d==null)return"";if(Array.isArray(d)||d.jquery&&!p.isPlainObject(d))p.each(d,function(){_(this.name,this.value)});else for(S in d)zu(S,d[S],y,_);return T.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=p.prop(this,"elements");return d?p.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!p(this).is(":disabled")&&Gy.test(this.nodeName)&&!Uy.test(d)&&(this.checked||!je.test(d))}).map(function(d,y){var S=p(this).val();return S==null?null:Array.isArray(S)?p.map(S,function(T){return{name:y.name,value:T.replace(pd,`\r
`)}}):{name:y.name,value:S.replace(pd,`\r
`)}}).get()}});var jy=/%20/g,Ky=/#.*$/,Xy=/([?&])_=[^&]*/,Yy=/^(.*?):[ \t]*([^\r\n]*)$/mg,Zy=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Qy=/^(?:GET|HEAD)$/,Jy=/^\/\//,gd={},qu={},md="*/".concat("*"),Vu=b.createElement("a");Vu.href=Ba.href;function yd(d){return function(y,S){typeof y!="string"&&(S=y,y="*");var T,_=0,D=y.toLowerCase().match(Z)||[];if(m(S))for(;T=D[_++];)T[0]==="+"?(T=T.slice(1)||"*",(d[T]=d[T]||[]).unshift(S)):(d[T]=d[T]||[]).push(S)}}function bd(d,y,S,T){var _={},D=d===qu;function R(J){var X;return _[J]=!0,p.each(d[J]||[],function(se,ye){var Ce=ye(y,S,T);if(typeof Ce=="string"&&!D&&!_[Ce])return y.dataTypes.unshift(Ce),R(Ce),!1;if(D)return!(X=Ce)}),X}return R(y.dataTypes[0])||!_["*"]&&R("*")}function Hu(d,y){var S,T,_=p.ajaxSettings.flatOptions||{};for(S in y)y[S]!==void 0&&((_[S]?d:T||(T={}))[S]=y[S]);return T&&p.extend(!0,d,T),d}function e0(d,y,S){for(var T,_,D,R,J=d.contents,X=d.dataTypes;X[0]==="*";)X.shift(),T===void 0&&(T=d.mimeType||y.getResponseHeader("Content-Type"));if(T){for(_ in J)if(J[_]&&J[_].test(T)){X.unshift(_);break}}if(X[0]in S)D=X[0];else{for(_ in S){if(!X[0]||d.converters[_+" "+X[0]]){D=_;break}R||(R=_)}D=D||R}if(D)return D!==X[0]&&X.unshift(D),S[D]}function t0(d,y,S,T){var _,D,R,J,X,se={},ye=d.dataTypes.slice();if(ye[1])for(R in d.converters)se[R.toLowerCase()]=d.converters[R];for(D=ye.shift();D;)if(d.responseFields[D]&&(S[d.responseFields[D]]=y),!X&&T&&d.dataFilter&&(y=d.dataFilter(y,d.dataType)),X=D,D=ye.shift(),D){if(D==="*")D=X;else if(X!=="*"&&X!==D){if(R=se[X+" "+D]||se["* "+D],!R){for(_ in se)if(J=_.split(" "),J[1]===D&&(R=se[X+" "+J[0]]||se["* "+J[0]],R)){R===!0?R=se[_]:se[_]!==!0&&(D=J[0],ye.unshift(J[1]));break}}if(R!==!0)if(R&&d.throws)y=R(y);else try{y=R(y)}catch(Ce){return{state:"parsererror",error:R?Ce:"No conversion from "+X+" to "+D}}}}return{state:"success",data:y}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ba.href,type:"GET",isLocal:Zy.test(Ba.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":md,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,y){return y?Hu(Hu(d,p.ajaxSettings),y):Hu(p.ajaxSettings,d)},ajaxPrefilter:yd(gd),ajaxTransport:yd(qu),ajax:function(d,y){typeof d=="object"&&(y=d,d=void 0),y=y||{};var S,T,_,D,R,J,X,se,ye,Ce,de=p.ajaxSetup({},y),De=de.context||de,ut=de.context&&(De.nodeType||De.jquery)?p(De):p.event,mt=p.Deferred(),dt=p.Callbacks("once memory"),sr=de.statusCode||{},Yt={},sn={},un="canceled",gt={readyState:0,getResponseHeader:function(yt){var Ut;if(X){if(!D)for(D={};Ut=Yy.exec(_);)D[Ut[1].toLowerCase()+" "]=(D[Ut[1].toLowerCase()+" "]||[]).concat(Ut[2]);Ut=D[yt.toLowerCase()+" "]}return Ut==null?null:Ut.join(", ")},getAllResponseHeaders:function(){return X?_:null},setRequestHeader:function(yt,Ut){return X==null&&(yt=sn[yt.toLowerCase()]=sn[yt.toLowerCase()]||yt,Yt[yt]=Ut),this},overrideMimeType:function(yt){return X==null&&(de.mimeType=yt),this},statusCode:function(yt){var Ut;if(yt)if(X)gt.always(yt[gt.status]);else for(Ut in yt)sr[Ut]=[sr[Ut],yt[Ut]];return this},abort:function(yt){var Ut=yt||un;return S&&S.abort(Ut),bi(0,Ut),this}};if(mt.promise(gt),de.url=((d||de.url||Ba.href)+"").replace(Jy,Ba.protocol+"//"),de.type=y.method||y.type||de.method||de.type,de.dataTypes=(de.dataType||"*").toLowerCase().match(Z)||[""],de.crossDomain==null){J=b.createElement("a");try{J.href=de.url,J.href=J.href,de.crossDomain=Vu.protocol+"//"+Vu.host!=J.protocol+"//"+J.host}catch{de.crossDomain=!0}}if(de.data&&de.processData&&typeof de.data!="string"&&(de.data=p.param(de.data,de.traditional)),bd(gd,de,y,gt),X)return gt;se=p.event&&de.global,se&&p.active++===0&&p.event.trigger("ajaxStart"),de.type=de.type.toUpperCase(),de.hasContent=!Qy.test(de.type),T=de.url.replace(Ky,""),de.hasContent?de.data&&de.processData&&(de.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(de.data=de.data.replace(jy,"+")):(Ce=de.url.slice(T.length),de.data&&(de.processData||typeof de.data=="string")&&(T+=(Fu.test(T)?"&":"?")+de.data,delete de.data),de.cache===!1&&(T=T.replace(Xy,"$1"),Ce=(Fu.test(T)?"&":"?")+"_="+dd.guid+++Ce),de.url=T+Ce),de.ifModified&&(p.lastModified[T]&&gt.setRequestHeader("If-Modified-Since",p.lastModified[T]),p.etag[T]&&gt.setRequestHeader("If-None-Match",p.etag[T])),(de.data&&de.hasContent&&de.contentType!==!1||y.contentType)&&gt.setRequestHeader("Content-Type",de.contentType),gt.setRequestHeader("Accept",de.dataTypes[0]&&de.accepts[de.dataTypes[0]]?de.accepts[de.dataTypes[0]]+(de.dataTypes[0]!=="*"?", "+md+"; q=0.01":""):de.accepts["*"]);for(ye in de.headers)gt.setRequestHeader(ye,de.headers[ye]);if(de.beforeSend&&(de.beforeSend.call(De,gt,de)===!1||X))return gt.abort();if(un="abort",dt.add(de.complete),gt.done(de.success),gt.fail(de.error),S=bd(qu,de,y,gt),!S)bi(-1,"No Transport");else{if(gt.readyState=1,se&&ut.trigger("ajaxSend",[gt,de]),X)return gt;de.async&&de.timeout>0&&(R=e.setTimeout(function(){gt.abort("timeout")},de.timeout));try{X=!1,S.send(Yt,bi)}catch(yt){if(X)throw yt;bi(-1,yt)}}function bi(yt,Ut,Ra,Wu){var ln,Na,cn,qn,Vn,zr=Ut;X||(X=!0,R&&e.clearTimeout(R),S=void 0,_=Wu||"",gt.readyState=yt>0?4:0,ln=yt>=200&&yt<300||yt===304,Ra&&(qn=e0(de,gt,Ra)),!ln&&p.inArray("script",de.dataTypes)>-1&&p.inArray("json",de.dataTypes)<0&&(de.converters["text script"]=function(){}),qn=t0(de,qn,gt,ln),ln?(de.ifModified&&(Vn=gt.getResponseHeader("Last-Modified"),Vn&&(p.lastModified[T]=Vn),Vn=gt.getResponseHeader("etag"),Vn&&(p.etag[T]=Vn)),yt===204||de.type==="HEAD"?zr="nocontent":yt===304?zr="notmodified":(zr=qn.state,Na=qn.data,cn=qn.error,ln=!cn)):(cn=zr,(yt||!zr)&&(zr="error",yt<0&&(yt=0))),gt.status=yt,gt.statusText=(Ut||zr)+"",ln?mt.resolveWith(De,[Na,zr,gt]):mt.rejectWith(De,[gt,zr,cn]),gt.statusCode(sr),sr=void 0,se&&ut.trigger(ln?"ajaxSuccess":"ajaxError",[gt,de,ln?Na:cn]),dt.fireWith(De,[gt,zr]),se&&(ut.trigger("ajaxComplete",[gt,de]),--p.active||p.event.trigger("ajaxStop")))}return gt},getJSON:function(d,y,S){return p.get(d,y,S,"json")},getScript:function(d,y){return p.get(d,void 0,y,"script")}}),p.each(["get","post"],function(d,y){p[y]=function(S,T,_,D){return m(T)&&(D=D||_,_=T,T=void 0),p.ajax(p.extend({url:S,type:y,dataType:D,data:T,success:_},p.isPlainObject(S)&&S))}}),p.ajaxPrefilter(function(d){var y;for(y in d.headers)y.toLowerCase()==="content-type"&&(d.contentType=d.headers[y]||"")}),p._evalUrl=function(d,y,S){return p.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(T){p.globalEval(T,y,S)}})},p.fn.extend({wrapAll:function(d){var y;return this[0]&&(m(d)&&(d=d.call(this[0])),y=p(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&y.insertBefore(this[0]),y.map(function(){for(var S=this;S.firstElementChild;)S=S.firstElementChild;return S}).append(this)),this},wrapInner:function(d){return m(d)?this.each(function(y){p(this).wrapInner(d.call(this,y))}):this.each(function(){var y=p(this),S=y.contents();S.length?S.wrapAll(d):y.append(d)})},wrap:function(d){var y=m(d);return this.each(function(S){p(this).wrapAll(y?d.call(this,S):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(d){return!p.expr.pseudos.visible(d)},p.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var r0={0:200,1223:204},Oa=p.ajaxSettings.xhr();h.cors=!!Oa&&"withCredentials"in Oa,h.ajax=Oa=!!Oa,p.ajaxTransport(function(d){var y,S;if(h.cors||Oa&&!d.crossDomain)return{send:function(T,_){var D,R=d.xhr();if(R.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(D in d.xhrFields)R[D]=d.xhrFields[D];d.mimeType&&R.overrideMimeType&&R.overrideMimeType(d.mimeType),!d.crossDomain&&!T["X-Requested-With"]&&(T["X-Requested-With"]="XMLHttpRequest");for(D in T)R.setRequestHeader(D,T[D]);y=function(J){return function(){y&&(y=S=R.onload=R.onerror=R.onabort=R.ontimeout=R.onreadystatechange=null,J==="abort"?R.abort():J==="error"?typeof R.status!="number"?_(0,"error"):_(R.status,R.statusText):_(r0[R.status]||R.status,R.statusText,(R.responseType||"text")!=="text"||typeof R.responseText!="string"?{binary:R.response}:{text:R.responseText},R.getAllResponseHeaders()))}},R.onload=y(),S=R.onerror=R.ontimeout=y("error"),R.onabort!==void 0?R.onabort=S:R.onreadystatechange=function(){R.readyState===4&&e.setTimeout(function(){y&&S()})},y=y("abort");try{R.send(d.hasContent&&d.data||null)}catch(J){if(y)throw J}},abort:function(){y&&y()}}}),p.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return p.globalEval(d),d}}}),p.ajaxPrefilter("script",function(d){d.cache===void 0&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),p.ajaxTransport("script",function(d){if(d.crossDomain||d.scriptAttrs){var y,S;return{send:function(T,_){y=p("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",S=function(D){y.remove(),S=null,D&&_(D.type==="error"?404:200,D.type)}),b.head.appendChild(y[0])},abort:function(){S&&S()}}}});var wd=[],$u=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=wd.pop()||p.expando+"_"+dd.guid++;return this[d]=!0,d}}),p.ajaxPrefilter("json jsonp",function(d,y,S){var T,_,D,R=d.jsonp!==!1&&($u.test(d.url)?"url":typeof d.data=="string"&&(d.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&$u.test(d.data)&&"data");if(R||d.dataTypes[0]==="jsonp")return T=d.jsonpCallback=m(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,R?d[R]=d[R].replace($u,"$1"+T):d.jsonp!==!1&&(d.url+=(Fu.test(d.url)?"&":"?")+d.jsonp+"="+T),d.converters["script json"]=function(){return D||p.error(T+" was not called"),D[0]},d.dataTypes[0]="json",_=e[T],e[T]=function(){D=arguments},S.always(function(){_===void 0?p(e).removeProp(T):e[T]=_,d[T]&&(d.jsonpCallback=y.jsonpCallback,wd.push(T)),D&&m(_)&&_(D[0]),D=_=void 0}),"script"}),h.createHTMLDocument=(function(){var d=b.implementation.createHTMLDocument("").body;return d.innerHTML="<form></form><form></form>",d.childNodes.length===2})(),p.parseHTML=function(d,y,S){if(typeof d!="string")return[];typeof y=="boolean"&&(S=y,y=!1);var T,_,D;return y||(h.createHTMLDocument?(y=b.implementation.createHTMLDocument(""),T=y.createElement("base"),T.href=b.location.href,y.head.appendChild(T)):y=b),_=H.exec(d),D=!S&&[],_?[y.createElement(_[1])]:(_=Et([d],y,D),D&&D.length&&p(D).remove(),p.merge([],_.childNodes))},p.fn.load=function(d,y,S){var T,_,D,R=this,J=d.indexOf(" ");return J>-1&&(T=mi(d.slice(J)),d=d.slice(0,J)),m(y)?(S=y,y=void 0):y&&typeof y=="object"&&(_="POST"),R.length>0&&p.ajax({url:d,type:_||"GET",dataType:"html",data:y}).done(function(X){D=arguments,R.html(T?p("<div>").append(p.parseHTML(X)).find(T):X)}).always(S&&function(X,se){R.each(function(){S.apply(this,D||[X.responseText,se,X])})}),this},p.expr.pseudos.animated=function(d){return p.grep(p.timers,function(y){return d===y.elem}).length},p.offset={setOffset:function(d,y,S){var T,_,D,R,J,X,se,ye=p.css(d,"position"),Ce=p(d),de={};ye==="static"&&(d.style.position="relative"),J=Ce.offset(),D=p.css(d,"top"),X=p.css(d,"left"),se=(ye==="absolute"||ye==="fixed")&&(D+X).indexOf("auto")>-1,se?(T=Ce.position(),R=T.top,_=T.left):(R=parseFloat(D)||0,_=parseFloat(X)||0),m(y)&&(y=y.call(d,S,p.extend({},J))),y.top!=null&&(de.top=y.top-J.top+R),y.left!=null&&(de.left=y.left-J.left+_),"using"in y?y.using.call(d,de):Ce.css(de)}},p.fn.extend({offset:function(d){if(arguments.length)return d===void 0?this:this.each(function(_){p.offset.setOffset(this,d,_)});var y,S,T=this[0];if(T)return T.getClientRects().length?(y=T.getBoundingClientRect(),S=T.ownerDocument.defaultView,{top:y.top+S.pageYOffset,left:y.left+S.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var d,y,S,T=this[0],_={top:0,left:0};if(p.css(T,"position")==="fixed")y=T.getBoundingClientRect();else{for(y=this.offset(),S=T.ownerDocument,d=T.offsetParent||S.documentElement;d&&(d===S.body||d===S.documentElement)&&p.css(d,"position")==="static";)d=d.parentNode;d&&d!==T&&d.nodeType===1&&(_=p(d).offset(),_.top+=p.css(d,"borderTopWidth",!0),_.left+=p.css(d,"borderLeftWidth",!0))}return{top:y.top-_.top-p.css(T,"marginTop",!0),left:y.left-_.left-p.css(T,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&p.css(d,"position")==="static";)d=d.offsetParent;return d||$})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,y){var S=y==="pageYOffset";p.fn[d]=function(T){return Ue(this,function(_,D,R){var J;if(w(_)?J=_:_.nodeType===9&&(J=_.defaultView),R===void 0)return J?J[y]:_[D];J?J.scrollTo(S?J.pageXOffset:R,S?R:J.pageYOffset):_[D]=R},d,T,arguments.length)}}),p.each(["top","left"],function(d,y){p.cssHooks[y]=Vo(h.pixelPosition,function(S,T){if(T)return T=vi(S,y),Sn.test(T)?p(S).position()[y]+"px":T})}),p.each({Height:"height",Width:"width"},function(d,y){p.each({padding:"inner"+d,content:y,"":"outer"+d},function(S,T){p.fn[T]=function(_,D){var R=arguments.length&&(S||typeof _!="boolean"),J=S||(_===!0||D===!0?"margin":"border");return Ue(this,function(X,se,ye){var Ce;return w(X)?T.indexOf("outer")===0?X["inner"+d]:X.document.documentElement["client"+d]:X.nodeType===9?(Ce=X.documentElement,Math.max(X.body["scroll"+d],Ce["scroll"+d],X.body["offset"+d],Ce["offset"+d],Ce["client"+d])):ye===void 0?p.css(X,se,J):p.style(X,se,ye,J)},y,R?_:void 0,R)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,y){p.fn[y]=function(S){return this.on(y,S)}}),p.fn.extend({bind:function(d,y,S){return this.on(d,null,y,S)},unbind:function(d,y){return this.off(d,null,y)},delegate:function(d,y,S,T){return this.on(y,d,S,T)},undelegate:function(d,y,S){return arguments.length===1?this.off(d,"**"):this.off(y,d||"**",S)},hover:function(d,y){return this.on("mouseenter",d).on("mouseleave",y||d)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,y){p.fn[y]=function(S,T){return arguments.length>0?this.on(y,null,S,T):this.trigger(y)}});var n0=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(d,y){var S,T,_;if(typeof y=="string"&&(S=d[y],y=d,d=S),!!m(d))return T=a.call(arguments,2),_=function(){return d.apply(y||this,T.concat(a.call(arguments)))},_.guid=d.guid=d.guid||p.guid++,_},p.holdReady=function(d){d?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=M,p.isFunction=m,p.isWindow=w,p.camelCase=Te,p.type=x,p.now=Date.now,p.isNumeric=function(d){var y=p.type(d);return(y==="number"||y==="string")&&!isNaN(d-parseFloat(d))},p.trim=function(d){return d==null?"":(d+"").replace(n0,"$1")};var i0=e.jQuery,a0=e.$;return p.noConflict=function(d){return e.$===p&&(e.$=a0),d&&e.jQuery===p&&(e.jQuery=i0),p},typeof r>"u"&&(e.jQuery=e.$=p),p})})(Es)),Es.exports}var m0=g0();const y0=qi(m0);window.jQuery=window.$=y0;const et={ID:"id",LABEL:"l",LABEL_GERMAN:"de",LABEL_ENGLISH:"en",LABEL_PERSIAN:"fa",SUBTOP:"st",SOURCE:"source",HAS_INSTANCE:"inst",SUBTOP_ENTITY_TYPE:"E",SUBTOP_ROLE:"R",SUBTOP_FUNCTION:"F"},jt={SOURCE:"source",TARGET:"target",PROPERTY:"p",PROPERTY_LABEL:"pl",GRAPH:"g",AXIOM:"ax"},b0={idStrings:{file:"File","load-sparql":"Load from SPARQL endpoint","load-session":"Load session","load-view":"Load Partial Graph","load-layout":"Load Layout of Partial Graph","save-session":"Save Session","save-snik-graph":"Save complete graph as Cytoscape File","new-view":"Open New Partial Graph","save-view":"Save Current Partial Graph","save-layout":"Save Layout of Current Partial Graph","recalculate-layout-replace":"Recalculate Layout and Replace in Browser Cache","save-image-png-visible-region":"Save PNG Image of Visible Region","save-image-png-complete-partial-graph":"Save PNG Image of Complete Partial Graph","save-image-png-visible-region-high-res":"Save PNG Image of Visible Region (high res)","save-image-png-complete-partial-graph-high-res":"Save PNG Image of Complete Partial Graph (high res)","save-image-svg-visible-region":"Save SVG Image of Visible Region","save-image-svg-complete-partial-graph":"Save SVG Image of Complete Partial Graph",filter:"Filter",meta:"meta",bb:"BB",ob:"OB",ciox:"CioX",he:"HE",it:"IT",it4it:"IT4IT",bb2:"BB2",role:"Role",function:"Function",entitytype:"EntityType","show-classes-with-instances":"Show Classes with Instances","show-classes-without-instances":"Show Classes without Instances",subclassof:"subClassOf","non-subclassof":"non-subClassOf","inter-ontology-relations":"Inter-Ontology Relations","intra-ontology-relations":"Intra-Ontology Relations",options:"Options",separateColours:"Separate Colours",cumulativeSearch:"Cumulative Search",grid:"Show Grid",dayMode:"Day Mode",coloredEdges:"Colorize Edges by Type",showProperty:"Always Show Relation Descriptions",devMode:"Developer Mode",extMode:"Extended Mode",combineMatchMode:"Combine Matches",starNewView:"Star in New Partial Graph",layout:"Layout","show-close-matches":"Show Close Matches","recalculate-layout":"Recalculate Layout","tight-layout":"Tight Layout","compound-layout":"Compound Layout","bb-chapter-search":"BB Chapter Search","ob-chapter-search":"OB Chapter Search","reset-view":"Reset Main Graph","move-match-nearby":"Move Matches Nearby","move-match-on-top":"Move Matches on Top of Each Other","subontology-connectivity":"Subontology Connectivity","change-title":"Change Title of Active Partial Graph",services:"Services","sparql-endpoint":"SPARQL Endpoint","rdf-browser":"RDF Browser",language:"Language",english:"English",german:"German",persian:"Persian",help:"Help",manual:"Manual",tutorial:"Tutorial","layout-help":"Layout Help","developer-doc":"Developer Documentation","youtube-channel":"YouTube Channel",troubleshooting:"Troubleshooting",contribute:"Contribute","project-homepage":"Project Homepage","meta-model":"Ontology Meta Model",about:"About SNIK Graph","bug-report":"Submit a Bug Report","feature-request":"Request new Feature for the Visualization","feedback-ontology":"Submit Feedback about the Ontology","deselect-all":"Deselect All","search-field":"Search Field","base-mode":"Basic Menu Items","context-menu":"Context Menu","incoming-star":"Incoming Star","outgoing-star":"Outgoing Star","combine-close-matches":"Combine Close Matches","class-use":"Class Use","show-instances":"Show Instances of this Class"},messageStrings:{"no-search-results-for":"No Search Results for","ontology-issue-warning":"Please note that this is only for feedback about the ontology! Please check if there is already an issue for your problem. If not, we will consider your feedback ASAP."},contextMenuStrings:{"edge-edit":"Edit or Report","edge-hide":"Hide","edge-description":"Description (if existing)","edge-confirm-link":"Confirm Link","edge-dev":"Developer","remove-permanently":"Remove Permanently",debug:"Debug",compound:"Compound",open:"Open","move-match-on-top":"Move Matches on Top of Each Other","move-match-nearby":"Move Matches Nearby","compound-star":"Star","compound-incoming-star":"Incoming Star","compound-outgoing-star":"Outgoing Star","compound-path-source":"Set Path as Source",edit:"Edit or Report","class-use":"Class Use",hide:"Hide",description:"Description (if existing)","set-path-source":"Set Path as Source",star:"Star","incoming-star":"Incoming Star","outgoing-star":"Outgoing Star",path:"Path",spiderworm:"Spiderworm",dev:"Developer",ext:"Extended",doublestar:"Doublestar",starpath:"Starpath",circlestar:"Circle Star",lodlive:"LodLive","move-selected":"Move Selected","close-match":"Close Match","show-instances":"Show Instances"}},w0={idStrings:{file:"Datei","load-sparql":"Lade aus dem SPARQL Endpunkt","load-session":"Lade gespeicherte Sitzung","load-view":"Lade Teilgraph","load-layout":"Lade Layout von Teilgraph","save-session":"Speichere aktuelle Sitzung","save-snik-graph":"Speichere kompletten Graph als Cytoscape Datei","new-view":"Neuen Teilgraph Ã¶ffnen","save-view":"Speichere aktuellen Teilgraphen","save-layout":"Speichere Layout des aktuellen Teilgraphen","recalculate-layout-replace":"Layout neu berechnen und im Browser-Cache platzieren","save-image-png-visible-region":"Speichere Bilddatei der aktuellen Ansicht als PNG","save-image-png-complete-partial-graph":"Speichere Bilddatei des kompletten Graphen als PNG","save-image-png-visible-region-high-res":"Speichere Bilddatei der aktuellen Ansicht als PNG (hohe AuflÃ¶sung)","save-image-png-complete-partial-graph-high-res":"Speichere Bilddatei des kompletten Graphen als PNG (hohe AuflÃ¶sung)","save-image-svg-visible-region":"Speichere Bilddatei der aktuellen Ansicht als SVG","save-image-svg-complete-partial-graph":"Speichere Bilddatei des kompletten Graphen als SVG",filter:"Filter",meta:"meta",bb:"BB",ob:"OB",ciox:"CioX",he:"HE",it:"IT",it4it:"IT4IT",bb2:"BB2",role:"Rolle",function:"Aufgabe",entitytype:"Objekttyp","show-classes-with-instances":"Klassen zeigen, die Instanzen haben","show-classes-without-instances":"Klassen zeigen, die keine Instanzen haben",subclassof:"subClassOf-Beziehungen","non-subclassof":"nicht-subClassOf-Beziehungen","inter-ontology-relations":"Beziehungen zwischen (Teil-)Ontologien","intra-ontology-relations":"Beziehungen innerhalb von (Teil-)Ontologien",options:"Optionen",separateColours:"Nach Farben trennen",cumulativeSearch:"Kumulative Suche",grid:"Raster anzeigen",dayMode:"Tag-Modus",coloredEdges:"Kanten nach Typ einfÃ¤rben",showProperty:"Relationsbeschreibungen immer zeigen",devMode:"Entwickler-Modus",extMode:"Erweiterter Modus",combineMatchMode:"Ãbereinstimmungen zusammenfassen",starNewView:"Stern in neuem Teilgraphen",layout:"Layout","show-close-matches":"Zeige close matches","recalculate-layout":"Layout neu berechnen","tight-layout":"Dichtes Layout","compound-layout":"verbundenes Layout","bb-chapter-search":"BB Kapitelsuche","ob-chapter-search":"OB Kapitelsuche","reset-view":"Ansicht des Gesamtgraphen zurÃ¼cksetzen","move-match-nearby":"Zeige close matches verbunden","move-match-on-top":"Zeige close matches Ã¼bereinander","subontology-connectivity":"KonnektivitÃ¤t zwischen Subontologien","change-title":"Titel des aktuellen Teilgraphen Ã¤ndern",services:"Services","sparql-endpoint":"SPARQL Endpunkt","rdf-browser":"RDF Browser",language:"Sprache",english:"Englisch",german:"Deutsch",persian:"Persisch",help:"Hilfe",manual:"Anleitung (Englisch)",tutorial:"Tutorial (Englisch)","layout-help":"Layouthilfe (Englisch)","developer-doc":"Entwicklerdokumentation (Englisch)","youtube-channel":"YouTube-Kanal (Englisch)",troubleshooting:"Hilfe zur Fehlerbehebung (Englisch)",contribute:"Beitragen (Englisch)","project-homepage":"Projektseite","meta-model":"Metamodell der Ontologie",about:"Ãber SNIK Graph","bug-report":"Fehler melden","feature-request":"Verbesserung fÃ¼r die Visualisierung vorschlagen","feedback-ontology":"Feedback zur Ontologie geben","deselect-all":"alle abwÃ¤hlen","search-field":"Suchfeld","base-mode":"Basismodus","context-menu":"KontextmenÃ¼","incoming-star":"eingehener Stern","outgoing-star":"ausgehender Stern","combine-close-matches":"kombiniere close matches","class-use":"Klassenbenutzung","show-instances":"Instanzen dieser Klasse zeigen"},messageStrings:{"no-search-results-for":"Keine Suchresultate fÃ¼r","ontology-issue-warning":"Bitte hier nur Feedback zur Ontologie hinterlassen! Bitte prÃ¼fen Sie vorher, ob es schon eine Issue mit diesem Thema gibt. Wenn nicht, bearbeiten wir Ihr Feedback so schnell wie mÃ¶glich."},contextMenuStrings:{"edge-edit":"Bearbeiten or melden","edge-hide":"Verstecken","edge-description":"Beschreibung (falls existent)","edge-confirm-link":"Verbindung BestÃ¤tigen","edge-dev":"Entwickler","remove-permanently":"Permanent Entfernen",debug:"Debug",compound:"Compound",open:"Ãffnen","move-match-on-top":"Gleiche aufeinander bewegen","move-match-nearby":"Gleiche nahe aneinander bewegen","compound-star":"Stern","compound-incoming-star":"Eingehender Stern","compound-outgoing-star":"Ausgehender Stern","compound-path-source":"Pfad als Quelle setzen",edit:"Bearbeiten oder melden","class-use":"Klassennutzung",hide:"Verstecken",description:"Beschreibung (falls existent)","set-path-source":"Pfad als Quelle setzen",star:"Stern","incoming-star":"Eingehender Stern","outgoing-star":"Ausgehender Stern",path:"Pfad",spiderworm:"Spiderworm",dev:"Entwickler",ext:"Erweitert",doublestar:"Doppelter Stern",starpath:"Sternenpfad",circlestar:"Kreisstern",lodlive:"LodLive","move-selected":"AusgewÃ¤hlte bewegen","close-match":"Nahe matches (close matches)","show-instances":"Instanzen zeigen"}};var Ss={exports:{}},x0=Ss.exports,Td;function C0(){return Td||(Td=1,(function(t){(function(e,r){t.exports?t.exports=r():e.log=r()})(x0,function(){var e=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],a={},o=null;function s(m,w){var b=m[w];if(typeof b.bind=="function")return b.bind(m);try{return Function.prototype.bind.call(b,m)}catch{return function(){return Function.prototype.apply.apply(b,[m,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===r?!1:m==="trace"&&n?u:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):e}function c(){for(var m=this.getLevel(),w=0;w<i.length;w++){var b=i[w];this[b]=w<m?e:this.methodFactory(b,m,this.name)}if(this.log=this.debug,typeof console===r&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==r&&(c.call(this),this[m].apply(this,arguments))}}function v(m,w,b){return l(m)||f.apply(this,arguments)}function g(m,w){var b=this,C,E,x,k="loglevel";typeof m=="string"?k+=":"+m:typeof m=="symbol"&&(k=void 0);function A(P){var L=(i[P]||"silent").toUpperCase();if(!(typeof window===r||!k)){try{window.localStorage[k]=L;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+L+";"}catch{}}}function p(){var P;if(!(typeof window===r||!k)){try{P=window.localStorage[k]}catch{}if(typeof P===r)try{var L=window.document.cookie,O=encodeURIComponent(k),N=L.indexOf(O+"=");N!==-1&&(P=/^([^;]+)/.exec(L.slice(N+O.length+1))[1])}catch{}return b.levels[P]===void 0&&(P=void 0),P}}function I(){if(!(typeof window===r||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function M(P){var L=P;if(typeof L=="string"&&b.levels[L.toUpperCase()]!==void 0&&(L=b.levels[L.toUpperCase()]),typeof L=="number"&&L>=0&&L<=b.levels.SILENT)return L;throw new TypeError("log.setLevel() called with invalid level: "+P)}b.name=m,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=w||v,b.getLevel=function(){return x??E??C},b.setLevel=function(P,L){return x=M(P),L!==!1&&A(x),c.call(b)},b.setDefaultLevel=function(P){E=M(P),p()||b.setLevel(P,!1)},b.resetLevel=function(){x=null,I(),c.call(b)},b.enableAll=function(P){b.setLevel(b.levels.TRACE,P)},b.disableAll=function(P){b.setLevel(b.levels.SILENT,P)},b.rebuild=function(){if(o!==b&&(C=M(o.getLevel())),c.call(b),o===b)for(var P in a)a[P].rebuild()},C=M(o?o.getLevel():"WARN");var B=p();B!=null&&(x=M(B)),c.call(b)}o=new g,o.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var b=a[w];return b||(b=a[w]=new g(w,o.methodFactory)),b};var h=typeof window!==r?window.log:void 0;return o.noConflict=function(){return typeof window!==r&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return a},o.default=o,o})})(Ss)),Ss.exports}var E0=C0();const _e=qi(E0),Tf={en:b0,de:w0,fa:{idStrings:{},messageStrings:{}}};let ua="en";function S0(t){return _e.debug(`Set language from ${ua} to ${t}.`),Tf[t]?(ua=t,!0):(_e.warn(`Language ${t} not found. Keeping language ${ua}.`),!1)}function Xp(){return ua}function uo(t,e){const r=Tf[ua];r.all||(r.all={...r.idStrings,...r.messageStrings,...r.contextMenuStrings});const n=r.all[t];return n?n+(e?` (${e.toUpperCase()})`:""):(_e.error("Internationalization string not found for key "+t),null)}function T0(){return Tf[ua].idStrings}function kd(){const t=T0(),e=[];for(const r of Object.keys(t)){const n=document.querySelectorAll(`[data-i18n="${r}"]`);if(n.length===0){e.push(r);continue}for(const i of n){const a=uo(r,i.getAttribute("hotkey"));switch(i.tagName){case"A":case"BUTTON":case"DIV":case"SPAN":i.textContent=a;break;default:_e.warn(`Cannot assign text "${a}" to element with i18n key ${r} because its tag type ${i.tagName} is unsupported.`)}}}e.length>0&&_e.debug(`UpdateHtml: i18n keys ${e.toString()} not used`)}const k0="25.01",A0="SIM, TIM & OIM",_0=1,D0=[["http://www.snik.eu/ontology/bb/ProjectInitiation",{x:1040,y:700}],["http://www.snik.eu/ontology/bb/Management",{x:950,y:50}],["http://www.snik.eu/ontology/bb/InformationManagement",{x:1400,y:50}],["http://www.snik.eu/ontology/bb/HealthInformationSystem",{x:630,y:940}],["http://www.snik.eu/ontology/bb/TacticalHISPlanning",{x:1250,y:550}],["http://www.snik.eu/ontology/bb/StrategicHISDirecting",{x:830,y:550}],["http://www.snik.eu/ontology/bb/InformationSystem",{x:730,y:900}],["http://www.snik.eu/ontology/bb/TacticalHISDirecting",{x:1400,y:550}],["http://www.snik.eu/ontology/bb/ProjectPlan",{x:1325,y:700}],["http://www.snik.eu/ontology/bb/StrategicInformationManagementPlan",{x:730,y:490}],["http://www.snik.eu/ontology/bb/OperationalHISMonitoring",{x:2120,y:550}],["http://www.snik.eu/ontology/bb/ArchitectureOfAnInformationSystem",{x:730,y:700}],["http://www.snik.eu/ontology/bb/HospitalManagement",{x:500,y:50}],["http://www.snik.eu/ontology/bb/ChiefInformationOfficer",{x:1400,y:-80}],["http://www.snik.eu/ontology/bb/TacticalInformationManagement",{x:1400,y:250}],["http://www.snik.eu/ontology/bb/TacticalHISMonitoring",{x:1550,y:550}],["http://www.snik.eu/ontology/bb/TopManagement",{x:500,y:-80}],["http://www.snik.eu/ontology/bb/StrategicInformationManagement",{x:830,y:250}],["http://www.snik.eu/ontology/bb/OperationalHISPlanning",{x:1820,y:550}],["http://www.snik.eu/ontology/bb/StrategicHISPlanning",{x:630,y:550}],["http://www.snik.eu/ontology/bb/ComputerBasedApplicationComponent",{x:1685,y:400}],["http://www.snik.eu/ontology/bb/HisArchitecture",{x:730,y:610}],["http://www.snik.eu/ontology/bb/OperationalHISDirecting",{x:1970,y:550}],["http://www.snik.eu/ontology/bb/OperationalInformationManagement",{x:1970,y:250}],["http://www.snik.eu/ontology/bb/ApplicationComponent",{x:1685,y:320}],["http://www.snik.eu/ontology/bb/StrategicHISMonitoring",{x:980,y:550}],["http://www.snik.eu/ontology/bb/HospitalInformationSystem",{x:630,y:860}]],M0={version:k0,title:A0,type:_0,graph:D0},Ad=new Map([[et.SUBTOP_ENTITY_TYPE,"rectangle"],[et.SUBTOP_ROLE,"ellipse"],[et.SUBTOP_FUNCTION,"triangle"],["http://www.snik.eu/ontology/meta/EntityType","rectangle"],["http://www.snik.eu/ontology/meta/Role","ellipse"],["http://www.snik.eu/ontology/meta/Function","triangle"]]),Uc=new Map([["ciox","rgb(80,255,250)"],["meta","rgb(255,80,80)"],["ob","rgb(255,173,30)"],["bb","rgb(30,152,255)"],["he","rgb(150,255,120)"],["it","rgb(204, 0, 204)"],["it4it","rgb(255, 255, 0)"],["bb2","rgb(0, 255, 255)"]]),I0=()=>Array.from(Uc.entries()).reduce((t,[e,r])=>t+` <span style='color:${r}'>&#9632;</span> ${e}`,""),P0={id:"snik",name:"SNIK",legend:"<span>&#9632; Entity Type</span> <span>&#9650; Role</span> <span>&#9679; Function</span> <span>* has Instances</span>"+I0(),title:"SNIK Ontology Graph",initialView:M0,snik:{defaultSubOntologies:["meta","bb","ob","ciox","he","it4it","bb2"],helperGraphs:["limes-exact","match"],center:"http://www.snik.eu/ontology/bb/ChiefInformationOfficer",centerDepth:1},links:{homepage:"https://www.snik.eu/",metamodel:"https://www.snik.eu/public/SNIK_Metamodell_V10.svg",feedbackOntology:"https://github.com/snikproject/ontology/issues",featureRequest:"https://github.com/snikproject/graph/issues/new?assignees=KonradHoeffner&labels=feature&projects=&template=featurerequest.yml",youtube:"https://www.youtube.com/channel/UCV8wbTpOdHurbaHqP0sAOng/featured",sparqlEndpoint:"http://www.hitontology.eu/sparql",rdfBrowser:"http://www.hitontology.eu/ontology"},style:{shape:t=>Ad.get(t.data(et.SUBTOP))||Ad.get(t.data(et.ID))||"hexagon",color:t=>{let e;if(typeof t=="string")e=t;else{const r=t.data(et.SOURCE),n=r==null?void 0:r.lastIndexOf("/");e=r==null?void 0:r.substring(n+1)}return Uc.get(e)||"orange"},colorMap:Uc},sparql:{endpoint:"https://www.snik.eu/sparql",graph:"http://www.snik.eu/ontology",instances:!1,queries:{nodes:t=>`
			PREFIX ov: <http://open.vocab.org/terms/>
			PREFIX meta: <http://www.snik.eu/ontology/meta/>
			SELECT DISTINCT(?c)
			GROUP_CONCAT(DISTINCT(CONCAT(?l,"@",lang(?l)));separator="|") AS ?l
			SAMPLE(?st) AS ?st
			?src
			SAMPLE(?inst) AS ?inst
			${t}
			{
			  ?c a [rdfs:subClassOf meta:Top].
			  OPTIONAL {?src ov:defines ?c.}
			  OPTIONAL {?c rdf:type ?st. FILTER(?st!=owl:Class)}
			  OPTIONAL {?c rdfs:label ?l.}
			  OPTIONAL {?inst a ?c.}
			}`,triples:(t,e,r,n)=>`PREFIX sniko: <http://www.snik.eu/ontology/>
			select  ?c ?p ?d ?g (MIN(?ax) as ?ax)
			${t}
			${e}
			{
			  graph ?g {?c ?p ?d.}
			  filter(?g!=sniko:)
			  {?c a [rdfs:subClassOf meta:Top].} ${n?" UNION {?c a [a [rdfs:subClassOf meta:Top]]}":""}
			  {?d a [rdfs:subClassOf meta:Top].} ${n?" UNION {?d a [a [rdfs:subClassOf meta:Top]]}":""}
			  filter(?p!=rdf:type)
			  OPTIONAL
			  {
				?ax a owl:Axiom;
				owl:annotatedSource ?c;
				owl:annotatedProperty ?p;
				owl:annotatedTarget ?d.
			  }
			}`}},filter:[[`node[${et.SOURCE}='meta']`,"meta"],[`node[${et.SOURCE}='bb']`,"bb"],[`node[${et.SOURCE}='ob']`,"ob"],[`node[${et.SOURCE}='ciox']`,"ciox"],[`node[${et.SOURCE}='he']`,"he"],[`node[${et.SOURCE}='it']`,"it"],[`node[${et.SOURCE}='it4it']`,"it4it"],[`node[${et.SOURCE}='bb2']`,"bb2"],[`node[${et.SUBTOP}='${et.SUBTOP_ROLE}']`,"role"],[`node[${et.SUBTOP}='${et.SUBTOP_FUNCTION}']`,"function"],[`node[${et.SUBTOP}='${et.SUBTOP_ENTITY_TYPE}']`,"entitytype"],["edge[p^='http://www.w3.org/2004/02/skos/core#']","inter-ontology-relations"],["edge[p!^='http://www.w3.org/2004/02/skos/core#']","intra-ontology-relations"]]},Fe={nodeSize:39,activeOptions:["edgecolor"],searchCloseMatch:!0,logLevelConsole:"debug",logLevelDisplay:"info",logLevelMemory:"debug",layoutCacheMinRecall:.95,layoutCacheMinPrecision:.5,language:"en",download:{image:{max:{width:5e3,height:4e3},standard:{width:1920,height:1920}}},ontology:P0,multiview:{initialTabs:1,warnOnSessionLoad:!0},git:{defaultIssueAssignee:"KonradHoeffner",issueLabels:{bug:"bug",confirmLink:"link",deleteTriple:"deletetriple",deleteClass:"deleteclass"},repo:{ontology:"https://github.com/snikproject/ontology",application:"https://github.com/snikproject/graph"}}},L0=[["meta","http://www.snik.eu/ontology/meta/"],["bb","http://www.snik.eu/ontology/bb/"],["ob","http://www.snik.eu/ontology/ob/"],["he","http://www.snik.eu/ontology/he/"],["ciox","http://www.snik.eu/ontology/ciox/"],["it4it","http://www.snik.eu/ontology/it4it/"],["it","http://www.snik.eu/ontology/it/"],["skos","http://www.w3.org/2004/02/skos/core#"],["rdfs","http://www.w3.org/2000/01/rdf-schema#"],["rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"],["owl","http://www.w3.org/2002/07/owl#"]];function en(t){for(const e of L0)t=t.replace(e[1],e[0]+":");return t}const B0="25.01",Jn=B0;function Lr(t){const e=document.getElementById(t);if(!e)throw new Error(`Element with id ${t} does not exist.`);return e}function Yp(t,e,r,n,i,a){let o=encodeURIComponent(r);n||(n=Fe.git.defaultIssueAssignee),i||(i=""),console.log(i),window.open(`${t}/issues/new?title=${encodeURIComponent(e)}&body=${o}&assignees=${n}&labels=${i}`)}function fu(t,e,r,n,i){const a=i.map(([o,s])=>`&${o}=${encodeURIComponent(s)}`).reduce((o,s)=>o+s);window.open(`${t}/issues/new?template=${r}.yml&assignees=${Fe.git.defaultIssueAssignee}&labels=${n}&title=${encodeURIComponent(e)}${a}`)}function O0(t){const e=en(t.data(et.ID));fu(Fe.git.repo.ontology,"Remove class "+e,"deleteclass",Fe.git.issueLabels.deleteClass,Object.entries({class:e}))}function R0(t){const e=en(t.data(jt.SOURCE)),r=en(t.data(jt.PROPERTY)),n=en(t.data(jt.TARGET));fu(Fe.git.repo.ontology,`Delete triple ${e} ${r} ${n}`,"deletetriple",Fe.git.issueLabels.deleteTriple,Object.entries({subject:e,predicate:r,object:n}))}function N0(t){t.data(jt.GRAPH,"http://www.snik.eu/ontology/match");const e=en(t.data(jt.SOURCE)),r=en(t.data(jt.TARGET));fu(Fe.git.repo.ontology,"Confirm "+Gc(t),"link",Fe.git.issueLabels.confirmLink,Object.entries({source:e,target:r}))}function Zp(){return`SNIK Graph version ${Jn}
commit date 2025-09-05T09:16:52+02:00
ci(deps): bump actions/setup-node from 4 to 5 in /.github/workflows
master/5deb4335a8547b86ee57bd32daf740499a30b4cb`}function F0(){const t=Zp(),e=_e.logs.filter(r=>!r.includes("%20")).reduce((r,n)=>r+`
`+n).substr(-6e3*3/4);fu(Fe.git.repo.application,"","bugreport",Fe.git.issueLabels.bug,Object.entries({version:t,logs:e}))}function Gc(t){return en(t.data(jt.SOURCE))+" "+en(t.data(jt.PROPERTY))+" "+en(t.data(jt.TARGET))}const Qp=t=>e=>{switch(e.key){case" ":case"Enter":t.click()}};function Jp(t,e,r){const n=document.createElement("div");return n.classList.add("dropdown-entry-checkboxtext"),n.innerText=e,r&&n.setAttribute("data-i18n",r),n.addEventListener("click",()=>{t.click()}),n}function z0(t,e,r){const n=Math.floor(t*6),i=t*6-n,a=r*(1-e),o=r*(1-i*e),s=r*(1-(1-i)*e);let u,l,c;switch(n%6){case 0:u=r,l=s,c=a;break;case 1:u=o,l=r,c=a;break;case 2:u=a,l=r,c=s;break;case 3:u=a,l=o,c=r;break;case 4:u=s,l=a,c=r;break;case 5:u=r,l=a,c=o;break}return"#"+("00"+Math.floor(u*255).toString(16)).slice(-2)+("00"+Math.floor(l*255).toString(16)).slice(-2)+("00"+Math.floor(c*255).toString(16)).slice(-2)}function q0(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);return e=e%180/360,e+=.5,z0(e,1,1)}var jp,Kp;const _d={style:[{selector:"node",css:{"min-zoomed-font-size":5,width:Fe.nodeSize,height:Fe.nodeSize,"font-size":11,"text-valign":"center","text-halign":"center","border-opacity":1,"border-width":function(t){return t.data(et.HAS_INSTANCE)?1:0},"font-family":"sans-serif","font-weight":"normal","background-opacity":.5882352941176471,"text-opacity":1,shape:(Kp=(jp=Fe.ontology)==null?void 0:jp.style)!=null&&Kp.shape?Fe.ontology.style.shape:"hexagon",label:function(t){let e=t.data(et.LABEL);if(!e)return t.data(et.ID);let r;if((r=e[Xp()])&&(r=r[0]))e=r;else{let n=!1;for(const i of[et.LABEL_ENGLISH,et.LABEL_GERMAN,et.LABEL_PERSIAN])if((r=e[i])&&r[0]){e=r[0],n=!0;break}if(!n){const i=Object.keys(e);i.length>0?e=e[i[0]]:e=t.data(et.ID)}}return t.data(et.HAS_INSTANCE)&&(e+="*"),e}}},{selector:"node.source",css:{"border-width":5}},{selector:"node.target",css:{"border-width":5}},{selector:"node.highlighted",css:{"border-width":5}},{selector:"node:selected",css:{"border-width":8}},{selector:"edge",css:{"z-compound-depth":"bottom",width:2,opacity:.22,"edge-text-rotation":"autorotate","text-margin-y":"-1em","min-zoomed-font-size":5,"font-size":11}},{selector:"edge.highlighted,edge:selected,edge.starmode",css:{"text-opacity":1,"mid-target-arrow-shape":function(t){switch(t.data(jt.PROPERTY)){case"http://www.snik.eu/ontology/meta/isAssociatedWith":case"http://www.w3.org/2004/02/skos/core#closeMatch":case"http://www.w3.org/2004/02/skos/core#relatedMatch":case"http://www.w3.org/2004/02/skos/core#related":case"http://www.w3.org/2004/02/skos/core#exactMatch":return"none"}return"triangle"},label:function(t){let e=t.data(jt.PROPERTY_LABEL);return t.data(jt.GRAPH)==="http://www.snik.eu/ontology/limes-exact"&&(e+=" â "),e}}},{selector:"edge.highlighted,edge:selected",css:{width:4,opacity:1}},{selector:".filtered",css:{display:"none"}},{selector:".hidden",css:{visibility:"hidden"}},{selector:"$node > node",css:{shape:"rectangle","border-width":10,"text-valign":"top","text-margin-y":"-0.7em","min-zoomed-font-size":7.5,"font-size":16,"background-opacity":"0"}},{selector:"node[i]",css:{shape:"star"}},{selector:"node",css:{"background-color":t=>{var r,n;return(n=(r=Fe.ontology)==null?void 0:r.style)==null?void 0:n.color(t)},color:"white"}}]};function Dd(t){const e=t.data(jt.PROPERTY);return q0(e)}const V0=[{selector:"edge",css:{color:Dd}},{selector:"edge:unselected",css:{"line-color":Dd}}],H0=[{selector:"edge",css:{label:function(t){let e=t.data(jt.PROPERTY_LABEL);return t.data(jt.GRAPH)==="http://www.snik.eu/ontology/limes-exact"&&(e+=" â "),e}}}],Md=[{selector:"node",css:{color:"white","border-color":"white"}},{selector:"node:selected",css:{"background-color":"rgb(255,255,0)"}},{selector:"node.source",css:{"border-color":"rgb(128,255,128)"}},{selector:"node.target",css:{"border-color":"rgb(255,90,90)"}},{selector:"edge",css:{color:"white"}},{selector:"edge:unselected",css:{"line-color":function(t){return String(t.data(jt.PROPERTY)).substring(0,36)==="http://www.w3.org/2004/02/skos/core#"?"rgb(255,255,190)":"rgb(252,252,252)"}}},{selector:"edge.starmode",css:{color:"rgb(128,128,128)","mid-target-arrow-color":"rgb(128,128,128)"}},{selector:"edge:selected,edge.highlighted",css:{color:"rgb(255,255,128)","line-color":"rgb(255,255,128)","mid-target-arrow-color":"rgb(255,255,128)"}}],$0=[{selector:"node",css:{color:"black","border-color":"black"}},{selector:"node:selected",css:{"background-color":"rgb(0,0,255)"}},{selector:"node.source",css:{"border-color":"rgb(128,0,128)"}},{selector:"node.target",css:{"border-color":"rgb(0,165,165)"}},{selector:"edge",css:{color:"black"}},{selector:"edge[!selected]",css:{"line-color":function(t){return String(t.data(jt.PROPERTY)).substring(0,36)==="http://www.w3.org/2004/02/skos/core#"?"rgb(140,130,10)":"rgb(110,110,110)"}}},{selector:"edge.starmode",css:{opacity:1,"mid-target-arrow-color":"rgb(128,128,128)",color:"rgb(20,20,20)"}},{selector:"edge:selected,edge.highlighted",css:{color:"rgb(0,0,128)","line-color":"rgb(0,0,128)","mid-target-arrow-color":"rgb(0,0,128)"}}];function Ca(t){const e=new Date;return{stop:function(r){const i=new Date().getTime()-e.getTime();_e.debug(t+" finished in "+i+" ms"+(r?` (${r})`:""))}}}var qs=function(){return qs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qs.apply(this,arguments)},W0={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},U0=(function(){function t(e){e===void 0&&(e={}),this.opts=qs(qs({},W0),e)}return t.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),this.el.style.position=this.opts.position,this.el.style.width="0",this.el.style.zIndex=this.opts.zIndex.toString(),this.el.style.left=this.opts.left,this.el.style.top=this.opts.top,this.el.style.transform="scale(".concat(this.opts.scale,")"),e&&e.insertBefore(this.el,e.firstChild||null),G0(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t})();function Id(t,e){return typeof t=="string"?t:t[e%t.length]}function G0(t,e){var r=Math.round(e.corners*e.width*500)/1e3+"px",n="none";e.shadow===!0?n="0 2px 4px #000":typeof e.shadow=="string"&&(n=e.shadow);for(var i=j0(n),a=0;a<e.lines;a++){var o=~~(360/e.lines*a+e.rotate),s=document.createElement("div");s.style.position="absolute",s.style.top="".concat(-e.width/2,"px"),s.style.width=e.length+e.width+"px",s.style.height=e.width+"px",s.style.background=Id(e.fadeColor,a),s.style.borderRadius=r,s.style.transformOrigin="left",s.style.transform="rotate(".concat(o,"deg) translateX(").concat(e.radius,"px)");var u=a*e.direction/e.lines/e.speed;u-=1/e.speed;var l=document.createElement("div");l.style.width="100%",l.style.height="100%",l.style.background=Id(e.color,a),l.style.borderRadius=r,l.style.boxShadow=K0(i,o),l.style.animation="".concat(1/e.speed,"s linear ").concat(u,"s infinite ").concat(e.animation),s.appendChild(l),t.appendChild(s)}}function j0(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,r=[],n=0,i=t.split(",");n<i.length;n++){var a=i[n],o=a.match(e);if(o!==null){var s=+o[2],u=+o[5],l=o[4],c=o[7];s===0&&!l&&(l=c),u===0&&!c&&(c=l),l===c&&r.push({prefix:o[1]||"",x:s,y:u,xUnits:l,yUnits:c,end:o[8]})}}return r}function K0(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n],o=X0(a.x,a.y,e);r.push(a.prefix+o[0]+a.xUnits+" "+o[1]+a.yUnits+a.end)}return r.join(", ")}function X0(t,e,r){var n=r*Math.PI/180,i=Math.sin(n),a=Math.cos(n);return[Math.round((t*a+e*i)*1e3)/1e3,Math.round((-t*i+e*a)*1e3)/1e3]}const Y0={lines:13,length:28,width:35,radius:84,scale:3,corners:1,color:"#ffffff",opacity:.6,rotate:35,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!0,position:"absolute"};let Qo=null,Jo=0;async function lo(t){window&&(Qo||(Qo=new U0(Y0)),Jo||(document.body.classList.add("waiting"),Qo.spin(document.body)),Jo++,await t(),Jo--,Jo<=0&&(document.body.classList.remove("waiting"),Qo.stop()))}const eg={PREFIX:"http://www.snik.eu/ontology/"};async function Rn(t,e,r=Fe.ontology.sparql.endpoint){const n=typeof window<"u";let i=r+"?query="+encodeURIComponent(t)+"&format=json";try{const s=(await(await fetch(i)).json()).results.bindings;return n&&console.groupCollapsed("SPARQL "+t.split(`
`,1)[0]+"..."),n&&s.length<100&&console.table(s.map(u=>Object.keys(u).reduce((l,c)=>(l[c]=u[c].value,l),{}))),_e.debug(t),_e.debug(i),n&&console.groupEnd(),s}catch(a){return _e.error(a),_e.error(`Error executing SPARQL query:
${t}
URL: ${i}

`),[]}}async function Z0(t){var a,o;const e=Ca("sparql-classes"),r=`
  PREFIX ov: <http://open.vocab.org/terms/>
  SELECT ?c
  GROUP_CONCAT(distinct(CONCAT(?l,"@",lang(?l)));separator="|") as ?l
  ?src
  ${t}
  {
    ?c a ?type.
    OPTIONAL {?c rdfs:label ?l.}
    OPTIONAL {?src ov:defines ?c.}
  }
  `,n=(o=(a=Fe.ontology.sparql)==null?void 0:a.queries)!=null&&o.nodes?Fe.ontology.sparql.queries.nodes(t):r,i=await Rn(n);return e.stop(i.length+` classes using ${Fe.ontology.name} query`),i}function tg(t){const e=t.split("|"),r={};for(const n of e){const[i,a]=n.split("@");i.trim()&&(r[a]||(r[a]=[]),r[a].push(i))}return r}async function Pd(t){const e=await Z0(t),r=[],n=new Set;for(let i=0;i<e.length;i++){let a;e[i].src&&(a=e[i].src.value,a.includes("http://www.snik.eu/ontology/")&&(a=a.replace("http://www.snik.eu/ontology/","")),n.add(a)),r.push({group:"nodes",data:{id:e[i].c.value,l:tg(e[i].l.value),...e[i].st&&{st:e[i].st.value.replace("http://www.snik.eu/ontology/meta/","").substring(0,1)},...a&&{source:a},...e[i].inst&&{inst:!0}}})}for(const i of n)!Fe.ontology.style.colorMap.has(i)&&Fe.ontology.style.color(i);return _e.debug(e.length+" Nodes loaded from SPARQL"),r}async function Q0(t){const e=Ca("sparql-classes"),r=`SELECT
  DISTINCT(?i)
  GROUP_CONCAT(DISTINCT(CONCAT(?l,"@",lang(?l)));separator="|") AS ?l
  ${t}
  {
    ?i a [a owl:Class].
    OPTIONAL {?i rdfs:label ?l.}
  }
  `,n=await Rn(r);return e.stop(n.length+" instances"),n}async function J0(t){const e=await Q0(t),r=[];for(let n=0;n<e.length;n++)r.push({group:"nodes",data:{id:e[n].i.value,l:tg(e[n].l.value),instance:!0}});return r}async function eb(t,e,r,n){var u,l;const i=Ca("sparql-properties"),a=`
    select  ?c ?p ?d
    ${t}
    {
      {?c ?p ?d.} ${n?" UNION {?p rdfs:domain ?c; rdfs:range ?d.}":""}
      {?c a owl:Class.} ${r?" UNION {?c a [a owl:Class]}":""}
      {?d a owl:Class.} ${r?" UNION {?d a [a owl:Class}":""}
    }`,o=(l=(u=Fe.ontology.sparql)==null?void 0:u.queries)!=null&&l.triples?Fe.ontology.sparql.queries.triples(t,e,n,r):a,s=await Rn(o);return i.stop(s.length+` properties using ${Fe.ontology.name} query`),s}async function tb(t,e,r,n){const i=await eb(t,e,r,n),a=[];for(let o=0;o<i.length;o++)a.push({group:"edges",data:{source:i[o].c.value,target:i[o].d.value,id:String(o),p:i[o].p.value,pl:i[o].p.value.replace(/.*[#/]/,""),...i[o].g&&{g:i[o].g.value},...i[o].ax&&{ax:i[o].ax.value}}});return _e.debug(i.length+" Edges loaded from SPARQL"),a}async function rb(t,e){if(!e)return Pd(t);const[r,n]=await Promise.all([Pd(t),J0(t)]);return r.concat(n)}async function rg(t,e,r=!1,n=!1){_e.debug(`Loading graph from endpoint ${Fe.ontology.sparql.endpoint} with graphs ${e.join(",")}.`);const i=e.map(u=>`FROM <${u}>`).reduce((u,l)=>u+`
`+l,""),a=i.replace(/FROM/g,"FROM NAMED"),[o,s]=await Promise.all([rb(i,r),tb(i,a,r,n)]);t.elements().remove(),t.add(o),t.add(s),t.elements().addClass("unfiltered")}const nb=[[`node[?${et.HAS_INSTANCE}]`,"show-classes-with-instances"],[`node[!${et.HAS_INSTANCE}]`,"show-classes-without-instances"],["edge[p='http://www.w3.org/2000/01/rdf-schema#subClassOf']","subclassof"],["edge[p!='http://www.w3.org/2000/01/rdf-schema#subClassOf']","non-subclassof"],...Fe.ontology.filter],es=[],ts=t=>We.views().map(e=>e.state.cy).forEach(e=>t(e));class To{constructor(e,r){At(this,"selector");At(this,"label");At(this,"checkbox");At(this,"a");At(this,"cssClass");At(this,"visible");this.selector=e;const n=document.createElement("input");n.type="checkbox",this.checkbox=n,n.classList.add("filterbox"),n.autocomplete="off",n.checked=!0,this.a=document.createElement("a"),this.a.classList.add("dropdown-entry"),this.a.appendChild(n),this.a.setAttribute("tabindex","-1"),this.a.addEventListener("keydown",Qp(n)),this.a.appendChild(Jp(n,"",r)),this.cssClass=`filter-${r}`,this.visible=!0,ts(i=>i.elements(this.selector).addClass(this.cssClass)),n.addEventListener("input",()=>this.setVisible(n.checked)),es.push(this)}toString(){return this.label}setVisible(e){if(this.visible===e)return;this.visible=e;const r=es.filter(n=>!n.visible).map(n=>n.selector);if(r.length===0)ts(n=>n.elements().removeClass("filtered")),ts(n=>n.elements().addClass("unfiltered")),_e.debug("All filters checked");else{const n=r.reduce((i,a)=>i+","+a);ts(i=>{const a=i.elements(n);a.addClass("filtered"),a.removeClass("unfiltered");const o=i.elements().not(a);o.removeClass("filtered"),o.addClass("unfiltered")}),_e.debug("filter "+n+" triggered")}}static addFilterEntries(e,r){for(const n of nb){const i=new To(n[0],n[1]);e.appendChild(i.a),r.push(i.a)}}static toJSON(){const e={};for(const r of es)e[r.label]=r.visible;return e}static fromJSON(e){for(const r of es)r.checkbox.checked=e[r.label],r.visible=e[r.label]}}function jc(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ib(t){if(Array.isArray(t))return t}function ab(t){if(Array.isArray(t))return jc(t)}function oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ob(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ig(n.key),n)}}function si(t,e,r){return e&&ob(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dr(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kf(t))||e){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||r.return==null||r.return()}finally{if(s)throw a}}}}function ng(t,e,r){return(e=ig(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sb(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ub(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function lb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xt(t,e){return ib(t)||ub(t,e)||kf(t,e)||lb()}function Vs(t){return ab(t)||sb(t)||kf(t)||cb()}function fb(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ig(t){var e=fb(t,"string");return typeof e=="symbol"?e:e+""}function Jt(t){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(t)}function kf(t,e){if(t){if(typeof t=="string")return jc(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jc(t,e):void 0}}var Zt=typeof window>"u"?null:window,Ld=Zt?Zt.navigator:null;Zt&&Zt.document;var db=Jt(""),ag=Jt({}),hb=Jt(function(){}),vb=typeof HTMLElement>"u"?"undefined":Jt(HTMLElement),ko=function(e){return e&&e.instanceString&&Ht(e.instanceString)?e.instanceString():null},Ze=function(e){return e!=null&&Jt(e)==db},Ht=function(e){return e!=null&&Jt(e)===hb},Mt=function(e){return!Or(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},xt=function(e){return e!=null&&Jt(e)===ag&&!Mt(e)&&e.constructor===Object},pb=function(e){return e!=null&&Jt(e)===ag},Be=function(e){return e!=null&&Jt(e)===Jt(1)&&!isNaN(e)},gb=function(e){return Be(e)&&Math.floor(e)===e},Hs=function(e){if(vb!=="undefined")return e!=null&&e instanceof HTMLElement},Or=function(e){return Ao(e)||og(e)},Ao=function(e){return ko(e)==="collection"&&e._private.single},og=function(e){return ko(e)==="collection"&&!e._private.single},Af=function(e){return ko(e)==="core"},sg=function(e){return ko(e)==="stylesheet"},mb=function(e){return ko(e)==="event"},ei=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},yb=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},bb=function(e){return xt(e)&&Be(e.x1)&&Be(e.x2)&&Be(e.y1)&&Be(e.y2)},wb=function(e){return pb(e)&&Ht(e.then)},xb=function(){return Ld&&Ld.userAgent.match(/msie|trident|edge/i)},ha=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var n=function(){var a=this,o=arguments,s,u=r.apply(a,o),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(a,o)),s};return n.cache={},n},_f=ha(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),du=ha(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),ug=ha(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Bd=function(e){return ei(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Gn=function(e,r){return e.slice(-1*r.length)===r},Qt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Cb="rgb[a]?\\(("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)(?:\\s*,\\s*("+Qt+"))?\\)",Eb="rgb[a]?\\((?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)(?:\\s*,\\s*(?:"+Qt+"))?\\)",Sb="hsl[a]?\\(("+Qt+")\\s*,\\s*("+Qt+"[%])\\s*,\\s*("+Qt+"[%])(?:\\s*,\\s*("+Qt+"))?\\)",Tb="hsl[a]?\\((?:"+Qt+")\\s*,\\s*(?:"+Qt+"[%])\\s*,\\s*(?:"+Qt+"[%])(?:\\s*,\\s*(?:"+Qt+"))?\\)",kb="\\#[0-9a-fA-F]{3}",Ab="\\#[0-9a-fA-F]{6}",lg=function(e,r){return e<r?-1:e>r?1:0},_b=function(e,r){return-1*lg(e,r)},tt=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];t[o]=n[o]}}return t},Db=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,i,a,o=16;return r?(n=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,i,a]}},Mb=function(e){var r,n,i,a,o,s,u,l;function c(h,m,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?h+(m-h)*6*w:w<1/2?m:w<2/3?h+(m-h)*(2/3-w)*6:h}var f=new RegExp("^"+Sb+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,a=parseFloat(f[3]),a<0||a>100)||(a=a/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=u=l=Math.round(a*255);else{var v=a<.5?a*(1+i):a+i-a*i,g=2*a-v;s=Math.round(255*c(g,v,n+1/3)),u=Math.round(255*c(g,v,n)),l=Math.round(255*c(g,v,n-1/3))}r=[s,u,l,o]}return r},Ib=function(e){var r,n=new RegExp("^"+Cb+"$").exec(e);if(n){r=[];for(var i=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},Pb=function(e){return Lb[e.toLowerCase()]},cg=function(e){return(Mt(e)?e:null)||Pb(e)||Db(e)||Ib(e)||Mb(e)},Lb={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fg=function(e){for(var r=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(xt(o))throw Error("Tried to set map with object key");a<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},dg=function(e){for(var r=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(xt(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zu,Od;function Do(){if(Od)return Zu;Od=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Zu=t,Zu}var Qu,Rd;function Bb(){if(Rd)return Qu;Rd=1;var t=typeof rs=="object"&&rs&&rs.Object===Object&&rs;return Qu=t,Qu}var Ju,Nd;function hu(){if(Nd)return Ju;Nd=1;var t=Bb(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Ju=r,Ju}var el,Fd;function Ob(){if(Fd)return el;Fd=1;var t=hu(),e=function(){return t.Date.now()};return el=e,el}var tl,zd;function Rb(){if(zd)return tl;zd=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return tl=e,tl}var rl,qd;function Nb(){if(qd)return rl;qd=1;var t=Rb(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return rl=r,rl}var nl,Vd;function Df(){if(Vd)return nl;Vd=1;var t=hu(),e=t.Symbol;return nl=e,nl}var il,Hd;function Fb(){if(Hd)return il;Hd=1;var t=Df(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function a(o){var s=r.call(o,i),u=o[i];try{o[i]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(s?o[i]=u:delete o[i]),c}return il=a,il}var al,$d;function zb(){if($d)return al;$d=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return al=r,al}var ol,Wd;function hg(){if(Wd)return ol;Wd=1;var t=Df(),e=Fb(),r=zb(),n="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?i:n:a&&a in Object(s)?e(s):r(s)}return ol=o,ol}var sl,Ud;function qb(){if(Ud)return sl;Ud=1;function t(e){return e!=null&&typeof e=="object"}return sl=t,sl}var ul,Gd;function Mo(){if(Gd)return ul;Gd=1;var t=hg(),e=qb(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return ul=n,ul}var ll,jd;function Vb(){if(jd)return ll;jd=1;var t=Nb(),e=Do(),r=Mo(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=t(l);var f=a.test(l);return f||o.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return ll=u,ll}var cl,Kd;function Hb(){if(Kd)return cl;Kd=1;var t=Do(),e=Ob(),r=Vb(),n="Expected a function",i=Math.max,a=Math.min;function o(s,u,l){var c,f,v,g,h,m,w=0,b=!1,C=!1,E=!0;if(typeof s!="function")throw new TypeError(n);u=r(u)||0,t(l)&&(b=!!l.leading,C="maxWait"in l,v=C?i(r(l.maxWait)||0,u):v,E="trailing"in l?!!l.trailing:E);function x(O){var N=c,z=f;return c=f=void 0,w=O,g=s.apply(z,N),g}function k(O){return w=O,h=setTimeout(I,u),b?x(O):g}function A(O){var N=O-m,z=O-w,W=u-N;return C?a(W,v-z):W}function p(O){var N=O-m,z=O-w;return m===void 0||N>=u||N<0||C&&z>=v}function I(){var O=e();if(p(O))return M(O);h=setTimeout(I,A(O))}function M(O){return h=void 0,E&&c?x(O):(c=f=void 0,g)}function B(){h!==void 0&&clearTimeout(h),w=0,c=m=f=h=void 0}function P(){return h===void 0?g:M(e())}function L(){var O=e(),N=p(O);if(c=arguments,f=this,m=O,N){if(h===void 0)return k(m);if(C)return clearTimeout(h),h=setTimeout(I,u),x(m)}return h===void 0&&(h=setTimeout(I,u)),g}return L.cancel=B,L.flush=P,L}return cl=o,cl}var $b=Hb(),Io=_o($b),fl=Zt?Zt.performance:null,vg=fl&&fl.now?function(){return fl.now()}:function(){return Date.now()},Wb=(function(){if(Zt){if(Zt.requestAnimationFrame)return function(t){Zt.requestAnimationFrame(t)};if(Zt.mozRequestAnimationFrame)return function(t){Zt.mozRequestAnimationFrame(t)};if(Zt.webkitRequestAnimationFrame)return function(t){Zt.webkitRequestAnimationFrame(t)};if(Zt.msRequestAnimationFrame)return function(t){Zt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(vg())},1e3/60)}})(),$s=function(e){return Wb(e)},Pn=vg,Di=9261,pg=65599,na=5381,gg=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Di,n=r,i;i=e.next(),!i.done;)n=n*pg+i.value|0;return n},co=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Di;return r*pg+e|0},fo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:na;return(r<<5)+r+e|0},Ub=function(e,r){return e*2097152+r},$n=function(e){return e[0]*2097152+e[1]},ns=function(e,r){return[co(e[0],r[0]),fo(e[1],r[1])]},Xd=function(e,r){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return gg(o,r)},Bi=function(e,r){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return gg(o,r)},mg=function(){return Gb(arguments)},Gb=function(e){for(var r,n=0;n<e.length;n++){var i=e[n];n===0?r=Bi(i):r=Bi(i,r)}return r};function jb(t,e,r,n,i){var a=i*Math.PI/180,o=Math.cos(a)*(t-r)-Math.sin(a)*(e-n)+r,s=Math.sin(a)*(t-r)+Math.cos(a)*(e-n)+n;return{x:o,y:s}}var Kb=function(e,r,n,i,a,o){return{x:(e-n)*a+n,y:(r-i)*o+i}};function Xb(t,e,r){if(r===0)return t;var n=(e.x1+e.x2)/2,i=(e.y1+e.y2)/2,a=e.w/e.h,o=1/a,s=jb(t.x,t.y,n,i,r),u=Kb(s.x,s.y,n,i,a,o);return{x:u.x,y:u.y}}var Yd=!0,Yb=console.warn!=null,Zb=console.trace!=null,Mf=Number.MAX_SAFE_INTEGER||9007199254740991,yg=function(){return!0},Ws=function(){return!1},Zd=function(){return 0},If=function(){},Ft=function(e){throw new Error(e)},bg=function(e){if(e!==void 0)Yd=!!e;else return Yd},Tt=function(e){bg()&&(Yb?console.warn(e):(console.log(e),Zb&&console.trace()))},Qb=function(e){return tt({},e)},gn=function(e){return e==null?e:Mt(e)?e.slice():xt(e)?Qb(e):e},Jb=function(e){return e.slice()},wg=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},ew={},xg=function(){return ew},fr=function(e){var r=Object.keys(e);return function(n){for(var i={},a=0;a<r.length;a++){var o=r[a],s=n==null?void 0:n[o];i[o]=s===void 0?e[o]:s}return i}},ti=function(e,r,n){for(var i=e.length-1;i>=0;i--)e[i]===r&&e.splice(i,1)},Pf=function(e){e.splice(0,e.length)},tw=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];e.push(i)}},Ar=function(e,r,n){return n&&(r=ug(n,r)),e[r]},Dn=function(e,r,n,i){n&&(r=ug(n,r)),e[r]=i},rw=(function(){function t(){oi(this,t),this._obj={}}return si(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])})(),Mn=typeof Map<"u"?Map:rw,nw="undefined",iw=(function(){function t(e){if(oi(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return si(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])})(),Ea=(typeof Set>"u"?"undefined":Jt(Set))!==nw?Set:iw,vu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Af(e)){Ft("An element must have a core reference and parameters set");return}var i=r.group;if(i==null&&(r.data&&r.data.source!=null&&r.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Ft("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?i==="edges":!!r.pannable,active:!1,classes:new Ea,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),u=e.zoom();a.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];Mt(r.classes)?l=r.classes:Ze(r.classes)&&(l=r.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var v=l[c];!v||v===""||a.classes.add(v)}this.createEmitter(),(n===void 0||n)&&this.restore();var g=r.style||r.css;g&&(Tt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))},Qd=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var o;xt(n)&&!Or(n)&&(o=n,n=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!Ht(i)?i:a,i=Ht(i)?i:function(){};for(var s=this._private.cy,u=n=Ze(n)?this.filter(n):n,l=[],c=[],f={},v={},g={},h=0,m,w=this.byGroup(),b=w.nodes,C=w.edges,E=0;E<u.length;E++){var x=u[E],k=x.id();x.isNode()&&(l.unshift(x),e.bfs&&(g[k]=!0,c.push(x)),v[k]=0)}for(var A=function(){var O=e.bfs?l.shift():l.pop(),N=O.id();if(e.dfs){if(g[N])return 0;g[N]=!0,c.push(O)}var z=v[N],W=f[N],q=W!=null?W.source():null,j=W!=null?W.target():null,ie=W==null?void 0:O.same(q)?j[0]:q[0],ne;if(ne=i(O,W,ie,h++,z),ne===!0)return m=O,1;if(ne===!1)return 1;for(var Y=O.connectedEdges().filter(function(Q){return(!a||Q.source().same(O))&&C.has(Q)}),H=0;H<Y.length;H++){var G=Y[H],K=G.connectedNodes().filter(function(Q){return!Q.same(O)&&b.has(Q)}),V=K.id();K.length!==0&&!g[V]&&(K=K[0],l.push(K),e.bfs&&(g[V]=!0,c.push(K)),f[V]=G,v[V]=v[N]+1)}},p;l.length!==0&&(p=A(),!(p!==0&&p===1)););for(var I=s.collection(),M=0;M<c.length;M++){var B=c[M],P=f[B.id()];P!=null&&I.push(P),I.push(B)}return{path:s.collection(I),found:s.collection(m)}}},ho={breadthFirstSearch:Qd({bfs:!0}),depthFirstSearch:Qd({dfs:!0})};ho.bfs=ho.breadthFirstSearch;ho.dfs=ho.depthFirstSearch;var Ts={exports:{}},aw=Ts.exports,Jd;function ow(){return Jd||(Jd=1,(function(t,e){(function(){var r,n,i,a,o,s,u,l,c,f,v,g,h,m,w;i=Math.floor,f=Math.min,n=function(b,C){return b<C?-1:b>C?1:0},c=function(b,C,E,x,k){var A;if(E==null&&(E=0),k==null&&(k=n),E<0)throw new Error("lo must be non-negative");for(x==null&&(x=b.length);E<x;)A=i((E+x)/2),k(C,b[A])<0?x=A:E=A+1;return[].splice.apply(b,[E,E-E].concat(C)),C},s=function(b,C,E){return E==null&&(E=n),b.push(C),m(b,0,b.length-1,E)},o=function(b,C){var E,x;return C==null&&(C=n),E=b.pop(),b.length?(x=b[0],b[0]=E,w(b,0,C)):x=E,x},l=function(b,C,E){var x;return E==null&&(E=n),x=b[0],b[0]=C,w(b,0,E),x},u=function(b,C,E){var x;return E==null&&(E=n),b.length&&E(b[0],C)<0&&(x=[b[0],C],C=x[0],b[0]=x[1],w(b,0,E)),C},a=function(b,C){var E,x,k,A,p,I;for(C==null&&(C=n),A=(function(){I=[];for(var M=0,B=i(b.length/2);0<=B?M<B:M>B;0<=B?M++:M--)I.push(M);return I}).apply(this).reverse(),p=[],x=0,k=A.length;x<k;x++)E=A[x],p.push(w(b,E,C));return p},h=function(b,C,E){var x;if(E==null&&(E=n),x=b.indexOf(C),x!==-1)return m(b,0,x,E),w(b,x,E)},v=function(b,C,E){var x,k,A,p,I;if(E==null&&(E=n),k=b.slice(0,C),!k.length)return k;for(a(k,E),I=b.slice(C),A=0,p=I.length;A<p;A++)x=I[A],u(k,x,E);return k.sort(E).reverse()},g=function(b,C,E){var x,k,A,p,I,M,B,P,L;if(E==null&&(E=n),C*10<=b.length){if(A=b.slice(0,C).sort(E),!A.length)return A;for(k=A[A.length-1],B=b.slice(C),p=0,M=B.length;p<M;p++)x=B[p],E(x,k)<0&&(c(A,x,0,null,E),A.pop(),k=A[A.length-1]);return A}for(a(b,E),L=[],I=0,P=f(C,b.length);0<=P?I<P:I>P;0<=P?++I:--I)L.push(o(b,E));return L},m=function(b,C,E,x){var k,A,p;for(x==null&&(x=n),k=b[E];E>C;){if(p=E-1>>1,A=b[p],x(k,A)<0){b[E]=A,E=p;continue}break}return b[E]=k},w=function(b,C,E){var x,k,A,p,I;for(E==null&&(E=n),k=b.length,I=C,A=b[C],x=2*C+1;x<k;)p=x+1,p<k&&!(E(b[x],b[p])<0)&&(x=p),b[C]=b[x],C=x,x=2*C+1;return b[C]=A,m(b,I,C,E)},r=(function(){b.push=s,b.pop=o,b.replace=l,b.pushpop=u,b.heapify=a,b.updateItem=h,b.nlargest=v,b.nsmallest=g;function b(C){this.cmp=C??n,this.nodes=[]}return b.prototype.push=function(C){return s(this.nodes,C,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(C){return this.nodes.indexOf(C)!==-1},b.prototype.replace=function(C){return l(this.nodes,C,this.cmp)},b.prototype.pushpop=function(C){return u(this.nodes,C,this.cmp)},b.prototype.heapify=function(){return a(this.nodes,this.cmp)},b.prototype.updateItem=function(C){return h(this.nodes,C,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var C;return C=new b,C.nodes=this.nodes.slice(0),C},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b})(),(function(b,C){return t.exports=C()})(this,function(){return r})}).call(aw)})(Ts)),Ts.exports}var dl,eh;function sw(){return eh||(eh=1,dl=ow()),dl}var uw=sw(),Po=_o(uw),lw=fr({root:null,weight:function(e){return 1},directed:!1}),cw={dijkstra:function(e){if(!xt(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=lw(e),i=n.root,a=n.weight,o=n.directed,s=this,u=a,l=Ze(i)?this.filter(i)[0]:i[0],c={},f={},v={},g=this.byGroup(),h=g.nodes,m=g.edges;m.unmergeBy(function(z){return z.isLoop()});for(var w=function(W){return c[W.id()]},b=function(W,q){c[W.id()]=q,C.updateItem(W)},C=new Po(function(z,W){return w(z)-w(W)}),E=0;E<h.length;E++){var x=h[E];c[x.id()]=x.same(l)?0:1/0,C.push(x)}for(var k=function(W,q){for(var j=(o?W.edgesTo(q):W.edgesWith(q)).intersect(m),ie=1/0,ne,Y=0;Y<j.length;Y++){var H=j[Y],G=u(H);(G<ie||!ne)&&(ie=G,ne=H)}return{edge:ne,dist:ie}};C.size()>0;){var A=C.pop(),p=w(A),I=A.id();if(v[I]=p,p!==1/0)for(var M=A.neighborhood().intersect(h),B=0;B<M.length;B++){var P=M[B],L=P.id(),O=k(A,P),N=p+O.dist;N<w(P)&&(b(P,N),f[L]={node:A,edge:O.edge})}}return{distanceTo:function(W){var q=Ze(W)?h.filter(W)[0]:W[0];return v[q.id()]},pathTo:function(W){var q=Ze(W)?h.filter(W)[0]:W[0],j=[],ie=q,ne=ie.id();if(q.length>0)for(j.unshift(q);f[ne];){var Y=f[ne];j.unshift(Y.edge),j.unshift(Y.node),ie=Y.node,ne=ie.id()}return s.spawn(j)}}}},fw={kruskal:function(e){e=e||function(E){return 1};for(var r=this.byGroup(),n=r.nodes,i=r.edges,a=n.length,o=new Array(a),s=n,u=function(x){for(var k=0;k<o.length;k++){var A=o[k];if(A.has(x))return k}},l=0;l<a;l++)o[l]=this.spawn(n[l]);for(var c=i.sort(function(E,x){return e(E)-e(x)}),f=0;f<c.length;f++){var v=c[f],g=v.source()[0],h=v.target()[0],m=u(g),w=u(h),b=o[m],C=o[w];m!==w&&(s.merge(v),b.merge(C),o.splice(w,1))}return s}},dw=fr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),hw={aStar:function(e){var r=this.cy(),n=dw(e),i=n.root,a=n.goal,o=n.heuristic,s=n.directed,u=n.weight;i=r.collection(i)[0],a=r.collection(a)[0];var l=i.id(),c=a.id(),f={},v={},g={},h=new Po(function(ne,Y){return v[ne.id()]-v[Y.id()]}),m=new Ea,w={},b={},C=function(Y,H){h.push(Y),m.add(H)},E,x,k=function(){E=h.pop(),x=E.id(),m.delete(x)},A=function(Y){return m.has(Y)};C(i,l),f[l]=0,v[l]=o(i);for(var p=0;h.size()>0;){if(k(),p++,x===c){for(var I=[],M=a,B=c,P=b[B];I.unshift(M),P!=null&&I.unshift(P),M=w[B],M!=null;)B=M.id(),P=b[B];return{found:!0,distance:f[x],path:this.spawn(I),steps:p}}g[x]=!0;for(var L=E._private.edges,O=0;O<L.length;O++){var N=L[O];if(this.hasElementWithId(N.id())&&!(s&&N.data("source")!==x)){var z=N.source(),W=N.target(),q=z.id()!==x?z:W,j=q.id();if(this.hasElementWithId(j)&&!g[j]){var ie=f[x]+u(N);if(!A(j)){f[j]=ie,v[j]=ie+o(q),C(q,j),w[j]=E,b[j]=N;continue}ie<f[j]&&(f[j]=ie,v[j]=ie+o(q),w[j]=E,b[j]=N)}}}}return{found:!1,distance:void 0,path:void 0,steps:p}}},vw=fr({weight:function(e){return 1},directed:!1}),pw={floydWarshall:function(e){for(var r=this.cy(),n=vw(e),i=n.weight,a=n.directed,o=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,v=function(G){return u.indexOf(G)},g=function(G){return u[G]},h=new Array(f),m=0;m<f;m++){var w=m%c,b=(m-w)/c;b===w?h[m]=0:h[m]=1/0}for(var C=new Array(f),E=new Array(f),x=0;x<l.length;x++){var k=l[x],A=k.source()[0],p=k.target()[0];if(A!==p){var I=v(A),M=v(p),B=I*c+M,P=o(k);if(h[B]>P&&(h[B]=P,C[B]=M,E[B]=k),!a){var L=M*c+I;!a&&h[L]>P&&(h[L]=P,C[L]=I,E[L]=k)}}}for(var O=0;O<c;O++)for(var N=0;N<c;N++)for(var z=N*c+O,W=0;W<c;W++){var q=N*c+W,j=O*c+W;h[z]+h[j]<h[q]&&(h[q]=h[z]+h[j],C[q]=C[z])}var ie=function(G){return(Ze(G)?r.filter(G):G)[0]},ne=function(G){return v(ie(G))},Y={distance:function(G,K){var V=ne(G),Q=ne(K);return h[V*c+Q]},path:function(G,K){var V=ne(G),Q=ne(K),oe=g(V);if(V===Q)return oe.collection();if(C[V*c+Q]==null)return r.collection();var he=r.collection(),re=V,Z;for(he.merge(oe);V!==Q;)re=V,V=C[V*c+Q],Z=E[re*c+V],he.merge(Z),he.merge(g(V));return he}};return Y}},gw=fr({weight:function(e){return 1},directed:!1,root:null}),mw={bellmanFord:function(e){var r=this,n=gw(e),i=n.weight,a=n.directed,o=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,v=c.nodes,g=v.length,h=new Mn,m=!1,w=[];o=l.collection(o)[0],f.unmergeBy(function(Le){return Le.isLoop()});for(var b=f.length,C=function(Ue){var Ee=h.get(Ue.id());return Ee||(Ee={},h.set(Ue.id(),Ee)),Ee},E=function(Ue){return(Ze(Ue)?l.$(Ue):Ue)[0]},x=function(Ue){return C(E(Ue)).dist},k=function(Ue){for(var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,ge=E(Ue),xe=[],Te=ge;;){if(Te==null)return r.spawn();var Me=C(Te),ze=Me.edge,Se=Me.pred;if(xe.unshift(Te[0]),Te.same(Ee)&&xe.length>0)break;ze!=null&&xe.unshift(ze),Te=Se}return u.spawn(xe)},A=0;A<g;A++){var p=v[A],I=C(p);p.same(o)?I.dist=0:I.dist=1/0,I.pred=null,I.edge=null}for(var M=!1,B=function(Ue,Ee,ge,xe,Te,Me){var ze=xe.dist+Me;ze<Te.dist&&!ge.same(xe.edge)&&(Te.dist=ze,Te.pred=Ue,Te.edge=ge,M=!0)},P=1;P<g;P++){M=!1;for(var L=0;L<b;L++){var O=f[L],N=O.source(),z=O.target(),W=s(O),q=C(N),j=C(z);B(N,z,O,q,j,W),a||B(z,N,O,j,q,W)}if(!M)break}if(M)for(var ie=[],ne=0;ne<b;ne++){var Y=f[ne],H=Y.source(),G=Y.target(),K=s(Y),V=C(H).dist,Q=C(G).dist;if(V+K<Q||!a&&Q+K<V)if(m||(Tt("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var oe=[];V+K<Q&&oe.push(H),!a&&Q+K<V&&oe.push(G);for(var he=oe.length,re=0;re<he;re++){var Z=oe[re],ue=[Z];ue.push(C(Z).edge);for(var ae=C(Z).pred;ue.indexOf(ae)===-1;)ue.push(ae),ue.push(C(ae).edge),ae=C(ae).pred;ue=ue.slice(ue.indexOf(ae));for(var me=ue[0].id(),Ae=0,Ve=2;Ve<ue.length;Ve+=2)ue[Ve].id()<me&&(me=ue[Ve].id(),Ae=Ve);ue=ue.slice(Ae).concat(ue.slice(0,Ae)),ue.push(ue[0]);var rt=ue.map(function(Le){return Le.id()}).join(",");ie.indexOf(rt)===-1&&(w.push(u.spawn(ue)),ie.push(rt))}}else break}return{distanceTo:x,pathTo:k,hasNegativeWeightCycle:m,negativeWeightCycles:w}}},yw=Math.sqrt(2),bw=function(e,r,n){n.length===0&&Ft("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],o=i[2],s=r[a],u=r[o],l=n,c=l.length-1;c>=0;c--){var f=l[c],v=f[1],g=f[2];(r[v]===s&&r[g]===u||r[v]===u&&r[g]===s)&&l.splice(c,1)}for(var h=0;h<l.length;h++){var m=l[h];m[1]===u?(l[h]=m.slice(),l[h][1]=s):m[2]===u&&(l[h]=m.slice(),l[h][2]=s)}for(var w=0;w<r.length;w++)r[w]===u&&(r[w]=s);return l},hl=function(e,r,n,i){for(;n>i;){var a=Math.floor(Math.random()*r.length);r=bw(a,e,r),n--}return r},ww={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,i=r.edges;i.unmergeBy(function(j){return j.isLoop()});var a=n.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/yw);if(a<2){Ft("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var v=1/0,g=[],h=new Array(a),m=new Array(a),w=new Array(a),b=function(ie,ne){for(var Y=0;Y<a;Y++)ne[Y]=ie[Y]},C=0;C<=s;C++){for(var E=0;E<a;E++)m[E]=E;var x=hl(m,l.slice(),a,u),k=x.slice();b(m,w);var A=hl(m,x,u,2),p=hl(w,k,u,2);A.length<=p.length&&A.length<v?(v=A.length,g=A,b(m,h)):p.length<=A.length&&p.length<v&&(v=p.length,g=p,b(w,h))}for(var I=this.spawn(g.map(function(j){return i[j[0]]})),M=this.spawn(),B=this.spawn(),P=h[0],L=0;L<h.length;L++){var O=h[L],N=n[L];O===P?M.merge(N):B.merge(N)}var z=function(ie){var ne=e.spawn();return ie.forEach(function(Y){ne.merge(Y),Y.connectedEdges().forEach(function(H){e.contains(H)&&!I.contains(H)&&ne.merge(H)})}),ne},W=[z(M),z(B)],q={cut:I,components:W,partition1:M,partition2:B};return q}},vl,xw=function(e){return{x:e.x,y:e.y}},pu=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Cg=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},aa=function(e){return{x:e[0],y:e[1]}},Cw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=r;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},Ew=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=r;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},Sw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},Tw=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}a&&e.sort(function(v,g){return v-g});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},kw=function(e){return Math.PI*e/180},is=function(e,r){return Math.atan2(r,e)-Math.PI/2},Lf=Math.log2||function(t){return Math.log(t)/Math.log(2)},Bf=function(e){return e>0?1:e<0?-1:0},Oi=function(e,r){return Math.sqrt(Ti(e,r))},Ti=function(e,r){var n=r.x-e.x,i=r.y-e.y;return n*n+i*i},Aw=function(e){for(var r=e.length,n=0,i=0;i<r;i++)n+=e[i];for(var a=0;a<r;a++)e[a]=e[a]/n;return e},rr=function(e,r,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*r+i*i*n},la=function(e,r,n,i){return{x:rr(e.x,r.x,n.x,i),y:rr(e.y,r.y,n.y,i)}},_w=function(e,r,n,i){var a={x:r.x-e.x,y:r.y-e.y},o=Oi(e,r),s={x:a.x/o,y:a.y/o};return n=n??0,i=i??n*o,{x:e.x+s.x*i,y:e.y+s.y*i}},vo=function(e,r,n){return Math.max(e,Math.min(n,r))},Sr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Dw=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Mw=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Iw=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Eg=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},ks=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},As=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,o;if(r.length===1)n=i=a=o=r[0];else if(r.length===2)n=a=r[0],o=i=r[1];else if(r.length===4){var s=Xt(r,4);n=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},th=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Of=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},jn=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},rh=function(e,r){return jn(e,r.x,r.y)},Sg=function(e,r){return jn(e,r.x1,r.y1)&&jn(e,r.x2,r.y2)},Pw=(vl=Math.hypot)!==null&&vl!==void 0?vl:function(t,e){return Math.sqrt(t*t+e*e)};function Lw(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var r=function(I,M){return{x:I.x+M.x,y:I.y+M.y}},n=function(I,M){return{x:I.x-M.x,y:I.y-M.y}},i=function(I,M){return{x:I.x*M,y:I.y*M}},a=function(I,M){return I.x*M.y-I.y*M.x},o=function(I){var M=Pw(I.x,I.y);return M===0?{x:0,y:0}:{x:I.x/M,y:I.y/M}},s=function(I){for(var M=0,B=0;B<I.length;B++){var P=I[B],L=I[(B+1)%I.length];M+=P.x*L.y-L.x*P.y}return M/2},u=function(I,M,B,P){var L=n(M,I),O=n(P,B),N=a(L,O);if(Math.abs(N)<1e-9)return r(I,i(L,.5));var z=a(n(B,I),O)/N;return r(I,i(L,z))},l=t.map(function(p){return{x:p.x,y:p.y}});s(l)<0&&l.reverse();for(var c=l.length,f=[],v=0;v<c;v++){var g=l[v],h=l[(v+1)%c],m=n(h,g),w=o({x:m.y,y:-m.x});f.push(w)}for(var b=f.map(function(p,I){var M=r(l[I],i(p,e)),B=r(l[(I+1)%c],i(p,e));return{p1:M,p2:B}}),C=[],E=0;E<c;E++){var x=b[(E-1+c)%c],k=b[E],A=u(x.p1,x.p2,k.p1,k.p2);C.push(A)}return C}function Bw(t,e,r,n,i,a){var o=$w(t,e,r,n,i),s=Lw(o,a),u=Sr();return s.forEach(function(l){return Eg(u,l.x,l.y)}),u}var Tg=function(e,r,n,i,a,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?ri(a,o):u,c=a/2,f=o/2;l=Math.min(l,c,f);var v=l!==c,g=l!==f,h;if(v){var m=n-c+l-s,w=i-f-s,b=n+c-l+s,C=w;if(h=Kn(e,r,n,i,m,w,b,C,!1),h.length>0)return h}if(g){var E=n+c+s,x=i-f+l-s,k=E,A=i+f-l+s;if(h=Kn(e,r,n,i,E,x,k,A,!1),h.length>0)return h}if(v){var p=n-c+l-s,I=i+f+s,M=n+c-l+s,B=I;if(h=Kn(e,r,n,i,p,I,M,B,!1),h.length>0)return h}if(g){var P=n-c-s,L=i-f+l-s,O=P,N=i+f-l+s;if(h=Kn(e,r,n,i,P,L,O,N,!1),h.length>0)return h}var z;{var W=n-c+l,q=i-f+l;if(z=Ya(e,r,n,i,W,q,l+s),z.length>0&&z[0]<=W&&z[1]<=q)return[z[0],z[1]]}{var j=n+c-l,ie=i-f+l;if(z=Ya(e,r,n,i,j,ie,l+s),z.length>0&&z[0]>=j&&z[1]<=ie)return[z[0],z[1]]}{var ne=n+c-l,Y=i+f-l;if(z=Ya(e,r,n,i,ne,Y,l+s),z.length>0&&z[0]>=ne&&z[1]>=Y)return[z[0],z[1]]}{var H=n-c+l,G=i+f-l;if(z=Ya(e,r,n,i,H,G,l+s),z.length>0&&z[0]<=H&&z[1]>=G)return[z[0],z[1]]}return[]},Ow=function(e,r,n,i,a,o,s){var u=s,l=Math.min(n,a),c=Math.max(n,a),f=Math.min(i,o),v=Math.max(i,o);return l-u<=e&&e<=c+u&&f-u<=r&&r<=v+u},Rw=function(e,r,n,i,a,o,s,u,l){var c={x1:Math.min(n,s,a)-l,x2:Math.max(n,s,a)+l,y1:Math.min(i,u,o)-l,y2:Math.max(i,u,o)+l};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},Nw=function(e,r,n,i){n-=i;var a=r*r-4*e*n;if(a<0)return[];var o=Math.sqrt(a),s=2*e,u=(-r+o)/s,l=(-r-o)/s;return[u,l]},Fw=function(e,r,n,i,a){var o=1e-5;e===0&&(e=o),r/=e,n/=e,i/=e;var s,u,l,c,f,v,g,h;if(u=(3*n-r*r)/9,l=-(27*i)+r*(9*n-2*(r*r)),l/=54,s=u*u*u+l*l,a[1]=0,g=r/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),v=l-Math.sqrt(s),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),a[0]=-g+f+v,g+=(f+v)/2,a[4]=a[2]=-g,g=Math.sqrt(3)*(-v+f)/2,a[3]=g,a[5]=-g;return}if(a[5]=a[3]=0,s===0){h=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-g+2*h,a[4]=a[2]=-(h+g);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),h=2*Math.sqrt(u),a[0]=-g+h*Math.cos(c/3),a[2]=-g+h*Math.cos((c+2*Math.PI)/3),a[4]=-g+h*Math.cos((c+4*Math.PI)/3)},zw=function(e,r,n,i,a,o,s,u){var l=1*n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*u+4*o*o-4*o*u+u*u,c=9*n*a-3*n*n-3*n*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*u-6*o*o+3*o*u,f=3*n*n-6*n*a+n*s-n*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*u-i*r+2*o*o+2*o*r-u*r,v=1*n*a-n*n+n*e-a*e+i*o-i*i+i*r-o*r,g=[];Fw(l,c,f,v,g);for(var h=1e-7,m=[],w=0;w<6;w+=2)Math.abs(g[w+1])<h&&g[w]>=0&&g[w]<=1&&m.push(g[w]);m.push(1),m.push(0);for(var b=-1,C,E,x,k=0;k<m.length;k++)C=Math.pow(1-m[k],2)*n+2*(1-m[k])*m[k]*a+m[k]*m[k]*s,E=Math.pow(1-m[k],2)*i+2*(1-m[k])*m[k]*o+m[k]*m[k]*u,x=Math.pow(C-e,2)+Math.pow(E-r,2),b>=0?x<b&&(b=x):b=x;return b},qw=function(e,r,n,i,a,o){var s=[e-n,r-i],u=[a-n,o-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],v=f*f/l;return f<0?c:v>l?(e-a)*(e-a)+(r-o)*(r-o):c-v},_r=function(e,r,n){for(var i,a,o,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],a=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)u=(e-i)/(o-i)*(s-a)+a,u>r&&l++;else continue;return l%2!==0},Ln=function(e,r,n,i,a,o,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var v=Math.cos(-f),g=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=o/2*(n[h*2]*v-n[h*2+1]*g),c[h*2+1]=s/2*(n[h*2+1]*v+n[h*2]*g),c[h*2]+=i,c[h*2+1]+=a;var m;if(l>0){var w=Gs(c,-l);m=Us(w)}else m=c;return _r(e,r,m)},Vw=function(e,r,n,i,a,o,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var v=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(v<=Math.pow(f.radius,2))return!0}return _r(e,r,l)},Us=function(e){for(var r=new Array(e.length/2),n,i,a,o,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],a=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var v=Kn(n,i,a,o,s,u,l,c,!0);r[f*2]=v[0],r[f*2+1]=v[1]}return r},Gs=function(e,r){for(var n=new Array(e.length*2),i,a,o,s,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-a,c=-(o-i),f=Math.sqrt(l*l+c*c),v=l/f,g=c/f;n[u*4]=i+v*r,n[u*4+1]=a+g*r,n[u*4+2]=o+v*r,n[u*4+3]=s+g*r}return n},Hw=function(e,r,n,i,a,o){var s=n-e,u=i-r;s/=a,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-r)*f+r]},Pi=function(e,r,n,i,a,o,s){return e-=a,r-=o,e/=n/2+s,r/=i/2+s,e*e+r*r<=1},Ya=function(e,r,n,i,a,o,s){var u=[n-e,i-r],l=[e-a,r-o],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),v=l[0]*l[0]+l[1]*l[1]-s*s,g=f*f-4*c*v;if(g<0)return[];var h=(-f+Math.sqrt(g))/(2*c),m=(-f-Math.sqrt(g))/(2*c),w=Math.min(h,m),b=Math.max(h,m),C=[];if(w>=0&&w<=1&&C.push(w),b>=0&&b<=1&&C.push(b),C.length===0)return[];var E=C[0]*u[0]+e,x=C[0]*u[1]+r;if(C.length>1){if(C[0]==C[1])return[E,x];var k=C[1]*u[0]+e,A=C[1]*u[1]+r;return[E,x,k,A]}else return[E,x]},pl=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Kn=function(e,r,n,i,a,o,s,u,l){var c=e-a,f=n-e,v=s-a,g=r-o,h=i-r,m=u-o,w=v*g-m*c,b=f*g-h*c,C=m*f-v*h;if(C!==0){var E=w/C,x=b/C,k=.001,A=0-k,p=1+k;return A<=E&&E<=p&&A<=x&&x<=p?[e+E*f,r+E*h]:l?[e+E*f,r+E*h]:[]}else return w===0||b===0?pl(e,n,s)===s?[s,u]:pl(e,n,a)===a?[a,o]:pl(a,s,n)===n?[n,i]:[]:[]},$w=function(e,r,n,i,a){var o=[],s=i/2,u=a/2,l=r,c=n;o.push({x:l+s*e[0],y:c+u*e[1]});for(var f=1;f<e.length/2;f++)o.push({x:l+s*e[f*2],y:c+u*e[f*2+1]});return o},po=function(e,r,n,i,a,o,s,u){var l=[],c,f=new Array(n.length),v=!0;o==null&&(v=!1);var g;if(v){for(var h=0;h<f.length/2;h++)f[h*2]=n[h*2]*o+i,f[h*2+1]=n[h*2+1]*s+a;if(u>0){var m=Gs(f,-u);g=Us(m)}else g=f}else g=n;for(var w,b,C,E,x=0;x<g.length/2;x++)w=g[x*2],b=g[x*2+1],x<g.length/2-1?(C=g[(x+1)*2],E=g[(x+1)*2+1]):(C=g[0],E=g[1]),c=Kn(e,r,i,a,w,b,C,E),c.length!==0&&l.push(c[0],c[1]);return l},Ww=function(e,r,n,i,a,o,s,u,l){var c=[],f,v=new Array(n.length*2);l.forEach(function(C,E){E===0?(v[v.length-2]=C.startX,v[v.length-1]=C.startY):(v[E*4-2]=C.startX,v[E*4-1]=C.startY),v[E*4]=C.stopX,v[E*4+1]=C.stopY,f=Ya(e,r,i,a,C.cx,C.cy,C.radius),f.length!==0&&c.push(f[0],f[1])});for(var g=0;g<v.length/4;g++)f=Kn(e,r,i,a,v[g*4],v[g*4+1],v[g*4+2],v[g*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var h=[c[0],c[1]],m=Math.pow(h[0]-e,2)+Math.pow(h[1]-r,2),w=1;w<c.length/2;w++){var b=Math.pow(c[w*2]-e,2)+Math.pow(c[w*2+1]-r,2);b<=m&&(h[0]=c[w*2],h[1]=c[w*2+1],m=b)}return h}return c},as=function(e,r,n){var i=[e[0]-r[0],e[1]-r[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-n)/a;return o<0&&(o=1e-5),[r[0]+o*i[0],r[1]+o*i[1]]},Er=function(e,r){var n=Kc(e,r);return n=kg(n),n},kg=function(e){for(var r,n,i=e.length/2,a=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)r=e[2*l],n=e[2*l+1],a=Math.min(a,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-a),f=2/(u-o),v=0;v<i;v++)r=e[2*v]=e[2*v]*c,n=e[2*v+1]=e[2*v+1]*f,a=Math.min(a,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var g=0;g<i;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},Kc=function(e,r){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=r;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*n+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},ri=function(e,r){return Math.min(e/4,r/4,8)},Ag=function(e,r){return Math.min(e/10,r/10,8)},Rf=function(){return 8},Uw=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Xc=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function gl(t,e){function r(f){for(var v=[],g=0;g<f.length;g++){var h=f[g],m=f[(g+1)%f.length],w={x:m.x-h.x,y:m.y-h.y},b={x:-w.y,y:w.x},C=Math.sqrt(b.x*b.x+b.y*b.y);v.push({x:b.x/C,y:b.y/C})}return v}function n(f,v){var g=1/0,h=-1/0,m=Dr(f),w;try{for(m.s();!(w=m.n()).done;){var b=w.value,C=b.x*v.x+b.y*v.y;g=Math.min(g,C),h=Math.max(h,C)}}catch(E){m.e(E)}finally{m.f()}return{min:g,max:h}}function i(f,v){return!(f.max<v.min||v.max<f.min)}var a=[].concat(Vs(r(t)),Vs(r(e))),o=Dr(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,l=n(t,u),c=n(e,u);if(!i(l,c))return!1}}catch(f){o.e(f)}finally{o.f()}return!0}var Gw=fr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),jw={pageRank:function(e){for(var r=Gw(e),n=r.dampingFactor,i=r.precision,a=r.iterations,o=r.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,v=f*f,g=c.length,h=new Array(v),m=new Array(f),w=(1-n)/f,b=0;b<f;b++){for(var C=0;C<f;C++){var E=b*f+C;h[E]=0}m[b]=0}for(var x=0;x<g;x++){var k=c[x],A=k.data("source"),p=k.data("target");if(A!==p){var I=l.indexOfId(A),M=l.indexOfId(p),B=o(k),P=M*f+I;h[P]+=B,m[I]+=B}}for(var L=1/f+w,O=0;O<f;O++)if(m[O]===0)for(var N=0;N<f;N++){var z=N*f+O;h[z]=L}else for(var W=0;W<f;W++){var q=W*f+O;h[q]=h[q]/m[O]+w}for(var j=new Array(f),ie=new Array(f),ne,Y=0;Y<f;Y++)j[Y]=1;for(var H=0;H<a;H++){for(var G=0;G<f;G++)ie[G]=0;for(var K=0;K<f;K++)for(var V=0;V<f;V++){var Q=K*f+V;ie[K]+=h[Q]*j[V]}Aw(ie),ne=j,j=ie,ie=ne;for(var oe=0,he=0;he<f;he++){var re=ne[he]-j[he];oe+=re*re}if(oe<i)break}var Z={rank:function(ae){return ae=s.collection(ae)[0],j[l.indexOf(ae)]}};return Z}},nh=fr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ca={degreeCentralityNormalized:function(e){e=nh(e);var r=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},v=0,g=0,h=0;h<i;h++){var m=n[h],w=m.id();e.root=m;var b=this.degreeCentrality(e);v<b.indegree&&(v=b.indegree),g<b.outdegree&&(g=b.outdegree),c[w]=b.indegree,f[w]=b.outdegree}return{indegree:function(E){return v==0?0:(Ze(E)&&(E=r.filter(E)),c[E.id()]/v)},outdegree:function(E){return g===0?0:(Ze(E)&&(E=r.filter(E)),f[E.id()]/g)}}}else{for(var a={},o=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),a[u.id()]=l.degree}return{degree:function(E){return o===0?0:(Ze(E)&&(E=r.filter(E)),a[E.id()]/o)}}}},degreeCentrality:function(e){e=nh(e);var r=this.cy(),n=this,i=e,a=i.root,o=i.weight,s=i.directed,u=i.alpha;if(a=r.collection(a)[0],s){for(var g=a.connectedEdges(),h=g.filter(function(A){return A.target().same(a)&&n.has(A)}),m=g.filter(function(A){return A.source().same(a)&&n.has(A)}),w=h.length,b=m.length,C=0,E=0,x=0;x<h.length;x++)C+=o(h[x]);for(var k=0;k<m.length;k++)E+=o(m[k]);return{indegree:Math.pow(w,1-u)*Math.pow(C,u),outdegree:Math.pow(b,1-u)*Math.pow(E,u)}}else{for(var l=a.connectedEdges().intersection(n),c=l.length,f=0,v=0;v<l.length;v++)f+=o(l[v]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};ca.dc=ca.degreeCentrality;ca.dcn=ca.degreeCentralityNormalised=ca.degreeCentralityNormalized;var ih=fr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),fa={closenessCentralityNormalized:function(e){for(var r=ih(e),n=r.harmonic,i=r.weight,a=r.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),f=0;f<l.length;f++){for(var v=0,g=l[f],h=0;h<l.length;h++)if(f!==h){var m=c.distance(g,l[h]);n?v+=1/m:v+=m}n||(v=1/v),u<v&&(u=v),s[g.id()]=v}return{closeness:function(b){return u==0?0:(Ze(b)?b=o.filter(b)[0].id():b=b.id(),s[b]/u)}}},closenessCentrality:function(e){var r=ih(e),n=r.root,i=r.weight,a=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:a}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var v=s.distanceTo(f);o?u+=1/v:u+=v}}return o?u:1/u}};fa.cc=fa.closenessCentrality;fa.ccn=fa.closenessCentralityNormalised=fa.closenessCentralityNormalized;var Kw=fr({weight:null,directed:!1}),Yc={betweennessCentrality:function(e){for(var r=Kw(e),n=r.directed,i=r.weight,a=i!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(E,x){l[E]=x,x>c&&(c=x)},get:function(E){return l[E]}},v=0;v<s.length;v++){var g=s[v],h=g.id();n?u[h]=g.outgoers().nodes():u[h]=g.openNeighborhood().nodes(),f.set(h,0)}for(var m=function(){for(var E=s[w].id(),x=[],k={},A={},p={},I=new Po(function(K,V){return p[K]-p[V]}),M=0;M<s.length;M++){var B=s[M].id();k[B]=[],A[B]=0,p[B]=1/0}for(A[E]=1,p[E]=0,I.push(E);!I.empty();){var P=I.pop();if(x.push(P),a)for(var L=0;L<u[P].length;L++){var O=u[P][L],N=o.getElementById(P),z=void 0;N.edgesTo(O).length>0?z=N.edgesTo(O)[0]:z=O.edgesTo(N)[0];var W=i(z);O=O.id(),p[O]>p[P]+W&&(p[O]=p[P]+W,I.nodes.indexOf(O)<0?I.push(O):I.updateItem(O),A[O]=0,k[O]=[]),p[O]==p[P]+W&&(A[O]=A[O]+A[P],k[O].push(P))}else for(var q=0;q<u[P].length;q++){var j=u[P][q].id();p[j]==1/0&&(I.push(j),p[j]=p[P]+1),p[j]==p[P]+1&&(A[j]=A[j]+A[P],k[j].push(P))}}for(var ie={},ne=0;ne<s.length;ne++)ie[s[ne].id()]=0;for(;x.length>0;){for(var Y=x.pop(),H=0;H<k[Y].length;H++){var G=k[Y][H];ie[G]=ie[G]+A[G]/A[Y]*(1+ie[Y])}Y!=s[w].id()&&f.set(Y,f.get(Y)+ie[Y])}},w=0;w<s.length;w++)m();var b={betweenness:function(E){var x=o.collection(E).id();return f.get(x)},betweennessNormalized:function(E){if(c==0)return 0;var x=o.collection(E).id();return f.get(x)/c}};return b.betweennessNormalised=b.betweennessNormalized,b}};Yc.bc=Yc.betweennessCentrality;var Xw=fr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Yw=function(e){return Xw(e)},Zw=function(e,r){for(var n=0,i=0;i<r.length;i++)n+=r[i](e);return n},Qw=function(e,r,n){for(var i=0;i<r;i++)e[i*r+i]=n},_g=function(e,r){for(var n,i=0;i<r;i++){n=0;for(var a=0;a<r;a++)n+=e[a*r+i];for(var o=0;o<r;o++)e[o*r+i]=e[o*r+i]/n}},Jw=function(e,r,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)i[a*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+s]*r[s*n+u]}return i},e1=function(e,r,n){for(var i=e.slice(0),a=1;a<n;a++)e=Jw(e,i,r);return e},t1=function(e,r,n){for(var i=new Array(r*r),a=0;a<r*r;a++)i[a]=Math.pow(e[a],n);return _g(i,r),i},r1=function(e,r,n,i){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(r[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},n1=function(e,r,n,i){for(var a=[],o=0;o<r;o++){for(var s=[],u=0;u<r;u++)Math.round(e[o*r+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&a.push(i.collection(s))}return a},i1=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},a1=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&i1(e[r],e[n])&&e.splice(n,1);return e},ah=function(e){for(var r=this.nodes(),n=this.edges(),i=this.cy(),a=Yw(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var u=r.length,l=u*u,c=new Array(l),f,v=0;v<l;v++)c[v]=0;for(var g=0;g<n.length;g++){var h=n[g],m=o[h.source().id()],w=o[h.target().id()],b=Zw(h,a.attributes);c[m*u+w]+=b,c[w*u+m]+=b}Qw(c,u,a.multFactor),_g(c,u);for(var C=!0,E=0;C&&E<a.maxIterations;)C=!1,f=e1(c,u,a.expandFactor),c=t1(f,u,a.inflateFactor),r1(c,f,l,4)||(C=!0),E++;var x=n1(c,u,r,i);return x=a1(x),x},o1={markovClustering:ah,mcl:ah},s1=function(e){return e},Dg=function(e,r){return Math.abs(r-e)},oh=function(e,r,n){return e+Dg(r,n)},sh=function(e,r,n){return e+Math.pow(n-r,2)},u1=function(e){return Math.sqrt(e)},l1=function(e,r,n){return Math.max(e,Dg(r,n))},za=function(e,r,n,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:s1,s=i,u,l,c=0;c<e;c++)u=r(c),l=n(c),s=a(s,u,l);return o(s)},va={euclidean:function(e,r,n){return e>=2?za(e,r,n,0,sh,u1):za(e,r,n,0,oh)},squaredEuclidean:function(e,r,n){return za(e,r,n,0,sh)},manhattan:function(e,r,n){return za(e,r,n,0,oh)},max:function(e,r,n){return za(e,r,n,-1/0,l1)}};va["squared-euclidean"]=va.squaredEuclidean;va.squaredeuclidean=va.squaredEuclidean;function gu(t,e,r,n,i,a){var o;return Ht(t)?o=t:o=va[t]||va.euclidean,e===0&&Ht(t)?o(i,a):o(e,r,n,i,a)}var c1=fr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Nf=function(e){return c1(e)},js=function(e,r,n,i,a){var o=a!=="kMedoids",s=o?function(f){return n[f]}:function(f){return i[f](n)},u=function(v){return i[v](r)},l=n,c=r;return gu(e,i.length,s,u,l,c)},ml=function(e,r,n){for(var i=n.length,a=new Array(i),o=new Array(i),s=new Array(r),u=null,l=0;l<i;l++)a[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var c=0;c<r;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(o[f]-a[f])+a[f];s[c]=u}return s},Mg=function(e,r,n,i,a){for(var o=1/0,s=0,u=0;u<r.length;u++){var l=js(n,e,r[u],i,a);l<o&&(o=l,s=u)}return s},Ig=function(e,r,n){for(var i=[],a=null,o=0;o<r.length;o++)a=r[o],n[a.id()]===e&&i.push(a);return i},f1=function(e,r,n){return Math.abs(r-e)<=n},d1=function(e,r,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-r[i][a]);if(o>n)return!1}return!0},h1=function(e,r,n){for(var i=0;i<n;i++)if(e===r[i])return!0;return!1},uh=function(e,r){var n=new Array(r);if(e.length<50)for(var i=0;i<r;i++){for(var a=e[Math.floor(Math.random()*e.length)];h1(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},lh=function(e,r,n){for(var i=0,a=0;a<r.length;a++)i+=js("manhattan",r[a],e,n,"kMedoids");return i},v1=function(e){var r=this.cy(),n=this.nodes(),i=null,a=Nf(e),o=new Array(a.k),s={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=ml(n,a.k,a.attributes)):Jt(a.testCentroids)==="object"?u=a.testCentroids:u=ml(n,a.k,a.attributes):u=ml(n,a.k,a.attributes);for(var l=!0,c=0;l&&c<a.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=Mg(i,u,a.distance,a.attributes,"kMeans");l=!1;for(var v=0;v<a.k;v++){var g=Ig(v,n,s);if(g.length!==0){for(var h=a.attributes.length,m=u[v],w=new Array(h),b=new Array(h),C=0;C<h;C++){b[C]=0;for(var E=0;E<g.length;E++)i=g[E],b[C]+=a.attributes[C](i);w[C]=b[C]/g.length,f1(w[C],m[C],a.sensitivityThreshold)||(l=!0)}u[v]=w,o[v]=r.collection(g)}}c++}return o},p1=function(e){var r=this.cy(),n=this.nodes(),i=null,a=Nf(e),o=new Array(a.k),s,u={},l,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Jt(a.testCentroids)==="object"?s=a.testCentroids:s=uh(n,a.k)):s=uh(n,a.k);for(var f=!0,v=0;f&&v<a.maxIterations;){for(var g=0;g<n.length;g++)i=n[g],u[i.id()]=Mg(i,s,a.distance,a.attributes,"kMedoids");f=!1;for(var h=0;h<s.length;h++){var m=Ig(h,n,u);if(m.length!==0){c[h]=lh(s[h],m,a.attributes);for(var w=0;w<m.length;w++)l=lh(m[w],m,a.attributes),l<c[h]&&(c[h]=l,s[h]=m[w],f=!0);o[h]=r.collection(m)}}v++}return o},g1=function(e,r,n,i,a){for(var o,s,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],a.m);for(var c=0;c<e.length;c++)for(var f=0;f<a.attributes.length;f++){o=0,s=0;for(var v=0;v<r.length;v++)o+=i[v][c]*a.attributes[f](r[v]),s+=i[v][c];e[c][f]=o/s}},m1=function(e,r,n,i,a){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,u,l,c=2/(a.m-1),f=0;f<n.length;f++)for(var v=0;v<i.length;v++){s=0;for(var g=0;g<n.length;g++)u=js(a.distance,i[v],n[f],a.attributes,"cmeans"),l=js(a.distance,i[v],n[g],a.attributes,"cmeans"),s+=Math.pow(u/l,c);e[v][f]=1/s}},y1=function(e,r,n,i){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var s,u,l=0;l<r.length;l++){s=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[l][c]>s&&(s=r[l][c],u=c);a[u].push(e[l])}for(var f=0;f<a.length;f++)a[f]=i.collection(a[f]);return a},ch=function(e){var r=this.cy(),n=this.nodes(),i=Nf(e),a,o,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var v=0;v<n.length;v++){for(var g=0,h=0;h<i.k;h++)s[v][h]=Math.random(),g+=s[v][h];for(var m=0;m<i.k;m++)s[v][m]=s[v][m]/g}o=new Array(i.k);for(var w=0;w<i.k;w++)o[w]=new Array(i.attributes.length);l=new Array(n.length);for(var b=0;b<n.length;b++)l[b]=new Array(i.k);for(var C=!0,E=0;C&&E<i.maxIterations;)C=!1,g1(o,n,s,l,i),m1(s,u,o,n,i),d1(s,u,i.sensitivityThreshold)||(C=!0),E++;return a=y1(n,s,i,r),{clusters:a,degreeOfMembership:s}},b1={kMeans:v1,kMedoids:p1,fuzzyCMeans:ch,fcm:ch},w1=fr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),x1={single:"min",complete:"max"},C1=function(e){var r=w1(e),n=x1[r.linkage];return n!=null&&(r.linkage=n),r},fh=function(e,r,n,i,a){for(var o=0,s=1/0,u,l=a.attributes,c=function(M,B){return gu(a.distance,l.length,function(P){return l[P](M)},function(P){return l[P](B)},M,B)},f=0;f<e.length;f++){var v=e[f].key,g=n[v][i[v]];g<s&&(o=v,s=g)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var h=r[o],m=r[i[o]],w;a.mode==="dendrogram"?w={left:h,right:m,key:h.key}:w={value:h.value.concat(m.value),key:h.key},e[h.index]=w,e.splice(m.index,1),r[h.key]=w;for(var b=0;b<e.length;b++){var C=e[b];h.key===C.key?u=1/0:a.linkage==="min"?(u=n[h.key][C.key],n[h.key][C.key]>n[m.key][C.key]&&(u=n[m.key][C.key])):a.linkage==="max"?(u=n[h.key][C.key],n[h.key][C.key]<n[m.key][C.key]&&(u=n[m.key][C.key])):a.linkage==="mean"?u=(n[h.key][C.key]*h.size+n[m.key][C.key]*m.size)/(h.size+m.size):a.mode==="dendrogram"?u=c(C.value,h.value):u=c(C.value[0],h.value[0]),n[h.key][C.key]=n[C.key][h.key]=u}for(var E=0;E<e.length;E++){var x=e[E].key;if(i[x]===h.key||i[x]===m.key){for(var k=x,A=0;A<e.length;A++){var p=e[A].key;n[x][p]<n[x][k]&&(k=p)}i[x]=k}e[E].index=E}return h.key=m.key=h.index=m.index=null,!0},oa=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&oa(e.left,r),e.right&&oa(e.right,r)))},Zc=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Zc(e.left,r),i=Zc(e.right,r),a=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},Qc=function(e,r,n){if(!e)return[];var i=[],a=[],o=[];return r===0?(e.left&&oa(e.left,i),e.right&&oa(e.right,a),o=i.concat(a),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&oa(e.left,i),e.right&&oa(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=Qc(e.left,r-1,n)),e.right&&(a=Qc(e.right,r-1,n)),i.concat(a))},dh=function(e){for(var r=this.cy(),n=this.nodes(),i=C1(e),a=i.attributes,o=function(E,x){return gu(i.distance,a.length,function(k){return a[k](E)},function(k){return a[k](x)},E,x)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var v={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=v,c[f]=v,u[f]=[],l[f]=0}for(var g=0;g<s.length;g++)for(var h=0;h<=g;h++){var m=void 0;i.mode==="dendrogram"?m=g===h?1/0:o(s[g].value,s[h].value):m=g===h?1/0:o(s[g].value[0],s[h].value[0]),u[g][h]=m,u[h][g]=m,m<u[g][l[g]]&&(l[g]=h)}for(var w=fh(s,c,u,l,i);w;)w=fh(s,c,u,l,i);var b;return i.mode==="dendrogram"?(b=Qc(s[0],i.dendrogramDepth,r),i.addDendrogram&&Zc(s[0],r)):(b=new Array(s.length),s.forEach(function(C,E){C.key=C.index=null,b[E]=r.collection(C.value)})),b},E1={hierarchicalClustering:dh,hca:dh},S1=fr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),T1=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||Ft("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||Be(n)||Ft("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),S1(e)},k1=function(e,r,n,i){var a=function(s,u){return i[u](s)};return-gu(e,i.length,function(o){return a(r,o)},function(o){return a(n,o)},r,n)},A1=function(e,r){var n=null;return r==="median"?n=Tw(e):r==="mean"?n=Sw(e):r==="min"?n=Cw(e):r==="max"?n=Ew(e):n=r,n},_1=function(e,r,n){for(var i=[],a=0;a<e;a++)r[a*e+a]+n[a*e+a]>0&&i.push(a);return i},hh=function(e,r,n){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];r[a*e+l]>s&&(o=l,s=r[a*e+l])}o>0&&i.push(o)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},D1=function(e,r,n){for(var i=hh(e,r,n),a=0;a<n.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===n[a]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var f=0,v=0;v<o.length;v++)f+=r[o[v]*e+o[c]];f>l&&(u=c,l=f)}n[a]=o[u]}return i=hh(e,r,n),i},vh=function(e){for(var r=this.cy(),n=this.nodes(),i=T1(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var s,u,l,c,f,v;s=n.length,u=s*s,l=new Array(u);for(var g=0;g<u;g++)l[g]=-1/0;for(var h=0;h<s;h++)for(var m=0;m<s;m++)h!==m&&(l[h*s+m]=k1(i.distance,n[h],n[m],i.attributes));c=A1(l,i.preference);for(var w=0;w<s;w++)l[w*s+w]=c;f=new Array(u);for(var b=0;b<u;b++)f[b]=0;v=new Array(u);for(var C=0;C<u;C++)v[C]=0;for(var E=new Array(s),x=new Array(s),k=new Array(s),A=0;A<s;A++)E[A]=0,x[A]=0,k[A]=0;for(var p=new Array(s*i.minIterations),I=0;I<p.length;I++)p[I]=0;var M;for(M=0;M<i.maxIterations;M++){for(var B=0;B<s;B++){for(var P=-1/0,L=-1/0,O=-1,N=0,z=0;z<s;z++)E[z]=f[B*s+z],N=v[B*s+z]+l[B*s+z],N>=P?(L=P,P=N,O=z):N>L&&(L=N);for(var W=0;W<s;W++)f[B*s+W]=(1-i.damping)*(l[B*s+W]-P)+i.damping*E[W];f[B*s+O]=(1-i.damping)*(l[B*s+O]-L)+i.damping*E[O]}for(var q=0;q<s;q++){for(var j=0,ie=0;ie<s;ie++)E[ie]=v[ie*s+q],x[ie]=Math.max(0,f[ie*s+q]),j+=x[ie];j-=x[q],x[q]=f[q*s+q],j+=x[q];for(var ne=0;ne<s;ne++)v[ne*s+q]=(1-i.damping)*Math.min(0,j-x[ne])+i.damping*E[ne];v[q*s+q]=(1-i.damping)*(j-x[q])+i.damping*E[q]}for(var Y=0,H=0;H<s;H++){var G=v[H*s+H]+f[H*s+H]>0?1:0;p[M%i.minIterations*s+H]=G,Y+=G}if(Y>0&&(M>=i.minIterations-1||M==i.maxIterations-1)){for(var K=0,V=0;V<s;V++){k[V]=0;for(var Q=0;Q<i.minIterations;Q++)k[V]+=p[Q*s+V];(k[V]===0||k[V]===i.minIterations)&&K++}if(K===s)break}}for(var oe=_1(s,f,v),he=D1(s,l,oe),re={},Z=0;Z<oe.length;Z++)re[oe[Z]]=[];for(var ue=0;ue<n.length;ue++){var ae=a[n[ue].id()],me=he[ae];me!=null&&re[me].push(n[ue])}for(var Ae=new Array(oe.length),Ve=0;Ve<oe.length;Ve++)Ae[Ve]=r.collection(re[oe[Ve]]);return Ae},M1={affinityPropagation:vh,ap:vh},I1=fr({root:void 0,directed:!1}),P1={hierholzer:function(e){if(!xt(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=I1(e),i=n.root,a=n.directed,o=this,s=!1,u,l,c;i&&(c=Ze(i)?this.filter(i)[0].id():i[0].id());var f={},v={};a?o.forEach(function(C){var E=C.id();if(C.isNode()){var x=C.indegree(!0),k=C.outdegree(!0),A=x-k,p=k-x;A==1?u?s=!0:u=E:p==1?l?s=!0:l=E:(p>1||A>1)&&(s=!0),f[E]=[],C.outgoers().forEach(function(I){I.isEdge()&&f[E].push(I.id())})}else v[E]=[void 0,C.target().id()]}):o.forEach(function(C){var E=C.id();if(C.isNode()){var x=C.degree(!0);x%2&&(u?l?s=!0:l=E:u=E),f[E]=[],C.connectedEdges().forEach(function(k){return f[E].push(k.id())})}else v[E]=[C.source().id(),C.target().id()]});var g={found:!1,trail:void 0};if(s)return g;if(l&&u)if(a){if(c&&l!=c)return g;c=l}else{if(c&&l!=c&&u!=c)return g;c||(c=l)}else c||(c=o[0].id());var h=function(E){for(var x=E,k=[E],A,p,I;f[x].length;)A=f[x].shift(),p=v[A][0],I=v[A][1],x!=I?(f[I]=f[I].filter(function(M){return M!=A}),x=I):!a&&x!=p&&(f[p]=f[p].filter(function(M){return M!=A}),x=p),k.unshift(A),k.unshift(x);return k},m=[],w=[];for(w=h(c);w.length!=1;)f[w[0]].length==0?(m.unshift(o.getElementById(w.shift())),m.unshift(o.getElementById(w.shift()))):w=h(w.shift()).concat(w);m.unshift(o.getElementById(w.shift()));for(var b in f)if(f[b].length)return g;return g.found=!0,g.trail=this.spawn(m,!0),g}},os=function(){var e=this,r={},n=0,i=0,a=[],o=[],s={},u=function(v,g){for(var h=o.length-1,m=[],w=e.spawn();o[h].x!=v||o[h].y!=g;)m.push(o.pop().edge),h--;m.push(o.pop().edge),m.forEach(function(b){var C=b.connectedNodes().intersection(e);w.merge(b),C.forEach(function(E){var x=E.id(),k=E.connectedEdges().intersection(e);w.merge(E),r[x].cutVertex?w.merge(k.filter(function(A){return A.isLoop()})):w.merge(k)})}),a.push(w)},l=function(v,g,h){v===h&&(i+=1),r[g]={id:n,low:n++,cutVertex:!1};var m=e.getElementById(g).connectedEdges().intersection(e);if(m.size()===0)a.push(e.spawn(e.getElementById(g)));else{var w,b,C,E;m.forEach(function(x){w=x.source().id(),b=x.target().id(),C=w===g?b:w,C!==h&&(E=x.id(),s[E]||(s[E]=!0,o.push({x:g,y:C,edge:x})),C in r?r[g].low=Math.min(r[g].low,r[C].id):(l(v,C,g),r[g].low=Math.min(r[g].low,r[C].low),r[g].id<=r[C].low&&(r[g].cutVertex=!0,u(g,C))))})}};e.forEach(function(f){if(f.isNode()){var v=f.id();v in r||(i=0,l(v,v),r[v].cutVertex=i>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:a}},L1={hopcroftTarjanBiconnected:os,htbc:os,htb:os,hopcroftTarjanBiconnectedComponents:os},ss=function(){var e=this,r={},n=0,i=[],a=[],o=e.spawn(e),s=function(l){a.push(l),r[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(m){var w=m.target().id();w!==l&&(w in r||s(w),r[w].explored||(r[l].low=Math.min(r[l].low,r[w].low)))}),r[l].index===r[l].low){for(var f=e.spawn();;){var v=a.pop();if(f.merge(e.getElementById(v)),r[v].low=r[l].index,r[v].explored=!0,v===l)break}var g=f.edgesWith(f),h=f.merge(g);i.push(h),o=o.difference(h)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||s(l)}}),{cut:o,components:i}},B1={tarjanStronglyConnected:ss,tsc:ss,tscc:ss,tarjanStronglyConnectedComponents:ss},Pg={};[ho,cw,fw,hw,pw,mw,ww,jw,ca,fa,Yc,o1,b1,E1,M1,P1,L1,B1].forEach(function(t){tt(Pg,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Lg=0,Bg=1,Og=2,nn=function(e){if(!(this instanceof nn))return new nn(e);this.id="Thenable/1.0.7",this.state=Lg,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};nn.prototype={fulfill:function(e){return ph(this,Bg,"fulfillValue",e)},reject:function(e){return ph(this,Og,"rejectReason",e)},then:function(e,r){var n=this,i=new nn;return n.onFulfilled.push(mh(e,i,"fulfill")),n.onRejected.push(mh(r,i,"reject")),Rg(n),i.proxy}};var ph=function(e,r,n,i){return e.state===Lg&&(e.state=r,e[n]=i,Rg(e)),e},Rg=function(e){e.state===Bg?gh(e,"onFulfilled",e.fulfillValue):e.state===Og&&gh(e,"onRejected",e.rejectReason)},gh=function(e,r,n){if(e[r].length!==0){var i=e[r];e[r]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},mh=function(e,r,n){return function(i){if(typeof e!="function")r[n].call(r,i);else{var a;try{a=e(i)}catch(o){r.reject(o);return}Ng(r,a)}}},Ng=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Jt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(r,function(a){i||(i=!0,a===r?e.reject(new TypeError("circular thenable chain")):Ng(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(r)};nn.all=function(t){return new nn(function(e,r){for(var n=new Array(t.length),i=0,a=function(u,l){n[u]=l,i++,i===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var u=t[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){a(s,f)},function(f){r(f)});else{var c=u;a(s,c)}})(o)})};nn.resolve=function(t){return new nn(function(e,r){e(t)})};nn.reject=function(t){return new nn(function(e,r){r(t)})};var Sa=typeof Promise<"u"?Promise:nn,Jc=function(e,r,n){var i=Af(e),a=!i,o=this._private=tt({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Ht(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Ri=Jc.prototype;tt(Ri,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Or(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Sa(function(i,a){n.push(function(){i()})})}});Ri.complete=Ri.completed;Ri.run=Ri.play;Ri.running=Ri.playing;var O1={animated:function(){return function(){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,u=!a,l=!u;if(!s.styleEnabled())return this;var c=s.style();r=tt({},r,n);var f=Object.keys(r).length===0;if(f)return new Jc(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var v=r.renderedPosition,g=s.pan(),h=s.zoom();r.position=Cg(v,h,g)}if(u&&r.panBy!=null){var m=r.panBy,w=s.pan();r.pan={x:w.x+m.x,y:w.y+m.y}}var b=r.center||r.centre;if(u&&b!=null){var C=s.getCenterPan(b.eles,r.zoom);C!=null&&(r.pan=C)}if(u&&r.fit!=null){var E=r.fit,x=s.getFitViewport(E.eles||E.boundingBox,E.padding);x!=null&&(r.pan=x.pan,r.zoom=x.zoom)}if(u&&xt(r.zoom)){var k=s.getZoomedViewport(r.zoom);k!=null?(k.zoomed&&(r.zoom=k.zoom),k.panned&&(r.pan=k.pan)):r.zoom=null}return new Jc(o[0],r)}},animate:function(){return function(r,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=tt({},r,n));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(r.queue===void 0||r.queue),f=l.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,f=c.animation.current,v=0;v<f.length;v++){var g=f[v],h=g._private;n&&(h.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},yl,yh;function mu(){if(yh)return yl;yh=1;var t=Array.isArray;return yl=t,yl}var bl,bh;function R1(){if(bh)return bl;bh=1;var t=mu(),e=Mo(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(t(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:n.test(a)||!r.test(a)||o!=null&&a in Object(o)}return bl=i,bl}var wl,wh;function N1(){if(wh)return wl;wh=1;var t=hg(),e=Do(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var u=t(s);return u==n||u==i||u==r||u==a}return wl=o,wl}var xl,xh;function F1(){if(xh)return xl;xh=1;var t=hu(),e=t["__core-js_shared__"];return xl=e,xl}var Cl,Ch;function z1(){if(Ch)return Cl;Ch=1;var t=F1(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return Cl=r,Cl}var El,Eh;function q1(){if(Eh)return El;Eh=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return El=r,El}var Sl,Sh;function V1(){if(Sh)return Sl;Sh=1;var t=N1(),e=z1(),r=Do(),n=q1(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!r(v)||e(v))return!1;var g=t(v)?c:a;return g.test(n(v))}return Sl=f,Sl}var Tl,Th;function H1(){if(Th)return Tl;Th=1;function t(e,r){return e==null?void 0:e[r]}return Tl=t,Tl}var kl,kh;function Ff(){if(kh)return kl;kh=1;var t=V1(),e=H1();function r(n,i){var a=e(n,i);return t(a)?a:void 0}return kl=r,kl}var Al,Ah;function yu(){if(Ah)return Al;Ah=1;var t=Ff(),e=t(Object,"create");return Al=e,Al}var _l,_h;function $1(){if(_h)return _l;_h=1;var t=yu();function e(){this.__data__=t?t(null):{},this.size=0}return _l=e,_l}var Dl,Dh;function W1(){if(Dh)return Dl;Dh=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Dl=t,Dl}var Ml,Mh;function U1(){if(Mh)return Ml;Mh=1;var t=yu(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var o=this.__data__;if(t){var s=o[a];return s===e?void 0:s}return n.call(o,a)?o[a]:void 0}return Ml=i,Ml}var Il,Ih;function G1(){if(Ih)return Il;Ih=1;var t=yu(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var a=this.__data__;return t?a[i]!==void 0:r.call(a,i)}return Il=n,Il}var Pl,Ph;function j1(){if(Ph)return Pl;Ph=1;var t=yu(),e="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&i===void 0?e:i,this}return Pl=r,Pl}var Ll,Lh;function K1(){if(Lh)return Ll;Lh=1;var t=$1(),e=W1(),r=U1(),n=G1(),i=j1();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Ll=a,Ll}var Bl,Bh;function X1(){if(Bh)return Bl;Bh=1;function t(){this.__data__=[],this.size=0}return Bl=t,Bl}var Ol,Oh;function Fg(){if(Oh)return Ol;Oh=1;function t(e,r){return e===r||e!==e&&r!==r}return Ol=t,Ol}var Rl,Rh;function bu(){if(Rh)return Rl;Rh=1;var t=Fg();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return Rl=e,Rl}var Nl,Nh;function Y1(){if(Nh)return Nl;Nh=1;var t=bu(),e=Array.prototype,r=e.splice;function n(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():r.call(a,o,1),--this.size,!0}return Nl=n,Nl}var Fl,Fh;function Z1(){if(Fh)return Fl;Fh=1;var t=bu();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return Fl=e,Fl}var zl,zh;function Q1(){if(zh)return zl;zh=1;var t=bu();function e(r){return t(this.__data__,r)>-1}return zl=e,zl}var ql,qh;function J1(){if(qh)return ql;qh=1;var t=bu();function e(r,n){var i=this.__data__,a=t(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return ql=e,ql}var Vl,Vh;function ex(){if(Vh)return Vl;Vh=1;var t=X1(),e=Y1(),r=Z1(),n=Q1(),i=J1();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Vl=a,Vl}var Hl,Hh;function tx(){if(Hh)return Hl;Hh=1;var t=Ff(),e=hu(),r=t(e,"Map");return Hl=r,Hl}var $l,$h;function rx(){if($h)return $l;$h=1;var t=K1(),e=ex(),r=tx();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return $l=n,$l}var Wl,Wh;function nx(){if(Wh)return Wl;Wh=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Wl=t,Wl}var Ul,Uh;function wu(){if(Uh)return Ul;Uh=1;var t=nx();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Ul=e,Ul}var Gl,Gh;function ix(){if(Gh)return Gl;Gh=1;var t=wu();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Gl=e,Gl}var jl,jh;function ax(){if(jh)return jl;jh=1;var t=wu();function e(r){return t(this,r).get(r)}return jl=e,jl}var Kl,Kh;function ox(){if(Kh)return Kl;Kh=1;var t=wu();function e(r){return t(this,r).has(r)}return Kl=e,Kl}var Xl,Xh;function sx(){if(Xh)return Xl;Xh=1;var t=wu();function e(r,n){var i=t(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return Xl=e,Xl}var Yl,Yh;function ux(){if(Yh)return Yl;Yh=1;var t=rx(),e=ix(),r=ax(),n=ox(),i=sx();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Yl=a,Yl}var Zl,Zh;function lx(){if(Zh)return Zl;Zh=1;var t=ux(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],u=a.cache;if(u.has(s))return u.get(s);var l=n.apply(this,o);return a.cache=u.set(s,l)||u,l};return a.cache=new(r.Cache||t),a}return r.Cache=t,Zl=r,Zl}var Ql,Qh;function cx(){if(Qh)return Ql;Qh=1;var t=lx(),e=500;function r(n){var i=t(n,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return Ql=r,Ql}var Jl,Jh;function zg(){if(Jh)return Jl;Jh=1;var t=cx(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,u,l){a.push(u?l.replace(r,"$1"):s||o)}),a});return Jl=n,Jl}var ec,ev;function qg(){if(ev)return ec;ev=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=r(e[n],n,e);return a}return ec=t,ec}var tc,tv;function fx(){if(tv)return tc;tv=1;var t=Df(),e=qg(),r=mu(),n=Mo(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return tc=o,tc}var rc,rv;function Vg(){if(rv)return rc;rv=1;var t=fx();function e(r){return r==null?"":t(r)}return rc=e,rc}var nc,nv;function Hg(){if(nv)return nc;nv=1;var t=mu(),e=R1(),r=zg(),n=Vg();function i(a,o){return t(a)?a:e(a,o)?[a]:r(n(a))}return nc=i,nc}var ic,iv;function zf(){if(iv)return ic;iv=1;var t=Mo();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return ic=e,ic}var ac,av;function dx(){if(av)return ac;av=1;var t=Hg(),e=zf();function r(n,i){i=t(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[e(i[a++])];return a&&a==o?n:void 0}return ac=r,ac}var oc,ov;function hx(){if(ov)return oc;ov=1;var t=dx();function e(r,n,i){var a=r==null?void 0:t(r,n);return a===void 0?i:a}return oc=e,oc}var vx=hx(),px=_o(vx),sc,sv;function gx(){if(sv)return sc;sv=1;var t=Ff(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return sc=e,sc}var uc,uv;function mx(){if(uv)return uc;uv=1;var t=gx();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return uc=e,uc}var lc,lv;function yx(){if(lv)return lc;lv=1;var t=mx(),e=Fg(),r=Object.prototype,n=r.hasOwnProperty;function i(a,o,s){var u=a[o];(!(n.call(a,o)&&e(u,s))||s===void 0&&!(o in a))&&t(a,o,s)}return lc=i,lc}var cc,cv;function bx(){if(cv)return cc;cv=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return cc=r,cc}var fc,fv;function wx(){if(fv)return fc;fv=1;var t=yx(),e=Hg(),r=bx(),n=Do(),i=zf();function a(o,s,u,l){if(!n(o))return o;s=e(s,o);for(var c=-1,f=s.length,v=f-1,g=o;g!=null&&++c<f;){var h=i(s[c]),m=u;if(h==="__proto__"||h==="constructor"||h==="prototype")return o;if(c!=v){var w=g[h];m=l?l(w,h,g):void 0,m===void 0&&(m=n(w)?w:r(s[c+1])?[]:{})}t(g,h,m),g=g[h]}return o}return fc=a,fc}var dc,dv;function xx(){if(dv)return dc;dv=1;var t=wx();function e(r,n,i){return r==null?r:t(r,n,i)}return dc=e,dc}var Cx=xx(),Ex=_o(Cx),hc,hv;function Sx(){if(hv)return hc;hv=1;function t(e,r){var n=-1,i=e.length;for(r||(r=Array(i));++n<i;)r[n]=e[n];return r}return hc=t,hc}var vc,vv;function Tx(){if(vv)return vc;vv=1;var t=qg(),e=Sx(),r=mu(),n=Mo(),i=zg(),a=zf(),o=Vg();function s(u){return r(u)?t(u,a):n(u)?[u]:e(i(o(u)))}return vc=s,vc}var kx=Tx(),Ax=_o(kx),_x={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=tt({},r,e),function(i,a){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Ze(i)){var f=i.indexOf(".")!==-1,v=f&&Ax(i);if(o.allowGetting&&a===void 0){var g;return c&&(o.beforeGet(c),v&&c._private[o.field][i]===void 0?g=px(c._private[o.field],v):g=c._private[o.field][i]),g}else if(o.allowSetting&&a!==void 0){var h=!o.immutableKeys[i];if(h){var m=ng({},i,a);o.beforeSet(s,m);for(var w=0,b=l.length;w<b;w++){var C=l[w];o.canSet(C)&&(v&&c._private[o.field][i]===void 0?Ex(C._private[o.field],v,a):C._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&xt(i)){var E=i,x,k,A=Object.keys(E);o.beforeSet(s,E);for(var p=0;p<A.length;p++){x=A[p],k=E[x];var I=!o.immutableKeys[x];if(I)for(var M=0;M<l.length;M++){var B=l[M];o.canSet(B)&&(B._private[o.field][x]=k)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Ht(i)){var P=i;s.on(o.bindingEvent,P)}else if(o.allowGetting&&i===void 0){var L;return c&&(o.beforeGet(c),L=c._private[o.field]),L}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=tt({},r,e),function(i){var a=e,o=this,s=o.length!==void 0,u=s?o:[o];if(Ze(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var v=l[f];if(!ei(v)){var g=!a.immutableKeys[v];if(g)for(var h=0,m=u.length;h<m;h++)u[h]._private[a.field][v]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var w=0,b=u.length;w<b;w++)for(var C=u[w]._private[a.field],E=Object.keys(C),x=0;x<E.length;x++){var k=E[x],A=!a.immutableKeys[k];A&&(C[k]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},Dx={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new Sa(function(s,u){var l=function(g){a.off.apply(a,f),s(g)},c=o.concat([l]),f=c.concat([]);a.on.apply(a,c)})}}},St={};[O1,_x,Dx].forEach(function(t){tt(St,t)});var Mx={animate:St.animate(),animation:St.animation(),animated:St.animated(),clearQueue:St.clearQueue(),delay:St.delay(),delayAnimation:St.delayAnimation(),stop:St.stop()},_s={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(h){return n.push(h)}),n}else Mt(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new Ea(e),o=0;o<r.length;o++){for(var s=r[o],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var v=e[f],g=l.has(v);if(!g){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Mt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=r===void 0,a=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,c=!1,f=0;f<e.length;f++){var v=e[f],g=l.has(v),h=!1;r||i&&!g?(l.add(v),h=!0):(!r||i&&g)&&(l.delete(v),h=!0),!c&&h&&(a.push(u),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};_s.className=_s.classNames=_s.classes;var bt={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Qt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};bt.variable="(?:[\\w-.]|(?:\\\\"+bt.metaChar+"))+";bt.className="(?:[\\w-]|(?:\\\\"+bt.metaChar+"))+";bt.value=bt.string+"|"+bt.number;bt.id=bt.variable;(function(){var t,e,r;for(t=bt.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],bt.comparatorOp+="|@"+e;for(t=bt.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(bt.comparatorOp+="|\\!"+e)})();var _t=function(){return{checks:[]}},Ge={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ef=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return _b(t.selector,e.selector)}),Ix=(function(){for(var t={},e,r=0;r<ef.length;r++)e=ef[r],t[e.selector]=e.matches;return t})(),Px=function(e,r){return Ix[e](r)},Lx="("+ef.map(function(t){return t.selector}).join("|")+")",Ki=function(e){return e.replace(new RegExp("\\\\("+bt.metaChar+")","g"),function(r,n){return n})},Wn=function(e,r,n){e[e.length-1]=n},tf=[{name:"group",query:!0,regex:"("+bt.group+")",populate:function(e,r,n){var i=Xt(n,1),a=i[0];r.checks.push({type:Ge.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:Lx,populate:function(e,r,n){var i=Xt(n,1),a=i[0];r.checks.push({type:Ge.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+bt.id+")",populate:function(e,r,n){var i=Xt(n,1),a=i[0];r.checks.push({type:Ge.ID,value:Ki(a)})}},{name:"className",query:!0,regex:"\\.("+bt.className+")",populate:function(e,r,n){var i=Xt(n,1),a=i[0];r.checks.push({type:Ge.CLASS,value:Ki(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+bt.variable+")\\s*\\]",populate:function(e,r,n){var i=Xt(n,1),a=i[0];r.checks.push({type:Ge.DATA_EXIST,field:Ki(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+bt.variable+")\\s*("+bt.comparatorOp+")\\s*("+bt.value+")\\s*\\]",populate:function(e,r,n){var i=Xt(n,3),a=i[0],o=i[1],s=i[2],u=new RegExp("^"+bt.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:Ge.DATA_COMPARE,field:Ki(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+bt.boolOp+")\\s*("+bt.variable+")\\s*\\]",populate:function(e,r,n){var i=Xt(n,2),a=i[0],o=i[1];r.checks.push({type:Ge.DATA_BOOL,field:Ki(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+bt.meta+")\\s*("+bt.comparatorOp+")\\s*("+bt.number+")\\s*\\]\\]",populate:function(e,r,n){var i=Xt(n,3),a=i[0],o=i[1],s=i[2];r.checks.push({type:Ge.META_COMPARE,field:Ki(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:bt.separator,populate:function(e,r){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=_t();return s}},{name:"directedEdge",separator:!0,regex:bt.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=_t(),i=r,a=_t();return n.checks.push({type:Ge.DIRECTED_EDGE,source:i,target:a}),Wn(e,r,n),e.edgeCount++,a}else{var o=_t(),s=r,u=_t();return o.checks.push({type:Ge.NODE_SOURCE,source:s,target:u}),Wn(e,r,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:bt.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=_t(),i=r,a=_t();return n.checks.push({type:Ge.UNDIRECTED_EDGE,nodes:[i,a]}),Wn(e,r,n),e.edgeCount++,a}else{var o=_t(),s=r,u=_t();return o.checks.push({type:Ge.NODE_NEIGHBOR,node:s,neighbor:u}),Wn(e,r,o),u}}},{name:"child",separator:!0,regex:bt.child,populate:function(e,r){if(e.currentSubject==null){var n=_t(),i=_t(),a=e[e.length-1];return n.checks.push({type:Ge.CHILD,parent:a,child:i}),Wn(e,r,n),e.compoundCount++,i}else if(e.currentSubject===r){var o=_t(),s=e[e.length-1],u=_t(),l=_t(),c=_t(),f=_t();return o.checks.push({type:Ge.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:Ge.TRUE}],f.checks.push({type:Ge.TRUE}),u.checks.push({type:Ge.PARENT,parent:f,child:c}),Wn(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var v=_t(),g=_t(),h=[{type:Ge.PARENT,parent:v,child:g}];return v.checks=r.checks,r.checks=h,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:bt.descendant,populate:function(e,r){if(e.currentSubject==null){var n=_t(),i=_t(),a=e[e.length-1];return n.checks.push({type:Ge.DESCENDANT,ancestor:a,descendant:i}),Wn(e,r,n),e.compoundCount++,i}else if(e.currentSubject===r){var o=_t(),s=e[e.length-1],u=_t(),l=_t(),c=_t(),f=_t();return o.checks.push({type:Ge.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:Ge.TRUE}],f.checks.push({type:Ge.TRUE}),u.checks.push({type:Ge.ANCESTOR,ancestor:f,descendant:c}),Wn(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var v=_t(),g=_t(),h=[{type:Ge.ANCESTOR,ancestor:v,descendant:g}];return v.checks=r.checks,r.checks=h,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:bt.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Tt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===Ge.DIRECTED_EDGE?i.type=Ge.NODE_TARGET:a===Ge.UNDIRECTED_EDGE&&(i.type=Ge.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];tf.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Bx=function(e){for(var r,n,i,a=0;a<tf.length;a++){var o=tf[a],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,r=o,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:i,remaining:e}},Ox=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},Rx=function(e){var r=this,n=r.inputText=e,i=r[0]=_t();for(r.length=1,n=Ox(n);;){var a=Bx(n);if(a.expr==null)return Tt("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(r,i,o);if(s===!1)return!1;if(s!=null&&(i=s),n=a.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var c=r[l];if(c.compoundCount>0&&c.edgeCount>0)return Tt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Tt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Tt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Nx=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return Ze(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var v=c.type,g=c.value;switch(v){case Ge.GROUP:{var h=e(g);return h.substring(0,h.length-1)}case Ge.DATA_COMPARE:{var m=c.field,w=c.operator;return"["+m+n(e(w))+r(g)+"]"}case Ge.DATA_BOOL:{var b=c.operator,C=c.field;return"["+e(b)+C+"]"}case Ge.DATA_EXIST:{var E=c.field;return"["+E+"]"}case Ge.META_COMPARE:{var x=c.operator,k=c.field;return"[["+k+n(e(x))+r(g)+"]]"}case Ge.STATE:return g;case Ge.ID:return"#"+g;case Ge.CLASS:return"."+g;case Ge.PARENT:case Ge.CHILD:return a(c.parent,f)+n(">")+a(c.child,f);case Ge.ANCESTOR:case Ge.DESCENDANT:return a(c.ancestor,f)+" "+a(c.descendant,f);case Ge.COMPOUND_SPLIT:{var A=a(c.left,f),p=a(c.subject,f),I=a(c.right,f);return A+(A.length>0?" ":"")+p+I}case Ge.TRUE:return""}},a=function(c,f){return c.checks.reduce(function(v,g,h){return v+(f===c&&h===0?"$":"")+i(g,f)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=a(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Fx={parse:Rx,toString:Nx},$g=function(e,r,n){var i,a=Ze(e),o=Be(e),s=Ze(n),u,l,c=!1,f=!1,v=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(a||s||c)&&(u=!a&&!o?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":v=!0,i=e>n;break;case">=":v=!0,i=e>=n;break;case"<":v=!0,i=e<n;break;case"<=":v=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!v)&&(i=!i),i},zx=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},qx=function(e){return e!==void 0},qf=function(e,r){return e.data(r)},Vx=function(e,r){return e[r]()},Gt=[],Rt=function(e,r){return e.checks.every(function(n){return Gt[n.type](n,r)})};Gt[Ge.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Gt[Ge.STATE]=function(t,e){var r=t.value;return Px(r,e)};Gt[Ge.ID]=function(t,e){var r=t.value;return e.id()===r};Gt[Ge.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Gt[Ge.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,i=t.value;return $g(Vx(e,r),n,i)};Gt[Ge.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,i=t.value;return $g(qf(e,r),n,i)};Gt[Ge.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return zx(qf(e,r),n)};Gt[Ge.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,qx(qf(e,r))};Gt[Ge.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],i=e.source(),a=e.target();return Rt(r,i)&&Rt(n,a)||Rt(n,i)&&Rt(r,a)};Gt[Ge.NODE_NEIGHBOR]=function(t,e){return Rt(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Rt(t.neighbor,r)})};Gt[Ge.DIRECTED_EDGE]=function(t,e){return Rt(t.source,e.source())&&Rt(t.target,e.target())};Gt[Ge.NODE_SOURCE]=function(t,e){return Rt(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Rt(t.target,r)})};Gt[Ge.NODE_TARGET]=function(t,e){return Rt(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Rt(t.source,r)})};Gt[Ge.CHILD]=function(t,e){return Rt(t.child,e)&&Rt(t.parent,e.parent())};Gt[Ge.PARENT]=function(t,e){return Rt(t.parent,e)&&e.children().some(function(r){return Rt(t.child,r)})};Gt[Ge.DESCENDANT]=function(t,e){return Rt(t.descendant,e)&&e.ancestors().some(function(r){return Rt(t.ancestor,r)})};Gt[Ge.ANCESTOR]=function(t,e){return Rt(t.ancestor,e)&&e.descendants().some(function(r){return Rt(t.descendant,r)})};Gt[Ge.COMPOUND_SPLIT]=function(t,e){return Rt(t.subject,e)&&Rt(t.left,e)&&Rt(t.right,e)};Gt[Ge.TRUE]=function(){return!0};Gt[Ge.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Gt[Ge.FILTER]=function(t,e){var r=t.value;return r(e)};var Hx=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Ge.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(a){for(var o=0;o<r.length;o++){var s=r[o];if(Rt(s,a))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},$x=function(e){for(var r=this,n=0;n<r.length;n++){var i=r[n];if(Rt(i,e))return!0}return!1},Wx={matches:$x,filter:Hx},ni=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ze(e)&&e.match(/^\s*$/)||(Or(e)?this.addQuery({checks:[{type:Ge.COLLECTION,value:e.collection()}]}):Ht(e)?this.addQuery({checks:[{type:Ge.FILTER,value:e}]}):Ze(e)?this.parse(e)||(this.invalid=!0):Ft("A selector must be created from a string; found "))},ii=ni.prototype;[Fx,Wx].forEach(function(t){return tt(ii,t)});ii.text=function(){return this.inputText};ii.size=function(){return this.length};ii.eq=function(t){return this[t]};ii.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};ii.addQuery=function(t){this[this.length++]=t};ii.selector=ii.toString;var Yn={allAre:function(e){var r=new ni(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new ni(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var i=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var i=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Yn.allAreNeighbours=Yn.allAreNeighbors;Yn.has=Yn.contains;Yn.equal=Yn.equals=Yn.same;var Wr=function(e,r){return function(i,a,o,s){var u=i,l=this,c;if(u==null?c="":Or(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,v=f.traversalCache=f.traversalCache||{},g=v[r]=v[r]||[],h=Bi(c),m=g[h];return m||(g[h]=e.call(l,i,a,o,s))}else return e.call(l,i,a,o,s)}},pa={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];r.push(a)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var i=this[n],a=i.parents();r=r||a,r=r.intersect(a)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Wr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(i){for(var a=0;a<i.length;a++){var o=i[a];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Vf(t,e,r,n){for(var i=[],a=new Ea,o=t.cy(),s=o.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?i.push(l):s&&n(i,a,l)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),s&&n(i,a,c)}return t}function Wg(t,e,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||t.push(a)}}pa.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Vf(this,t,e,Wg)};function Ug(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}pa.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Vf(this,t,e,Ug)};function Ux(t,e,r){Ug(t,e,r),Wg(t,e,r)}pa.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Vf(this,t,e,Ux)};pa.ancestors=pa.parents;var go,Gg;go=Gg={data:St.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:St.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:St.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:St.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:St.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:St.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};go.attr=go.data;go.removeAttr=go.removeData;var Gx=Gg,xu={};function pc(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(n+=t(i,s))}return n}else return}}tt(xu,{degree:pc(function(t,e){return e.source().same(e.target())?2:1}),indegree:pc(function(t,e){return e.target().same(t)?1:0}),outdegree:pc(function(t,e){return e.source().same(t)?1:0})});function Xi(t,e){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}tt(xu,{minDegree:Xi("degree",function(t,e){return t<e}),maxDegree:Xi("degree",function(t,e){return t>e}),minIndegree:Xi("indegree",function(t,e){return t<e}),maxIndegree:Xi("indegree",function(t,e){return t>e}),minOutdegree:Xi("outdegree",function(t,e){return t<e}),maxOutdegree:Xi("outdegree",function(t,e){return t>e})});tt(xu,{totalDegree:function(e){for(var r=0,n=this.nodes(),i=0;i<n.length;i++)r+=n[i].degree(e);return r}});var tn,jg,Kg=function(e,r,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,n),a.dirtyBoundingBoxCache()}}},pv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Kg(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};tn=jg={position:St.data(pv),silentPosition:St.data(tt({},pv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Kg(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(xt(e))r?this.silentPosition(e):this.position(e);else if(Ht(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=n(o,a))&&(r?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var i;if(xt(e)?(i={x:Be(e.x)?e.x:0,y:Be(e.y)?e.y:0},n=r):Ze(e)&&Be(r)&&(i={x:0,y:0},i[e]=r),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}a.endBatch()}return this},silentShift:function(e,r){return xt(e)?this.shift(e,!0):Ze(e)&&Be(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=xt(e)?e:void 0,u=s!==void 0||r!==void 0&&Ze(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];r!==void 0?c.position(e,(r-o[e])/a):s!==void 0&&c.position(Cg(s,a,o))}else{var f=n.position();return s=pu(f,a,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],i=this.cy(),a=xt(e)?e:void 0,o=a!==void 0||r!==void 0&&Ze(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,v=f;f&&(c=c[0]);var g=v?c.position():{x:0,y:0};r!==void 0?l.position(e,r+g[e]):a!==void 0&&l.position({x:a.x+g.x,y:a.y+g.y})}else{var h=n.position(),m=s?n.parent():null,w=m&&m.length>0,b=w;w&&(m=m[0]);var C=b?m.position():{x:0,y:0};return a={x:h.x-C.x,y:h.y-C.y},e===void 0?a:a[e]}else if(!o)return;return this}};tn.modelPosition=tn.point=tn.position;tn.modelPositions=tn.points=tn.positions;tn.renderedPoint=tn.renderedPosition;tn.relativePoint=tn.relativePosition;var jx=jg,da,ui;da=ui={};ui.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),i=r.pan(),a=e.x1*n+i.x,o=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}};ui.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};ui.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),v=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=v.x-f.w/2,f.x2=v.x+f.w/2,f.y1=v.y-f.h/2,f.y2=v.y+f.h/2);function g(M,B,P){var L=0,O=0,N=B+P;return M>0&&N>0&&(L=B/N*M,O=P/N*M),{biasDiff:L,biasComplementDiff:O}}function h(M,B,P,L){if(P.units==="%")switch(L){case"width":return M>0?P.pfValue*M:0;case"height":return B>0?P.pfValue*B:0;case"average":return M>0&&B>0?P.pfValue*(M+B)/2:0;case"min":return M>0&&B>0?M>B?P.pfValue*B:P.pfValue*M:0;case"max":return M>0&&B>0?M>B?P.pfValue*M:P.pfValue*B:0;default:return 0}else return P.units==="px"?P.pfValue:0}var m=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var w=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var b=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var C=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(C=C*100/c.height.val);var E=g(c.width.val-f.w,m,w),x=E.biasDiff,k=E.biasComplementDiff,A=g(c.height.val-f.h,b,C),p=A.biasDiff,I=A.biasComplementDiff;s.autoPadding=h(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),v.x=(-x+f.x1+f.x2+k)/2,s.autoHeight=Math.max(f.h,c.height.val),v.y=(-p+f.y1+f.y2+I)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||t)&&(r(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var $r=function(e){return e===1/0||e===-1/0?0:e},Zr=function(e,r,n,i,a){i-r===0||a-n===0||r==null||n==null||i==null||a==null||(e.x1=r<e.x1?r:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Un=function(e,r){return r==null?e:Zr(e,r.x1,r.y1,r.x2,r.y2)},qa=function(e,r,n){return Ar(e,r,n)},us=function(e,r,n){if(!r.cy().headless()){var i=r._private,a=i.rstyle,o=a.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=a.srcX,l=a.srcY):n==="target"?(u=a.tgtX,l=a.tgtY):(u=a.midX,l=a.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-o,f.y1=l-o,f.x2=u+o,f.y2=l+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,ks(f,1),Zr(e,f.x1,f.y1,f.x2,f.y2)}}},gc=function(e,r,n){if(!r.cy().headless()){var i;n?i=n+"-":i="";var a=r._private,o=a.rstyle,s=r.pstyle(i+"label").strValue;if(s){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),c=qa(o,"labelWidth",n),f=qa(o,"labelHeight",n),v=qa(o,"labelX",n),g=qa(o,"labelY",n),h=r.pstyle(i+"text-margin-x").pfValue,m=r.pstyle(i+"text-margin-y").pfValue,w=r.isEdge(),b=r.pstyle(i+"text-rotation"),C=r.pstyle("text-outline-width").pfValue,E=r.pstyle("text-border-width").pfValue,x=E/2,k=r.pstyle("text-background-padding").pfValue,A=2,p=f,I=c,M=I/2,B=p/2,P,L,O,N;if(w)P=v-M,L=v+M,O=g-B,N=g+B;else{switch(u.value){case"left":P=v-I,L=v;break;case"center":P=v-M,L=v+M;break;case"right":P=v,L=v+I;break}switch(l.value){case"top":O=g-p,N=g;break;case"center":O=g-B,N=g+B;break;case"bottom":O=g,N=g+p;break}}var z=h-Math.max(C,x)-k-A,W=h+Math.max(C,x)+k+A,q=m-Math.max(C,x)-k-A,j=m+Math.max(C,x)+k+A;P+=z,L+=W,O+=q,N+=j;var ie=n||"main",ne=a.labelBounds,Y=ne[ie]=ne[ie]||{};Y.x1=P,Y.y1=O,Y.x2=L,Y.y2=N,Y.w=L-P,Y.h=N-O,Y.leftPad=z,Y.rightPad=W,Y.topPad=q,Y.botPad=j;var H=w&&b.strValue==="autorotate",G=b.pfValue!=null&&b.pfValue!==0;if(H||G){var K=H?qa(a.rstyle,"labelAngle",n):b.pfValue,V=Math.cos(K),Q=Math.sin(K),oe=(P+L)/2,he=(O+N)/2;if(!w){switch(u.value){case"left":oe=L;break;case"right":oe=P;break}switch(l.value){case"top":he=N;break;case"bottom":he=O;break}}var re=function(Le,Ue){return Le=Le-oe,Ue=Ue-he,{x:Le*V-Ue*Q+oe,y:Le*Q+Ue*V+he}},Z=re(P,O),ue=re(P,N),ae=re(L,O),me=re(L,N);P=Math.min(Z.x,ue.x,ae.x,me.x),L=Math.max(Z.x,ue.x,ae.x,me.x),O=Math.min(Z.y,ue.y,ae.y,me.y),N=Math.max(Z.y,ue.y,ae.y,me.y)}var Ae=ie+"Rot",Ve=ne[Ae]=ne[Ae]||{};Ve.x1=P,Ve.y1=O,Ve.x2=L,Ve.y2=N,Ve.w=L-P,Ve.h=N-O,Zr(e,P,O,L,N),Zr(a.labelBounds.all,P,O,L,N)}return e}},gv=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,i=r.pstyle("outline-width").value,a=r.pstyle("outline-offset").value,o=i+a;Xg(e,r,n,o,"outside",o/2)}},Xg=function(e,r,n,i,a,o){if(!(n===0||i<=0||a==="inside")){var s=r.cy(),u=r.pstyle("shape").value,l=s.renderer().nodeShapes[u],c=r.position(),f=c.x,v=c.y,g=r.width(),h=r.height();if(l.hasMiterBounds){a==="center"&&(i/=2);var m=l.miterBounds(f,v,g,h,i);Un(e,m)}else o!=null&&o>0&&As(e,[o,o,o,o])}},Kx=function(e,r){if(!r.cy().headless()){var n=r.pstyle("border-opacity").value,i=r.pstyle("border-width").pfValue,a=r.pstyle("border-position").value;Xg(e,r,n,i,a)}},Xx=function(e,r){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),o=Sr(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,v,g,h,m,w=s.rstyle,b=u&&i?e.pstyle("bounds-expansion").pfValue:[0],C=function(rt){return rt.pstyle("display").value!=="none"},E=!i||C(e)&&(!l||C(e.source())&&C(e.target()));if(E){var x=0,k=0;i&&r.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(k=e.pstyle("overlay-padding").value));var A=0,p=0;i&&r.includeUnderlays&&(A=e.pstyle("underlay-opacity").value,A!==0&&(p=e.pstyle("underlay-padding").value));var I=Math.max(k,p),M=0,B=0;if(i&&(M=e.pstyle("width").pfValue,B=M/2),u&&r.includeNodes){var P=e.position();h=P.x,m=P.y;var L=e.outerWidth(),O=L/2,N=e.outerHeight(),z=N/2;c=h-O,f=h+O,v=m-z,g=m+z,Zr(o,c,v,f,g),i&&gv(o,e),i&&r.includeOutlines&&!a&&gv(o,e),i&&Kx(o,e)}else if(l&&r.includeEdges)if(i&&!a){var W=e.pstyle("curve-style").strValue;if(c=Math.min(w.srcX,w.midX,w.tgtX),f=Math.max(w.srcX,w.midX,w.tgtX),v=Math.min(w.srcY,w.midY,w.tgtY),g=Math.max(w.srcY,w.midY,w.tgtY),c-=B,f+=B,v-=B,g+=B,Zr(o,c,v,f,g),W==="haystack"){var q=w.haystackPts;if(q&&q.length===2){if(c=q[0].x,v=q[0].y,f=q[1].x,g=q[1].y,c>f){var j=c;c=f,f=j}if(v>g){var ie=v;v=g,g=ie}Zr(o,c-B,v-B,f+B,g+B)}}else if(W==="bezier"||W==="unbundled-bezier"||Gn(W,"segments")||Gn(W,"taxi")){var ne;switch(W){case"bezier":case"unbundled-bezier":ne=w.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":ne=w.linePts;break}if(ne!=null)for(var Y=0;Y<ne.length;Y++){var H=ne[Y];c=H.x-B,f=H.x+B,v=H.y-B,g=H.y+B,Zr(o,c,v,f,g)}}}else{var G=e.source(),K=G.position(),V=e.target(),Q=V.position();if(c=K.x,f=Q.x,v=K.y,g=Q.y,c>f){var oe=c;c=f,f=oe}if(v>g){var he=v;v=g,g=he}c-=B,f+=B,v-=B,g+=B,Zr(o,c,v,f,g)}if(i&&r.includeEdges&&l&&(us(o,e,"mid-source"),us(o,e,"mid-target"),us(o,e,"source"),us(o,e,"target")),i){var re=e.pstyle("ghost").value==="yes";if(re){var Z=e.pstyle("ghost-offset-x").pfValue,ue=e.pstyle("ghost-offset-y").pfValue;Zr(o,o.x1+Z,o.y1+ue,o.x2+Z,o.y2+ue)}}var ae=s.bodyBounds=s.bodyBounds||{};th(ae,o),As(ae,b),ks(ae,1),i&&(c=o.x1,f=o.x2,v=o.y1,g=o.y2,Zr(o,c-I,v-I,f+I,g+I));var me=s.overlayBounds=s.overlayBounds||{};th(me,o),As(me,b),ks(me,1);var Ae=s.labelBounds=s.labelBounds||{};Ae.all!=null?Mw(Ae.all):Ae.all=Sr(),i&&r.includeLabels&&(r.includeMainLabels&&gc(o,e,null),l&&(r.includeSourceLabels&&gc(o,e,"source"),r.includeTargetLabels&&gc(o,e,"target")))}return o.x1=$r(o.x1),o.y1=$r(o.y1),o.x2=$r(o.x2),o.y2=$r(o.y2),o.w=$r(o.x2-o.x1),o.h=$r(o.y2-o.y1),o.w>0&&o.h>0&&E&&(As(o,b),ks(o,1)),o},Yg=function(e){var r=0,n=function(o){return(o?1:0)<<r++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},Zg=function(e){var r=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return Xd([r(n.x),r(n.y),r(i.x),r(i.y)])}else{var a=e.position();return Xd([r(a.x),r(a.y)])}},mv=function(e,r){var n=e._private,i,a=e.isEdge(),o=r==null?yv:Yg(r),s=o===yv;if(n.bbCache==null?(i=Xx(e,mo),n.bbCache=i,n.bbCachePosKey=Zg(e)):i=n.bbCache,!s){var u=e.isNode();i=Sr(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?Un(i,n.overlayBounds):Un(i,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!a||r.includeSourceLabels&&r.includeTargetLabels)?Un(i,n.labelBounds.all):(r.includeMainLabels&&Un(i,n.labelBounds.mainRot),r.includeSourceLabels&&Un(i,n.labelBounds.sourceRot),r.includeTargetLabels&&Un(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},mo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},yv=Yg(mo),bv=fr(mo);ui.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=ha(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==Zg(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=mo:t=bv(t),e=mv(this[0],t);else{e=Sr(),t=t||mo;var i=bv(t),a=this,o=a.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<a.length;u++){var l=a[u];n(l)&&l.dirtyBoundingBoxCache(),Un(e,mv(l,i))}}return e.x1=$r(e.x1),e.y1=$r(e.y1),e.x2=$r(e.x2),e.y2=$r(e.y2),e.w=$r(e.x2-e.x1),e.h=$r(e.y2-e.y1),e};ui.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};ui.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),i=r.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),xt(t)){var a=t;t=function(){return a}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=Dw(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u};da.boundingbox=da.bb=da.boundingBox;da.renderedBoundingbox=da.renderedBoundingBox;var Yx=ui,Za,Lo;Za=Lo={};var Qg=function(e){e.uppercaseName=Bd(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Bd(e.outerName),Za[e.name]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Za["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},Za["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},Za["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};Qg({name:"width"});Qg({name:"height"});Lo.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Lo.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Lo.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Zx=Lo,Qx=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},Jx=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return pu(r(e),n.zoom(),n.pan())}},eC=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),a=n.zoom();return r(e).map(function(o){return pu(o,a,i)})}},tC=function(e){return e.renderer().getControlPoints(e)},rC=function(e){return e.renderer().getSegmentPoints(e)},nC=function(e){return e.renderer().getSourceEndpoint(e)},iC=function(e){return e.renderer().getTargetEndpoint(e)},aC=function(e){return e.renderer().getEdgeMidpoint(e)},wv={controlPoints:{get:tC,mult:!0},segmentPoints:{get:rC,mult:!0},sourceEndpoint:{get:nC},targetEndpoint:{get:iC},midpoint:{get:aC}},oC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},sC=Object.keys(wv).reduce(function(t,e){var r=wv[e],n=oC(e);return t[e]=function(){return Qx(this,r.get)},r.mult?t[n]=function(){return eC(this,r.get)}:t[n]=function(){return Jx(this,r.get)},t},{}),uC=tt({},jx,Yx,Zx,sC);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Jg=function(e,r){this.recycle(e,r)};function Va(){return!1}function ls(){return!0}Jg.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Va,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ls:Va):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ls;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ls;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ls,this.stopPropagation()},isDefaultPrevented:Va,isPropagationStopped:Va,isImmediatePropagationStopped:Va};var em=/^([^.]+)(\.(?:[^.]+))?$/,lC=".*",tm={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},xv=Object.keys(tm),cC={};function Cu(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cC,e=arguments.length>1?arguments[1]:void 0,r=0;r<xv.length;r++){var n=xv[r];this[n]=t[n]||tm[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ai=Cu.prototype,rm=function(e,r,n,i,a,o,s){Ht(i)&&(a=i,i=null),s&&(o==null?o=s:o=tt({},o,s));for(var u=Mt(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!ei(c)){var f=c.match(em);if(f){var v=f[1],g=f[2]?f[2]:null,h=r(e,c,v,g,i,a,o);if(h===!1)break}}}},Cv=function(e,r){return e.addEventFields(e.context,r),new Jg(r.type,r)},fC=function(e,r,n){if(mb(n)){r(e,n);return}else if(xt(n)){r(e,Cv(e,n));return}for(var i=Mt(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!ei(o)){var s=o.match(em);if(s){var u=s[1],l=s[2]?s[2]:null,c=Cv(e,{type:u,namespace:l,target:e.context});r(e,c)}}}};ai.on=ai.addListener=function(t,e,r,n,i){return rm(this,function(a,o,s,u,l,c,f){Ht(c)&&a.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:f})},t,e,r,n,i),this};ai.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};ai.removeListener=ai.off=function(t,e,r,n){var i=this;this.emitting!==0&&(this.listeners=Jb(this.listeners));for(var a=this.listeners,o=function(l){var c=a[l];rm(i,function(f,v,g,h,m,w){if((c.type===g||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!m||f.qualifierCompare(c.qualifier,m))&&(!w||c.callback===w))return a.splice(l,1),!1},t,e,r,n)},s=a.length-1;s>=0;s--)o(s);return this};ai.removeAllListeners=function(){return this.removeListener("*")};ai.emit=ai.trigger=function(t,e,r){var n=this.listeners,i=n.length;return this.emitting++,Mt(e)||(e=[e]),fC(this,function(a,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],i=n.length);for(var s=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===lC)&&a.eventMatches(a.context,c,o)){var f=[o];e!=null&&tw(f,e),a.beforeEmit(a.context,c,o),c.conf&&c.conf.one&&(a.listeners=a.listeners.filter(function(h){return h!==c}));var v=a.callbackContext(a.context,c,o),g=c.callback.apply(v,f);a.afterEmit(a.context,c,o),g===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<i;u++)s();a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},t),this.emitting--,this};var dC={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var i=r.qualifier;return i!=null?e!==n.target&&Ao(n.target)&&i.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},cs=function(e){return Ze(e)?new ni(e):e},nm={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Cu(dC,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var i=cs(r),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n)}return this},removeListener:function(e,r,n){for(var i=cs(r),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var i=cs(r),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,n)}return this},once:function(e,r,n){for(var i=cs(r),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};St.eventAliasesOn(nm);var im={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):r.push(i)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Ze(e)||Or(e))return new ni(e).filter(this);if(Ht(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=r?e.apply(r,[o,a,i]):e(o,a,i);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Ze(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||r.push(i)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ze(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,u=o?a:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Ze(e)&&(e=r.$(e));var n=this.spawn(),i=this,a=e,o=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],v=f._private.data.id,g=l.hasElementWithId(v);g||n.push(f)}};return o(i,a),o(a,i),n},diff:function(e){var r=this._private.cy;Ze(e)&&(e=r.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,u=function(c,f,v){for(var g=0;g<c.length;g++){var h=c[g],m=h._private.data.id,w=f.hasElementWithId(m);w?a.merge(h):v.push(h)}};return u(o,s,n),u(s,o,i),{left:n,right:i,both:a}},add:function(e){var r=this._private.cy;if(!e)return this;if(Ze(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Ze(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=r.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!a.has(u);if(l){var c=this.length++;this[c]=s,a.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,a.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,i=r.map,a=i.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Ze(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],i=this,a=0;a<i.length;a++){var o=i[a],s=r?e.apply(r,[o,a,i]):e(o,a,i);n.push(s)}return n},reduce:function(e,r){for(var n=r,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,r){for(var n=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=r?e.apply(r,[s,o,a]):e(s,o,a);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,r){for(var n=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=r?e.apply(r,[s,o,a]):e(s,o,a);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Ct=im;Ct.u=Ct["|"]=Ct["+"]=Ct.union=Ct.or=Ct.add;Ct["\\"]=Ct["!"]=Ct["-"]=Ct.difference=Ct.relativeComplement=Ct.subtract=Ct.not;Ct.n=Ct["&"]=Ct["."]=Ct.and=Ct.intersection=Ct.intersect;Ct["^"]=Ct["(+)"]=Ct["(-)"]=Ct.symmetricDifference=Ct.symdiff=Ct.xor;Ct.fnFilter=Ct.filterFn=Ct.stdFilter=Ct.filter;Ct.complement=Ct.abscomp=Ct.absoluteComplement;var hC={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},am=function(e,r){var n=e.cy(),i=n.hasCompoundNodes();function a(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Mf:0}var o=a(e)-a(r);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},Ks={forEach:function(e,r){if(Ht(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],o=r?e.apply(r,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],i=this.length;r==null&&(r=i),e==null&&(e=0),e<0&&(e=i+e),r<0&&(r=i+r);for(var a=e;a>=0&&a<r&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Ht(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(am)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var i=r.data.parent?e.parents().size():0;return e.isParent()?i:Mf-1}else{var a=r.source,o=r.target,s=a.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};Ks.each=Ks.forEach;var vC=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":Jt(Symbol))!=e&&Jt(Symbol.iterator)!=e;r&&(Ks[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,o=this.length;return ng({next:function(){return a<o?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};vC();var pC=fr({nodeDimensionsIncludeLabels:!1}),Ds={layoutDimensions:function(e){e=pC(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var i=this.nodes().filter(function(k){return!k.isParent()}),a=this.cy(),o=r.eles,s=function(A){return A.id()},u=ha(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(A,p,I){var M={x:p.x1+p.w/2,y:p.y1+p.h/2},B={x:(I.x-M.x)*A,y:(I.y-M.y)*A};return{x:M.x+B.x,y:M.y+B.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var A=Sr(),p=0;p<i.length;p++){var I=i[p],M=u(I,p);Eg(A,M.x,M.y)}return A},v=f(),g=ha(function(k,A){var p=u(k,A);if(c){var I=Math.abs(r.spacingFactor);p=l(I,v,p)}return r.transform!=null&&(p=r.transform(k,p)),p},s);if(r.animate){for(var h=0;h<i.length;h++){var m=i[h],w=g(m,h),b=r.animateFilter==null||r.animateFilter(m,h);if(b){var C=m.animation({position:w,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(C)}else m.position(w)}if(r.fit){var E=a.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}else if(r.zoom!==void 0&&r.pan!==void 0){var x=a.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(x)}e.animations.forEach(function(k){return k.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Sa.all(e.animations.map(function(k){return k.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(g),r.fit&&a.fit(r.eles,r.padding),r.zoom!=null&&a.zoom(r.zoom),r.pan&&a.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(tt({},e,{eles:this}))}};Ds.createLayout=Ds.makeLayout=Ds.layout;function om(t,e,r){var n=r._private,i=n.styleCache=n.styleCache||[],a;return(a=i[t])!=null||(a=i[t]=e(r)),a}function Eu(t,e){return t=Bi(t),function(n){return om(t,e,n)}}function Su(t,e){t=Bi(t);var r=function(i){return e.call(i)};return function(){var i=this[0];if(i)return om(t,r,i)}}var lr={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),i=r.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(i){r(i),i.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var i=r.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[e];return a??(r?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(xt(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(Ze(e))if(r===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,r,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,i=r.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var l=a[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!r)return a;var o=i.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;a=l*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function mc(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function Hf(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||mc(a,n);var u=s.source,l=s.target;return r(u)&&(!o||mc(u,r))&&(u===l||r(l)&&(!o||mc(l,r)))}}}var Ta=Eu("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});lr.takesUpSpace=Su("takesUpSpace",Hf({ok:Ta}));var gC=Eu("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Ta(t)}),mC=Eu("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Ta(t)});lr.interactive=Su("interactive",Hf({ok:gC,parentOk:mC,edgeOkViaNode:Ta}));lr.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var yC=Eu("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Ta(t)}),bC=Ta;lr.visible=Su("visible",Hf({ok:yC,edgeOkViaNode:bC}));lr.hidden=function(){var t=this[0];if(t)return!t.visible()};lr.isBundledBezier=Su("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});lr.bypass=lr.css=lr.style;lr.renderedCss=lr.renderedStyle;lr.removeBypass=lr.removeCss=lr.removeStyle;lr.pstyle=lr.parsedStyle;var Zn={};function Ev(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],i=e[1];this.on(t.event,n,i)}else if(e.length===1&&Ht(e[0])){var a=e[0];this.on(t.event,a)}else if(e.length===0||e.length===1&&Mt(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[t.field]=t.value,c&&r.push(u))}var v=this.spawn(r);v.updateStyle(),v.emit(t.event),o&&v.emit(o)}return this}}function ka(t){Zn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Zn[t.on]=Ev({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Zn[t.off]=Ev({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ka({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ka({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ka({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ka({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Zn.deselect=Zn.unselect;Zn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};ka({field:"active",on:"activate",off:"unactivate"});ka({field:"pannable",on:"panify",off:"unpanify"});Zn.inactive=function(){var t=this[0];if(t)return!t._private.active};var yr={},Sv=function(e){return function(n){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],v=f.source(),g=f.target();if(e.noIncomingEdges&&g===s&&v!==s||e.noOutgoingEdges&&v===s&&g!==s){u=!0;break}}u||a.push(s)}}return this.spawn(a,!0).filter(n)}},Tv=function(e){return function(r){for(var n=this,i=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===o?(i.push(l),i.push(f)):e.incoming&&f===o&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(r)}},kv=function(e){return function(r){for(var n=this,i=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();a[c]||(a[c]=!0,i.push(l),s=!0)}if(!s)break;n=o}return this.spawn(i,!0).filter(r)}};yr.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};tt(yr,{roots:Sv({noIncomingEdges:!0}),leaves:Sv({noOutgoingEdges:!0}),outgoers:Wr(Tv({outgoing:!0}),"outgoers"),successors:kv({outgoing:!0}),incomers:Wr(Tv({incoming:!0}),"incomers"),predecessors:kv({})});tt(yr,{neighborhood:Wr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});yr.neighbourhood=yr.neighborhood;yr.closedNeighbourhood=yr.closedNeighborhood;yr.openNeighbourhood=yr.openNeighborhood;tt(yr,{source:Wr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Wr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Av({attr:"source"}),targets:Av({attr:"target"})});function Av(t){return function(r){for(var n=[],i=0;i<this.length;i++){var a=this[i],o=a._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}tt(yr,{edgesWith:Wr(_v(),"edgesWith"),edgesTo:Wr(_v({thisIsSrc:!0}),"edgesTo")});function _v(t){return function(r){var n=[],i=this._private.cy,a=t||{};Ze(r)&&(r=i.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),v=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),g=f||v;g&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!f||a.thisIsTgt&&!v)||n.push(l))}return this.spawn(n,!0)}}tt(yr,{connectedEdges:Wr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var i=r[n];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Wr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var i=r[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Wr(Dv(),"parallelEdges"),codirectedEdges:Wr(Dv({codirected:!0}),"codirectedEdges")});function Dv(t){var e={codirected:!1};return t=tt({},e,t),function(n){for(var i=[],a=this.edges(),o=t,s=0;s<a.length;s++)for(var u=a[s],l=u._private,c=l.source,f=c._private.data.id,v=l.data.target,g=c._private.edges,h=0;h<g.length;h++){var m=g[h],w=m._private.data,b=w.target,C=w.source,E=b===v&&C===f,x=f===b&&v===C;(o.codirected&&E||!o.codirected&&(E||x))&&i.push(m)}return this.spawn(i,!0).filter(n)}}tt(yr,{components:function(e){var r=this,n=r.cy(),i=n.collection(),a=e==null?r.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(c,f){i.merge(c),a.unmerge(c),f.merge(c)};if(a.empty())return r.spawn();var u=function(){var c=n.collection();o.push(c);var f=a[0];s(f,c),r.bfs({directed:!1,roots:f,visit:function(g){return s(g,c)}}),c.forEach(function(v){v.connectedEdges().forEach(function(g){r.has(g)&&c.has(g.source())&&c.has(g.target())&&c.merge(g)})})};do u();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});yr.componentsOf=yr.components;var cr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Ft("A collection must have a reference to the core");return}var a=new Mn,o=!1;if(!r)r=[];else if(r.length>0&&xt(r[0])&&!Ao(r[0])){o=!0;for(var s=[],u=new Ea,l=0,c=r.length;l<c;l++){var f=r[l];f.data==null&&(f.data={});var v=f.data;if(v.id==null)v.id=wg();else if(e.hasElementWithId(v.id)||u.has(v.id))continue;var g=new vu(e,f,!1);s.push(g),u.add(v.id)}r=s}this.length=0;for(var h=0,m=r.length;h<m;h++){var w=r[h][0];if(w!=null){var b=w._private.data.id;(!n||!a.has(b))&&(n&&a.set(b,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(C){this.lazyMap=C},rebuildMap:function(){for(var E=this.lazyMap=new Mn,x=this.eles,k=0;k<x.length;k++){var A=x[k];E.set(A.id(),{index:k,ele:A})}}},n&&(this._private.map=a),o&&!i&&this.restore()},Lt=vu.prototype=cr.prototype=Object.create(Array.prototype);Lt.instanceString=function(){return"collection"};Lt.spawn=function(t,e){return new cr(this.cy(),t,e)};Lt.spawnSelf=function(){return this.spawn(this)};Lt.cy=function(){return this._private.cy};Lt.renderer=function(){return this._private.cy.renderer()};Lt.element=function(){return this[0]};Lt.collection=function(){return og(this)?this:new cr(this._private.cy,[this])};Lt.unique=function(){return new cr(this._private.cy,this,!0)};Lt.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Lt.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new cr(e)};Lt.$id=Lt.getElementById;Lt.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};Lt.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Lt.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Lt.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(xt(t)){if(r.startBatch(),t.data){e.data(t.data);var i=n.data;if(e.isEdge()){var a=!1,o={},s=t.data.source,u=t.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),u!=null&&u!=i.target&&(o.target=""+u,a=!0),a&&(e=e.move(o))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(m,w,b){var C=t[m];C!=null&&C!==n[m]&&(C?e[w]():e[b]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var v={data:gn(n.data),position:gn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};v.classes="";var g=0;return n.classes.forEach(function(h){return v.classes+=g++===0?h:" "+h}),v}}};Lt.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};Lt.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],i=n.json(),a=new vu(t,i,!1);e.push(a)}return new cr(t,e)};Lt.copy=Lt.clone;Lt.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),i=n._private,a=[],o=[],s,u=0,l=r.length;u<l;u++){var c=r[u];e&&!c.removed()||(c.isNode()?a.push(c):o.push(c))}s=a.concat(o);var f,v=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var g=s[f],h=g._private,m=h.data;if(g.clearTraversalCache(),!(!e&&!h.removed)){if(m.id===void 0)m.id=wg();else if(Be(m.id))m.id=""+m.id;else if(ei(m.id)||!Ze(m.id)){Ft("Can not create element with invalid string ID `"+m.id+"`"),v();continue}else if(n.hasElementWithId(m.id)){Ft("Can not create second element with ID `"+m.id+"`"),v();continue}}var w=m.id;if(g.isNode()){var b=h.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(g.isEdge()){for(var C=g,E=["source","target"],x=E.length,k=!1,A=0;A<x;A++){var p=E[A],I=m[p];Be(I)&&(I=m[p]=""+m[p]),I==null||I===""?(Ft("Can not create edge `"+w+"` with unspecified "+p),k=!0):n.hasElementWithId(I)||(Ft("Can not create edge `"+w+"` with nonexistant "+p+" `"+I+"`"),k=!0)}if(k){v();continue}var M=n.getElementById(m.source),B=n.getElementById(m.target);M.same(B)?M._private.edges.push(C):(M._private.edges.push(C),B._private.edges.push(C)),C._private.source=M,C._private.target=B}h.map=new Mn,h.map.set(w,{ele:g,index:0}),h.removed=!1,e&&n.addToPool(g)}for(var P=0;P<a.length;P++){var L=a[P],O=L._private.data;Be(O.parent)&&(O.parent=""+O.parent);var N=O.parent,z=N!=null;if(z||L._private.parent){var W=L._private.parent?n.collection().merge(L._private.parent):n.getElementById(N);if(W.empty())O.parent=void 0;else if(W[0].removed())Tt("Node added with missing parent, reference to parent removed"),O.parent=void 0,L._private.parent=null;else{for(var q=!1,j=W;!j.empty();){if(L.same(j)){q=!0,O.parent=void 0;break}j=j.parent()}q||(W[0]._private.children.push(L),L._private.parent=W[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var ie=s.length===r.length?r:new cr(n,s),ne=0;ne<ie.length;ne++){var Y=ie[ne];Y.isNode()||(Y.parallelEdges().clearTraversalCache(),Y.source().clearTraversalCache(),Y.target().clearTraversalCache())}var H;i.hasCompoundNodes?H=n.collection().merge(ie).merge(ie.connectedNodes()).merge(ie.parent()):H=ie,H.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?ie.emitAndNotify("add"):e&&ie.emit("add")}return r};Lt.removed=function(){var t=this[0];return t&&t._private.removed};Lt.inside=function(){var t=this[0];return t&&!t._private.removed};Lt.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],i={},a=r._private.cy;function o(N){for(var z=N._private.edges,W=0;W<z.length;W++)u(z[W])}function s(N){for(var z=N._private.children,W=0;W<z.length;W++)u(z[W])}function u(N){var z=i[N.id()];e&&N.removed()||z||(i[N.id()]=!0,N.isNode()?(n.push(N),o(N),s(N)):n.unshift(N))}for(var l=0,c=r.length;l<c;l++){var f=r[l];u(f)}function v(N,z){var W=N._private.edges;ti(W,z),N.clearTraversalCache()}function g(N){N.clearTraversalCache()}var h=[];h.ids={};function m(N,z){z=z[0],N=N[0];var W=N._private.children,q=N.id();ti(W,z),z._private.parent=null,h.ids[q]||(h.ids[q]=!0,h.push(N))}r.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var w=0;w<n.length;w++){var b=n[w];if(b.isEdge()){var C=b.source()[0],E=b.target()[0];v(C,b),v(E,b);for(var x=b.parallelEdges(),k=0;k<x.length;k++){var A=x[k];g(A),A.isBundledBezier()&&A.dirtyBoundingBoxCache()}}else{var p=b.parent();p.length!==0&&m(p,b)}e&&(b._private.removed=!0)}var I=a._private.elements;a._private.hasCompoundNodes=!1;for(var M=0;M<I.length;M++){var B=I[M];if(B.isParent()){a._private.hasCompoundNodes=!0;break}}var P=new cr(this.cy(),n);P.size()>0&&(t?P.emitAndNotify("remove"):e&&P.emit("remove"));for(var L=0;L<h.length;L++){var O=h[L];(!e||!O.removed())&&O.updateStyle()}return P};Lt.move=function(t){var e=this._private.cy,r=this,n=!1,i=!1,a=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var o=a(t.source),s=a(t.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){r.remove(n,i),r.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var h=r[g],m=h._private.data;h.isEdge()&&(u&&(m.source=o),l&&(m.target=s))}r.restore(n,i)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=a(t.parent),f=c===null||e.hasElementWithId(c);if(f){var v=c===null?void 0:c;e.batch(function(){var g=r.remove(n,i);g.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var m=r[h],w=m._private.data;m.isNode()&&(w.parent=v)}g.restore(n,i)}),r.emitAndNotify("move")}}return this};[Pg,Mx,_s,Yn,pa,Gx,xu,uC,nm,im,hC,Ks,Ds,lr,Zn,yr].forEach(function(t){tt(Lt,t)});var wC={add:function(e){var r,n=this;if(Or(e)){var i=e;if(i._private.cy===n)r=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}r=new cr(n,a)}}else if(Mt(e)){var u=e;r=new cr(n,u)}else if(xt(e)&&(Mt(e.nodes)||Mt(e.edges))){for(var l=e,c=[],f=["nodes","edges"],v=0,g=f.length;v<g;v++){var h=f[v],m=l[h];if(Mt(m))for(var w=0,b=m.length;w<b;w++){var C=tt({group:h},m[w]);c.push(C)}}r=new cr(n,c)}else{var E=e;r=new vu(n,E).collection()}return r},remove:function(e){if(!Or(e)){if(Ze(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function xC(t,e,r,n){var i=4,a=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var v=c?new Float32Array(u):new Array(u);function g(B,P){return 1-3*P+3*B}function h(B,P){return 3*P-6*B}function m(B){return 3*B}function w(B,P,L){return((g(P,L)*B+h(P,L))*B+m(P))*B}function b(B,P,L){return 3*g(P,L)*B*B+2*h(P,L)*B+m(P)}function C(B,P){for(var L=0;L<i;++L){var O=b(P,t,r);if(O===0)return P;var N=w(P,t,r)-B;P-=N/O}return P}function E(){for(var B=0;B<u;++B)v[B]=w(B*l,t,r)}function x(B,P,L){var O,N,z=0;do N=P+(L-P)/2,O=w(N,t,r)-B,O>0?L=N:P=N;while(Math.abs(O)>o&&++z<s);return N}function k(B){for(var P=0,L=1,O=u-1;L!==O&&v[L]<=B;++L)P+=l;--L;var N=(B-v[L])/(v[L+1]-v[L]),z=P+N*l,W=b(z,t,r);return W>=a?C(B,z):W===0?z:x(B,P,P+l)}var A=!1;function p(){A=!0,(t!==e||r!==n)&&E()}var I=function(P){return A||p(),t===e&&r===n?P:P===0?0:P===1?1:w(k(P),e,n)};I.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var M="generateBezier("+[t,e,r,n]+")";return I.toString=function(){return M},I}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var CC=(function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var o={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,i){var a={dx:n.v,dv:t(n)},o=e(n,i*.5,a),s=e(n,i*.5,o),u=e(n,i,s),l=1/6*(a.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(a.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,a,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,v,g,h;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,v=o!==null,v?(l=n(i,a),g=l/o*f):g=f;h=r(h||s,g),u.push(1+h.x),l+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return v?function(m){return u[m*(u.length-1)|0]}:l}})(),Pt=function(e,r,n,i){var a=xC(e,r,n,i);return function(o,s,u){return o+(s-o)*a(u)}},Ms={linear:function(e,r,n){return e+(r-e)*n},ease:Pt(.25,.1,.25,1),"ease-in":Pt(.42,0,1,1),"ease-out":Pt(0,0,.58,1),"ease-in-out":Pt(.42,0,.58,1),"ease-in-sine":Pt(.47,0,.745,.715),"ease-out-sine":Pt(.39,.575,.565,1),"ease-in-out-sine":Pt(.445,.05,.55,.95),"ease-in-quad":Pt(.55,.085,.68,.53),"ease-out-quad":Pt(.25,.46,.45,.94),"ease-in-out-quad":Pt(.455,.03,.515,.955),"ease-in-cubic":Pt(.55,.055,.675,.19),"ease-out-cubic":Pt(.215,.61,.355,1),"ease-in-out-cubic":Pt(.645,.045,.355,1),"ease-in-quart":Pt(.895,.03,.685,.22),"ease-out-quart":Pt(.165,.84,.44,1),"ease-in-out-quart":Pt(.77,0,.175,1),"ease-in-quint":Pt(.755,.05,.855,.06),"ease-out-quint":Pt(.23,1,.32,1),"ease-in-out-quint":Pt(.86,0,.07,1),"ease-in-expo":Pt(.95,.05,.795,.035),"ease-out-expo":Pt(.19,1,.22,1),"ease-in-out-expo":Pt(1,0,0,1),"ease-in-circ":Pt(.6,.04,.98,.335),"ease-out-circ":Pt(.075,.82,.165,1),"ease-in-out-circ":Pt(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Ms.linear;var i=CC(e,r,n);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":Pt};function Mv(t,e,r,n,i){if(n===1||e===r)return r;var a=i(e,r,n);return t==null||((t.roundValue||t.color)&&(a=Math.round(a)),t.min!==void 0&&(a=Math.max(a,t.min)),t.max!==void 0&&(a=Math.min(a,t.max))),a}function Iv(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Yi(t,e,r,n,i){var a=i!=null?i.type:null;r<0?r=0:r>1&&(r=1);var o=Iv(t,i),s=Iv(e,i);if(Be(o)&&Be(s))return Mv(a,o,s,r,n);if(Mt(o)&&Mt(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(c!=null&&f!=null){var v=Mv(a,c,f,r,n);u.push(v)}else u.push(f)}return u}}function EC(t,e,r,n){var i=!n,a=t._private,o=e._private,s=o.easing,u=o.startTime,l=n?t:t.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=Ms.linear;else{var f;if(Ze(s)){var v=c.parse("transition-timing-function",s);f=v.value}else f=s;var g,h;Ze(f)?(g=f,h=[]):(g=f[1],h=f.slice(2).map(function(ie){return+ie})),h.length>0?(g==="spring"&&h.push(o.duration),o.easingImpl=Ms[g].apply(null,h)):o.easingImpl=Ms[g]}var m=o.easingImpl,w;if(o.duration===0?w=1:w=(r-u)/o.duration,o.applying&&(w=o.progress),w<0?w=0:w>1&&(w=1),o.delay==null){var b=o.startPosition,C=o.position;if(C&&i&&!t.locked()){var E={};Ha(b.x,C.x)&&(E.x=Yi(b.x,C.x,w,m)),Ha(b.y,C.y)&&(E.y=Yi(b.y,C.y,w,m)),t.position(E)}var x=o.startPan,k=o.pan,A=a.pan,p=k!=null&&n;p&&(Ha(x.x,k.x)&&(A.x=Yi(x.x,k.x,w,m)),Ha(x.y,k.y)&&(A.y=Yi(x.y,k.y,w,m)),t.emit("pan"));var I=o.startZoom,M=o.zoom,B=M!=null&&n;B&&(Ha(I,M)&&(a.zoom=vo(a.minZoom,Yi(I,M,w,m),a.maxZoom)),t.emit("zoom")),(p||B)&&t.emit("viewport");var P=o.style;if(P&&P.length>0&&i){for(var L=0;L<P.length;L++){var O=P[L],N=O.name,z=O,W=o.startStyle[N],q=c.properties[W.name],j=Yi(W,z,w,m,q);c.overrideBypass(t,N,j)}t.emit("style")}}return o.progress=w,w}function Ha(t,e){return t==null||e==null?!1:Be(t)&&Be(e)?!0:!!(t&&e)}function SC(t,e,r,n){var i=e._private;i.started=!0,i.startTime=r-i.progress*i.duration}function Pv(t,e){var r=e._private.aniEles,n=[];function i(c,f){var v=c._private,g=v.animation.current,h=v.animation.queue,m=!1;if(g.length===0){var w=h.shift();w&&g.push(w)}for(var b=function(A){for(var p=A.length-1;p>=0;p--){var I=A[p];I()}A.splice(0,A.length)},C=g.length-1;C>=0;C--){var E=g[C],x=E._private;if(x.stopped){g.splice(C,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.frames);continue}!x.playing&&!x.applying||(x.playing&&x.applying&&(x.applying=!1),x.started||SC(c,E,t),EC(c,E,t,f),x.applying&&(x.applying=!1),b(x.frames),x.step!=null&&x.step(t),E.completed()&&(g.splice(C,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.completes)),m=!0)}return!f&&g.length===0&&h.length===0&&n.push(c),m}for(var a=!1,o=0;o<r.length;o++){var s=r[o],u=i(s);a=a||u}var l=i(e,!0);(a||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var TC={animate:St.animate(),animation:St.animation(),animated:St.animated(),clearQueue:St.clearQueue(),delay:St.delay(),delayAnimation:St.delayAnimation(),stop:St.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&$s(function(a){Pv(a,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,o){Pv(o,e)},n.beforeRenderPriorities.animations):r()}},kC={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var i=r.qualifier;return i!=null?e!==n.target&&Ao(n.target)&&i.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},fs=function(e){return Ze(e)?new ni(e):e},sm={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Cu(kC,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,fs(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,fs(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,fs(r),n),this},once:function(e,r,n){return this.emitter().one(e,fs(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};St.eventAliasesOn(sm);var rf={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};rf.jpeg=rf.jpg;var Is={layout:function(e){var r=this;if(e==null){Ft("Layout options must be specified to make a layout");return}if(e.name==null){Ft("A `name` must be specified to make a layout");return}var n=e.name,i=r.extension("layout",n);if(i==null){Ft("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Ze(e.eles)?a=r.$(e.eles):a=e.eles!=null?e.eles:r.$();var o=new i(tt({},e,{cy:r,eles:a}));return o}};Is.createLayout=Is.makeLayout=Is.layout;var AC={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&i.merge(r);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?r.notify(n):r.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=r.getElementById(a);s.data(o)}})}},_C=fr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),nf={renderTo:function(e,r,n,i){var a=this._private.renderer;return a.renderTo(e,r,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){Ft("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Tt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=_C(e);i.cy=r,r._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};nf.invalidateDimensions=nf.resize;var Ps={collection:function(e,r){return Ze(e)?this.$(e):Or(e)?e.collection():Mt(e)?(r||(r={}),new cr(this,e,r.unique,r.removed)):new cr(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Ps.elements=Ps.filter=Ps.$;var ir={},eo="t",DC="f";ir.apply=function(t){for(var e=this,r=e._private,n=r.cy,i=n.collection(),a=0;a<t.length;a++){var o=t[a],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&i.push(o)}}return i};ir.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=t+"-"+e,a=n[i];if(a)return a;for(var o=[],s={},u=0;u<r.length;u++){var l=r[u],c=t[u]===eo,f=e[u]===eo,v=c!==f,g=l.mappedProperties.length>0;if(v||f&&g){var h=void 0;v&&g||v?h=l.properties:g&&(h=l.mappedProperties);for(var m=0;m<h.length;m++){for(var w=h[m],b=w.name,C=!1,E=u+1;E<r.length;E++){var x=r[E],k=e[E]===eo;if(k&&(C=x.properties[w.name]!=null,C))break}!s[b]&&!C&&(s[b]=!0,o.push(b))}}}return n[i]=o,o};ir.getContextMeta=function(t){for(var e=this,r="",n,i=t._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(t);s?r+=eo:r+=DC}return n=e.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};ir.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<r.length;a++){var o=r[a],s=e[a]===eo;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];i[l.name]=l}}return n[e]=i,i};ir.applyContextStyle=function(t,e,r){for(var n=this,i=t.diffPropNames,a={},o=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=r.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,v=f.fnValue=l.value(r);if(v===f.prevFnValue)continue}var g=a[u]={prev:c};n.applyParsedProperty(r,l),g.next=r.pstyle(u),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:a}};ir.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=function(ae,me,Ae){return r.getPropertiesHash(ae,me,Ae)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[Di,na]}for(var f=function(ae,me){return e.styleKeys[me][0]=co(ae,e.styleKeys[me][0])},v=function(ae,me){return e.styleKeys[me][1]=fo(ae,e.styleKeys[me][1])},g=function(ae,me){f(ae,me),v(ae,me)},h=function(ae,me){for(var Ae=0;Ae<ae.length;Ae++){var Ve=ae.charCodeAt(Ae);f(Ve,me),v(Ve,me)}},m=2e9,w=function(ae){return-128<ae&&ae<128&&Math.floor(ae)!==ae?m-(ae*1024|0):ae},b=0;b<n.length;b++){var C=n[b],E=u[C];if(E!=null){var x=this.properties[C],k=x.type,A=x.groupKey,p=void 0;x.hashOverride!=null?p=x.hashOverride(t,E):E.pfValue!=null&&(p=E.pfValue);var I=x.enums==null?E.value:null,M=p!=null,B=I!=null,P=M||B,L=E.units;if(k.number&&P&&!k.multiple){var O=M?p:I;g(w(O),A),!M&&L!=null&&h(L,A)}else h(E.strValue,A)}}for(var N=[Di,na],z=0;z<i.length;z++){var W=i[z],q=e.styleKeys[W];N[0]=co(q[0],N[0]),N[1]=fo(q[1],N[1])}e.styleKey=Ub(N[0],N[1]);var j=e.styleKeys;e.labelDimsKey=$n(j.labelDimensions);var ie=a(t,["label"],j.labelDimensions);if(e.labelKey=$n(ie),e.labelStyleKey=$n(ns(j.commonLabel,ie)),!s){var ne=a(t,["source-label"],j.labelDimensions);e.sourceLabelKey=$n(ne),e.sourceLabelStyleKey=$n(ns(j.commonLabel,ne));var Y=a(t,["target-label"],j.labelDimensions);e.targetLabelKey=$n(Y),e.targetLabelStyleKey=$n(ns(j.commonLabel,Y))}if(s){var H=e.styleKeys,G=H.nodeBody,K=H.nodeBorder,V=H.nodeOutline,Q=H.backgroundImage,oe=H.compound,he=H.pie,re=H.stripe,Z=[G,K,V,Q,oe,he,re].filter(function(ue){return ue!=null}).reduce(ns,[Di,na]);e.nodeKey=$n(Z),e.hasPie=he!=null&&he[0]!==Di&&he[1]!==na,e.hasStripe=re!=null&&re[0]!==Di&&re[1]!==na}return o!==e.styleKey};ir.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};ir.applyParsedProperty=function(t,e){var r=this,n=e,i=t._private.style,a,o=r.types,s=r.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=t._private,v="mapping",g=function(G){return G==null?null:G.pfValue!=null?G.pfValue:G.value},h=function(){var G=g(l),K=g(n);r.checkTriggers(t,n.name,G,K)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,h(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,h(),!0):!1:(h(),!0);var m=function(){Tt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var w=n.field.split("."),b=f.data,C=0;C<w.length&&b;C++){var E=w[C];b=b[E]}if(b==null)return m(),!1;var x;if(Be(b)){var k=n.fieldMax-n.fieldMin;k===0?x=0:x=(b-n.fieldMin)/k}else return Tt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+t.id()+"` is non-numeric)"),!1;if(x<0?x=0:x>1&&(x=1),s.color){var A=n.valueMin[0],p=n.valueMax[0],I=n.valueMin[1],M=n.valueMax[1],B=n.valueMin[2],P=n.valueMax[2],L=n.valueMin[3]==null?1:n.valueMin[3],O=n.valueMax[3]==null?1:n.valueMax[3],N=[Math.round(A+(p-A)*x),Math.round(I+(M-I)*x),Math.round(B+(P-B)*x),Math.round(L+(O-L)*x)];a={bypass:n.bypass,name:n.name,value:N,strValue:"rgb("+N[0]+", "+N[1]+", "+N[2]+")"}}else if(s.number){var z=n.valueMin+(n.valueMax-n.valueMin)*x;a=this.parse(n.name,z,n.bypass,v)}else return!1;if(!a)return m(),!1;a.mapping=n,n=a;break}case o.data:{for(var W=n.field.split("."),q=f.data,j=0;j<W.length&&q;j++){var ie=W[j];q=q[ie]}if(q!=null&&(a=this.parse(n.name,q,n.bypass,v)),!a)return m(),!1;a.mapping=n,n=a;break}case o.fn:{var ne=n.value,Y=n.fnValue!=null?n.fnValue:ne(t);if(n.prevFnValue=Y,Y==null)return Tt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(a=this.parse(n.name,Y,n.bypass,v),!a)return Tt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;a.mapping=gn(n),n=a;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,h(),!0};ir.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};ir.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};ir.updateTransitions=function(t,e){var r=this,n=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=t.pstyle(c),v=e[c];if(v){var g=v.prev,h=g,m=v.next!=null?v.next:f,w=!1,b=void 0,C=1e-6;h&&(Be(h.pfValue)&&Be(m.pfValue)?(w=m.pfValue-h.pfValue,b=h.pfValue+C*w):Be(h.value)&&Be(m.value)?(w=m.value-h.value,b=h.value+C*w):Mt(h.value)&&Mt(m.value)&&(w=h.value[0]!==m.value[0]||h.value[1]!==m.value[1]||h.value[2]!==m.value[2],b=h.strValue),w&&(s[c]=m.strValue,this.applyBypass(t,c,b),u=!0))}}if(!u)return;n.transitioning=!0,new Sa(function(E){o>0?t.delayAnimation(o).play().promise().then(E):E()}).then(function(){return t.animation({style:s,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,i),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),n.transitioning=!1)};ir.checkTrigger=function(t,e,r,n,i,a){var o=this.properties[e],s=i(o);t.removed()||s!=null&&s(r,n,t)&&a(o)};ir.checkZOrderTrigger=function(t,e,r,n){var i=this;this.checkTrigger(t,e,r,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",t)})};ir.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};ir.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){t.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};ir.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){t.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};ir.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var Bo={};Bo.applyBypass=function(t,e,r,n){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,r,!0);c&&a.push(c)}}else if(Ze(e)){var f=this.parse(e,r,!0);f&&a.push(f)}else if(xt(e)){var v=e;n=r;for(var g=Object.keys(v),h=0;h<g.length;h++){var m=g[h],w=v[m];if(w===void 0&&(w=v[du(m)]),w!==void 0){var b=this.parse(m,w,!0);b&&a.push(b)}}}else return!1;if(a.length===0)return!1;for(var C=!1,E=0;E<t.length;E++){for(var x=t[E],k={},A=void 0,p=0;p<a.length;p++){var I=a[p];if(n){var M=x.pstyle(I.name);A=k[I.name]={prev:M}}C=this.applyParsedProperty(x,gn(I))||C,n&&(A.next=x.pstyle(I.name))}C&&this.updateStyleHints(x),n&&this.updateTransitions(x,k,o)}return C};Bo.overrideBypass=function(t,e,r){e=_f(e);for(var n=0;n<t.length;n++){var i=t[n],a=i._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,r):(a.value=r,a.pfValue!=null&&(a.pfValue=r),s?a.strValue="rgb("+r.join(",")+")":u?a.strValue=r.join(" "):a.strValue=""+r,this.updateStyleHints(i)),this.checkTriggers(i,e,l,r)}};Bo.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Bo.removeBypasses=function(t,e,r){for(var n=!0,i=0;i<t.length;i++){for(var a=t[i],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=a.pstyle(l.name);if(!(!c||!c.bypass)){var f="",v=this.parse(u,f,!0),g=o[l.name]={prev:c};this.applyParsedProperty(a,v),g.next=a.pstyle(l.name)}}this.updateStyleHints(a),r&&this.updateTransitions(a,o,n)}};var $f={};$f.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};$f.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var bn={};bn.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};bn.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},i=0;i<r.properties.length;i++){var a=r.properties[i],o=r.getStylePropertyValue(t,a.name,e);o!=null&&(n[a.name]=o,n[du(a.name)]=o)}return n}};bn.getIndexedStyle=function(t,e,r,n){var i=t.pstyle(e)[r][n];return i??t.cy().style().getDefaultProperty(e)[r][0]};bn.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=t.pstyle(i.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(r&&a.number&&s!=null&&Be(s)){var c=t.cy().zoom(),f=function(w){return w*c},v=function(w,b){return f(w)+b},g=Mt(s),h=g?u.every(function(m){return m!=null}):u!=null;return h?g?s.map(function(m,w){return v(m,u[w])}).join(" "):v(s,u):g?s.map(function(m){return Ze(m)?m:""+f(m)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};bn.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=i.name,o=t.pstyle(a);o!==void 0&&(xt(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(r[a]=o)}return r};bn.getPropsList=function(t){var e=this,r=[],n=t,i=e.properties;if(n)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s],l=i[s]||i[_f(s)],c=this.parse(l.name,u);c&&r.push(c)}return r};bn.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),i,a,o,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],a=t.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=co(s,n[0]),n[1]=fo(s,n[1]);else for(o=a.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=co(s,n[0]),n[1]=fo(s,n[1]);return n};bn.getPropertiesHash=bn.getNonDefaultPropertiesHash;var Tu={};Tu.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],i=n.selector,a=n.style||n.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var u=o[s],l=a[u];e.css(u,l)}}return e};Tu.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Tu.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:a})}return t};var Wf={};Wf.appendFromString=function(t){var e=this,r=this,n=""+t,i,a,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Tt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var v=new ni(f);if(v.invalid){Tt("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var g=c[2],h=!1;a=g;for(var m=[];;){var w=a.match(/^\s*$/);if(w)break;var b=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){Tt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),h=!0;break}o=b[0];var C=b[1],E=b[2],x=e.properties[C];if(!x){Tt("Skipping property: Invalid property name in: "+o),u();continue}var k=r.parse(C,E);if(!k){Tt("Skipping property: Invalid property definition in: "+o),u();continue}m.push({name:C,val:E}),u()}if(h){s();break}r.selector(f);for(var A=0;A<m.length;A++){var p=m[A];r.css(p.name,p.val)}s()}return r};Wf.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Kt={};(function(){var t=Qt,e=Eb,r=Tb,n=kb,i=Ab,a=function(ue){return"^"+ue+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(ue){var ae=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+i;return"^"+ue+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+ae+")\\s*\\,\\s*("+ae+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Kt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(ue,ae){switch(ue.length){case 2:return ae[0]!=="deg"&&ae[0]!=="rad"&&ae[1]!=="deg"&&ae[1]!=="rad";case 1:return Ze(ue[0])||ae[0]==="deg"||ae[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(ue){var ae=ue.length;return ae===1||ae===2||ae===4}}};var u={zeroNonZero:function(ue,ae){return(ue==null||ae==null)&&ue!==ae||ue==0&&ae!=0?!0:ue!=0&&ae==0},any:function(ue,ae){return ue!=ae},emptyNonEmpty:function(ue,ae){var me=ei(ue),Ae=ei(ae);return me&&!Ae||!me&&Ae}},l=Kt.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],v=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],g=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],h=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],m=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],w=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(ue,ae,me){return ue===ae?!1:me.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],b=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],C=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],E=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],x=function(ue,ae){return ae.value==="label"?-ue.poolIndex():ae.pfValue},k=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],A=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],p=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],I=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],M=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],B=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(ue,ae){return ue===ae?!1:ue==="bezier"||ae==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],P=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],L=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],O=[];Kt.pieBackgroundN=16,O.push({name:"pie-size",type:l.sizeMaybePercent}),O.push({name:"pie-hole",type:l.sizeMaybePercent}),O.push({name:"pie-start-angle",type:l.angle});for(var N=1;N<=Kt.pieBackgroundN;N++)O.push({name:"pie-"+N+"-background-color",type:l.color}),O.push({name:"pie-"+N+"-background-size",type:l.percent}),O.push({name:"pie-"+N+"-background-opacity",type:l.zeroOneNumber});var z=[];Kt.stripeBackgroundN=16,z.push({name:"stripe-size",type:l.sizeMaybePercent}),z.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var W=1;W<=Kt.stripeBackgroundN;W++)z.push({name:"stripe-"+W+"-background-color",type:l.color}),z.push({name:"stripe-"+W+"-background-size",type:l.percent}),z.push({name:"stripe-"+W+"-background-opacity",type:l.zeroOneNumber});var q=[],j=Kt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(Z){j.forEach(function(ue){var ae=ue+"-"+Z.name,me=Z.type,Ae=Z.triggersBounds;q.push({name:ae,type:me,triggersBounds:Ae})})},{});var ie=Kt.properties=[].concat(m,E,w,b,C,P,h,g,c,f,v,k,A,p,I,O,z,M,B,q,L),ne=Kt.propertyGroups={behavior:m,transition:E,visibility:w,overlay:b,underlay:C,ghost:P,commonLabel:h,labelDimensions:g,mainLabel:c,sourceLabel:f,targetLabel:v,nodeBody:k,nodeBorder:A,nodeOutline:p,backgroundImage:I,pie:O,stripe:z,compound:M,edgeLine:B,edgeArrow:q,core:L},Y=Kt.propertyGroupNames={},H=Kt.propertyGroupKeys=Object.keys(ne);H.forEach(function(Z){Y[Z]=ne[Z].map(function(ue){return ue.name}),ne[Z].forEach(function(ue){return ue.groupKey=Z})});var G=Kt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Kt.propertyNames=ie.map(function(Z){return Z.name});for(var K=0;K<ie.length;K++){var V=ie[K];ie[V.name]=V}for(var Q=0;Q<G.length;Q++){var oe=G[Q],he=ie[oe.pointsTo],re={name:oe.name,alias:!0,pointsTo:he};ie.push(re),ie[oe.name]=re}})();Kt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Kt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=tt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Kt.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),v=l.value;u[f]=v}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Kt.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),v=l.value;u[f]=v}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Kt.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,v=l.value;u[f]=v}),u},{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);r[a]=s}}return t.defaultProperties=r,t.defaultProperties};Kt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var ku={};ku.parse=function(t,e,r,n){var i=this;if(Ht(e))return i.parseImplWarn(t,e,r,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,u=mg(t,s,o,a),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=gn(c),c&&(c.value=gn(c.value))),c};ku.parseImplWarn=function(t,e,r,n){var i=this.parseImpl(t,e,r,n);return!i&&e!=null&&Tt("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Tt("The style value of `label` is deprecated for `"+i.name+"`"),i};ku.parseImpl=function(t,e,r,n){var i=this;t=_f(t);var a=i.properties[t],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,t=a.name);var u=Ze(e);u&&(e=e.trim());var l=a.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Ht(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var v=s.data;return{name:t,value:c,strValue:""+e,mapped:v,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(r||l.multiple)return!1;var g=s.mapData;if(!(l.color||l.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var m=this.parse(t,f[5]);if(!m||m.mapped)return!1;if(h.pfValue===m.pfValue||h.strValue===m.strValue)return Tt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(l.color){var w=h.value,b=m.value,C=w[0]===b[0]&&w[1]===b[1]&&w[2]===b[2]&&(w[3]===b[3]||(w[3]==null||w[3]===1)&&(b[3]==null||b[3]===1));if(C)return!1}return{name:t,value:f,strValue:""+e,mapped:g,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:m.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var E;if(u?E=e.split(/\s+/):Mt(e)?E=e:E=[e],l.evenMultiple&&E.length%2!==0)return null;for(var x=[],k=[],A=[],p="",I=!1,M=0;M<E.length;M++){var B=i.parse(t,E[M],r,"multiple");I=I||Ze(B.value),x.push(B.value),A.push(B.pfValue!=null?B.pfValue:B.value),k.push(B.units),p+=(M>0?" ":"")+B.strValue}return l.validate&&!l.validate(x,k)?null:l.singleEnum&&I?x.length===1&&Ze(x[0])?{name:t,value:x[0],strValue:x[0],bypass:r}:null:{name:t,value:x,pfValue:A,strValue:p,bypass:r,units:k}}var P=function(){for(var re=0;re<l.enums.length;re++){var Z=l.enums[re];if(Z===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var L,O="px";if(l.units&&(L=l.units),l.implicitUnits&&(O=l.implicitUnits),!l.unitless)if(u){var N="px|em"+(l.allowPercent?"|\\%":"");L&&(N=L);var z=e.match("^("+Qt+")("+N+")?$");z&&(e=z[1],L=z[2]||O)}else(!L||l.implicitUnits)&&(L=O);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,P();if(l.integer&&!gb(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var W={name:t,value:e,strValue:""+e+(L||""),units:L,bypass:r};return l.unitless||L!=="px"&&L!=="em"?W.pfValue=e:W.pfValue=L==="px"||!L?e:this.getEmSizeInPixels()*e,(L==="ms"||L==="s")&&(W.pfValue=L==="ms"?e:1e3*e),(L==="deg"||L==="rad")&&(W.pfValue=L==="rad"?e:kw(e)),L==="%"&&(W.pfValue=e/100),W}else if(l.propList){var q=[],j=""+e;if(j!=="none"){for(var ie=j.split(/\s*,\s*|\s+/),ne=0;ne<ie.length;ne++){var Y=ie[ne].trim();i.properties[Y]?q.push(Y):Tt("`"+Y+"` is not a valid property name")}if(q.length===0)return null}return{name:t,value:q,strValue:q.length===0?"none":q.join(" "),bypass:r}}else if(l.color){var H=cg(e);return H?{name:t,value:H,pfValue:H,strValue:"rgb("+H[0]+","+H[1]+","+H[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var G=P();if(G)return G}for(var K=l.regexes?l.regexes:[l.regex],V=0;V<K.length;V++){var Q=new RegExp(K[V]),oe=Q.exec(e);if(oe)return{name:t,value:l.singleRegexMatchValue?oe[1]:oe,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?P():null};var nr=function(e){if(!(this instanceof nr))return new nr(e);if(!Af(e)){Ft("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},br=nr.prototype;br.instanceString=function(){return"style"};br.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};br.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};br.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};br.selector=function(t){var e=t==="core"?null:new ni(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};br.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var i=t.properties[n],a=r[i.name];a===void 0&&(a=r[du(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};br.style=br.css;br.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var i=!this[n].selector;i&&(this._private.coreStyle[r.name]=r)}return this};br.append=function(t){return sg(t)?t.appendToStyle(this):Mt(t)?this.appendFromJson(t):Ze(t)&&this.appendFromString(t),this};nr.fromJson=function(t,e){var r=new nr(t);return r.fromJson(e),r};nr.fromString=function(t,e){return new nr(t).fromString(e)};[ir,Bo,$f,bn,Tu,Wf,Kt,ku].forEach(function(t){tt(br,t)});nr.types=br.types;nr.properties=br.properties;nr.propertyGroups=br.propertyGroups;nr.propertyGroupNames=br.propertyGroupNames;nr.propertyGroupKeys=br.propertyGroupKeys;var MC={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return sg(e)?r.style=e.generateStyle(this):Mt(e)?r.style=nr.fromJson(this,e):Ze(e)?r.style=nr.fromString(this,e):r.style=nr(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},IC="single",Ni={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=IC),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,i,a,o,s;switch(e.length){case 0:return r;case 1:if(Ze(e[0]))return n=e[0],r[n];if(xt(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,Be(o)&&(r.x=o),Be(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&Be(i)&&(r[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,i=this._private.pan,a,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:xt(e)&&(s=n[0],u=s.x,l=s.y,Be(u)&&(i.x+=u),Be(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:a=e,o=r,(a==="x"||a==="y")&&Be(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(Be(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ze(e)){var i=e;e=this.$(i)}else if(bb(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Or(e)||(e=this.mutableElements());if(!(Or(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(r=Be(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*r)/n.w,(s-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var i=e;e=i.min,r=i.max}return Be(e)&&Be(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):Be(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:Be(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,i=r.zoom,a,o,s=!1;if(r.zoomingEnabled||(s=!0),Be(e)?o=e:xt(e)&&(o=e.level,e.position!=null?a=pu(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!Be(o)||o===i||a!=null&&(!Be(a.x)||!Be(a.y)))return null;if(a!=null){var u=n,l=i,c=o,f={x:-c/l*(a.x-u.x)+a.x,y:-c/l*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(Be(e.zoom)||(n=!1),xt(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=u,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;Be(l.x)&&(r.pan.x=l.x,s=!1),Be(l.y)&&(r.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Ze(e)){var n=e;e=this.mutableElements().filter(n)}else Or(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(a-r*(i.x1+i.x2))/2,y:(o-r*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?(function(){var i=n.window().getComputedStyle(r),a=function(s){return parseFloat(i.getPropertyValue(s))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ni.centre=Ni.center;Ni.autolockNodes=Ni.autolock;Ni.autoungrabifyNodes=Ni.autoungrabify;var yo={data:St.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:St.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:St.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:St.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};yo.attr=yo.data;yo.removeAttr=yo.removeData;var bo=function(e){var r=this;e=tt({},e);var n=e.container;n&&!Hs(n)&&Hs(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=r;var o=Zt!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=tt({name:o?"grid":"null"},s.layout),s.renderer=tt({name:o?"canvas":"null"},s.renderer);var u=function(h,m,w){return m!==void 0?m:w!==void 0?w:h},l=this._private={container:n,ready:!1,options:s,elements:new cr(this),listeners:[],aniEles:new cr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Be(s.zoom)?s.zoom:1,pan:{x:xt(s.pan)&&Be(s.pan.x)?s.pan.x:0,y:xt(s.pan)&&Be(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(h,m){var w=h.some(wb);if(w)return Sa.all(h).then(m);m(h)};l.styleEnabled&&r.setStyle([]);var f=tt({},s,s.renderer);r.initRenderer(f);var v=function(h,m,w){r.notifications(!1);var b=r.mutableElements();b.length>0&&b.remove(),h!=null&&(xt(h)||Mt(h))&&r.add(h),r.one("layoutready",function(E){r.notifications(!0),r.emit(E),r.one("load",m),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",w),r.emit("done")});var C=tt({},r._private.options.layout);C.eles=r.elements(),r.layout(C).run()};c([s.style,s.elements],function(g){var h=g[0],m=g[1];l.styleEnabled&&r.style().append(h),v(m,function(){r.startAnimationLoop(),l.ready=!0,Ht(s.ready)&&r.on("ready",s.ready);for(var w=0;w<a.length;w++){var b=a[w];r.on("ready",b)}i&&(i.readies=[]),r.emit("ready")},s.done)})},Xs=bo.prototype;tt(Xs,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Zt;var r=this._private.container.ownerDocument;return r===void 0||r==null?Zt:r.defaultView||Zt},mount:function(e){if(e!=null){var r=this,n=r._private,i=n.options;return!Hs(e)&&Hs(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(tt({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return gn(this._private.options)},json:function(e){var r=this,n=r._private,i=r.mutableElements(),a=function(x){return r.getElementById(x.id())};if(xt(e)){if(r.startBatch(),e.elements){var o={},s=function(x,k){for(var A=[],p=[],I=0;I<x.length;I++){var M=x[I];if(!M.data.id){Tt("cy.json() cannot handle elements without an ID attribute");continue}var B=""+M.data.id,P=r.getElementById(B);o[B]=!0,P.length!==0?p.push({ele:P,json:M}):(k&&(M.group=k),A.push(M))}r.add(A);for(var L=0;L<p.length;L++){var O=p[L],N=O.ele,z=O.json;N.json(z)}};if(Mt(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];Mt(f)&&s(f,c)}var v=r.collection();i.filter(function(E){return!o[E.id()]}).forEach(function(E){E.isParent()?v.merge(E):E.remove()}),v.forEach(function(E){return E.children().move({parent:null})}),v.forEach(function(E){return a(E).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<g.length;h++){var m=g[h];e[m]!=null&&r[m](e[m])}return r.endBatch(),this}else{var w=!!e,b={};w?b.elements=this.elements().map(function(E){return E.json()}):(b.elements={},i.forEach(function(E){var x=E.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(E.json())})),this._private.styleEnabled&&(b.style=r.style().json()),b.data=gn(r.data());var C=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=gn(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=gn(C.renderer),b.hideEdgesOnViewport=C.hideEdgesOnViewport,b.textureOnViewport=C.textureOnViewport,b.wheelSensitivity=C.wheelSensitivity,b.motionBlur=C.motionBlur,b.multiClickDebounceTime=C.multiClickDebounceTime,b}}});Xs.$id=Xs.getElementById;[wC,TC,sm,rf,Is,AC,nf,Ps,MC,Ni,yo].forEach(function(t){tt(Xs,t)});var PC={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},LC={maximal:!1,acyclic:!1},Zi=function(e){return e.scratch("breadthfirst")},Lv=function(e,r){return e.scratch("breadthfirst",r)};function um(t){this.options=tt({},PC,LC,t)}um.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(Ee){return Ee.isChildless()}),i=r,a=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,u=Sr(s?t.boundingBox:structuredClone(e.extent())),l;if(Or(t.roots))l=t.roots;else if(Mt(t.roots)){for(var c=[],f=0;f<t.roots.length;f++){var v=t.roots[f],g=e.getElementById(v);c.push(g)}l=e.collection(c)}else if(Ze(t.roots))l=e.$(t.roots);else if(a)l=n.roots();else{var h=r.components();l=e.collection();for(var m=function(){var ge=h[w],xe=ge.maxDegree(!1),Te=ge.filter(function(Me){return Me.degree(!1)===xe});l=l.add(Te)},w=0;w<h.length;w++)m()}var b=[],C={},E=function(ge,xe){b[xe]==null&&(b[xe]=[]);var Te=b[xe].length;b[xe].push(ge),Lv(ge,{index:Te,depth:xe})},x=function(ge,xe){var Te=Zi(ge),Me=Te.depth,ze=Te.index;b[Me][ze]=null,ge.isChildless()&&E(ge,xe)};i.bfs({roots:l,directed:t.directed,visit:function(ge,xe,Te,Me,ze){var Se=ge[0],Ie=Se.id();Se.isChildless()&&E(Se,ze),C[Ie]=!0}});for(var k=[],A=0;A<n.length;A++){var p=n[A];C[p.id()]||k.push(p)}var I=function(ge){for(var xe=b[ge],Te=0;Te<xe.length;Te++){var Me=xe[Te];if(Me==null){xe.splice(Te,1),Te--;continue}Lv(Me,{depth:ge,index:Te})}},M=function(ge,xe){for(var Te=Zi(ge),Me=ge.incomers().filter(function(Ye){return Ye.isNode()&&r.has(Ye)}),ze=-1,Se=ge.id(),Ie=0;Ie<Me.length;Ie++){var ot=Me[Ie],lt=Zi(ot);ze=Math.max(ze,lt.depth)}if(Te.depth<=ze){if(!t.acyclic&&xe[Se])return null;var Qe=ze+1;return x(ge,Qe),xe[Se]=Qe,!0}return!1};if(a&&o){var B=[],P={},L=function(ge){return B.push(ge)},O=function(){return B.shift()};for(n.forEach(function(Ee){return B.push(Ee)});B.length>0;){var N=O(),z=M(N,P);if(z)N.outgoers().filter(function(Ee){return Ee.isNode()&&r.has(Ee)}).forEach(L);else if(z===null){Tt("Detected double maximal shift for node `"+N.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var W=0;if(t.avoidOverlap)for(var q=0;q<n.length;q++){var j=n[q],ie=j.layoutDimensions(t),ne=ie.w,Y=ie.h;W=Math.max(W,ne,Y)}var H={},G=function(ge){if(H[ge.id()])return H[ge.id()];for(var xe=Zi(ge).depth,Te=ge.neighborhood(),Me=0,ze=0,Se=0;Se<Te.length;Se++){var Ie=Te[Se];if(!(Ie.isEdge()||Ie.isParent()||!n.has(Ie))){var ot=Zi(Ie);if(ot!=null){var lt=ot.index,Qe=ot.depth;if(!(lt==null||Qe==null)){var Ye=b[Qe].length;Qe<xe&&(Me+=lt/Ye,ze++)}}}}return ze=Math.max(1,ze),Me=Me/ze,ze===0&&(Me=0),H[ge.id()]=Me,Me},K=function(ge,xe){var Te=G(ge),Me=G(xe),ze=Te-Me;return ze===0?lg(ge.id(),xe.id()):ze};t.depthSort!==void 0&&(K=t.depthSort);for(var V=b.length,Q=0;Q<V;Q++)b[Q].sort(K),I(Q);for(var oe=[],he=0;he<k.length;he++)oe.push(k[he]);var re=function(){for(var ge=0;ge<V;ge++)I(ge)};oe.length&&(b.unshift(oe),V=b.length,re());for(var Z=0,ue=0;ue<V;ue++)Z=Math.max(b[ue].length,Z);var ae={x:u.x1+u.w/2,y:u.y1+u.h/2},me=n.reduce(function(Ee,ge){return(function(xe){return{w:Ee.w===-1?xe.w:(Ee.w+xe.w)/2,h:Ee.h===-1?xe.h:(Ee.h+xe.h)/2}})(ge.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Ae=Math.max(V===1?0:s?(u.h-t.padding*2-me.h)/(V-1):(u.h-t.padding*2-me.h)/(V+1),W),Ve=b.reduce(function(Ee,ge){return Math.max(Ee,ge.length)},0),rt=function(ge){var xe=Zi(ge),Te=xe.depth,Me=xe.index;if(t.circle){var ze=Math.min(u.w/2/V,u.h/2/V);ze=Math.max(ze,W);var Se=ze*Te+ze-(V>0&&b[0].length<=3?ze/2:0),Ie=2*Math.PI/b[Te].length*Me;return Te===0&&b[0].length===1&&(Se=1),{x:ae.x+Se*Math.cos(Ie),y:ae.y+Se*Math.sin(Ie)}}else{var ot=b[Te].length,lt=Math.max(ot===1?0:s?(u.w-t.padding*2-me.w)/((t.grid?Ve:ot)-1):(u.w-t.padding*2-me.w)/((t.grid?Ve:ot)+1),W),Qe={x:ae.x+(Me+1-(ot+1)/2)*lt,y:ae.y+(Te+1-(V+1)/2)*Ae};return Qe}},Le={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Le).indexOf(t.direction)===-1&&Ft("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Le).join(", ")));var Ue=function(ge){return Xb(rt(ge),u,Le[t.direction])};return r.nodes().layoutPositions(this,t,Ue),this};var BC={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function lm(t){this.options=tt({},BC,t)}lm.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=Sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,l=u/Math.max(1,a.length-1),c,f=0,v=0;v<a.length;v++){var g=a[v],h=g.layoutDimensions(e),m=h.w,w=h.h;f=Math.max(f,m,w)}if(Be(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,a.length>1&&e.avoidOverlap){f*=1.75;var b=Math.cos(l)-Math.cos(0),C=Math.sin(l)-Math.sin(0),E=Math.sqrt(f*f/(b*b+C*C));c=Math.max(E,c)}var x=function(A,p){var I=e.startAngle+p*l*(i?1:-1),M=c*Math.cos(I),B=c*Math.sin(I),P={x:s.x+M,y:s.y+B};return P};return n.nodes().layoutPositions(this,e,x),this};var OC={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function cm(t){this.options=tt({},OC,t)}cm.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,i=e.eles,a=i.nodes().not(":parent"),o=Sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<a.length;c++){var f=a[c],v=void 0;v=e.concentric(f),u.push({value:v,node:f}),f._private.scratch.concentric=v}a.updateStyle();for(var g=0;g<a.length;g++){var h=a[g],m=h.layoutDimensions(e);l=Math.max(l,m.w,m.h)}u.sort(function(Ae,Ve){return Ve.value-Ae.value});for(var w=e.levelWidth(a),b=[[]],C=b[0],E=0;E<u.length;E++){var x=u[E];if(C.length>0){var k=Math.abs(C[0].value-x.value);k>=w&&(C=[],b.push(C))}C.push(x)}var A=l+e.minNodeSpacing;if(!e.avoidOverlap){var p=b.length>0&&b[0].length>1,I=Math.min(o.w,o.h)/2-A,M=I/(b.length+p?1:0);A=Math.min(A,M)}for(var B=0,P=0;P<b.length;P++){var L=b[P],O=e.sweep===void 0?2*Math.PI-2*Math.PI/L.length:e.sweep,N=L.dTheta=O/Math.max(1,L.length-1);if(L.length>1&&e.avoidOverlap){var z=Math.cos(N)-Math.cos(0),W=Math.sin(N)-Math.sin(0),q=Math.sqrt(A*A/(z*z+W*W));B=Math.max(q,B)}L.r=B,B+=A}if(e.equidistant){for(var j=0,ie=0,ne=0;ne<b.length;ne++){var Y=b[ne],H=Y.r-ie;j=Math.max(j,H)}ie=0;for(var G=0;G<b.length;G++){var K=b[G];G===0&&(ie=K.r),K.r=ie,ie+=j}}for(var V={},Q=0;Q<b.length;Q++)for(var oe=b[Q],he=oe.dTheta,re=oe.r,Z=0;Z<oe.length;Z++){var ue=oe[Z],ae=e.startAngle+(r?1:-1)*he*Z,me={x:s.x+re*Math.cos(ae),y:s.y+re*Math.sin(ae)};V[ue.node.id()]=me}return i.nodes().layoutPositions(this,e,function(Ae){var Ve=Ae.id();return V[Ve]}),this};var yc,RC={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Au(t){this.options=tt({},RC,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(i){var a=i.source().data("id"),o=i.target().data("id"),s=e.some(function(l){return l.data("id")===a}),u=e.some(function(l){return l.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}Au.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?yc=!0:yc=!1;var n=NC(e,r,t);yc&&zC(n),t.randomize&&qC(n);var i=Pn(),a=function(){VC(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(v){return!(r.stopped||v>=t.numIter||(HC(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)a(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var v=t.eles.nodes(),g=dm(n,t,v);v.layoutPositions(r,t,g)}},u=0,l=!0;if(t.animate===!0){var c=function(){for(var v=0;l&&v<t.refresh;)l=o(u),u++,v++;if(!l)Ov(n,t),s();else{var g=Pn();g-i>=t.animationThreshold&&a(),$s(c)}};c()}else{for(;l;)l=o(u),u++;Ov(n,t),s()}return this};Au.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Au.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var NC=function(e,r,n){for(var i=n.eles.edges(),a=n.eles.nodes(),o=Sr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],v=0;v<f.length;v++){var g=f[v];l[g.id()]=c}for(var c=0;c<s.nodeSize;c++){var h=a[c],m=h.layoutDimensions(n),w={};w.isLocked=h.locked(),w.id=h.data("id"),w.parentId=h.data("parent"),w.cmptId=l[h.id()],w.children=[],w.positionX=h.position("x"),w.positionY=h.position("y"),w.offsetX=0,w.offsetY=0,w.height=m.w,w.width=m.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(h.style("padding")),w.padRight=parseFloat(h.style("padding")),w.padTop=parseFloat(h.style("padding")),w.padBottom=parseFloat(h.style("padding")),w.nodeRepulsion=Ht(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,s.layoutNodes.push(w),s.idToIndex[w.id]=c}for(var b=[],C=0,E=-1,x=[],c=0;c<s.nodeSize;c++){var h=s.layoutNodes[c],k=h.parentId;k!=null?s.layoutNodes[s.idToIndex[k]].children.push(h.id):(b[++E]=h.id,x.push(h.id))}for(s.graphSet.push(x);C<=E;){var A=b[C++],p=s.idToIndex[A],g=s.layoutNodes[p],I=g.children;if(I.length>0){s.graphSet.push(I);for(var c=0;c<I.length;c++)b[++E]=I[c]}}for(var c=0;c<s.graphSet.length;c++)for(var M=s.graphSet[c],v=0;v<M.length;v++){var B=s.idToIndex[M[v]];s.indexToGraph[B]=c}for(var c=0;c<s.edgeSize;c++){var P=i[c],L={};L.id=P.data("id"),L.sourceId=P.data("source"),L.targetId=P.data("target");var O=Ht(n.idealEdgeLength)?n.idealEdgeLength(P):n.idealEdgeLength,N=Ht(n.edgeElasticity)?n.edgeElasticity(P):n.edgeElasticity,z=s.idToIndex[L.sourceId],W=s.idToIndex[L.targetId],q=s.indexToGraph[z],j=s.indexToGraph[W];if(q!=j){for(var ie=FC(L.sourceId,L.targetId,s),ne=s.graphSet[ie],Y=0,w=s.layoutNodes[z];ne.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],Y++;for(w=s.layoutNodes[W];ne.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],Y++;O*=Y*n.nestingFactor}L.idealLength=O,L.elasticity=N,s.layoutEdges.push(L)}return s},FC=function(e,r,n){var i=fm(e,r,0,n);return 2>i.count?0:i.graph},fm=function(e,r,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],v=fm(e,r,f,i);if(v.count!==0)if(v.count===1){if(o++,o===2)break}else return v}}return{count:o,graph:n}},zC,qC=function(e,r){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*i)}},dm=function(e,r,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var l=a.w===0?.5:(u.positionX-a.x1)/a.w,c=a.h===0?.5:(u.positionY-a.y1)/a.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},VC=function(e,r,n){var i=n.layout,a=n.eles.nodes(),o=dm(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},HC=function(e,r,n){$C(e,r),GC(e),jC(e,r),KC(e),XC(e)},$C=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],u=o+1;u<a;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];WC(s,l,e,r)}},Bv=function(e){return-1+2*e*Math.random()},WC=function(e,r,n,i){var a=e.cmptId,o=r.cmptId;if(!(a!==o&&!n.isCompound)){var s=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;s===0&&u===0&&(s=Bv(l),u=Bv(l));var c=UC(e,r,s,u);if(c>0)var f=i.nodeOverlap*c,v=Math.sqrt(s*s+u*u),g=f*s/v,h=f*u/v;else var m=Ys(e,s,u),w=Ys(r,-1*s,-1*u),b=w.x-m.x,C=w.y-m.y,E=b*b+C*C,v=Math.sqrt(E),f=(e.nodeRepulsion+r.nodeRepulsion)/E,g=f*b/v,h=f*C/v;e.isLocked||(e.offsetX-=g,e.offsetY-=h),r.isLocked||(r.offsetX+=g,r.offsetY+=h)}},UC=function(e,r,n,i){if(n>0)var a=e.maxX-r.minX;else var a=r.maxX-e.minX;if(i>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},Ys=function(e,r,n){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,u=n/r,l=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=i,c.y=a+o/2,c):0<r&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=a+s*n/2/r,c):0>r&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=a-s*n/2/r,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+o*r/2/n,c.y=a+o/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-o*r/2/n,c.y=a-o/2),c)},GC=function(e,r){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var f=Ys(o,l,c),v=Ys(u,-1*l,-1*c),g=v.x-f.x,h=v.y-f.y,m=Math.sqrt(g*g+h*h),w=Math.pow(i.idealLength-m,2)/i.elasticity;if(m!==0)var b=w*g/m,C=w*h/m;else var b=0,C=0;o.isLocked||(o.offsetX+=b,o.offsetY+=C),u.isLocked||(u.offsetX-=b,u.offsetY-=C)}}},jC=function(e,r){if(r.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<o;f++){var v=e.layoutNodes[e.idToIndex[a[f]]];if(!v.isLocked){var g=s-v.positionX,h=u-v.positionY,m=Math.sqrt(g*g+h*h);if(m>n){var w=r.gravity*g/m,b=r.gravity*h/m;v.offsetX+=w,v.offsetY+=b}}}}},KC=function(e,r){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=n[i++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,v=0;v<l.length;v++){var g=e.layoutNodes[e.idToIndex[l[v]]];g.offsetX+=c,g.offsetY+=f,n[++a]=l[v]}u.offsetX=0,u.offsetY=0}}},XC=function(e,r){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=YC(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,hm(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},YC=function(e,r,n){var i=Math.sqrt(e*e+r*r);if(i>n)var a={x:n*e/i,y:n*r/i};else var a={x:e,y:r};return a},hm=function(e,r){var n=e.parentId;if(n!=null){var i=r.layoutNodes[r.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return hm(i,r)}},Ov=function(e,r){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var o=n[a],s=o.cmptId,u=i[s]=i[s]||[];u.push(o)}for(var l=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var v=c[f];c.x1=Math.min(c.x1,v.positionX-v.width/2),c.x2=Math.max(c.x2,v.positionX+v.width/2),c.y1=Math.min(c.y1,v.positionY-v.height/2),c.y2=Math.max(c.y2,v.positionY+v.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(C,E){return E.w*E.h-C.w*C.h});for(var g=0,h=0,m=0,w=0,b=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var f=0;f<c.length;f++){var v=c[f];v.isLocked||(v.positionX+=g-c.x1,v.positionY+=h-c.y1)}g+=c.w+r.componentSpacing,m+=c.w+r.componentSpacing,w=Math.max(w,c.h),m>b&&(h+=w+r.componentSpacing,g=0,m=0,w=0)}}},ZC={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function vm(t){this.options=tt({},ZC,t)}vm.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(G){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),u=Math.round(s),l=Math.round(a.w/a.h*s),c=function(K){if(K==null)return Math.min(u,l);var V=Math.min(u,l);V==u?u=K:l=K},f=function(K){if(K==null)return Math.max(u,l);var V=Math.max(u,l);V==u?u=K:l=K},v=e.rows,g=e.cols!=null?e.cols:e.columns;if(v!=null&&g!=null)u=v,l=g;else if(v!=null&&g==null)u=v,l=Math.ceil(o/u);else if(v==null&&g!=null)l=g,u=Math.ceil(o/l);else if(l*u>o){var h=c(),m=f();(h-1)*m>=o?c(h-1):(m-1)*h>=o&&f(m-1)}else for(;l*u<o;){var w=c(),b=f();(b+1)*w>=o?f(b+1):c(w+1)}var C=a.w/l,E=a.h/u;if(e.condense&&(C=0,E=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var k=i[x],A=k._private.position;(A.x==null||A.y==null)&&(A.x=0,A.y=0);var p=k.layoutDimensions(e),I=e.avoidOverlapPadding,M=p.w+I,B=p.h+I;C=Math.max(C,M),E=Math.max(E,B)}for(var P={},L=function(K,V){return!!P["c-"+K+"-"+V]},O=function(K,V){P["c-"+K+"-"+V]=!0},N=0,z=0,W=function(){z++,z>=l&&(z=0,N++)},q={},j=0;j<i.length;j++){var ie=i[j],ne=e.position(ie);if(ne&&(ne.row!==void 0||ne.col!==void 0)){var Y={row:ne.row,col:ne.col};if(Y.col===void 0)for(Y.col=0;L(Y.row,Y.col);)Y.col++;else if(Y.row===void 0)for(Y.row=0;L(Y.row,Y.col);)Y.row++;q[ie.id()]=Y,O(Y.row,Y.col)}}var H=function(K,V){var Q,oe;if(K.locked()||K.isParent())return!1;var he=q[K.id()];if(he)Q=he.col*C+C/2+a.x1,oe=he.row*E+E/2+a.y1;else{for(;L(N,z);)W();Q=z*C+C/2+a.x1,oe=N*E+E/2+a.y1,O(N,z),W()}return{x:Q,y:oe}};i.layoutPositions(this,e,H)}return this};var QC={ready:function(){},stop:function(){}};function Uf(t){this.options=tt({},QC,t)}Uf.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};Uf.prototype.stop=function(){return this};var JC={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function pm(t){this.options=tt({},JC,t)}pm.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=Ht(t.positions);function i(a){if(t.positions==null)return xw(a.position());if(n)return t.positions(a);var o=t.positions[a._private.data.id];return o??null}return r.layoutPositions(this,t,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var eE={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function gm(t){this.options=tt({},eE,t)}gm.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Sr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,i),this};var tE=[{name:"breadthfirst",impl:um},{name:"circle",impl:lm},{name:"concentric",impl:cm},{name:"cose",impl:Au},{name:"grid",impl:vm},{name:"null",impl:Uf},{name:"preset",impl:pm},{name:"random",impl:gm}];function mm(t){this.options=t,this.notifications=0}var Rv=function(){},Nv=function(){throw new Error("A headless instance can not render images")};mm.prototype={recalculateRenderedStyle:Rv,notify:function(){this.notifications++},init:Rv,isHeadless:function(){return!0},png:Nv,jpg:Nv};var Gf={};Gf.arrowShapeWidth=.3;Gf.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,c,f,v,g,h,m){var w=g.x-f/2-m,b=g.x+f/2+m,C=g.y-f/2-m,E=g.y+f/2+m,x=w<=l&&l<=b&&C<=c&&c<=E;return x},n=function(l,c,f,v,g){var h=l*Math.cos(v)-c*Math.sin(v),m=l*Math.sin(v)+c*Math.cos(v),w=h*f,b=m*f,C=w+g.x,E=b+g.y;return{x:C,y:E}},i=function(l,c,f,v){for(var g=[],h=0;h<l.length;h+=2){var m=l[h],w=l[h+1];g.push(n(m,w,c,f,v))}return g},a=function(l){for(var c=[],f=0;f<l.length;f++){var v=l[f];c.push(v.x,v.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Ze(c)&&(c=t[c]),t[l]=tt({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(v,g,h,m,w,b){var C=a(i(this.points,h+2*b,m,w)),E=_r(v,g,C);return E},roughCollide:r,draw:function(v,g,h,m){var w=i(this.points,g,h,m);e.arrowShapeImpl("polygon")(v,w)},spacing:function(v){return 0},gap:o},c)};s("none",{collide:Ws,roughCollide:Ws,draw:If,spacing:Zd,gap:Zd}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,c,f,v,g){var h=i(this.points,c,f,v),m=this.controlPoint,w=n(m[0],m[1],c,f,v);e.arrowShapeImpl(this.name)(l,h,w)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,v,g,h,m){var w=a(i(this.points,f+2*m,v,g)),b=a(i(this.pointsTee,f+2*m,v,g)),C=_r(l,c,w)||_r(l,c,b);return C},draw:function(l,c,f,v,g){var h=i(this.points,c,f,v),m=i(this.pointsTee,c,f,v);e.arrowShapeImpl(this.name)(l,h,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,v,g,h,m){var w=g,b=Math.pow(w.x-l,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*m)*this.radius,2),C=a(i(this.points,f+2*m,v,g));return _r(l,c,C)||b},draw:function(l,c,f,v,g){var h=i(this.pointsTr,c,f,v);e.arrowShapeImpl(this.name)(l,h,v.x,v.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),v=c/l,g=3,h=5;return f[g]=f[g]-v,f[h]=f[h]-v,f},collide:function(l,c,f,v,g,h,m){var w=a(i(this.points,f+2*m,v,g)),b=a(i(this.crossLinePts(f,h),f+2*m,v,g)),C=_r(l,c,w)||_r(l,c,b);return C},draw:function(l,c,f,v,g){var h=i(this.points,c,f,v),m=i(this.crossLinePts(c,g),c,f,v);e.arrowShapeImpl(this.name)(l,h,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,v,g,h,m){var w=g,b=Math.pow(w.x-l,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*m)*this.radius,2);return b},draw:function(l,c,f,v,g){e.arrowShapeImpl(this.name)(l,v.x,v.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Vi={};Vi.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=r.pan(),u=r.zoom(),l=((t-i)/o-s.x)/u,c=((e-a)/o-s.y)/u;return[l,c]};Vi.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(b){return parseFloat(r.getPropertyValue(b))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=a.left+a.right,f=e.width/(o+c),v=o-u,g=s-l,h=e.left+i.left+a.left,m=e.top+i.top+a.top;return this.containerBB=[h,m,v,g,f]};Vi.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Vi.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Vi.findNearestElements=function(t,e,r,n){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],u=a.cy.zoom(),l=a.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,v=(n?8:2)/u,g=1/0,h,m;r&&(o=o.interactive);function w(p,I){if(p.isNode()){if(m)return;m=p,s.push(p)}if(p.isEdge()&&(I==null||I<g))if(h){if(h.pstyle("z-compound-depth").value===p.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===p.pstyle("z-compound-depth").value){for(var M=0;M<s.length;M++)if(s[M].isEdge()){s[M]=p,h=p,g=I??g;break}}}else s.push(p),h=p,g=I??g}function b(p){var I=p.outerWidth()+2*f,M=p.outerHeight()+2*f,B=I/2,P=M/2,L=p.position(),O=p.pstyle("corner-radius").value==="auto"?"auto":p.pstyle("corner-radius").pfValue,N=p._private.rscratch;if(L.x-B<=t&&t<=L.x+B&&L.y-P<=e&&e<=L.y+P){var z=a.nodeShapes[i.getNodeShape(p)];if(z.checkPoint(t,e,0,I,M,L.x,L.y,O,N))return w(p,0),!0}}function C(p){var I=p._private,M=I.rscratch,B=p.pstyle("width").pfValue,P=p.pstyle("arrow-scale").value,L=B/2+c,O=L*L,N=L*2,j=I.source,ie=I.target,z;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack"){for(var W=M.allpts,q=0;q+3<W.length;q+=2)if(Ow(t,e,W[q],W[q+1],W[q+2],W[q+3],N)&&O>(z=qw(t,e,W[q],W[q+1],W[q+2],W[q+3])))return w(p,z),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"){for(var W=M.allpts,q=0;q+5<M.allpts.length;q+=4)if(Rw(t,e,W[q],W[q+1],W[q+2],W[q+3],W[q+4],W[q+5],N)&&O>(z=zw(t,e,W[q],W[q+1],W[q+2],W[q+3],W[q+4],W[q+5])))return w(p,z),!0}for(var j=j||I.source,ie=ie||I.target,ne=i.getArrowWidth(B,P),Y=[{name:"source",x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}],q=0;q<Y.length;q++){var H=Y[q],G=a.arrowShapes[p.pstyle(H.name+"-arrow-shape").value],K=p.pstyle("width").pfValue;if(G.roughCollide(t,e,ne,H.angle,{x:H.x,y:H.y},K,c)&&G.collide(t,e,ne,H.angle,{x:H.x,y:H.y},K,c))return w(p),!0}l&&s.length>0&&(b(j),b(ie))}function E(p,I,M){return Ar(p,I,M)}function x(p,I){var M=p._private,B=v,P;I?P=I+"-":P="",p.boundingBox();var L=M.labelBounds[I||"main"],O=p.pstyle(P+"label").value,N=p.pstyle("text-events").strValue==="yes";if(!(!N||!O)){var z=E(M.rscratch,"labelX",I),W=E(M.rscratch,"labelY",I),q=E(M.rscratch,"labelAngle",I),j=p.pstyle(P+"text-margin-x").pfValue,ie=p.pstyle(P+"text-margin-y").pfValue,ne=L.x1-B-j,Y=L.x2+B-j,H=L.y1-B-ie,G=L.y2+B-ie;if(q){var K=Math.cos(q),V=Math.sin(q),Q=function(me,Ae){return me=me-z,Ae=Ae-W,{x:me*K-Ae*V+z,y:me*V+Ae*K+W}},oe=Q(ne,H),he=Q(ne,G),re=Q(Y,H),Z=Q(Y,G),ue=[oe.x+j,oe.y+ie,re.x+j,re.y+ie,Z.x+j,Z.y+ie,he.x+j,he.y+ie];if(_r(t,e,ue))return w(p),!0}else if(jn(L,t,e))return w(p),!0}}for(var k=o.length-1;k>=0;k--){var A=o[k];A.isNode()?b(A)||x(A):C(A)||x(A)||x(A,"source")||x(A,"target")}return s};Vi.getAllInBox=function(t,e,r,n){var i=this.getCachedZSortedEles().interactive,a=this.cy.zoom(),o=2/a,s=[],u=Math.min(t,r),l=Math.max(t,r),c=Math.min(e,n),f=Math.max(e,n);t=u,r=l,e=c,n=f;var v=Sr({x1:t,y1:e,x2:r,y2:n}),g=[{x:v.x1,y:v.y1},{x:v.x2,y:v.y1},{x:v.x2,y:v.y2},{x:v.x1,y:v.y2}],h=[[g[0],g[1]],[g[1],g[2]],[g[2],g[3]],[g[3],g[0]]];function m(me,Ae,Ve){return Ar(me,Ae,Ve)}function w(me,Ae){var Ve=me._private,rt=o,Le="";me.boundingBox();var Ue=Ve.labelBounds.main;if(!Ue)return null;var Ee=m(Ve.rscratch,"labelX",Ae),ge=m(Ve.rscratch,"labelY",Ae),xe=m(Ve.rscratch,"labelAngle",Ae),Te=me.pstyle(Le+"text-margin-x").pfValue,Me=me.pstyle(Le+"text-margin-y").pfValue,ze=Ue.x1-rt-Te,Se=Ue.x2+rt-Te,Ie=Ue.y1-rt-Me,ot=Ue.y2+rt-Me;if(xe){var lt=Math.cos(xe),Qe=Math.sin(xe),Ye=function(ve,F){return ve=ve-Ee,F=F-ge,{x:ve*lt-F*Qe+Ee,y:ve*Qe+F*lt+ge}};return[Ye(ze,Ie),Ye(Se,Ie),Ye(Se,ot),Ye(ze,ot)]}else return[{x:ze,y:Ie},{x:Se,y:Ie},{x:Se,y:ot},{x:ze,y:ot}]}function b(me,Ae,Ve,rt){function Le(Ue,Ee,ge){return(ge.y-Ue.y)*(Ee.x-Ue.x)>(Ee.y-Ue.y)*(ge.x-Ue.x)}return Le(me,Ve,rt)!==Le(Ae,Ve,rt)&&Le(me,Ae,Ve)!==Le(me,Ae,rt)}for(var C=0;C<i.length;C++){var E=i[C];if(E.isNode()){var x=E,k=x.pstyle("text-events").strValue==="yes",A=x.pstyle("box-selection").strValue,p=x.pstyle("box-select-labels").strValue==="yes";if(A==="none")continue;var I=(A==="overlap"||p)&&k,M=x.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:I});if(A==="contain"){var B=!1;if(p&&k){var P=w(x);P&&gl(P,g)&&(s.push(x),B=!0)}!B&&Sg(v,M)&&s.push(x)}else if(A==="overlap"&&Of(v,M)){var L=x.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),O=[{x:L.x1,y:L.y1},{x:L.x2,y:L.y1},{x:L.x2,y:L.y2},{x:L.x1,y:L.y2}];if(gl(O,g))s.push(x);else{var N=w(x);N&&gl(N,g)&&s.push(x)}}}else{var z=E,W=z._private,q=W.rscratch,j=z.pstyle("box-selection").strValue;if(j==="none")continue;if(j==="contain"){if(q.startX!=null&&q.startY!=null&&!jn(v,q.startX,q.startY)||q.endX!=null&&q.endY!=null&&!jn(v,q.endX,q.endY))continue;if(q.edgeType==="bezier"||q.edgeType==="multibezier"||q.edgeType==="self"||q.edgeType==="compound"||q.edgeType==="segments"||q.edgeType==="haystack"){for(var ie=W.rstyle.bezierPts||W.rstyle.linePts||W.rstyle.haystackPts,ne=!0,Y=0;Y<ie.length;Y++)if(!rh(v,ie[Y])){ne=!1;break}ne&&s.push(z)}else q.edgeType==="straight"&&s.push(z)}else if(j==="overlap"){var H=!1;if(q.startX!=null&&q.startY!=null&&q.endX!=null&&q.endY!=null&&(jn(v,q.startX,q.startY)||jn(v,q.endX,q.endY)))s.push(z),H=!0;else if(!H&&q.edgeType==="haystack"){for(var G=W.rstyle.haystackPts,K=0;K<G.length;K++)if(rh(v,G[K])){s.push(z),H=!0;break}}if(!H){var V=W.rstyle.bezierPts||W.rstyle.linePts||W.rstyle.haystackPts;if((!V||V.length<2)&&q.edgeType==="straight"&&q.startX!=null&&q.startY!=null&&q.endX!=null&&q.endY!=null&&(V=[{x:q.startX,y:q.startY},{x:q.endX,y:q.endY}]),!V||V.length<2)continue;for(var Q=0;Q<V.length-1;Q++){for(var oe=V[Q],he=V[Q+1],re=0;re<h.length;re++){var Z=Xt(h[re],2),ue=Z[0],ae=Z[1];if(b(oe,he,ue,ae)){s.push(z),H=!0;break}}if(H)break}}}}}return s};var Zs={};Zs.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,v,g,b,C;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],v=e.haystackPts[2],g=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,v=e.arrowEndX,g=e.arrowEndY),b=e.midX,C=e.midY,a)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||o||s||n){var h=e.allpts,m=rr(h[0],h[2],h[4],.1),w=rr(h[1],h[3],h[5],.1);u=c-m,l=f-w}else u=c-b,l=f-C;e.srcArrowAngle=is(u,l);var b=e.midX,C=e.midY;if(r&&(b=(c+v)/2,C=(f+g)/2),u=v-c,l=g-f,a){var h=e.allpts;if(h.length/2%2===0){var E=h.length/2,x=E-2;u=h[E]-h[x],l=h[E+1]-h[x+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var E=h.length/2-1,x=E-2;u=h[E]-h[x],l=h[E+1]-h[x+1]}}else if(i||o||s){var h=e.allpts,k=e.ctrlpts,A,p,I,M;if(k.length/2%2===0){var B=h.length/2-1,P=B+2,L=P+2;A=rr(h[B],h[P],h[L],0),p=rr(h[B+1],h[P+1],h[L+1],0),I=rr(h[B],h[P],h[L],1e-4),M=rr(h[B+1],h[P+1],h[L+1],1e-4)}else{var P=h.length/2-1,B=P-2,L=P+2;A=rr(h[B],h[P],h[L],.4999),p=rr(h[B+1],h[P+1],h[L+1],.4999),I=rr(h[B],h[P],h[L],.5),M=rr(h[B+1],h[P+1],h[L+1],.5)}u=I-A,l=M-p}if(e.midtgtArrowAngle=is(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,a){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var E=h.length/2-1,O=E+2;u=-(h[O]-h[E]),l=-(h[O+1]-h[E+1])}}}if(e.midsrcArrowAngle=is(u,l),a)u=v-e.segpts[e.segpts.length-2],l=g-e.segpts[e.segpts.length-1];else if(i||o||s||n){var h=e.allpts,N=h.length,m=rr(h[N-6],h[N-4],h[N-2],.9),w=rr(h[N-5],h[N-3],h[N-1],.9);u=v-m,l=g-w}else u=v-b,l=g-C;e.tgtArrowAngle=is(u,l)};Zs.getArrowWidth=Zs.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var af,of,vn={},Vr={},Fv,zv,Mi,Ls,An,xi,ki,dn,Qi,ds,ym,bm,sf,uf,qv,Vv=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},rE=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},nE=function(e,r,n,i,a){if(e!==qv?Vv(r,e,vn):rE(Vr,vn),Vv(r,n,Vr),Fv=vn.nx*Vr.ny-vn.ny*Vr.nx,zv=vn.nx*Vr.nx-vn.ny*-Vr.ny,An=Math.asin(Math.max(-1,Math.min(1,Fv))),Math.abs(An)<1e-6){af=r.x,of=r.y,ki=Qi=0;return}Mi=1,Ls=!1,zv<0?An<0?An=Math.PI+An:(An=Math.PI-An,Mi=-1,Ls=!0):An>0&&(Mi=-1,Ls=!0),r.radius!==void 0?Qi=r.radius:Qi=i,xi=An/2,ds=Math.min(vn.len/2,Vr.len/2),a?(dn=Math.abs(Math.cos(xi)*Qi/Math.sin(xi)),dn>ds?(dn=ds,ki=Math.abs(dn*Math.sin(xi)/Math.cos(xi))):ki=Qi):(dn=Math.min(ds,Qi),ki=Math.abs(dn*Math.sin(xi)/Math.cos(xi))),sf=r.x+Vr.nx*dn,uf=r.y+Vr.ny*dn,af=sf-Vr.ny*ki*Mi,of=uf+Vr.nx*ki*Mi,ym=r.x+vn.nx*dn,bm=r.y+vn.ny*dn,qv=r};function wm(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function jf(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(nE(t,e,r,n,i),{cx:af,cy:of,radius:ki,startX:ym,startY:bm,stopX:sf,stopY:uf,startAngle:vn.ang+Math.PI/2*Mi,endAngle:Vr.ang-Math.PI/2*Mi,counterClockwise:Ls})}var wo=.01,iE=Math.sqrt(2*wo),wr={};wr.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,l=function(k,A,p,I){var M=I-A,B=p-k,P=Math.sqrt(B*B+M*M);return{x:-M/P,y:B/P}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":a=r;break;case"intersection":a=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(t.source()[0],o),v=Xt(f,2),g=v[0],h=v[1],m=this.manualEndptToPx(t.target()[0],s),w=Xt(m,2),b=w[0],C=w[1],E={x1:g,y1:h,x2:b,y2:C};i=l(g,h,b,C),a=E}else Tt("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};wr.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),v=o.height(),g=s.height(),h=r.pstyle("haystack-radius").value,m=h/2;i.haystackPts=i.allpts=[i.source.x*c*m+u.x,i.source.y*v*m+u.y,i.target.x*f*m+l.x,i.target.y*g*m+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};wr.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),a=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=a.pfValue[a.pfValue.length-1],l=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],v=i.pfValue[c],g=1-f,h=f,m=this.findMidptPtsEtc(t,e),w=m.midptPts,b=m.vectorNormInverse,C={x:w.x1*g+w.x2*h,y:w.y1*g+w.y2*h};r.segpts.push(C.x+b.x*v,C.y+b.y*v),r.radii.push(a.pfValue[c]!==void 0?a.pfValue[c]:u),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:l)==="arc-radius")}};wr.findLoopPoints=function(t,e,r,n){var i=t._private.rscratch,a=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var v=r,g=f;n&&(v=0,g=u);var h=l-Math.PI/2,m=h-c/2,w=h+c/2,b=l+"_"+c;v=a[b]===void 0?a[b]=0:++a[b],i.ctrlpts=[o.x+Math.cos(m)*1.4*g*(v/3+1),o.y+Math.sin(m)*1.4*g*(v/3+1),o.x+Math.cos(w)*1.4*g*(v/3+1),o.y+Math.sin(w)*1.4*g*(v/3+1)]};wr.findCompoundLoopPoints=function(t,e,r,n){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),g=v?v.pfValue[0]:void 0,h=r,m=f;n&&(h=0,m=g);var w=50,b={x:a.x-s/2,y:a.y-u/2},C={x:o.x-l/2,y:o.y-c/2},E={x:Math.min(b.x,C.x),y:Math.min(b.y,C.y)},x=.5,k=Math.max(x,Math.log(s*wo)),A=Math.max(x,Math.log(l*wo));i.ctrlpts=[E.x,E.y-(1+Math.pow(w,1.12)/100)*m*(h/3+1)*k,E.x-(1+Math.pow(w,1.12)/100)*m*(h/3+1)*A,E.y]};wr.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};wr.findBezierPoints=function(t,e,r,n,i){var a=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],v=n;a.edgeType=v?"multibezier":"bezier",a.ctrlpts=[];for(var g=0;g<l;g++){var h=(.5-e.eles.length/2+r)*o*(i?-1:1),m=void 0,w=Bf(h);v&&(c=s?s.pfValue[g]:o,f=u.value[g]),n?m=c:m=c!==void 0?w*c:void 0;var b=m!==void 0?m:h,C=1-f,E=f,x=this.findMidptPtsEtc(t,e),k=x.midptPts,A=x.vectorNormInverse,p={x:k.x1*C+k.x2*E,y:k.y1*C+k.y2*E};a.ctrlpts.push(p.x+A.x*b,p.y+A.y*b)}};wr.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,v=e.srcH,g=e.tgtW,h=e.tgtH,m=t.pstyle("edge-distances").value,w=m!=="node-position",b=t.pstyle("taxi-direction").value,C=b,E=t.pstyle("taxi-turn"),x=E.units==="%",k=E.pfValue,A=k<0,p=t.pstyle("taxi-turn-min-distance").pfValue,I=w?(f+g)/2:0,M=w?(v+h)/2:0,B=c.x2-c.x1,P=c.y2-c.y1,L=function(F,$){return F>0?Math.max(F-$,0):Math.min(F+$,0)},O=L(B,I),N=L(P,M),z=!1;C===l?b=Math.abs(O)>Math.abs(N)?i:n:C===u||C===s?(b=n,z=!0):(C===a||C===o)&&(b=i,z=!0);var W=b===n,q=W?N:O,j=W?P:B,ie=Bf(j),ne=!1;!(z&&(x||A))&&(C===s&&j<0||C===u&&j>0||C===a&&j>0||C===o&&j<0)&&(ie*=-1,q=ie*Math.abs(q),ne=!0);var Y;if(x){var H=k<0?1+k:k;Y=H*q}else{var G=k<0?q:0;Y=G+k*ie}var K=function(F){return Math.abs(F)<p||Math.abs(F)>=Math.abs(q)},V=K(Y),Q=K(Math.abs(q)-Math.abs(Y)),oe=V||Q;if(oe&&!ne)if(W){var he=Math.abs(j)<=v/2,re=Math.abs(B)<=g/2;if(he){var Z=(c.x1+c.x2)/2,ue=c.y1,ae=c.y2;r.segpts=[Z,ue,Z,ae]}else if(re){var me=(c.y1+c.y2)/2,Ae=c.x1,Ve=c.x2;r.segpts=[Ae,me,Ve,me]}else r.segpts=[c.x1,c.y2]}else{var rt=Math.abs(j)<=f/2,Le=Math.abs(P)<=h/2;if(rt){var Ue=(c.y1+c.y2)/2,Ee=c.x1,ge=c.x2;r.segpts=[Ee,Ue,ge,Ue]}else if(Le){var xe=(c.x1+c.x2)/2,Te=c.y1,Me=c.y2;r.segpts=[xe,Te,xe,Me]}else r.segpts=[c.x2,c.y1]}else if(W){var ze=c.y1+Y+(w?v/2*ie:0),Se=c.x1,Ie=c.x2;r.segpts=[Se,ze,Ie,ze]}else{var ot=c.x1+Y+(w?f/2*ie:0),lt=c.y1,Qe=c.y2;r.segpts=[ot,lt,ot,Qe]}if(r.isRound){var Ye=t.pstyle("taxi-radius").value,Oe=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Ye),r.isArcRadius=new Array(r.segpts.length/2).fill(Oe)}};wr.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,v=e.tgtCornerRadius,g=e.srcRs,h=e.tgtRs,m=!Be(r.startX)||!Be(r.startY),w=!Be(r.arrowStartX)||!Be(r.arrowStartY),b=!Be(r.endX)||!Be(r.endY),C=!Be(r.arrowEndX)||!Be(r.arrowEndY),E=3,x=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,k=E*x,A=Oi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),p=A<k,I=Oi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),M=I<k,B=!1;if(m||w||p){B=!0;var P={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},L=Math.sqrt(P.x*P.x+P.y*P.y),O={x:P.x/L,y:P.y/L},N=Math.max(a,o),z={x:r.ctrlpts[0]+O.x*2*N,y:r.ctrlpts[1]+O.y*2*N},W=l.intersectLine(n.x,n.y,a,o,z.x,z.y,0,f,g);p?(r.ctrlpts[0]=r.ctrlpts[0]+O.x*(k-A),r.ctrlpts[1]=r.ctrlpts[1]+O.y*(k-A)):(r.ctrlpts[0]=W[0]+O.x*k,r.ctrlpts[1]=W[1]+O.y*k)}if(b||C||M){B=!0;var q={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},j=Math.sqrt(q.x*q.x+q.y*q.y),ie={x:q.x/j,y:q.y/j},ne=Math.max(a,o),Y={x:r.ctrlpts[0]+ie.x*2*ne,y:r.ctrlpts[1]+ie.y*2*ne},H=c.intersectLine(i.x,i.y,s,u,Y.x,Y.y,0,v,h);M?(r.ctrlpts[0]=r.ctrlpts[0]+ie.x*(k-I),r.ctrlpts[1]=r.ctrlpts[1]+ie.y*(k-I)):(r.ctrlpts[0]=H[0]+ie.x*k,r.ctrlpts[1]=H[1]+ie.y*k)}B&&this.findEndpoints(t)}};wr.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=rr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=rr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var a=2;a+3<e.allpts.length;a+=2){var o=e.radii[a/2-1],s=e.isArcRadius[a/2-1];e.roundCorners.push(jf({x:e.allpts[a-2],y:e.allpts[a-1]},{x:e.allpts[a],y:e.allpts[a+1],radius:o},{x:e.allpts[a+2],y:e.allpts[a+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},v=e.roundCorners[c/2];if(v.radius===0){var g={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-g.y,g.x-f.x]}else{var h=[f.x-v.cx,f.y-v.cy],m=v.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(w){return w*m}),e.midX=v.cx+h[0],e.midY=v.cy+h[1],e.midVector=h}}}}};wr.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||Be(e.startX)&&Be(e.startY)&&Be(e.endX)&&Be(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Tt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};wr.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,i=n.hasCompoundNodes(),a=new Mn,o=function(M,B){return[].concat(Vs(M),[B?1:0]).join("-")},s=[],u=[],l=0;l<t.length;l++){var c=t[l],f=c._private,v=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(v==="haystack"){u.push(c);continue}var g=v==="unbundled-bezier"||Gn(v,"segments")||v==="straight"||v==="straight-triangle"||Gn(v,"taxi"),h=v==="unbundled-bezier"||v==="bezier",m=f.source,w=f.target,b=m.poolIndex(),C=w.poolIndex(),E=[b,C].sort(),x=o(E,g),k=a.get(x);k==null&&(k={eles:[]},s.push({pairId:E,edgeIsUnbundled:g}),a.set(x,k)),k.eles.push(c),g&&(k.hasUnbundled=!0),h&&(k.hasBezier=!0)}}for(var A=function(){var M=s[p],B=M.pairId,P=M.edgeIsUnbundled,L=o(B,P),O=a.get(L),N;if(!O.hasUnbundled){var z=O.eles[0].parallelEdges().filter(function(Oe){return Oe.isBundledBezier()});Pf(O.eles),z.forEach(function(Oe){return O.eles.push(Oe)}),O.eles.sort(function(Oe,ve){return Oe.poolIndex()-ve.poolIndex()})}var W=O.eles[0],q=W.source(),j=W.target();if(q.poolIndex()>j.poolIndex()){var ie=q;q=j,j=ie}var ne=O.srcPos=q.position(),Y=O.tgtPos=j.position(),H=O.srcW=q.outerWidth(),G=O.srcH=q.outerHeight(),K=O.tgtW=j.outerWidth(),V=O.tgtH=j.outerHeight(),Q=O.srcShape=r.nodeShapes[e.getNodeShape(q)],oe=O.tgtShape=r.nodeShapes[e.getNodeShape(j)],he=O.srcCornerRadius=q.pstyle("corner-radius").value==="auto"?"auto":q.pstyle("corner-radius").pfValue,re=O.tgtCornerRadius=j.pstyle("corner-radius").value==="auto"?"auto":j.pstyle("corner-radius").pfValue,Z=O.tgtRs=j._private.rscratch,ue=O.srcRs=q._private.rscratch;O.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var ae=0;ae<O.eles.length;ae++){var me=O.eles[ae],Ae=me[0]._private.rscratch,Ve=me.pstyle("curve-style").value,rt=Ve==="unbundled-bezier"||Gn(Ve,"segments")||Gn(Ve,"taxi"),Le=!q.same(me.source());if(!O.calculatedIntersection&&q!==j&&(O.hasBezier||O.hasUnbundled)){O.calculatedIntersection=!0;var Ue=Q.intersectLine(ne.x,ne.y,H,G,Y.x,Y.y,0,he,ue),Ee=O.srcIntn=Ue,ge=oe.intersectLine(Y.x,Y.y,K,V,ne.x,ne.y,0,re,Z),xe=O.tgtIntn=ge,Te=O.intersectionPts={x1:Ue[0],x2:ge[0],y1:Ue[1],y2:ge[1]},Me=O.posPts={x1:ne.x,x2:Y.x,y1:ne.y,y2:Y.y},ze=ge[1]-Ue[1],Se=ge[0]-Ue[0],Ie=Math.sqrt(Se*Se+ze*ze);Be(Ie)&&Ie>=iE||(Ie=Math.sqrt(Math.max(Se*Se,wo)+Math.max(ze*ze,wo)));var ot=O.vector={x:Se,y:ze},lt=O.vectorNorm={x:ot.x/Ie,y:ot.y/Ie},Qe={x:-lt.y,y:lt.x};O.nodesOverlap=!Be(Ie)||oe.checkPoint(Ue[0],Ue[1],0,K,V,Y.x,Y.y,re,Z)||Q.checkPoint(ge[0],ge[1],0,H,G,ne.x,ne.y,he,ue),O.vectorNormInverse=Qe,N={nodesOverlap:O.nodesOverlap,dirCounts:O.dirCounts,calculatedIntersection:!0,hasBezier:O.hasBezier,hasUnbundled:O.hasUnbundled,eles:O.eles,srcPos:Y,srcRs:Z,tgtPos:ne,tgtRs:ue,srcW:K,srcH:V,tgtW:H,tgtH:G,srcIntn:xe,tgtIntn:Ee,srcShape:oe,tgtShape:Q,posPts:{x1:Me.x2,y1:Me.y2,x2:Me.x1,y2:Me.y1},intersectionPts:{x1:Te.x2,y1:Te.y2,x2:Te.x1,y2:Te.y1},vector:{x:-ot.x,y:-ot.y},vectorNorm:{x:-lt.x,y:-lt.y},vectorNormInverse:{x:-Qe.x,y:-Qe.y}}}var Ye=Le?N:O;Ae.nodesOverlap=Ye.nodesOverlap,Ae.srcIntn=Ye.srcIntn,Ae.tgtIntn=Ye.tgtIntn,Ae.isRound=Ve.startsWith("round"),i&&(q.isParent()||q.isChild()||j.isParent()||j.isChild())&&(q.parents().anySame(j)||j.parents().anySame(q)||q.same(j)&&q.isParent())?e.findCompoundLoopPoints(me,Ye,ae,rt):q===j?e.findLoopPoints(me,Ye,ae,rt):Ve.endsWith("segments")?e.findSegmentsPoints(me,Ye):Ve.endsWith("taxi")?e.findTaxiPoints(me,Ye):Ve==="straight"||!rt&&O.eles.length%2===1&&ae===Math.floor(O.eles.length/2)?e.findStraightEdgePoints(me):e.findBezierPoints(me,Ye,ae,rt,Le),e.findEndpoints(me),e.tryToCorrectInvalidPoints(me,Ye),e.checkForInvalidEdgeWarning(me),e.storeAllpts(me),e.storeEdgeProjections(me),e.calculateArrowAngles(me),e.recalculateEdgeLabelProjections(me),e.calculateLabelAngles(me)}},p=0;p<s.length;p++)A();this.findHaystackPoints(u)}};function xm(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];e.push({x:n,y:i})}return e}}wr.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return xm(e.segpts)};wr.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return xm(e.ctrlpts)};wr.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Oo={};Oo.manualEndptToPx=function(t,e){var r=this,n=t.position(),i=t.outerWidth(),a=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,a),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,i,a,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};Oo.findEndpoints=function(t){var e,r,n,i,a=this,o,s=t.source()[0],u=t.target()[0],l=s.position(),c=u.position(),f=t.pstyle("target-arrow-shape").value,v=t.pstyle("source-arrow-shape").value,g=t.pstyle("target-distance-from-node").pfValue,h=t.pstyle("source-distance-from-node").pfValue,m=s._private.rscratch,w=u._private.rscratch,b=t.pstyle("curve-style").value,C=t._private.rscratch,E=C.edgeType,x=Gn(b,"taxi"),k=E==="self"||E==="compound",A=E==="bezier"||E==="multibezier"||k,p=E!=="bezier",I=E==="straight"||E==="segments",M=E==="segments",B=A||p||I,P=k||x,L=t.pstyle("source-endpoint"),O=P?"outside-to-node":L.value,N=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue,z=t.pstyle("target-endpoint"),W=P?"outside-to-node":z.value,q=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;C.srcManEndpt=L,C.tgtManEndpt=z;var j,ie,ne,Y,H=(e=(z==null||(r=z.pfValue)===null||r===void 0?void 0:r.length)===2?z.pfValue:null)!==null&&e!==void 0?e:[0,0],G=(n=(L==null||(i=L.pfValue)===null||i===void 0?void 0:i.length)===2?L.pfValue:null)!==null&&n!==void 0?n:[0,0];if(A){var K=[C.ctrlpts[0],C.ctrlpts[1]],V=p?[C.ctrlpts[C.ctrlpts.length-2],C.ctrlpts[C.ctrlpts.length-1]]:K;j=V,ie=K}else if(I){var Q=M?C.segpts.slice(0,2):[c.x+H[0],c.y+H[1]],oe=M?C.segpts.slice(C.segpts.length-2):[l.x+G[0],l.y+G[1]];j=oe,ie=Q}if(W==="inside-to-node")o=[c.x,c.y];else if(z.units)o=this.manualEndptToPx(u,z);else if(W==="outside-to-line")o=C.tgtIntn;else if(W==="outside-to-node"||W==="outside-to-node-or-label"?ne=j:(W==="outside-to-line"||W==="outside-to-line-or-label")&&(ne=[l.x,l.y]),o=a.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),ne[0],ne[1],0,q,w),W==="outside-to-node-or-label"||W==="outside-to-line-or-label"){var he=u._private.rscratch,re=he.labelWidth,Z=he.labelHeight,ue=he.labelX,ae=he.labelY,me=re/2,Ae=Z/2,Ve=u.pstyle("text-valign").value;Ve==="top"?ae-=Ae:Ve==="bottom"&&(ae+=Ae);var rt=u.pstyle("text-halign").value;rt==="left"?ue-=me:rt==="right"&&(ue+=me);var Le=po(ne[0],ne[1],[ue-me,ae-Ae,ue+me,ae-Ae,ue+me,ae+Ae,ue-me,ae+Ae],c.x,c.y);if(Le.length>0){var Ue=l,Ee=Ti(Ue,aa(o)),ge=Ti(Ue,aa(Le)),xe=Ee;if(ge<Ee&&(o=Le,xe=ge),Le.length>2){var Te=Ti(Ue,{x:Le[2],y:Le[3]});Te<xe&&(o=[Le[2],Le[3]])}}}var Me=as(o,j,a.arrowShapes[f].spacing(t)+g),ze=as(o,j,a.arrowShapes[f].gap(t)+g);if(C.endX=ze[0],C.endY=ze[1],C.arrowEndX=Me[0],C.arrowEndY=Me[1],O==="inside-to-node")o=[l.x,l.y];else if(L.units)o=this.manualEndptToPx(s,L);else if(O==="outside-to-line")o=C.srcIntn;else if(O==="outside-to-node"||O==="outside-to-node-or-label"?Y=ie:(O==="outside-to-line"||O==="outside-to-line-or-label")&&(Y=[c.x,c.y]),o=a.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),Y[0],Y[1],0,N,m),O==="outside-to-node-or-label"||O==="outside-to-line-or-label"){var Se=s._private.rscratch,Ie=Se.labelWidth,ot=Se.labelHeight,lt=Se.labelX,Qe=Se.labelY,Ye=Ie/2,Oe=ot/2,ve=s.pstyle("text-valign").value;ve==="top"?Qe-=Oe:ve==="bottom"&&(Qe+=Oe);var F=s.pstyle("text-halign").value;F==="left"?lt-=Ye:F==="right"&&(lt+=Ye);var $=po(Y[0],Y[1],[lt-Ye,Qe-Oe,lt+Ye,Qe-Oe,lt+Ye,Qe+Oe,lt-Ye,Qe+Oe],l.x,l.y);if($.length>0){var ee=c,le=Ti(ee,aa(o)),ce=Ti(ee,aa($)),ke=le;if(ce<le&&(o=[$[0],$[1]],ke=ce),$.length>2){var be=Ti(ee,{x:$[2],y:$[3]});be<ke&&(o=[$[2],$[3]])}}}var qe=as(o,ie,a.arrowShapes[v].spacing(t)+h),Re=as(o,ie,a.arrowShapes[v].gap(t)+h);C.startX=Re[0],C.startY=Re[1],C.arrowStartX=qe[0],C.arrowStartY=qe[1],B&&(!Be(C.startX)||!Be(C.startY)||!Be(C.endX)||!Be(C.endY)?C.badLine=!0:C.badLine=!1)};Oo.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Oo.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Kf={};function aE(t,e,r){for(var n=function(l,c,f,v){return rr(l,c,f,v)},i=e._private,a=i.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];a.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}Kf.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)aE(this,t,r.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Kf.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Cn={};Cn.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!ei(e)){var r,n,i=t._private,a=t.width(),o=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=i.rscratch,v=i.rstyle;switch(l){case"left":r=u.x-a/2-s;break;case"right":r=u.x+a/2+s;break;default:r=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}f.labelX=r,f.labelY=n,v.labelX=r,v.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Cm=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},Em=function(e,r){var n=r.x-e.x,i=r.y-e.y;return Cm(n,i)},oE=function(e,r,n,i){var a=vo(0,i-.001,1),o=vo(0,i+.001,1),s=la(e,r,n,a),u=la(e,r,n,o);return Em(s,u)};Cn.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var o=function(f,v,g){Dn(r.rscratch,f,v,g),Dn(r.rstyle,f,v,g)};o("labelX",null,e.x),o("labelY",null,e.y);var s=Cm(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],v=0;v+5<n.allpts.length;v+=4){var g={x:n.allpts[v],y:n.allpts[v+1]},h={x:n.allpts[v+2],y:n.allpts[v+3]},m={x:n.allpts[v+4],y:n.allpts[v+5]};f.push({p0:g,p1:h,p2:m,startDist:0,length:0,segments:[]})}var w=r.rstyle.bezierPts,b=i.bezierProjPcts.length;function C(p,I,M,B,P){var L=Oi(I,M),O=p.segments[p.segments.length-1],N={p0:I,p1:M,t0:B,t1:P,startDist:O?O.startDist+O.length:0,length:L};p.segments.push(N),p.length+=L}for(var E=0;E<f.length;E++){var x=f[E],k=f[E-1];k&&(x.startDist=k.startDist+k.length),C(x,x.p0,w[E*b],0,i.bezierProjPcts[0]);for(var A=0;A<b-1;A++)C(x,w[E*b+A],w[E*b+A+1],i.bezierProjPcts[A],i.bezierProjPcts[A+1]);C(x,w[E*b+b-1],x.p2,i.bezierProjPcts[b-1],1)}return u.cache=f},l=function(f){var v,g=f==="source";if(a[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=u(),w,b=0,C=0,E=0;E<m.length;E++){for(var x=m[g?E:m.length-1-E],k=0;k<x.segments.length;k++){var A=x.segments[g?k:x.segments.length-1-k],p=E===m.length-1&&k===x.segments.length-1;if(b=C,C+=A.length,C>=h||p){w={cp:x,segment:A};break}}if(w)break}var I=w.cp,M=w.segment,B=(h-b)/M.length,P=M.t1-M.t0,L=g?M.t0+P*B:M.t1-P*B;L=vo(0,L,1),e=la(I.p0,I.p1,I.p2,L),v=oE(I.p0,I.p1,I.p2,L);break}case"straight":case"segments":case"haystack":{for(var O=0,N,z,W,q,j=n.allpts.length,ie=0;ie+3<j&&(g?(W={x:n.allpts[ie],y:n.allpts[ie+1]},q={x:n.allpts[ie+2],y:n.allpts[ie+3]}):(W={x:n.allpts[j-2-ie],y:n.allpts[j-1-ie]},q={x:n.allpts[j-4-ie],y:n.allpts[j-3-ie]}),N=Oi(W,q),z=O,O+=N,!(O>=h));ie+=2);var ne=h-z,Y=ne/N;Y=vo(0,Y,1),e=_w(W,q,Y),v=Em(W,q);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,v)}};l("source"),l("target"),this.applyLabelDimensions(t)}};Cn.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Cn.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),i=Bi(n,t._private.labelDimsKey);if(Ar(r.rscratch,"prefixedLabelDimsKey",e)!==i){Dn(r.rscratch,"prefixedLabelDimsKey",e,i);var a=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,u=Ar(r.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=a.height/l,f=c*o,v=a.width,g=a.height+(l-1)*(o-1)*c;Dn(r.rstyle,"labelWidth",e,v),Dn(r.rscratch,"labelWidth",e,v),Dn(r.rstyle,"labelHeight",e,g),Dn(r.rscratch,"labelHeight",e,g),Dn(r.rscratch,"labelLineHeight",e,f)}};Cn.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",i=t.pstyle(n+"label").strValue,a=t.pstyle("text-transform").value,o=function(G,K){return K?(Dn(r.rscratch,G,e,K),K):Ar(r.rscratch,G,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="â",c=i.split(`
`),f=t.pstyle("text-max-width").pfValue,v=t.pstyle("text-overflow-wrap").value,g=v==="anywhere",h=[],m=/[\s\u200b]+|$/g,w=0;w<c.length;w++){var b=c[w],C=this.calculateLabelDimensions(t,b),E=C.width;if(g){var x=b.split("").join(l);b=x}if(E>f){var k=b.matchAll(m),A="",p=0,I=Dr(k),M;try{for(I.s();!(M=I.n()).done;){var B=M.value,P=B[0],L=b.substring(p,B.index);p=B.index+P.length;var O=A.length===0?L:A+L+P,N=this.calculateLabelDimensions(t,O),z=N.width;z<=f?A+=L+P:(A&&h.push(A),A=L+P)}}catch(H){I.e(H)}finally{I.f()}A.match(/^[\s\u200b]+$/)||h.push(A)}else h.push(b)}o("labelWrapCachedLines",h),i=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var W=t.pstyle("text-max-width").pfValue,q="",j="â¦",ie=!1;if(this.calculateLabelDimensions(t,i).width<W)return i;for(var ne=0;ne<i.length;ne++){var Y=this.calculateLabelDimensions(t,q+i[ne]+j).width;if(Y>W)break;q+=i[ne],ne===i.length-1&&(ie=!0)}return ie||(q+=j),q}return i};Cn.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Cn.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),i=n.document,a=0,o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var v=c.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}f.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(u);for(var g=0,h=0,m=e.split(`
`),w=0;w<m.length;w++){var b=m[w],C=f.measureText(b),E=Math.ceil(C.width),x=s;g=Math.max(E,g),h+=x}return g+=a,h+=a,{width:g,height:h}};Cn.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,i=t.isEdge(),a=e?e+"-":"",o=t.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Cn.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(t),r&&(i.sourceLabelAngle=e.calculateLabelAngle(t,"source"),i.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Sm={},Hv=28,$v=!1;Sm.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Hv||t.height()<Hv))return $v||(Tt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),$v=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var _u={};_u.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var i=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var v=s[f];v(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)};_u.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};_u.recalculateRenderedStyle=function(t,e){var r=function(x){return x._private.rstyle.cleanConnected};if(t.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<t.length;a++){var o=t[a],s=o._private,u=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(E){return!E._private.rstyle.clean&&E.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):n.push(o),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,v=f.rstyle,g=c.position();this.recalculateNodeLabelProjection(c),v.nodeX=g.x,v.nodeY=g.y,v.nodeW=c.pstyle("width").pfValue,v.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var m=n[h],w=m._private,b=w.rstyle,C=w.rscratch;b.srcX=C.arrowStartX,b.srcY=C.arrowStartY,b.tgtX=C.arrowEndX,b.tgtY=C.arrowEndY,b.midX=C.midX,b.midY=C.midY,b.labelAngle=C.labelAngle,b.sourceLabelAngle=C.sourceLabelAngle,b.targetLabelAngle=C.targetLabelAngle}}}};var Du={};Du.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Du.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Du.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(am),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Tm={};[Vi,Zs,wr,Oo,Kf,Cn,Sm,_u,Du].forEach(function(t){tt(Tm,t)});var km={};km.getCachedImage=function(t,e,r){var n=this,i=n.imageCache=n.imageCache||{},a=i[t];if(a)return a.image.complete||a.image.addEventListener("load",r),a.image;a=i[t]=i[t]||{};var o=a.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var Aa={};Aa.registerBinding=function(t,e,r,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var a=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var u=this.binder(s);a.push(u.on.apply(u,i))}}return a}var u=this.binder(t);return u.on.apply(u,i)};Aa.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||yb(t);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var o=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Aa.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Aa.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Aa.load=function(){var t=this,e=t.cy.window(),r=function(F){return F.selected()},n=function(F){var $=F.getRootNode();if($&&$.nodeType===11&&$.host!==void 0)return $},i=function(F,$,ee,le){F==null&&(F=t.cy);for(var ce=0;ce<$.length;ce++){var ke=$[ce];F.emit({originalEvent:ee,type:ke,position:le})}},a=function(F){return F.shiftKey||F.metaKey||F.ctrlKey},o=function(F,$){var ee=!0;if(t.cy.hasCompoundNodes()&&F&&F.pannable())for(var le=0;$&&le<$.length;le++){var F=$[le];if(F.isNode()&&F.isParent()&&!F.pannable()){ee=!1;break}}else ee=!0;return ee},s=function(F){F[0]._private.grabbed=!0},u=function(F){F[0]._private.grabbed=!1},l=function(F){F[0]._private.rscratch.inDragLayer=!0},c=function(F){F[0]._private.rscratch.inDragLayer=!1},f=function(F){F[0]._private.rscratch.isGrabTarget=!0},v=function(F){F[0]._private.rscratch.isGrabTarget=!1},g=function(F,$){var ee=$.addToList,le=ee.has(F);!le&&F.grabbable()&&!F.locked()&&(ee.merge(F),s(F))},h=function(F,$){if(F.cy().hasCompoundNodes()&&!($.inDragLayer==null&&$.addToList==null)){var ee=F.descendants();$.inDragLayer&&(ee.forEach(l),ee.connectedEdges().forEach(l)),$.addToList&&g(ee,$)}},m=function(F,$){$=$||{};var ee=F.cy().hasCompoundNodes();$.inDragLayer&&(F.forEach(l),F.neighborhood().stdFilter(function(le){return!ee||le.isEdge()}).forEach(l)),$.addToList&&F.forEach(function(le){g(le,$)}),h(F,$),C(F,{inDragLayer:$.inDragLayer}),t.updateCachedGrabbedEles()},w=m,b=function(F){F&&(t.getCachedZSortedEles().forEach(function($){u($),c($),v($)}),t.updateCachedGrabbedEles())},C=function(F,$){if(!($.inDragLayer==null&&$.addToList==null)&&F.cy().hasCompoundNodes()){var ee=F.ancestors().orphans();if(!ee.same(F)){var le=ee.descendants().spawnSelf().merge(ee).unmerge(F).unmerge(F.descendants()),ce=le.connectedEdges();$.inDragLayer&&(ce.forEach(l),le.forEach(l)),$.addToList&&le.forEach(function(ke){g(ke,$)})}}},E=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},x=typeof MutationObserver<"u",k=typeof ResizeObserver<"u";x?(t.removeObserver=new MutationObserver(function(ve){for(var F=0;F<ve.length;F++){var $=ve[F],ee=$.removedNodes;if(ee)for(var le=0;le<ee.length;le++){var ce=ee[le];if(ce===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ve){t.destroy()});var A=Io(function(){t.cy.resize()},100);x&&(t.styleObserver=new MutationObserver(A),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",A),k&&(t.resizeObserver=new ResizeObserver(A),t.resizeObserver.observe(t.container));var p=function(F,$){for(;F!=null;)$(F),F=F.parentNode},I=function(){t.invalidateContainerClientCoordsCache()};p(t.container,function(ve){t.registerBinding(ve,"transitionend",I),t.registerBinding(ve,"animationend",I),t.registerBinding(ve,"scroll",I)}),t.registerBinding(t.container,"contextmenu",function(ve){ve.preventDefault()});var M=function(){return t.selection[4]!==0},B=function(F){for(var $=t.findContainerClientCoords(),ee=$[0],le=$[1],ce=$[2],ke=$[3],be=F.touches?F.touches:[F],qe=!1,Re=0;Re<be.length;Re++){var je=be[Re];if(ee<=je.clientX&&je.clientX<=ee+ce&&le<=je.clientY&&je.clientY<=le+ke){qe=!0;break}}if(!qe)return!1;for(var nt=t.container,st=F.target,Ne=st.parentNode,Xe=!1;Ne;){if(Ne===nt){Xe=!0;break}Ne=Ne.parentNode}return!!Xe};t.registerBinding(t.container,"mousedown",function(F){if(B(F)&&!(t.hoverData.which===1&&F.which!==1)){F.preventDefault(),E(),t.hoverData.capture=!0,t.hoverData.which=F.which;var $=t.cy,ee=[F.clientX,F.clientY],le=t.projectIntoViewport(ee[0],ee[1]),ce=t.selection,ke=t.findNearestElements(le[0],le[1],!0,!1),be=ke[0],qe=t.dragData.possibleDragElements;t.hoverData.mdownPos=le,t.hoverData.mdownGPos=ee;var Re=function(ft){return{originalEvent:F,type:ft,position:{x:le[0],y:le[1]}}},je=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var ft=t.hoverData.down;ft?ft.emit(Re("taphold")):$.emit(Re("taphold"))}},t.tapholdDuration)};if(F.which==3){t.hoverData.cxtStarted=!0;var nt={originalEvent:F,type:"cxttapstart",position:{x:le[0],y:le[1]}};be?(be.activate(),be.emit(nt),t.hoverData.down=be):$.emit(nt),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(F.which==1){be&&be.activate();{if(be!=null&&t.nodeIsGrabbable(be)){var st=function(ft){ft.emit(Re("grab"))};if(f(be),!be.selected())qe=t.dragData.possibleDragElements=$.collection(),w(be,{addToList:qe}),be.emit(Re("grabon")).emit(Re("grab"));else{qe=t.dragData.possibleDragElements=$.collection();var Ne=$.$(function(Xe){return Xe.isNode()&&Xe.selected()&&t.nodeIsGrabbable(Xe)});m(Ne,{addToList:qe}),be.emit(Re("grabon")),Ne.forEach(st)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=be,t.hoverData.downs=ke,t.hoverData.downTime=new Date().getTime()}i(be,["mousedown","tapstart","vmousedown"],F,{x:le[0],y:le[1]}),be==null?(ce[4]=1,t.data.bgActivePosistion={x:le[0],y:le[1]},t.redrawHint("select",!0),t.redraw()):be.pannable()&&(ce[4]=1),je()}ce[0]=ce[2]=le[0],ce[1]=ce[3]=le[1]}},!1);var P=n(t.container);t.registerBinding([e,P],"mousemove",function(F){var $=t.hoverData.capture;if(!(!$&&!B(F))){var ee=!1,le=t.cy,ce=le.zoom(),ke=[F.clientX,F.clientY],be=t.projectIntoViewport(ke[0],ke[1]),qe=t.hoverData.mdownPos,Re=t.hoverData.mdownGPos,je=t.selection,nt=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(nt=t.findNearestElement(be[0],be[1],!0,!1));var st=t.hoverData.last,Ne=t.hoverData.down,Xe=[be[0]-je[2],be[1]-je[3]],ft=t.dragData.possibleDragElements,Bt;if(Re){var Et=ke[0]-Re[0],tr=Et*Et,Dt=ke[1]-Re[1],Ot=Dt*Dt,zt=tr+Ot;t.hoverData.isOverThresholdDrag=Bt=zt>=t.desktopTapThreshold2}var $t=a(F);Bt&&(t.hoverData.tapholdCancelled=!0);var an=function(){var vr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];vr.length===0?(vr.push(Xe[0]),vr.push(Xe[1])):(vr[0]+=Xe[0],vr[1]+=Xe[1])};ee=!0,i(nt,["mousemove","vmousemove","tapdrag"],F,{x:be[0],y:be[1]});var Wt=function(vr){return{originalEvent:F,type:vr,position:{x:be[0],y:be[1]}}},Kr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||le.emit(Wt("boxstart")),je[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Bt){var Nr=Wt("cxtdrag");Ne?Ne.emit(Nr):le.emit(Nr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||nt!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit(Wt("cxtdragout")),t.hoverData.cxtOver=nt,nt&&nt.emit(Wt("cxtdragover")))}}else if(t.hoverData.dragging){if(ee=!0,le.panningEnabled()&&le.userPanningEnabled()){var zn;if(t.hoverData.justStartedPan){var $i=t.hoverData.mdownPos;zn={x:(be[0]-$i[0])*ce,y:(be[1]-$i[1])*ce},t.hoverData.justStartedPan=!1}else zn={x:Xe[0]*ce,y:Xe[1]*ce};le.panBy(zn),le.emit(Wt("dragpan")),t.hoverData.dragged=!0}be=t.projectIntoViewport(F.clientX,F.clientY)}else if(je[4]==1&&(Ne==null||Ne.pannable())){if(Bt){if(!t.hoverData.dragging&&le.boxSelectionEnabled()&&($t||!le.panningEnabled()||!le.userPanningEnabled()))Kr();else if(!t.hoverData.selecting&&le.panningEnabled()&&le.userPanningEnabled()){var on=o(Ne,t.hoverData.downs);on&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,je[4]=0,t.data.bgActivePosistion=aa(qe),t.redrawHint("select",!0),t.redraw())}Ne&&Ne.pannable()&&Ne.active()&&Ne.unactivate()}}else{if(Ne&&Ne.pannable()&&Ne.active()&&Ne.unactivate(),(!Ne||!Ne.grabbed())&&nt!=st&&(st&&i(st,["mouseout","tapdragout"],F,{x:be[0],y:be[1]}),nt&&i(nt,["mouseover","tapdragover"],F,{x:be[0],y:be[1]}),t.hoverData.last=nt),Ne)if(Bt){if(le.boxSelectionEnabled()&&$t)Ne&&Ne.grabbed()&&(b(ft),Ne.emit(Wt("freeon")),ft.emit(Wt("free")),t.dragData.didDrag&&(Ne.emit(Wt("dragfreeon")),ft.emit(Wt("dragfree")))),Kr();else if(Ne&&Ne.grabbed()&&t.nodeIsDraggable(Ne)){var hr=!t.dragData.didDrag;hr&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||m(ft,{inDragLayer:!0});var qt={x:0,y:0};if(Be(Xe[0])&&Be(Xe[1])&&(qt.x+=Xe[0],qt.y+=Xe[1],hr)){var ar=t.hoverData.dragDelta;ar&&Be(ar[0])&&Be(ar[1])&&(qt.x+=ar[0],qt.y+=ar[1])}t.hoverData.draggingEles=!0,ft.silentShift(qt).emit(Wt("position")).emit(Wt("drag")),t.redrawHint("drag",!0),t.redraw()}}else an();ee=!0}if(je[2]=be[0],je[3]=be[1],ee)return F.stopPropagation&&F.stopPropagation(),F.preventDefault&&F.preventDefault(),!1}},!1);var L,O,N;t.registerBinding(e,"mouseup",function(F){if(!(t.hoverData.which===1&&F.which!==1&&t.hoverData.capture)){var $=t.hoverData.capture;if($){t.hoverData.capture=!1;var ee=t.cy,le=t.projectIntoViewport(F.clientX,F.clientY),ce=t.selection,ke=t.findNearestElement(le[0],le[1],!0,!1),be=t.dragData.possibleDragElements,qe=t.hoverData.down,Re=a(F);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,qe&&qe.unactivate();var je=function(Et){return{originalEvent:F,type:Et,position:{x:le[0],y:le[1]}}};if(t.hoverData.which===3){var nt=je("cxttapend");if(qe?qe.emit(nt):ee.emit(nt),!t.hoverData.cxtDragged){var st=je("cxttap");qe?qe.emit(st):ee.emit(st)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(i(ke,["mouseup","tapend","vmouseup"],F,{x:le[0],y:le[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(i(qe,["click","tap","vclick"],F,{x:le[0],y:le[1]}),O=!1,F.timeStamp-N<=ee.multiClickDebounceTime()?(L&&clearTimeout(L),O=!0,N=null,i(qe,["dblclick","dbltap","vdblclick"],F,{x:le[0],y:le[1]})):(L=setTimeout(function(){O||i(qe,["oneclick","onetap","voneclick"],F,{x:le[0],y:le[1]})},ee.multiClickDebounceTime()),N=F.timeStamp)),qe==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!a(F)&&(ee.$(r).unselect(["tapunselect"]),be.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=be=ee.collection()),ke==qe&&!t.dragData.didDrag&&!t.hoverData.selecting&&ke!=null&&ke._private.selectable&&(t.hoverData.dragging||(ee.selectionType()==="additive"||Re?ke.selected()?ke.unselect(["tapunselect"]):ke.select(["tapselect"]):Re||(ee.$(r).unmerge(ke).unselect(["tapunselect"]),ke.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ne=ee.collection(t.getAllInBox(ce[0],ce[1],ce[2],ce[3]));t.redrawHint("select",!0),Ne.length>0&&t.redrawHint("eles",!0),ee.emit(je("boxend"));var Xe=function(Et){return Et.selectable()&&!Et.selected()};ee.selectionType()==="additive"||Re||ee.$(r).unmerge(Ne).unselect(),Ne.emit(je("box")).stdFilter(Xe).select().emit(je("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ce[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var ft=qe&&qe.grabbed();b(be),ft&&(qe.emit(je("freeon")),be.emit(je("free")),t.dragData.didDrag&&(qe.emit(je("dragfreeon")),be.emit(je("dragfree"))))}}ce[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var z=[],W=4,q,j=1e5,ie=function(F,$){for(var ee=0;ee<F.length;ee++)if(F[ee]%$!==0)return!1;return!0},ne=function(F){for(var $=Math.abs(F[0]),ee=1;ee<F.length;ee++)if(Math.abs(F[ee])!==$)return!1;return!0},Y=function(F){var $=!1,ee=F.deltaY;if(ee==null&&(F.wheelDeltaY!=null?ee=F.wheelDeltaY/4:F.wheelDelta!=null&&(ee=F.wheelDelta/4)),ee!==0){if(q==null)if(z.length>=W){var le=z;if(q=ie(le,5),!q){var ce=Math.abs(le[0]);q=ne(le)&&ce>5}if(q)for(var ke=0;ke<le.length;ke++)j=Math.min(Math.abs(le[ke]),j)}else z.push(ee),$=!0;else q&&(j=Math.min(Math.abs(ee),j));if(!t.scrollingPage){var be=t.cy,qe=be.zoom(),Re=be.pan(),je=t.projectIntoViewport(F.clientX,F.clientY),nt=[je[0]*qe+Re.x,je[1]*qe+Re.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||M()){F.preventDefault();return}if(be.panningEnabled()&&be.userPanningEnabled()&&be.zoomingEnabled()&&be.userZoomingEnabled()){F.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var st;$&&Math.abs(ee)>5&&(ee=Bf(ee)*5),st=ee/-250,q&&(st/=j,st*=3),st=st*t.wheelSensitivity;var Ne=F.deltaMode===1;Ne&&(st*=33);var Xe=be.zoom()*Math.pow(10,st);F.type==="gesturechange"&&(Xe=t.gestureStartZoom*F.scale),be.zoom({level:Xe,renderedPosition:{x:nt[0],y:nt[1]}}),be.emit({type:F.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:F,position:{x:je[0],y:je[1]}})}}}};t.registerBinding(t.container,"wheel",Y,!0),t.registerBinding(e,"scroll",function(F){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(F){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||F.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ve){t.hasTouchStarted||Y(ve)},!0),t.registerBinding(t.container,"mouseout",function(F){var $=t.projectIntoViewport(F.clientX,F.clientY);t.cy.emit({originalEvent:F,type:"mouseout",position:{x:$[0],y:$[1]}})},!1),t.registerBinding(t.container,"mouseover",function(F){var $=t.projectIntoViewport(F.clientX,F.clientY);t.cy.emit({originalEvent:F,type:"mouseover",position:{x:$[0],y:$[1]}})},!1);var H,G,K,V,Q,oe,he,re,Z,ue,ae,me,Ae,Ve=function(F,$,ee,le){return Math.sqrt((ee-F)*(ee-F)+(le-$)*(le-$))},rt=function(F,$,ee,le){return(ee-F)*(ee-F)+(le-$)*(le-$)},Le;t.registerBinding(t.container,"touchstart",Le=function(F){if(t.hasTouchStarted=!0,!!B(F)){E(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var $=t.cy,ee=t.touchData.now,le=t.touchData.earlier;if(F.touches[0]){var ce=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ee[0]=ce[0],ee[1]=ce[1]}if(F.touches[1]){var ce=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);ee[2]=ce[0],ee[3]=ce[1]}if(F.touches[2]){var ce=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);ee[4]=ce[0],ee[5]=ce[1]}var ke=function($t){return{originalEvent:F,type:$t,position:{x:ee[0],y:ee[1]}}};if(F.touches[1]){t.touchData.singleTouchMoved=!0,b(t.dragData.touchDragEles);var be=t.findContainerClientCoords();Z=be[0],ue=be[1],ae=be[2],me=be[3],H=F.touches[0].clientX-Z,G=F.touches[0].clientY-ue,K=F.touches[1].clientX-Z,V=F.touches[1].clientY-ue,Ae=0<=H&&H<=ae&&0<=K&&K<=ae&&0<=G&&G<=me&&0<=V&&V<=me;var qe=$.pan(),Re=$.zoom();Q=Ve(H,G,K,V),oe=rt(H,G,K,V),he=[(H+K)/2,(G+V)/2],re=[(he[0]-qe.x)/Re,(he[1]-qe.y)/Re];var je=200,nt=je*je;if(oe<nt&&!F.touches[2]){var st=t.findNearestElement(ee[0],ee[1],!0,!0),Ne=t.findNearestElement(ee[2],ee[3],!0,!0);st&&st.isNode()?(st.activate().emit(ke("cxttapstart")),t.touchData.start=st):Ne&&Ne.isNode()?(Ne.activate().emit(ke("cxttapstart")),t.touchData.start=Ne):$.emit(ke("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(F.touches[2])$.boxSelectionEnabled()&&F.preventDefault();else if(!F.touches[1]){if(F.touches[0]){var Xe=t.findNearestElements(ee[0],ee[1],!0,!0),ft=Xe[0];if(ft!=null&&(ft.activate(),t.touchData.start=ft,t.touchData.starts=Xe,t.nodeIsGrabbable(ft))){var Bt=t.dragData.touchDragEles=$.collection(),Et=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),ft.selected()?(Et=$.$(function(zt){return zt.selected()&&t.nodeIsGrabbable(zt)}),m(Et,{addToList:Bt})):w(ft,{addToList:Bt}),f(ft),ft.emit(ke("grabon")),Et?Et.forEach(function(zt){zt.emit(ke("grab"))}):ft.emit(ke("grab"))}i(ft,["touchstart","tapstart","vmousedown"],F,{x:ee[0],y:ee[1]}),ft==null&&(t.data.bgActivePosistion={x:ce[0],y:ce[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&i(t.touchData.start,["taphold"],F,{x:ee[0],y:ee[1]})},t.tapholdDuration)}}if(F.touches.length>=1){for(var tr=t.touchData.startPosition=[null,null,null,null,null,null],Dt=0;Dt<ee.length;Dt++)tr[Dt]=le[Dt]=ee[Dt];var Ot=F.touches[0];t.touchData.startGPosition=[Ot.clientX,Ot.clientY]}}},!1);var Ue;t.registerBinding(e,"touchmove",Ue=function(F){var $=t.touchData.capture;if(!(!$&&!B(F))){var ee=t.selection,le=t.cy,ce=t.touchData.now,ke=t.touchData.earlier,be=le.zoom();if(F.touches[0]){var qe=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ce[0]=qe[0],ce[1]=qe[1]}if(F.touches[1]){var qe=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);ce[2]=qe[0],ce[3]=qe[1]}if(F.touches[2]){var qe=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);ce[4]=qe[0],ce[5]=qe[1]}var Re=function(Pa){return{originalEvent:F,type:Pa,position:{x:ce[0],y:ce[1]}}},je=t.touchData.startGPosition,nt;if($&&F.touches[0]&&je){for(var st=[],Ne=0;Ne<ce.length;Ne++)st[Ne]=ce[Ne]-ke[Ne];var Xe=F.touches[0].clientX-je[0],ft=Xe*Xe,Bt=F.touches[0].clientY-je[1],Et=Bt*Bt,tr=ft+Et;nt=tr>=t.touchTapThreshold2}if($&&t.touchData.cxt){F.preventDefault();var Dt=F.touches[0].clientX-Z,Ot=F.touches[0].clientY-ue,zt=F.touches[1].clientX-Z,$t=F.touches[1].clientY-ue,an=rt(Dt,Ot,zt,$t),Wt=an/oe,Kr=150,Nr=Kr*Kr,zn=1.5,$i=zn*zn;if(Wt>=$i||an>=Nr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var on=Re("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(on),t.touchData.start=null):le.emit(on)}}if($&&t.touchData.cxt){var on=Re("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(on):le.emit(on),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var hr=t.findNearestElement(ce[0],ce[1],!0,!0);(!t.touchData.cxtOver||hr!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(Re("cxtdragout")),t.touchData.cxtOver=hr,hr&&hr.emit(Re("cxtdragover")))}else if($&&F.touches[2]&&le.boxSelectionEnabled())F.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||le.emit(Re("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,ee[4]=1,!ee||ee.length===0||ee[0]===void 0?(ee[0]=(ce[0]+ce[2]+ce[4])/3,ee[1]=(ce[1]+ce[3]+ce[5])/3,ee[2]=(ce[0]+ce[2]+ce[4])/3+1,ee[3]=(ce[1]+ce[3]+ce[5])/3+1):(ee[2]=(ce[0]+ce[2]+ce[4])/3,ee[3]=(ce[1]+ce[3]+ce[5])/3),t.redrawHint("select",!0),t.redraw();else if($&&F.touches[1]&&!t.touchData.didSelect&&le.zoomingEnabled()&&le.panningEnabled()&&le.userZoomingEnabled()&&le.userPanningEnabled()){F.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var qt=t.dragData.touchDragEles;if(qt){t.redrawHint("drag",!0);for(var ar=0;ar<qt.length;ar++){var Sn=qt[ar]._private;Sn.grabbed=!1,Sn.rscratch.inDragLayer=!1}}var vr=t.touchData.start,Dt=F.touches[0].clientX-Z,Ot=F.touches[0].clientY-ue,zt=F.touches[1].clientX-Z,$t=F.touches[1].clientY-ue,hi=Ve(Dt,Ot,zt,$t),qo=hi/Q;if(Ae){var Ou=Dt-H,vi=Ot-G,Vo=zt-K,Ho=$t-V,$o=(Ou+Vo)/2,Wo=(vi+Ho)/2,pi=le.zoom(),gi=pi*qo,Wi=le.pan(),Uo=re[0]*pi+Wi.x,Ia=re[1]*pi+Wi.y,Go={x:-gi/pi*(Uo-Wi.x-$o)+Uo,y:-gi/pi*(Ia-Wi.y-Wo)+Ia};if(vr&&vr.active()){var qt=t.dragData.touchDragEles;b(qt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),vr.unactivate().emit(Re("freeon")),qt.emit(Re("free")),t.dragData.didDrag&&(vr.emit(Re("dragfreeon")),qt.emit(Re("dragfree")))}le.viewport({zoom:gi,pan:Go,cancelOnFailedZoom:!0}),le.emit(Re("pinchzoom")),Q=hi,H=Dt,G=Ot,K=zt,V=$t,t.pinching=!0}if(F.touches[0]){var qe=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ce[0]=qe[0],ce[1]=qe[1]}if(F.touches[1]){var qe=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);ce[2]=qe[0],ce[3]=qe[1]}if(F.touches[2]){var qe=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);ce[4]=qe[0],ce[5]=qe[1]}}else if(F.touches[0]&&!t.touchData.didSelect){var xr=t.touchData.start,Ui=t.touchData.last,hr;if(!t.hoverData.draggingEles&&!t.swipePanning&&(hr=t.findNearestElement(ce[0],ce[1],!0,!0)),$&&xr!=null&&F.preventDefault(),$&&xr!=null&&t.nodeIsDraggable(xr))if(nt){var qt=t.dragData.touchDragEles,or=!t.dragData.didDrag;or&&m(qt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Fr={x:0,y:0};if(Be(st[0])&&Be(st[1])&&(Fr.x+=st[0],Fr.y+=st[1],or)){t.redrawHint("eles",!0);var pr=t.touchData.dragDelta;pr&&Be(pr[0])&&Be(pr[1])&&(Fr.x+=pr[0],Fr.y+=pr[1])}t.hoverData.draggingEles=!0,qt.silentShift(Fr).emit(Re("position")).emit(Re("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ke[0]&&t.touchData.startPosition[1]==ke[1]&&t.redrawHint("eles",!0),t.redraw()}else{var pr=t.touchData.dragDelta=t.touchData.dragDelta||[];pr.length===0?(pr.push(st[0]),pr.push(st[1])):(pr[0]+=st[0],pr[1]+=st[1])}if(i(xr||hr,["touchmove","tapdrag","vmousemove"],F,{x:ce[0],y:ce[1]}),(!xr||!xr.grabbed())&&hr!=Ui&&(Ui&&Ui.emit(Re("tapdragout")),hr&&hr.emit(Re("tapdragover"))),t.touchData.last=hr,$)for(var ar=0;ar<ce.length;ar++)ce[ar]&&t.touchData.startPosition[ar]&&nt&&(t.touchData.singleTouchMoved=!0);if($&&(xr==null||xr.pannable())&&le.panningEnabled()&&le.userPanningEnabled()){var Ru=o(xr,t.touchData.starts);Ru&&(F.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=aa(t.touchData.startPosition)),t.swipePanning?(le.panBy({x:st[0]*be,y:st[1]*be}),le.emit(Re("dragpan"))):nt&&(t.swipePanning=!0,le.panBy({x:Xe*be,y:Bt*be}),le.emit(Re("dragpan")),xr&&(xr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var qe=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);ce[0]=qe[0],ce[1]=qe[1]}}for(var Ne=0;Ne<ce.length;Ne++)ke[Ne]=ce[Ne];$&&F.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var Ee;t.registerBinding(e,"touchcancel",Ee=function(F){var $=t.touchData.start;t.touchData.capture=!1,$&&$.unactivate()});var ge,xe,Te,Me;if(t.registerBinding(e,"touchend",ge=function(F){var $=t.touchData.start,ee=t.touchData.capture;if(ee)F.touches.length===0&&(t.touchData.capture=!1),F.preventDefault();else return;var le=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ce=t.cy,ke=ce.zoom(),be=t.touchData.now,qe=t.touchData.earlier;if(F.touches[0]){var Re=t.projectIntoViewport(F.touches[0].clientX,F.touches[0].clientY);be[0]=Re[0],be[1]=Re[1]}if(F.touches[1]){var Re=t.projectIntoViewport(F.touches[1].clientX,F.touches[1].clientY);be[2]=Re[0],be[3]=Re[1]}if(F.touches[2]){var Re=t.projectIntoViewport(F.touches[2].clientX,F.touches[2].clientY);be[4]=Re[0],be[5]=Re[1]}var je=function(Nr){return{originalEvent:F,type:Nr,position:{x:be[0],y:be[1]}}};$&&$.unactivate();var nt;if(t.touchData.cxt){if(nt=je("cxttapend"),$?$.emit(nt):ce.emit(nt),!t.touchData.cxtDragged){var st=je("cxttap");$?$.emit(st):ce.emit(st)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!F.touches[2]&&ce.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ne=ce.collection(t.getAllInBox(le[0],le[1],le[2],le[3]));le[0]=void 0,le[1]=void 0,le[2]=void 0,le[3]=void 0,le[4]=0,t.redrawHint("select",!0),ce.emit(je("boxend"));var Xe=function(Nr){return Nr.selectable()&&!Nr.selected()};Ne.emit(je("box")).stdFilter(Xe).select().emit(je("boxselect")),Ne.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if($!=null&&$.unactivate(),F.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!F.touches[1]){if(!F.touches[0]){if(!F.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ft=t.dragData.touchDragEles;if($!=null){var Bt=$._private.grabbed;b(ft),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Bt&&($.emit(je("freeon")),ft.emit(je("free")),t.dragData.didDrag&&($.emit(je("dragfreeon")),ft.emit(je("dragfree")))),i($,["touchend","tapend","vmouseup","tapdragout"],F,{x:be[0],y:be[1]}),$.unactivate(),t.touchData.start=null}else{var Et=t.findNearestElement(be[0],be[1],!0,!0);i(Et,["touchend","tapend","vmouseup","tapdragout"],F,{x:be[0],y:be[1]})}var tr=t.touchData.startPosition[0]-be[0],Dt=tr*tr,Ot=t.touchData.startPosition[1]-be[1],zt=Ot*Ot,$t=Dt+zt,an=$t*ke*ke;t.touchData.singleTouchMoved||($||ce.$(":selected").unselect(["tapunselect"]),i($,["tap","vclick"],F,{x:be[0],y:be[1]}),xe=!1,F.timeStamp-Me<=ce.multiClickDebounceTime()?(Te&&clearTimeout(Te),xe=!0,Me=null,i($,["dbltap","vdblclick"],F,{x:be[0],y:be[1]})):(Te=setTimeout(function(){xe||i($,["onetap","voneclick"],F,{x:be[0],y:be[1]})},ce.multiClickDebounceTime()),Me=F.timeStamp)),$!=null&&!t.dragData.didDrag&&$._private.selectable&&an<t.touchTapThreshold2&&!t.pinching&&(ce.selectionType()==="single"?(ce.$(r).unmerge($).unselect(["tapunselect"]),$.select(["tapselect"])):$.selected()?$.unselect(["tapunselect"]):$.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Wt=0;Wt<be.length;Wt++)qe[Wt]=be[Wt];t.dragData.didDrag=!1,F.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),F.touches.length<2&&(F.touches.length===1&&(t.touchData.startGPosition=[F.touches[0].clientX,F.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var ze=[],Se=function(F){return{clientX:F.clientX,clientY:F.clientY,force:1,identifier:F.pointerId,pageX:F.pageX,pageY:F.pageY,radiusX:F.width/2,radiusY:F.height/2,screenX:F.screenX,screenY:F.screenY,target:F.target}},Ie=function(F){return{event:F,touch:Se(F)}},ot=function(F){ze.push(Ie(F))},lt=function(F){for(var $=0;$<ze.length;$++){var ee=ze[$];if(ee.event.pointerId===F.pointerId){ze.splice($,1);return}}},Qe=function(F){var $=ze.filter(function(ee){return ee.event.pointerId===F.pointerId})[0];$.event=F,$.touch=Se(F)},Ye=function(F){F.touches=ze.map(function($){return $.touch})},Oe=function(F){return F.pointerType==="mouse"||F.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ve){Oe(ve)||(ve.preventDefault(),ot(ve),Ye(ve),Le(ve))}),t.registerBinding(t.container,"pointerup",function(ve){Oe(ve)||(lt(ve),Ye(ve),ge(ve))}),t.registerBinding(t.container,"pointercancel",function(ve){Oe(ve)||(lt(ve),Ye(ve),Ee(ve))}),t.registerBinding(t.container,"pointermove",function(ve){Oe(ve)||(ve.preventDefault(),Qe(ve),Ye(ve),Ue(ve))})}};var Nn={};Nn.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,i,a,o,s,u){this.renderer.nodeShapeImpl("polygon",n,i,a,o,s,this.points)},intersectLine:function(n,i,a,o,s,u,l,c){return po(s,u,this.points,n,i,a/2,o/2,l)},checkPoint:function(n,i,a,o,s,u,l,c){return Ln(n,i,this.points,u,l,o,s,[0,-1],a)},hasMiterBounds:t!=="rectangle",miterBounds:function(n,i,a,o,s,u){return Bw(this.points,n,i,a,o,s)}}};Nn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},intersectLine:function(e,r,n,i,a,o,s,u){return Hw(a,o,e,r,n/2+s,i/2+s)},checkPoint:function(e,r,n,i,a,o,s,u){return Pi(e,r,i,a,o,s,n)}}};Nn.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,i,a,o,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=a/2,f=o/2;s=s==="auto"?Ag(a,o):s;for(var v=new Array(e.length/2),g=0;g<e.length/2;g++)v[g]={x:n+c*e[g*2],y:i+f*e[g*2+1]};var h,m,w,b,C=v.length;for(m=v[C-1],h=0;h<C;h++)w=v[h%C],b=v[(h+1)%C],u[l][h]=jf(m,w,b,s),m=w,w=b;return u[l]},draw:function(n,i,a,o,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,a,o,s,this.points,this.getOrCreateCorners(i,a,o,s,u,l,"drawCorners"))},intersectLine:function(n,i,a,o,s,u,l,c,f){return Ww(s,u,this.points,n,i,a,o,l,this.getOrCreateCorners(n,i,a,o,c,f,"corners"))},checkPoint:function(n,i,a,o,s,u,l,c,f){return Vw(n,i,this.points,u,l,o,s,this.getOrCreateCorners(u,l,o,s,c,f,"corners"))}}};Nn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Er(4,0),draw:function(e,r,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a,this.points,o)},intersectLine:function(e,r,n,i,a,o,s,u){return Tg(a,o,e,r,n,i,s,u)},checkPoint:function(e,r,n,i,a,o,s,u){var l=i/2,c=a/2;u=u==="auto"?ri(i,a):u,u=Math.min(l,c,u);var f=u*2;return!!(Ln(e,r,this.points,o,s,i,a-f,[0,-1],n)||Ln(e,r,this.points,o,s,i-f,a,[0,-1],n)||Pi(e,r,f,f,o-l+u,s-c+u,n)||Pi(e,r,f,f,o+l-u,s-c+u,n)||Pi(e,r,f,f,o+l-u,s+c-u,n)||Pi(e,r,f,f,o-l+u,s+c-u,n))}}};Nn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Rf(),points:Er(4,0),draw:function(e,r,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a,null,o)},generateCutTrianglePts:function(e,r,n,i,a){var o=a==="auto"?this.cornerLength:a,s=r/2,u=e/2,l=n-u,c=n+u,f=i-s,v=i+s;return{topLeft:[l,f+o,l+o,f,l+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,v-o,c-o,v,c-o,v-o],bottomLeft:[l+o,v,l,v-o,l+o,v-o]}},intersectLine:function(e,r,n,i,a,o,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,r,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return po(a,o,c,e,r)},checkPoint:function(e,r,n,i,a,o,s,u){var l=u==="auto"?this.cornerLength:u;if(Ln(e,r,this.points,o,s,i,a-2*l,[0,-1],n)||Ln(e,r,this.points,o,s,i-2*l,a,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,a,o,s);return _r(e,r,c.topLeft)||_r(e,r,c.topRight)||_r(e,r,c.bottomRight)||_r(e,r,c.bottomLeft)}}};Nn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Er(4,0),draw:function(e,r,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},intersectLine:function(e,r,n,i,a,o,s,u){var l=.15,c=.5,f=.85,v=this.generateBarrelBezierPts(n+2*s,i+2*s,e,r),g=function(w){var b=la({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},l),C=la({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},c),E=la({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},f);return[w[0],w[1],b.x,b.y,C.x,C.y,E.x,E.y,w[4],w[5]]},h=[].concat(g(v.topLeft),g(v.topRight),g(v.bottomRight),g(v.bottomLeft));return po(a,o,h,e,r)},generateBarrelBezierPts:function(e,r,n,i){var a=r/2,o=e/2,s=n-o,u=n+o,l=i-a,c=i+a,f=Xc(e,r),v=f.heightOffset,g=f.widthOffset,h=f.ctrlPtOffsetPct*e,m={topLeft:[s,l+v,s+h,l,s+g,l],topRight:[u-g,l,u-h,l,u,l+v],bottomRight:[u,c-v,u-h,c,u-g,c],bottomLeft:[s+g,c,s+h,c,s,c-v]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,r,n,i,a,o,s,u){var l=Xc(i,a),c=l.heightOffset,f=l.widthOffset;if(Ln(e,r,this.points,o,s,i,a-2*c,[0,-1],n)||Ln(e,r,this.points,o,s,i-2*f,a,[0,-1],n))return!0;for(var v=this.generateBarrelBezierPts(i,a,o,s),g=function(I,M,B){var P=B[4],L=B[2],O=B[0],N=B[5],z=B[1],W=Math.min(P,O),q=Math.max(P,O),j=Math.min(N,z),ie=Math.max(N,z);if(W<=I&&I<=q&&j<=M&&M<=ie){var ne=Uw(P,L,O),Y=Nw(ne[0],ne[1],ne[2],I),H=Y.filter(function(G){return 0<=G&&G<=1});if(H.length>0)return H[0]}return null},h=Object.keys(v),m=0;m<h.length;m++){var w=h[m],b=v[w],C=g(e,r,b);if(C!=null){var E=b[5],x=b[3],k=b[1],A=rr(E,x,k,C);if(b.isTop&&A<=r||b.isBottom&&r<=A)return!0}}return!1}}};Nn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Er(4,0),draw:function(e,r,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a,this.points,o)},intersectLine:function(e,r,n,i,a,o,s,u){var l=e-(n/2+s),c=r-(i/2+s),f=c,v=e+(n/2+s),g=Kn(a,o,e,r,l,c,v,f,!1);return g.length>0?g:Tg(a,o,e,r,n,i,s,u)},checkPoint:function(e,r,n,i,a,o,s,u){u=u==="auto"?ri(i,a):u;var l=2*u;if(Ln(e,r,this.points,o,s,i,a-l,[0,-1],n)||Ln(e,r,this.points,o,s,i-l,a,[0,-1],n))return!0;var c=i/2+2*n,f=a/2+2*n,v=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(_r(e,r,v)||Pi(e,r,l,l,o+i/2-u,s+a/2-u,n)||Pi(e,r,l,l,o-i/2+u,s+a/2-u,n))}}};Nn.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Er(3,0)),this.generateRoundPolygon("round-triangle",Er(3,0)),this.generatePolygon("rectangle",Er(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Er(5,0)),this.generateRoundPolygon("round-pentagon",Er(5,0)),this.generatePolygon("hexagon",Er(6,0)),this.generateRoundPolygon("round-hexagon",Er(6,0)),this.generatePolygon("heptagon",Er(7,0)),this.generateRoundPolygon("round-heptagon",Er(7,0)),this.generatePolygon("octagon",Er(8,0)),this.generateRoundPolygon("round-octagon",Er(8,0));var n=new Array(20);{var i=Kc(5,0),a=Kc(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=a[s*2],n[s*4+3]=a[s*2+1]}n=kg(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,v;return(v=this[f])?v:e.generatePolygon(f,l)}};var Ro={};Ro.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Ro.redraw=function(t){t=t||xg();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Ro.beforeRender=function(t,e){if(!this.destroyed){e==null&&Ft("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,i){return i.priority-n.priority})}};var Wv=function(e,r,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(r,n)};Ro.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Wv(t,!0,i);var a=Pn();t.render(t.renderOptions);var o=t.lastDrawTime=Pn();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-a),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-a;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else Wv(t,!1,i);t.skipFrame=!1,$s(r)}};$s(r)}};var sE=function(e){this.init(e)},Am=sE,_a=Am.prototype;_a.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];_a.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(o)!=null;if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!u){var l=i.createElement("style");l.id=o,l.textContent="."+s+" { position: relative; }",a.insertBefore(l,a.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Tt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=Be(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};_a.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};_a.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};_a.isHeadless=function(){return!1};[Gf,Tm,km,Aa,Nn,Ro].forEach(function(t){tt(_a,t)});var bc=1e3/60,_m={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Io(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(l,c){var f=Pn(),v=i.averageRedrawTime,g=i.lastRedrawTime,h=[],m=i.cy.extent(),w=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var b=Pn(),C=b-f,E=b-c;if(g<bc){var x=bc-(l?v:0);if(E>=e.deqFastCost*x)break}else if(l){if(C>=e.deqCost*g||C>=e.deqAvgCost*v)break}else if(E>=e.deqNoDrawCost*bc)break;var k=e.deq(n,w,m);if(k.length>0)for(var A=0;A<k.length;A++)h.push(k[A]);else break}h.length>0&&(e.onDeqd(n,h),!l&&e.shouldRedraw(n,h,w,m)&&a())},s=e.priority||If;i.beforeRender(o,s(n))}}}},uE=(function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ws;oi(this,t),this.idsByKey=new Mn,this.keyForId=new Mn,this.cachesByLvl=new Mn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return si(t,[{key:"getIdsFor",value:function(r){r==null&&Ft("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new Ea,n.set(r,i)),i}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),i=this.keyForId.get(n),a=this.getKey(r);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),i=this.keyForId.get(n),a=this.getKey(r);return i!==a}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,i=this.lvls,a=n.get(r);return a||(a=new Mn,n.set(r,a),i.push(r)),a}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var i=this.getKey(r),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(r),a}},{key:"getForCachedKey",value:function(r,n){var i=this.keyForId.get(r.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var i=this.getKey(r);return this.hasCache(i,n)}},{key:"setCache",value:function(r,n,i){i.key=r,this.getCachesAt(n).set(r,i)}},{key:"set",value:function(r,n,i){var a=this.getKey(r);this.setCache(a,n,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var i=this.getKey(r);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(i){return n.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var n=r.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(r);var a=this.doesEleInvalidateKey(r);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}])})(),Uv=25,hs=50,Bs=-4,lf=3,Dm=7.99,lE=8,cE=1024,fE=1024,dE=1024,hE=.2,vE=.8,pE=10,gE=.15,mE=.1,yE=.9,bE=.9,wE=100,xE=1,sa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},CE=fr({getKey:null,doesEleInvalidateKey:Ws,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:yg,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Qa=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var i=CE(r);tt(n,i),n.lookup=new uE(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},er=Qa.prototype;er.reasons=sa;er.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};er.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};er.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Po(function(r,n){return n.reqs-r.reqs});return e};er.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};er.getElement=function(t,e,r,n,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Lf(s*r))),n<Bs)n=Bs;else if(s>=Dm||n>lf)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,v=o.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,v))return null;var g=u.get(t,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var h;if(c<=Uv?h=Uv:c<=hs?h=hs:h=Math.ceil(c/hs)*hs,c>dE||f>fE)return null;var m=a.getTextureQueue(h),w=m[m.length-2],b=function(){return a.recycleTexture(h,f)||a.addTexture(h,f)};w||(w=m[m.length-1]),w||(w=b()),w.width-w.usedWidth<f&&(w=b());for(var C=function(W){return W&&W.scaledLabelShown===v},E=i&&i===sa.dequeue,x=i&&i===sa.highQuality,k=i&&i===sa.downscale,A,p=n+1;p<=lf;p++){var I=u.get(t,p);if(I){A=I;break}}var M=A&&A.level===n+1?A:null,B=function(){w.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,w.usedWidth,0,f,c)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,f,h),C(M))B();else if(C(A))if(x){for(var P=A.level;P>n;P--)M=a.getElement(t,e,r,P,sa.downscale);B()}else return a.queueElement(t,A.level-1),A;else{var L;if(!E&&!x&&!k)for(var O=n-1;O>=Bs;O--){var N=u.get(t,O);if(N){L=N;break}}if(C(L))return a.queueElement(t,n),L;w.context.translate(w.usedWidth,0),w.context.scale(l,l),this.drawElement(w.context,t,e,v,!1),w.context.scale(1/l,1/l),w.context.translate(-w.usedWidth,0)}return g={x:w.usedWidth,texture:w,level:n,scale:l,width:f,height:c,scaledLabelShown:v},w.usedWidth+=Math.ceil(f+lE),w.eleCaches.push(g),u.set(t,n,g),a.checkTextureFullness(w),g};er.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};er.invalidateElement=function(t){var e=this,r=e.lookup,n=[],i=r.isInvalid(t);if(i){for(var a=Bs;a<=lf;a++){var o=r.getForCachedKey(t,a);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};er.checkTextureUtility=function(t){t.invalidatedWidth>=hE*t.width&&this.retireTexture(t)};er.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>vE&&t.fullnessChecks>=pE?ti(r,t):t.fullnessChecks++};er.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),i=this.lookup;ti(n,t),t.retired=!0;for(var a=t.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}Pf(a);var u=e.getRetiredTextureQueue(r);u.push(t)};er.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),i={};return n.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(cE,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=r.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};er.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),i=r.getRetiredTextureQueue(t),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Pf(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),ti(i,o),n.push(o),o}};er.queueElement=function(t,e){var r=this,n=r.getElementQueue(),i=r.getElementKeyToQueue(),a=this.getKey(t),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:a};n.push(s),i[a]=s}};er.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<xE&&r.size()>0;o++){var s=r.pop(),u=s.key,l=s.eles[0],c=a.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,t,s.level,sa.dequeue)}return i};er.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(t),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=Mf,r.updateItem(a),r.pop(),n[i]=null):a.eles.unmerge(t))};er.onDequeue=function(t){this.onDequeues.push(t)};er.offDequeue=function(t){ti(this.onDequeues,t)};er.setupDequeueing=_m.setupDequeueing({deqRedrawThreshold:wE,deqCost:gE,deqAvgCost:mE,deqNoDrawCost:yE,deqFastCost:bE,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(r)}},shouldRedraw:function(e,r,n,i){for(var a=0;a<r.length;a++)for(var o=r[a].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(Of(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var EE=1,to=-4,Qs=2,SE=3.99,TE=50,kE=50,AE=.15,_E=.1,DE=.9,ME=.9,IE=1,Gv=250,PE=4e3*4e3,jv=32767,LE=!0,Mm=function(e){var r=this,n=r.renderer=e,i=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Pn()-2*Gv,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=Io(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},kE),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=Gv?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(s,u){return u.reqs-s.reqs};r.layersQueue=new Po(a),r.setupDequeueing()},dr=Mm.prototype,Kv=0,BE=Math.pow(2,53)-1;dr.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),i=Math.ceil(t.h*r),a=this.renderer.makeOffscreenCanvas(n,i),o={id:Kv=++Kv%BE,bb:t,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(r,r),s.translate(u,l),o};dr.getLayers=function(t,e,r){var n=this,i=n.renderer,a=i.cy,o=a.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Lf(o*e)),r<to)r=to;else if(o>=SE||r>Qs)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),c=u[r]=u[r]||[],f,v=n.levelIsComplete(r,t),g,h=function(){var B=function(z){if(n.validateLayersElesOrdering(z,t),n.levelIsComplete(z,t))return g=u[z],!0},P=function(z){if(!g)for(var W=r+z;to<=W&&W<=Qs&&!B(W);W+=z);};P(1),P(-1);for(var L=c.length-1;L>=0;L--){var O=c[L];O.invalid&&ti(c,O)}};if(!v)h();else return c;var m=function(){if(!f){f=Sr();for(var B=0;B<t.length;B++)Iw(f,t[B].boundingBox())}return f},w=function(B){B=B||{};var P=B.after;m();var L=Math.ceil(f.w*l),O=Math.ceil(f.h*l);if(L>jv||O>jv)return null;var N=L*O;if(N>PE)return null;var z=n.makeLayer(f,r);if(P!=null){var W=c.indexOf(P)+1;c.splice(W,0,z)}else(B.insert===void 0||B.insert)&&c.unshift(z);return z};if(n.skipping&&!s)return null;for(var b=null,C=t.length/EE,E=!s,x=0;x<t.length;x++){var k=t[x],A=k._private.rscratch,p=A.imgLayerCaches=A.imgLayerCaches||{},I=p[r];if(I){b=I;continue}if((!b||b.eles.length>=C||!Sg(b.bb,k.boundingBox()))&&(b=w({insert:!0,after:b}),!b))return null;g||E?n.queueLayer(b,k):n.drawEleInLayer(b,k,r,e),b.eles.push(k),p[r]=b}return g||(E?null:c)};dr.getEleLevelForLayerLevel=function(t,e){return t};dr.drawEleInLayer=function(t,e,r,n){var i=this,a=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=i.getEleLevelForLayerLevel(r,n),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,r,LE),a.setImgSmoothing(o,!0))};dr.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var o=n[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};dr.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};dr.updateElementsInLayers=function(t,e){for(var r=this,n=Ao(t[0]),i=0;i<t.length;i++)for(var a=n?null:t[i],o=n?t[i]:t[i].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=to;l<=Qs;l++){var c=u[l];c&&(a&&r.getEleLevelForLayerLevel(c.level)!==a.level||e(c,o,a))}};dr.haveLayers=function(){for(var t=this,e=!1,r=to;r<=Qs;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};dr.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Pn(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,i,a){e.invalidateLayer(n)}))};dr.invalidateLayer=function(t){if(this.lastInvalidationTime=Pn(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];ti(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};dr.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,i,a){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};dr.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};dr.queueLayer=function(t,e){var r=this,n=r.layersQueue,i=t.elesQueue,a=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};dr.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],i=0;i<IE&&r.size()!==0;){var a=r.peek();if(a.replacement){r.pop();continue}if(a.replaces&&a!==a.replaces.replacement){r.pop();continue}if(a.invalid){r.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,t),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(r.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};dr.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,i=r.indexOf(n);if(!(i<0||n.invalid)){r[i]=t;for(var a=0;a<t.eles.length;a++){var o=t.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};dr.requestRedraw=Io(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);dr.setupDequeueing=_m.setupDequeueing({deqRedrawThreshold:TE,deqCost:AE,deqAvgCost:_E,deqNoDrawCost:DE,deqFastCost:ME,deq:function(e,r){return e.dequeue(r)},onDeqd:If,shouldRedraw:yg,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Im={},Xv;function OE(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function RE(t,e,r){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Yv(t,e,r){t.beginPath&&t.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];t.lineTo(a.x,a.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];t.lineTo(a.x,a.y)}t.closePath&&t.closePath()}function NE(t,e,r,n,i){t.beginPath&&t.beginPath(),t.arc(r,n,i,0,Math.PI*2,!1);var a=e,o=a[0];t.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var u=a[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function FE(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}Im.arrowShapeImpl=function(t){return(Xv||(Xv={polygon:OE,"triangle-backcurve":RE,"triangle-tee":Yv,"circle-triangle":NE,"triangle-cross":Yv,circle:FE}))[t]};var En={};En.drawElement=function(t,e,r,n,i,a){var o=this;e.isNode()?o.drawNode(t,e,r,n,i,a):o.drawEdge(t,e,r,n,i,a)};En.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};En.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};En.drawCachedElementPortion=function(t,e,r,n,i,a,o,s){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=r.getElement(e,l,n,i,a);if(c!=null){var f=s(u,e);if(f===0)return;var v=o(u,e),g=l.x1,h=l.y1,m=l.w,w=l.h,b,C,E,x,k;if(v!==0){var A=r.getRotationPoint(e);E=A.x,x=A.y,t.translate(E,x),t.rotate(v),k=u.getImgSmoothing(t),k||u.setImgSmoothing(t,!0);var p=r.getRotationOffset(e);b=p.x,C=p.y}else b=g,C=h;var I;f!==1&&(I=t.globalAlpha,t.globalAlpha=I*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,b,C,m,w),f!==1&&(t.globalAlpha=I),v!==0&&(t.rotate(-v),t.translate(-E,-x),k||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var zE=function(){return 0},qE=function(e,r){return e.getTextAngle(r,null)},VE=function(e,r){return e.getTextAngle(r,"source")},HE=function(e,r){return e.getTextAngle(r,"target")},$E=function(e,r){return r.effectiveOpacity()},wc=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};En.drawCachedElement=function(t,e,r,n,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,v=e.boundingBox(),g=a===!0?u.reasons.highQuality:null;if(!(v.w===0||v.h===0||!e.visible())&&(!n||Of(v,n))){var h=e.isEdge(),m=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,u,r,i,g,zE,$E),(!h||!m)&&o.drawCachedElementPortion(t,e,l,r,i,g,qE,wc),h&&!m&&(o.drawCachedElementPortion(t,e,c,r,i,g,VE,wc),o.drawCachedElementPortion(t,e,f,r,i,g,HE,wc)),o.drawElementOverlay(t,e)}};En.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var i=e[n];r.drawElement(t,i)}};En.drawCachedElements=function(t,e,r,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(t,o,r,n)}};En.drawCachedNodes=function(t,e,r,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(t,o,r,n)}};En.drawLayeredElements=function(t,e,r,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,r);if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,r,n)};var Fn={};Fn.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,v=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,m=e.pstyle("line-outline-width").value,w=e.pstyle("line-outline-color").value,b=l*c,C=l*c,E=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;f==="straight-triangle"?(o.eleStrokeStyle(t,e,z),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=g,t.lineCap=h,o.eleStrokeStyle(t,e,z),o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},x=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(t.lineWidth=g+m,t.lineCap=h,m>0)o.colorStrokeStyle(t,w[0],w[1],w[2],z);else{t.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},k=function(){i&&o.drawEdgeOverlay(t,e)},A=function(){i&&o.drawEdgeUnderlay(t,e)},p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;o.drawArrowheads(t,e,z)},I=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var M=e.pstyle("ghost").value==="yes";if(M){var B=e.pstyle("ghost-offset-x").pfValue,P=e.pstyle("ghost-offset-y").pfValue,L=e.pstyle("ghost-opacity").value,O=b*L;t.translate(B,P),E(O),p(O),t.translate(-B,-P)}else x();A(),E(),p(),k(),I(),r&&t.translate(u.x1,u.y1)}};var Pm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",a.colorStrokeStyle(r,c[0],c[1],c[2],i),a.drawEdgePath(n,r,s.allpts,"solid")}}}};Fn.drawEdgeOverlay=Pm("overlay");Fn.drawEdgeUnderlay=Pm("underlay");Fn.drawEdgePath=function(t,e,r,n){var i=t._private.rscratch,a=e,o,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var f=r.join("$"),v=i.pathCacheKey&&i.pathCacheKey===f;v?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=f,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<r.length;g+=4)e.quadraticCurveTo(r[g],r[g+1],r[g+2],r[g+3]);break;case"straight":case"haystack":for(var h=2;h+1<r.length;h+=2)e.lineTo(r[h],r[h+1]);break;case"segments":if(i.isRound){var m=Dr(i.roundCorners),w;try{for(m.s();!(w=m.n()).done;){var b=w.value;wm(e,b)}}catch(E){m.e(E)}finally{m.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var C=2;C+1<r.length;C+=2)e.lineTo(r[C],r[C+1]);break}e=a,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Fn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[i]-u[0],r[i+1]-u[1]),e.lineTo(r[i]+u[0],r[i+1]+u[1]),e.lineTo(r[i+2],r[i+3]),e.closePath(),e.fill()}};Fn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};Fn.drawArrowhead=function(t,e,r,n,i,a,o){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,v=e.pstyle(r+"-arrow-width"),g=v.value==="match-line"?f:v.pfValue;v.units==="%"&&(g*=f);var h=e.pstyle("opacity").value;o===void 0&&(o=h);var m=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,f,u,g,n,i,a),t.globalCompositeOperation=m);var w=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,w[0],w[1],w[2],o),s.colorStrokeStyle(t,w[0],w[1],w[2],o),s.drawArrowShape(e,t,c,f,u,g,n,i,a)}}};Fn.drawArrowShape=function(t,e,r,n,i,a,o,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,v,g=e,h={x:o,y:s},m=t.pstyle("arrow-scale").value,w=this.getArrowWidth(n,m),b=l.arrowShapes[i];if(c){var C=l.arrowPathCache=l.arrowPathCache||[],E=Bi(i),x=C[E];x!=null?(v=e=x,f=!0):(v=e=new Path2D,C[E]=v)}f||(e.beginPath&&e.beginPath(),c?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,w,u,h,n),e.closePath&&e.closePath()),e=g,c&&(e.translate(o,s),e.rotate(u),e.scale(w,w)),(r==="filled"||r==="both")&&(c?e.fill(v):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=a/(c?w:1),e.lineJoin="miter",c?e.stroke(v):e.stroke()),c&&(e.scale(1/w,1/w),e.rotate(-u),e.translate(-o,-s))};var Xf={};Xf.safeDrawImage=function(t,e,r,n,i,a,o,s,u,l){if(!(i<=0||a<=0||u<=0||l<=0))try{t.drawImage(e,r,n,i,a,o,s,u,l)}catch(c){Tt(c)}};Xf.drawInscribedImage=function(t,e,r,n,i){var a=this,o=r.position(),s=o.x,u=o.y,l=r.cy().style(),c=l.getIndexedStyle.bind(l),f=c(r,"background-fit","value",n),v=c(r,"background-repeat","value",n),g=r.width(),h=r.height(),m=r.padding()*2,w=g+(c(r,"background-width-relative-to","value",n)==="inner"?0:m),b=h+(c(r,"background-height-relative-to","value",n)==="inner"?0:m),C=r._private.rscratch,E=c(r,"background-clip","value",n),x=E==="node",k=c(r,"background-image-opacity","value",n)*i,A=c(r,"background-image-smoothing","value",n),p=r.pstyle("corner-radius").value;p!=="auto"&&(p=r.pstyle("corner-radius").pfValue);var I=e.width||e.cachedW,M=e.height||e.cachedH;(I==null||M==null)&&(document.body.appendChild(e),I=e.cachedW=e.width||e.offsetWidth,M=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var B=I,P=M;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?B=c(r,"background-width","pfValue",n)*w:B=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?P=c(r,"background-height","pfValue",n)*b:P=c(r,"background-height","pfValue",n)),!(B===0||P===0)){if(f==="contain"){var L=Math.min(w/B,b/P);B*=L,P*=L}else if(f==="cover"){var L=Math.max(w/B,b/P);B*=L,P*=L}var O=s-w/2,N=c(r,"background-position-x","units",n),z=c(r,"background-position-x","pfValue",n);N==="%"?O+=(w-B)*z:O+=z;var W=c(r,"background-offset-x","units",n),q=c(r,"background-offset-x","pfValue",n);W==="%"?O+=(w-B)*q:O+=q;var j=u-b/2,ie=c(r,"background-position-y","units",n),ne=c(r,"background-position-y","pfValue",n);ie==="%"?j+=(b-P)*ne:j+=ne;var Y=c(r,"background-offset-y","units",n),H=c(r,"background-offset-y","pfValue",n);Y==="%"?j+=(b-P)*H:j+=H,C.pathCache&&(O-=s,j-=u,s=0,u=0);var G=t.globalAlpha;t.globalAlpha=k;var K=a.getImgSmoothing(t),V=!1;if(A==="no"&&K?(a.setImgSmoothing(t,!1),V=!0):A==="yes"&&!K&&(a.setImgSmoothing(t,!0),V=!0),v==="no-repeat")x&&(t.save(),C.pathCache?t.clip(C.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(t,s,u,w,b,p,C),t.clip())),a.safeDrawImage(t,e,0,0,I,M,O,j,B,P),x&&t.restore();else{var Q=t.createPattern(e,v);t.fillStyle=Q,a.nodeShapes[a.getNodeShape(r)].draw(t,s,u,w,b,p,C),t.translate(O,j),t.fill(),t.translate(-O,-j)}t.globalAlpha=G,V&&a.setImgSmoothing(t,K)}};var Hi={};Hi.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(Lf(r*n));e=Math.pow(2,i)}var a=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};Hi.drawElementText=function(t,e,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),v=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!v||!v.value))return;t.textAlign="center",t.textBaseline="bottom"}var g=!r,h;r&&(h=r,t.translate(-h.x1,-h.y1)),i==null?(o.drawText(t,e,null,g,a),e.isEdge()&&(o.drawText(t,e,"source",g,a),o.drawText(t,e,"target",g,a))):o.drawText(t,e,i,g,a),r&&t.translate(h.x1,h.y1)};Hi.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Hi.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function WE(t,e,r,n,i){var a=Math.min(n,i),o=a/2,s=e+n/2,u=r+i/2;t.beginPath(),t.arc(s,u,o,0,Math.PI*2),t.closePath()}function Zv(t,e,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=Math.min(a,n/2,i/2);t.beginPath(),t.moveTo(e+o,r),t.lineTo(e+n-o,r),t.quadraticCurveTo(e+n,r,e+n,r+o),t.lineTo(e+n,r+i-o),t.quadraticCurveTo(e+n,r+i,e+n-o,r+i),t.lineTo(e+o,r+i),t.quadraticCurveTo(e,r+i,e,r+i-o),t.lineTo(e,r+o),t.quadraticCurveTo(e,r,e+o,r),t.closePath()}Hi.getTextAngle=function(t,e){var r,n=t._private,i=n.rscratch,a=e?e+"-":"",o=t.pstyle(a+"text-rotation");if(o.strValue==="autorotate"){var s=Ar(i,"labelAngle",e);r=t.isEdge()?s:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};Hi.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Ar(o,"labelX",r),l=Ar(o,"labelY",r),c,f,v=this.getLabelText(e,r);if(v!=null&&v!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,i);var g=r?r+"-":"",h=Ar(o,"labelWidth",r),m=Ar(o,"labelHeight",r),w=e.pstyle(g+"text-margin-x").pfValue,b=e.pstyle(g+"text-margin-y").pfValue,C=e.isEdge(),E=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;C&&(E="center",x="center"),u+=w,l+=b;var k;switch(n?k=this.getTextAngle(e,r):k=0,k!==0&&(c=u,f=l,t.translate(c,f),t.rotate(k),u=0,l=0),x){case"top":break;case"center":l+=m/2;break;case"bottom":l+=m;break}var A=e.pstyle("text-background-opacity").value,p=e.pstyle("text-border-opacity").value,I=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue,B=e.pstyle("text-background-shape").strValue,P=B==="round-rectangle"||B==="roundrectangle",L=B==="circle",O=2;if(A>0||I>0&&p>0){var N=t.fillStyle,z=t.strokeStyle,W=t.lineWidth,q=e.pstyle("text-background-color").value,j=e.pstyle("text-border-color").value,ie=e.pstyle("text-border-style").value,ne=A>0,Y=I>0&&p>0,H=u-M;switch(E){case"left":H-=h;break;case"center":H-=h/2;break}var G=l-m-M,K=h+2*M,V=m+2*M;if(ne&&(t.fillStyle="rgba(".concat(q[0],",").concat(q[1],",").concat(q[2],",").concat(A*s,")")),Y&&(t.strokeStyle="rgba(".concat(j[0],",").concat(j[1],",").concat(j[2],",").concat(p*s,")"),t.lineWidth=I,t.setLineDash))switch(ie){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=I/4,t.setLineDash([]);break;case"solid":default:t.setLineDash([]);break}if(P?(t.beginPath(),Zv(t,H,G,K,V,O)):L?(t.beginPath(),WE(t,H,G,K,V)):(t.beginPath(),t.rect(H,G,K,V)),ne&&t.fill(),Y&&t.stroke(),Y&&ie==="double"){var Q=I/2;t.beginPath(),P?Zv(t,H+Q,G+Q,K-2*Q,V-2*Q,O):t.rect(H+Q,G+Q,K-2*Q,V-2*Q),t.stroke()}t.fillStyle=N,t.strokeStyle=z,t.lineWidth=W,t.setLineDash&&t.setLineDash([])}var oe=2*e.pstyle("text-outline-width").pfValue;if(oe>0&&(t.lineWidth=oe),e.pstyle("text-wrap").value==="wrap"){var he=Ar(o,"labelWrapCachedLines",r),re=Ar(o,"labelLineHeight",r),Z=h/2,ue=this.getLabelJustification(e);switch(ue==="auto"||(E==="left"?ue==="left"?u+=-h:ue==="center"&&(u+=-Z):E==="center"?ue==="left"?u+=-Z:ue==="right"&&(u+=Z):E==="right"&&(ue==="center"?u+=Z:ue==="right"&&(u+=h))),x){case"top":l-=(he.length-1)*re;break;case"center":case"bottom":l-=(he.length-1)*re;break}for(var ae=0;ae<he.length;ae++)oe>0&&t.strokeText(he[ae],u,l),t.fillText(he[ae],u,l),l+=re}else oe>0&&t.strokeText(v,u,l),t.fillText(v,u,l);k!==0&&(t.rotate(-k),t.translate(-c,-f))}}};var li={};li.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!Be(f.x)||!Be(f.y))&&!(a&&!e.visible())){var v=a?e.effectiveOpacity():1,g=o.usePaths(),h,m=!1,w=e.padding();s=e.width()+2*w,u=e.height()+2*w;var b;r&&(b=r,t.translate(-b.x1,-b.y1));for(var C=e.pstyle("background-image"),E=C.value,x=new Array(E.length),k=new Array(E.length),A=0,p=0;p<E.length;p++){var I=E[p],M=x[p]=I!=null&&I!=="none";if(M){var B=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",p);A++,k[p]=o.getCachedImage(I,B,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var P=e.pstyle("background-blacken").value,L=e.pstyle("border-width").pfValue,O=e.pstyle("background-opacity").value*v,N=e.pstyle("border-color").value,z=e.pstyle("border-style").value,W=e.pstyle("border-join").value,q=e.pstyle("border-cap").value,j=e.pstyle("border-position").value,ie=e.pstyle("border-dash-pattern").pfValue,ne=e.pstyle("border-dash-offset").pfValue,Y=e.pstyle("border-opacity").value*v,H=e.pstyle("outline-width").pfValue,G=e.pstyle("outline-color").value,K=e.pstyle("outline-style").value,V=e.pstyle("outline-opacity").value*v,Q=e.pstyle("outline-offset").value,oe=e.pstyle("corner-radius").value;oe!=="auto"&&(oe=e.pstyle("corner-radius").pfValue);var he=function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O;o.eleFillStyle(t,e,Oe)},re=function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y;o.colorStrokeStyle(t,N[0],N[1],N[2],Oe)},Z=function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V;o.colorStrokeStyle(t,G[0],G[1],G[2],Oe)},ue=function(Oe,ve,F,$){var ee=o.nodePathCache=o.nodePathCache||[],le=mg(F==="polygon"?F+","+$.join(","):F,""+ve,""+Oe,""+oe),ce=ee[le],ke,be=!1;return ce!=null?(ke=ce,be=!0,c.pathCache=ke):(ke=new Path2D,ee[le]=c.pathCache=ke),{path:ke,cacheHit:be}},ae=e.pstyle("shape").strValue,me=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(f.x,f.y);var Ae=ue(s,u,ae,me);h=Ae.path,m=Ae.cacheHit}var Ve=function(){if(!m){var Oe=f;g&&(Oe={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||t,Oe.x,Oe.y,s,u,oe,c)}g?t.fill(h):t.fill()},rt=function(){for(var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,F=l.backgrounding,$=0,ee=0;ee<k.length;ee++){var le=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ee);if(ve&&le==="over"||!ve&&le==="inside"){$++;continue}x[ee]&&k[ee].complete&&!k[ee].error&&($++,o.drawInscribedImage(t,k[ee],e,ee,Oe))}l.backgrounding=$!==A,F!==l.backgrounding&&e.updateStyle(!1)},Le=function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasPie(e)&&(o.drawPie(t,e,ve),Oe&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u,oe,c)))},Ue=function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasStripe(e)&&(t.save(),g?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u,oe,c),t.clip()),o.drawStripe(t,e,ve),t.restore(),Oe&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u,oe,c)))},Ee=function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ve=(P>0?P:-P)*Oe,F=P>0?0:255;P!==0&&(o.colorFillStyle(t,F,F,F,ve),g?t.fill(h):t.fill())},ge=function(){if(L>0){if(t.lineWidth=L,t.lineCap=q,t.lineJoin=W,t.setLineDash)switch(z){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(ie),t.lineDashOffset=ne;break;case"solid":case"double":t.setLineDash([]);break}if(j!=="center"){if(t.save(),t.lineWidth*=2,j==="inside")g?t.clip(h):t.clip();else{var Oe=new Path2D;Oe.rect(-s/2-L,-u/2-L,s+2*L,u+2*L),Oe.addPath(h),t.clip(Oe,"evenodd")}g?t.stroke(h):t.stroke(),t.restore()}else g?t.stroke(h):t.stroke();if(z==="double"){t.lineWidth=L/3;var ve=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(h):t.stroke(),t.globalCompositeOperation=ve}t.setLineDash&&t.setLineDash([])}},xe=function(){if(H>0){if(t.lineWidth=H,t.lineCap="butt",t.setLineDash)switch(K){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var Oe=f;g&&(Oe={x:0,y:0});var ve=o.getNodeShape(e),F=L;j==="inside"&&(F=0),j==="outside"&&(F*=2);var $=(s+F+(H+Q))/s,ee=(u+F+(H+Q))/u,le=s*$,ce=u*ee,ke=o.nodeShapes[ve].points,be;if(g){var qe=ue(le,ce,ve,ke);be=qe.path}if(ve==="ellipse")o.drawEllipsePath(be||t,Oe.x,Oe.y,le,ce);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ve)){var Re=0,je=0,nt=0;ve==="round-diamond"?Re=(F+Q+H)*1.4:ve==="round-heptagon"?(Re=(F+Q+H)*1.075,nt=-(F/2+Q+H)/35):ve==="round-hexagon"?Re=(F+Q+H)*1.12:ve==="round-pentagon"?(Re=(F+Q+H)*1.13,nt=-(F/2+Q+H)/15):ve==="round-tag"?(Re=(F+Q+H)*1.12,je=(F/2+H+Q)*.07):ve==="round-triangle"&&(Re=(F+Q+H)*(Math.PI/2),nt=-(F+Q/2+H)/Math.PI),Re!==0&&($=(s+Re)/s,le=s*$,["round-hexagon","round-tag"].includes(ve)||(ee=(u+Re)/u,ce=u*ee)),oe=oe==="auto"?Ag(le,ce):oe;for(var st=le/2,Ne=ce/2,Xe=oe+(F+H+Q)/2,ft=new Array(ke.length/2),Bt=new Array(ke.length/2),Et=0;Et<ke.length/2;Et++)ft[Et]={x:Oe.x+je+st*ke[Et*2],y:Oe.y+nt+Ne*ke[Et*2+1]};var tr,Dt,Ot,zt,$t=ft.length;for(Dt=ft[$t-1],tr=0;tr<$t;tr++)Ot=ft[tr%$t],zt=ft[(tr+1)%$t],Bt[tr]=jf(Dt,Ot,zt,Xe),Dt=Ot,Ot=zt;o.drawRoundPolygonPath(be||t,Oe.x+je,Oe.y+nt,s*$,u*ee,ke,Bt)}else if(["roundrectangle","round-rectangle"].includes(ve))oe=oe==="auto"?ri(le,ce):oe,o.drawRoundRectanglePath(be||t,Oe.x,Oe.y,le,ce,oe+(F+H+Q)/2);else if(["cutrectangle","cut-rectangle"].includes(ve))oe=oe==="auto"?Rf():oe,o.drawCutRectanglePath(be||t,Oe.x,Oe.y,le,ce,null,oe+(F+H+Q)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ve))oe=oe==="auto"?ri(le,ce):oe,o.drawBottomRoundRectanglePath(be||t,Oe.x,Oe.y,le,ce,oe+(F+H+Q)/2);else if(ve==="barrel")o.drawBarrelPath(be||t,Oe.x,Oe.y,le,ce);else if(ve.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ve)){var an=(F+H+Q)/s;ke=Us(Gs(ke,an)),o.drawPolygonPath(be||t,Oe.x,Oe.y,s,u,ke)}else{var Wt=(F+H+Q)/s;ke=Us(Gs(ke,-Wt)),o.drawPolygonPath(be||t,Oe.x,Oe.y,s,u,ke)}if(g?t.stroke(be):t.stroke(),K==="double"){t.lineWidth=F/3;var Kr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(be):t.stroke(),t.globalCompositeOperation=Kr}t.setLineDash&&t.setLineDash([])}},Te=function(){i&&o.drawNodeOverlay(t,e,f,s,u)},Me=function(){i&&o.drawNodeUnderlay(t,e,f,s,u)},ze=function(){o.drawElementText(t,e,null,n)},Se=e.pstyle("ghost").value==="yes";if(Se){var Ie=e.pstyle("ghost-offset-x").pfValue,ot=e.pstyle("ghost-offset-y").pfValue,lt=e.pstyle("ghost-opacity").value,Qe=lt*v;t.translate(Ie,ot),Z(),xe(),he(lt*O),Ve(),rt(Qe,!0),re(lt*Y),ge(),Le(P!==0||L!==0),Ue(P!==0||L!==0),rt(Qe,!1),Ee(Qe),t.translate(-Ie,-ot)}g&&t.translate(-f.x,-f.y),Me(),g&&t.translate(f.x,f.y),Z(),xe(),he(),Ve(),rt(v,!0),re(),ge(),Le(P!==0||L!==0),Ue(P!==0||L!==0),rt(v,!1),Ee(),g&&t.translate(-f.x,-f.y),ze(),Te(),r&&t.translate(b.x1,b.y1)}};var Lm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,i,a,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,v=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),a==null||o==null){var g=n.padding();a=n.width()+2*g,o=n.height()+2*g}s.colorFillStyle(r,c[0],c[1],c[2],l),s.nodeShapes[f].draw(r,i.x,i.y,a+u*2,o+u*2,v),r.fill()}}}};li.drawNodeOverlay=Lm("overlay");li.drawNodeUnderlay=Lm("underlay");li.hasPie=function(t){return t=t[0],t._private.hasPie};li.hasStripe=function(t){return t=t[0],t._private.hasStripe};li.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),v=Math.min(c,f)/2,g,h=0,m=this.usePaths();if(m&&(u=0,l=0),a.units==="%"?v=v*a.pfValue:a.pfValue!==void 0&&(v=a.pfValue/2),o.units==="%"?g=v*o.pfValue:o.pfValue!==void 0&&(g=o.pfValue/2),!(g>=v))for(var w=1;w<=i.pieBackgroundN;w++){var b=e.pstyle("pie-"+w+"-background-size").value,C=e.pstyle("pie-"+w+"-background-color").value,E=e.pstyle("pie-"+w+"-background-opacity").value*r,x=b/100;x+h>1&&(x=1-h);var k=1.5*Math.PI+2*Math.PI*h;k+=s;var A=2*Math.PI*x,p=k+A;b===0||h>=1||h+x>1||(g===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,v,k,p),t.closePath()):(t.beginPath(),t.arc(u,l,v,k,p),t.arc(u,l,g,p,k,!0),t.closePath()),this.colorFillStyle(t,C[0],C[1],C[2],E),t.fill(),h+=x)}};li.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=n.x,o=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,v=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var g=s,h=u;v.units==="%"?(g=g*v.pfValue,h=h*v.pfValue):v.pfValue!==void 0&&(g=v.pfValue,h=v.pfValue),c&&(a=0,o=0),o-=g/2,a-=h/2;for(var m=1;m<=i.stripeBackgroundN;m++){var w=e.pstyle("stripe-"+m+"-background-size").value,b=e.pstyle("stripe-"+m+"-background-color").value,C=e.pstyle("stripe-"+m+"-background-opacity").value*r,E=w/100;E+l>1&&(E=1-l),!(w===0||l>=1||l+E>1)&&(t.beginPath(),t.rect(a,o+h*l,g,h*E),t.closePath(),this.colorFillStyle(t,b[0],b[1],b[2],C),t.fill(),l+=E)}t.restore()};var Tr={},UE=100;Tr.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Tr.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Tr.createGradientStyleFor=function(t,e,r,n,i){var a,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),v=Oi(l,f),g=Oi(c,f);a=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(v,g))}else{var h=o?{x:0,y:0}:r.position(),m=r.paddedWidth(),w=r.paddedHeight();a=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(m,w))}else if(r.isEdge()){var b=r.sourceEndpoint(),C=r.targetEndpoint();a=t.createLinearGradient(b.x,b.y,C.x,C.y)}else{var E=o?{x:0,y:0}:r.position(),x=r.paddedWidth(),k=r.paddedHeight(),A=x/2,p=k/2,I=r.pstyle("background-gradient-direction").value;switch(I){case"to-bottom":a=t.createLinearGradient(E.x,E.y-p,E.x,E.y+p);break;case"to-top":a=t.createLinearGradient(E.x,E.y+p,E.x,E.y-p);break;case"to-left":a=t.createLinearGradient(E.x+A,E.y,E.x-A,E.y);break;case"to-right":a=t.createLinearGradient(E.x-A,E.y,E.x+A,E.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(E.x-A,E.y-p,E.x+A,E.y+p);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(E.x-A,E.y+p,E.x+A,E.y-p);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(E.x+A,E.y-p,E.x-A,E.y+p);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(E.x+A,E.y+p,E.x-A,E.y-p);break}}if(!a)return null;for(var M=u.length===s.length,B=s.length,P=0;P<B;P++)a.addColorStop(M?u[P]:P/(B-1),"rgba("+s[P][0]+","+s[P][1]+","+s[P][2]+","+i+")");return a};Tr.gradientFillStyle=function(t,e,r,n){var i=this.createGradientStyleFor(t,"background",e,r,n);if(!i)return null;t.fillStyle=i};Tr.colorFillStyle=function(t,e,r,n,i){t.fillStyle="rgba("+e+","+r+","+n+","+i+")"};Tr.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],r)}};Tr.gradientStrokeStyle=function(t,e,r,n){var i=this.createGradientStyleFor(t,"line",e,r,n);if(!i)return null;t.strokeStyle=i};Tr.colorStrokeStyle=function(t,e,r,n,i){t.strokeStyle="rgba("+e+","+r+","+n+","+i+")"};Tr.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],r)}};Tr.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=i*o,l=a*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var v=0;v<e.CANVAS_LAYERS;v++)c=r.canvases[v],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";for(var v=0;v<e.BUFFER_COUNT;v++)c=r.bufferCanvases[v],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=o}};Tr.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Tr.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Tr.render=function(t){var e=this;t=t||xg();var r=e.cy,n=t.forcedContext,i=t.drawAllLayers,a=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),v=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,h=r.hasCompoundNodes(),m=e.hoverData.draggingEles,w=!!(e.hoverData.selecting||e.touchData.selecting);v=v&&!n&&e.motionBlurEnabled&&!w;var b=v;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),v&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var C=r.style(),E=r.zoom(),x=o!==void 0?o:E,k=r.pan(),A={x:k.x,y:k.y},p={zoom:E,pan:{x:k.x,y:k.y}},I=e.prevViewport,M=I===void 0||p.zoom!==I.zoom||p.pan.x!==I.pan.x||p.pan.y!==I.pan.y;!M&&!(m&&!h)&&(e.motionBlurPxRatio=1),s&&(A=s),x*=u,A.x*=u,A.y*=u;var B=e.getCachedZSortedEles();function P(re,Z,ue,ae,me){var Ae=re.globalCompositeOperation;re.globalCompositeOperation="destination-out",e.colorFillStyle(re,255,255,255,e.motionBlurTransparency),re.fillRect(Z,ue,ae,me),re.globalCompositeOperation=Ae}function L(re,Z){var ue,ae,me,Ae;!e.clearingMotionBlur&&(re===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||re===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(ue={x:k.x*g,y:k.y*g},ae=E*g,me=e.canvasWidth*g,Ae=e.canvasHeight*g):(ue=A,ae=x,me=e.canvasWidth,Ae=e.canvasHeight),re.setTransform(1,0,0,1,0,0),Z==="motionBlur"?P(re,0,0,me,Ae):!n&&(Z===void 0||Z)&&re.clearRect(0,0,me,Ae),i||(re.translate(ue.x,ue.y),re.scale(ae,ae)),s&&re.translate(s.x,s.y),o&&re.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var O=e.data.bufferContexts[e.TEXTURE_BUFFER];O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:O,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var p=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};p.mpan={x:(0-p.pan.x)/p.zoom,y:(0-p.pan.y)/p.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var N=l.contexts[e.NODE],z=e.textureCache.texture,p=e.textureCache.viewport;N.setTransform(1,0,0,1,0,0),v?P(N,0,0,p.width,p.height):N.clearRect(0,0,p.width,p.height);var W=C.core("outside-texture-bg-color").value,q=C.core("outside-texture-bg-opacity").value;e.colorFillStyle(N,W[0],W[1],W[2],q),N.fillRect(0,0,p.width,p.height);var E=r.zoom();L(N,!1),N.clearRect(p.mpan.x,p.mpan.y,p.width/p.zoom/u,p.height/p.zoom/u),N.drawImage(z,p.mpan.x,p.mpan.y,p.width/p.zoom/u,p.height/p.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var j=r.extent(),ie=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),ne=e.hideEdgesOnViewport&&ie,Y=[];if(Y[e.NODE]=!c[e.NODE]&&v&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,Y[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),Y[e.DRAG]=!c[e.DRAG]&&v&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,Y[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||a||Y[e.NODE]){var H=v&&!Y[e.NODE]&&g!==1,N=n||(H?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),G=v&&!H?"motionBlur":void 0;L(N,G),ne?e.drawCachedNodes(N,B.nondrag,u,j):e.drawLayeredElements(N,B.nondrag,u,j),e.debug&&e.drawDebugPoints(N,B.nondrag),!i&&!v&&(c[e.NODE]=!1)}if(!a&&(c[e.DRAG]||i||Y[e.DRAG])){var H=v&&!Y[e.DRAG]&&g!==1,N=n||(H?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);L(N,v&&!H?"motionBlur":void 0),ne?e.drawCachedNodes(N,B.drag,u,j):e.drawCachedElements(N,B.drag,u,j),e.debug&&e.drawDebugPoints(N,B.drag),!i&&!v&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,L),v&&g!==1){var K=l.contexts[e.NODE],V=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Q=l.contexts[e.DRAG],oe=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],he=function(Z,ue,ae){Z.setTransform(1,0,0,1,0,0),ae||!b?Z.clearRect(0,0,e.canvasWidth,e.canvasHeight):P(Z,0,0,e.canvasWidth,e.canvasHeight);var me=g;Z.drawImage(ue,0,0,e.canvasWidth*me,e.canvasHeight*me,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||Y[e.NODE])&&(he(K,V,Y[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||Y[e.DRAG])&&(he(Q,oe,Y[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=p,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),v&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},UE)),n||r.emit("render")};var $a;Tr.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,i=r.data,a=n.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,u=i.canvasNeedsRedraw,l=t.forcedContext;if(r.showFps||!o&&u[r.SELECT_BOX]&&!s){var c=l||i.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),v=a.core("selection-box-border-width").value/f;c.lineWidth=v,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),v>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),g=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(g.x,g.y,a.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var h=r.lastRedrawTime;if(r.showFps&&h){h=Math.round(h);var m=Math.round(1e3/h),w="1 frame = "+h+" ms = "+m+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!$a){var b=c.measureText(w);$a=b.actualBoundingBoxAscent}c.fillText(w,0,$a);var C=60;c.strokeRect(0,$a+10,250,20),c.fillRect(0,$a+10,250*Math.min(m/C,1),20)}s||(u[r.SELECT_BOX]=!1)}};function Qv(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function GE(t,e,r){var n=Qv(t,t.VERTEX_SHADER,e),i=Qv(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function jE(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function Yf(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function KE(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function XE(t,e,r,n,i){var a=n*r+e.x,o=i*r+e.y;return o=Math.round(t.canvasHeight-o),[a,o]}function YE(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function ZE(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Ci(t,e,r){var n=t[0]/255,i=t[1]/255,a=t[2]/255,o=e,s=r||new Array(4);return s[0]=n*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function Ji(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function QE(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function JE(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function Bm(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function Om(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function eS(t,e,r,n,i,a){switch(e){case t.FLOAT:return new Float32Array(r.buffer,a*n,i);case t.INT:return new Int32Array(r.buffer,a*n,i)}}function tS(t,e,r,n){var i=Bm(t,e),a=Xt(i,2),o=a[0],s=a[1],u=Om(t,s,n),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),l}function hn(t,e,r,n){var i=Bm(t,r),a=Xt(i,3),o=a[0],s=a[1],u=a[2],l=Om(t,s,e*o),c=o*u,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),s===t.FLOAT?t.vertexAttribPointer(n,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(n,o,s,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var v=new Array(e),g=0;g<e;g++)v[g]=eS(t,s,l,c,o,g);return f.dataArray=l,f.stride=c,f.size=o,f.getView=function(h){return v[h]},f.setPoint=function(h,m,w){var b=v[h];b[0]=m,b[1]=w},f.bufferSubData=function(h){t.bindBuffer(t.ARRAY_BUFFER,f),h?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,h*o):t.bufferSubData(t.ARRAY_BUFFER,0,l)},f}function rS(t,e,r){for(var n=9,i=new Float32Array(e*n),a=new Array(e),o=0;o<e;o++){var s=o*n*4;a[o]=new Float32Array(i.buffer,s,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,i.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=r+l;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,36,l*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(f){return a[f]},u.setData=function(f,v){a[v].set(f,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,i)},u}function nS(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,i,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var Jv=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function xc(){var t=new Jv(9);return Jv!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ep(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function iS(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],v=r[0],g=r[1],h=r[2],m=r[3],w=r[4],b=r[5],C=r[6],E=r[7],x=r[8];return t[0]=v*n+g*o+h*l,t[1]=v*i+g*s+h*c,t[2]=v*a+g*u+h*f,t[3]=m*n+w*o+b*l,t[4]=m*i+w*s+b*c,t[5]=m*a+w*u+b*f,t[6]=C*n+E*o+x*l,t[7]=C*i+E*s+x*c,t[8]=C*a+E*u+x*f,t}function Os(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],v=r[0],g=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=v*n+g*o+l,t[7]=v*i+g*s+c,t[8]=v*a+g*u+f,t}function tp(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],v=Math.sin(r),g=Math.cos(r);return t[0]=g*n+v*o,t[1]=g*i+v*s,t[2]=g*a+v*u,t[3]=g*o-v*n,t[4]=g*s-v*i,t[5]=g*u-v*a,t[6]=l,t[7]=c,t[8]=f,t}function cf(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function aS(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var oS=(function(){function t(e,r,n,i){oi(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,r,r),this.scratch=i(e,r,this.texHeight,"scratch")}return si(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,i=r.h,a=this.texHeight,o=this.texSize,s=a/i,u=n*s,l=i*s;return u>o&&(s=o/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(r,n,i){var a=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,v=l.texH,g=function(E,x){if(i&&x){var k=x.context,A=E.x,p=E.row,I=A,M=u*p;k.save(),k.translate(I,M),k.scale(c,c),i(k,n),k.restore()}},h=[null,null],m=function(){g(a.freePointer,a.canvas),h[0]={x:a.freePointer.x,y:a.freePointer.row*u,w:f,h:v},h[1]={x:a.freePointer.x+f,y:a.freePointer.row*u,w:0,h:v},a.freePointer.x+=f,a.freePointer.x==o&&(a.freePointer.x=0,a.freePointer.row++)},w=function(){var E=a.scratch,x=a.canvas;E.clear(),g({x:0,row:0},E);var k=o-a.freePointer.x,A=f-k,p=u;{var I=a.freePointer.x,M=a.freePointer.row*u,B=k;x.context.drawImage(E,0,0,B,p,I,M,B,p),h[0]={x:I,y:M,w:B,h:v}}{var P=k,L=(a.freePointer.row+1)*u,O=A;x&&x.context.drawImage(E,P,0,O,p,0,L,O,p),h[1]={x:0,y:L,w:O,h:v}}a.freePointer.x=A,a.freePointer.row++},b=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+f<=o)m();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(b(),m()):this.enableWrapping?w():(b(),m())}return this.keyToLocation.set(r,h),this.needsBuffer=!0,h}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,i=this.texRows,a=this.getScale(r),o=a.texW;return this.freePointer.x+o>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=JE(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),sS=(function(){function t(e,r,n,i){oi(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return si(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas;return new oS(r,n,i,a)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas,o=Math.floor(n/i);this.scratch=a(r,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,i){var a=this.styleKeyToAtlas.get(r);return a||(a=this.atlases[this.atlases.length-1],(!a||!a.canFit(n))&&(a&&a.lock(),a=this._createAtlas(),this.atlases.push(a)),a.draw(r,n,i),this.styleKeyToAtlas.set(r,a)),a}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var i=[],a=new Map,o=null,s=Dr(this.atlases),u;try{var l=function(){var f=u.value,v=f.getKeys(),g=uS(n,v);if(g.size===0)return i.push(f),v.forEach(function(k){return a.set(k,f)}),1;o||(o=r._createAtlas(),i.push(o));var h=Dr(v),m;try{for(h.s();!(m=h.n()).done;){var w=m.value;if(!g.has(w)){var b=f.getOffsets(w),C=Xt(b,2),E=C[0],x=C[1];o.canFit({w:E.w+x.w,h:E.h})||(o.lock(),o=r._createAtlas(),i.push(o)),f.canvas&&(r._copyTextureToNewAtlas(w,f,o),a.set(w,o))}}}catch(k){h.e(k)}finally{h.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=a,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,i){var a=n.getOffsets(r),o=Xt(a,2),s=o[0],u=o[1];if(u.w===0)i.draw(r,s,function(v){v.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(r,{w:c,h:f},function(v){v.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function uS(t,e){return t.intersection?t.intersection(e):new Set(Vs(t).filter(function(r){return e.has(r)}))}var lS=(function(){function t(e,r){oi(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return si(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var i=this.globalOptions,a=i.webglTexSize,o=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(o),l=new sS(this.r,a,s,u);this.collections.set(r,l)}},{key:"addRenderType",value:function(r,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var a=this.collections.get(i),o=tt({type:r,atlasCollection:a},n);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,i=-1,a=null;return function(o,s,u,l){return l?((!a||s!=n||u!=i)&&(n=s,i=u,a=r(o,s,u)),a):r(o,s,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.forceRedraw,o=a===void 0?!1:a,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,f=!1,v=!1,g=Dr(r),h;try{for(g.s();!(h=g.n()).done;){var m=h.value;if(u(m)){var w=Dr(this.renderTypes.values()),b;try{var C=function(){var x=b.value,k=x.type;if(c(k)){var A=n.collections.get(x.collection),p=x.getKey(m),I=Array.isArray(p)?p:[p];if(o)I.forEach(function(L){return A.markKeyForGC(L)}),v=!0;else{var M=x.getID?x.getID(m):m.id(),B=n._key(k,M),P=n.typeAndIdToKey.get(B);P!==void 0&&!ZE(I,P)&&(f=!0,n.typeAndIdToKey.delete(B),P.forEach(function(L){return A.markKeyForGC(L)}))}}};for(w.s();!(b=w.n()).done;)C()}catch(E){w.e(E)}finally{w.f()}}}}catch(E){g.e(E)}finally{g.f()}return v&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=Dr(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;i.gc()}}catch(a){r.e(a)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,i,a){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),u=!1,l=s.draw(a,i,function(v){o.drawClipped?(v.save(),v.beginPath(),v.rect(0,0,i.w,i.h),v.clip(),o.drawElement(v,r,i,!0,!0),v.restore()):o.drawElement(v,r,i,!0,!0),u=!0});if(u){var c=o.getID?o.getID(r):r.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(a):this.typeAndIdToKey.set(f,[a])}return l}},{key:"getAtlasInfo",value:function(r,n){var i=this,a=this.renderTypes.get(n),o=a.getKey(r),s=Array.isArray(o)?o:[o];return s.map(function(u){var l=a.getBoundingBox(r,u),c=i.getOrCreateAtlas(r,n,l,u),f=c.getOffsets(u),v=Xt(f,2),g=v[0],h=v[1];return{atlas:c,tex:g,tex1:g,tex2:h,bb:l}})}},{key:"getDebugInfo",value:function(){var r=[],n=Dr(this.collections),i;try{for(n.s();!(i=n.n()).done;){var a=Xt(i.value,2),o=a[0],s=a[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;r.push({type:o,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return r}}])})(),cS=(function(){function t(e){oi(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return si(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])})(),fS=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,dS=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,hS=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,vS=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,ro={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Js={IGNORE:1,USE_BB:2},Cc=0,rp=1,np=2,Ec=3,ea=4,vs=5,Wa=6,Ua=7,pS=(function(){function t(e,r,n){oi(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=jE,this.atlasManager=new lS(e,n),this.batchManager=new cS(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(ro.SCREEN),this.pickingProgram=this._createShaderProgram(ro.PICKING),this.vao=this._createVAO()}return si(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,a=this.atlasManager;return i?a.invalidate(r,{filterType:function(s){return s===i},forceRedraw:!0}):a.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Cc,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(ea," || aVertType == ").concat(Ua,` 
             || aVertType == `).concat(vs," || aVertType == ").concat(Wa,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(rp,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(np,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Ec,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),a=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(a.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(fS,`
      `).concat(dS,`
      `).concat(hS,`
      `).concat(vS,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Cc,`) {
          // look up the texel from the texture unit
          `).concat(a.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Ec,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(ea,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(ea," || vVertType == ").concat(Ua,` 
          || vVertType == `).concat(vs," || vVertType == ").concat(Wa,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(ea,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Ua,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Ua,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=GE(n,i,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,i=this.gl,a=this.program,o=i.createVertexArray();return i.bindVertexArray(o),tS(i,"vec2",a.aPosition,r),this.transformBuffer=rS(i,n,a.aTransform),this.indexBuffer=hn(i,n,"vec4",a.aIndex),this.vertTypeBuffer=hn(i,n,"int",a.aVertType),this.atlasIdBuffer=hn(i,n,"int",a.aAtlasId),this.texBuffer=hn(i,n,"vec4",a.aTex),this.pointAPointBBuffer=hn(i,n,"vec4",a.aPointAPointB),this.pointCPointDBuffer=hn(i,n,"vec4",a.aPointCPointD),this.lineWidthBuffer=hn(i,n,"vec2",a.aLineWidth),this.colorBuffer=hn(i,n,"vec4",a.aColor),this.cornerRadiusBuffer=hn(i,n,"vec4",a.aCornerRadius),this.borderColorBuffer=hn(i,n,"vec4",a.aBorderColor),i.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return Gn(n,"Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ro.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,i){var a=this.atlasManager,o=this.batchManager,s=a.getRenderTypeOpts(i);if(this._isVisible(r,s)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(r);if(u===Js.IGNORE)return;if(u==Js.USE_BB){this.drawPickingRectangle(r,n,i);return}}var l=a.getAtlasInfo(r,i),c=Dr(l),f;try{for(c.s();!(f=c.n()).done;){var v=f.value,g=v.atlas,h=v.tex1,m=v.tex2;o.canAddToCurrentBatch(g)||this.endBatch();for(var w=o.getAtlasIndexForBatch(g),b=0,C=[[h,!0],[m,!1]];b<C.length;b++){var E=Xt(C[b],2),x=E[0],k=E[1];if(x.w!=0){var A=this.instanceCount;this.vertTypeBuffer.getView(A)[0]=Cc;var p=this.indexBuffer.getView(A);Ji(n,p);var I=this.atlasIdBuffer.getView(A);I[0]=w;var M=this.texBuffer.getView(A);M[0]=x.x,M[1]=x.y,M[2]=x.w,M[3]=x.h;var B=this.transformBuffer.getMatrixView(A);this.setTransformMatrix(r,B,s,v,k),this.instanceCount++,k||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(P){c.e(P)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=r.pstyle(i.shapeProps.padding).pfValue),a){var u=a.bb,l=a.tex1,c=a.tex2,f=l.w/(l.w+c.w);o||(f=1-f);var v=this._getAdjustedBB(u,s,o,f);this._applyTransformMatrix(n,v,i,r)}else{var g=i.getBoundingBox(r),h=this._getAdjustedBB(g,s,!0,1);this._applyTransformMatrix(n,h,i,r)}}},{key:"_applyTransformMatrix",value:function(r,n,i,a){var o,s;ep(r);var u=i.getRotation?i.getRotation(a):0;if(u!==0){var l=i.getRotationPoint(a),c=l.x,f=l.y;Os(r,r,[c,f]),tp(r,r,u);var v=i.getRotationOffset(a);o=v.x+(n.xOffset||0),s=v.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Os(r,r,[o,s]),cf(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,i,a){var o=r.x1,s=r.y1,u=r.w,l=r.h,c=r.yOffset;n&&(o-=n,s-=n,u+=2*n,l+=2*n);var f=0,v=u*a;return i&&a<1?u=v:!i&&a<1&&(f=u-v,o+=f,u=v),{x1:o,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,i){var a=this.atlasManager.getRenderTypeOpts(i),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=ea;var s=this.indexBuffer.getView(o);Ji(n,s);var u=this.colorBuffer.getView(o);Ci([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,l,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,i){var a=this.simpleShapeOptions.get(i);if(this._isVisible(r,a)){var o=a.shapeProps,s=this._getVertTypeForShape(r,o.shape);if(s===void 0||a.isSimple&&!a.isSimple(r)){this.drawTexture(r,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===vs||s===Wa){var l=a.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===Wa&&(f[0]=0,f[2]=0)}var v=this.indexBuffer.getView(u);Ji(n,v);var g=r.pstyle(o.color).value,h=r.pstyle(o.opacity).value,m=this.colorBuffer.getView(u);Ci(g,h,m);var w=this.lineWidthBuffer.getView(u);if(w[0]=0,w[1]=0,o.border){var b=r.pstyle("border-width").value;if(b>0){var C=r.pstyle("border-color").value,E=r.pstyle("border-opacity").value,x=this.borderColorBuffer.getView(u);Ci(C,E,x);var k=r.pstyle("border-position").value;if(k==="inside")w[0]=0,w[1]=-b;else if(k==="outside")w[0]=b,w[1]=0;else{var A=b/2;w[0]=A,w[1]=-A}}}var p=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,p,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var i=r.pstyle(n).value;switch(i){case"rectangle":return ea;case"ellipse":return Ua;case"roundrectangle":case"round-rectangle":return vs;case"bottom-round-rectangle":return Wa;default:return}}},{key:"_getCornerRadius",value:function(r,n,i){var a=i.w,o=i.h;if(r.pstyle(n).value==="auto")return ri(a,o);var s=r.pstyle(n).pfValue,u=a/2,l=o/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(r,n,i){if(r.visible()){var a=r._private.rscratch,o,s,u;if(i==="source"?(o=a.arrowStartX,s=a.arrowStartY,u=a.srcArrowAngle):(o=a.arrowEndX,s=a.arrowEndY,u=a.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=r.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=r.pstyle(i+"-arrow-color").value,f=r.pstyle("opacity").value,v=r.pstyle("line-opacity").value,g=f*v,h=r.pstyle("width").pfValue,m=r.pstyle("arrow-scale").value,w=this.r.getArrowWidth(h,m),b=this.instanceCount,C=this.transformBuffer.getMatrixView(b);ep(C),Os(C,C,[o,s]),cf(C,C,[w,w]),tp(C,C,u),this.vertTypeBuffer.getView(b)[0]=Ec;var E=this.indexBuffer.getView(b);Ji(n,E);var x=this.colorBuffer.getView(b);Ci(c,g,x),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var i=this._getEdgePoints(r);if(i){var a=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,s=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,l=a*o;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=rp;var f=this.indexBuffer.getView(c);Ji(n,f);var v=this.colorBuffer.getView(c);Ci(u,l,v);var g=this.lineWidthBuffer.getView(c);g[0]=s;var h=this.pointAPointBBuffer.getView(c);h[0]=i[0],h[1]=i[1],h[2]=i[2],h[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var m=0;m<i.length-2;m+=2){var w=this.instanceCount;this.vertTypeBuffer.getView(w)[0]=np;var b=this.indexBuffer.getView(w);Ji(n,b);var C=this.colorBuffer.getView(w);Ci(u,l,C);var E=this.lineWidthBuffer.getView(w);E[0]=s;var x=i[m-2],k=i[m-1],A=i[m],p=i[m+1],I=i[m+2],M=i[m+3],B=i[m+4],P=i[m+5];m==0&&(x=2*A-I+.001,k=2*p-M+.001),m==i.length-4&&(B=2*I-A+.001,P=2*M-p+.001);var L=this.pointAPointBBuffer.getView(w);L[0]=x,L[1]=k,L[2]=A,L[3]=p;var O=this.pointCPointDBuffer.getView(w);O[0]=I,O[1]=M,O[2]=B,O[3]=P,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var n=r._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(this._isValidEdge(r)){var i=n.allpts;if(i.length==4)return i;var a=this._getNumSegments(r);return this._getCurveSegmentPoints(i,a)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var i=Array((n+1)*2),a=0;a<=n;a++)if(a==0)i[0]=r[0],i[1]=r[1];else if(a==n)i[a*2]=r[r.length-2],i[a*2+1]=r[r.length-1];else{var o=a/n;this._setCurvePoint(r,o,i,a*2)}return i}},{key:"_setCurvePoint",value:function(r,n,i,a){if(r.length<=2)i[a]=r[0],i[a+1]=r[1];else{for(var o=Array(r.length-2),s=0;s<o.length;s+=2){var u=(1-n)*r[s]+n*r[s+2],l=(1-n)*r[s+1]+n*r[s+3];o[s]=u,o[s+1]=l}return this._setCurvePoint(o,n,i,a)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(n);var s=Dr(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(a)}}catch(h){s.e(h)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var v=0;v<c.length;v++)r.activeTexture(r.TEXTURE0+v),r.bindTexture(r.TEXTURE_2D,c[v].texture),r.uniform1i(o.uTextures[v],v);r.uniform1f(o.uZoom,KE(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var g=Ci(this.bgColor,1);r.uniform4fv(o.uBGColor,g),r.drawArraysInstanced(r.TRIANGLES,0,i,a),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:a,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(o,s){return o+s.atlasCount},0),i=this.batchDebugInfo,a=i.reduce(function(o,s){return o+s.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:a}}}])})(),Rm={};Rm.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=gS(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=nS(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new pS(r,n,t);var i=function(f){return function(v){return r.getTextAngle(v,f)}},a=function(f){return function(v){var g=v.pstyle(f);return g&&g.value}},o=function(f){return function(v){return v.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var v=f.pstyle("text-events").strValue==="yes";return v?Js.USE_BB:Js.IGNORE},u=function(f){var v=f.position(),g=v.x,h=v.y,m=f.outerWidth(),w=f.outerHeight();return{w:m,h:w,x1:g-m/2,y1:h-w/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:YE,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:Sc(e.getLabelKey,null),getBoundingBox:Tc(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:a("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:Sc(e.getSourceLabelKey,"source"),getBoundingBox:Tc(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:a("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:Sc(e.getTargetLabelKey,"target"),getBoundingBox:Tc(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:a("target-label")});var l=Io(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var v=!1;f&&f.length>0&&(v|=r.drawing.invalidate(f)),v&&l()}),mS(r)};function gS(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return cg(r)}function Nm(t,e){var r=t._private.rscratch;return Ar(r,"labelWrapCachedLines",e)||[]}var Sc=function(e,r){return function(n){var i=e(n),a=Nm(n,r);return a.length>1?a.map(function(o,s){return"".concat(i,"_").concat(s)}):i}},Tc=function(e,r){return function(n,i){var a=e(n);if(typeof i=="string"){var o=i.indexOf("_");if(o>0){var s=Number(i.substring(o+1)),u=Nm(n,r),l=a.h/u.length,c=l*s,f=a.y1+c;return{x1:a.x1,w:a.w,y1:f,h:l,yOffset:c}}}return a}};function mS(t){{var e=t.render;t.render=function(a){a=a||{};var o=t.cy;t.webgl&&(o.zoom()>Dm?(yS(t),e.call(t,a)):(bS(t),zm(t,a,ro.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(a){r.call(t,a),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(a,o,s,u){return TS(t,a,o)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var i=t.notify;t.notify=function(a,o){i.call(t,a,o),a==="viewport"||a==="bounds"?t.pickingFrameBuffer.needsDraw=!0:a==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function yS(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function bS(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function wS(t){var e=t.canvasWidth,r=t.canvasHeight,n=Yf(t),i=n.pan,a=n.zoom,o=xc();Os(o,o,[i.x,i.y]),cf(o,o,[a,a]);var s=xc();aS(s,e,r);var u=xc();return iS(u,s,o),u}function Fm(t,e){var r=t.canvasWidth,n=t.canvasHeight,i=Yf(t),a=i.pan,o=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(a.x,a.y),e.scale(o,o)}function xS(t,e){t.drawSelectionRectangle(e,function(r){return Fm(t,r)})}function CS(t){var e=t.data.contexts[t.NODE];e.save(),Fm(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function ES(t){var e=function(i,a,o){for(var s=i.atlasManager.getAtlasCollection(a),u=t.data.contexts[t.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],v=f.canvas;if(v){var g=v.width,h=v.height,m=g*c,w=v.height*o,b=.4;u.save(),u.scale(b,b),u.drawImage(v,m,w),u.strokeStyle="black",u.rect(m,w,g,h),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function SS(t,e,r,n,i){var a,o,s,u,l=Yf(t),c=l.pan,f=l.zoom;{var v=XE(t,c,f,e,r),g=Xt(v,2),h=g[0],m=g[1],w=6;a=h-w/2,o=m-w/2,s=w,u=w}if(s===0||u===0)return[];var b=t.data.contexts[t.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),zm(t,null,ro.PICKING),t.pickingFrameBuffer.needsDraw=!1);var C=s*u,E=new Uint8Array(C*4);b.readPixels(a,o,s,u,b.RGBA,b.UNSIGNED_BYTE,E),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var x=new Set,k=0;k<C;k++){var A=E.slice(k*4,k*4+4),p=QE(A)-1;p>=0&&x.add(p)}return x}function TS(t,e,r){var n=SS(t,e,r),i=t.getCachedZSortedEles(),a,o,s=Dr(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!a&&c.isNode()&&(a=c),!o&&c.isEdge()&&(o=c),a&&o)break}}catch(f){s.e(f)}finally{s.f()}return[a,o].filter(Boolean)}function kc(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function zm(t,e,r){var n;t.webglDebug&&(n=performance.now());var i=t.drawing,a=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&xS(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=wS(t),u=t.getCachedZSortedEles();if(a=u.length,i.startFrame(s,r),r.screen){for(var l=0;l<u.nondrag.length;l++)kc(t,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)kc(t,c,u.drag[c])}else if(r.picking)for(var f=0;f<u.length;f++)kc(t,f,u[f]);i.endFrame(),r.screen&&t.webglDebugShowAtlases&&(CS(t),ES(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var v=performance.now(),g=!1,h=Math.ceil(v-n),m=i.getDebugInfo(),w=["".concat(a," elements"),"".concat(m.totalInstances," instances"),"".concat(m.batchCount," batches"),"".concat(m.totalAtlases," atlases"),"".concat(m.wrappedCount," wrapped textures"),"".concat(m.simpleCount," simple shapes")].join(", ");if(g)console.log("WebGL (".concat(r.name,") - time ").concat(h,"ms, ").concat(w));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(h,"ms")),console.log("Totals:"),console.log("  ".concat(w)),console.log("Texture Atlases Used:");var b=m.atlasInfo,C=Dr(b),E;try{for(C.s();!(E=C.n()).done;){var x=E.value;console.log("  ".concat(x.type,": ").concat(x.keyCount," keys, ").concat(x.atlasCount," atlases"))}}catch(k){C.e(k)}finally{C.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,i.gc())}var ci={};ci.drawPolygonPath=function(t,e,r,n,i,a){var o=n/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*a[0],r+s*a[1]);for(var u=1;u<a.length/2;u++)t.lineTo(e+o*a[u*2],r+s*a[u*2+1]);t.closePath()};ci.drawRoundPolygonPath=function(t,e,r,n,i,a,o){o.forEach(function(s){return wm(t,s)}),t.closePath()};ci.drawRoundRectanglePath=function(t,e,r,n,i,a){var o=n/2,s=i/2,u=a==="auto"?ri(n,i):Math.min(a,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,u),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.arcTo(e-o,r-s,e,r-s,u),t.lineTo(e,r-s),t.closePath()};ci.drawBottomRoundRectanglePath=function(t,e,r,n,i,a){var o=n/2,s=i/2,u=a==="auto"?ri(n,i):a;t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()};ci.drawCutRectanglePath=function(t,e,r,n,i,a,o){var s=n/2,u=i/2,l=o==="auto"?Rf():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+l,r-u),t.lineTo(e+s-l,r-u),t.lineTo(e+s,r-u+l),t.lineTo(e+s,r+u-l),t.lineTo(e+s-l,r+u),t.lineTo(e-s+l,r+u),t.lineTo(e-s,r+u-l),t.lineTo(e-s,r-u+l),t.closePath()};ci.drawBarrelPath=function(t,e,r,n,i){var a=n/2,o=i/2,s=e-a,u=e+a,l=r-o,c=r+o,f=Xc(n,i),v=f.widthOffset,g=f.heightOffset,h=f.ctrlPtOffsetPct*v;t.beginPath&&t.beginPath(),t.moveTo(s,l+g),t.lineTo(s,c-g),t.quadraticCurveTo(s+h,c,s+v,c),t.lineTo(u-v,c),t.quadraticCurveTo(u-h,c,u,c-g),t.lineTo(u,l+g),t.quadraticCurveTo(u-h,l,u-v,l),t.lineTo(s+v,l),t.quadraticCurveTo(s+h,l,s,l+g),t.closePath()};var ip=Math.sin(0),ap=Math.cos(0),ff={},df={},qm=Math.PI/40;for(var ta=0*Math.PI;ta<2*Math.PI;ta+=qm)ff[ta]=Math.sin(ta),df[ta]=Math.cos(ta);ci.drawEllipsePath=function(t,e,r,n,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=qm)a=e-s*ff[l]*ip+s*df[l]*ap,o=r+u*df[l]*ip+u*ff[l]*ap,l===0?t.moveTo(a,o):t.lineTo(a,o);t.closePath()};var No={};No.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};No.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),i=this.findContainerClientCoords(),a=t.full?Math.ceil(n.w):i[2],o=t.full?Math.ceil(n.h):i[3],s=Be(t.maxWidth)||Be(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)a*=t.scale,o*=t.scale,l=t.scale;else if(s){var c=1/0,f=1/0;Be(t.maxWidth)&&(c=l*t.maxWidth/a),Be(t.maxHeight)&&(f=l*t.maxHeight/o),l=Math.min(c,f),a*=l,o*=l}s||(a*=u,o*=u,l*=u);var v=document.createElement("canvas");v.width=a,v.height=o,v.style.width=a+"px",v.style.height=o+"px";var g=v.getContext("2d");if(a>0&&o>0){g.clearRect(0,0,a,o),g.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)g.translate(-n.x1*l,-n.y1*l),g.scale(l,l),this.drawElements(g,h),g.scale(1/l,1/l),g.translate(n.x1*l,n.y1*l);else{var m=e.pan(),w={x:m.x*l,y:m.y*l};l*=e.zoom(),g.translate(w.x,w.y),g.scale(l,l),this.drawElements(g,h),g.scale(1/l,1/l),g.translate(-w.x,-w.y)}t.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=t.bg,g.rect(0,0,a,o),g.fill())}return v};function kS(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:e})}function op(t){var e=t.indexOf(",");return t.substr(e+1)}function Vm(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Sa(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){a(o)}});case"blob":return kS(op(n()),r);case"base64":return op(n());case"base64uri":default:return n()}}No.png=function(t){return Vm(t,this.bufferCanvasImage(t),"image/png")};No.jpg=function(t){return Vm(t,this.bufferCanvasImage(t),"image/jpeg")};var Hm={};Hm.nodeShapeImpl=function(t,e,r,n,i,a,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,i,a);case"polygon":return this.drawPolygonPath(e,r,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,i,a,s);case"barrel":return this.drawBarrelPath(e,r,n,i,a)}};var AS=$m,ht=$m.prototype;ht.CANVAS_LAYERS=3;ht.SELECT_BOX=0;ht.DRAG=1;ht.NODE=2;ht.WEBGL=3;ht.CANVAS_TYPES=["2d","2d","2d","webgl2"];ht.BUFFER_COUNT=3;ht.TEXTURE_BUFFER=0;ht.MOTIONBLUR_BUFFER_NODE=1;ht.MOTIONBLUR_BUFFER_DRAG=2;function $m(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(ht.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(ht.CANVAS_LAYERS),contexts:new Array(ht.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ht.CANVAS_LAYERS),bufferCanvases:new Array(ht.BUFFER_COUNT),bufferContexts:new Array(ht.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=a,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=a;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};xb()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<ht.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=ht.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||Ft("Could not create canvas of type "+f),Object.keys(u).forEach(function(re){c.style[re]=u[re]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(ht.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ht.NODE].setAttribute("data-id","layer"+ht.NODE+"-node"),e.data.canvases[ht.SELECT_BOX].setAttribute("data-id","layer"+ht.SELECT_BOX+"-selectbox"),e.data.canvases[ht.DRAG].setAttribute("data-id","layer"+ht.DRAG+"-drag"),e.data.canvases[ht.WEBGL]&&e.data.canvases[ht.WEBGL].setAttribute("data-id","layer"+ht.WEBGL+"-webgl");for(var l=0;l<ht.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var v=Sr(),g=function(Z){return{x:(Z.x1+Z.x2)/2,y:(Z.y1+Z.y2)/2}},h=function(Z){return{x:-Z.w/2,y:-Z.h/2}},m=function(Z){var ue=Z[0]._private,ae=ue.oldBackgroundTimestamp===ue.backgroundTimestamp;return!ae},w=function(Z){return Z[0]._private.nodeKey},b=function(Z){return Z[0]._private.labelStyleKey},C=function(Z){return Z[0]._private.sourceLabelStyleKey},E=function(Z){return Z[0]._private.targetLabelStyleKey},x=function(Z,ue,ae,me,Ae){return e.drawElement(Z,ue,ae,!1,!1,Ae)},k=function(Z,ue,ae,me,Ae){return e.drawElementText(Z,ue,ae,me,"main",Ae)},A=function(Z,ue,ae,me,Ae){return e.drawElementText(Z,ue,ae,me,"source",Ae)},p=function(Z,ue,ae,me,Ae){return e.drawElementText(Z,ue,ae,me,"target",Ae)},I=function(Z){return Z.boundingBox(),Z[0]._private.bodyBounds},M=function(Z){return Z.boundingBox(),Z[0]._private.labelBounds.main||v},B=function(Z){return Z.boundingBox(),Z[0]._private.labelBounds.source||v},P=function(Z){return Z.boundingBox(),Z[0]._private.labelBounds.target||v},L=function(Z,ue){return ue},O=function(Z){return g(I(Z))},N=function(Z,ue,ae){var me=Z?Z+"-":"";return{x:ue.x+ae.pstyle(me+"text-margin-x").pfValue,y:ue.y+ae.pstyle(me+"text-margin-y").pfValue}},z=function(Z,ue,ae){var me=Z[0]._private.rscratch;return{x:me[ue],y:me[ae]}},W=function(Z){return N("",z(Z,"labelX","labelY"),Z)},q=function(Z){return N("source",z(Z,"sourceLabelX","sourceLabelY"),Z)},j=function(Z){return N("target",z(Z,"targetLabelX","targetLabelY"),Z)},ie=function(Z){return h(I(Z))},ne=function(Z){return h(B(Z))},Y=function(Z){return h(P(Z))},H=function(Z){var ue=M(Z),ae=h(M(Z));if(Z.isNode()){switch(Z.pstyle("text-halign").value){case"left":ae.x=-ue.w-(ue.leftPad||0);break;case"right":ae.x=-(ue.rightPad||0);break}switch(Z.pstyle("text-valign").value){case"top":ae.y=-ue.h-(ue.topPad||0);break;case"bottom":ae.y=-(ue.botPad||0);break}}return ae},G=e.data.eleTxrCache=new Qa(e,{getKey:w,doesEleInvalidateKey:m,drawElement:x,getBoundingBox:I,getRotationPoint:O,getRotationOffset:ie,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),K=e.data.lblTxrCache=new Qa(e,{getKey:b,drawElement:k,getBoundingBox:M,getRotationPoint:W,getRotationOffset:H,isVisible:L}),V=e.data.slbTxrCache=new Qa(e,{getKey:C,drawElement:A,getBoundingBox:B,getRotationPoint:q,getRotationOffset:ne,isVisible:L}),Q=e.data.tlbTxrCache=new Qa(e,{getKey:E,drawElement:p,getBoundingBox:P,getRotationPoint:j,getRotationOffset:Y,isVisible:L}),oe=e.data.lyrTxrCache=new Mm(e);e.onUpdateEleCalcs(function(Z,ue){G.invalidateElements(ue),K.invalidateElements(ue),V.invalidateElements(ue),Q.invalidateElements(ue),oe.invalidateElements(ue);for(var ae=0;ae<ue.length;ae++){var me=ue[ae]._private;me.oldBackgroundTimestamp=me.backgroundTimestamp}});var he=function(Z){for(var ue=0;ue<Z.length;ue++)oe.enqueueElementRefinement(Z[ue].ele)};G.onDequeue(he),K.onDequeue(he),V.onDequeue(he),Q.onDequeue(he),t.webgl&&e.initWebgl(t,{getStyleKey:w,getLabelKey:b,getSourceLabelKey:C,getTargetLabelKey:E,drawElement:x,drawLabel:k,drawSourceLabel:A,drawTargetLabel:p,getElementBox:I,getLabelBox:M,getSourceLabelBox:B,getTargetLabelBox:P,getElementRotationPoint:O,getElementRotationOffset:ie,getLabelRotationPoint:W,getSourceLabelRotationPoint:q,getTargetLabelRotationPoint:j,getLabelRotationOffset:H,getSourceLabelRotationOffset:ne,getTargetLabelRotationOffset:Y})}ht.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[ht.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[ht.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[ht.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var _S=typeof Path2D<"u";ht.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};ht.usePaths=function(){return _S&&this.pathsEnabled};ht.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};ht.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};ht.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":Jt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),i=n.document;r=i.createElement("canvas"),r.width=t,r.height=e}return r};[Im,En,Fn,Xf,Hi,li,Tr,Rm,ci,No,Hm].forEach(function(t){tt(ht,t)});var DS=[{name:"null",impl:mm},{name:"base",impl:Am},{name:"canvas",impl:AS}],MS=[{type:"layout",extensions:tE},{type:"renderer",extensions:DS}],Wm={},Um={};function Gm(t,e,r){var n=r,i=function(I){Tt("Can not register `"+e+"` for `"+t+"` since `"+I+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(bo.prototype[e])return i(e);bo.prototype[e]=r}else if(t==="collection"){if(cr.prototype[e])return i(e);cr.prototype[e]=r}else if(t==="layout"){for(var a=function(I){this.options=I,r.call(this,I),xt(this._private)||(this._private={}),this._private.cy=I.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(r.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var p=this.options;if(p&&p.animate){var I=this.animations;if(I)for(var M=0;M<I.length;M++)I[M].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(I){return I._private.cy},v={addEventFields:function(I,M){M.layout=I,M.cy=f(I),M.target=I},bubble:function(){return!0},parent:function(I){return f(I)}};tt(o,{createEmitter:function(){return this._private.emitter=new Cu(v,this),this},emitter:function(){return this._private.emitter},on:function(I,M){return this.emitter().on(I,M),this},one:function(I,M){return this.emitter().one(I,M),this},once:function(I,M){return this.emitter().one(I,M),this},removeListener:function(I,M){return this.emitter().removeListener(I,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(I,M){return this.emitter().emit(I,M),this}}),St.eventAliasesOn(o),n=a}else if(t==="renderer"&&e!=="null"&&e!=="base"){var g=jm("renderer","base"),h=g.prototype,m=r,w=r.prototype,b=function(){g.apply(this,arguments),m.apply(this,arguments)},C=b.prototype;for(var E in h){var x=h[E],k=w[E]!=null;if(k)return i(E);C[E]=x}for(var A in w)C[A]=w[A];h.clientFunctions.forEach(function(p){C[p]=C[p]||function(){Ft("Renderer does not implement `renderer."+p+"()` on its prototype")}}),n=b}else if(t==="__proto__"||t==="constructor"||t==="prototype")return Ft(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return fg({map:Wm,keys:[t,e],value:n})}function jm(t,e){return dg({map:Wm,keys:[t,e]})}function IS(t,e,r,n,i){return fg({map:Um,keys:[t,e,r,n],value:i})}function PS(t,e,r,n){return dg({map:Um,keys:[t,e,r,n]})}var hf=function(){if(arguments.length===2)return jm.apply(null,arguments);if(arguments.length===3)return Gm.apply(null,arguments);if(arguments.length===4)return PS.apply(null,arguments);if(arguments.length===5)return IS.apply(null,arguments);Ft("Invalid extension access syntax")};bo.prototype.extension=hf;MS.forEach(function(t){t.extensions.forEach(function(e){Gm(t.type,e.name,e.impl)})});var eu=function(){if(!(this instanceof eu))return new eu;this.length=0},Fi=eu.prototype;Fi.instanceString=function(){return"stylesheet"};Fi.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Fi.css=function(t,e){var r=this.length-1;if(Ze(t))this[r].properties.push({name:t,value:e});else if(xt(t))for(var n=t,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(s!=null){var u=nr.properties[o]||nr.properties[du(o)];if(u!=null){var l=u.name,c=s;this[r].properties.push({name:l,value:c})}}}return this};Fi.style=Fi.css;Fi.generateStyle=function(t){var e=new nr(t);return this.appendToStyle(e)};Fi.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,i=r.properties;t.selector(n);for(var a=0;a<i.length;a++){var o=i[a];t.css(o.name,o.value)}}return t};var LS="3.33.1",wn=function(e){if(e===void 0&&(e={}),xt(e))return new bo(e);if(Ze(e))return hf.apply(hf,arguments)};wn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(wn),t.apply(null,e),this};wn.warnings=function(t){return bg(t)};wn.version=LS;wn.stylesheet=wn.Stylesheet=eu;var Rs={exports:{}},BS=Rs.exports,sp;function OS(){return sp||(sp=1,(function(t,e){(function(n,i){t.exports=i()})(BS,function(){return(function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.i=function(a){return a},i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=11)})([(function(r,n,i){r.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var o=arguments.length,s=Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(l){Object.keys(l).forEach(function(c){return a[c]=l[c]})}),a}}),(function(r,n,i){var a=i(0),o=Object.freeze({source:null,target:null,length:80,coeff:2e-4,weight:1});function s(l){return a({},o,l)}function u(l){var c=l.source,f=l.target,v=l.length<0?o.length:l.length,g=f.pos.x-c.pos.x,h=f.pos.y-c.pos.y,m=Math.sqrt(g*g+h*h);m===0&&(g=(Math.random()-.5)/50,h=(Math.random()-.5)/50,m=Math.sqrt(g*g+h*h));var w=m-v,b=(!l.coeff||l.coeff<0?o.springCoeff:l.coeff)*w/m*l.weight;c.force.x+=b*g,c.force.y+=b*h,f.force.x-=b*g,f.force.y-=b*h}r.exports={makeSpring:s,applySpring:u}}),(function(r,n,i){var a=(function(){function N(z,W){for(var q=0;q<W.length;q++){var j=W[q];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(z,j.key,j)}}return function(z,W,q){return W&&N(z.prototype,W),q&&N(z,q),z}})();function o(N,z){if(!(N instanceof z))throw new TypeError("Cannot call a class as a function")}function s(N,z){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:N}function u(N,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);N.prototype=Object.create(z&&z.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(N,z):N.__proto__=z)}var l=i(13),c=i(0),f=i(4),v=i(10),g=v.tick,h=i(7),m=h.makeQuadtree,w=i(3),b=w.makeBody,C=i(1),E=C.makeSpring,x=function(z){return typeof z=="function"},k=function(z){return z.isParent()},A=function(z){return!k(z)},p=function(z){return k(z.source())||k(z.target())},I=function(z){return!p(z)},M=function(z){return z.scratch("euler").body},B=function(z){return k(z)?z.descendants().filter(A):z},P=function(z){var W=z.scratch("euler");return W||(W={},z.scratch("euler",W)),W},L=function(z,W){return x(z)?z(W):z},O=(function(N){u(z,N);function z(W){return o(this,z),s(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,c({},f,W)))}return a(z,[{key:"prerun",value:function(q){var j=q;j.quadtree=m();var ie=j.bodies=[];j.nodes.filter(function(Y){return A(Y)}).forEach(function(Y){var H=P(Y),G=b({pos:{x:H.x,y:H.y},mass:L(j.mass,Y),locked:H.locked});G._cyNode=Y,H.body=G,G._scratch=H,ie.push(G)});var ne=j.springs=[];j.edges.filter(I).forEach(function(Y){var H=E({source:M(Y.source()),target:M(Y.target()),length:L(j.springLength,Y),coeff:L(j.springCoeff,Y)});H._cyEdge=Y;var G=P(Y);H._scratch=G,G.spring=H,ne.push(H)}),j.edges.filter(p).forEach(function(Y){var H=B(Y.source()),G=B(Y.target());H=[H[0]],G=[G[0]],H.forEach(function(K){G.forEach(function(V){ne.push(E({source:M(K),target:M(V),length:L(j.springLength,Y),coeff:L(j.springCoeff,Y)}))})})})}},{key:"tick",value:function(q){var j=g(q),ie=j<=q.movementThreshold;return ie}}]),z})(l);r.exports=O}),(function(r,n,i){var a=Object.freeze({pos:{x:0,y:0},prevPos:{x:0,y:0},force:{x:0,y:0},velocity:{x:0,y:0},mass:1}),o=function(f){return{x:f.x,y:f.y}},s=function(f,v){return f??v},u=function(f,v){return o(s(f,v))};function l(c){var f={};return f.pos=u(c.pos,a.pos),f.prevPos=u(c.prevPos,f.pos),f.force=u(c.force,a.force),f.velocity=u(c.velocity,a.velocity),f.mass=c.mass!=null?c.mass:a.mass,f.locked=c.locked,f}r.exports={makeBody:l}}),(function(r,n,i){var a=Object.freeze({springLength:function(s){return 80},springCoeff:function(s){return 8e-4},mass:function(s){return 4},gravity:-1.2,pull:.001,theta:.666,dragCoeff:.02,movementThreshold:1,timeStep:20});r.exports=a}),(function(r,n,i){var a=.02;function o(s,u){var l=void 0;u!=null?l=u:s.dragCoeff!=null?l=s.dragCoeff:l=a,s.force.x-=l*s.velocity.x,s.force.y-=l*s.velocity.y}r.exports={applyDrag:o}}),(function(r,n,i){function a(o,s){var u=0,l=0,c=0,f=0,v,g=o.length;if(g===0)return 0;for(v=0;v<g;++v){var h=o[v],m=s/h.mass;if(!h.grabbed){h.locked?(h.velocity.x=0,h.velocity.y=0):(h.velocity.x+=m*h.force.x,h.velocity.y+=m*h.force.y);var w=h.velocity.x,b=h.velocity.y,C=Math.sqrt(w*w+b*b);C>1&&(h.velocity.x=w/C,h.velocity.y=b/C),u=s*h.velocity.x,c=s*h.velocity.y,h.pos.x+=u,h.pos.y+=c,l+=Math.abs(u),f+=Math.abs(c)}}return(l*l+f*f)/g}r.exports={integrate:a}}),(function(r,n,i){var a=i(9),o=i(8),s=function(g){g.x=0,g.y=0},u=function(g,h){var m=1e-8,w=Math.abs(g.x-h.x),b=Math.abs(g.y-h.y);return w<m&&b<m};function l(){var v=[],g=new o,h=[],m=0,w=b();function b(){var k=h[m];return k?(k.quad0=null,k.quad1=null,k.quad2=null,k.quad3=null,k.body=null,k.mass=k.massX=k.massY=0,k.left=k.right=k.top=k.bottom=0):(k=new a,h[m]=k),++m,k}function C(k,A,p,I){var M=v,B=void 0,P=void 0,L=void 0,O=void 0,N=0,z=0,W=1,q=0,j=1;M[0]=w,s(k.force);var ie=-k.pos.x,ne=-k.pos.y,Y=Math.sqrt(ie*ie+ne*ne),H=k.mass*I/Y;for(N+=H*ie,z+=H*ne;W;){var G=M[q],K=G.body;W-=1,q+=1;var V=K!==k;K&&V?(P=K.pos.x-k.pos.x,L=K.pos.y-k.pos.y,O=Math.sqrt(P*P+L*L),O===0&&(P=(Math.random()-.5)/50,L=(Math.random()-.5)/50,O=Math.sqrt(P*P+L*L)),B=A*K.mass*k.mass/(O*O*O),N+=B*P,z+=B*L):V&&(P=G.massX/G.mass-k.pos.x,L=G.massY/G.mass-k.pos.y,O=Math.sqrt(P*P+L*L),O===0&&(P=(Math.random()-.5)/50,L=(Math.random()-.5)/50,O=Math.sqrt(P*P+L*L)),(G.right-G.left)/O<p?(B=A*G.mass*k.mass/(O*O*O),N+=B*P,z+=B*L):(G.quad0&&(M[j]=G.quad0,W+=1,j+=1),G.quad1&&(M[j]=G.quad1,W+=1,j+=1),G.quad2&&(M[j]=G.quad2,W+=1,j+=1),G.quad3&&(M[j]=G.quad3,W+=1,j+=1)))}k.force.x+=N,k.force.y+=z}function E(k){if(k.length!==0){var A=Number.MAX_VALUE,p=Number.MAX_VALUE,I=Number.MIN_VALUE,M=Number.MIN_VALUE,B=void 0,P=k.length;for(B=P;B--;){var L=k[B].pos.x,O=k[B].pos.y;L<A&&(A=L),L>I&&(I=L),O<p&&(p=O),O>M&&(M=O)}var N=I-A,z=M-p;for(N>z?M=p+N:I=A+z,m=0,w=b(),w.left=A,w.right=I,w.top=p,w.bottom=M,B=P-1,B>=0&&(w.body=k[B]);B--;)x(k[B])}}function x(k){for(g.reset(),g.push(w,k);!g.isEmpty();){var A=g.pop(),p=A.node,I=A.body;if(p.body){var q=p.body;if(p.body=null,u(q.pos,I.pos)){var j=3;do{var ie=Math.random(),ne=(p.right-p.left)*ie,Y=(p.bottom-p.top)*ie;q.pos.x=p.left+ne,q.pos.y=p.top+Y,j-=1}while(j>0&&u(q.pos,I.pos));if(j===0&&u(q.pos,I.pos))return}g.push(p,q),g.push(p,I)}else{var M=I.pos.x,B=I.pos.y;p.mass=p.mass+I.mass,p.massX=p.massX+I.mass*M,p.massY=p.massY+I.mass*B;var P=0,L=p.left,O=(p.right+L)/2,N=p.top,z=(p.bottom+N)/2;M>O&&(P=P+1,L=O,O=p.right),B>z&&(P=P+2,N=z,z=p.bottom);var W=c(p,P);W?g.push(W,I):(W=b(),W.left=L,W.top=N,W.right=O,W.bottom=z,W.body=I,f(p,P,W))}}}return{insertBodies:E,updateBodyForce:C}}function c(v,g){return g===0?v.quad0:g===1?v.quad1:g===2?v.quad2:g===3?v.quad3:null}function f(v,g,h){g===0?v.quad0=h:g===1?v.quad1=h:g===2?v.quad2=h:g===3&&(v.quad3=h)}r.exports={makeQuadtree:l}}),(function(r,n,i){r.exports=a;function a(){this.stack=[],this.popIdx=0}a.prototype={isEmpty:function(){return this.popIdx===0},push:function(u,l){var c=this.stack[this.popIdx];c?(c.node=u,c.body=l):this.stack[this.popIdx]=new o(u,l),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function o(s,u){this.node=s,this.body=u}}),(function(r,n,i){r.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}}),(function(r,n,i){var a=i(6),o=a.integrate,s=i(5),u=s.applyDrag,l=i(1),c=l.applySpring;function f(v){var g=v.bodies,h=v.springs,m=v.quadtree,w=v.timeStep,b=v.gravity,C=v.theta,E=v.dragCoeff,x=v.pull;g.forEach(function(B){var P=B._scratch;P&&(B.locked=P.locked,B.grabbed=P.grabbed,B.pos.x=P.x,B.pos.y=P.y)}),m.insertBodies(g);for(var k=0;k<g.length;k++){var A=g[k];m.updateBodyForce(A,b,C,x),u(A,E)}for(var p=0;p<h.length;p++){var I=h[p];c(I)}var M=o(g,w);return g.forEach(function(B){var P=B._scratch;P&&(P.x=B.pos.x,P.y=B.pos.y)}),M}r.exports={tick:f}}),(function(r,n,i){var a=i(2),o=function(u){u&&u("layout","euler",a)};typeof cytoscape<"u"&&o(cytoscape),r.exports=o}),(function(r,n,i){r.exports=Object.freeze({animate:!0,refresh:10,maxIterations:1e3,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,infinite:!1})}),(function(r,n,i){var a=(function(){function b(C,E){for(var x=0;x<E.length;x++){var k=E[x];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}return function(C,E,x){return E&&b(C.prototype,E),x&&b(C,x),C}})();function o(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}var s=i(0),u=i(12),l=i(14),c=i(15),f=c.setInitialPositionState,v=c.refreshPositions,g=c.getNodePositionData,h=i(16),m=h.multitick,w=(function(){function b(C){o(this,b);var E=this.options=s({},u,C),x=E.eles.nodes();if(!E.randomize){x=x.sort(function(I,M){return I.position().x-M.position().x});var k={x:0,y:0},A={};x.forEach(function(I){Object.assign(A,I.position()),Math.abs(k.x-A.x)<E.theta&&Math.abs(k.y-A.y)<E.theta&&I.position({x:Math.random()*100,y:Math.random()*100}),Object.assign(k,A)})}var p=this.state=s({},E,{layout:this,nodes:x,edges:E.eles.edges(),tickIndex:0,firstUpdate:!0});p.animateEnd=E.animate&&E.animate==="end",p.animateContinuously=E.animate&&!p.animateEnd}return a(b,[{key:"run",value:function(){var E=this,x=this.state;if(x.tickIndex=0,x.firstUpdate=!0,x.startTime=Date.now(),x.running=!0,x.currentBoundingBox=l(x.boundingBox,x.cy),x.ready&&E.one("ready",x.ready),x.stop&&E.one("stop",x.stop),x.nodes.forEach(function(ne){return f(ne,x)}),E.prerun(x),x.animateContinuously){var k=function(Y){if(x.ungrabifyWhileSimulating){var H=g(Y,x).grabbable=Y.grabbable();H&&Y.ungrabify()}},A=function(Y){if(x.ungrabifyWhileSimulating){var H=g(Y,x).grabbable;H&&Y.grabify()}},p=function(Y){return g(Y,x).grabbed=Y.grabbed()},I=function(Y){var H=Y.target;p(H)},M=I,B=function(Y){var H=Y.target,G=g(H,x),K=H.position();G.x=K.x,G.y=K.y},P=function(Y){Y.on("grab",I),Y.on("free",M),Y.on("drag",B)},L=function(Y){Y.removeListener("grab",I),Y.removeListener("free",M),Y.removeListener("drag",B)},O=function(){x.fit&&x.animateContinuously&&x.cy.fit(x.padding)},N=function(){v(x.nodes,x),O(),requestAnimationFrame(z)},z=function(){m(x,N,W)},W=function(){v(x.nodes,x),O(),x.nodes.forEach(function(Y){A(Y),L(Y)}),x.running=!1,E.emit("layoutstop")};E.emit("layoutstart"),x.nodes.forEach(function(ne){k(ne),P(ne)}),z()}else{for(var q=!1,j=function(){},ie=function(){return q=!0};!q;)m(x,j,ie);x.eles.layoutPositions(this,x,function(ne){var Y=g(ne,x);return{x:Y.x,y:Y.y}})}return E.postrun(x),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"tick",value:function(){}},{key:"stop",value:function(){return this.state.running=!1,this}},{key:"destroy",value:function(){return this}}]),b})();r.exports=w}),(function(r,n,i){r.exports=function(a,o){return a==null?a={x1:0,y1:0,w:o.width(),h:o.height()}:a={x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2,w:a.w,h:a.h},a.x2==null&&(a.x2=a.x1+a.w),a.w==null&&(a.w=a.x2-a.x1),a.y2==null&&(a.y2=a.y1+a.h),a.h==null&&(a.h=a.y2-a.y1),a}}),(function(r,n,i){var a=i(0),o=function(c,f){var v=c.position(),g=f.currentBoundingBox,h=c.scratch(f.name);h==null&&(h={},c.scratch(f.name,h)),a(h,f.randomize?{x:g.x1+Math.random()*g.w,y:g.y1+Math.random()*g.h}:{x:v.x,y:v.y}),h.locked=c.locked()},s=function(c,f){return c.scratch(f.name)},u=function(c,f){c.positions(function(v){var g=v.scratch(f.name);return{x:g.x,y:g.y}})};r.exports={setInitialPositionState:o,getNodePositionData:s,refreshPositions:u}}),(function(r,n,i){var a=function(){},o=function(l){var c=l,f=l.layout,v=f.tick(c);c.firstUpdate&&(c.animateContinuously&&c.layout.emit("layoutready"),c.firstUpdate=!1),c.tickIndex++;var g=Date.now()-c.startTime;return!c.infinite&&(v||c.tickIndex>=c.maxIterations||g>=c.maxSimulationTime)},s=function(l){for(var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,v=!1,g=l,h=0;h<g.refresh&&(v=!g.running||o(g),!v);h++);v?f():c()};r.exports={tick:o,multitick:s}})])})})(Rs)),Rs.exports}var RS=OS();const NS=qi(RS);wn.use(NS);const FS=500;let ra;function Km(t,e,r=!1){return"layout"+t+e.sort().toString().replace(/[^a-z]/g,"")+!!r}function Xm(t){const e=[];for(let r=0;r<t.size();r++){const n=t[r];e.push([n.data(et.ID),n.position()])}return e}function up(t){const e={x:0,y:0};for(let r=0;r<t.length;r++){const n=t[r].position();e.x+=n.x,e.y+=n.y}return e.x/=t.length,e.y/=t.length,e}async function Br(t,e,r,n=!1,i=!1){if(t.nodes().size()===0)return _e.warn("layout.js#run: Graph empty. Nothing to layout."),!1;const a=Ca("layout");if(n){const v=new Set,g=[],h=t.nodes();for(const m of h){const w=Fe.ontology.style.color(m);v.has(w)||(t.add({group:"nodes",data:{id:w,mass:400,type:"virtual"}}),v.add(w)),g.push({group:"edges",data:{source:m.data(et.ID),target:w,springLength:180}})}_e.debug("Separate colours checked"),_e.debug(`Adding ${g.length} virtual edges.`),t.add(g)}else _e.debug("Separate colours unchecked");ra&&ra.stop();const o=t.nodes(":selected").size()>1,s=o?t.elements(":selected"):t.elements(":visible"),u=o?up(s.nodes()):void 0,l=s.size()>FS&&typeof window<"u",c={...e,animate:l};ra=s.layout(c),ra.on("layoutstop",()=>{if(o){const v=up(s.nodes());s.nodes().shift({x:u.x-v.x,y:u.y-v.y})}if(a.stop(),n){const v=t.nodes("[type='virtual']");_e.debug(`Removing ${v.length} virtual nodes.`),t.remove(v)}if(r&&i){if(typeof localStorage>"u")return _e.warn("web storage not available, could not write to cache."),!0;const v=Xm(t.nodes()),g=Km(e.name,r,n);localStorage.setItem(g,JSON.stringify(v)),_e.info("Replaced layout cache.")}});const f=ra.promiseOn("layoutready");return ra.run(),await f,!0}async function zS(t,e){const r=new Map(e);let n=0,i=0;const o=await Br(t,{name:"preset",fit:!0,positions:s=>{let u;return(u=r.get(s.data(et.ID)))?(n++,u):(i++,{x:0,y:0})}});if(i>0||n<Xm.length){_e.debug(`...${n}/${t.nodes().size()} node positions set. ${e.length-n} superfluous layout positions .`);const s=n/e.length,u=n/t.nodes().size();if(s<Fe.layoutCacheMinPrecision)return _e.warn(`Preset layout precision of ${s} less than minimal required precision of ${Fe.layoutCacheMinPrecision}.`),!1;if(u<Fe.layoutCacheMinRecall)return _e.warn(`Recall of ${u} less than minimal required of recall of ${Fe.layoutCacheMinRecall}.`),!1}else _e.debug("...layout applied with 100% overlap.");return n===0?(_e.error("0 hits in the preset layout."),!1):o}async function Ym(t,e,r,n=!1){if(typeof localStorage>"u")return _e.error("Web storage not available, could not access browser-based cache."),Br(t,e,r,n,!1);if(!r)return _e.debug("subs not supplied, run layout without cache"),Br(t,e,void 0,!1,!1);const i=Km(e.name,r,n),a=localStorage.getItem(i);if(a)try{const o=JSON.parse(a);if(_e.debug(`Loaded layout from cache, applying ${o.length} positions...`),await zS(t,o))return!0;_e.warn("Could not apply layout to active graph, recalculating layout...")}catch(o){_e.warn("Could not load cache item, recalculating layout...",o)}else _e.warn("Layout not in cache, recalculating layout...");return Br(t,e,r,n,!0)}function qS(t){const e=t.data("springLength");return e||800}const no={name:"euler",springLength:t=>qS(t),animate:!0,refresh:50,maxSimulationTime:4e4,maxIterations:500,timeStep:80,randomize:!0,movementThreshold:1,fit:!1,mass:t=>t.data("mass")|40},tu={name:"euler",springLength:40,animate:!1,maxSimulationTime:1e4,maxIterations:100,timeStep:80,refresh:50,randomize:!1,movementThreshold:1,fit:!1,mass:40},Zm={name:"cose",animate:!0,refresh:50,numIter:500,initialTemp:1e3,nestingFactor:1.01,randomize:!1,fit:!0};function VS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ps(t){return(function(e){if(Array.isArray(e))return Ac(e)})(t)||(function(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)})(t)||(function(e,r){if(e){if(typeof e=="string")return Ac(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ac(e,r)}})(t)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Ac(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lp,_c,Ei,Dc,cp,Qr=(lp=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],_c=(function(){function t(n){var i=n.targetModal,a=n.triggers,o=a===void 0?[]:a,s=n.onShow,u=s===void 0?function(){}:s,l=n.onClose,c=l===void 0?function(){}:l,f=n.openTrigger,v=f===void 0?"data-micromodal-trigger":f,g=n.closeTrigger,h=g===void 0?"data-micromodal-close":g,m=n.openClass,w=m===void 0?"is-open":m,b=n.disableScroll,C=b!==void 0&&b,E=n.disableFocus,x=E!==void 0&&E,k=n.awaitCloseAnimation,A=k!==void 0&&k,p=n.awaitOpenAnimation,I=p!==void 0&&p,M=n.debugMode,B=M!==void 0&&M;(function(P,L){if(!(P instanceof L))throw new TypeError("Cannot call a class as a function")})(this,t),this.modal=typeof i=="string"?document.getElementById(i):i,this.config={debugMode:B,disableScroll:C,openTrigger:v,closeTrigger:h,openClass:w,onShow:u,onClose:c,awaitCloseAnimation:A,awaitOpenAnimation:I,disableFocus:x},o.length>0&&this.registerTriggers.apply(this,ps(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,r;return e=t,(r=[{key:"registerTriggers",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.filter(Boolean).forEach((function(s){s.addEventListener("click",(function(u){return n.showModal(u)}))}))}},{key:"showModal",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var a=function o(){n.modal.removeEventListener("animationend",o,!1),n.setFocusToFirstNode()};this.modal.addEventListener("animationend",a,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,i)}},{key:"closeModal",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,n),this.config.awaitCloseAnimation){var a=this.config.openClass;this.modal.addEventListener("animationend",(function o(){i.classList.remove(a),i.removeEventListener("animationend",o,!1)}),!1)}else i.classList.remove(this.config.openClass)}},{key:"closeModalByIdOrElement",value:function(n){this.modal=typeof n=="string"?document.getElementById(n):n,this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(n){if(this.config.disableScroll){var i=document.querySelector("body");switch(n){case"enable":Object.assign(i.style,{overflow:""});break;case"disable":Object.assign(i.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(n){(n.target.hasAttribute(this.config.closeTrigger)||n.target.parentNode.hasAttribute(this.config.closeTrigger))&&(n.preventDefault(),n.stopPropagation(),this.closeModal(n))}},{key:"onKeydown",value:function(n){n.keyCode===27&&this.closeModal(n),n.keyCode===9&&this.retainFocus(n)}},{key:"getFocusableNodes",value:function(){var n=this.modal.querySelectorAll(lp);return Array.apply(void 0,ps(n))}},{key:"setFocusToFirstNode",value:function(){var n=this;if(!this.config.disableFocus){var i=this.getFocusableNodes();if(i.length!==0){var a=i.filter((function(o){return!o.hasAttribute(n.config.closeTrigger)}));a.length>0&&a[0].focus(),a.length===0&&i[0].focus()}}}},{key:"retainFocus",value:function(n){var i=this.getFocusableNodes();if(i.length!==0)if(i=i.filter((function(o){return o.offsetParent!==null})),this.modal.contains(document.activeElement)){var a=i.indexOf(document.activeElement);n.shiftKey&&a===0&&(i[i.length-1].focus(),n.preventDefault()),!n.shiftKey&&i.length>0&&a===i.length-1&&(i[0].focus(),n.preventDefault())}else i[0].focus()}}])&&VS(e.prototype,r),t})(),Ei=null,Dc=function(t){if(typeof id=="string"?!document.getElementById(t):!t)return console.warn("MicroModal: âSeems like you have missed %c'".concat(t,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(t,'"></div>')),!1},cp=function(t,e){if((function(n){n.length<=0&&(console.warn("MicroModal: âPlease specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))})(t),!e)return!0;for(var r in e)Dc(r);return!0},{init:function(t){var e=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),r=ps(document.querySelectorAll("[".concat(e.openTrigger,"]"))),n=(function(o,s){var u=[];return o.forEach((function(l){var c=l.attributes[s].value;u[c]===void 0&&(u[c]=[]),u[c].push(l)})),u})(r,e.openTrigger);if(e.debugMode!==!0||cp(r,n)!==!1)for(var i in n){var a=n[i];e.targetModal=i,e.triggers=ps(a),Ei=new _c(e)}},show:function(t,e){var r=e||{};r.targetModal=t,r.debugMode===!0&&Dc(t)===!1||(Ei&&Ei.removeEventListeners(),(Ei=new _c(r)).showModal())},close:function(t){t?Ei.closeModalByIdOrElement(t):Ei.closeModal()}});typeof window<"u"&&(window.MicroModal=Qr);const Qm=new Map,Jm=new Map,gs=new Set;async function fp(t,e){const r=`SELECT DISTINCT(?class) ?label
  FROM <http://www.snik.eu/ontology/${t}>
  {
    ?class meta:chapter/meta:subChapterOf* <${e}>.
    ?class rdfs:label ?label.
    FILTER(LANGMATCHES(LANG(?label),"en"))
  }
  ORDER BY ASC(?class)`,n=await Rn(r);n.forEach(a=>{Jm.set(a.class.value,a.label.value)});const i=n.map(a=>a.class.value);return Qm.set(e,i),new Set(i)}async function dp(t,e){const r=Lr("tab:chapter-search-classes");for(;r.rows.length>0;)r.deleteRow(0);const n=(o,s)=>{const l=r.insertRow().insertCell(),c=document.createElement("a");l.appendChild(c),c.innerText=o,c.addEventListener("click",()=>{Qr.close("chapter-search"),t.resetStyle(),t.presentUris(Array.from(e),s)})};n("Show Only those in Graph",!0),n("Highlight All in Graph",!1);const a=r.insertRow().insertCell();a.innerHTML="&nbsp;";for(const o of e){const u=r.insertRow().insertCell(),l=document.createElement("a");u.appendChild(l),l.innerText=Jm.get(o),l.addEventListener("click",()=>{Qr.close("chapter-search"),t.presentUri(o)})}}async function hp(t,e){Qr.show("chapter-search");const r=Lr("tab:chapter-search-chapters");for(;r.rows.length>0;)r.deleteRow(0);{const s=Lr("tab:chapter-search-classes");for(;s.rows.length>0;)s.deleteRow(0)}gs.clear();const n=r.insertRow().insertCell(),i=document.createElement("a");n.appendChild(i),i.setAttribute("data-i18n","deselect-all"),i.innerText=uo("deselect-all"),i.addEventListener("click",()=>{for(const s of document.getElementsByClassName("chaptersearch-checkbox"))s.checked&&s.click()});const a=`SELECT COUNT(DISTINCT(?c)) AS ?count ?ch
  FROM <http://www.snik.eu/ontology/${e}>
  {
    ?c meta:chapter/meta:subChapterOf* ?ch.
  } ORDER BY ASC(?ch)`,o=await Rn(a);for(const s of o){const u=s.ch.value,l=r.insertRow(),c=l.insertCell();c.addEventListener("click",async()=>dp(t,await fp(e,u)));const f=document.createElement("a");c.appendChild(f),f.innerText=s.ch.value;const v=l.insertCell();v.innerHTML=s.count.value;const g=l.insertCell(),h=document.createElement("input");g.appendChild(h),h.setAttribute("type","checkbox"),h.classList.add("chaptersearch-checkbox"),g.addEventListener("input",async()=>{h.checked?(await fp(e,u),gs.add(u)):gs.delete(u),dp(t,new Set([...gs].map(m=>Qm.get(m)).flat().sort()))})}}const Mc=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ic(t,e,r,n){t.addEventListener?t.addEventListener(e,r,n):t.attachEvent&&t.attachEvent("on".concat(e),r)}function Ga(t,e,r,n){t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent&&t.detachEvent("on".concat(e),r)}function ey(t,e){const r=e.slice(0,e.length-1);for(let n=0;n<r.length;n++)r[n]=t[r[n].toLowerCase()];return r}function ty(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let r=e.lastIndexOf("");for(;r>=0;)e[r-1]+=",",e.splice(r,1),r=e.lastIndexOf("");return e}function HS(t,e){const r=t.length>=e.length?t:e,n=t.length>=e.length?e:t;let i=!0;for(let a=0;a<r.length;a++)n.indexOf(r[a])===-1&&(i=!1);return i}const xo={backspace:8,"â«":8,tab:9,clear:12,enter:13,"â©":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"âª":20,",":188,".":190,"/":191,"`":192,"-":Mc?173:189,"=":Mc?61:187,";":Mc?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},rn={"â§":16,shift:16,"â¥":18,alt:18,option:18,"â":17,ctrl:17,control:17,"â":91,cmd:91,meta:91,command:91},Ja={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ur={16:!1,18:!1,17:!1,91:!1},Vt={};for(let t=1;t<20;t++)xo["f".concat(t)]=111+t;let Nt=[],io=null,ry="all";const _n=new Map,Da=t=>xo[t.toLowerCase()]||rn[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),$S=t=>Object.keys(xo).find(e=>xo[e]===t),WS=t=>Object.keys(rn).find(e=>rn[e]===t);function ny(t){ry=t||"all"}function Co(){return ry||"all"}function US(){return Nt.slice(0)}function GS(){return Nt.map(t=>$S(t)||WS(t)||String.fromCharCode(t))}function jS(){const t=[];return Object.keys(Vt).forEach(e=>{Vt[e].forEach(r=>{let{key:n,scope:i,mods:a,shortcut:o}=r;t.push({scope:i,shortcut:o,mods:a,keys:n.split("+").map(s=>Da(s))})})}),t}function KS(t){const e=t.target||t.srcElement,{tagName:r}=e;let n=!0;const i=r==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||r==="TEXTAREA"||r==="SELECT")&&!e.readOnly)&&(n=!1),n}function XS(t){return typeof t=="string"&&(t=Da(t)),Nt.indexOf(t)!==-1}function YS(t,e){let r,n;t||(t=Co());for(const i in Vt)if(Object.prototype.hasOwnProperty.call(Vt,i))for(r=Vt[i],n=0;n<r.length;)r[n].scope===t?r.splice(n,1).forEach(o=>{let{element:s}=o;return Zf(s)}):n++;Co()===t&&ny(e||"all")}function ZS(t){let e=t.keyCode||t.which||t.charCode;t.key&&t.key.toLowerCase()==="capslock"&&(e=Da(t.key));const r=Nt.indexOf(e);if(r>=0&&Nt.splice(r,1),t.key&&t.key.toLowerCase()==="meta"&&Nt.splice(0,Nt.length),(e===93||e===224)&&(e=91),e in ur){ur[e]=!1;for(const n in rn)rn[n]===e&&(In[n]=!1)}}function iy(t){if(typeof t>"u")Object.keys(Vt).forEach(i=>{Array.isArray(Vt[i])&&Vt[i].forEach(a=>ms(a)),delete Vt[i]}),Zf(null);else if(Array.isArray(t))t.forEach(i=>{i.key&&ms(i)});else if(typeof t=="object")t.key&&ms(t);else if(typeof t=="string"){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];let[i,a]=r;typeof i=="function"&&(a=i,i=""),ms({key:t,scope:i,method:a,splitKey:"+"})}}const ms=t=>{let{key:e,scope:r,method:n,splitKey:i="+"}=t;ty(e).forEach(o=>{const s=o.split(i),u=s.length,l=s[u-1],c=l==="*"?"*":Da(l);if(!Vt[c])return;r||(r=Co());const f=u>1?ey(rn,s):[],v=[];Vt[c]=Vt[c].filter(g=>{const m=(n?g.method===n:!0)&&g.scope===r&&HS(g.mods,f);return m&&v.push(g.element),!m}),v.forEach(g=>Zf(g))})};function vp(t,e,r,n){if(e.element!==n)return;let i;if(e.scope===r||e.scope==="all"){i=e.mods.length>0;for(const a in ur)Object.prototype.hasOwnProperty.call(ur,a)&&(!ur[a]&&e.mods.indexOf(+a)>-1||ur[a]&&e.mods.indexOf(+a)===-1)&&(i=!1);(e.mods.length===0&&!ur[16]&&!ur[18]&&!ur[17]&&!ur[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(Nt),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function pp(t,e){const r=Vt["*"];let n=t.keyCode||t.which||t.charCode;if(t.key&&t.key.toLowerCase()==="capslock"||!In.filter.call(this,t))return;if((n===93||n===224)&&(n=91),Nt.indexOf(n)===-1&&n!==229&&Nt.push(n),["metaKey","ctrlKey","altKey","shiftKey"].forEach(s=>{const u=Ja[s];t[s]&&Nt.indexOf(u)===-1?Nt.push(u):!t[s]&&Nt.indexOf(u)>-1?Nt.splice(Nt.indexOf(u),1):s==="metaKey"&&t[s]&&(Nt=Nt.filter(l=>l in Ja||l===n))}),n in ur){ur[n]=!0;for(const s in rn)if(Object.prototype.hasOwnProperty.call(rn,s)){const u=Ja[rn[s]];In[s]=t[u]}if(!r)return}for(const s in ur)Object.prototype.hasOwnProperty.call(ur,s)&&(ur[s]=t[Ja[s]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Nt.indexOf(17)===-1&&Nt.push(17),Nt.indexOf(18)===-1&&Nt.push(18),ur[17]=!0,ur[18]=!0);const i=Co();if(r)for(let s=0;s<r.length;s++)r[s].scope===i&&(t.type==="keydown"&&r[s].keydown||t.type==="keyup"&&r[s].keyup)&&vp(t,r[s],i,e);if(!(n in Vt))return;const a=Vt[n],o=a.length;for(let s=0;s<o;s++)if((t.type==="keydown"&&a[s].keydown||t.type==="keyup"&&a[s].keyup)&&a[s].key){const u=a[s],{splitKey:l}=u,c=u.key.split(l),f=[];for(let v=0;v<c.length;v++)f.push(Da(c[v]));f.sort().join("")===Nt.sort().join("")&&vp(t,u,i,e)}}function In(t,e,r){Nt=[];const n=ty(t);let i=[],a="all",o=document,s=0,u=!1,l=!0,c="+",f=!1,v=!1;for(r===void 0&&typeof e=="function"&&(r=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(a=e.scope),e.element&&(o=e.element),e.keyup&&(u=e.keyup),e.keydown!==void 0&&(l=e.keydown),e.capture!==void 0&&(f=e.capture),typeof e.splitKey=="string"&&(c=e.splitKey),e.single===!0&&(v=!0)),typeof e=="string"&&(a=e),v&&iy(t,a);s<n.length;s++)t=n[s].split(c),i=[],t.length>1&&(i=ey(rn,t)),t=t[t.length-1],t=t==="*"?"*":Da(t),t in Vt||(Vt[t]=[]),Vt[t].push({keyup:u,keydown:l,scope:a,mods:i,shortcut:n[s],method:r,key:n[s],splitKey:c,element:o});if(typeof o<"u"&&window){if(!_n.has(o)){const g=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return pp(m,o)},h=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;pp(m,o),ZS(m)};_n.set(o,{keydownListener:g,keyupListenr:h,capture:f}),Ic(o,"keydown",g,f),Ic(o,"keyup",h,f)}if(!io){const g=()=>{Nt=[]};io={listener:g,capture:f},Ic(window,"focus",g,f)}}}function QS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Vt).forEach(r=>{Vt[r].filter(i=>i.scope===e&&i.shortcut===t).forEach(i=>{i&&i.method&&i.method()})})}function Zf(t){const e=Object.values(Vt).flat();if(e.findIndex(n=>{let{element:i}=n;return i===t})<0){const{keydownListener:n,keyupListenr:i,capture:a}=_n.get(t)||{};n&&i&&(Ga(t,"keyup",i,a),Ga(t,"keydown",n,a),_n.delete(t))}if((e.length<=0||_n.size<=0)&&(Object.keys(_n).forEach(i=>{const{keydownListener:a,keyupListenr:o,capture:s}=_n.get(i)||{};a&&o&&(Ga(i,"keyup",o,s),Ga(i,"keydown",a,s),_n.delete(i))}),_n.clear(),Object.keys(Vt).forEach(i=>delete Vt[i]),io)){const{listener:i,capture:a}=io;Ga(window,"focus",i,a),io=null}}const Pc={getPressedKeyString:GS,setScope:ny,getScope:Co,deleteScope:YS,getPressedKeyCodes:US,getAllKeyCodes:jS,isPressed:XS,filter:KS,trigger:QS,unbind:iy,keyMap:xo,modifier:rn,modifierMap:Ja};for(const t in Pc)Object.prototype.hasOwnProperty.call(Pc,t)&&(In[t]=Pc[t]);if(typeof window<"u"){const t=window.hotkeys;In.noConflict=e=>(e&&window.hotkeys===In&&(window.hotkeys=t),In),window.hotkeys=In}function JS(){Qr.show("subontology-connectivity");const t=document.getElementById("subontology-connectivity-form");t.listener||(t.listener=async e=>{e.preventDefault(),Qr.close("subontology-connectivity");const r=new We;await r.initialized;const n=[t[0].value,t[1].value];_e.debug(`Showing connectivity between the subontologies ${n[0]} and ${n[1]}.`);const i=n.map(s=>r.state.cy.nodes(`[source="${s}"]`)),o=i[0].edgesWith(i[1]).connectedNodes();wt.setVisible(r.state.cy.elements(),!1),wt.setVisible(o,!0),wt.setVisible(o.edgesWith(o),!0),o.layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:60,concentric:function(s){return i[0].contains(s)?2:1}}).run()},t.addEventListener("submit",t.listener))}let ru=null;class nu{constructor(){At(this,"separateColoursBox");At(this,"dayModeBox");At(this,"coloredEdgesBox");At(this,"showPropertyBox");if(ru)throw Error("Menu already exists.");document.body.addEventListener("click",nu.closeListener),this.showCloseMatches=this.showCloseMatches.bind(this),this.addMenu(),ru=this}separateColours(){var e;return(e=this.separateColoursBox)==null?void 0:e.checked}dayMode(){return this.dayModeBox.checked}coloredEdges(){return this.coloredEdgesBox.checked}showProperty(){return this.showPropertyBox.checked}setLanguage(e){if(S0(e)){kd();for(const r of We.views()){const n=r.state.graph.cy.elements();r.state.graph.cy.remove(n),n.restore(),r.recreateContextMenus()}}}static about(){var n,i,a,o;const e=(i=(n=We==null?void 0:We.activeState())==null?void 0:n.graph)==null?void 0:i.cy,r=`
${(a=e==null?void 0:e.nodes())==null?void 0:a.size()} nodes, ${(o=e==null?void 0:e.edges())==null?void 0:o.size()} edges loaded.`;window.alert(Zp()+r)}showCloseMatches(){_e.debug("show close matches start");const r=We.activeState().graph.cy.elements(".unfiltered").not(".hidden").connectedEdges(".unfiltered").filter('[pl="closeMatch"]');wt.setVisible(r,!0),wt.setVisible(r.connectedNodes(".unfiltered"),!0),_e.debug("show close matches end")}menuData(){return[{i18n:"file",id:"file",entries:[{action:async()=>{await rg(We.activeState().graph.cy,[]),lo(async()=>{var e,r;return await Ym(We.activeState().graph.cy,no,(r=(e=Fe.ontology)==null?void 0:e.snik)==null?void 0:r.defaultSubOntologies,this.separateColours())})},i18n:"load-sparql"},{action:()=>oT(this.optionsToJSON()),i18n:"save-session"},{action:()=>aT(We.activeState().graph),i18n:"save-snik-graph"},{action:()=>sT(We.activeState()),i18n:"save-view"},{action:()=>uT(We.activeState()),i18n:"save-layout"},{action:()=>{lo(()=>{var e,r;return Br(We.activeState().cy,no,(r=(e=Fe.ontology)==null?void 0:e.snik)==null?void 0:r.defaultSubOntologies,this.separateColours(),!0)})},i18n:"recalculate-layout-replace"},{action:()=>ys(We.activeState().graph,this.dayMode(),!1,!1),i18n:"save-image-png-visible-region"},{action:()=>ys(We.activeState().graph,this.dayMode(),!0,!1),i18n:"save-image-png-complete-partial-graph"},{action:()=>ys(We.activeState().graph,this.dayMode(),!1,!0),i18n:"save-image-png-visible-region-high-res"},{action:()=>ys(We.activeState().graph,this.dayMode(),!0,!0),i18n:"save-image-png-complete-partial-graph-high-res"},{action:()=>mp(We.activeState().graph,this.dayMode(),!1),i18n:"save-image-svg-visible-region"},{action:()=>mp(We.activeState().graph,this.dayMode(),!0),i18n:"save-image-svg-complete-partial-graph"},{action:()=>new We,i18n:"new-view"}]},{i18n:"filter",id:"filter",entries:[]},{i18n:"options",id:"options",entries:[]},{i18n:"layout",entries:[{action:this.showCloseMatches,i18n:"show-close-matches"},{action:()=>{var e,r;Br(We.activeState().graph.cy,no,(r=(e=Fe.ontology)==null?void 0:e.snik)==null?void 0:r.defaultSubOntologies,this.separateColours()&&!We.activeState().graph.starMode,!0)},i18n:"recalculate-layout",hotkey:"ctrl+alt+l"},{action:()=>{var e,r;Br(We.activeState().graph.cy,tu,(r=(e=Fe.ontology)==null?void 0:e.snik)==null?void 0:r.defaultSubOntologies,this.separateColours()&&!We.activeState().graph.starMode,!1)},i18n:"tight-layout",hotkey:"ctrl+alt+t"},{action:()=>{var e,r;Br(We.activeState().graph.cy,Zm,(r=(e=Fe.ontology)==null?void 0:e.snik)==null?void 0:r.defaultSubOntologies,this.separateColours()&&!We.activeState().graph.starMode,!1)},i18n:"compound-layout",hotkey:"ctrl+alt+c"},{action:()=>We.activeState().graph.moveAllMatches(0),i18n:"move-match-on-top"},{action:()=>We.activeState().graph.moveAllMatches(100),i18n:"move-match-nearby"},{action:()=>{hp(We.activeState().graph,"bb")},i18n:"bb-chapter-search",only:"snik"},{action:()=>{hp(We.activeState().graph,"ob")},i18n:"ob-chapter-search",only:"snik"},{action:JS,i18n:"subontology-connectivity",only:"snik"},{action:We.mainView.state.graph.resetStyle,i18n:"reset-view",hotkey:"ctrl+alt+r"},{action:()=>{We.activeView().setTitle(prompt("Rename: "+We.activeView().config.title)||We.activeView().config.title),We.activeState().title=We.activeView().config.title},i18n:"change-title",only:"snik"}]},{i18n:"services",entries:[{action:Fe.ontology.links.sparqlEndpoint,i18n:"sparql-endpoint"},{action:Fe.ontology.links.rdfBrowser,i18n:"rdf-browser"}]},{i18n:"language",entries:[{action:()=>this.setLanguage(et.LABEL_ENGLISH),i18n:"english"},{action:()=>this.setLanguage(et.LABEL_GERMAN),i18n:"german"},{action:()=>this.setLanguage(et.LABEL_PERSIAN),i18n:"persian"}]},{i18n:"help",entries:[{action:"html/manual.html",i18n:"manual"},{action:"html/layoutHelp.html",i18n:"layout-help"},{action:"doc/index.html",i18n:"developer-doc"},{action:Fe.ontology.links.youtube,i18n:"youtube-channel"},{action:"html/troubleshooting.html",i18n:"troubleshooting"},{action:"html/contribute.html",i18n:"contribute"},{action:Fe.ontology.links.homepage,i18n:"project-homepage"},{action:Fe.ontology.links.metamodel,i18n:"meta-model"},{action:nu.about,i18n:"about"},{action:Fe.ontology.links.feedbackOntology,i18n:"feedback-ontology"},{action:Fe.ontology.links.featureRequest,i18n:"feature-request"},{action:F0,i18n:"bug-report"}]}]}addOptions(e){const r=Lr("options-menu-content"),n=["separateColours","cumulativeSearch","grid","combineMatchMode","dayMode","coloredEdges","showProperty"];this.optionBoxes={};for(const i of n){_e.trace("Add option "+i);const a=document.createElement("a");a.setAttribute("tabindex","-1"),a.classList.add("dropdown-entry"),e.push(a),r.appendChild(a);const o=document.createElement("input");this.optionBoxes[i]=o,o.type="checkbox",o.autocomplete="off",o.id=i+"Box",a.appendChild(o),this[i+"Box"]=o,a.addEventListener("keydown",Qp(o)),a.appendChild(Jp(o,uo(i),i))}this.separateColoursBox.addEventListener("change",()=>{_e.debug("Set separate colours to "+this.separateColours())}),this.dayModeBox.addEventListener("change",()=>{for(const i of We.views())i.state.graph.applyStyle(this.dayMode(),this.coloredEdges(),this.showProperty());_e.debug("Set dayMode to "+this.dayMode())}),this.showPropertyBox.addEventListener("change",()=>{for(const i of We.views())i.state.graph.applyStyle(this.dayMode(),this.coloredEdges(),this.showProperty());_e.debug("Set showProperty to "+this.showProperty())}),this.gridBox.addEventListener("change",()=>{document.body.classList[this.gridBox.checked?"add":"remove"]("grid"),_e.debug("set gridBox to "+this.gridBox.checked)}),Fe.activeOptions.includes("day")&&this.dayModeBox.click(),Fe.activeOptions.includes("showproperty")&&this.showPropertyBox.click(),this.cumulativeSearchBox.addEventListener("change",()=>{_e.debug("Set cumulative search to "+this.cumulativeSearchBox.checked)}),this.combineMatchModeBox.addEventListener("change",()=>{_e.debug("Set combine match mode to "+this.combineMatchModeBox.checked),setTimeout(()=>{this.combineMatches()},10)}),this.coloredEdgesBox.addEventListener("change",()=>{const i=this.coloredEdges();_e.debug("Set coloredEdges to "+i),Fe.edgesColorized=i;for(const a of We.views())a.state.graph.applyStyle(this.dayMode(),this.coloredEdges(),this.showProperty())}),Fe.activeOptions.includes("edgecolor")&&setTimeout(()=>this.coloredEdgesBox.click(),100)}addMenu(){console.groupCollapsed("Add menu");const e=document.createElement("ul");Lr("top").prepend(e),e.classList.add("dropdown-bar"),e.setAttribute("tabindex","0");const r=this.menuData(),n=[],i=[];for(let a=0;a<r.length;a++){const o=r[a],s=document.createElement("li");s.setAttribute("tabindex","-1"),e.appendChild(s);const u=document.createElement("span");n.push(u),s.appendChild(u),u.classList.add("dropdown-menu"),u.setAttribute("data-i18n",o.i18n),u.setAttribute("tabindex","-1");const l=document.createElement("div");s.appendChild(l),l.classList.add("dropdown-content"),l.setAttribute("tabindex","-1"),o.id&&(l.id=o.id+"-menu-content"),u.addEventListener("click",()=>{for(const f of document.getElementsByClassName("dropdown-content"))l!==f&&f.classList.remove("show");l.classList.toggle("show")});const c=[];i.push(c);for(const f of o.entries){if(f===null||f.only&&f.only!==Fe.ontology.id)continue;const v=document.createElement("a");switch(c.push(v),v.classList.add("dropdown-entry"),v.setAttribute("data-i18n",f.i18n),f.hotkey&&v.setAttribute("hotkey",f.hotkey),v.setAttribute("tabindex","-1"),l.appendChild(v),v.innerHTML=uo(f.i18n),typeof f.action){case"string":{v.href=f.action,v.target="_blank";break}case"function":{v.addEventListener("click",f.action);const g=f.hotkey;g&&(In(g,f.action),v.innerHTML=v.innerHTML+` (${g.toUpperCase()})`);break}default:_e.error("unknown menu entry action type: "+typeof f.action)}}u.addEventListener("keydown",f=>{switch(f.key){case"ArrowLeft":n[(a-1+n.length)%n.length].focus(),n[(a-1+n.length)%n.length].click();break;case"ArrowRight":n[(a+1)%n.length].focus(),n[(a+1)%n.length].click();break;case"ArrowDown":c[0].focus();break}})}hT(We.activeState().graph,Lr("file-menu-content"),i[0]),_e.debug("fileLoadEntries added"),To.addFilterEntries(Lr("filter-menu-content"),i[1]),_e.debug("filter entries added"),this.addOptions(i[2]);for(let a=0;a<i.length;a++){const o=i[a];for(let s=0;s<o.length;s++)o[s].addEventListener("keydown",u=>{switch(u.key){case"ArrowLeft":n[(a-1+n.length)%n.length].focus(),n[(a-1+n.length)%n.length].click();break;case"ArrowRight":n[(a+1)%n.length].focus(),n[(a+1)%n.length].click();break;case"ArrowUp":o[(s-1+o.length)%o.length].focus();break;case"ArrowDown":o[(s+1)%o.length].focus();break}})}_e.debug("Menu added"),console.groupEnd(),kd()}static closeListener(e){if(e&&e.target&&e.target.matches&&!e.target.matches(".dropdown-entry")&&!e.target.matches(".dropdown-menu")&&!e.target.matches("input.filterbox")){const r=document.getElementsByClassName("dropdown-content");Array.from(r).forEach(n=>n.classList.remove("show"))}}optionsToJSON(){const e=["separateColours","cumulativeSearch","grid","combineMatchMode","dayMode","coloredEdges"],r={};for(const n of e)r[n]=this.optionBoxes[n].checked;return r}optionsFromJSON(e){const r=this.optionsToJSON();for(const[n,i]of Object.entries(e))r[n]!==i&&this.optionBoxes[n].click()}applyOptions(){this.combineMatchModeBox.checked&&this.combineMatches()}combineMatches(){We.views().map(e=>e.state.graph).forEach(e=>e.combineMatch(this.combineMatchModeBox.checked))}}const eT={version:Jn};function ay(){const t={filters:To.toJSON(),options:ru.optionsToJSON()};return Object.assign(t,eT),t}function tT(t){To.fromJSON(t.filters),ru.optionsFromJSON(t.options)}var Lc={exports:{}},gp;function rT(){return gp||(gp=1,(function(t,e){(function(r,n){t.exports=n()})(window,(function(){return(function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:s})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var u in a)i.d(s,u,(function(l){return a[l]}).bind(null,u));return s},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=0)})([function(r,n,i){var a=i(1),o=function(s){s&&s("core","svg",a.svg)};typeof cytoscape<"u"&&o(cytoscape),r.exports=o},function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},o=i(2),s={},u={};u.number=function(l){return l!=null&&(l===void 0?"undefined":a(l))===a(1)&&!isNaN(l)},s.bufferCanvasImage=function(l,c){var f=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach((function(P){P._private.rscratch.pathCacheKey=null,P._private.rscratch.pathCache=null}));var v=c.renderer(),g=c.mutableElements().boundingBox(),h=v.findContainerClientCoords(),m=l.full?Math.ceil(g.w):h[2],w=l.full?Math.ceil(g.h):h[3],b=u.number(l.maxWidth)||u.number(l.maxHeight),C=v.getPixelRatio(),E=1;if(l.scale!==void 0)m*=l.scale,w*=l.scale,E=l.scale;else if(b){var x=1/0,k=1/0;u.number(l.maxWidth)&&(x=E*l.maxWidth/m),u.number(l.maxHeight)&&(k=E*l.maxHeight/w),m*=E=Math.min(x,k),w*=E}b||(m*=C,w*=C,E*=C);var A=null,p=A=new o(m,w);if(m>0&&w>0){A.clearRect(0,0,m,w),l.bg&&(A.globalCompositeOperation="destination-over",A.fillStyle=l.bg,A.fillRect(0,0,m,w)),A.globalCompositeOperation="source-over";var I=v.getCachedZSortedEles();if(l.full)A.translate(-g.x1*E,-g.y1*E),A.scale(E,E),v.drawElements(A,I),A.scale(1/E,1/E),A.translate(g.x1*E,g.y1*E);else{var M=c.pan(),B={x:M.x*E,y:M.y*E};E*=c.zoom(),A.translate(B.x,B.y),A.scale(E,E),v.drawElements(A,I),A.scale(1/E,1/E),A.translate(-B.x,-B.y)}}return c.renderer().usePaths=f,p},s.svg=function(l){return s.bufferCanvasImage(l||{},this).getSerializedSvg()},r.exports=s},function(r,n,i){(function(){var a,o,s,u,l;function c(h,m){var w,b=Object.keys(m);for(w=0;w<b.length;w++)h=h.replace(new RegExp("\\{"+b[w]+"\\}","gi"),m[b[w]]);return h}function f(h){var m,w,b;if(!h)throw new Error("cannot create a random attribute name for an undefined object");m="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",w="";do for(w="",b=0;b<12;b++)w+=m[Math.floor(Math.random()*m.length)];while(h[w]);return w}function v(h){var m={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return m[h]||m.alphabetic}l=(function(h,m){var w,b,C,E={};for(h=h.split(","),m=m||10,w=0;w<h.length;w+=2)b="&"+h[w+1]+";",C=parseInt(h[w],m),E[b]="&#"+C+";";return E["\\xa0"]="&#160;",E})("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(h,m){this.__root=h,this.__ctx=m}).prototype.addColorStop=function(h,m){var w,b=this.__ctx.__createElement("stop");b.setAttribute("offset",h),m.indexOf("rgba")!==-1?(w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(m),b.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:w[1],g:w[2],b:w[3]})),b.setAttribute("stop-opacity",w[4])):b.setAttribute("stop-color",m),this.__root.appendChild(b)},u=function(h,m){this.__root=h,this.__ctx=m},(o=function(h){var m,w={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((m=w).width=arguments[0],m.height=arguments[1]):m=h||w,!(this instanceof o))return new o(m);this.width=m.width||w.width,this.height=m.height||w.height,this.enableMirroring=m.enableMirroring!==void 0?m.enableMirroring:w.enableMirroring,this.canvas=this,this.__document=m.document||document,m.ctx?this.__ctx=m.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(h,m,w){m===void 0&&(m={});var b,C,E=this.__document.createElementNS("http://www.w3.org/2000/svg",h),x=Object.keys(m);for(w&&(E.setAttribute("fill","none"),E.setAttribute("stroke","none")),b=0;b<x.length;b++)C=x[b],E.setAttribute(C,m[C]);return E},o.prototype.__setDefaultStyles=function(){var h,m,w=Object.keys(a);for(h=0;h<w.length;h++)this[m=w[h]]=a[m].canvas},o.prototype.__applyStyleState=function(h){if(h){var m,w,b=Object.keys(h);for(m=0;m<b.length;m++)this[w=b[m]]=h[w]}},o.prototype.__getStyleState=function(){var h,m,w={},b=Object.keys(a);for(h=0;h<b.length;h++)w[m=b[h]]=this[m];return w},o.prototype.__applyStyleToCurrentElement=function(h){var m=this.__currentElement;this.__currentElementsToStyle;var w,b,C,E,x,k=Object.keys(a);for(w=0;w<k.length;w++)if(b=a[k[w]],C=this[k[w]],b.apply){if(C instanceof u){if(C.__ctx)for(;C.__ctx.__defs.childNodes.length;)E=C.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[E]=E,this.__defs.appendChild(C.__ctx.__defs.childNodes[0]);m.setAttribute(b.apply,c("url(#{id})",{id:C.__root.getAttribute("id")}))}else if(C instanceof s)m.setAttribute(b.apply,c("url(#{id})",{id:C.__root.getAttribute("id")}));else if(b.apply.indexOf(h)!==-1&&b.svg!==C)if(b.svgAttr!=="stroke"&&b.svgAttr!=="fill"||C.indexOf("rgba")===-1){var A=b.svgAttr;if(k[w]==="globalAlpha"&&(A=h+"-"+b.svgAttr,m.getAttribute(A)))continue;m.setAttribute(A,C)}else{x=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(C),m.setAttribute(b.svgAttr,c("rgb({r},{g},{b})",{r:x[1],g:x[2],b:x[3]}));var p=x[4],I=this.globalAlpha;I!=null&&(p*=I),m.setAttribute(b.svgAttr+"-opacity",p)}}},o.prototype.__closestGroupOrSvg=function(h){return(h=h||this.__currentElement).nodeName==="g"||h.nodeName==="svg"?h:this.__closestGroupOrSvg(h.parentNode)},o.prototype.getSerializedSvg=function(h){var m,w,b,C,E,x=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(x)&&(x=x.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),h)for(m=Object.keys(l),w=0;w<m.length;w++)b=m[w],C=l[b],(E=new RegExp(b,"gi")).test(x)&&(x=x.replace(E,C));return x},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var h=this.__createElement("g"),m=this.__closestGroupOrSvg();this.__groupStack.push(m),m.appendChild(h),this.__currentElement=h,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var h=this.__stack.pop();this.__applyStyleState(h)},o.prototype.__addTransform=function(h){var m=this.__closestGroupOrSvg();if(m.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:m,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var w=this.__createElement("g");m.appendChild(w),this.__currentElement=w}var b=this.__currentElement.getAttribute("transform");b?b+=" ":b="",b+=h,this.__currentElement.setAttribute("transform",b)},o.prototype.scale=function(h,m){m===void 0&&(m=h),this.__addTransform(c("scale({x},{y})",{x:h,y:m}))},o.prototype.rotate=function(h){var m=180*h/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:m,cx:0,cy:0}))},o.prototype.translate=function(h,m){this.__addTransform(c("translate({x},{y})",{x:h,y:m}))},o.prototype.transform=function(h,m,w,b,C,E){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:h,b:m,c:w,d:b,e:C,f:E}))},o.prototype.beginPath=function(){var h;this.__currentDefaultPath="",this.__currentPosition={},h=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(h),this.__currentElement=h},o.prototype.__applyCurrentDefaultPath=function(){var h=this.__currentElement;h.nodeName==="path"?h.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",h.nodeName)},o.prototype.__addPathCommand=function(h){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=h},o.prototype.moveTo=function(h,m){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:h,y:m},this.__addPathCommand(c("M {x} {y}",{x:h,y:m}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(h,m){this.__currentPosition={x:h,y:m},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:h,y:m})):this.__addPathCommand(c("M {x} {y}",{x:h,y:m}))},o.prototype.bezierCurveTo=function(h,m,w,b,C,E){this.__currentPosition={x:C,y:E},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:h,cp1y:m,cp2x:w,cp2y:b,x:C,y:E}))},o.prototype.quadraticCurveTo=function(h,m,w,b){this.__currentPosition={x:w,y:b},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:h,cpy:m,x:w,y:b}))};var g=function(h){var m=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return[h[0]/m,h[1]/m]};o.prototype.arcTo=function(h,m,w,b,C){var E=this.__currentPosition&&this.__currentPosition.x,x=this.__currentPosition&&this.__currentPosition.y;if(E!==void 0&&x!==void 0){if(C<0)throw new Error("IndexSizeError: The radius provided ("+C+") is negative.");if(E===h&&x===m||h===w&&m===b||C===0)this.lineTo(h,m);else{var k=g([E-h,x-m]),A=g([w-h,b-m]);if(k[0]*A[1]!=k[1]*A[0]){var p=k[0]*A[0]+k[1]*A[1],I=Math.acos(Math.abs(p)),M=g([k[0]+A[0],k[1]+A[1]]),B=C/Math.sin(I/2),P=h+B*M[0],L=m+B*M[1],O=[-k[1],k[0]],N=[A[1],-A[0]],z=function(j){var ie=j[0];return j[1]>=0?Math.acos(ie):-Math.acos(ie)},W=z(O),q=z(N);this.lineTo(P+O[0]*C,L+O[1]*C),this.arc(P,L,C,W,q)}else this.lineTo(h,m)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(h,m,w,b){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(h,m),this.lineTo(h+w,m),this.lineTo(h+w,m+b),this.lineTo(h,m+b),this.lineTo(h,m),this.closePath()},o.prototype.fillRect=function(h,m,w,b){var C;C=this.__createElement("rect",{x:h,y:m,width:w,height:b},!0),this.__closestGroupOrSvg().appendChild(C),this.__currentElement=C,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(h,m,w,b){var C;C=this.__createElement("rect",{x:h,y:m,width:w,height:b},!0),this.__closestGroupOrSvg().appendChild(C),this.__currentElement=C,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var h=this.__closestGroupOrSvg().getAttribute("transform"),m=this.__root.childNodes[1],w=m.childNodes,b=w.length-1;b>=0;b--)w[b]&&m.removeChild(w[b]);this.__currentElement=m,this.__groupStack=[],h&&this.__addTransform(h)},o.prototype.clearRect=function(h,m,w,b){if(h!==0||m!==0||w!==this.width||b!==this.height){var C,E=this.__closestGroupOrSvg();C=this.__createElement("rect",{x:h,y:m,width:w,height:b,fill:"#FFFFFF"},!0),E.appendChild(C)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(h,m,w,b){var C=this.__createElement("linearGradient",{id:f(this.__ids),x1:h+"px",x2:w+"px",y1:m+"px",y2:b+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(C),new s(C,this)},o.prototype.createRadialGradient=function(h,m,w,b,C,E){var x=this.__createElement("radialGradient",{id:f(this.__ids),cx:b+"px",cy:C+"px",r:E+"px",fx:h+"px",fy:m+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(x),new s(x,this)},o.prototype.__parseFont=function(){var h=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),m={style:h[1]||"normal",size:h[4]||"10px",family:h[6]||"sans-serif",weight:h[3]||"normal",decoration:h[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(m.decoration="underline"),this.__fontHref&&(m.href=this.__fontHref),m},o.prototype.__wrapTextLink=function(h,m){if(h.href){var w=this.__createElement("a");return w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.href),w.appendChild(m),w}return m},o.prototype.__applyText=function(h,m,w,b){var C,E,x=this.__parseFont(),k=this.__closestGroupOrSvg(),A=this.__createElement("text",{"font-family":x.family,"font-size":x.size,"font-style":x.style,"font-weight":x.weight,"text-decoration":x.decoration,x:m,y:w,"text-anchor":(C=this.textAlign,E={left:"start",right:"end",center:"middle",start:"start",end:"end"},E[C]||E.start),"dominant-baseline":v(this.textBaseline)},!0);A.appendChild(this.__document.createTextNode(h)),this.__currentElement=A,this.__applyStyleToCurrentElement(b),k.appendChild(this.__wrapTextLink(x,A))},o.prototype.fillText=function(h,m,w){this.__applyText(h,m,w,"fill")},o.prototype.strokeText=function(h,m,w){this.__applyText(h,m,w,"stroke")},o.prototype.measureText=function(h){return this.__ctx.font=this.font,this.__ctx.measureText(h)},o.prototype.arc=function(h,m,w,b,C,E){if(b!==C){(b%=2*Math.PI)===(C%=2*Math.PI)&&(C=(C+2*Math.PI-.001*(E?-1:1))%(2*Math.PI));var x=h+w*Math.cos(C),k=m+w*Math.sin(C),A=h+w*Math.cos(b),p=m+w*Math.sin(b),I=E?0:1,M=0,B=C-b;B<0&&(B+=2*Math.PI),M=E?B>Math.PI?0:1:B>Math.PI?1:0,this.lineTo(A,p),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:w,ry:w,xAxisRotation:0,largeArcFlag:M,sweepFlag:I,endX:x,endY:k})),this.__currentPosition={x,y:k}}},o.prototype.clip=function(){var h=this.__closestGroupOrSvg(),m=this.__createElement("clipPath"),w=f(this.__ids),b=this.__createElement("g");this.__applyCurrentDefaultPath(),h.removeChild(this.__currentElement),m.setAttribute("id",w),m.appendChild(this.__currentElement),this.__defs.appendChild(m),h.setAttribute("clip-path",c("url(#{id})",{id:w})),h.appendChild(b),this.__currentElement=b},o.prototype.drawImage=function(){var h,m,w,b,C,E,x,k,A,p,I,M,B,P=Array.prototype.slice.call(arguments),L=P[0],O=0,N=0;if(P.length===3)h=P[1],m=P[2],w=C=L.width,b=E=L.height;else if(P.length===5)h=P[1],m=P[2],w=P[3],b=P[4],C=L.width,E=L.height;else{if(P.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);O=P[1],N=P[2],C=P[3],E=P[4],h=P[5],m=P[6],w=P[7],b=P[8]}x=this.__closestGroupOrSvg(),this.__currentElement;var z="translate("+h+", "+m+")";if(L instanceof o){if((k=L.getSvg().cloneNode(!0)).childNodes&&k.childNodes.length>1){for(A=k.childNodes[0];A.childNodes.length;)B=A.childNodes[0].getAttribute("id"),this.__ids[B]=B,this.__defs.appendChild(A.childNodes[0]);if(p=k.childNodes[1]){var W,q=p.getAttribute("transform");W=q?q+" "+z:z,p.setAttribute("transform",W),x.appendChild(p)}}}else L.nodeName!=="CANVAS"&&L.nodeName!=="IMG"||((I=this.__createElement("image")).setAttribute("width",w),I.setAttribute("height",b),I.setAttribute("opacity",this.globalAlpha),I.setAttribute("preserveAspectRatio","none"),(M=this.__document.createElement("canvas")).width=w,M.height=b,M.getContext("2d").drawImage(L,O,N,C,E,0,0,w,b),L=M,I.setAttribute("transform",z),I.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",L.nodeName==="CANVAS"?L.toDataURL():L.getAttribute("src")),x.appendChild(I))},o.prototype.createPattern=function(h,m){var w,b=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),C=f(this.__ids);return b.setAttribute("id",C),b.setAttribute("width",h.width),b.setAttribute("height",h.height),h.nodeName==="CANVAS"||h.nodeName==="IMG"?((w=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",h.width),w.setAttribute("height",h.height),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.nodeName==="CANVAS"?h.toDataURL():h.getAttribute("src")),b.appendChild(w),this.__defs.appendChild(b)):h instanceof o&&(b.appendChild(h.__root.childNodes[1]),this.__defs.appendChild(b)),new u(b,this)},o.prototype.setLineDash=function(h){h&&h.length>0?this.lineDash=h.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof r.exports=="object"&&(r.exports=o)})()}])}))})(Lc)),Lc.exports}var nT=rT();const iT=qi(nT);wn.use(iT);var Mu=(t=>(t[t.VIEW=0]="VIEW",t[t.LAYOUT=1]="LAYOUT",t))(Mu||{});const Qn=document.createElement("a");document.body.appendChild(Qn);Qn.style.display="none";function Iu(t,e){const r=JSON.stringify(t),n=new Blob([r],{type:"application/json"}),i=window.URL.createObjectURL(n);Qn.href=i,Qn.download=e,Qn.click(),window.URL.revokeObjectURL(i),_e.debug("JSON File saved: "+e)}function oy(t,e){Qn.href=t,Qn.download=e,Qn.click(),window.URL.revokeObjectURL(t),_e.debug("File saved: "+e)}function aT(t){const e=t.cy.json();delete e.style,Iu(e,"snik.json")}function oT(t){const e={title:We.mainView.state.title,graph:We.mainView.state.cy.json(),options:t};delete e.graph.style;const r={tabs:[],state:ay(),mainGraph:e};for(const n of We.partViews){const i={title:n.state.title,graph:n.state.cy.json()};delete i.graph.style,r.tabs.push(i)}Iu(r,"snik-session.json")}function sT(t){const e={version:Jn,title:t.title,type:0,graph:t.cy.json()};delete e.graph.style,Iu(e,"snik-view.json")}function uT(t){const e=t.cy.nodes(":visible").map(n=>[n.data(et.ID),n.position()]),r={version:Jn,title:t.title,type:1,graph:e};Iu(r,"snik-layout.json")}function ys(t,e,r,n){const i={bg:e?"white":"black",full:r,maxWidth:void 0,maxHeight:void 0};n?(i.maxWidth=Fe.download.image.max.width,i.maxHeight=Fe.download.image.max.height):r&&(i.maxWidth=Fe.download.image.standard.width,i.maxHeight=Fe.download.image.standard.height);const a=t.cy.png(i);oy(a,"snik.png")}function mp(t,e,r=!0){const n={full:r,scale:1,bg:e?"white":"black"},i=t.cy.svg(n),a=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),o=window.URL.createObjectURL(a);oy(o,"snik.svg")}function Pu(t,e){const r=t.target.files[0],n=new FileReader;n.onload=()=>e(JSON.parse(n.result)),n.readAsText(r)}function iu(t,e){const r=t.cy;r.elements().remove(),r.json(e),r.elements().addClass("unfiltered");const n=1*t.cy.elements(":visible").size()/t.cy.elements().size(),i=n<.8;_e.debug("Load Graph from File: Visible fraction: "+n+" set star mode to "+i),t.cy.nodes(":child").size()>0&&(document.getElementById("combineMatchModeBox").checked=!0),t.starMode=i;const a=r.nodes(":visible");r.center(a),r.fit(a),r.elements().removeClass("highlighted"),r.elements().removeClass("source")}const lT=t=>e=>{Pu(e,r=>{iu(t,r)})};async function cT(t){confirm("This will override the current session. Continue?")&&Pu(t,async e=>{if(e.state.version!==Jn&&!confirm(`Your file was saved in version ${e.state.version}, but SNIK Graph has version ${Jn}, so it may not work properly. Continue anyway?`))return;We.reset();const r=new We(!1),n=[r.initialized];iu(r.state.graph,e.mainGraph.graph),We.activeView().setTitle(e.mainGraph.title);for(let i=0;i<e.tabs.length;i++){const a=new We(!1);n.push(a.initialized),iu(a.state.graph,e.tabs[i].graph),We.activeView().setTitle(e.tabs[i].title)}await Promise.all(n),tT(e.state)})}function sy(t,e){let r=!0,n=i=>`type ${i} (${Mu[i]})`;return e.version!==Jn&&!confirm(`Your file was saved in version ${e.version}, but SNIK Graph has version ${Jn}, so it may not work properly. Continue anyway?`)?r=!1:e.type===void 0?(alert("Unknown file format, aborting."),r=!1):e.type!==t&&(alert(`Your file was saved as ${n(e.type)}, but you are trying to load ${n(t)}, aborting.`),r=!1),r}function fT(t){Pu(t,e=>{if(!sy(Mu.VIEW,e))return;const r=new We(!1);iu(r.state.graph,e.graph),We.activeView().setTitle(e.title)})}function uy(t,e){if(!sy(Mu.LAYOUT,t))return;const r=e.cy;r.batch(()=>{const n=r.collection();n.merge(t.graph.flatMap(o=>{const s={x:o[1].x,y:o[1].y},u=r.nodes("node[id='"+o[0]+"']");if(u.size()===0)return _e.warn(`Node with id ${o[0]} was not found.`),null;const l=u.first();return l.unlock(),l.position(s),l}).filter(o=>o));const i=r.nodes().unmerge(n);i.forEach((o,s)=>{o.position({x:(1+s%20)*100,y:s*2})});const a=n.union(n.edges());wt.setVisible(a,!0),wt.setVisible(i,!1),r.elements().unselect(),r.center(n),r.fit(n),console.log("Loaded %d visible nodes into the graph. Hid %d nodes.",n.size(),i.size())})}function dT(t){console.groupCollapsed("Loading JSON Layout file into View."),Pu(t,e=>{uy(e,We.activeState().graph),console.info("Finished loading layout from file."),console.groupEnd()})}function Bc(t,e,r,n,i){const a=document.createElement("a");i.push(a),a.classList.add("dropdown-entry"),a.setAttribute("tabindex","-1"),t.appendChild(a);const o=document.createElement("input");o.type="file",o.style.display="none",a.appendChild(o);const s=document.createElement("span");s.innerText=r,s.setAttribute("data-i18n",e),a.appendChild(s),a.addEventListener("click",()=>o.click()),o.addEventListener("change",n)}function hT(t,e,r){Bc(e,"load-view","Load Partial Graph into Session",fT,r),Bc(e,"load-layout","Load Layout of Partial Graph into Session",dT,r),Bc(e,"load-session","Load Session",cT,r)}function Bn(t){return Array.isArray?Array.isArray(t):fy(t)==="[object Array]"}function vT(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function pT(t){return t==null?"":vT(t)}function mn(t){return typeof t=="string"}function ly(t){return typeof t=="number"}function gT(t){return t===!0||t===!1||mT(t)&&fy(t)=="[object Boolean]"}function cy(t){return typeof t=="object"}function mT(t){return cy(t)&&t!==null}function Pr(t){return t!=null}function Oc(t){return!t.trim().length}function fy(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const yT="Incorrect 'index' type",bT=t=>`Invalid value for key ${t}`,wT=t=>`Pattern length exceeds max of ${t}.`,xT=t=>`Missing ${t} property in key`,CT=t=>`Property 'weight' in key '${t}' must be a positive integer`,yp=Object.prototype.hasOwnProperty;class ET{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let i=dy(n);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dy(t){let e=null,r=null,n=null,i=1,a=null;if(mn(t)||Bn(t))n=t,e=bp(t),r=vf(t);else{if(!yp.call(t,"name"))throw new Error(xT("name"));const o=t.name;if(n=o,yp.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(CT(o));e=bp(o),r=vf(o),a=t.getFn}return{path:e,id:r,weight:i,src:n,getFn:a}}function bp(t){return Bn(t)?t:t.split(".")}function vf(t){return Bn(t)?t.join("."):t}function ST(t,e){let r=[],n=!1;const i=(a,o,s)=>{if(Pr(a))if(!o[s])r.push(a);else{let u=o[s];const l=a[u];if(!Pr(l))return;if(s===o.length-1&&(mn(l)||ly(l)||gT(l)))r.push(pT(l));else if(Bn(l)){n=!0;for(let c=0,f=l.length;c<f;c+=1)i(l[c],o,s+1)}else o.length&&i(l,o,s+1)}};return i(t,mn(e)?e.split("."):e,0),n?r:r[0]}const TT={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},kT={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},AT={location:0,threshold:.6,distance:100},_T={useExtendedSearch:!1,getFn:ST,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var at={...kT,...TT,...AT,..._T};const DT=/[^ ]+/g;function MT(t=1,e=3){const r=new Map,n=Math.pow(10,e);return{get(i){const a=i.match(DT).length;if(r.has(a))return r.get(a);const o=1/Math.pow(a,.5*t),s=parseFloat(Math.round(o*n)/n);return r.set(a,s),s},clear(){r.clear()}}}class Qf{constructor({getFn:e=at.getFn,fieldNormWeight:r=at.fieldNormWeight}={}){this.norm=MT(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,mn(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();mn(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!Pr(e)||Oc(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((i,a)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Pr(o)){if(Bn(o)){let s=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:l,value:c}=u.pop();if(Pr(c))if(mn(c)&&!Oc(c)){let f={v:c,i:l,n:this.norm.get(c)};s.push(f)}else Bn(c)&&c.forEach((f,v)=>{u.push({nestedArrIndex:v,value:f})})}n.$[a]=s}else if(mn(o)&&!Oc(o)){let s={v:o,n:this.norm.get(o)};n.$[a]=s}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function hy(t,e,{getFn:r=at.getFn,fieldNormWeight:n=at.fieldNormWeight}={}){const i=new Qf({getFn:r,fieldNormWeight:n});return i.setKeys(t.map(dy)),i.setSources(e),i.create(),i}function IT(t,{getFn:e=at.getFn,fieldNormWeight:r=at.fieldNormWeight}={}){const{keys:n,records:i}=t,a=new Qf({getFn:e,fieldNormWeight:r});return a.setKeys(n),a.setIndexRecords(i),a}function bs(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:i=at.distance,ignoreLocation:a=at.ignoreLocation}={}){const o=e/t.length;if(a)return o;const s=Math.abs(n-r);return i?o+s/i:s?1:o}function PT(t=[],e=at.minMatchCharLength){let r=[],n=-1,i=-1,a=0;for(let o=t.length;a<o;a+=1){let s=t[a];s&&n===-1?n=a:!s&&n!==-1&&(i=a-1,i-n+1>=e&&r.push([n,i]),n=-1)}return t[a-1]&&a-n>=e&&r.push([n,a-1]),r}const Ii=32;function LT(t,e,r,{location:n=at.location,distance:i=at.distance,threshold:a=at.threshold,findAllMatches:o=at.findAllMatches,minMatchCharLength:s=at.minMatchCharLength,includeMatches:u=at.includeMatches,ignoreLocation:l=at.ignoreLocation}={}){if(e.length>Ii)throw new Error(wT(Ii));const c=e.length,f=t.length,v=Math.max(0,Math.min(n,f));let g=a,h=v;const m=s>1||u,w=m?Array(f):[];let b;for(;(b=t.indexOf(e,h))>-1;){let p=bs(e,{currentLocation:b,expectedLocation:v,distance:i,ignoreLocation:l});if(g=Math.min(p,g),h=b+c,m){let I=0;for(;I<c;)w[b+I]=1,I+=1}}h=-1;let C=[],E=1,x=c+f;const k=1<<c-1;for(let p=0;p<c;p+=1){let I=0,M=x;for(;I<M;)bs(e,{errors:p,currentLocation:v+M,expectedLocation:v,distance:i,ignoreLocation:l})<=g?I=M:x=M,M=Math.floor((x-I)/2+I);x=M;let B=Math.max(1,v-M+1),P=o?f:Math.min(v+M,f)+c,L=Array(P+2);L[P+1]=(1<<p)-1;for(let N=P;N>=B;N-=1){let z=N-1,W=r[t.charAt(z)];if(m&&(w[z]=+!!W),L[N]=(L[N+1]<<1|1)&W,p&&(L[N]|=(C[N+1]|C[N])<<1|1|C[N+1]),L[N]&k&&(E=bs(e,{errors:p,currentLocation:z,expectedLocation:v,distance:i,ignoreLocation:l}),E<=g)){if(g=E,h=z,h<=v)break;B=Math.max(1,2*v-h)}}if(bs(e,{errors:p+1,currentLocation:v,expectedLocation:v,distance:i,ignoreLocation:l})>g)break;C=L}const A={isMatch:h>=0,score:Math.max(.001,E)};if(m){const p=PT(w,s);p.length?u&&(A.indices=p):A.isMatch=!1}return A}function BT(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const i=t.charAt(r);e[i]=(e[i]||0)|1<<n-r-1}return e}const au=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class vy{constructor(e,{location:r=at.location,threshold:n=at.threshold,distance:i=at.distance,includeMatches:a=at.includeMatches,findAllMatches:o=at.findAllMatches,minMatchCharLength:s=at.minMatchCharLength,isCaseSensitive:u=at.isCaseSensitive,ignoreDiacritics:l=at.ignoreDiacritics,ignoreLocation:c=at.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:a,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:u,ignoreDiacritics:l,ignoreLocation:c},e=u?e:e.toLowerCase(),e=l?au(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const f=(g,h)=>{this.chunks.push({pattern:g,alphabet:BT(g),startIndex:h})},v=this.pattern.length;if(v>Ii){let g=0;const h=v%Ii,m=v-h;for(;g<m;)f(this.pattern.substr(g,Ii),g),g+=Ii;if(h){const w=v-Ii;f(this.pattern.substr(w),w)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:i}=this.options;if(e=r?e:e.toLowerCase(),e=n?au(e):e,this.pattern===e){let m={isMatch:!0,score:0};return i&&(m.indices=[[0,e.length-1]]),m}const{location:a,distance:o,threshold:s,findAllMatches:u,minMatchCharLength:l,ignoreLocation:c}=this.options;let f=[],v=0,g=!1;this.chunks.forEach(({pattern:m,alphabet:w,startIndex:b})=>{const{isMatch:C,score:E,indices:x}=LT(e,m,w,{location:a+b,distance:o,threshold:s,findAllMatches:u,minMatchCharLength:l,includeMatches:i,ignoreLocation:c});C&&(g=!0),v+=E,C&&x&&(f=[...f,...x])});let h={isMatch:g,score:g?v/this.chunks.length:1};return g&&i&&(h.indices=f),h}}class fi{constructor(e){this.pattern=e}static isMultiMatch(e){return wp(e,this.multiRegex)}static isSingleMatch(e){return wp(e,this.singleRegex)}search(){}}function wp(t,e){const r=t.match(e);return r?r[1]:null}class OT extends fi{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class RT extends fi{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class NT extends fi{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class FT extends fi{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class zT extends fi{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class qT extends fi{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class py extends fi{constructor(e,{location:r=at.location,threshold:n=at.threshold,distance:i=at.distance,includeMatches:a=at.includeMatches,findAllMatches:o=at.findAllMatches,minMatchCharLength:s=at.minMatchCharLength,isCaseSensitive:u=at.isCaseSensitive,ignoreDiacritics:l=at.ignoreDiacritics,ignoreLocation:c=at.ignoreLocation}={}){super(e),this._bitapSearch=new vy(e,{location:r,threshold:n,distance:i,includeMatches:a,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:u,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class gy extends fi{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n;const i=[],a=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+a,i.push([n,r-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const pf=[OT,gy,NT,FT,qT,zT,RT,py],xp=pf.length,VT=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,HT="|";function $T(t,e={}){return t.split(HT).map(r=>{let n=r.trim().split(VT).filter(a=>a&&!!a.trim()),i=[];for(let a=0,o=n.length;a<o;a+=1){const s=n[a];let u=!1,l=-1;for(;!u&&++l<xp;){const c=pf[l];let f=c.isMultiMatch(s);f&&(i.push(new c(f,e)),u=!0)}if(!u)for(l=-1;++l<xp;){const c=pf[l];let f=c.isSingleMatch(s);if(f){i.push(new c(f,e));break}}}return i})}const WT=new Set([py.type,gy.type]);class UT{constructor(e,{isCaseSensitive:r=at.isCaseSensitive,ignoreDiacritics:n=at.ignoreDiacritics,includeMatches:i=at.includeMatches,minMatchCharLength:a=at.minMatchCharLength,ignoreLocation:o=at.ignoreLocation,findAllMatches:s=at.findAllMatches,location:u=at.location,threshold:l=at.threshold,distance:c=at.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:i,minMatchCharLength:a,findAllMatches:s,ignoreLocation:o,location:u,threshold:l,distance:c},e=r?e:e.toLowerCase(),e=n?au(e):e,this.pattern=e,this.query=$T(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i,ignoreDiacritics:a}=this.options;e=i?e:e.toLowerCase(),e=a?au(e):e;let o=0,s=[],u=0;for(let l=0,c=r.length;l<c;l+=1){const f=r[l];s.length=0,o=0;for(let v=0,g=f.length;v<g;v+=1){const h=f[v],{isMatch:m,indices:w,score:b}=h.search(e);if(m){if(o+=1,u+=b,n){const C=h.constructor.type;WT.has(C)?s=[...s,...w]:s.push(w)}}else{u=0,o=0,s.length=0;break}}if(o){let v={isMatch:!0,score:u/o};return n&&(v.indices=s),v}}return{isMatch:!1,score:1}}}const gf=[];function GT(...t){gf.push(...t)}function mf(t,e){for(let r=0,n=gf.length;r<n;r+=1){let i=gf[r];if(i.condition(t,e))return new i(t,e)}return new vy(t,e)}const ou={AND:"$and",OR:"$or"},yf={PATH:"$path",PATTERN:"$val"},bf=t=>!!(t[ou.AND]||t[ou.OR]),jT=t=>!!t[yf.PATH],KT=t=>!Bn(t)&&cy(t)&&!bf(t),Cp=t=>({[ou.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function my(t,e,{auto:r=!0}={}){const n=i=>{let a=Object.keys(i);const o=jT(i);if(!o&&a.length>1&&!bf(i))return n(Cp(i));if(KT(i)){const u=o?i[yf.PATH]:a[0],l=o?i[yf.PATTERN]:i[u];if(!mn(l))throw new Error(bT(u));const c={keyId:vf(u),pattern:l};return r&&(c.searcher=mf(l,e)),c}let s={children:[],operator:a[0]};return a.forEach(u=>{const l=i[u];Bn(l)&&l.forEach(c=>{s.children.push(n(c))})}),s};return bf(t)||(t=Cp(t)),n(t)}function XT(t,{ignoreFieldNorm:e=at.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:a,score:o})=>{const s=i?i.weight:null;n*=Math.pow(o===0&&s?Number.EPSILON:o,(s||1)*(e?1:a))}),r.score=n})}function YT(t,e){const r=t.matches;e.matches=[],Pr(r)&&r.forEach(n=>{if(!Pr(n.indices)||!n.indices.length)return;const{indices:i,value:a}=n;let o={indices:i,value:a};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function ZT(t,e){e.score=t.score}function QT(t,e,{includeMatches:r=at.includeMatches,includeScore:n=at.includeScore}={}){const i=[];return r&&i.push(YT),n&&i.push(ZT),t.map(a=>{const{idx:o}=a,s={item:e[o],refIndex:o};return i.length&&i.forEach(u=>{u(a,s)}),s})}class Ma{constructor(e,r={},n){this.options={...at,...r},this.options.useExtendedSearch,this._keyStore=new ET(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Qf))throw new Error(yT);this._myIndex=r||hy(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Pr(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let n=0,i=this._docs.length;n<i;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,i-=1,r.push(a))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:a,sortFn:o,ignoreFieldNorm:s}=this.options;let u=mn(e)?mn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return XT(u,{ignoreFieldNorm:s}),a&&u.sort(o),ly(r)&&r>-1&&(u=u.slice(0,r)),QT(u,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const r=mf(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:a,i:o,n:s})=>{if(!Pr(a))return;const{isMatch:u,score:l,indices:c}=r.searchIn(a);u&&i.push({item:a,idx:o,matches:[{score:l,value:a,norm:s,indices:c}]})}),i}_searchLogical(e){const r=my(e,this.options),n=(s,u,l)=>{if(!s.children){const{keyId:f,searcher:v}=s,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:v});return g&&g.length?[{idx:l,item:u,matches:g}]:[]}const c=[];for(let f=0,v=s.children.length;f<v;f+=1){const g=s.children[f],h=n(g,u,l);if(h.length)c.push(...h);else if(s.operator===ou.AND)return[]}return c},i=this._myIndex.records,a={},o=[];return i.forEach(({$:s,i:u})=>{if(Pr(s)){let l=n(r,s,u);l.length&&(a[u]||(a[u]={idx:u,item:s,matches:[]},o.push(a[u])),l.forEach(({matches:c})=>{a[u].matches.push(...c)}))}}),o}_searchObjectList(e){const r=mf(e,this.options),{keys:n,records:i}=this._myIndex,a=[];return i.forEach(({$:o,i:s})=>{if(!Pr(o))return;let u=[];n.forEach((l,c)=>{u.push(...this._findMatches({key:l,value:o[c],searcher:r}))}),u.length&&a.push({idx:s,item:o,matches:u})}),a}_findMatches({key:e,value:r,searcher:n}){if(!Pr(r))return[];let i=[];if(Bn(r))r.forEach(({v:a,i:o,n:s})=>{if(!Pr(a))return;const{isMatch:u,score:l,indices:c}=n.searchIn(a);u&&i.push({score:l,key:e,value:a,idx:o,norm:s,indices:c})});else{const{v:a,n:o}=r,{isMatch:s,score:u,indices:l}=n.searchIn(a);s&&i.push({score:u,key:e,value:a,norm:o,indices:l})}return i}}Ma.version="7.1.0";Ma.createIndex=hy;Ma.parseIndex=IT;Ma.config=at;Ma.parseQuery=my;GT(UT);let wf=null;const JT={shouldSort:!0,tokenize:!0,threshold:.25,maxPatternLength:40,minMatchCharLength:3,matchAllTokens:!0,location:0,ignoreLocation:!0,distance:100,id:"uri",keys:[{name:"l",weight:.7},{name:"def",weight:.3}]};async function ek(){typeof window<"u"&&console.groupCollapsed("Create Fuse.js index");const t=Ca("Create Fuse search index");_e.debug("Create Fuse Search Index with searchCloseMatch = "+Fe.searchCloseMatch);const e=`select
  ?c as ?uri
  group_concat(distinct(str(?l));separator="|") as ?l
  group_concat(distinct(str(?def));separator="|") as ?def
  from <${Fe.ontology.sparql.graph}>
  {
    {
     {?c a owl:Class.} UNION {?c a [a owl:Class]}
     ?c rdfs:label ?l.
    }
    UNION {?c skos:altLabel ?l.}
    UNION {?c skos:closeMatch|^skos:closeMatch ?cm. ?cm rdfs:label|skos:altLabel ?l.}
    OPTIONAL {?c skos:definition ?def.}
  }`,r=await Rn(e),n=[];for(const i of r){const a=i.uri.value.replace(/.*\//,""),o={uri:i.uri.value,l:[...i.l.value.split("|"),a]};n.push(o),o.l=[...new Set(o.l)],i.def.value&&(o.def=i.def.value)}return wf=new Ma(n,JT),t.stop(n.length+" items"),typeof window<"u"&&console.groupEnd(),n}async function tk(t){return wf||await ek(),wf.search(t)}const Rc=100;class rk{constructor(e){At(this,"resultNodes",[]);e.addEventListener("submit",r=>{r.preventDefault(),lo(()=>this.showSearch(r.target.children.query.value))}),_e.debug("search initialized")}showSearchResults(e,r){this.resultNodes=[];const n=Lr("tab:search-results");for(;n.rows.length>0;)n.deleteRow(0);if(r.length===0)return Lr("h2:search-results").innerHTML=`No Search Results for "${e}"`,!1;if(r.length===1)return Qr.close("search-results"),We.activeState().graph.presentUri(r[0]),!0;r.length===Rc?Lr("h2:search-results").innerHTML=`First ${Rc} Search Results for "${e}"`:Lr("h2:search-results").innerHTML=`${r.length} Search Results for "${e}"`;const i={};r.forEach(s=>{const u=We.activeState().cy.getElementById(s)[0];u?(i[s]=0,u.hasClass("hidden")&&!u.hasClass("filtered")?i[s]=1:u.hasClass("filtered")&&(i[s]=2)):i[s]=3});const a=new Set;r.sort((s,u)=>i[s]-i[u]),r.forEach(s=>{const u=n.insertRow(),l=u.insertCell(),c=document.createElement("input");c.type="checkbox",l.appendChild(c),l.addEventListener("change",h=>{a[h.target.checked?"add":"remove"](s)});const f=u.insertCell(),v=u.insertCell();window.presentUri=We.activeState().graph.presentUri,f.innerHTML=`<a class="search-class${i[s]}" href="javascript:MicroModal.close('search-results');window.presentUri('${s}');void(0)">
          ${s.replace(eg.PREFIX,"")}</a>`;const g=`<a class="search-class${i[s]}" href="${s}" target="_blank">Description</a>`;v.innerHTML=g});const o=n.insertRow(0);o.insertCell();{const s=o.insertCell();s.innerHTML="<a href='#'>Highlight All</a>",s.addEventListener("click",u=>{Qr.close("search-results"),We.activeState().graph.presentUris(r),u.preventDefault()})}{const s=o.insertCell();s.innerHTML="<a href='#'>Highlight Selected</a>",s.addEventListener("click",u=>{Qr.close("search-results"),We.activeState().graph.presentUris([...a]),u.preventDefault()})}return!0}async search(e){const n=`select distinct(?s) { {?s a owl:Class.} UNION {?s a rdf:Property.}
        {?s rdfs:label ?l.} UNION {?s skos:altLabel ?l.}	filter(regex(lcase(replace(str(?l),"[ -]","")),lcase("${e.replace(/[\x22\x27\x5C\x0A\x0D -]/g,"")}"))) } order by asc(strlen(str(?l))) limit ${Rc}`;return _e.debug(n),(await Rn(n)).map(a=>a.s.value)}async showSearch(e){Qr.show("search-results");const n=(await tk(e)).map(i=>i.item.uri);return this.showSearchResults(e,n),!1}}var Mr="top",Gr="bottom",jr="right",Ir="left",Jf="auto",Fo=[Mr,Gr,jr,Ir],ga="start",Eo="end",nk="clippingParents",yy="viewport",ja="popper",ik="reference",Ep=Fo.reduce(function(t,e){return t.concat([e+"-"+ga,e+"-"+Eo])},[]),by=[].concat(Fo,[Jf]).reduce(function(t,e){return t.concat([e,e+"-"+ga,e+"-"+Eo])},[]),ak="beforeRead",ok="read",sk="afterRead",uk="beforeMain",lk="main",ck="afterMain",fk="beforeWrite",dk="write",hk="afterWrite",vk=[ak,ok,sk,uk,lk,ck,fk,dk,hk];function xn(t){return t?(t.nodeName||"").toLowerCase():null}function Rr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function zi(t){var e=Rr(t).Element;return t instanceof e||t instanceof Element}function Ur(t){var e=Rr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ed(t){if(typeof ShadowRoot>"u")return!1;var e=Rr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function pk(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!Ur(a)||!xn(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function gk(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),s=o.reduce(function(u,l){return u[l]="",u},{});!Ur(i)||!xn(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}const wy={name:"applyStyles",enabled:!0,phase:"write",fn:pk,effect:gk,requires:["computeStyles"]};function yn(t){return t.split("-")[0]}var Li=Math.max,su=Math.min,ma=Math.round;function xf(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function xy(){return!/^((?!chrome|android).)*safari/i.test(xf())}function ya(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&Ur(t)&&(i=t.offsetWidth>0&&ma(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&ma(n.height)/t.offsetHeight||1);var o=zi(t)?Rr(t):window,s=o.visualViewport,u=!xy()&&r,l=(n.left+(u&&s?s.offsetLeft:0))/i,c=(n.top+(u&&s?s.offsetTop:0))/a,f=n.width/i,v=n.height/a;return{width:f,height:v,top:c,right:l+f,bottom:c+v,left:l,x:l,y:c}}function td(t){var e=ya(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function Cy(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&ed(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function On(t){return Rr(t).getComputedStyle(t)}function mk(t){return["table","td","th"].indexOf(xn(t))>=0}function di(t){return((zi(t)?t.ownerDocument:t.document)||window.document).documentElement}function Lu(t){return xn(t)==="html"?t:t.assignedSlot||t.parentNode||(ed(t)?t.host:null)||di(t)}function Sp(t){return!Ur(t)||On(t).position==="fixed"?null:t.offsetParent}function yk(t){var e=/firefox/i.test(xf()),r=/Trident/i.test(xf());if(r&&Ur(t)){var n=On(t);if(n.position==="fixed")return null}var i=Lu(t);for(ed(i)&&(i=i.host);Ur(i)&&["html","body"].indexOf(xn(i))<0;){var a=On(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function zo(t){for(var e=Rr(t),r=Sp(t);r&&mk(r)&&On(r).position==="static";)r=Sp(r);return r&&(xn(r)==="html"||xn(r)==="body"&&On(r).position==="static")?e:r||yk(t)||e}function rd(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ao(t,e,r){return Li(t,su(e,r))}function bk(t,e,r){var n=ao(t,e,r);return n>r?r:n}function Ey(){return{top:0,right:0,bottom:0,left:0}}function Sy(t){return Object.assign({},Ey(),t)}function Ty(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var wk=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Sy(typeof e!="number"?e:Ty(e,Fo))};function xk(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,o=r.modifiersData.popperOffsets,s=yn(r.placement),u=rd(s),l=[Ir,jr].indexOf(s)>=0,c=l?"height":"width";if(!(!a||!o)){var f=wk(i.padding,r),v=td(a),g=u==="y"?Mr:Ir,h=u==="y"?Gr:jr,m=r.rects.reference[c]+r.rects.reference[u]-o[u]-r.rects.popper[c],w=o[u]-r.rects.reference[u],b=zo(a),C=b?u==="y"?b.clientHeight||0:b.clientWidth||0:0,E=m/2-w/2,x=f[g],k=C-v[c]-f[h],A=C/2-v[c]/2+E,p=ao(x,A,k),I=u;r.modifiersData[n]=(e={},e[I]=p,e.centerOffset=p-A,e)}}function Ck(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Cy(e.elements.popper,i)&&(e.elements.arrow=i))}const Ek={name:"arrow",enabled:!0,phase:"main",fn:xk,effect:Ck,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ba(t){return t.split("-")[1]}var Sk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Tk(t,e){var r=t.x,n=t.y,i=e.devicePixelRatio||1;return{x:ma(r*i)/i||0,y:ma(n*i)/i||0}}function Tp(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,o=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,f=t.isFixed,v=o.x,g=v===void 0?0:v,h=o.y,m=h===void 0?0:h,w=typeof c=="function"?c({x:g,y:m}):{x:g,y:m};g=w.x,m=w.y;var b=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),E=Ir,x=Mr,k=window;if(l){var A=zo(r),p="clientHeight",I="clientWidth";if(A===Rr(r)&&(A=di(r),On(A).position!=="static"&&s==="absolute"&&(p="scrollHeight",I="scrollWidth")),A=A,i===Mr||(i===Ir||i===jr)&&a===Eo){x=Gr;var M=f&&A===k&&k.visualViewport?k.visualViewport.height:A[p];m-=M-n.height,m*=u?1:-1}if(i===Ir||(i===Mr||i===Gr)&&a===Eo){E=jr;var B=f&&A===k&&k.visualViewport?k.visualViewport.width:A[I];g-=B-n.width,g*=u?1:-1}}var P=Object.assign({position:s},l&&Sk),L=c===!0?Tk({x:g,y:m},Rr(r)):{x:g,y:m};if(g=L.x,m=L.y,u){var O;return Object.assign({},P,(O={},O[x]=C?"0":"",O[E]=b?"0":"",O.transform=(k.devicePixelRatio||1)<=1?"translate("+g+"px, "+m+"px)":"translate3d("+g+"px, "+m+"px, 0)",O))}return Object.assign({},P,(e={},e[x]=C?m+"px":"",e[E]=b?g+"px":"",e.transform="",e))}function kk(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,o=a===void 0?!0:a,s=r.roundOffsets,u=s===void 0?!0:s,l={placement:yn(e.placement),variation:ba(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Tp(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Tp(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ak={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kk,data:{}};var ws={passive:!0};function _k(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,o=n.resize,s=o===void 0?!0:o,u=Rr(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&l.forEach(function(c){c.addEventListener("scroll",r.update,ws)}),s&&u.addEventListener("resize",r.update,ws),function(){a&&l.forEach(function(c){c.removeEventListener("scroll",r.update,ws)}),s&&u.removeEventListener("resize",r.update,ws)}}const Dk={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:_k,data:{}};var Mk={left:"right",right:"left",bottom:"top",top:"bottom"};function Ns(t){return t.replace(/left|right|bottom|top/g,function(e){return Mk[e]})}var Ik={start:"end",end:"start"};function kp(t){return t.replace(/start|end/g,function(e){return Ik[e]})}function nd(t){var e=Rr(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ad(t){return ya(di(t)).left+nd(t).scrollLeft}function Pk(t,e){var r=Rr(t),n=di(t),i=r.visualViewport,a=n.clientWidth,o=n.clientHeight,s=0,u=0;if(i){a=i.width,o=i.height;var l=xy();(l||!l&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:s+ad(t),y:u}}function Lk(t){var e,r=di(t),n=nd(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=Li(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Li(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+ad(t),u=-n.scrollTop;return On(i||r).direction==="rtl"&&(s+=Li(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:u}}function od(t){var e=On(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function ky(t){return["html","body","#document"].indexOf(xn(t))>=0?t.ownerDocument.body:Ur(t)&&od(t)?t:ky(Lu(t))}function oo(t,e){var r;e===void 0&&(e=[]);var n=ky(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=Rr(n),o=i?[a].concat(a.visualViewport||[],od(n)?n:[]):n,s=e.concat(o);return i?s:s.concat(oo(Lu(o)))}function Cf(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Bk(t,e){var r=ya(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function Ap(t,e,r){return e===yy?Cf(Pk(t,r)):zi(e)?Bk(e,r):Cf(Lk(di(t)))}function Ok(t){var e=oo(Lu(t)),r=["absolute","fixed"].indexOf(On(t).position)>=0,n=r&&Ur(t)?zo(t):t;return zi(n)?e.filter(function(i){return zi(i)&&Cy(i,n)&&xn(i)!=="body"}):[]}function Rk(t,e,r,n){var i=e==="clippingParents"?Ok(t):[].concat(e),a=[].concat(i,[r]),o=a[0],s=a.reduce(function(u,l){var c=Ap(t,l,n);return u.top=Li(c.top,u.top),u.right=su(c.right,u.right),u.bottom=su(c.bottom,u.bottom),u.left=Li(c.left,u.left),u},Ap(t,o,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ay(t){var e=t.reference,r=t.element,n=t.placement,i=n?yn(n):null,a=n?ba(n):null,o=e.x+e.width/2-r.width/2,s=e.y+e.height/2-r.height/2,u;switch(i){case Mr:u={x:o,y:e.y-r.height};break;case Gr:u={x:o,y:e.y+e.height};break;case jr:u={x:e.x+e.width,y:s};break;case Ir:u={x:e.x-r.width,y:s};break;default:u={x:e.x,y:e.y}}var l=i?rd(i):null;if(l!=null){var c=l==="y"?"height":"width";switch(a){case ga:u[l]=u[l]-(e[c]/2-r[c]/2);break;case Eo:u[l]=u[l]+(e[c]/2-r[c]/2);break}}return u}function So(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,o=a===void 0?t.strategy:a,s=r.boundary,u=s===void 0?nk:s,l=r.rootBoundary,c=l===void 0?yy:l,f=r.elementContext,v=f===void 0?ja:f,g=r.altBoundary,h=g===void 0?!1:g,m=r.padding,w=m===void 0?0:m,b=Sy(typeof w!="number"?w:Ty(w,Fo)),C=v===ja?ik:ja,E=t.rects.popper,x=t.elements[h?C:v],k=Rk(zi(x)?x:x.contextElement||di(t.elements.popper),u,c,o),A=ya(t.elements.reference),p=Ay({reference:A,element:E,placement:i}),I=Cf(Object.assign({},E,p)),M=v===ja?I:A,B={top:k.top-M.top+b.top,bottom:M.bottom-k.bottom+b.bottom,left:k.left-M.left+b.left,right:M.right-k.right+b.right},P=t.modifiersData.offset;if(v===ja&&P){var L=P[i];Object.keys(B).forEach(function(O){var N=[jr,Gr].indexOf(O)>=0?1:-1,z=[Mr,Gr].indexOf(O)>=0?"y":"x";B[O]+=L[z]*N})}return B}function Nk(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,o=r.padding,s=r.flipVariations,u=r.allowedAutoPlacements,l=u===void 0?by:u,c=ba(n),f=c?s?Ep:Ep.filter(function(h){return ba(h)===c}):Fo,v=f.filter(function(h){return l.indexOf(h)>=0});v.length===0&&(v=f);var g=v.reduce(function(h,m){return h[m]=So(t,{placement:m,boundary:i,rootBoundary:a,padding:o})[yn(m)],h},{});return Object.keys(g).sort(function(h,m){return g[h]-g[m]})}function Fk(t){if(yn(t)===Jf)return[];var e=Ns(t);return[kp(t),e,kp(e)]}function zk(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,o=r.altAxis,s=o===void 0?!0:o,u=r.fallbackPlacements,l=r.padding,c=r.boundary,f=r.rootBoundary,v=r.altBoundary,g=r.flipVariations,h=g===void 0?!0:g,m=r.allowedAutoPlacements,w=e.options.placement,b=yn(w),C=b===w,E=u||(C||!h?[Ns(w)]:Fk(w)),x=[w].concat(E).reduce(function(K,V){return K.concat(yn(V)===Jf?Nk(e,{placement:V,boundary:c,rootBoundary:f,padding:l,flipVariations:h,allowedAutoPlacements:m}):V)},[]),k=e.rects.reference,A=e.rects.popper,p=new Map,I=!0,M=x[0],B=0;B<x.length;B++){var P=x[B],L=yn(P),O=ba(P)===ga,N=[Mr,Gr].indexOf(L)>=0,z=N?"width":"height",W=So(e,{placement:P,boundary:c,rootBoundary:f,altBoundary:v,padding:l}),q=N?O?jr:Ir:O?Gr:Mr;k[z]>A[z]&&(q=Ns(q));var j=Ns(q),ie=[];if(a&&ie.push(W[L]<=0),s&&ie.push(W[q]<=0,W[j]<=0),ie.every(function(K){return K})){M=P,I=!1;break}p.set(P,ie)}if(I)for(var ne=h?3:1,Y=function(V){var Q=x.find(function(oe){var he=p.get(oe);if(he)return he.slice(0,V).every(function(re){return re})});if(Q)return M=Q,"break"},H=ne;H>0;H--){var G=Y(H);if(G==="break")break}e.placement!==M&&(e.modifiersData[n]._skip=!0,e.placement=M,e.reset=!0)}}const qk={name:"flip",enabled:!0,phase:"main",fn:zk,requiresIfExists:["offset"],data:{_skip:!1}};function _p(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Dp(t){return[Mr,jr,Gr,Ir].some(function(e){return t[e]>=0})}function Vk(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=So(e,{elementContext:"reference"}),s=So(e,{altBoundary:!0}),u=_p(o,n),l=_p(s,i,a),c=Dp(u),f=Dp(l);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const Hk={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vk};function $k(t,e,r){var n=yn(t),i=[Ir,Mr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Ir,jr].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function Wk(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,o=by.reduce(function(c,f){return c[f]=$k(f,e.rects,a),c},{}),s=o[e.placement],u=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[n]=o}const Uk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Wk};function Gk(t){var e=t.state,r=t.name;e.modifiersData[r]=Ay({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const jk={name:"popperOffsets",enabled:!0,phase:"read",fn:Gk,data:{}};function Kk(t){return t==="x"?"y":"x"}function Xk(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,o=r.altAxis,s=o===void 0?!1:o,u=r.boundary,l=r.rootBoundary,c=r.altBoundary,f=r.padding,v=r.tether,g=v===void 0?!0:v,h=r.tetherOffset,m=h===void 0?0:h,w=So(e,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),b=yn(e.placement),C=ba(e.placement),E=!C,x=rd(b),k=Kk(x),A=e.modifiersData.popperOffsets,p=e.rects.reference,I=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,B=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(A){if(a){var O,N=x==="y"?Mr:Ir,z=x==="y"?Gr:jr,W=x==="y"?"height":"width",q=A[x],j=q+w[N],ie=q-w[z],ne=g?-I[W]/2:0,Y=C===ga?p[W]:I[W],H=C===ga?-I[W]:-p[W],G=e.elements.arrow,K=g&&G?td(G):{width:0,height:0},V=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ey(),Q=V[N],oe=V[z],he=ao(0,p[W],K[W]),re=E?p[W]/2-ne-he-Q-B.mainAxis:Y-he-Q-B.mainAxis,Z=E?-p[W]/2+ne+he+oe+B.mainAxis:H+he+oe+B.mainAxis,ue=e.elements.arrow&&zo(e.elements.arrow),ae=ue?x==="y"?ue.clientTop||0:ue.clientLeft||0:0,me=(O=P==null?void 0:P[x])!=null?O:0,Ae=q+re-me-ae,Ve=q+Z-me,rt=ao(g?su(j,Ae):j,q,g?Li(ie,Ve):ie);A[x]=rt,L[x]=rt-q}if(s){var Le,Ue=x==="x"?Mr:Ir,Ee=x==="x"?Gr:jr,ge=A[k],xe=k==="y"?"height":"width",Te=ge+w[Ue],Me=ge-w[Ee],ze=[Mr,Ir].indexOf(b)!==-1,Se=(Le=P==null?void 0:P[k])!=null?Le:0,Ie=ze?Te:ge-p[xe]-I[xe]-Se+B.altAxis,ot=ze?ge+p[xe]+I[xe]-Se-B.altAxis:Me,lt=g&&ze?bk(Ie,ge,ot):ao(g?Ie:Te,ge,g?ot:Me);A[k]=lt,L[k]=lt-ge}e.modifiersData[n]=L}}const Yk={name:"preventOverflow",enabled:!0,phase:"main",fn:Xk,requiresIfExists:["offset"]};function Zk(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Qk(t){return t===Rr(t)||!Ur(t)?nd(t):Zk(t)}function Jk(t){var e=t.getBoundingClientRect(),r=ma(e.width)/t.offsetWidth||1,n=ma(e.height)/t.offsetHeight||1;return r!==1||n!==1}function eA(t,e,r){r===void 0&&(r=!1);var n=Ur(e),i=Ur(e)&&Jk(e),a=di(e),o=ya(t,i,r),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((xn(e)!=="body"||od(a))&&(s=Qk(e)),Ur(e)?(u=ya(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=ad(a))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function tA(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!r.has(s)){var u=e.get(s);u&&i(u)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function rA(t){var e=tA(t);return vk.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function nA(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function iA(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Mp={placement:"bottom",modifiers:[],strategy:"absolute"};function Ip(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function aA(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?Mp:i;return function(s,u,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mp,a),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},f=[],v=!1,g={state:c,setOptions:function(b){var C=typeof b=="function"?b(c.options):b;m(),c.options=Object.assign({},a,c.options,C),c.scrollParents={reference:zi(s)?oo(s):s.contextElement?oo(s.contextElement):[],popper:oo(u)};var E=rA(iA([].concat(n,c.options.modifiers)));return c.orderedModifiers=E.filter(function(x){return x.enabled}),h(),g.update()},forceUpdate:function(){if(!v){var b=c.elements,C=b.reference,E=b.popper;if(Ip(C,E)){c.rects={reference:eA(C,zo(E),c.options.strategy==="fixed"),popper:td(E)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(B){return c.modifiersData[B.name]=Object.assign({},B.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var k=c.orderedModifiers[x],A=k.fn,p=k.options,I=p===void 0?{}:p,M=k.name;typeof A=="function"&&(c=A({state:c,options:I,name:M,instance:g})||c)}}}},update:nA(function(){return new Promise(function(w){g.forceUpdate(),w(c)})}),destroy:function(){m(),v=!0}};if(!Ip(s,u))return g;g.setOptions(l).then(function(w){!v&&l.onFirstUpdate&&l.onFirstUpdate(w)});function h(){c.orderedModifiers.forEach(function(w){var b=w.name,C=w.options,E=C===void 0?{}:C,x=w.effect;if(typeof x=="function"){var k=x({state:c,name:b,instance:g,options:E}),A=function(){};f.push(k||A)}})}function m(){f.forEach(function(w){return w()}),f=[]}return g}}var oA=[Dk,jk,Ak,wy,Uk,qk,Yk,Ek,Hk],sA=aA({defaultModifiers:oA}),uA="tippy-box",_y="tippy-content",lA="tippy-backdrop",Dy="tippy-arrow",My="tippy-svg-arrow",Ai={passive:!0,capture:!0},Iy=function(){return document.body};function Nc(t,e,r){if(Array.isArray(t)){var n=t[e];return n??(Array.isArray(r)?r[e]:r)}return t}function sd(t,e){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(e+"]")>-1}function Py(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Pp(t,e){if(e===0)return t;var r;return function(n){clearTimeout(r),r=setTimeout(function(){t(n)},e)}}function cA(t){return t.split(/\s+/).filter(Boolean)}function ia(t){return[].concat(t)}function Lp(t,e){t.indexOf(e)===-1&&t.push(e)}function fA(t){return t.filter(function(e,r){return t.indexOf(e)===r})}function dA(t){return t.split("-")[0]}function uu(t){return[].slice.call(t)}function Bp(t){return Object.keys(t).reduce(function(e,r){return t[r]!==void 0&&(e[r]=t[r]),e},{})}function so(){return document.createElement("div")}function Bu(t){return["Element","Fragment"].some(function(e){return sd(t,e)})}function hA(t){return sd(t,"NodeList")}function vA(t){return sd(t,"MouseEvent")}function pA(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function gA(t){return Bu(t)?[t]:hA(t)?uu(t):Array.isArray(t)?t:uu(document.querySelectorAll(t))}function Fc(t,e){t.forEach(function(r){r&&(r.style.transitionDuration=e+"ms")})}function Op(t,e){t.forEach(function(r){r&&r.setAttribute("data-state",e)})}function mA(t){var e,r=ia(t),n=r[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function yA(t,e){var r=e.clientX,n=e.clientY;return t.every(function(i){var a=i.popperRect,o=i.popperState,s=i.props,u=s.interactiveBorder,l=dA(o.placement),c=o.modifiersData.offset;if(!c)return!0;var f=l==="bottom"?c.top.y:0,v=l==="top"?c.bottom.y:0,g=l==="right"?c.left.x:0,h=l==="left"?c.right.x:0,m=a.top-n+f>u,w=n-a.bottom-v>u,b=a.left-r+g>u,C=r-a.right-h>u;return m||w||b||C})}function zc(t,e,r){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[n](i,r)})}function Rp(t,e){for(var r=e;r;){var n;if(t.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var pn={isTouch:!1},Np=0;function bA(){pn.isTouch||(pn.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ly))}function Ly(){var t=performance.now();t-Np<20&&(pn.isTouch=!1,document.removeEventListener("mousemove",Ly)),Np=t}function wA(){var t=document.activeElement;if(pA(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function xA(){document.addEventListener("touchstart",bA,Ai),window.addEventListener("blur",wA)}var CA=typeof window<"u"&&typeof document<"u",EA=CA?!!window.msCrypto:!1,SA={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},TA={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Jr=Object.assign({appendTo:Iy,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},SA,TA),kA=Object.keys(Jr),AA=function(e){var r=Object.keys(e);r.forEach(function(n){Jr[n]=e[n]})};function By(t){var e=t.plugins||[],r=e.reduce(function(n,i){var a=i.name,o=i.defaultValue;if(a){var s;n[a]=t[a]!==void 0?t[a]:(s=Jr[a])!=null?s:o}return n},{});return Object.assign({},t,r)}function _A(t,e){var r=e?Object.keys(By(Object.assign({},Jr,{plugins:e}))):kA,n=r.reduce(function(i,a){var o=(t.getAttribute("data-tippy-"+a)||"").trim();if(!o)return i;if(a==="content")i[a]=o;else try{i[a]=JSON.parse(o)}catch{i[a]=o}return i},{});return n}function Fp(t,e){var r=Object.assign({},e,{content:Py(e.content,[t])},e.ignoreAttributes?{}:_A(t,e.plugins));return r.aria=Object.assign({},Jr.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?e.interactive:r.aria.expanded,content:r.aria.content==="auto"?e.interactive?null:"describedby":r.aria.content},r}var DA=function(){return"innerHTML"};function Ef(t,e){t[DA()]=e}function zp(t){var e=so();return t===!0?e.className=Dy:(e.className=My,Bu(t)?e.appendChild(t):Ef(e,t)),e}function qp(t,e){Bu(e.content)?(Ef(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Ef(t,e.content):t.textContent=e.content)}function Sf(t){var e=t.firstElementChild,r=uu(e.children);return{box:e,content:r.find(function(n){return n.classList.contains(_y)}),arrow:r.find(function(n){return n.classList.contains(Dy)||n.classList.contains(My)}),backdrop:r.find(function(n){return n.classList.contains(lA)})}}function Oy(t){var e=so(),r=so();r.className=uA,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=so();n.className=_y,n.setAttribute("data-state","hidden"),qp(n,t.props),e.appendChild(r),r.appendChild(n),i(t.props,t.props);function i(a,o){var s=Sf(e),u=s.box,l=s.content,c=s.arrow;o.theme?u.setAttribute("data-theme",o.theme):u.removeAttribute("data-theme"),typeof o.animation=="string"?u.setAttribute("data-animation",o.animation):u.removeAttribute("data-animation"),o.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?u.setAttribute("role",o.role):u.removeAttribute("role"),(a.content!==o.content||a.allowHTML!==o.allowHTML)&&qp(l,t.props),o.arrow?c?a.arrow!==o.arrow&&(u.removeChild(c),u.appendChild(zp(o.arrow))):u.appendChild(zp(o.arrow)):c&&u.removeChild(c)}return{popper:e,onUpdate:i}}Oy.$$tippy=!0;var MA=1,xs=[],qc=[];function IA(t,e){var r=Fp(t,Object.assign({},Jr,By(Bp(e)))),n,i,a,o=!1,s=!1,u=!1,l=!1,c,f,v,g=[],h=Pp(Ae,r.interactiveDebounce),m,w=MA++,b=null,C=fA(r.plugins),E={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},x={id:w,reference:t,popper:so(),popperInstance:b,props:r,state:E,plugins:C,clearDelayTimeouts:Ie,setProps:ot,setContent:lt,show:Qe,hide:Ye,hideWithInteractivity:Oe,enable:ze,disable:Se,unmount:ve,destroy:F};if(!r.render)return x;var k=r.render(x),A=k.popper,p=k.onUpdate;A.setAttribute("data-tippy-root",""),A.id="tippy-"+x.id,x.popper=A,t._tippy=x,A._tippy=x;var I=C.map(function($){return $.fn(x)}),M=t.hasAttribute("aria-expanded");return ue(),ne(),q(),j("onCreate",[x]),r.showOnCreate&&Te(),A.addEventListener("mouseenter",function(){x.props.interactive&&x.state.isVisible&&x.clearDelayTimeouts()}),A.addEventListener("mouseleave",function(){x.props.interactive&&x.props.trigger.indexOf("mouseenter")>=0&&N().addEventListener("mousemove",h)}),x;function B(){var $=x.props.touch;return Array.isArray($)?$:[$,0]}function P(){return B()[0]==="hold"}function L(){var $;return!!(($=x.props.render)!=null&&$.$$tippy)}function O(){return m||t}function N(){var $=O().parentNode;return $?mA($):document}function z(){return Sf(A)}function W($){return x.state.isMounted&&!x.state.isVisible||pn.isTouch||c&&c.type==="focus"?0:Nc(x.props.delay,$?0:1,Jr.delay)}function q($){$===void 0&&($=!1),A.style.pointerEvents=x.props.interactive&&!$?"":"none",A.style.zIndex=""+x.props.zIndex}function j($,ee,le){if(le===void 0&&(le=!0),I.forEach(function(ke){ke[$]&&ke[$].apply(ke,ee)}),le){var ce;(ce=x.props)[$].apply(ce,ee)}}function ie(){var $=x.props.aria;if($.content){var ee="aria-"+$.content,le=A.id,ce=ia(x.props.triggerTarget||t);ce.forEach(function(ke){var be=ke.getAttribute(ee);if(x.state.isVisible)ke.setAttribute(ee,be?be+" "+le:le);else{var qe=be&&be.replace(le,"").trim();qe?ke.setAttribute(ee,qe):ke.removeAttribute(ee)}})}}function ne(){if(!(M||!x.props.aria.expanded)){var $=ia(x.props.triggerTarget||t);$.forEach(function(ee){x.props.interactive?ee.setAttribute("aria-expanded",x.state.isVisible&&ee===O()?"true":"false"):ee.removeAttribute("aria-expanded")})}}function Y(){N().removeEventListener("mousemove",h),xs=xs.filter(function($){return $!==h})}function H($){if(!(pn.isTouch&&(u||$.type==="mousedown"))){var ee=$.composedPath&&$.composedPath()[0]||$.target;if(!(x.props.interactive&&Rp(A,ee))){if(ia(x.props.triggerTarget||t).some(function(le){return Rp(le,ee)})){if(pn.isTouch||x.state.isVisible&&x.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[x,$]);x.props.hideOnClick===!0&&(x.clearDelayTimeouts(),x.hide(),s=!0,setTimeout(function(){s=!1}),x.state.isMounted||Q())}}}function G(){u=!0}function K(){u=!1}function V(){var $=N();$.addEventListener("mousedown",H,!0),$.addEventListener("touchend",H,Ai),$.addEventListener("touchstart",K,Ai),$.addEventListener("touchmove",G,Ai)}function Q(){var $=N();$.removeEventListener("mousedown",H,!0),$.removeEventListener("touchend",H,Ai),$.removeEventListener("touchstart",K,Ai),$.removeEventListener("touchmove",G,Ai)}function oe($,ee){re($,function(){!x.state.isVisible&&A.parentNode&&A.parentNode.contains(A)&&ee()})}function he($,ee){re($,ee)}function re($,ee){var le=z().box;function ce(ke){ke.target===le&&(zc(le,"remove",ce),ee())}if($===0)return ee();zc(le,"remove",f),zc(le,"add",ce),f=ce}function Z($,ee,le){le===void 0&&(le=!1);var ce=ia(x.props.triggerTarget||t);ce.forEach(function(ke){ke.addEventListener($,ee,le),g.push({node:ke,eventType:$,handler:ee,options:le})})}function ue(){P()&&(Z("touchstart",me,{passive:!0}),Z("touchend",Ve,{passive:!0})),cA(x.props.trigger).forEach(function($){if($!=="manual")switch(Z($,me),$){case"mouseenter":Z("mouseleave",Ve);break;case"focus":Z(EA?"focusout":"blur",rt);break;case"focusin":Z("focusout",rt);break}})}function ae(){g.forEach(function($){var ee=$.node,le=$.eventType,ce=$.handler,ke=$.options;ee.removeEventListener(le,ce,ke)}),g=[]}function me($){var ee,le=!1;if(!(!x.state.isEnabled||Le($)||s)){var ce=((ee=c)==null?void 0:ee.type)==="focus";c=$,m=$.currentTarget,ne(),!x.state.isVisible&&vA($)&&xs.forEach(function(ke){return ke($)}),$.type==="click"&&(x.props.trigger.indexOf("mouseenter")<0||o)&&x.props.hideOnClick!==!1&&x.state.isVisible?le=!0:Te($),$.type==="click"&&(o=!le),le&&!ce&&Me($)}}function Ae($){var ee=$.target,le=O().contains(ee)||A.contains(ee);if(!($.type==="mousemove"&&le)){var ce=xe().concat(A).map(function(ke){var be,qe=ke._tippy,Re=(be=qe.popperInstance)==null?void 0:be.state;return Re?{popperRect:ke.getBoundingClientRect(),popperState:Re,props:r}:null}).filter(Boolean);yA(ce,$)&&(Y(),Me($))}}function Ve($){var ee=Le($)||x.props.trigger.indexOf("click")>=0&&o;if(!ee){if(x.props.interactive){x.hideWithInteractivity($);return}Me($)}}function rt($){x.props.trigger.indexOf("focusin")<0&&$.target!==O()||x.props.interactive&&$.relatedTarget&&A.contains($.relatedTarget)||Me($)}function Le($){return pn.isTouch?P()!==$.type.indexOf("touch")>=0:!1}function Ue(){Ee();var $=x.props,ee=$.popperOptions,le=$.placement,ce=$.offset,ke=$.getReferenceClientRect,be=$.moveTransition,qe=L()?Sf(A).arrow:null,Re=ke?{getBoundingClientRect:ke,contextElement:ke.contextElement||O()}:t,je={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ne){var Xe=Ne.state;if(L()){var ft=z(),Bt=ft.box;["placement","reference-hidden","escaped"].forEach(function(Et){Et==="placement"?Bt.setAttribute("data-placement",Xe.placement):Xe.attributes.popper["data-popper-"+Et]?Bt.setAttribute("data-"+Et,""):Bt.removeAttribute("data-"+Et)}),Xe.attributes.popper={}}}},nt=[{name:"offset",options:{offset:ce}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!be}},je];L()&&qe&&nt.push({name:"arrow",options:{element:qe,padding:3}}),nt.push.apply(nt,(ee==null?void 0:ee.modifiers)||[]),x.popperInstance=sA(Re,A,Object.assign({},ee,{placement:le,onFirstUpdate:v,modifiers:nt}))}function Ee(){x.popperInstance&&(x.popperInstance.destroy(),x.popperInstance=null)}function ge(){var $=x.props.appendTo,ee,le=O();x.props.interactive&&$===Iy||$==="parent"?ee=le.parentNode:ee=Py($,[le]),ee.contains(A)||ee.appendChild(A),x.state.isMounted=!0,Ue()}function xe(){return uu(A.querySelectorAll("[data-tippy-root]"))}function Te($){x.clearDelayTimeouts(),$&&j("onTrigger",[x,$]),V();var ee=W(!0),le=B(),ce=le[0],ke=le[1];pn.isTouch&&ce==="hold"&&ke&&(ee=ke),ee?n=setTimeout(function(){x.show()},ee):x.show()}function Me($){if(x.clearDelayTimeouts(),j("onUntrigger",[x,$]),!x.state.isVisible){Q();return}if(!(x.props.trigger.indexOf("mouseenter")>=0&&x.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf($.type)>=0&&o)){var ee=W(!1);ee?i=setTimeout(function(){x.state.isVisible&&x.hide()},ee):a=requestAnimationFrame(function(){x.hide()})}}function ze(){x.state.isEnabled=!0}function Se(){x.hide(),x.state.isEnabled=!1}function Ie(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(a)}function ot($){if(!x.state.isDestroyed){j("onBeforeUpdate",[x,$]),ae();var ee=x.props,le=Fp(t,Object.assign({},ee,Bp($),{ignoreAttributes:!0}));x.props=le,ue(),ee.interactiveDebounce!==le.interactiveDebounce&&(Y(),h=Pp(Ae,le.interactiveDebounce)),ee.triggerTarget&&!le.triggerTarget?ia(ee.triggerTarget).forEach(function(ce){ce.removeAttribute("aria-expanded")}):le.triggerTarget&&t.removeAttribute("aria-expanded"),ne(),q(),p&&p(ee,le),x.popperInstance&&(Ue(),xe().forEach(function(ce){requestAnimationFrame(ce._tippy.popperInstance.forceUpdate)})),j("onAfterUpdate",[x,$])}}function lt($){x.setProps({content:$})}function Qe(){var $=x.state.isVisible,ee=x.state.isDestroyed,le=!x.state.isEnabled,ce=pn.isTouch&&!x.props.touch,ke=Nc(x.props.duration,0,Jr.duration);if(!($||ee||le||ce)&&!O().hasAttribute("disabled")&&(j("onShow",[x],!1),x.props.onShow(x)!==!1)){if(x.state.isVisible=!0,L()&&(A.style.visibility="visible"),q(),V(),x.state.isMounted||(A.style.transition="none"),L()){var be=z(),qe=be.box,Re=be.content;Fc([qe,Re],0)}v=function(){var nt;if(!(!x.state.isVisible||l)){if(l=!0,A.offsetHeight,A.style.transition=x.props.moveTransition,L()&&x.props.animation){var st=z(),Ne=st.box,Xe=st.content;Fc([Ne,Xe],ke),Op([Ne,Xe],"visible")}ie(),ne(),Lp(qc,x),(nt=x.popperInstance)==null||nt.forceUpdate(),j("onMount",[x]),x.props.animation&&L()&&he(ke,function(){x.state.isShown=!0,j("onShown",[x])})}},ge()}}function Ye(){var $=!x.state.isVisible,ee=x.state.isDestroyed,le=!x.state.isEnabled,ce=Nc(x.props.duration,1,Jr.duration);if(!($||ee||le)&&(j("onHide",[x],!1),x.props.onHide(x)!==!1)){if(x.state.isVisible=!1,x.state.isShown=!1,l=!1,o=!1,L()&&(A.style.visibility="hidden"),Y(),Q(),q(!0),L()){var ke=z(),be=ke.box,qe=ke.content;x.props.animation&&(Fc([be,qe],ce),Op([be,qe],"hidden"))}ie(),ne(),x.props.animation?L()&&oe(ce,x.unmount):x.unmount()}}function Oe($){N().addEventListener("mousemove",h),Lp(xs,h),h($)}function ve(){x.state.isVisible&&x.hide(),x.state.isMounted&&(Ee(),xe().forEach(function($){$._tippy.unmount()}),A.parentNode&&A.parentNode.removeChild(A),qc=qc.filter(function($){return $!==x}),x.state.isMounted=!1,j("onHidden",[x]))}function F(){x.state.isDestroyed||(x.clearDelayTimeouts(),x.unmount(),ae(),delete t._tippy,x.state.isDestroyed=!0,j("onDestroy",[x]))}}function wa(t,e){e===void 0&&(e={});var r=Jr.plugins.concat(e.plugins||[]);xA();var n=Object.assign({},e,{plugins:r}),i=gA(t),a=i.reduce(function(o,s){var u=s&&IA(s,n);return u&&o.push(u),o},[]);return Bu(t)?a[0]:a}wa.defaultProps=Jr;wa.setDefaultProps=AA;wa.currentInput=pn;Object.assign({},wy,{effect:function(e){var r=e.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});wa.setDefaultProps({render:Oy});const PA={"SNIK Graph Manual":{img:"graph.png"},"Multiview-Functionality":{"":"SNIK Graph supports the organization and management of different partial models in separate views.To copy a part of the whole graph, press 'C' or 'S' and to insert it into a new model press 'V' or 'P'.","search-field":"Search the currently active view for resources by entering a full or partial name.","View-specific menu":{"":"The view-specific menu can be found in the upper right position of each view, described from left to right.",img:"viewmenu.png",recalculatesign:"Recalculate Layout",tightlayoutsign:"Tight layout",compoundlayoutsign:"Compound layout",addsign:"Open new Tab",plussign:"Zoom in",minussign:"Zoom out"}},menu:{file:{"":"Holds different file options like loading and saving the graph in different ways.","load-sparql":"Discard the currently loaded graph and load all ontologies of SNIK.","load-session":"Load a complete session from a Cytoscape JSON File. Caution: Discards all changes!","load-view":"Load a saved view (partial graph) and include it in the current session.","load-layout":"Load a saved layout of a partial graph and include it in the current session.","save-session":"Save the complete Session (all views).","save-snik-graph":"Save the complete SNIK graph to a Cytoscape file.","save-view":"Save only the currently active view (partial graph).","save-layout":"Save only the position information of the nodes currently not hidden.","recalculate-layout-replace":"Recalculate the position of all visible nodes. May take a while when a large number of nodes are visible.","save-image-png-visible-region":"Save a screenshot of the currently active view.","save-image-png-complete-partial-graph":"Save an image of the whole graph with the same pixel density as the current view.","save-image-png-visible-region-high-res":"Save an image of the current view with a high resolution, for example for printing.","save-image-png-complete-partial-graph-high-res":"Save an image of the whole graph with a high resolution, for example for printing.","save-image-svg-visible-region":"Save an image of the current view as a vector graphic, for example for web use.","save-image-svg-complete-partial-graph":"Save an image of the whole graph as a vector graphic, for example for web use.","new-view":"Opens an empty new tab which you can copy nodes and endges to."},filter:{"":"A collection of filters to display relevant subgraphs. Filters are applied to all open views.",meta:"The Meta Ontology provides common superclasses and properties for the subontologies of SNIK.",bb:'Based on the book "Health Information Systems OntologyâArchitectures and Strategies".',ob:'Based on the book"IT-Projektmanagement im Gesundheitswesen - Lehrbuch und Projektleitfaden.',he:'Based on the book "Informationsmanagement: Grundlagen, Aufgaben, Methoden".',ciox:"Based on interviews about the Health Information System with Department B1, the Department for Information Management, of the Uniklinikum Leipzig.",role:"Who...",function:"...does what...",entitytype:"...and which information is therefore needed."},options:{"":"Here you can find different checkboxes that toggle the behaviour of SNIK Graph. These are applied to all open views.","separate-colours":"Separate the nodes by their colours when selecting a new layout.","cumulative-search":"Keep previous search results visible when searching again.",grid:"shows a grid that supports better organizing of nodes.","combine-match":'Highlights groups of classes representing the same concept from different subontologies (matches) by placing them in boxes. Use "move matches on top of each other" or "move matches nearby" to shrink those boxes.',showInstances:"Display instances of SNIK Classes, if loaded via parameter.","day-mode":"White background. Saves ink when printing.","dev-mode":"Additional context menu entries for developers.","ext-mode":"Additional context menu entries for power users."},layout:{"":"This part of the menu holds the layout features.","show-close-matches":"Shows (unhides) all nodes that are connected via close matches to visible nodes.","recalculate-layout":"Hotkey: Ctrl+Alt+L. Recalculates the position of all selected nodes, or all visible nodes if there are not at least two selected nodes. Can take a while if there are many visible nodes.","tight-layout":"Hotkey: Ctrl+Alt+T. You can use this for a more narrow view.","compound-layout":"Hotkey: Ctrl+Alt+C. Layout that tries to places combined matches next to each other.","move-match-on-top":'Requires enabled "Combine Matching" option. Places all matching nodes in the center of their group.',"move-match-nearby":'Requires enabled "Combine Matching" option. Places all matching nodes in a small circle in their group.',"bb-chapter-search":'Presents you all chapters of the "blue book" and lets you build a subgraph out of selected chapters .',"ob-chapter-search":'Presents you all chapters of the "orange book" and lets you build a subgraph out of selected chapters .',"subontology-connectivity":"Shows the connectivity between chosen Subontologies, i.e. between BB and OB, in a new tab.",img:"subontologyConnectivity.png","reset-view":"Resets all the layout operations to get you back to the starting point of the visualization.","change-title":"Opens a prompt to change the title of the currently active view."},services:{"":"Other ways to access SNIK.","sparql-endpoint":"Expert interface for the SPARQL Protocol and RDF Query Language endpoint.","rdf-browser":"Browse complete descriptions of resources in the RDF browser."},language:"Language switch, you can choose between English, German and Persian. Ontologies may not or not fully support all available languages.",help:"Common Help Menu, holds e.g. this manual"},"context-menu":{"":"Right click on a node/edge to open the context menu and choose among:","base-mode":{description:"Opens the node in an RDF browser, which shows all its properties and values.",star:{"":"Highlights and expands the node and all its directly connected nodes.",img:"star.png"},"incoming-star":"Highlights and expands the node and all neighbours directly connected via incoming edges.","outgoing-star":"Highlights and expands the node and all neighbours directly connected via outgoing edges.",path:{"":"Shortest Path between a selected source and this node.",img:"star.png"},spiderworm:{"":"The Spider Worm consists of the shortest path between a selected source and this node plus all direct neighbours. Displaying a spiderworm hides all other nodes and edges.",img:"spiderworm.png"},edit:"If you are a domain expert and notice incorrectly modelled facts or connections of a node, feel free to send us an issue.","combine-close-matches":"Merge equivalent classes from different subontologies.","class-use":"Visualize the interplay of role, function and entity type (related to the Meta model).",hide:"Hide the selected item until the view is resetted.","set-path-source":"Set the starting point for path operations.","confirm-link":"Confirm that the automatically generated interlink is correct."},"dev-mode":{"remove-permanently":"Send us an issue to delete the selected item permanently. Also removes it until graph is reloaded.",debug:"Get debug information to the edge/node from the JSON File"},"ext-mode":{doublestar:{"":"The double star is like the spiderworm but shows connected nodes for both source and target, not just the target.",img:"doublestar.png"},starpath:{"":"Creates a path and star (expand) every node along it.",img:"starpath.png"},circlestar:{"":"A star (expansion of the node) using a circular layout. Hides all other nodes.",img:"circlestar.png"},lodlive:"Third party data visualization exploration tool."}}};function Ry(t){const e={};for(const r in t){if(r===""||r==="img")continue;const n=t[r];if(typeof n=="string"){e[r]=n;continue}n[""]&&(e[r]=n[""]),Object.assign(e,Ry(n))}return e}const lu=Ry(PA);function Vp(){const t="right-end",e="reddark";for(const r in lu){const n=lu[r];if(typeof n!="string"&&console.error("value "+n+" for key "+r+" not a string"),document.getElementById(r))wa("#"+r,{content:n,placement:t,theme:e});else{const a=`[data-i18n="${r}"]`;document.querySelectorAll(a).length>0?wa(a,{content:n,placement:t,theme:e}):_e.trace(`tooltip init: found none of #${r} and [data-i18n="${r}"]`)}}}var Fs={exports:{}},LA=Fs.exports,Hp;function BA(){return Hp||(Hp=1,(function(t,e){(function(r,n){t.exports=n()})(LA,function(){var r=function(){function n(g){return o.appendChild(g.dom),g}function i(g){for(var h=0;h<o.children.length;h++)o.children[h].style.display=h===g?"block":"none";a=g}var a=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(g){g.preventDefault(),i(++a%o.children.length)},!1);var s=(performance||Date).now(),u=s,l=0,c=n(new r.Panel("FPS","#0ff","#002")),f=n(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var v=n(new r.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:n,showPanel:i,begin:function(){s=(performance||Date).now()},end:function(){l++;var g=(performance||Date).now();if(f.update(g-s,200),g>u+1e3&&(c.update(1e3*l/(g-u),100),u=g,l=0,v)){var h=performance.memory;v.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return g},update:function(){s=this.end()},domElement:o,setMode:i}};return r.Panel=function(n,i,a){var o=1/0,s=0,u=Math.round,l=u(window.devicePixelRatio||1),c=80*l,f=48*l,v=3*l,g=2*l,h=3*l,m=15*l,w=74*l,b=30*l,C=document.createElement("canvas");C.width=c,C.height=f,C.style.cssText="width:80px;height:48px";var E=C.getContext("2d");return E.font="bold "+9*l+"px Helvetica,Arial,sans-serif",E.textBaseline="top",E.fillStyle=a,E.fillRect(0,0,c,f),E.fillStyle=i,E.fillText(n,v,g),E.fillRect(h,m,w,b),E.fillStyle=a,E.globalAlpha=.9,E.fillRect(h,m,w,b),{dom:C,update:function(x,k){o=Math.min(o,x),s=Math.max(s,x),E.fillStyle=a,E.globalAlpha=1,E.fillRect(0,0,c,m),E.fillStyle=i,E.fillText(u(x)+" "+n+" ("+u(o)+"-"+u(s)+")",v,g),E.drawImage(C,h+l,m,w-l,b,h,m,w-l,b),E.fillRect(h+w-l,m,l,b),E.fillStyle=a,E.globalAlpha=.9,E.fillRect(h+w-l,m,l,u((1-x/k)*b))}}},r})})(Fs)),Fs.exports}var OA=BA();const Vc=qi(OA);function RA(t){const e=[];for(let o=0;o<4;o++){const s=new Vc;s.domElement.style.cssText=`position:absolute;top:0px;right:${100*o}px;`,document.body.appendChild(s.dom),e.push(s)}const n=e[2].addPanel(new Vc.Panel("Nodes","#ff8","#221")),i=e[3].addPanel(new Vc.Panel("Edges","#f8f","#212"));for(let o=0;o<e.length;o++)e[o].showPanel(Math.min(o,e.length-2));let a=0;requestAnimationFrame(function o(){for(const s of e)s.update();a=(a+1)%30,a===0&&(n.update(t.nodes(":visible").size()),i.update(t.edges(":visible").size())),requestAnimationFrame(o)})}function Cs(t){return t===""||t==="true"}function NA(){const t=new URL(window.location.href),e={sparql:Fe.ontology.sparql.endpoint,instances:Fe.ontology.sparql.instances},r=new Set(["empty","benchmark","instances","virtual","class","json","sparql","graph","sub"]),n=new Set(Array.from(t.searchParams.keys())).difference(r);return n.size>0&&_e.warn("Unknown GET parameters: "+Array.from(n).join(", ")),Object.assign(e,{empty:Cs(t.searchParams.get("empty")),benchmark:Cs(t.searchParams.get("benchmark")),...t.searchParams.get("instances")&&{instances:Cs(t.searchParams.get("instances"))},virtual:Cs(t.searchParams.get("virtual")),class:t.searchParams.get("class"),json:t.searchParams.get("json"),...t.searchParams.get("sparql")&&{sparql:t.searchParams.get("sparql")},graph:t.searchParams.get("graph"),sub:t.searchParams.get("sub")})}async function FA(t,e){var r,n,i,a;try{if(e.benchmark&&RA(t.cy),e.empty){_e.info('Parameter "empty" detected. Skip loading and display file load prompt.');const s=document.getElementById("loadarea"),u=document.createElement("center");s.appendChild(u),u.innerHTML+=`<button id="load-button" style="font-size:10vh;margin-top:20vh">Datei Laden
      <input id="load-input" type="file" style="display:none"></input>
      </button>`;const l=document.getElementById("load-input"),c=document.getElementById("load-button");c.onclick=()=>{l.click()},l.addEventListener("change",f=>{s.removeChild(u),t.cy.resize(),lT(t)(f)});return}if(e.json){_e.info("Loading from JSON URL "+e.json);const s=await(await fetch(e.json)).json();t.cy.add(s),Br(t.cy,tu);return}_e.debug("Loading from SPARQL Endpoint "+e.sparql),Fe.ontology.sparql.endpoint=e.sparql;const o=[];if(Fe.ontology.snik){let s=((r=e.sub)==null?void 0:r.split(","))||[];s.length===0&&(s=[...Fe.ontology.snik.helperGraphs,...Fe.ontology.snik.defaultSubOntologies]),o.push(...s.map(u=>eg.PREFIX+u))}else e.graph?(o.push(e.graph),Fe.ontology.sparql.graph=e.graph):Fe.ontology.sparql.graph&&o.push(Fe.ontology.sparql.graph);if(console.debug(`Loading graph with${e.instances?"":"out"} instances.`),await rg(t.cy,o,e.instances,e.virtual),t.instancesLoaded=e.instances,wt.setVisible(t.cy.edges("[p='http://www.w3.org/1999/02/22-rdf-syntax-ns#type']"),!1),(n=Fe.ontology)!=null&&n.initialView){const s=Fe.ontology.initialView;uy(s,We.activeState().graph)}else if((a=(i=Fe.ontology)==null?void 0:i.snik)!=null&&a.center){await Ym(t.cy,no,Fe.ontology.snik.defaultSubOntologies,!1),wt.setVisible(t.cy.elements(),!1);const s=t.cy.nodes(`node[id='${Fe.ontology.snik.center}']`);wt.setVisible(s,!0);for(let u=0;u<Fe.ontology.snik.centerDepth;u++)t.showStarMultiplexed()(t.cy.elements(":visible"));await Br(t.cy,tu),t.cy.elements().unselect(),t.cy.center(s),t.cy.fit(t.cy.elements(":visible")),wt.setVisible(s,!0),t.starMode=!0}e.class&&(_e.info(`Parameter "class" detected. Centering on URI ${e.class}.`),setTimeout(()=>t.presentUri(e.class),300))}catch(o){_e.error(o),_e.error("Error initializing SNIK Graph "+o)}}async function zA(t){document.title=Fe.ontology.title,document.getElementById("overlay-legend").innerHTML=Fe.ontology.legend,await lo(async()=>{const e=NA();await FA(t,e),new rk(Lr("search")),Vp()}),Vp()}var zs={exports:{}},qA=zs.exports,$p;function VA(){return $p||($p=1,(function(t,e){(function(r,n){t.exports=n()})(qA,(function(){return(()=>{var r={621:(a,o,s)=>{function u(H,G){(G==null||G>H.length)&&(G=H.length);for(var K=0,V=new Array(G);K<G;K++)V[K]=H[K];return V}function l(H,G){var K={};for(var V in H)K[V]=H[V];for(var Q in G)K[Q]instanceof Array?K[Q]=K[Q].concat(G[Q]):K[Q]=G[Q];return K}function c(H){for(var G="",K=0;K<H.length;K++)G+=H[K],K!==H.length-1&&(G+=" ");return G}function f(H,G,K){K?H.setAttribute(G,""):H.removeAttribute(G)}function v(H,G,K){customElements.get(H)===void 0&&customElements.define(H,G,{extends:K})}s.r(o),s.d(o,{contextMenus:()=>Y});var g="cy-context-menus-divider",h={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function m(H){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(H)}function w(H,G){var K;if(typeof Symbol>"u"||H[Symbol.iterator]==null){if(Array.isArray(H)||(K=(function(Z,ue){if(Z){if(typeof Z=="string")return b(Z,ue);var ae=Object.prototype.toString.call(Z).slice(8,-1);return ae==="Object"&&Z.constructor&&(ae=Z.constructor.name),ae==="Map"||ae==="Set"?Array.from(Z):ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae)?b(Z,ue):void 0}})(H))||G){K&&(H=K);var V=0,Q=function(){};return{s:Q,n:function(){return V>=H.length?{done:!0}:{done:!1,value:H[V++]}},e:function(Z){throw Z},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe,he=!0,re=!1;return{s:function(){K=H[Symbol.iterator]()},n:function(){var Z=K.next();return he=Z.done,Z},e:function(Z){re=!0,oe=Z},f:function(){try{he||K.return==null||K.return()}finally{if(re)throw oe}}}}function b(H,G){(G==null||G>H.length)&&(G=H.length);for(var K=0,V=new Array(G);K<G;K++)V[K]=H[K];return V}function C(H,G){if(!(H instanceof G))throw new TypeError("Cannot call a class as a function")}function E(H,G){for(var K=0;K<G.length;K++){var V=G[K];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(H,V.key,V)}}function x(H,G,K){return G&&E(H.prototype,G),K&&E(H,K),H}function k(H,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(G&&G.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),G&&O(H,G)}function A(H){var G=L();return function(){var K,V=N(H);if(G){var Q=N(this).constructor;K=Reflect.construct(V,arguments,Q)}else K=V.apply(this,arguments);return p(this,K)}}function p(H,G){return!G||m(G)!=="object"&&typeof G!="function"?I(H):G}function I(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function M(H,G,K){return(M=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,Q,oe){var he=(function(Z,ue){for(;!Object.prototype.hasOwnProperty.call(Z,ue)&&(Z=N(Z))!==null;);return Z})(V,Q);if(he){var re=Object.getOwnPropertyDescriptor(he,Q);return re.get?re.get.call(oe):re.value}})(H,G,K||H)}function B(H){var G=typeof Map=="function"?new Map:void 0;return(B=function(K){if(K===null||(V=K,Function.toString.call(V).indexOf("[native code]")===-1))return K;var V;if(typeof K!="function")throw new TypeError("Super expression must either be null or a function");if(G!==void 0){if(G.has(K))return G.get(K);G.set(K,Q)}function Q(){return P(K,arguments,N(this).constructor)}return Q.prototype=Object.create(K.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),O(Q,K)})(H)}function P(H,G,K){return(P=L()?Reflect.construct:function(V,Q,oe){var he=[null];he.push.apply(he,Q);var re=new(Function.bind.apply(V,he));return oe&&O(re,oe.prototype),re}).apply(null,arguments)}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function O(H,G){return(O=Object.setPrototypeOf||function(K,V){return K.__proto__=V,K})(H,G)}function N(H){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)})(H)}function z(H){H.preventDefault(),H.stopPropagation()}var W=(function(H){k(K,H);var G=A(K);function K(V,Q,oe){var he,re,Z,ue,ae,me,Ae,Ve,rt,Le;C(this,K),M((re=I(Le=G.call(this)),N(K.prototype)),"setAttribute",re).call(re,"id",V.id);var Ue=Le._getMenuItemClassStr(oe.cxtMenuItemClasses,V.hasTrailingDivider);if(M((Z=I(Le),N(K.prototype)),"setAttribute",Z).call(Z,"class",Ue),M((ue=I(Le),N(K.prototype)),"setAttribute",ue).call(ue,"title",(he=V.tooltipText)!==null&&he!==void 0?he:""),V.disabled&&f(I(Le),"disabled",!0),V.image){var Ee=document.createElement("img");Ee.src=V.image.src,Ee.width=V.image.width,Ee.height=V.image.height,Ee.style.position="absolute",Ee.style.top=V.image.y+"px",Ee.style.left=V.image.x+"px",M((ae=I(Le),N(K.prototype)),"appendChild",ae).call(ae,Ee)}if(Le.innerHTML+=V.content,Le.onMenuItemClick=Q,Le.data={},Le.clickFns=[],Le.selector=V.selector,Le.hasTrailingDivider=V.hasTrailingDivider,Le.show=V.show===void 0||V.show,Le.coreAsWell=V.coreAsWell||!1,Le.scratchpad=oe,V.onClickFunction===void 0&&V.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return Le.onClickFunction=V.onClickFunction,V.submenu instanceof Array&&Le._createSubmenu(V.submenu),M((me=I(Le),N(K.prototype)),"addEventListener",me).call(me,"mousedown",z),M((Ae=I(Le),N(K.prototype)),"addEventListener",Ae).call(Ae,"mouseup",z),M((Ve=I(Le),N(K.prototype)),"addEventListener",Ve).call(Ve,"touchstart",z),M((rt=I(Le),N(K.prototype)),"addEventListener",rt).call(rt,"touchend",z),Le}return x(K,[{key:"bindOnClickFunction",value:function(V){this.clickFns.push(V),M(N(K.prototype),"addEventListener",this).call(this,"click",V)}},{key:"unbindOnClickFunctions",value:function(){var V,Q=w(this.clickFns);try{for(Q.s();!(V=Q.n()).done;){var oe=V.value;M(N(K.prototype),"removeEventListener",this).call(this,"click",oe)}}catch(he){Q.e(he)}finally{Q.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(V){this.hasTrailingDivider=V}},{key:"hasSubmenu",value:function(){return this.submenu instanceof q}},{key:"appendSubmenuItem",value:function(V){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(V,Q)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(V){var Q=this.getBoundingClientRect(),oe=(function(ae){ae.style.opacity="0",ae.style.display="block";var me=ae.getBoundingClientRect();return ae.style.opacity="1",ae.style.display="none",me})(this.submenu),he=Q.right+oe.width>window.innerWidth,re=Q.top+oe.height>window.innerHeight;he||re?he&&!re?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):he&&re?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var Z=Array.from(this.submenu.children).filter((function(ae){if(ae instanceof K)return ae.isVisible()})),ue=Z.length;Z.forEach((function(ae,me){ae instanceof K&&(me<ue-1&&ae.getHasTrailingDivider()?ae.classList.add(g):ae.getHasTrailingDivider()&&ae.classList.remove(g))}))}},{key:"_onMouseLeave",value:function(V){var Q,oe,he,re,Z;Q={x:V.clientX,y:V.clientY},oe=this.submenu,re=Q.y,(he=Q.x)>=(Z=oe.getBoundingClientRect()).left&&he<=Z.right&&re>=Z.top&&re<=Z.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new q(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var Q,oe=w(V);try{for(oe.s();!(Q=oe.n()).done;){var he=Q.value,re=new K(he,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(re)}}catch(Z){oe.e(Z)}finally{oe.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(V,Q){return Q?V+" "+g:V}}],[{key:"define",value:function(){v("ctx-menu-item",K,"button")}}]),K})(B(HTMLButtonElement)),q=(function(H){k(K,H);var G=A(K);function K(V,Q){var oe,he;return C(this,K),M((oe=I(he=G.call(this)),N(K.prototype)),"setAttribute",oe).call(oe,"class",Q.cxtMenuClasses),he.style.position="absolute",he.onMenuItemClick=V,he.scratchpad=Q,he}return x(K,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var V,Q=w(this.children);try{for(Q.s();!(V=Q.n()).done;){var oe=V.value;oe instanceof HTMLElement?oe.style.display="none":console.warn("".concat(oe," is not a HTMLElement"))}}catch(he){Q.e(he)}finally{Q.f()}}},{key:"hideSubmenus",value:function(){var V,Q=w(this.children);try{for(Q.s();!(V=Q.n()).done;){var oe=V.value;oe instanceof W&&oe.submenu&&oe.submenu.hide()}}catch(he){Q.e(he)}finally{Q.f()}}},{key:"appendMenuItem",value:function(V){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(Q!==void 0){if(Q.parentNode!==this)throw new Error("The item with id='".concat(Q.id,"' is not a child of the context menu"));this.insertBefore(V,Q)}else this.appendChild(V);V.isClickable()&&this._performBindings(V)}},{key:"moveBefore",value:function(V,Q){if(V.parentNode!==this)throw new Error("The item with id='".concat(V.id,"' is not a child of context menu"));if(Q.parentNode!==this)throw new Error("The item with id='".concat(Q.id,"' is not a child of context menu"));this.removeChild(V),this.insertBefore(V,Q)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var V=this.lastChild;V instanceof W?this._removeImmediateMenuItem(V):(console.warn("Found non menu item in the context menu: ",V),this.removeChild(V))}}},{key:"_removeImmediateMenuItem",value:function(V){if(!this._detachImmediateMenuItem(V))throw new Error("menu item(id=".concat(V.id,") is not in the context menu"));V.detachSubmenu(),V.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(V){if(V.parentNode===this){if(this.removeChild(V),this.children.length<=0){var Q=this.parentNode;Q instanceof W&&Q.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(V){var Q=this._bindOnClick(V.onClickFunction);V.bindOnClickFunction(Q),V.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(V){var Q=this;return function(){var oe=Q.scratchpad.currentCyEvent;V(oe)}}}],[{key:"define",value:function(){v("menu-item-list",K,"div")}}]),K})(B(HTMLDivElement)),j=(function(H){k(K,H);var G=A(K);function K(V,Q){var oe;return C(this,K),(oe=G.call(this,V,Q)).onMenuItemClick=function(he){z(he),oe.hide(),V()},oe}return x(K,[{key:"removeMenuItem",value:function(V){var Q=V.parentElement;Q instanceof q&&this.contains(Q)&&Q._removeImmediateMenuItem(V)}},{key:"appendMenuItem",value:function(V){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(V.id),M(N(K.prototype),"appendMenuItem",this).call(this,V,Q)}},{key:"insertMenuItem",value:function(V){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=Q.before,he=Q.parent;if(this.ensureDoesntContain(V.id),oe!==void 0){if(!this.contains(oe))throw new Error("before(id=".concat(oe.id,") is not in the context menu"));var re=oe.parentNode;if(!(re instanceof q))throw new Error("Parent of before(id=".concat(oe.id,") is not a submenu"));re.appendMenuItem(V,oe)}else if(he!==void 0){if(!this.contains(he))throw new Error("parent(id=".concat(he.id,") is not a descendant of the context menu"));he.appendSubmenuItem(V)}else this.appendMenuItem(V)}},{key:"moveBefore",value:function(V,Q){var oe=V.parentElement;if(!this.contains(oe))throw new Error("parent(id=".concat(oe.id,") is not in the contex menu"));if(!this.contains(Q))throw new Error("before(id=".concat(Q.id,") is not in the context menu"));oe.removeChild(V),this.insertMenuItem(V,{before:Q})}},{key:"moveToSubmenu",value:function(V){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,he=V.parentElement;if(!(he instanceof q))throw new Error("current parent(id=".concat(he.id,") is not a submenu"));if(!this.contains(he))throw new Error("parent of the menu item(id=".concat(he.id,") is not in the context menu"));if(Q!==null){if(!this.contains(Q))throw new Error("parent(id=".concat(Q.id,") is not in the context menu"));he._detachImmediateMenuItem(V),Q.appendSubmenuItem(V)}else oe!==null&&(V.selector=oe.selector,V.coreAsWell=oe.coreAsWell),he._detachImmediateMenuItem(V),this.appendMenuItem(V)}},{key:"ensureDoesntContain",value:function(V){var Q=document.getElementById(V);if(Q!==void 0&&this.contains(Q))throw new Error("There is already an element with id=".concat(V," in the context menu"))}},{key:"ensureContains",value:function(V){var Q=document.getElementById(V);if(Q==null||Q==null||!this.contains(Q))throw new Error("An element with id '".concat(V,"' does not exist!"))}}],[{key:"define",value:function(){v("ctx-menu",K,"div")}}]),K})(q);function ie(H,G){var K;if(typeof Symbol>"u"||H[Symbol.iterator]==null){if(Array.isArray(H)||(K=(function(Z,ue){if(Z){if(typeof Z=="string")return ne(Z,ue);var ae=Object.prototype.toString.call(Z).slice(8,-1);return ae==="Object"&&Z.constructor&&(ae=Z.constructor.name),ae==="Map"||ae==="Set"?Array.from(Z):ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae)?ne(Z,ue):void 0}})(H))||G){K&&(H=K);var V=0,Q=function(){};return{s:Q,n:function(){return V>=H.length?{done:!0}:{done:!1,value:H[V++]}},e:function(Z){throw Z},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe,he=!0,re=!1;return{s:function(){K=H[Symbol.iterator]()},n:function(){var Z=K.next();return he=Z.done,Z},e:function(Z){re=!0,oe=Z},f:function(){try{he||K.return==null||K.return()}finally{if(re)throw oe}}}}function ne(H,G){(G==null||G>H.length)&&(G=H.length);for(var K=0,V=new Array(G);K<G;K++)V[K]=H[K];return V}function Y(H){var G=this;G.scratch("cycontextmenus")||G.scratch("cycontextmenus",{});var K,V,Q=function(Ee){return G.scratch("cycontextmenus")[Ee]},oe=function(Ee,ge){return G.scratch("cycontextmenus")[Ee]=ge},he=Q("options"),re=Q("cxtMenu"),Z=function(Ee){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,xe=ae(Ee);if(ge!==void 0){var Te=Ae(ge);re.insertMenuItem(xe,{parent:Te})}else re.insertMenuItem(xe)},ue=function(Ee){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,xe=0;xe<Ee.length;xe++)Z(Ee[xe],ge)},ae=function(Ee){var ge=G.scratch("cycontextmenus");return new W(Ee,re.onMenuItemClick,ge)},me=function(){Q("active")&&(re.removeAllMenuItems(),G.off("tapstart",Q("eventCyTapStart")),G.off(he.evtType,Q("onCxttap")),G.off("viewport",Q("onViewport")),document.removeEventListener("mouseup",Q("hideOnNonCyClick")),re.parentNode.removeChild(re),re=void 0,oe("cxtMenu",void 0),oe("active",!1),oe("anyVisibleChild",!1),oe("onCxttap",void 0),oe("onViewport",void 0),oe("hideOnNonCyClick",void 0))},Ae=function(Ee){var ge=document.getElementById(Ee);if(ge instanceof W)return ge;throw new Error("The item with id=".concat(Ee," is not a menu item"))},Ve=function(){var Ee,ge=!1,xe=ie(re.children);try{for(xe.s();!(Ee=xe.n()).done;){var Te=Ee.value;if(Te instanceof W&&Te.show&&Te.style.display!="none"){ge=!0;break}}}catch(Me){xe.e(Me)}finally{xe.f()}ge?re.display():re.hide()};if(H!=="get"){W.define(),q.define(),j.define(),he=l(h,H),oe("options",he),Q("active")&&me(),oe("active",!0),oe("submenuIndicatorGen",(function(Ee){var ge=document.createElement("img");return ge.src=Ee.src,ge.width=Ee.width,ge.height=Ee.height,ge.classList.add("cy-context-menus-submenu-indicator"),ge}).bind(void 0,he.submenuIndicator));var rt=c(he.contextMenuClasses);oe("cxtMenuClasses",rt);var Le=G.scratch("cycontextmenus");re=new j((function(){return oe("cxtMenuPosition",void 0)}),Le),oe("cxtMenu",re),G.container().appendChild(re),oe("cxtMenuItemClasses",c(he.menuItemClasses));var Ue=he.menuItems;ue(Ue),V=function(Ee){oe("currentCyEvent",Ee),(function(Ie){var ot,lt=G.container(),Qe=Q("cxtMenuPosition"),Ye=Ie.position||Ie.cyPosition;if(Qe!=Ye){re.hideMenuItems(),oe("anyVisibleChild",!1),oe("cxtMenuPosition",Ye);var Oe={top:(ot=lt.getBoundingClientRect()).top,left:ot.left},ve=Ie.renderedPosition||Ie.cyRenderedPosition,F=getComputedStyle(lt)["border-width"],$=parseInt(F.replace("px",""))||0;$>0&&(Oe.top+=$,Oe.left+=$);var ee=lt.clientHeight,le=lt.clientWidth,ce=ee/2,ke=le/2;ve.y>ce&&ve.x<=ke?(re.style.left=ve.x+"px",re.style.bottom=ee-ve.y+"px",re.style.right="auto",re.style.top="auto"):ve.y>ce&&ve.x>ke?(re.style.right=le-ve.x+"px",re.style.bottom=ee-ve.y+"px",re.style.left="auto",re.style.top="auto"):ve.y<=ce&&ve.x<=ke?(re.style.left=ve.x+"px",re.style.top=ve.y+"px",re.style.right="auto",re.style.bottom="auto"):(re.style.right=le-ve.x+"px",re.style.top=ve.y+"px",re.style.left="auto",re.style.bottom="auto")}})(Ee);var ge,xe=Ee.target||Ee.cyTarget,Te=ie(re.children);try{for(Te.s();!(ge=Te.n()).done;){var Me=ge.value;Me instanceof W&&(xe===G?Me.coreAsWell:xe.is(Me.selector))&&Me.show&&(re.display(),oe("anyVisibleChild",!0),Me.display())}}catch(Ie){Te.e(Ie)}finally{Te.f()}var ze=Array.from(re.children).filter((function(Ie){if(Ie instanceof W)return Ie.isVisible()})),Se=ze.length;ze.forEach((function(Ie,ot){Ie instanceof W&&(ot<Se-1&&Ie.getHasTrailingDivider()?Ie.classList.add(g):Ie.getHasTrailingDivider()&&Ie.classList.remove(g))})),!Q("anyVisibleChild")&&!(function(Ie){return Ie.offsetWidth<=0&&Ie.offsetHeight<=0||Ie.style&&Ie.style.display||getComputedStyle(Ie).display})(re)&&re.hide()},G.on(he.evtType,V),oe("onCxttap",V),(function(){var Ee=function(xe){if(re.contains(xe.originalEvent.target))return!1;re.hide(),oe("cxtMenuPosition",void 0),oe("currentCyEvent",void 0)};G.on("tapstart",Ee),oe("eventCyTapStart",Ee);var ge=function(){re.hide()};G.on("viewport",ge),oe("onViewport",ge)})(),K=function(Ee){G.container().contains(Ee.target)||re.contains(Ee.target)||(re.hide(),oe("cxtMenuPosition",void 0))},document.addEventListener("mouseup",K),oe("hideOnNonCyClick",K),(function(){var Ee,ge=(function(xe,Te){var Me;if(typeof Symbol>"u"||xe[Symbol.iterator]==null){if(Array.isArray(xe)||(Me=(function(Qe,Ye){if(Qe){if(typeof Qe=="string")return u(Qe,Ye);var Oe=Object.prototype.toString.call(Qe).slice(8,-1);return Oe==="Object"&&Qe.constructor&&(Oe=Qe.constructor.name),Oe==="Map"||Oe==="Set"?Array.from(Qe):Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe)?u(Qe,Ye):void 0}})(xe))||Te){Me&&(xe=Me);var ze=0,Se=function(){};return{s:Se,n:function(){return ze>=xe.length?{done:!0}:{done:!1,value:xe[ze++]}},e:function(Qe){throw Qe},f:Se}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ie,ot=!0,lt=!1;return{s:function(){Me=xe[Symbol.iterator]()},n:function(){var Qe=Me.next();return ot=Qe.done,Qe},e:function(Qe){lt=!0,Ie=Qe},f:function(){try{ot||Me.return==null||Me.return()}finally{if(lt)throw Ie}}}})(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(ge.s();!(Ee=ge.n()).done;)Ee.value.addEventListener("contextmenu",(function(xe){return xe.preventDefault()}))}catch(xe){ge.e(xe)}finally{ge.f()}})()}return(function(Ee){return{isActive:function(){return Q("active")},appendMenuItem:function(ge){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return Z(ge,xe),Ee},appendMenuItems:function(ge){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ue(ge,xe),Ee},removeMenuItem:function(ge){var xe=Ae(ge);return re.removeMenuItem(xe),Ee},setTrailingDivider:function(ge,xe){var Te=Ae(ge);return Te.setHasTrailingDivider(xe),xe?Te.classList.add(g):Te.classList.remove(g),Ee},insertBeforeMenuItem:function(ge,xe){var Te=ae(ge),Me=Ae(xe);return re.insertMenuItem(Te,{before:Me}),Ee},moveToSubmenu:function(ge){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Te=Ae(ge);if(xe===null)re.moveToSubmenu(Te);else if(typeof xe=="string"){var Me=Ae(xe.toString());re.moveToSubmenu(Te,Me)}else xe.coreAsWell!==void 0||xe.selector!==void 0?re.moveToSubmenu(Te,null,xe):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return Ee},moveBeforeOtherMenuItem:function(ge,xe){var Te=Ae(ge),Me=Ae(xe);return re.moveBefore(Te,Me),Ee},disableMenuItem:function(ge){return Ae(ge).disable(),Ee},enableMenuItem:function(ge){return Ae(ge).enable(),Ee},hideMenuItem:function(ge){return Ae(ge).hide(),Ve(),Ee},showMenuItem:function(ge){return Ae(ge).display(),Ve(),Ee},destroy:function(){return me(),Ee},getOptions:function(){return l(h,he)},swapItems:function(ge,xe){re.ensureContains(ge),re.ensureContains(xe);var Te=document.getElementById(ge),Me=document.getElementById(xe),ze=Te.nextSibling,Se=Me.nextSibling,Ie=Te.parentNode,ot=Me.parentNode;if(!Ie.isSameNode(ot))throw new Error("To swap, the items should have the same parent!");ze&&ze.isSameNode(Me)?Ie.insertBefore(Me,Te):Se&&Se.isSameNode(Te)?Ie.insertBefore(Te,Me):(Ie.insertBefore(Me,Te),Ie.insertBefore(Te,Se))}}})(this)}},579:(a,o,s)=>{var u=s(621).contextMenus,l=function(c){c&&c("core","contextMenus",u)};typeof cytoscape<"u"&&l(cytoscape),a.exports=l}},n={};function i(a){var o=n[a];if(o!==void 0)return o.exports;var s=n[a]={exports:{}};return r[a](s,s.exports,i),s.exports}return i.d=(a,o)=>{for(var s in o)i.o(o,s)&&!i.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:o[s]})},i.o=(a,o)=>Object.prototype.hasOwnProperty.call(a,o),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i(579)})()}))})(zs)),zs.exports}var HA=VA();const $A=qi(HA),WA="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-chevron-right'%3e%3cpolyline%20points='9%2018%2015%2012%209%206'%3e%3c/polyline%3e%3c/svg%3e";wn.use($A);const Hc={menuItems:[],evtType:"cxttap",submenuIndicator:{src:WA,width:12,height:12}};class cu{constructor(e,r){At(this,"graph");this.graph=e,_e.debug("Register Context Menu."),Hc.menuItems=r,Hc.menuItems.forEach(function n(i){cu.addTooltip(i),i.content=uo(i.id),i.submenu&&i.submenu.forEach(a=>n(a))}),e.cy.contextMenus(Hc)}static logWrap(e,r){var i;if((i=e==null?void 0:e.onClickFunction)!=null&&i.wrapped)return;const n=e.onClickFunction;e.onClickFunction=a=>{_e.debug("Context Menu: Operation "+e.content+" on "+r(a)),n(a)},e.onClickFunction.wrapped=!0}static addTooltip(e){(e.submenu??[]).forEach(cu.addTooltip),e.tooltipText=lu[e.id]||lu[e.id.replace("edge-","")]}}let UA=0;async function GA(t,e){const r={R:["meta:Role","meta:Function","meta:EntityType"],F:["meta:Function","meta:Role","meta:EntityType"],E:["meta:EntityType","meta:Function","meta:Role"]};if(!(e in r)){_e.error("Unknown subtop '"+e+"'. Cannot display class use.");return}const[n,i,a]=r[e],o=`select distinct ?inner ?middle ?outer ?outerx
    {
      <${t}> (rdfs:subClassOf|skos:closeMatch|^skos:closeMatch)* ?inner.
      ?inner rdf:type ${n}.
      OPTIONAL
      {
        ?inner ?p ?middle.
        ?middle rdf:type ${i}.
        OPTIONAL
        {
          ?middle ?q ?outer.
          ?outer rdf:type ${a}.
          OPTIONAL {?outer (skos:closeMatch|^skos:closeMatch|^rdfs:subClassOf)+ ?outerx.}
        }
      }
    }`,s=await Rn(o),[u,l,c,f]=[new Set,new Set,new Set,new Set];for(let x=0;x<s.length;x++)u.add(s[x].inner.value),s[x].middle&&l.add(s[x].middle.value),s[x].outer&&c.add(s[x].outer.value),s[x].outerx&&f.add(s[x].outerx.value);if(l.size===0){_e.warn("Class "+t+" is not used.");return}const g=document.getElementById("combineMatchModeBox").checked;g&&We.mainView.state.graph.combineMatch(!1);const h=new We(!0,"Class Use "+ ++UA+" "+en(t));await h.initialized;const m=h.state.graph;m.cy.startBatch(),m.resetStyle(),wt.setVisible(m.cy.elements(),!1),m.starMode=!0;const w=new Set([...u,...l,...c,...f]),b=m.cy.collection(`node[id='${t}']`);for(const x of w){const k=m.cy.nodes(`node[id='${x}']`);b.merge(k)}const C=b.merge(b.edgesWith(b));b.layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:20,concentric:function(x){const k=x.data(et.ID);return k===t?10:u.has(k)?9:l.has(k)?8:c.has(k)?7:f.has(k)?6:10}}).run(),wt.setVisible(C,!0),g&&[We.mainView,h].forEach(x=>x.state.graph.combineMatch(!0));const E=m.cy.nodes(`node[id='${t}']`);m.cy.center(E),m.cy.fit(b),m.cy.endBatch()}const Wp=t=>e=>t(e.target);function jA(t){return[{id:"compound",selector:"node:compound",submenu:[{id:"open",onClickFunction:e=>{e.target.children().move({event:null}),t.cy.remove(e.target)}},{id:"move-match-on-top",onClickFunction:e=>t.moveNodes(e.target.children(),0)},{id:"move-match-nearby",onClickFunction:e=>t.moveNodes(e.target.children(),100)},{id:"compound-star",onClickFunction:e=>t.multiplex(t.showStar,e.target.children(),!0)()},{id:"compound-incoming-star",onClickFunction:e=>t.multiplex(r=>t.showStar(r,!1,_i.IN),e.target.children(),!0)()},{id:"compound-outgoing-star",onClickFunction:e=>t.multiplex(r=>t.showStar(r,!1,_i.OUT),e.target.children(),!0)()},{id:"compound-path-source",onClickFunction:e=>{t.setSource(e.target.children()[0])}}]},{id:"edit",selector:"node",onClickFunction:e=>{const r=e.target,n=`Problem with the class [${en(r.data(et.ID))}](${r.data(et.ID)}):

`;Yp(Fe.git.repo.ontology,r.data(et.ID),n)}},{id:"class-use",selector:"node",onClickFunction:e=>{const r=e.target;GA(r.data(et.ID),r.data(et.SUBTOP))}},{id:"hide",selector:"node",onClickFunction:Wp(t.multiplex(e=>wt.setVisible(e,!1)))},{id:"set-path-source",selector:"node",onClickFunction:e=>{t.setSource(e.target)}},{id:"description",selector:"node",onClickFunction:e=>{window.open(e.target.data(et.ID))}},{id:"star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,_i.BOTH))(e.target)}},{id:"incoming-star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,_i.IN))(e.target)}},{id:"outgoing-star",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!1,_i.OUT))(e.target)}},{id:"path",selector:"node",onClickFunction:e=>t.multiplex(t.showPath(e.target))(t.getSource())},{id:"spiderworm",selector:"node",onClickFunction:e=>t.showWorm(t.getSource(),e.target)},{id:"dev",selector:"node",submenu:[{id:"remove-permanently",selector:"node",onClickFunction:e=>{t.cy.remove(e.target),O0(e.target)}},{id:"debug",selector:"node",onClickFunction:e=>alert(JSON.stringify(e.target.data(),null,2))}]},{id:"ext",selector:"node",submenu:[{id:"doublestar",selector:"node",onClickFunction:e=>t.multiplex(t.showDoubleStar)(e.target)},{id:"starpath",selector:"node",onClickFunction:e=>t.multiplex(t.showPath(e.target,!0))(t.getSource())},{id:"circlestar",selector:"node",onClickFunction:async e=>{(await t.showStarMultiplexedNew(!0,_i.BOTH,!0))(e.target)}},{id:"lodlive",selector:"node",onClickFunction:e=>{window.open("http://en.lodlive.it/?"+e.target.data(et.ID))}},{id:"move-selected",selector:"node",onClickFunction:e=>{t.cy.nodes(":selected").positions(()=>e.target.position())}},{id:"close-match",selector:"node",onClickFunction:Wp(t.multiplex(t.showCloseMatch,void 0,!0))},{id:"show-instances",onClickFunction:async e=>{const n=e.target.data(et.ID),i=`SELECT ?i STR(SAMPLE(?label)) AS ?l {
        ?i a <${n}>
        OPTIONAL {?i rdfs:label ?label. FILTER(LANGMATCHES(LANG(?label),"${Xp()}"))}
        }`;let o=(await Rn(i)).map(s=>s.i.value+" "+(s.l?s.l.value:"")).reduce((s,u)=>s+`
`+u,"");o===""&&(o=`Class ${n} does not have any instances.`),alert(o)}}]}]}function KA(t){return[{id:"edge-edit",selector:"edge",onClickFunction:r=>{const n=r.target,i=`Problem with the edge [${Gc(n)}](${n.data(jt.SOURCE)}):

`;Yp(Fe.git.repo.ontology,Gc(n),i)}},{id:"edge-hide",selector:"edge",onClickFunction:r=>wt.setVisible(r.target,!1)},{id:"edge-description",selector:"edge",onClickFunction:r=>{const n=r.target;n.data(jt.AXIOM)?window.open(n.data(jt.AXIOM)):_e.warn("There is no description for this edge.")}},{id:"edge-confirm-link",selector:`edge[${jt.GRAPH} = "http://www.snik.eu/ontology/limes-exact"]`,onClickFunction:r=>N0(r.target)},{id:"edge-dev",selector:"edge",submenu:[{id:"remove-permanently",onClickFunction:r=>{t.cy.remove(r.target),R0(r.target)}},{id:"debug",onClickFunction:r=>{alert(JSON.stringify(r.target.data(),null,2))}}]}]}var $c={exports:{}},Up;function XA(){return Up||(Up=1,(function(t,e){(function(r){var n={config:{},container:{},controls:{},errors:{},items:{},utils:{}};n.utils.F=function(){},n.utils.extend=function(i,a){i.prototype=n.utils.createObject(a.prototype),i.prototype.contructor=i},n.utils.createObject=function(i){return typeof Object.create=="function"?Object.create(i):(n.utils.F.prototype=i,new n.utils.F)},n.utils.objectKeys=function(i){var a,o;if(typeof Object.keys=="function")return Object.keys(i);a=[];for(o in i)a.push(o);return a},n.utils.getHashValue=function(i){var a=location.hash.match(new RegExp(i+"=([^&]*)"));return a?a[1]:null},n.utils.getQueryStringParam=function(i){if(window.location.hash)return n.utils.getHashValue(i);if(!window.location.search)return null;var a=window.location.search.substr(1).split("&"),o={},s,u;for(u=0;u<a.length;u++)s=a[u].split("="),o[s[0]]=s[1];return o[i]||null},n.utils.copy=function(i,a){for(var o in a)i[o]=a[o];return i},n.utils.animFrame=function(i){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)})(function(){i()})},n.utils.indexOf=function(i,a){if(!(a instanceof Array))throw new Error("Haystack is not an Array");if(a.indexOf)return a.indexOf(i);for(var o=0;o<a.length;o++)if(a[o]===i)return o;return-1},typeof/./!="function"&&typeof Int8Array!="object"?n.utils.isFunction=function(i){return typeof i=="function"||!1}:n.utils.isFunction=function(i){return toString.call(i)==="[object Function]"},n.utils.fnBind=function(i,a,o){if(Function.prototype.bind!==void 0)return Function.prototype.bind.apply(i,[a].concat(o||[]));var s=function(){var u=(o||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof s))return i.apply(a,u);i.apply(this,u)};return s.prototype=i.prototype,s},n.utils.removeFromArray=function(i,a){var o=n.utils.indexOf(i,a);if(o===-1)throw new Error("Can't remove item from array. Item is not in the array");a.splice(o,1)},n.utils.now=function(){return typeof Date.now=="function"?Date.now():new Date().getTime()},n.utils.getUniqueId=function(){return(Math.random()*1e15).toString(36).replace(".","")},n.utils.filterXss=function(i,a){var o=i.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return a===!0?o:o.replace(/>/g,"&gt;").replace(/</g,"&lt;")},n.utils.stripTags=function(i){return r.trim(i.replace(/(<([^>]+)>)/ig,""))},n.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[n.utils.EventEmitter.ALL_EVENT]=[],this.on=function(i,a,o){if(!n.utils.isFunction(a))throw new Error("Tried to listen to event "+i+" with non-function callback "+a);this._mSubscriptions[i]||(this._mSubscriptions[i]=[]),this._mSubscriptions[i].push({fn:a,ctx:o})},this.emit=function(i){var a,o,s;s=Array.prototype.slice.call(arguments,1);var u=this._mSubscriptions[i];if(u)for(u=u.slice(),a=0;a<u.length;a++)o=u[a].ctx||{},u[a].fn.apply(o,s);s.unshift(i);var l=this._mSubscriptions[n.utils.EventEmitter.ALL_EVENT].slice();for(a=0;a<l.length;a++)o=l[a].ctx||{},l[a].fn.apply(o,s)},this.unbind=function(i,a,o){if(!this._mSubscriptions[i])throw new Error("No subscribtions to unsubscribe for event "+i);var s,u=!1;for(s=0;s<this._mSubscriptions[i].length;s++)(!a||this._mSubscriptions[i][s].fn===a)&&(!o||o===this._mSubscriptions[i][s].ctx)&&(this._mSubscriptions[i].splice(s,1),u=!0);if(u===!1)throw new Error("Nothing to unbind for "+i)},this.off=this.unbind,this.trigger=this.emit},n.utils.EventEmitter.ALL_EVENT="__all",n.utils.DragListener=function(i,a){n.utils.EventEmitter.call(this),this._eElement=r(i),this._oDocument=r(document),this._eBody=r(document.body),this._nButtonCode=a||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=n.utils.fnBind(this.onMouseMove,this),this._fUp=n.utils.fnBind(this.onMouseUp,this),this._fDown=n.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},n.utils.DragListener.timeout=null,n.utils.copy(n.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(i){if(i.preventDefault(),i.button==0||i.type==="touchstart"){var a=this._getCoordinates(i);this._nOriginalX=a.x,this._nOriginalY=a.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(n.utils.fnBind(this._startDrag,this),this._nDelay)}},onMouseMove:function(i){if(this._timeout!=null){i.preventDefault();var a=this._getCoordinates(i);this._nX=a.x-this._nOriginalX,this._nY=a.y-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,i)}},onMouseUp:function(i){this._timeout!=null&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",i,this._nOriginalX+this._nX)))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(i){return i=i.originalEvent&&i.originalEvent.touches?i.originalEvent.touches[0]:i,{x:i.pageX,y:i.pageY}}}),n.LayoutManager=function(i,a){if(!r||typeof r.noConflict!="function"){var o="jQuery is missing as dependency for GoldenLayout. ";throw o+=`Please either expose $ on GoldenLayout's scope (e.g. window) or add "jquery" to `,o+="your paths when using RequireJS/AMD",new Error(o)}n.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":n.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=n.utils.fnBind(this._onResize,this),this._unloadFunction=n.utils.fnBind(this._onUnload,this),this._maximisedItem=null,this._maximisePlaceholder=r('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new n.utils.EventHub(this),this.config=this._createConfig(i),this.container=a,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=r('<div class="lm_drop_tab_placeholder"></div>'),this.isSubWindow===!0&&r("body").css("visibility","hidden"),this._typeToItem={column:n.utils.fnBind(n.items.RowOrColumn,this,[!0]),row:n.utils.fnBind(n.items.RowOrColumn,this,[!1]),stack:n.items.Stack,component:n.items.Component}},n.LayoutManager.__lm=n,n.LayoutManager.minifyConfig=function(i){return new n.utils.ConfigMinifier().minifyConfig(i)},n.LayoutManager.unminifyConfig=function(i){return new n.utils.ConfigMinifier().unminifyConfig(i)},n.utils.copy(n.LayoutManager.prototype,{registerComponent:function(i,a){if(typeof a!="function")throw new Error("Please register a constructor function");if(this._components[i]!==void 0)throw new Error("Component "+i+" is already registered");this._components[i]=a},toConfig:function(i){var a,o,s;if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(i&&!(i instanceof n.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for(a={settings:n.utils.copy({},this.config.settings),dimensions:n.utils.copy({},this.config.dimensions),labels:n.utils.copy({},this.config.labels)},a.content=[],o=function(u,l){var c,f;for(c in l.config)c!=="content"&&(u[c]=l.config[c]);if(l.contentItems.length)for(u.content=[],f=0;f<l.contentItems.length;f++)u.content[f]={},o(u.content[f],l.contentItems[f])},i?o(a,{contentItems:[i]}):o(a,this.root),this._$reconcilePopoutWindows(),a.openPopouts=[],s=0;s<this.openPopouts.length;s++)a.openPopouts.push(this.openPopouts[s].toConfig());return a.maximisedItemId=this._maximisedItem?"__glMaximised":null,a},getComponent:function(i){if(this._components[i]===void 0)throw new n.errors.ConfigurationError('Unknown component "'+i+'"');return this._components[i]},init:function(){if(this._subWindowsCreated===!1&&(this._createSubWindows(),this._subWindowsCreated=!0),document.readyState==="loading"||document.body===null){r(document).ready(n.utils.fnBind(this.init,this));return}if(this.isSubWindow===!0&&this._creationTimeoutPassed===!1){setTimeout(n.utils.fnBind(this.init,this),7),this._creationTimeoutPassed=!0;return}this.isSubWindow===!0&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new n.controls.DropTargetIndicator(this.container),this.transitionIndicator=new n.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),this.emit("initialised")},updateSize:function(i,a){arguments.length===2?(this.width=i,this.height=a):(this.width=this.container.width(),this.height=this.container.height()),this.isInitialised===!0&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){this.isInitialised!==!1&&(this._onUnload(),r(window).off("resize",this._resizeFunction),r(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach(function(i){i._dragListener.destroy(),i._element=null,i._itemConfig=null,i._dragListener=null}),this._dragSources=[])},createContentItem:function(i,a){var o,s;if(typeof i.type!="string")throw new n.errors.ConfigurationError("Missing parameter 'type'",i);if(i.type==="react-component"&&(i.type="component",i.componentName="lm-react-component"),!this._typeToItem[i.type])throw o="Unknown type '"+i.type+"'. Valid types are "+n.utils.objectKeys(this._typeToItem).join(","),new n.errors.ConfigurationError(o);return i.type==="component"&&!(a instanceof n.items.Stack)&&a&&!(this.isSubWindow===!0&&a instanceof n.items.Root)&&(i={type:"stack",width:i.width,height:i.height,content:[i]}),s=new this._typeToItem[i.type](this,i,a),s},createPopout:function(i,a,o,s){var u=i,l=i instanceof n.items.AbstractContentItem,c=this,f,v,g,h,m,w;if(o=o||null,l){for(u=this.toConfig(i).content,o=n.utils.getUniqueId(),h=i.parent,m=i;h.contentItems.length===1&&!h.isRoot;)h=h.parent,m=m.parent;h.addId(o),isNaN(s)&&(s=n.utils.indexOf(m,h.contentItems))}else u instanceof Array||(u=[u]);return!a&&l&&(f=window.screenX||window.screenLeft,v=window.screenY||window.screenTop,g=i.element.offset(),a={left:f+g.left,top:v+g.top,width:i.element.width(),height:i.element.height()}),!a&&!l&&(a={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),l&&i.remove(),w=new n.controls.BrowserPopout(u,a,o,s,this),w.on("initialised",function(){c.emit("windowOpened",w)}),w.on("closed",function(){c._$reconcilePopoutWindows()}),this.openPopouts.push(w),w},createDragSource:function(i,a){this.config.settings.constrainDragToContainer=!1;var o=new n.controls.DragSource(r(i),a,this);return this._dragSources.push(o),o},selectItem:function(i,a){if(this.config.settings.selectionEnabled!==!0)throw new Error("Please set selectionEnabled to true to use this feature");i!==this.selectedItem&&(this.selectedItem!==null&&this.selectedItem.deselect(),i&&a!==!0&&i.select(),this.selectedItem=i,this.emit("selectionChanged",i))},_$maximiseItem:function(i){this._maximisedItem!==null&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=i,this._maximisedItem.addId("__glMaximised"),i.element.addClass("lm_maximised"),i.element.after(this._maximisePlaceholder),this.root.element.prepend(i.element),i.element.width(this.container.width()),i.element.height(this.container.height()),i.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(i){i.element.removeClass("lm_maximised"),i.removeId("__glMaximised"),this._maximisePlaceholder.after(i.element),this._maximisePlaceholder.remove(),i.parent.callDownwards("setSize"),this._maximisedItem=null,i.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(i,a){var o,s,u=1/0,l=null;for(o=0;o<this._itemAreas.length;o++)s=this._itemAreas[o],i>s.x1&&i<s.x2&&a>s.y1&&a<s.y2&&u>s.surface&&(u=s.surface,l=s);return l},_$createRootItemAreas:function(){var i=50,a={y2:0,x2:0,y1:"y2",x1:"x2"};for(var o in a){var s=this.root._$getArea();s.side=o,a[o]?s[o]=s[a[o]]-i:s[o]=i,s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$calculateItemAreas:function(){var i,a,o=this._getAllContentItems();if(this._itemAreas=[],o.length===1){this._itemAreas.push(this.root._$getArea());return}for(this._$createRootItemAreas(),i=0;i<o.length;i++)if(o[i].isStack&&(a=o[i]._$getArea(),a!==null))if(a instanceof Array)this._itemAreas=this._itemAreas.concat(a);else{this._itemAreas.push(a);var s={};n.utils.copy(s,a),n.utils.copy(s,a.contentItem._contentAreaDimensions.header.highlightArea),s.surface=(s.x2-s.x1)*(s.y2-s.y1),this._itemAreas.push(s)}},_$normalizeContentItem:function(i,a){if(!i)throw new Error("No content item defined");if(n.utils.isFunction(i)&&(i=i()),i instanceof n.items.AbstractContentItem)return i;if(r.isPlainObject(i)&&i.type){var o=this.createContentItem(i,a);return o.callDownwards("_$init"),o}else throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var i=[],a;for(a=0;a<this.openPopouts.length;a++)this.openPopouts[a].getWindow().closed===!1?i.push(this.openPopouts[a]):this.emit("windowClosed",this.openPopouts[a]);this.openPopouts.length!==i.length&&(this.emit("stateChanged"),this.openPopouts=i)},_getAllContentItems:function(){var i=[],a=function(o){if(i.push(o),o.contentItems instanceof Array)for(var s=0;s<o.contentItems.length;s++)a(o.contentItems[s])};return a(this.root),i},_bindEvents:function(){this._isFullPage&&r(window).resize(this._resizeFunction),r(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(n.utils.fnBind(this.updateSize,this),100)},_createConfig:function(i){var a=n.utils.getQueryStringParam("gl-window");a&&(this.isSubWindow=!0,i=localStorage.getItem(a),i=JSON.parse(i),i=new n.utils.ConfigMinifier().unminifyConfig(i),localStorage.removeItem(a)),i=r.extend(!0,{},n.config.defaultConfig,i);var o=function(s){for(var u in s)u!=="props"&&typeof s[u]=="object"?o(s[u]):u==="type"&&s[u]==="react-component"&&(s.type="component",s.componentName="lm-react-component")};return o(i),i.settings.hasHeaders===!1&&(i.dimensions.headerHeight=0),i},_adjustToWindowMode:function(){var i=r('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');i.click(n.utils.fnBind(function(){this.emit("popIn")},this)),document.title=n.utils.stripTags(this.config.content[0].title),r("head").append(r("body link, body style, template, .gl_keep")),this.container=r("body").html("").css("visibility","visible").append(i),document.body.offsetHeight,window.__glInstance=this},_createSubWindows:function(){var i,a;for(i=0;i<this.config.openPopouts.length;i++)a=this.config.openPopouts[i],this.createPopout(a.content,a.dimensions,a.parentId,a.indexInParent)},_setContainer:function(){var i=r(this.container||"body");if(i.length===0)throw new Error("GoldenLayout container not found");if(i.length>1)throw new Error("GoldenLayout more than one container element specified");i[0]===document.body&&(this._isFullPage=!0,r("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=i},_create:function(i){var a;if(!(i.content instanceof Array))throw i.content===void 0?a="Missing setting 'content' on top level of configuration":a="Configuration parameter 'content' must be an array",new n.errors.ConfigurationError(a,i);if(i.content.length>1)throw a="Top level content can't contain more then one element.",new n.errors.ConfigurationError(a,i);this.root=new n.items.Root(this,{content:i.content},this.container),this.root.callDownwards("_$init"),i.maximisedItemId==="__glMaximised"&&this.root.getItemsById(i.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(this.config.settings.closePopoutsOnUnload===!0)for(var i=0;i<this.openPopouts.length;i++)this.openPopouts[i].close()},_adjustColumnsResponsive:function(){if(!this._useResponsiveLayout()||this._updatingColumnsResponsive||!this.config.dimensions||!this.config.dimensions.minItemWidth||this.root.contentItems.length===0||!this.root.contentItems[0].isRow){this._firstLoad=!1;return}this._firstLoad=!1;var i=this.root.contentItems[0].contentItems.length;if(!(i<=1)){var a=this.config.dimensions.minItemWidth,o=i*a;if(!(o<=this.width)){this._updatingColumnsResponsive=!0;for(var s=Math.max(Math.floor(this.width/a),1),u=i-s,l=this.root.contentItems[0],c=this._findAllStackContainers()[0],f=0;f<u;f++){var v=l.contentItems[l.contentItems.length-1];this._addChildContentItemsToContainer(c,v)}this._updatingColumnsResponsive=!1}}},_useResponsiveLayout:function(){return this.config.settings&&(this.config.settings.responsiveMode=="always"||this.config.settings.responsiveMode=="onload"&&this._firstLoad)},_addChildContentItemsToContainer:function(i,a){a.type==="stack"?a.contentItems.forEach(function(o){i.addChild(o),a.removeChild(o,!0)}):a.contentItems.forEach(n.utils.fnBind(function(o){this._addChildContentItemsToContainer(i,o)},this))},_findAllStackContainers:function(){var i=[];return this._findAllStackContainersRecursive(i,this.root),i},_findAllStackContainersRecursive:function(i,a){a.contentItems.forEach(n.utils.fnBind(function(o){o.type=="stack"?i.push(o):o.isComponent||this._findAllStackContainersRecursive(i,o)},this))}}),(function(){t.exports=n.LayoutManager})(),n.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},n.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0,responsiveMode:"onload",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in",tabDropdown:"additional tabs"}},n.container.ItemContainer=function(i,a,o){n.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=i.componentName,this.parent=a,this.layoutManager=o,this.isHidden=!1,this._config=i,this._element=r(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},n.utils.copy(n.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),(this.height!=0||this.width!=0)&&this.emit("shown")},setSize:function(i,a){for(var o=this.parent,s=this,u,l,c,f,v,g;!o.isColumn&&!o.isRow;)if(s=o,o=o.parent,o.isRoot)return!1;for(c=o.isColumn?"height":"width",f=c==="height"?a:i,u=this[c]*(1/(s.config[c]/100)),l=f/u*100,v=(s.config[c]-l)/(o.contentItems.length-1),g=0;g<o.contentItems.length;g++)o.contentItems[g]===s?o.contentItems[g].config[c]=l:o.contentItems[g].config[c]+=v;return o.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(i){this.setState(r.extend(!0,this.getState(),i))},setState:function(i){this._config.componentState=i,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(i){this.parent.setTitle(i)},_$setSize:function(i,a){if(i!==this.width||a!==this.height){this.width=i,this.height=a;var o=this._contentElement[0],s=o.offsetWidth-o.clientWidth,u=o.offsetHeight-o.clientHeight;this._contentElement.width(this.width-s).height(this.height-u),this.emit("resize")}}}),n.controls.BrowserPopout=function(i,a,o,s,u){n.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=i,this._dimensions=a,this._parentId=o,this._indexInParent=s,this._layoutManager=u,this._popoutWindow=null,this._id=null,this._createWindow()},n.utils.copy(n.controls.BrowserPopout.prototype,{toConfig:function(){if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch{}},popIn:function(){var i,a;this._indexInParent,this._parentId&&(i=r.extend(!0,{},this.getGlInstance().toConfig()).content[0],a=this._layoutManager.root.getItemsById(this._parentId)[0],a||(this._layoutManager.root.contentItems.length>0?a=this._layoutManager.root.contentItems[0]:a=this._layoutManager.root)),a.addChild(i,this._indexInParent),this.close()},_createWindow:function(){var i,a=this._createUrl(),o=Math.floor(Math.random()*1e6).toString(36),s=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(a,o,s),!this._popoutWindow)if(this._layoutManager.config.settings.blockedPopoutsThrowError===!0){var u=new Error("Popout blocked");throw u.type="popoutBlocked",u}else return;r(this._popoutWindow).on("load",n.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",n.utils.fnBind(this._onClose,this)),i=setInterval(n.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(i))},this),10)},_serializeWindowOptions:function(i){var a=[],o;for(o in i)a.push(o+"="+i[o]);return a.join(",")},_createUrl:function(){var i={content:this._config},a="gl-window-config-"+n.utils.getUniqueId(),o;i=new n.utils.ConfigMinifier().minifyConfig(i);try{localStorage.setItem(a,JSON.stringify(i))}catch(s){throw new Error("Error while writing to localStorage "+s.toString())}return o=document.location.href.split("?"),o.length===1?o[0]+"?gl-window="+a:document.location.href+"&gl-window="+a},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(n.utils.fnBind(this.emit,this,["closed"]),50)}}),n.controls.DragProxy=function(i,a,o,s,u,l){n.utils.EventEmitter.call(this),this._dragListener=o,this._layoutManager=s,this._contentItem=u,this._originalParent=l,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=r(n.controls.DragProxy._template),l&&l._side&&(this._sided=l._sided,this.element.addClass("lm_"+l._side),["right","bottom"].indexOf(l._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:i,top:a}),this.element.find(".lm_tab").attr("title",n.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(u.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),r(document.body).append(this.element);var c=this._layoutManager.container.offset();this._minX=c.left,this._minY=c.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height(),this._setDropPosition(i,a)},n.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',n.utils.copy(n.controls.DragProxy.prototype,{_onDrag:function(i,a,o){o=o.originalEvent&&o.originalEvent.touches?o.originalEvent.touches[0]:o;var s=o.pageX,u=o.pageY,l=s>this._minX&&s<this._maxX&&u>this._minY&&u<this._maxY;!l&&this._layoutManager.config.settings.constrainDragToContainer===!0||this._setDropPosition(s,u)},_setDropPosition:function(i,a){this.element.css({left:i,top:a}),this._area=this._layoutManager._$getArea(i,a),this._area!==null&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(i,a,this._area))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),this._area!==null?this._area.contentItem._$onDrop(this._contentItem,this._area):this._lastValidArea!==null?this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):this._originalParent?this._originalParent.addChild(this._contentItem):this._contentItem._$destroy(),this.element.remove(),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var i=this._layoutManager.config.dimensions,a=i.dragProxyWidth,o=i.dragProxyHeight;this.element.width(a),this.element.height(o),a-=this._sided?i.headerHeight:0,o-=this._sided?0:i.headerHeight,this.childElementContainer.width(a),this.childElementContainer.height(o),this._contentItem.element.width(a),this._contentItem.element.height(o),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),n.controls.DragSource=function(i,a,o){this._element=i,this._itemConfig=a,this._layoutManager=o,this._dragListener=null,this._createDragListener()},n.utils.copy(n.controls.DragSource.prototype,{_createDragListener:function(){this._dragListener!==null&&this._dragListener.destroy(),this._dragListener=new n.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(i,a){var o=this._itemConfig;n.utils.isFunction(o)&&(o=o());var s=this._layoutManager._$normalizeContentItem(r.extend(!0,{},o)),u=new n.controls.DragProxy(i,a,this._dragListener,this._layoutManager,s,null);this._layoutManager.transitionIndicator.transitionElements(this._element,u.element)}}),n.controls.DropTargetIndicator=function(){this.element=r(n.controls.DropTargetIndicator._template),r(document.body).append(this.element)},n.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',n.utils.copy(n.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(i,a,o,s){this.highlightArea({x1:i,y1:a,x2:o,y2:s})},highlightArea:function(i){this.element.css({left:i.x1,top:i.y1,width:i.x2-i.x1,height:i.y2-i.y1}).show()},hide:function(){this.element.hide()}}),n.controls.Header=function(i,a){n.utils.EventEmitter.call(this),this.layoutManager=i,this.element=r(n.controls.Header._template),this.layoutManager.config.settings.selectionEnabled===!0&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",n.utils.fnBind(this._onHeaderClick,this))),this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.parent=a,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=n.utils.fnBind(this._hideAdditionalTabsDropdown,this),r(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,this._createControls()},n.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>','<ul class="lm_tabdropdown_list"></ul>',"</div>"].join(""),n.utils.copy(n.controls.Header.prototype,{createTab:function(i,a){var o,s;for(s=0;s<this.tabs.length;s++)if(this.tabs[s].contentItem===i)return;if(o=new n.controls.Tab(this,i),this.tabs.length===0){this.tabs.push(o),this.tabsContainer.append(o.element);return}a===void 0&&(a=this.tabs.length),a>0?this.tabs[a-1].element.after(o.element):this.tabs[0].element.before(o.element),this.tabs.splice(a,0,o),this._updateTabSizes()},removeTab:function(i){for(var a=0;a<this.tabs.length;a++)if(this.tabs[a].contentItem===i){this.tabs[a]._$destroy(),this.tabs.splice(a,1);return}throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(i){var a,o,s,u;for(a=0;a<this.tabs.length;a++)s=this.tabs[a].contentItem===i,this.tabs[a].setActive(s),s===!0&&(this.activeContentItem=i,this.parent.config.activeItemIndex=a);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&this._lastVisibleTabIndex!==-1&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(u=this.tabs[this.parent.config.activeItemIndex],o=this.parent.config.activeItemIndex;o>0;o--)this.tabs[o]=this.tabs[o-1];this.tabs[0]=u,this.parent.config.activeItemIndex=0}this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},position:function(i){var a=this.parent._header.show;return a&&!this.parent._side&&(a="top"),i!==void 0&&this.parent._header.show!=i&&(this.parent._header.show=i,this.parent._setupHeaderPosition()),a},_$setClosable:function(i){return this.closeButton&&this._isClosable()?(this.closeButton.element[i?"show":"hide"](),!0):!1},_$destroy:function(){this.emit("destroy",this);for(var i=0;i<this.tabs.length;i++)this.tabs[i]._$destroy();r(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(i){if(i in this.parent._header)return this.parent._header[i]},_createControls:function(){var i,a,o,s,u,l,c,f,v;v=n.utils.fnBind(this._showAdditionalTabsDropdown,this),f=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new n.controls.HeaderButton(this,f,"lm_tabdropdown",v),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(a=n.utils.fnBind(this._onPopoutClick,this),o=this._getHeaderSetting("popout"),new n.controls.HeaderButton(this,o,"lm_popout",a)),this._getHeaderSetting("maximise")&&(l=n.utils.fnBind(this.parent.toggleMaximise,this.parent),s=this._getHeaderSetting("maximise"),u=this._getHeaderSetting("minimise"),c=new n.controls.HeaderButton(this,s,"lm_maximise",l),this.parent.on("maximised",function(){c.element.attr("title",u)}),this.parent.on("minimised",function(){c.element.attr("title",s)})),this._isClosable()&&(i=n.utils.fnBind(this.parent.remove,this.parent),o=this._getHeaderSetting("close"),this.closeButton=new n.controls.HeaderButton(this,o,"lm_close",i))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(i){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){this.layoutManager.config.settings.popoutWholeStack===!0?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(i){i.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(i){if(this.tabs.length!==0){this.tabDropdownButton.element.toggle(i===!0);var a=function(E){return E?"width":"height"};this.element.css(a(!this.parent._sided),""),this.element[a(this.parent._sided)](this.layoutManager.config.dimensions.headerHeight);var o=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,s=0,u=0,l,c,f,v,g=0,h,m=this.layoutManager.config.settings.tabOverlapAllowance,w=!1,b=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,C=this.tabs[b];for(this.parent._sided&&(o=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,c=0;c<this.tabs.length;c++)if(l=this.tabs[c].element,this.tabsContainer.append(l),h=l.outerWidth()+parseInt(l.css("margin-right"),10),s+=h,b<=c?u=s:u=s+C.element.outerWidth()+parseInt(C.element.css("margin-right"),10),u>o){if(w)c===b&&(l.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(l));else if(b>0&&b<=c?g=(u-o)/(c-1):g=(u-o)/c,g<m){for(f=0;f<=c;f++)v=f!==b&&f!==0?"-"+g+"px":"",this.tabs[f].element.css({"z-index":c-f,"margin-left":v});this._lastVisibleTabIndex=c,this.tabsContainer.append(l)}else w=!0;if(w&&c!==b)if(i)l.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(l);else{this._updateTabSizes(!0);return}}else this._lastVisibleTabIndex=c,l.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(l)}}}),n.controls.HeaderButton=function(i,a,o,s){this._header=i,this.element=r('<li class="'+o+'" title="'+a+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=s,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},n.utils.copy(n.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),n.controls.Splitter=function(i,a,o){this._isVertical=i,this._size=a,this._grabSize=o<a?a:o,this.element=this._createElement(),this._dragListener=new n.utils.DragListener(this.element)},n.utils.copy(n.controls.Splitter.prototype,{on:function(i,a,o){this._dragListener.on(i,a,o)},_$destroy:function(){this.element.remove()},_createElement:function(){var i=r('<div class="lm_drag_handle"></div>'),a=r('<div class="lm_splitter"></div>');a.append(i);var o=this._grabSize-this._size,s=o/2;return this._isVertical?(i.css("top",-s),i.css("height",this._size+o),a.addClass("lm_vertical"),a.height(this._size)):(i.css("left",-s),i.css("width",this._size+o),a.addClass("lm_horizontal"),a.width(this._size)),a}}),n.controls.Tab=function(i,a){this.header=i,this.contentItem=a,this.element=r(n.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[a.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(a.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,this._layoutManager.config.settings.reorderEnabled===!0&&a.config.reorderEnabled===!0&&(this._dragListener=new n.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=n.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=n.utils.fnBind(this._onCloseClick,this),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},n.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',n.utils.copy(n.controls.Tab.prototype,{setTitle:function(i){this.element.attr("title",n.utils.stripTags(i)),this.titleElement.html(i)},setActive:function(i){i!==this.isActive&&(this.isActive=i,i?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(i,a){this.contentItem.parent.isMaximised===!0&&this.contentItem.parent.toggleMaximise(),new n.controls.DragProxy(i,a,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(i){if(i.button===0||i.type==="touchstart"){var a=this.header.parent.getActiveContentItem();this.contentItem!==a&&this.header.parent.setActiveContentItem(this.contentItem)}else i.button===1&&this.contentItem.config.isClosable&&this._onCloseClick(i)},_onCloseClick:function(i){i.stopPropagation(),this.header.parent.removeChild(this.contentItem)},_onCloseMousedown:function(i){i.stopPropagation()}}),n.controls.TransitionIndicator=function(){this._element=r('<div class="lm_transition_indicator"></div>'),r(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},n.utils.copy(n.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(i,a){},_nextAnimationFrame:function(){var i=this._measure(this._toElement),a=(n.utils.now()-this._animationStartTime)/this._totalAnimationDuration,o={},s;if(a>=1){this._element.hide();return}i.opacity=0;for(s in this._fromDimensions)o[s]=this._fromDimensions[s]+(i[s]-this._fromDimensions[s])*a;this._element.css(o),n.utils.animFrame(n.utils.fnBind(this._nextAnimationFrame,this))},_measure:function(i){var a=i.offset();return{left:a.left,top:a.top,width:i.outerWidth(),height:i.outerHeight()}}}),n.errors.ConfigurationError=function(i,a){Error.call(this),this.name="Configuration Error",this.message=i,this.node=a},n.errors.ConfigurationError.prototype=new Error,n.items.AbstractContentItem=function(i,a,o){n.utils.EventEmitter.call(this),this.config=this._extendItemNode(a),this.type=a.type,this.contentItems=[],this.parent=o,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=i,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(n.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),a.content&&this._createContentItems(a)},n.utils.copy(n.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(i,a,o,s){var u;for(o!==!0&&s!==!0&&this[i].apply(this,a||[]),u=0;u<this.contentItems.length;u++)this.contentItems[u].callDownwards(i,a,o);o===!0&&s!==!0&&this[i].apply(this,a||[])},removeChild:function(i,a){var o=n.utils.indexOf(i,this.contentItems);if(o===-1)throw new Error("Can't remove child item. Unknown content item");a!==!0&&this.contentItems[o]._$destroy(),this.contentItems.splice(o,1),this.config.content.splice(o,1),this.contentItems.length>0?this.callDownwards("setSize"):!(this instanceof n.items.Root)&&this.config.isClosable===!0&&this.parent.removeChild(this)},addChild:function(i,a){a===void 0&&(a=this.contentItems.length),this.contentItems.splice(a,0,i),this.config.content===void 0&&(this.config.content=[]),this.config.content.splice(a,0,i.config),i.parent=this,i.parent.isInitialised===!0&&i.isInitialised===!1&&i._$init()},replaceChild:function(i,a,o){a=this.layoutManager._$normalizeContentItem(a);var s=n.utils.indexOf(i,this.contentItems),u=i.element[0].parentNode;if(s===-1)throw new Error("Can't replace child. oldChild is not child of this");u.replaceChild(a.element[0],i.element[0]),o===!0&&(i.parent=null,i._$destroy()),this.contentItems[s]=a,a.parent=this,this.isStack&&(this.header.tabs[s].contentItem=a),a.parent.isInitialised===!0&&a.isInitialised===!1&&a._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var i=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),i},toggleMaximise:function(i){i&&i.preventDefault(),this.isMaximised===!0?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(i){this.config.title=i,this.emit("titleChanged",i),this.emit("stateChanged")},hasId:function(i){if(this.config.id){if(typeof this.config.id=="string")return this.config.id===i;if(this.config.id instanceof Array)return n.utils.indexOf(i,this.config.id)!==-1}else return!1},addId:function(i){this.hasId(i)||(this.config.id?typeof this.config.id=="string"?this.config.id=[this.config.id,i]:this.config.id instanceof Array&&this.config.id.push(i):this.config.id=i)},removeId:function(i){if(!this.hasId(i))throw new Error("Id not found");if(typeof this.config.id=="string")delete this.config.id;else if(this.config.id instanceof Array){var a=n.utils.indexOf(i,this.config.id);this.config.id.splice(a,1)}},getItemsByFilter:function(i){var a=[],o=function(s){for(var u=0;u<s.contentItems.length;u++)i(s.contentItems[u])===!0&&a.push(s.contentItems[u]),o(s.contentItems[u])};return o(this),a},getItemsById:function(i){return this.getItemsByFilter(function(a){return a.config.id instanceof Array?n.utils.indexOf(i,a.config.id)!==-1:a.config.id===i})},getItemsByType:function(i){return this._$getItemsByProperty("type",i)},getComponentsByName:function(i){var a=this._$getItemsByProperty("componentName",i),o=[],s;for(s=0;s<a.length;s++)o.push(a[s].instance);return o},_$getItemsByProperty:function(i,a){return this.getItemsByFilter(function(o){return o[i]===a})},_$setParent:function(i){this.parent=i},_$highlightDropZone:function(i,a,o){this.layoutManager.dropTargetIndicator.highlightArea(o)},_$onDrop:function(i){this.addChild(i)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(i){var a=this.getItemsByType("stack"),o,s;for(s=0;s<a.length;s++)o=a[s].getActiveContentItem(),o&&o.isComponent&&o.container[i]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(i){i=i||this.element;var a=i.offset(),o=i.width(),s=i.height();return{x1:a.left,y1:a.top,x2:a.left+o,y2:a.top+s,surface:o*s,contentItem:this}},_$init:function(){var i;for(this.setSize(),i=0;i<this.contentItems.length;i++)this.childElementContainer.append(this.contentItems[i].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(i){var a=new n.utils.BubblingEvent(i,this);this.emit(i,a)},_createContentItems:function(i){var a,o;if(!(i.content instanceof Array))throw new n.errors.ConfigurationError("content must be an Array",i);for(o=0;o<i.content.length;o++)a=this.layoutManager.createContentItem(i.content[o],this),this.contentItems.push(a)},_extendItemNode:function(i){for(var a in n.config.itemDefaultConfig)i[a]===void 0&&(i[a]=n.config.itemDefaultConfig[a]);return i},_propagateEvent:function(i,a){a instanceof n.utils.BubblingEvent&&a.isPropagationStopped===!1&&this.isInitialised===!0&&(this.isRoot===!1&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(i,a))},_scheduleEventPropagationToLayoutManager:function(i,a){n.utils.indexOf(i,this._throttledEvents)===-1?this.layoutManager.emit(i,a.origin):this._pendingEventPropagations[i]!==!0&&(this._pendingEventPropagations[i]=!0,n.utils.animFrame(n.utils.fnBind(this._propagateEventToLayoutManager,this,[i,a])))},_propagateEventToLayoutManager:function(i,a){this._pendingEventPropagations[i]=!1,this.layoutManager.emit(i,a)}}),n.items.Component=function(i,a,o){n.items.AbstractContentItem.call(this,i,a,o);var s=i.getComponent(this.config.componentName),u=r.extend(!0,{},this.config.componentState||{});u.componentName=this.config.componentName,this.componentName=this.config.componentName,this.config.title===""&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new n.container.ItemContainer(this.config,this,i),this.instance=new s(this.container,u),this.element=this.container._element},n.utils.extend(n.items.Component,n.items.AbstractContentItem),n.utils.copy(n.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){n.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),n.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),n.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),n.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),n.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),n.items.Root=function(i,a,o){n.items.AbstractContentItem.call(this,i,a,null),this.isRoot=!0,this.type="root",this.element=r('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=o,this._containerElement.append(this.element)},n.utils.extend(n.items.Root,n.items.AbstractContentItem),n.utils.copy(n.items.Root.prototype,{addChild:function(i){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");i=this.layoutManager._$normalizeContentItem(i,this),this.childElementContainer.append(i.element),n.items.AbstractContentItem.prototype.addChild.call(this,i),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(i,a){i=typeof i>"u"?this._containerElement.width():i,a=typeof a>"u"?this._containerElement.height():a,this.element.width(i),this.element.height(a),this.contentItems[0]&&(this.contentItems[0].element.width(i),this.contentItems[0].element.height(a))},_$highlightDropZone:function(i,a,o){this.layoutManager.tabDropPlaceholder.remove(),n.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(i,a){var o;if(i.isComponent&&(o=this.layoutManager.createContentItem({type:"stack",header:i.config.header||{}},this),o._$init(),o.addChild(i),i=o),!this.contentItems.length)this.addChild(i);else{var s=a.side[0]=="x"?"row":"column",u=a.side[0]=="x"?"width":"height",l=a.side[1]=="2",c=this.contentItems[0];if(!c instanceof n.items.RowOrColumn||c.type!=s){var f=this.layoutManager.createContentItem({type:s},this);this.replaceChild(c,f),f.addChild(i,l?0:void 0,!0),f.addChild(c,l?void 0:0,!0),c.config[u]=50,i.config[u]=50,f.callDownwards("setSize")}else{var v=c.contentItems[l?0:c.contentItems.length-1];c.addChild(i,l?0:void 0,!0),v.config[u]*=.5,i.config[u]=v.config[u],c.callDownwards("setSize")}}}}),n.items.RowOrColumn=function(i,a,o,s){n.items.AbstractContentItem.call(this,a,o,s),this.isRow=!i,this.isColumn=i,this.element=r('<div class="lm_item lm_'+(i?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=a.config.dimensions.borderWidth,this._splitterGrabSize=a.config.dimensions.borderGrabWidth,this._isColumn=i,this._dimension=i?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},n.utils.extend(n.items.RowOrColumn,n.items.AbstractContentItem),n.utils.copy(n.items.RowOrColumn.prototype,{addChild:function(i,a,o){var s,u,l,c;if(i=this.layoutManager._$normalizeContentItem(i,this),a===void 0&&(a=this.contentItems.length),this.contentItems.length>0?(c=this._createSplitter(Math.max(0,a-1)).element,a>0?(this.contentItems[a-1].element.after(c),c.after(i.element)):(this.contentItems[0].element.before(c),c.before(i.element))):this.childElementContainer.append(i.element),n.items.AbstractContentItem.prototype.addChild.call(this,i,a),s=1/this.contentItems.length*100,o===!0){this.emitBubblingEvent("stateChanged");return}for(l=0;l<this.contentItems.length;l++)this.contentItems[l]===i?i.config[this._dimension]=s:(u=this.contentItems[l].config[this._dimension]*=(100-s)/100,this.contentItems[l].config[this._dimension]=u);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(i,a){var o=i.config[this._dimension],s=n.utils.indexOf(i,this.contentItems),u=Math.max(s-1,0),l,c;if(s===-1)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[u]&&(this._splitter[u]._$destroy(),this._splitter.splice(u,1)),l=0;l<this.contentItems.length;l++)this.contentItems[l]!==i&&(this.contentItems[l].config[this._dimension]+=o/(this.contentItems.length-1));n.items.AbstractContentItem.prototype.removeChild.call(this,i,a),this.contentItems.length===1&&this.config.isClosable===!0?(c=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,c,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(i,a){var o=i.config[this._dimension];n.items.AbstractContentItem.prototype.replaceChild.call(this,i,a),a.config[this._dimension]=o,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){if(this.isInitialised!==!0){var i;for(n.items.AbstractContentItem.prototype._$init.call(this),i=0;i<this.contentItems.length-1;i++)this.contentItems[i].element.after(this._createSplitter(i).element)}},_setAbsoluteSizes:function(){var i,a=this._calculateAbsoluteSizes();for(i=0;i<this.contentItems.length;i++)a.additionalPixel-i>0&&a.itemSizes[i]++,this._isColumn?(this.contentItems[i].element.width(a.totalWidth),this.contentItems[i].element.height(a.itemSizes[i])):(this.contentItems[i].element.width(a.itemSizes[i]),this.contentItems[i].element.height(a.totalHeight))},_calculateAbsoluteSizes:function(){var i,a=(this.contentItems.length-1)*this._splitterSize,o=this.element.width(),s=this.element.height(),u=0,l,c,f=[];for(this._isColumn?s-=a:o-=a,i=0;i<this.contentItems.length;i++)this._isColumn?c=Math.floor(s*(this.contentItems[i].config.height/100)):c=Math.floor(o*(this.contentItems[i].config.width/100)),u+=c,f.push(c);return l=Math.floor((this._isColumn?s:o)-u),{itemSizes:f,additionalPixel:l,totalWidth:o,totalHeight:s}},_calculateRelativeSizes:function(){var i,a=0,o=[],s=this._isColumn?"height":"width";for(i=0;i<this.contentItems.length;i++)this.contentItems[i].config[s]!==void 0?a+=this.contentItems[i].config[s]:o.push(this.contentItems[i]);if(Math.round(a)===100){this._respectMinItemWidth();return}if(Math.round(a)<100&&o.length>0){for(i=0;i<o.length;i++)o[i].config[s]=(100-a)/o.length;this._respectMinItemWidth();return}if(Math.round(a)>100)for(i=0;i<o.length;i++)o[i].config[s]=50,a+=50;for(i=0;i<this.contentItems.length;i++)this.contentItems[i].config[s]=this.contentItems[i].config[s]/a*100;this._respectMinItemWidth()},_respectMinItemWidth:function(){var i=this.layoutManager.config.dimensions&&this.layoutManager.config.dimensions.minItemWidth||0,a=null,o=[],s=0,u=0,l=0,c=0,f,v,g=[],h;if(!(this._isColumn||!i||this.contentItems.length<=1)){a=this._calculateAbsoluteSizes();for(var m=0;m<this.contentItems.length;m++)this.contentItems[m],c=a.itemSizes[m],c<i?(u+=i-c,h={width:i}):(s+=c-i,h={width:c},o.push(h)),g.push(h);if(!(u===0||u>s)){for(f=u/s,l=u,m=0;m<o.length;m++)h=o[m],v=Math.round((h.width-i)*f),l-=v,h.width-=v;for(l!==0&&(g[g.length-1].width-=l),m=0;m<this.contentItems.length;m++)this.contentItems[m].config.width=g[m].width/a.totalWidth*100}}},_createSplitter:function(i){var a;return a=new n.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize),a.on("drag",n.utils.fnBind(this._onSplitterDrag,this,[a]),this),a.on("dragStop",n.utils.fnBind(this._onSplitterDragStop,this,[a]),this),a.on("dragStart",n.utils.fnBind(this._onSplitterDragStart,this,[a]),this),this._splitter.splice(i,0,a),a},_getItemsForSplitter:function(i){var a=n.utils.indexOf(i,this._splitter);return{before:this.contentItems[a],after:this.contentItems[a+1]}},_getMinimumDimensions:function(i){for(var a=0,o=0,s=0;s<i.length;++s)a=Math.max(i[s].minWidth||0,a),o=Math.max(i[s].minHeight||0,o);return{horizontal:a,vertical:o}},_onSplitterDragStart:function(i){var a=this._getItemsForSplitter(i),o=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],s=this._getMinimumDimensions(a.before.config.content),u=this._isColumn?s.vertical:s.horizontal,l=this._getMinimumDimensions(a.after.config.content),c=this._isColumn?l.vertical:l.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(a.before.element[this._dimension]()-(u||o)),this._splitterMaxPosition=a.after.element[this._dimension]()-(c||o)},_onSplitterDrag:function(i,a,o){var s=this._isColumn?o:a;s>this._splitterMinPosition&&s<this._splitterMaxPosition&&(this._splitterPosition=s,i.element.css(this._isColumn?"top":"left",s))},_onSplitterDragStop:function(i){var a=this._getItemsForSplitter(i),o=a.before.element[this._dimension](),s=a.after.element[this._dimension](),u=(this._splitterPosition+o)/(o+s),l=a.before.config[this._dimension]+a.after.config[this._dimension];a.before.config[this._dimension]=u*l,a.after.config[this._dimension]=(1-u)*l,i.element.css({top:0,left:0}),n.utils.animFrame(n.utils.fnBind(this.callDownwards,this,["setSize"]))}}),n.items.Stack=function(i,a,o){n.items.AbstractContentItem.call(this,i,a,o),this.element=r('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var s=i.config;this._header={show:s.settings.hasHeaders===!0&&a.hasHeaders!==!1,popout:s.settings.showPopoutIcon&&s.labels.popout,maximise:s.settings.showMaximiseIcon&&s.labels.maximise,close:s.settings.showCloseIcon&&s.labels.close,minimise:s.labels.minimise},s.header&&n.utils.copy(this._header,s.header),a.header&&n.utils.copy(this._header,a.header),a.content&&a.content[0]&&a.content[0].header&&n.utils.copy(this._header,a.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=r('<div class="lm_items"></div>'),this.header=new n.controls.Header(i,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},n.utils.extend(n.items.Stack,n.items.AbstractContentItem),n.utils.copy(n.items.Stack.prototype,{setSize:function(){var i,a=this._header.show?this.layoutManager.config.dimensions.headerHeight:0,o=this.element.width()-(this._sided?a:0),s=this.element.height()-(this._sided?0:a);for(this.childElementContainer.width(o),this.childElementContainer.height(s),i=0;i<this.contentItems.length;i++)this.contentItems[i].element.width(o).height(s);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var i,a;if(this.isInitialised!==!0){for(n.items.AbstractContentItem.prototype._$init.call(this),i=0;i<this.contentItems.length;i++)this.header.createTab(this.contentItems[i]),this.contentItems[i]._$hide();if(this.contentItems.length>0){if(a=this.contentItems[this.config.activeItemIndex||0],!a)throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(a)}}},setActiveContentItem:function(i){if(n.utils.indexOf(i,this.contentItems)===-1)throw new Error("contentItem is not a child of this stack");this._activeContentItem!==null&&this._activeContentItem._$hide(),this._activeContentItem=i,this.header.setActiveContentItem(i),i._$show(),this.emit("activeContentItemChanged",i),this.layoutManager.emit("activeContentItemChanged",i),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(i,a){i=this.layoutManager._$normalizeContentItem(i,this),n.items.AbstractContentItem.prototype.addChild.call(this,i,a),this.childElementContainer.append(i.element),this.header.createTab(i,a),this.setActiveContentItem(i),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(i,a){var o=n.utils.indexOf(i,this.contentItems);n.items.AbstractContentItem.prototype.removeChild.call(this,i,a),this.header.removeTab(i),this.header.activeContentItem===i&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(o-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var i,a,o;for(i=this.header._isClosable(),o=0,a=this.contentItems.length;o<a&&i;o++)i=this.contentItems[o].config.isClosable;this.header._$setClosable(i)},_$destroy:function(){n.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(i){if(this._dropSegment==="header"){this._resetHeaderDropZone(),this.addChild(i,this._dropIndex);return}if(this._dropSegment==="body"){this.addChild(i);return}var a=this._dropSegment==="top"||this._dropSegment==="bottom",o=this._dropSegment==="left"||this._dropSegment==="right",s=this._dropSegment==="top"||this._dropSegment==="left",u=a&&this.parent.isColumn||o&&this.parent.isRow,l=a?"column":"row",c=a?"height":"width",f,v,g;i.isComponent&&(v=this.layoutManager.createContentItem({type:"stack",header:i.config.header||{}},this),v._$init(),v.addChild(i),i=v),u?(f=n.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(i,s?f:f+1,!0),this.config[c]*=.5,i.config[c]=this.config[c],this.parent.callDownwards("setSize")):(l=a?"column":"row",g=this.layoutManager.createContentItem({type:l},this),this.parent.replaceChild(this,g),g.addChild(i,s?0:void 0,!0),g.addChild(this,s?void 0:0,!0),this.config[c]=50,i.config[c]=50,g.callDownwards("setSize"))},_$highlightDropZone:function(i,a){var o,s;for(o in this._contentAreaDimensions)if(s=this._contentAreaDimensions[o].hoverArea,s.x1<i&&s.x2>i&&s.y1<a&&s.y2>a){o==="header"?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?a:i)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(o));return}},_$getArea:function(){if(this.element.is(":visible")===!1)return null;var i=n.items.AbstractContentItem.prototype._$getArea,a=i.call(this,this.header.element),o=i.call(this,this.childElementContainer),s=o.x2-o.x1,u=o.y2-o.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},highlightArea:{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}}},this._activeContentItem&&this._activeContentItem.isComponent===!1?a:this.contentItems.length===0?(this._contentAreaDimensions.body={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}},i.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.25,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x1+s*.5,y2:o.y2}},this._contentAreaDimensions.top={hoverArea:{x1:o.x1+s*.25,y1:o.y1,x2:o.x1+s*.75,y2:o.y1+u*.5},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y1+u*.5}},this._contentAreaDimensions.right={hoverArea:{x1:o.x1+s*.75,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1+s*.5,y1:o.y1,x2:o.x2,y2:o.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:o.x1+s*.25,y1:o.y1+u*.5,x2:o.x1+s*.75,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1+u*.5,x2:o.x2,y2:o.y2}},i.call(this,this.element))},_highlightHeaderDropZone:function(i){var a,o,s=this.header.tabs.length,u=!1,l,c,f,v,g,h,m;if(s===0){g=this.header.element.offset(),this.layoutManager.dropTargetIndicator.highlightArea({x1:g.left,x2:g.left+100,y1:g.top+this.header.element.height()-20,y2:g.top+this.header.element.height()});return}for(a=0;a<s;a++)if(o=this.header.tabs[a].element,f=o.offset(),this._sided?(c=f.top,l=f.left,h=o.height()):(c=f.left,l=f.top,h=o.width()),i>c&&i<c+h){u=!0;break}if(!(u===!1&&i<c)){if(m=c+h/2,i<m?(this._dropIndex=a,o.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(a+1,s),o.after(this.layoutManager.tabDropPlaceholder)),this._sided){placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,this.layoutManager.dropTargetIndicator.highlightArea({x1:l,x2:l+o.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});return}v=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:v,x2:v+this.layoutManager.tabDropPlaceholder.width(),y1:l,y2:l+o.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var i=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=i,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var a=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[a](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(i){var a=this._contentAreaDimensions[i].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(a),this._dropSegment=i}}),n.utils.BubblingEvent=function(i,a){this.name=i,this.origin=a,this.isPropagationStopped=!1},n.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},n.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw new Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},n.utils.copy(n.utils.ConfigMinifier.prototype,{minifyConfig:function(i){var a={};return this._nextLevel(i,a,"_min"),a},unminifyConfig:function(i){var a={};return this._nextLevel(i,a,"_max"),a},_nextLevel:function(i,a,o){var s,u;for(s in i)i instanceof Array&&(s=parseInt(s,10)),i.hasOwnProperty(s)&&(u=this[o](s,this._keys),typeof i[s]=="object"?(a[u]=i[s]instanceof Array?[]:{},this._nextLevel(i[s],a[u],o)):a[u]=this[o](i[s],this._values))},_min:function(i,a){if(typeof i=="string"&&i.length===1)return"___"+i;var o=n.utils.indexOf(i,a);return o===-1?i:o.toString(36)},_max:function(i,a){return typeof i=="string"&&i.length===1?a[parseInt(i,36)]:typeof i=="string"&&i.substr(0,3)==="___"?i[3]:i}}),n.utils.EventHub=function(i){n.utils.EventEmitter.call(this),this._layoutManager=i,this._dontPropagateToParent=null,this._childEventSource=null,this.on(n.utils.EventEmitter.ALL_EVENT,n.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=n.utils.fnBind(this._onEventFromChild,this),r(window).on("gl_child_event",this._boundOnEventFromChild)},n.utils.EventHub.prototype._onEventFromThis=function(){var i=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&i[0]!==this._dontPropagateToParent&&this._propagateToParent(i),this._propagateToChildren(i),this._dontPropagateToParent=null,this._childEventSource=null},n.utils.EventHub.prototype._$onEventFromParent=function(i){this._dontPropagateToParent=i[0],this.emit.apply(this,i)},n.utils.EventHub.prototype._onEventFromChild=function(i){this._childEventSource=i.originalEvent.__gl,this.emit.apply(this,i.originalEvent.__glArgs)},n.utils.EventHub.prototype._propagateToParent=function(i){var a,o="gl_child_event";document.createEvent?(a=window.opener.document.createEvent("HTMLEvents"),a.initEvent(o,!0,!0)):(a=window.opener.document.createEventObject(),a.eventType=o),a.eventName=o,a.__glArgs=i,a.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(a):window.opener.fireEvent("on"+a.eventType,a)},n.utils.EventHub.prototype._propagateToChildren=function(i){var a,o;for(o=0;o<this._layoutManager.openPopouts.length;o++)a=this._layoutManager.openPopouts[o].getGlInstance(),a&&a!==this._childEventSource&&a.eventHub._$onEventFromParent(i)},n.utils.EventHub.prototype.destroy=function(){r(window).off("gl_child_event",this._boundOnEventFromChild)},n.utils.ReactComponentHandler=function(i,a){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=i,this._initialState=a,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},n.utils.copy(n.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(i,a){this._container.setState(a),this._originalComponentWillUpdate.call(this._reactComponent,i,a)},_getReactClass:function(){var i=this._container._config.component,a;if(!i)throw new Error("No react component name. type: react-component needs a field `component`");if(a=this._container.layoutManager.getComponent(i),!a)throw new Error('React component "'+i+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return a},_getReactComponent:function(){var i={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},a=r.extend(i,this._container._config.props);return React.createElement(this._reactClass,a)}})})(window.$)})($c)),$c.exports}var YA=XA();const ZA=qi(YA);function Ny(){const t={settings:{selectionEnabled:!0},content:[{type:"stack",content:[]}]},e=new ZA(t);return e.on("selectionChanged ",r=>{_e.info("SELECTION CHANGED"),_e.info(r)}),e.on("stackCreated",function(r){e.selectItem(r);const n=Lr("goldenlayout-header"),i=document.importNode(n.content,!0);r.header.controlsContainer.prepend(i),r.on("activeContentItemChanged",()=>{e.selectItem(r)});const a=()=>r.getActiveContentItem().config.componentState,o=()=>a().cy,s=r.header.controlsContainer[0],u=()=>We.getMenu().separateColours()&&!a().graph.starMode,l=[[".plussign",()=>{o().zoom(o().zoom()*1.2)}],[".minussign",()=>{o().zoom(o().zoom()/1.2)}],[".addsign",()=>{new We}],[".recalculatesign",()=>{Br(o(),no,t.defaultSubOntologies,u(),!0)}],[".tightlayoutsign",()=>{Br(o(),tu,t.defaultSubOntologies,u(),!0)}],[".compoundlayoutsign",()=>{Br(o(),Zm,t.defaultSubOntologies,!1,!0)}]];for(const c of l)s.querySelector(c[0]).addEventListener("click",c[1])}),e.init(),e}let Ka=0,Wc=null,Si=Ny();function Fy(t,e){const r=[];if(t.type==="component"&&t.componentName!=="Main Graph")return r.push(t),r;for(const n of t.contentItems)r.push(...Fy(n));return r}const mr=class mr{constructor(e=!0,r){At(this,"initialized");At(this,"state");At(this,"cyContainer",document.createElement("div"));At(this,"element");At(this,"cxtMenu");At(this,"menu",null);r!=="undefined"&&Ka>0&&mr.views().forEach(s=>{if(s.state.title===r){r="Teilmodell "+mr.views().length;return}}),r=r??(Ka===0?"Main Graph":"Partial Graph "+Ka),Ka++,this.state={title:r,name:"unnamed"};const n={title:r,type:"component",componentName:r,componentState:this.state,isClosable:mr.mainView!==null},i=this;mr.mainView!==null&&mr.partViews.add(this),Si.registerComponent(r,function(s){i.element=s.getElement()[0],s.getElement()[0].appendChild(i.cyContainer),s.on("destroy",()=>{mr.partViews.delete(i)})}),Si.root.contentItems[0].addChild(n);const a=new wt(i.cyContainer),o=a.cy;this.state.graph=a,this.state.cy=o,this.initialized=e?this.fill():Promise.resolve(),this.initialized.then(()=>{const s=ay().options;this.state.graph.applyStyle(s.dayMode,s.edgesColorized,s.showProperty),this.recreateContextMenus()})}static views(){return[this.mainView,...this.partViews]}static activeState(){var e,r,n;return(n=(r=(e=Si.selectedItem)==null?void 0:e.getActiveContentItem())==null?void 0:r.config)==null?void 0:n.componentState}static activeView(){var e;return(e=Si.selectedItem)==null?void 0:e.getActiveContentItem()}async fill(){const e=this.state.graph;if(mr.mainView===null)mr.mainView=this,this.menu=new nu,Wc=zA(e),await Wc,_e.debug(`Main view ${this.state.name} loaded with ${e.cy.elements().size()} elements.`);else{await Wc,e.cy.add(mr.mainView.state.cy.elements()),_e.debug(`Create view ${this.state.title} with ${e.cy.elements().size()} hidden elements copied from ${mr.mainView.state.title}.`);const r=e.cy.elements();wt.setVisible(r,!1),wt.setVisible(r.edgesWith(r),!1),r.removeClass("source"),e.starMode=!0}}recreateContextMenus(){const e=[...jA(this.state.graph),...KA(this.state.graph)];this.cxtMenu=new cu(this.state.graph,e)}static reset(){const e=Fy(Si.root);for(const r of e)r.remove();mr.partViews.clear(),Ka=0,Si.destroy(),Si=Ny()}static getMenu(){return mr.mainView.menu}};At(mr,"mainView",null),At(mr,"partViews",new Set);let We=mr;var _i=(t=>(t[t.IN=0]="IN",t[t.OUT=1]="OUT",t[t.BOTH=2]="BOTH",t))(_i||{});class wt{constructor(e){At(this,"cy");At(this,"selectedNode",null);At(this,"starMode",!1);At(this,"matchComponents",[]);At(this,"pathSource",null);At(this,"container");At(this,"instancesLoaded",!1);const r=Ca("graph-init");this.container=e,this.container.style.backgroundColor="black",this.cy=wn({container:e,style:_d.style.concat(Md),wheelSensitivity:2,minZoom:.02,maxZoom:7}),this.cy.on("select","node",i=>{this.selectedNode=i.target});const n=["resetStyle","presentUri","showPath","showStar","showWorm","showDoubleStar","combineMatch","showCloseMatch","newGraph"];for(const i of n)this[i]=this[i].bind(this);r.stop()}cumulativeSearch(){return(document.getElementById("cumulativeSearchBox")||{}).checked}static setVisible(e,r=!0){if(r)e.removeClass("hidden");else{e.addClass("hidden"),e.removeClass("highlighted");const n=e.nodes().connectedEdges();n.addClass("hidden"),n.removeClass("highlighted")}We.getMenu().applyOptions()}static starStyle(e){e.removeClass("hidden"),e.select()}resetStyle(){this.starMode=!1,this.cy.startBatch(),this.cy.elements().removeClass("highlighted"),this.cy.elements().removeClass("starmode"),this.cy.elements().removeClass("hidden"),wt.setVisible(this.cy.edges("[p='http://www.w3.org/1999/02/22-rdf-syntax-ns#type']"),!1),this.cy.endBatch()}showPath(e,r){return n=>{if(!n)return _e.error("No path source."),!1;if(n===e)return _e.warn(`Path source ${n.data(et.ID)} equals target.`),!1;const i=this.cy.elements(".unfiltered"),o=i.aStar({root:n,goal:e}).path;if(o){if(this.cy.startBatch(),this.cy.add(o),r){const s=o.connectedEdges(".unfiltered");o.merge(s),o.merge(s.connectedNodes(".unfiltered"))}wt.starStyle(o),this.starMode?o.select():(this.starMode=!0,wt.setVisible(i.not(o),!1)),this.cy.endBatch()}else return this.starMode||this.resetStyle(),_e.warn("No path found!"),!1;return!0}}showStarMultiplexed(e=!1,r){return this.multiplex(n=>this.showStar(n,e,r),void 0,!0)}async showStarMultiplexedNew(e=!1,r=2,n=!1){const i=await this.newGraph(n);return o=>(i.multiplex(s=>i.showStar(i.assimilateNodes(s),e,r),i.assimilateNodes(this.cy.nodes(":selected")),!0)(o),i)}showStar(e,r=!1,n){console.log("center",e),this.cy.startBatch();let i=e,a;for(let f=0;f<i.size();)f=i.size(),a=i.connectedEdges(".unfiltered").filter('[pl="closeMatch"]'),i=i.union(a.connectedNodes(".unfiltered"));let o;switch(n){case 0:o=this.cy.elements(".unfiltered").edgesTo(i);break;case 1:o=i.edgesTo(".unfiltered");break;default:o=i.connectedEdges(".unfiltered")}const s=o.connectedNodes(".unfiltered"),u=i.union(s).union(o);u.merge(u.parent()),u.merge(u.children());const l=s.difference(i);(r||!this.starMode)&&(this.starMode=!0,wt.setVisible(this.cy.elements().not(u),!1)),console.log("star",u),wt.starStyle(u),r&&s.sort((v,g)=>{const h=Math.min(v.edgesTo(i).map(w=>w.data("pl").split("").reduce((b,C)=>b+C.charCodeAt(0),0))),m=Math.min(g.edgesTo(i).map(w=>w.data("pl").split("").reduce((b,C)=>b+C.charCodeAt(0),0)));return h-m}).layout({name:"concentric",fit:!0,levelWidth:function(){return 1},minNodeSpacing:175,concentric:function(v){if(i.contains(v))return 2;if(l.contains(v))return 1;throw new Error("unexpected node in star")}}).run(),this.cy.endBatch(),wt.setVisible(l.edgesWith(this.cy.nodes(".unfiltered").not(".hidden")));const c=this.cy.nodes(":visible");c.size()<100&&this.cy.fit(c,100)}showWorm(e,r){return this.starMode=!0,this.showPath(r)(e)?(this.showStar(r),!0):!1}showDoubleStar(e){const r=this.getSource();return this.showPath(e)?(this.showStar(e),this.showStar(r),!0):!1}assimilate(e){return this.getElementsByIds(e.map(r=>r.id()))}assimilateNodes(e){return this.getElementsByIds(e.map(r=>r.id()))}getElementsByIds(e){const r=this.cy.collection();for(const n of e){const i=this.cy.getElementById(n);r.merge(i)}return r}getElementsByAllMeansNecessary(e){const r=this.cy.collection();for(const n of e){let i=this.cy.getElementById(n);if(i.length===0){for(const a of We.views())if(i=a.state.cy.getElementById(n),i.length!==0){console.debug("Found!"),this.cy.add(i);break}}r.merge(i)}return r}getSource(){return this.pathSource?this.pathSource:this.selectedNode?(_e.debug("Path source not set, using selected node"),this.selectedNode):null}setSource(e){return _e.debug("Setting path source to "+e.data(et.ID)),e?e.length!==1?(_e.error("Invalid source. Length != 1"),!1):(this.pathTarget&&this.cy.resize(),this.pathSource&&this.pathSource.removeClass("source"),this.pathSource===e?(_e.info("Toggling path source off."),this.pathSource=null,!0):(this.pathSource=e,this.pathSource.addClass("source"),!0)):!1}applyStyle(e,r,n){let i=_d.style;e?(this.container.style.backgroundColor="white",i=i.concat($0)):(this.container.style.backgroundColor="black",i=i.concat(Md)),r&&(i=i.concat(V0)),n&&(i=i.concat(H0)),this.cy.style().fromJson(i).update()}presentUri(e){this.cy.zoom(.6);const r=this.cy.elements().nodes().filter(`node[id= "${e}"]`);if(r.length<1)return _e.warn(`Node not in graph. ${e} may be available on the SPARQL endpoint but not in the graph.`),!1;const n=r[0];return n.hasClass("filtered")?(_e.warn(`Node is filtered out. ${e} is not visible. Please adjust filters.`),!1):(n.hasClass("hidden")&&(_e.debug(`Node is hidden. Unhiding ${e}.`),wt.setVisible(n,!0),wt.setVisible(n.edgesWith(this.cy.nodes(":visible")),!0)),this.starMode||this.cumulativeSearch()||this.resetStyle(),this.cy.elements().unselect(),n.select(),this.cy.center(n),!0)}presentUris(e,r=!1){if(e.length<1)return _e.warn("All search results are only available on the SPARQL endpoint but not in the graph."),!1;this.cumulativeSearch()||this.resetStyle();const n=this.cy.elements().nodes().filter(i=>e.includes(i.data(et.ID)));return r&&(wt.setVisible(this.cy.elements(),!1),wt.setVisible(n.union(n.edgesTo(n)),!0),this.starMode=!0),this.cy.elements().unselect(),n.select(),n.edgesTo(n).select(),this.cy.fit(this.cy.elements(":selected")),!0}multiplex(e,r,n){return i=>{const a=this.cy.nodes(":selected");let o=r;if(!r&&a.size()>1&&(o=a),o)if(i&&(o=o.union(i)),_e.debug("multiplexing of "+o.size()+" elements (direct="+n+")"),n)e(o);else for(let s=0;s<o.length;s++)e(o[s]);else e(i)}}moveAllMatches(e){for(let r=0;r<this.matchComponents.length;r++){const n=this.matchComponents[r];n.length!==1&&this.moveNodes(n.nodes(),e)}}moveNodes(e,r){e.positions(e[0].position());for(let n=1;n<e.length;n++)e[n].shift({x:r*Math.cos(2*Math.PI*n/(e.length-1)),y:r*Math.sin(2*Math.PI*n/(e.length-1))})}async combineMatch(e){await lo(()=>{if(!e){this.cy.startBatch(),this.cy.nodes(":child").move({parent:null}),this.cy.nodes("[id ^= 'parent']").remove(),this.matchComponents.length=0,this.cy.endBatch();return}this.cy.startBatch();const r=this.cy.edges('[pl="closeMatch"]').filter(".unfiltered").not(".hidden"),n=this.cy.nodes(".unfiltered").not(".hidden").union(r);!this.moveMatchNotified&&this.cy.nodes(":visible").size()>1e3&&(_e.info("Combining Matches. Consider using Move Matches Nearby or Move Matches on top of each other."),this.moveMatchNotified=!0),this.matchComponents.length=0,this.matchComponents.push(...n.components());for(let i=0;i<this.matchComponents.length;i++){const a=this.matchComponents[i];if(a.length===1)continue;const o="parent"+i,s={};let u=a.nodes();for(let f=0;f<u.length;f++){const v=u[f].data("l");for(const g in v)s[g]||(s[g]=new Set),v[g].forEach(h=>s[g].add(h))}for(const f in s)s[f]=[[...s[f]].reduce((v,g)=>v+", "+g)];const l=["bb","ob","he","it4it","ciox","bb2"],c=f=>{let v=l.indexOf(f);return v===-1&&(v=99),v};u=u.sort((f,v)=>c(f.data(et.SOURCE))-c(v.data(et.SOURCE))),this.cy.add({group:"nodes",data:{id:o,l:s}});for(let f=0;f<u.length;f++)u[f].move({parent:o})}this.cy.endBatch()})}showCloseMatch(e){const r=e.connectedEdges(".unfiltered").filter('[pl="closeMatch"]'),n=r.connectedNodes(".unfiltered");_e.debug(`Showing close matches of ${e.length} nodes ${JSON.stringify(e.map(a=>a.id()))}.
Results: ${JSON.stringify(n.map(a=>a.id()))}`);const i=n.union(r);wt.setVisible(i,!0),wt.starStyle(i)}async newGraph(e=!1){if(!e&&this!==We.mainView.state.graph)return this;const r=new We(!0);return await r.initialized,r.state.graph}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hr=function(){return Hr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hr.apply(this,arguments)},QA=(function(){function t(e){this.options=e,this.listeners={}}return t.prototype.on=function(e,r){var n=this.listeners[e]||[];this.listeners[e]=n.concat([r])},t.prototype.triggerEvent=function(e,r){var n=this,i=this.listeners[e]||[];i.forEach(function(a){return a({target:n,event:r})})},t})(),xa;(function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"})(xa||(xa={}));var JA=(function(){function t(){this.notifications=[]}return t.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,xa.Add,this.notifications)},t.prototype.splice=function(e,r){var n=this.notifications.splice(e,r)[0];return this.updateFn(n,xa.Remove,this.notifications),n},t.prototype.indexOf=function(e){return this.notifications.indexOf(e)},t.prototype.onUpdate=function(e){this.updateFn=e},t})(),Xn;(function(t){t.Dismiss="dismiss",t.Click="click"})(Xn||(Xn={}));var Gp={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},e_=(function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),r=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(r),document.body.appendChild(e),this.container=r,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(e,r){var n;this.events=Hr(Hr({},this.events),(n={},n[e]=r,n))},t.prototype.update=function(e,r){r===xa.Add?this.addNotification(e):r===xa.Remove&&this.removeNotification(e)},t.prototype.removeNotification=function(e){var r=this,n=this._popRenderedNotification(e),i;if(n){i=n.node,i.classList.add("notyf__toast--disappear");var a;i.addEventListener(this.animationEndEventName,a=function(o){o.target===i&&(i.removeEventListener(r.animationEndEventName,a),r.container.removeChild(i))})}},t.prototype.addNotification=function(e){var r=this._renderNotification(e);this.notifications.push({notification:e,node:r}),this._announce(e.options.message||"Notification")},t.prototype._renderNotification=function(e){var r,n=this._buildNotificationCard(e),i=e.options.className;return i&&(r=n.classList).add.apply(r,i.split(" ")),this.container.appendChild(n),n},t.prototype._popRenderedNotification=function(e){for(var r=-1,n=0;n<this.notifications.length&&r<0;n++)this.notifications[n].notification===e&&(r=n);if(r!==-1)return this.notifications.splice(r,1)[0]},t.prototype.getXPosition=function(e){var r;return((r=e==null?void 0:e.position)===null||r===void 0?void 0:r.x)||"right"},t.prototype.getYPosition=function(e){var r;return((r=e==null?void 0:e.position)===null||r===void 0?void 0:r.y)||"bottom"},t.prototype.adjustContainerAlignment=function(e){var r=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],i=this.container.style;i.setProperty("justify-content",n),i.setProperty("align-items",r)},t.prototype._buildNotificationCard=function(e){var r=this,n=e.options,i=n.icon;this.adjustContainerAlignment(n);var a=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),s=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),u=this._createHTMLElement({tagName:"div",className:"notyf__message"});u.innerHTML=n.message||"";var l=n.background||n.backgroundColor;if(i){var c=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof i=="string"||i instanceof String)&&(c.innerHTML=new String(i).valueOf()),typeof i=="object"){var f=i.tagName,v=f===void 0?"i":f,g=i.className,h=i.text,m=i.color,w=m===void 0?l:m,b=this._createHTMLElement({tagName:v,className:g,text:h});w&&(b.style.color=w),c.appendChild(b)}s.appendChild(c)}if(s.appendChild(u),a.appendChild(s),l&&(n.ripple?(o.style.background=l,a.appendChild(o)):a.style.background=l),n.dismissible){var C=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),E=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});C.appendChild(E),s.appendChild(C),a.classList.add("notyf__toast--dismissible"),E.addEventListener("click",function(k){var A,p;(p=(A=r.events)[Xn.Dismiss])===null||p===void 0||p.call(A,{target:e,event:k}),k.stopPropagation()})}a.addEventListener("click",function(k){var A,p;return(p=(A=r.events)[Xn.Click])===null||p===void 0?void 0:p.call(A,{target:e,event:k})});var x=this.getYPosition(n)==="top"?"upper":"lower";return a.classList.add("notyf__toast--"+x),a},t.prototype._createHTMLElement=function(e){var r=e.tagName,n=e.className,i=e.text,a=document.createElement(r);return n&&(a.className=n),a.textContent=i||null,a},t.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},t.prototype._announce=function(e){var r=this;this.a11yContainer.textContent="",setTimeout(function(){r.a11yContainer.textContent=e},100)},t.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),r={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},n;for(n in r)if(e.style[n]!==void 0)return r[n];return"animationend"},t})(),t_=(function(){function t(e){var r=this;this.dismiss=this._removeNotification,this.notifications=new JA,this.view=new e_;var n=this.registerTypes(e);this.options=Hr(Hr({},Gp),e),this.options.types=n,this.notifications.onUpdate(function(i,a){return r.view.update(i,a)}),this.view.on(Xn.Dismiss,function(i){var a=i.target,o=i.event;r._removeNotification(a),a.triggerEvent(Xn.Dismiss,o)}),this.view.on(Xn.Click,function(i){var a=i.target,o=i.event;return a.triggerEvent(Xn.Click,o)})}return t.prototype.error=function(e){var r=this.normalizeOptions("error",e);return this.open(r)},t.prototype.success=function(e){var r=this.normalizeOptions("success",e);return this.open(r)},t.prototype.open=function(e){var r=this.options.types.find(function(a){var o=a.type;return o===e.type})||{},n=Hr(Hr({},r),e);this.assignProps(["ripple","position","dismissible"],n);var i=new QA(n);return this._pushNotification(i),i},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(e,r){var n=this;e.forEach(function(i){r[i]=r[i]==null?n.options[i]:r[i]})},t.prototype._pushNotification=function(e){var r=this;this.notifications.push(e);var n=e.options.duration!==void 0?e.options.duration:this.options.duration;n&&setTimeout(function(){return r._removeNotification(e)},n)},t.prototype._removeNotification=function(e){var r=this.notifications.indexOf(e);r!==-1&&this.notifications.splice(r,1)},t.prototype.normalizeOptions=function(e,r){var n={type:e};return typeof r=="string"?n.message=r:typeof r=="object"&&(n=Hr(Hr({},n),r)),n},t.prototype.registerTypes=function(e){var r=(e&&e.types||[]).slice(),n=Gp.types.map(function(i){var a=-1;r.forEach(function(s,u){s.type===i.type&&(a=u)});var o=a!==-1?r.splice(a,1)[0]:{};return Hr(Hr({},i),o)});return n.concat(r)},t})();function r_(){const t=new t_({duration:1e4,types:[{type:"warn",backgroundColor:"orange",icon:{className:"material-icons",tagName:"i",text:"warning"}},{type:"info",backgroundColor:"green",icon:{className:"material-icons",tagName:"i",text:"info"}},{type:"debug",backgroundColor:"blue",icon:{className:"material-icons",tagName:"i",text:"debug"}},{type:"trace",backgroundColor:"darkgray",icon:{className:"material-icons",tagName:"i",text:"trace"}}]});_e.setLevel(Fe.logLevelConsole);const e=["error","warn","info","debug","trace"],r={silent:0,error:1,warn:2,info:3,debug:4,trace:5};for(const n of e){const i=_e[n];_e[n]=a=>{i(a),r[n]<=r[Fe.logLevelMemory]&&(_e.logs||(_e.logs=[]),_e.logs.push(a)),r[n]<=r[Fe.logLevelDisplay]&&t.open({type:n,message:a})}}}const Xa=[];function n_(){document.documentElement.addEventListener("keydown",t=>{const e=t.target;if(!e||e.nodeName!=="BODY")return;const r=We.activeState();if(r){if((t.code==="Delete"||t.code==="Backspace")&&r.cy.remove(":selected"),t.code==="KeyS"||t.code==="KeyC"){const n=r.cy.elements(":selected");if(n.size()===0)return;Xa.length=0,Xa.push(...n.map(i=>i.id())),_e.debug(`Copied ${Xa.length} elements from ${r.name}.`),_e.info("Partial graph copied!")}if(t.code==="KeyP"||t.code==="KeyV"){r.cy.startBatch(),r.cy.elements().unselect();const n=r.graph.getElementsByAllMeansNecessary(Xa);wt.setVisible(n,!0),r.cy.endBatch();const i=r.cy.nodes(".unfiltered").not(".hidden"),a=n.nodes().edgesWith(i),o=n.union(a);wt.setVisible(o,!0),o.select(),r.cy.fit(r.cy.elements(".unfiltered").not(".hidden")),_e.debug(`Pasted ${Xa.length} elements into ${r.name}.`),_e.info("Partial graph inserted!")}}})}async function i_(){if(window.mainCalled){_e.warn("main() is called multiple times for unknown reasons. Ignoring.");return}window.mainCalled=!0,console.groupCollapsed("Initializing"),console.time("Initializing"),r_(),n_(),Qr.init({openTrigger:"data-custom-open"});for(let t=0;t<Fe.multiview.initialTabs;t++)await new We().initialized;console.timeEnd("Initializing"),console.groupEnd()}document.addEventListener("DOMContentLoaded",i_);
//# sourceMappingURL=main-BnT-ay6r.js.map
